(window.webpackJsonp=window.webpackJsonp||[]).push([["5BnR"],{"5BnR":function(e,t,i){"use strict";i.r(t);i("91GP"),i("rGqo");var a=i("lX1r"),n=i("uTIz"),s=i("LCER"),o=(i("z0WU"),{name:"dialog-option",props:["initData","visible"],data:function(){return{nextButtonShow:!0,dialogTopLoading:!1,isVisible:!1,title:"",searchConfig:{hideSearchSwitch:!1},searchList:[{label:"订单号",type:"input",ruleType:"string",mapKey:"orderCode",configs:{},placeholder:"订单号"},{label:"下单日期起",type:"date",ruleType:"date",mapKey:"orderDateBegin",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"},{label:"下单日期止",type:"date",ruleType:"date",mapKey:"orderDateEnd",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"}],guid:"",currentpage:1,maxLayer:2,expandTableApiList:["listPageOrderReceiveDetail","listPageSaleDeliverDetail"],expandTableApiParams:[{},{}],tableData:{},initParams:{},updateViewData:{},searchObj:{},childrenData:{},customColumn:{1:[],2:[]},tableSets:{1:{showCheckBox:!0,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},temp:{},tempQuery:{},tempLable:{},selectList:[],pageData:null,pageNo:1,openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{expandTable:a.a,searchBar:n.a,dialogReceiptAdd:s.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,"订单收款明细"==this.title?this.nextButtonShow=!1:this.nextButtonShow=!0,this.temp=this.initData.temp,this.initExpandTable()},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{nextPage:function(){if(this.selectList.length<=0)this.$message({showClose:!0,message:"请勾选收款费用分摊明细！",duration:5e3});else{var e="";this.selectList.forEach(function(t){e=e?e+",'"+t.id+"'":"'"+t.id+"'"}),this.dialogData.temp=this.temp,this.dialogData.ids=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="订单结算",this.openDialogName="dialogReceiptAdd",this.showDialog=!0,this.visibleState=!0}},dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState?this.dialogClose():(this.initExpandTable(),this.selectList=[])},initExpandTable:function(){var e=this;this.$api[this.expandTableApiList[0]](this.setParams(1,this.initParams,this.currentpage)).then(function(t){e.tableData={row:null,layer:1,res:t,customColumn:e.customColumn},e.$loading().close()}).catch(function(t){console.log(t),e.$loading().close()})},findChildByRow:function(e,t,i,a,n){var s=this;this.$api[this.expandTableApiList[t-1]](this.setParams(t,e,n)).then(function(i){s.childrenData={row:e,layer:t,res:i,customColumn:s.customColumn}}).catch(function(e){console.log(e)})},setParams:function(e,t,i){if(e>1){var a=this.expandTableApiParams[e-1];for(var n in a)a.hasOwnProperty(n)&&(a[n]=t[n]||"");return Object.assign({},a,this.searchObj,{pageNo:i},{orderId:t.id})}return Object.assign({},t,this.searchObj,{pageNo:i},{customerId:this.temp.id})},sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.initExpandTable()},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{pageNo:function(){}}}),l=i("KHd+"),r=Object(l.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":"",width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,searchConfig:e.searchConfig},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}],staticStyle:{height:"500px"}},[i("el-col",{staticStyle:{height:"100%"},attrs:{span:24}},[i("div",{staticStyle:{height:"calc(100% - 60px)","box-sizing":"border-box",padding:"7px"}},[i("expand-table",{attrs:{initData:e.tableData,childrenData:e.childrenData,configs:e.tableSets,currentpage:e.currentpage,apiObj:{apiName:e.expandTableApiList,apiParams:e.expandTableApiParams},updateViewData:e.updateViewData},on:{"update:currentpage":function(t){e.currentpage=t},databridge:e.databridge,"send-children-row":e.findChildByRow}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center","padding-bottom":"10px"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.nextButtonShow,expression:"nextButtonShow"}],on:{click:e.nextPage}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)],1)},[],!1,null,null,null);r.options.__file="dialogSelectDeliverList.vue";t.default=r.exports}}]);