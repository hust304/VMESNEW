(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2649"],{"+bwc":function(e,t,i){"use strict";i.r(t);i("91GP");var o=i("fFUy"),a=i("uTIz"),r=i("5Fd+"),l=i("Pk/H"),s=i("rwyD"),n={props:["colConfig","scope"],template:'<div class="btnBox">\n              <el-button v-show="colConfig.infoByParent_isShow" type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.infoByParent(scope.row,scope.$index)">详情</el-button>\n              <el-button v-show="colConfig.lockCountByParent_isShow" type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.lockCountByParent(scope.row,scope.$index)">锁库</el-button>\n    \t\t\t\t </div>'},d={props:["colConfig","scope"],template:'<div class="btnBox">\n              <el-button v-show="colConfig.rebackLockCountByDetail_isShow && (scope.row.state == \'2\' || scope.row.state == \'3\')" type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.rebackLockCountByDetail(scope.row,scope.$index)">解锁</el-button>\n    \t\t\t\t </div>'},c={components:{customRowTable:o.a,searchBar:a.a,orderCollect:r.default,dialogOrderDetailLockStock:l.default},data:function(){return{firstFieldCode:"sysCode,customerName,orderDate,deliverDate,orderStateByQuery,receiveProgress,advanceSum,isInvoice",openDialogName:"",showDialog:!1,visible:!1,dialogData:{dialog_width:"",orderDetail_style:"",deliverDetail_style:"",title:"",temp:null,orderId:"",orderObject:{},tempLable:null},searchList:[{label:"订单编号",type:"input",ruleType:"string",mapKey:"sysCode",configs:{},placeholder:"订单编号"},{label:"客户名称",type:"input",ruleType:"string",mapKey:"customerName",configs:{},placeholder:"客户名称"},{label:"订单状态",type:"select",ruleType:"string",mapKey:"state",configs:{clearable:!0,name:"",options:[{value:"0",label:"待提交"},{value:"1",label:"待审核"},{value:"2",label:"待发货"},{value:"3",label:"已发货"},{value:"4",label:"已完成"},{value:"-1",label:"已取消"}]},placeholder:"请选择"},{label:"下单日期起",type:"date",ruleType:"date",mapKey:"orderDateBegin",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"},{label:"下单日期止",type:"date",ruleType:"date",mapKey:"orderDateEnd",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"},{label:"约定交期",type:"date",ruleType:"date",mapKey:"expectDate",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"},{label:"发票类型",type:"select",ruleType:"string",mapKey:"receiptType",configs:{clearable:!0,name:"",options:[{value:"1",label:"不开票"},{value:"2",label:"增值税普通发票"},{value:"3",label:"增值税专用发票"}]},placeholder:"请选择"},{label:"订单明细状态",type:"select",ruleType:"string",mapKey:"orderDtlState",configs:{clearable:!0,name:"",options:[{value:"0",label:"待提交"},{value:"1",label:"待审核"},{value:"2",label:"待生产"},{value:"3",label:"待出库"},{value:"4",label:"待发货"},{value:"5",label:"已完成"},{value:"-1",label:"已取消"}]},placeholder:"请选择"}],searchMethod:{},searchConfig:{},guid:"",currentpage:1,searchObj:{},customColumn:{0:[{columnIndex:"last",prop:"operate",label:"操作",component:n,infoByParent_isShow:!0,infoByParent:this.infoByParent,lockCountByParent_isShow:!0,lockCountByParent:this.lockCountByParent}],1:[{columnIndex:"last",prop:"operate",label:"操作",component:d,rebackLockCountByDetail_isShow:!0,rebackLockCountByDetail:this.rebackLockCountByDetail}]},tableSets:{0:{showCheckBox:!1,showIndex:!0,expandOne:!1,isSortable:!1,showPageData:!0},1:{showCheckBox:!0,showIndex:!0,isSortable:!1,isSingle:!0}},precision:2,apiObj:{apiName:"listPageSaleOrderQuery",params:{pageNo:1,firstFieldCode:"",secondFieldCode:"productCode,productName,productSpec,productGenreName,orderUnitName,orderCount,lockCount,productPrice,productSum,stateName,deliverProgress",orderStr:"  saleOrder.sys_code desc "}},mergeColumn:{0:[{index:1,columns:[{keyName:"sysCode",componentName:"el-button",hideTitle:!1,_cellConfig:{methodName:"infoByParentBySysCode"}}]},{index:3,columns:["orderDate","deliverDate"]},{index:4,alias:"合并后的列",columns:[{keyName:"orderStateByQuery",componentName:"el-steps",titleStyle:{"font-weight":600},componentConfig:{titleList:["待提交","待审核","待发货","已发货","已完成"]}},{keyName:"receiveProgress",componentName:"el-progress",titleStyle:{"font-weight":600,color:"#FF9900"},componentConfig:{"text-inside":!0,"stroke-width":18,color:"#009933","show-text":!0}}]}],1:[{index:10,alias:"进度",width:300,columns:[{keyName:"deliverProgress",componentName:"el-progress",titleStyle:{"font-weight":600,color:"#FF9900"},componentConfig:{"text-inside":!1,"stroke-width":16,color:"#199ED4","show-text":!0,showInitValue:!0}}]}]}}},beforeCreate:function(){},created:function(){this.apiObj.params.firstFieldCode=this.firstFieldCode},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},methods:{getData:function(){this.$refs.treeFormTable.getData()},formData:function(e){},databridge:function(e){},sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(i){e(),t.showDialog=!1,t.fromTemp={}}).catch(function(e){})},closeDialog:function(e){this.visible=!1,this.showDialog=!1},infoByParentBySysCode:function(e){null!=e&&null!=e.row&&this.infoByParent(e.row,null)},infoByParent:function(e,t){var i=e,o=document.body.clientWidth,a=document.body.clientHeight,r=.8*o;this.dialogData.dialog_width=r+"px";var l=.9*a,s=.25*l+"px";this.dialogData.orderDetail_style="height:"+s+";width: 96%;margin-left: 2%;";var n=.25*l+"px";this.dialogData.deliverDetail_style="height:"+n+";width: 96%;margin-left: 2%;",this.dialogData.temp=i,this.dialogData.orderObject=i,this.dialogData.orderId=i.id,this.dialogData.title="订单详情",this.openDialogName="orderCollect",this.showDialog=!0,this.visible=!0},rebackLockCountByDetail:function(e,t){var i=this,o=e.lockCount;if(null!=o&&(o+"").trim().length>0&&o-0==0)this.$message({type:"warning",duration:5e3,showClose:!0,message:"该货品锁定库存数量为零，无需(解锁)操作！"});else{var a={id:e.id,productId:e.productId,productLockCount:e.productLockCount,lockCount:e.lockCount};this.$confirm("此操解锁该货品在库存中的锁定数量, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.rebackSaleOrderDetailByLockCount)(a).then(function(e){0===e.code&&i.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3})}).catch(function(e){})}).catch(function(){i.$message({type:"info",message:"已取消解锁"})})}},lockCountByParent:function(e,t){var i=document.body.clientWidth,o=(document.body.clientHeight,.5*i);this.dialogData.dialog_width=o+"px";var a=.75*(.618*o)+"px";this.dialogData.orderDetail_style="height:"+a+";width: 96%;margin-left: 2%;",this.dialogData.orderId=e.id,this.dialogData.title="锁定产品库存数量",this.openDialogName="dialogOrderDetailLockStock",this.showDialog=!0,this.visible=!0},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)}},computed:{tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0):0},setApiObj:function(){var e=Object.assign({},this.apiObj.params,this.searchObj);return{apiName:this.apiObj.apiName,params:e}},dialogName:function(){return this.openDialogName}},watch:{currentpage:function(){}}},u=(i("lUQU"),i("KHd+")),p=Object(u.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"orderQuery"},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{staticStyle:{border:"1px solid #E4E4E4","border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.tableHeight+"px","margin-top":e.searchList.length?"10px":"0"}},[i("custom-row-table",{ref:"treeFormTable",attrs:{"expand-all":!0,keyValue:!0,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:{},precision:e.precision,apiObj:e.setApiObj,mergeColumn:e.mergeColumn},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visible},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);p.options.__file="index.vue";t.default=p.exports},"50Ol":function(e,t,i){"use strict";i("rGqo"),i("KKXr"),i("91GP");var o={name:"custom-summary-option",props:{customSummary:{type:Object,default:function(){return{}}},tableData:{type:Array,default:function(){return[]}},tempData:{type:Object,default:function(){return{}}}},data:function(){return{boxDefaultStyle:{width:"600px",float:"left"},data:{}}},directives:{"send-height":{inserted:function(e,t,i){i.context.$emit("send-height",e.clientHeight)}}},computed:{setStyle:function(){return this.customSummary.boxStyle||this.boxDefaultStyle},setData:function(){return this.customSummary.computes&&this.createFormula(this.customSummary.computes,this.tableData,this.tempData),this.data}},created:function(){this.data=this.customSummary.data,this.customSummary.apiObj&&this.customSummary.apiObj.apiName&&this.httpRequests()},mounted:function(){},methods:{httpRequests:function(){var e=this;try{this.$api[this.customSummary.apiObj.apiName](Object.assign({},this.customSummary.apiObj.params)).then(function(t){t.result&&e.assignmentFn(t.result)}).catch(function(e){console.log(e)})}catch(e){console.log(e)}},assignmentFn:function(e){for(var t in this.data)this.data.hasOwnProperty(t)&&(this.data[t]=e[t])},createFormula:function(e,t,i){for(var o in e)if(e.hasOwnProperty(o)){var a=e[o].split(/\([\\+|\-|\\*|\\/]\)/);if(a.length>1)a.forEach(function(e){});else{var r=e[o].split("@");"table"===r[0]&&(this.data[o]=this.getSum(r[1],t))}}},getSum:function(e,t){var i=0;return t.forEach(function(t){i+=t[e]-0}),i},customSummaryValue:function(e){this.$emit("custom-summary-value",e)}}},a=(i("MtNS"),i("KHd+")),r=Object(a.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"customSummaryOption clearfix"},[t(this.customSummary.component,{directives:[{name:"send-height",rawName:"v-send-height"}],tag:"component",attrs:{data:this.setData,tempData:this.tempData,setStyle:this.customSummary.boxStyle},on:{"custom-summary-value":this.customSummaryValue}})],1)},[],!1,null,null,null);r.options.__file="index.vue";t.a=r.exports},"5Fd+":function(e,t,i){"use strict";i.r(t);var o=i("WIyV"),a=i("8Vv6"),r={components:{customBaseTable:o.a},name:"dialog-edit",props:["initData","visible"],data:function(){return{orderId:"",orderObject:{},orderCollect:{},isShowText:!1,rowData:{},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",tempLable:null,data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tableData_orderDetail:[],apiObj_orderDetail:{apiName:"listPageOrderDetailCollectByInfo",params:{pageNo:1,parentId:"",fieldCode:"productCode,productName,productSpec,productGenreName,orderUnitName,orderCount,productPrice,productSum,deliverCount,deliverSum,invoiceCount,invoiceSum,deliverDate,remark"}},customColumn_orderDetail:[],mergeTitle_orderDetail:[],mergeColumn_orderDetail:[],mergeRow_orderDetail:[],keyMapping_orderDetail:{},tempData_orderDetail:{},tableData_deliverDetail:[],apiObj_deliverDetail:{apiName:"listPageSaleDeliverDetail",params:{pageNo:1,state:"1",orderId:"",orderStr:"detail.product_id,detail.cdate asc",fieldCode:"productCode,productName,productSpec,productGenreName,orderUnitName,orderCount,productPrice,sum,cdate,deliverDate"}},customColumn_deliverDetail:[],mergeTitle_deliverDetail:[],mergeColumn_deliverDetail:[],mergeRow_deliverDetail:[],keyMapping_deliverDetail:{},tempData_deliverDetail:{}}},beforeCreate:function(){},created:function(){this.orderObject=this.initData.orderObject,this.orderId=this.initData.orderId,this.apiObj_orderDetail.params.parentId=this.orderId,this.apiObj_deliverDetail.params.orderId=this.orderId,this.findOrderCollectByOrderId(this.orderId)},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},findOrderCollectByOrderId:function(e){var t=this;this.dialogLoading=!0,Object(a.getSaleOrderCollectByOrderId)({id:e}).then(function(e){t.dialogLoading=!1,0===e.code&&null!=e.result&&null!=e.result.varList&&e.result.varList.length>0&&(t.orderCollect=e.result.varList[0])}).catch(function(e){console.log(e),t.dialogLoading=!1})}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},setInputState:function(){return""===this.orderCollect.receiveDaysRemaining||void 0===this.orderCollect.receiveDaysRemaining||(this.orderCollect.receiveDaysRemaining-0>=0||(this.orderCollect.receiveDaysRemaining=-1*this.orderCollect.receiveDaysRemaining,this.isShowText=!0,!1))}}},l=(i("ghff"),i("KHd+")),s=Object(l.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"2em 2.3em"}},[i("el-row",{staticStyle:{"margin-bottom":"10px"}},[i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("客户名称  :  ")]),e._v(e._s(e.orderCollect.customerName))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("下单日期  :  ")]),e._v(e._s(e.orderCollect.orderDate))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("制单人  :  ")]),e._v(e._s(e.orderCollect.makeName))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("备注  :  ")]),e._v(e._s(e.orderCollect.remark))])])],1),e._v(" "),i("el-row",{staticStyle:{"margin-bottom":"10px"}},[i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("订单编号  :  ")]),e._v(e._s(e.orderCollect.sysCode))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("约定交期  :  ")]),e._v(e._s(e.orderCollect.expectDate))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("发票类型  :  ")]),e._v(e._s(e.orderCollect.receiptTypeName))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("审核人:")]),e._v(e._s(e.orderCollect.auditName))])])],1),e._v(" "),i("el-row",{staticStyle:{"margin-bottom":"10px"}},[i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("发货完成日期  :  ")]),e._v(e._s(e.orderCollect.deliverDate))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("付款完成日期  :  ")]),e._v(e._s(e.orderCollect.payDate))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("账期截止日  :  ")]),e._v(e._s(e.orderCollect.deadlineDate))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",{style:{color:e.setInputState?"#606266":"#ff0000"}},[e._v(e._s(e.setInputState?"账期剩余(天)  :  ":"逾期(天)  :  ")+"  ")]),e._v(e._s(e.orderCollect.receiveDaysRemaining))])])],1),e._v(" "),i("el-row",{staticStyle:{"margin-bottom":"10px"}},[i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("发货金额  :  ")]),e._v(e._s(e.orderCollect.deliverAmount))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("折扣金额  :  ")]),e._v(e._s(e.orderCollect.discountedAmount))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("实收金额  :  ")]),e._v(e._s(e.orderCollect.receivedAmount))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("应收金额  :  ")]),e._v(e._s(e.orderCollect.nowReceiveAmount))])])],1),e._v(" "),i("el-row",{staticStyle:{"margin-bottom":"10px"}},[i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("订单金额  :  ")]),e._v(e._s(e.orderCollect.orderAmount))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("开票金额  :  ")]),e._v(e._s(e.orderCollect.invoiceAmount))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowText,expression:"isShowText"}],staticStyle:{color:"red"}},[i("b",[e._v("逾期金额  :  ")]),e._v(e._s(e.orderCollect.receivables))])]),e._v(" "),i("el-col",{attrs:{span:6}}),e._v(" "),i("el-col",{attrs:{span:6}})],1)],1),e._v(" "),i("el-row",{style:e.initData.orderDetail_style},[i("custom-base-table",{ref:"orderDetailDialog",attrs:{isSortable:!1,varList:e.tableData_orderDetail,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn_orderDetail,apiObj:e.apiObj_orderDetail,mergeTitle:e.mergeTitle_orderDetail,mergeColumn:e.mergeColumn_orderDetail,mergeRow:e.mergeRow_orderDetail,tempData:e.tempData_orderDetail,componentId:"orderDetailDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping_orderDetail,hidePages:!0},on:{databridge:e.databridge}})],1),i("br"),e._v(" "),i("el-row",{style:e.initData.deliverDetail_style},[i("custom-base-table",{ref:"deliverDetailDialog",attrs:{isSortable:!1,varList:e.tableData_deliverDetail,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn_deliverDetail,apiObj:e.apiObj_deliverDetail,mergeTitle:e.mergeTitle_deliverDetail,mergeColumn:e.mergeColumn_deliverDetail,mergeRow:e.mergeRow_deliverDetail,tempData:e.tempData_deliverDetail,componentId:"deliverDetailDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping_deliverDetail,hidePages:!0},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="orderCollect.vue";t.default=s.exports},"6P51":function(e,t,i){},DKCI:function(e,t,i){"use strict";i("rGqo"),i("INYr");var o={name:"table-filter",props:{headerList:{type:Array,default:function(){return[]}},showAll:{type:Boolean,default:!1},storeId:{type:String,default:""},componentId:{type:String,default:""}},directives:{"auto-width":{inserted:function(e,t,i){i.context.widthList[t.value]=e.clientWidth}}},data:function(){return{checkList:[],widthSwitch:!1,checkViewWidth:0,checkViewHeight:0,checkViewWidthTimer:"",widthList:[],userConfig:"",storeKey:"",userId:"",localStoreKey:"",useStore:!1,tempList:""}},created:function(){this.storeKey="tableFilter"+this.storeId,this.userId=this.$storage.get("userInfo").userId||"",this.tempList=this.localStore(this.componentId,this.storeKey,this.userId),this.$emit("checked-list",this.tempList)},computed:{setHeight:function(){return this.checkViewHeight&&this.widthSwitch?(this.$emit("checked-height",this.checkViewHeight),this.checkViewHeight):(this.$emit("checked-height",20),20)},setHeaderList:function(){var e=this;return this.headerList.filter(function(t){return e.showAll?t:!t.component})}},methods:{checkedList:function(e){localStorage.setItem(this.localStoreKey,JSON.stringify(e)),this.$emit("checked-list",e)},viewSwitch:function(){this.widthSwitch=!this.widthSwitch},localStore:function(e,t,i){return this.localStoreKey="_"+e+t+i,JSON.parse(localStorage.getItem(this.localStoreKey))||""},setChecked:function(e){return!this.tempList||!Array.isArray(this.tempList)||this.tempList.findIndex(function(t){return t===e.label})>-1}},watch:{widthSwitch:function(){var e=this;this.widthSwitch&&!this.checkViewHeight&&(clearTimeout(this.checkViewWidthTimer),this.checkViewWidthTimer=setTimeout(function(t){var i=0;e.widthList.forEach(function(e){e-0&&(i+=e+15)}),e.checkViewHeight=20*Math.ceil(i/e.$refs.checkBoxView.clientWidth)},200))}}},a=(i("DlFo"),i("KHd+")),r=Object(a.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tableFilter",style:{height:e.setHeight+"px"}},[i("div",{staticClass:"msg",attrs:{title:"列开关"},on:{click:e.viewSwitch}},[i("svg-icon",{attrs:{"icon-class":"tableSetting"}})],1),e._v(" "),i("div",{ref:"checkBoxView",staticClass:"checkView",class:{setWidth:e.widthSwitch}},[i("div",{staticStyle:{position:"relative"}},[i("div",{staticStyle:{position:"absolute",top:"0",left:"0"}},[i("el-checkbox-group",{attrs:{size:"mini"},on:{change:e.checkedList},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.setHeaderList,function(t,o){return i("el-checkbox",{directives:[{name:"auto-width",rawName:"v-auto-width",value:o,expression:"index"}],key:t.prop,attrs:{label:t.label,checked:e.setChecked(t)}})}),1)],1)])])])},[],!1,null,"2ad1a997",null);r.options.__file="index.vue";t.a=r.exports},DlFo:function(e,t,i){"use strict";var o=i("kjwg");i.n(o).a},MtNS:function(e,t,i){"use strict";var o=i("Mugr");i.n(o).a},Mugr:function(e,t,i){},"Pk/H":function(e,t,i){"use strict";i.r(t);i("rGqo"),i("Oyvg");var o=i("8Vv6"),a={components:{customBaseTable:i("WIyV").a},name:"dialog-edit",props:["initData","visible"],data:function(){return{orderId:"",orderObject:{},orderCollect:{},rowData:{},orderDtlList:[],rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",tempLable:null,data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tableData_orderDetail:[],apiObj_orderDetail:{apiName:"listPageOrderDetailByLockCount",params:{pageNo:1,parentId:"",queryStr:"detail.state in ('2','3')",fieldCode:"productCode,productName,productSpec,productGenreName,orderUnitName,orderCount,productStockCountByPrice,deliverCount,needDeliverCount"}},customColumn_orderDetail:[{columnIndex:"needDeliverCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}}],mergeTitle_orderDetail:[],mergeColumn_orderDetail:[],mergeRow_orderDetail:[],keyMapping_orderDetail:{},tempData_orderDetail:{}}},beforeCreate:function(){},created:function(){this.orderId=this.initData.orderId,this.apiObj_orderDetail.params.parentId=this.orderId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){Array.isArray(e)&&(this.orderDtlList=[],this.orderDtlList=e)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},checkColumn:function(e){for(var t="",i=(this.temp.expectDate,0);i<e.length;i++){var o=e[i],a=o.maxLockCount,r=o.needDeliverCount;null==r||0==(r+"").trim().length?t=t+"第 "+(i+1)+" 行: 锁定货品数量为空或空字符串！":(r+="").trim().length>0&&!this.isNumberByValue(r.trim())&&(t=t+"第 "+(i+1)+" 行: 锁定货品数量("+r+") 输入错误，请输入大于零的正整数或(1,2)位小数！"),r>a&&(t=t+"第 "+(i+1)+" 行: 锁定货品数量("+r+") 输入错误，不可大于"+a+"(订购数量 - 发货完成数量)")}return t},save:function(){this.$refs.orderDetailLockStockDialog.getData(),this.saveSaleOrder(this.orderDtlList)},saveSaleOrder:function(e){var t=this;if(null!=e&&0!=e.length){var i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{var a=[];e.forEach(function(e){var t={id:e.id,productId:e.productId,versionLockCount:e.versionLockCount,productLockCount:e.productLockCount,lockCount:e.lockCount,needDeliverCount:e.needDeliverCount,stockCount:e.stockCount,p2nFormula:e.p2nFormula,n2pFormula:e.n2pFormula};a.push(t)});var r=JSON.stringify(a);Object(o.updateSaleOrderByLockCount)({orderId:this.orderId,dtlJsonStr:r}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"订单明细为空！"})}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}}},r=i("KHd+"),l=Object(r.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{style:e.initData.orderDetail_style},[i("custom-base-table",{ref:"orderDetailLockStockDialog",attrs:{isSortable:!1,varList:e.tableData_orderDetail,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn_orderDetail,apiObj:e.apiObj_orderDetail,mergeTitle:e.mergeTitle_orderDetail,mergeColumn:e.mergeColumn_orderDetail,mergeRow:e.mergeRow_orderDetail,tempData:e.tempData_orderDetail,componentId:"orderDetailLockStockDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping_orderDetail,hidePages:!0},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("修改")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);l.options.__file="dialogOrderDetailLockStock.vue";t.default=l.exports},S8Ej:function(e,t,i){},ghff:function(e,t,i){"use strict";var o=i("S8Ej");i.n(o).a},kjwg:function(e,t,i){},lUQU:function(e,t,i){"use strict";var o=i("6P51");i.n(o).a},mwzG:function(e,t,i){"use strict";t.a={code:0,msg:"执行成功!",result:{hideTitles:["id","productGenre","productUnit","parentId","warehouseId","productId","code","executeCount","state","cuser","uuser","remark","isdisable","qrcode","businessId"],pageData:{current:1,pages:"1",records:[],size:10,total:"1"},titles:[{progress:"进度"},{warehouseOutCode:"出库单编码"},{productCode:"货品编码"},{productName:"货品名称"},{productSpec:" 规格/型号"},{productGenreName:"货品属性"},{productUnitName:"计量单位"},{count:"出库数量"},{id:"id"},{productGenre:"货品属性ID"},{productUnit:"计量单位ID"},{parentId:"出库单ID"},{warehouseId:" (推荐)货位ID"},{productId:"产品ID"},{code:"批次号"},{executeCount:"已出库数量"},{state:"状态"},{cuser:"创建用户id"},{cdate:"创建时间"},{uuser:"修改用户id"},{udate:"修改时间"},{remark:"备注"},{isdisable:"是否启用"},{qrcode:"二维码"},{businessId:"业务id"}],varList:[{businessId:"",cdate:"3",children:[{code:"11111111111",companyId:"02b02026270d4b6582b7bfc576e81971",id:"11",isdisable:"1",isdisable1:"1",isdisable2:"0",isdisable3:"1",isdisable4:"1",name:"12",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"5.00",suggestCount:"5.jpg",imgPath:"fileUpload/QRCode/product/1539142716704586.png",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",isdisable2:"1",isdisable3:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"}],code:"",count:"10.00",cuser:"bf3b8b63be1b4f1f96984b33ccd77784",executeCount:"10.00",hideTitles:["id","warehouseId","productId","isdisable","companyId"],id:"219967d2f6704d868b11002caef9885c",isdisable:"1",parentId:"08e06e2e63804a9f81781a540307fa8f",pid:null,productCode:"2",productGenre:"7e2cad38438e40ba974cd00099e5ed71",productGenreName:[],productId:"01de8e2c87074f06b32567d7c1275808",productName:"1",productSpec:"22222222222222222222",productUnit:"3ab6399760da48049bc76705fa797217",productUnitName:"克",progress:"55",qrcode:"",remark:"122",state:"已完成",titles:[{name:"货位名称"},{code:"批次号"},{stockCount:"库存数量"},{suggestCount:"建议取货数量"},{id:"id"},{warehouseId:"仓库货位ID"},{productId:"产品ID"},{isdisable:"是否启用"},{companyId:"公司ID"}],udate:"2018-11-08 17:30:33",uuser:"",warehouseId:"",warehouseOutCode:"3"},{businessId:"",cdate:"1",children:[{code:"11111111111",companyId:"02b02026270d4b6582b7bfc576e81971",id:"11",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"5.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"}],code:"",count:"10.00",cuser:"bf3b8b63be1b4f1f96984b33ccd77784",executeCount:"10.00",hideTitles:["id","warehouseId","productId","isdisable","companyId"],id:"885c219967d2f6704d868b11002caef9",isdisable:"1",parentId:"08e06e2e63804a9f81781a540307fa8f",pid:null,productCode:"3",productGenre:"7e2cad38438e40ba974cd00099e5ed71",productGenreName:[],productId:"01de8e2c87074f06b32567d7c1275808",productName:"0",productSpec:"2111111111111111111",productUnit:"3ab6399760da48049bc76705fa797217",productUnitName:"克",progress:"20",qrcode:"",remark:"122",state:"已完成",titles:[{name:"货位名称"},{code:"批次号"},{stockCount:"库存数量"},{suggestCount:"建议取货数量"},{id:"id"},{warehouseId:"仓库货位ID"},{productId:"产品ID"},{isdisable:"是否启用"},{companyId:"公司ID"}],udate:"2018-11-08 17:30:33",uuser:"",warehouseId:"",warehouseOutCode:"2"}]}}}}]);