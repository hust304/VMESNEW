(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-33f1"],{"50Ol":function(e,t,i){"use strict";i("rGqo"),i("KKXr"),i("91GP");var a={name:"custom-summary-option",props:{customSummary:{type:Object,default:function(){return{}}},tableData:{type:Array,default:function(){return[]}},tempData:{type:Object,default:function(){return{}}}},data:function(){return{boxDefaultStyle:{width:"600px",float:"left"},data:{}}},directives:{"send-height":{inserted:function(e,t,i){i.context.$emit("send-height",e.clientHeight)}}},computed:{setStyle:function(){return this.customSummary.boxStyle||this.boxDefaultStyle},setData:function(){return this.customSummary.computes&&this.createFormula(this.customSummary.computes,this.tableData,this.tempData),this.data}},created:function(){this.data=this.customSummary.data,this.customSummary.apiObj&&this.customSummary.apiObj.apiName&&this.httpRequests()},mounted:function(){},methods:{httpRequests:function(){var e=this;try{this.$api[this.customSummary.apiObj.apiName](Object.assign({},this.customSummary.apiObj.params)).then(function(t){t.result&&e.assignmentFn(t.result)}).catch(function(e){console.log(e)})}catch(e){console.log(e)}},assignmentFn:function(e){for(var t in this.data)this.data.hasOwnProperty(t)&&(this.data[t]=e[t])},createFormula:function(e,t,i){for(var a in e)if(e.hasOwnProperty(a)){var n=e[a].split(/\([\\+|\-|\\*|\\/]\)/);if(n.length>1)n.forEach(function(e){});else{var o=e[a].split("@");"table"===o[0]&&(this.data[a]=this.getSum(o[1],t))}}},getSum:function(e,t){var i=0;return t.forEach(function(t){i+=t[e]-0}),i},customSummaryValue:function(e){this.$emit("custom-summary-value",e)}}},n=(i("MtNS"),i("KHd+")),o=Object(n.a)(a,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"customSummaryOption clearfix"},[t(this.customSummary.component,{directives:[{name:"send-height",rawName:"v-send-height"}],tag:"component",attrs:{data:this.setData,tempData:this.tempData,setStyle:this.customSummary.boxStyle},on:{"custom-summary-value":this.customSummaryValue}})],1)},[],!1,null,null,null);o.options.__file="index.vue";t.a=o.exports},DKCI:function(e,t,i){"use strict";i("rGqo"),i("INYr");var a={name:"table-filter",props:{headerList:{type:Array,default:function(){return[]}},showAll:{type:Boolean,default:!1},storeId:{type:String,default:""},componentId:{type:String,default:""}},directives:{"auto-width":{inserted:function(e,t,i){i.context.widthList[t.value]=e.clientWidth}}},data:function(){return{checkList:[],widthSwitch:!1,checkViewWidth:0,checkViewHeight:0,checkViewWidthTimer:"",widthList:[],userConfig:"",storeKey:"",userId:"",localStoreKey:"",useStore:!1,tempList:""}},created:function(){this.storeKey="tableFilter"+this.storeId,this.userId=this.$storage.get("userInfo").userId||"",this.tempList=this.localStore(this.componentId,this.storeKey,this.userId),this.$emit("checked-list",this.tempList)},computed:{setHeight:function(){return this.checkViewHeight&&this.widthSwitch?(this.$emit("checked-height",this.checkViewHeight),this.checkViewHeight):(this.$emit("checked-height",20),20)},setHeaderList:function(){var e=this;return this.headerList.filter(function(t){return e.showAll?t:!t.component})}},methods:{checkedList:function(e){localStorage.setItem(this.localStoreKey,JSON.stringify(e)),this.$emit("checked-list",e)},viewSwitch:function(){this.widthSwitch=!this.widthSwitch},localStore:function(e,t,i){return this.localStoreKey="_"+e+t+i,JSON.parse(localStorage.getItem(this.localStoreKey))||""},setChecked:function(e){return!this.tempList||!Array.isArray(this.tempList)||this.tempList.findIndex(function(t){return t===e.label})>-1}},watch:{widthSwitch:function(){var e=this;this.widthSwitch&&!this.checkViewHeight&&(clearTimeout(this.checkViewWidthTimer),this.checkViewWidthTimer=setTimeout(function(t){var i=0;e.widthList.forEach(function(e){e-0&&(i+=e+15)}),e.checkViewHeight=20*Math.ceil(i/e.$refs.checkBoxView.clientWidth)},200))}}},n=(i("DlFo"),i("KHd+")),o=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tableFilter",style:{height:e.setHeight+"px"}},[i("div",{staticClass:"msg",attrs:{title:"列开关"},on:{click:e.viewSwitch}},[i("svg-icon",{attrs:{"icon-class":"tableSetting"}})],1),e._v(" "),i("div",{ref:"checkBoxView",staticClass:"checkView",class:{setWidth:e.widthSwitch}},[i("div",{staticStyle:{position:"relative"}},[i("div",{staticStyle:{position:"absolute",top:"0",left:"0"}},[i("el-checkbox-group",{attrs:{size:"mini"},on:{change:e.checkedList},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.setHeaderList,function(t,a){return i("el-checkbox",{directives:[{name:"auto-width",rawName:"v-auto-width",value:a,expression:"index"}],key:t.prop,attrs:{label:t.label,checked:e.setChecked(t)}})}),1)],1)])])])},[],!1,null,"2ad1a997",null);o.options.__file="index.vue";t.a=o.exports},DlFo:function(e,t,i){"use strict";var a=i("kjwg");i.n(a).a},F9dT:function(e,t,i){"use strict";i.d(t,"a",function(){return c}),i.d(t,"c",function(){return d}),i.d(t,"b",function(){return u});i("pIFo"),i("SRfc"),i("KKXr"),i("INYr"),i("rGqo");var a=i("Yfch"),n=i("TB3a"),o=i("YP4+"),s=i("z0WU"),r=function(){return function(e,t,i){var n,o,s;t?(o=t-0,n=!0,s=e.ops[e.ops.length-1],e.ops&&e.ops.length&&e.ops.forEach(function(t,i){i<e.ops.length-1&&(s?Object(a.a)(t-0)?(!Object(a.a)(o)||t-0>o)&&(n=!1):t-0>o&&(n=!1):Object(a.a)(t-0)?(!Object(a.a)(o)||t-0>=o)&&(n=!1):t-0>=o&&(n=!1))}),n?i():i(new Error(e.message))):i(new Error("不能为空"))}},l=function(){return function(e,t,i){var n,o,s;t?(o=t-0,n=!0,s=e.ops[e.ops.length-1],e.ops&&e.ops.length&&e.ops.forEach(function(t,i){i<e.ops.length-1&&(s?Object(a.a)(t-0)?(!Object(a.a)(o-0)||o>t-0)&&(n=!1):o>t-0&&(n=!1):Object(a.a)(t-0)?(!Object(a.a)(o-0)||o>=t-0)&&(n=!1):o>=t-0&&(n=!1))}),n?i():i(new Error(e.message))):i(new Error("不能为空"))}};function c(e,t,i,a,n,o,s,c,u,p,m){var h,f,g,b,y;return e&&(h=d(e.greaterThan,n,o,u,!0,p)),b=c.findIndex(function(e){return e.greaterThan}),t&&(f=d(t.lessThan,n,o,u,!1,p)),y=c.findIndex(function(e){return e.lessThan}),g=[],h&&g.push({validator:r(),trigger:"blur",message:s[m||b],ops:h}),f&&g.push({validator:l(),trigger:"blur",message:s[m||y],ops:f}),g}function d(e,t,i,a,n,o,s){var r;"boolean"==typeof(e=JSON.parse(JSON.stringify(e)))[e.length-1]&&(r=e.pop());var l=e.map(function(e){return""});return e.forEach(function(e,r){var c=e.split(/\([\\+|\-|\\*|\\/]\)/);if(c.length>1)l.splice(r,1,u(c,t,i,a,e,o,s));else if(-1!==e.indexOf("@")){var d=e.split("@");2===d.length&&"self"===d[0]&&l.splice(r,1,t[d[1]]),2===d.length&&"parent"===d[0]&&l.splice(r,1,i[0][d[1]]),2===d.length&&"tempData"===d[0]&&l.splice(r,1,o[d[1]]),2===d.length&&"sibling"===d[0]&&l.splice(r,1,p(d[1],a,t,!1,n)),3===d.length&&"parent"===d[0]&&l.splice(r,1,JSON.parse(JSON.stringify(i)).reverse()[d[1]-1][d[2]])}else l.splice(r,1,e)}),"boolean"==typeof r?l.push(r):l.push(!0),l}function u(e,t,i,r,l,c,d){var u=e.map(function(e){return""});e.forEach(function(e,a){var n=e.split("@"),o=0;if(2===n.length)switch(n[0]){case"self":o=t[n[1]];break;case"parent":o=i[i.length-1][n[1]];break;case"tempData":o=c[n[1]];break;case"sibling":o=p(n[1],r,t,!0)}else 3===n.length?o=JSON.parse(JSON.stringify(i)).reverse()[n[1]-1][n[2]]:1===n.length&&(o=n[0]-0);u.splice(a,1,o||0)});var m=l.match(/\([\\+|\-|\\*|\\/]\)/g).map(function(e){return e.replace(/\(|\)/g,"")}),h="",f=function(e){if(Object(a.a)(e))return"number";if("string"==typeof e&&/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}/.test(e))return"date"}(u[0]);return"number"===f?(u.forEach(function(e,t){m[t]?h+=e+m[t]:h+=e}),parseFloat(Object(s.j)(h).toFixed(d||o.a.precision))):"date"===f?(u.forEach(function(e,t){var i=n.a.timeStamp(e);m[t]?h+=i+m[t]:h+=i}),n.a.formatDate(Object(s.j)(h))):0}function p(e,t,i,a,n){var o=[],s=0,r=t.findIndex(function(e){return e.id===i.id});return t.forEach(function(t,i){r!==i&&o.push(t[e])}),a?o.forEach(function(e){s+=e-0}):s=n?Math.min.apply(Math,o):Math.max.apply(Math,o),s}},LUXg:function(e,t,i){},MtNS:function(e,t,i){"use strict";var a=i("Mugr");i.n(a).a},Mugr:function(e,t,i){},TB3a:function(e,t,i){"use strict";i("a1Th"),i("SRfc"),i("KKXr");t.a={timeStamp:function(e){if("string"==typeof e){var t=e.split(" ");if(1===t.length){var i=t[0].match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);return null===i?(new Date).getTime():new Date(i[1],i[3]-1,i[4]).getTime()}var a=t[0].match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/),n=t[1].match(/^(\d{1,2})(-|\:)(\d{1,2})\2(\d{1,2})$/);return a&&n?new Date(a[1],a[3]-1,a[4],n[1],n[3],n[4]).getTime():(new Date).getTime()}return"number"==typeof e?864e5*e:(new Date).getTime()},formatDate:function(e,t){var i=e?new Date(e):new Date,a=i.getFullYear(),n=i.getMonth()+1,o=i.getDate(),s=i.getHours(),r=i.getMinutes(),l=i.getSeconds(),c=function(e){return(e=e.toString())[1]?e:"0"+e};return[a,n,o].map(c).join(t||"-")+" "+[s,r,l].map(c).join(":")}}},"VI+Y":function(e,t,i){"use strict";var a=i("LUXg");i.n(a).a},kjwg:function(e,t,i){},mwzG:function(e,t,i){"use strict";t.a={code:0,msg:"执行成功!",result:{hideTitles:["id","productGenre","productUnit","parentId","warehouseId","productId","code","executeCount","state","cuser","uuser","remark","isdisable","qrcode","businessId"],pageData:{current:1,pages:"1",records:[],size:10,total:"1"},titles:[{progress:"进度"},{warehouseOutCode:"出库单编码"},{productCode:"货品编码"},{productName:"货品名称"},{productSpec:" 规格/型号"},{productGenreName:"货品属性"},{productUnitName:"计量单位"},{count:"出库数量"},{id:"id"},{productGenre:"货品属性ID"},{productUnit:"计量单位ID"},{parentId:"出库单ID"},{warehouseId:" (推荐)货位ID"},{productId:"产品ID"},{code:"批次号"},{executeCount:"已出库数量"},{state:"状态"},{cuser:"创建用户id"},{cdate:"创建时间"},{uuser:"修改用户id"},{udate:"修改时间"},{remark:"备注"},{isdisable:"是否启用"},{qrcode:"二维码"},{businessId:"业务id"}],varList:[{businessId:"",cdate:"3",children:[{code:"11111111111",companyId:"02b02026270d4b6582b7bfc576e81971",id:"11",isdisable:"1",isdisable1:"1",isdisable2:"0",isdisable3:"1",isdisable4:"1",name:"12",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"5.00",suggestCount:"5.jpg",imgPath:"fileUpload/QRCode/product/1539142716704586.png",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",isdisable2:"1",isdisable3:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"}],code:"",count:"10.00",cuser:"bf3b8b63be1b4f1f96984b33ccd77784",executeCount:"10.00",hideTitles:["id","warehouseId","productId","isdisable","companyId"],id:"219967d2f6704d868b11002caef9885c",isdisable:"1",parentId:"08e06e2e63804a9f81781a540307fa8f",pid:null,productCode:"2",productGenre:"7e2cad38438e40ba974cd00099e5ed71",productGenreName:[],productId:"01de8e2c87074f06b32567d7c1275808",productName:"1",productSpec:"22222222222222222222",productUnit:"3ab6399760da48049bc76705fa797217",productUnitName:"克",progress:"55",qrcode:"",remark:"122",state:"已完成",titles:[{name:"货位名称"},{code:"批次号"},{stockCount:"库存数量"},{suggestCount:"建议取货数量"},{id:"id"},{warehouseId:"仓库货位ID"},{productId:"产品ID"},{isdisable:"是否启用"},{companyId:"公司ID"}],udate:"2018-11-08 17:30:33",uuser:"",warehouseId:"",warehouseOutCode:"3"},{businessId:"",cdate:"1",children:[{code:"11111111111",companyId:"02b02026270d4b6582b7bfc576e81971",id:"11",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"5.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"}],code:"",count:"11.00",cuser:"bf3b8b63be1b4f1f96984b33ccd77784",executeCount:"10.00",hideTitles:["id","warehouseId","productId","isdisable","companyId"],id:"885c219967d2f6704d868b11002caef9",isdisable:"1",parentId:"08e06e2e63804a9f81781a540307fa8f",pid:null,productCode:"3",productGenre:"7e2cad38438e40ba974cd00099e5ed71",productGenreName:[],productId:"01de8e2c87074f06b32567d7c1275808",productName:"0",productSpec:"2111111111111111111",productUnit:"3ab6399760da48049bc76705fa797217",productUnitName:"克",progress:"20",qrcode:"",remark:"122",state:"已完成",titles:[{name:"货位名称"},{code:"批次号"},{stockCount:"库存数量"},{suggestCount:"建议取货数量"},{id:"id"},{warehouseId:"仓库货位ID"},{productId:"产品ID"},{isdisable:"是否启用"},{companyId:"公司ID"}],udate:"2018-11-08 17:30:33",uuser:"",warehouseId:"",warehouseOutCode:"2"}]}}},"z+ln":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("3d3b"),n=i("WIyV"),o=i("0UjI"),s=i("sNnr");i("qnVx"),i("z0WU");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{productTableDialog:a.a,definedTableDialog:o.a,customBaseTable:n.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{remark:"",applyName:"",supplierName:"",deptName:"",applyId:"",supplierId:"",deptId:""},tempLable:{},tempQuery:{},tableData:[],tableList:[],rowData:{},selectList:null,configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct},{name:"从计划导入",nameEn:"addPlan",isShow:!0,icon:"add",method:this.addPlan}]},apiObj:{apiName:"listPagePurchaseOrderDetails",params:{pageNo:1,parentId:"null",fieldCode:"productCode,productName,spec,genre,unit,count,price,amount,edate,reason,remark"}},customColumn:[{columnIndex:"unit",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"count",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"amount",componentName:"input",_cellConfig:{compute:"self@price(*)self@count",editable:!1}},{columnIndex:"price",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"reason",componentName:"select",_cellConfig:{asyn:{apiName:"getDictionarys",params:{dictionaryKey:"purchaseReason",isglobal:"1"}},rules:[{required:!0}],outputData:!0}},{columnIndex:"edate",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",greaterThan:["tempData@minDate",!0]}},{columnIndex:"remark",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{minDate:new Date},customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>￥{{data.total.toFixed(2)}}</span></li>\n                    <li style="float: left;width: 100%" class="inputStyle">\n                      <span>折扣金额：</span>\n                      <span>￥\n                        <el-form inline inline-message :model="data" ref="numberValidateForm" label-width="0">\n                          <el-form-item prop="discount" :rules="[{ type: \'number\', message: \'必须为数字值\'}]">\n                            <el-input v-model.number="data.discount" size="mini" placeholder="请输入"></el-input>\n                          </el-form-item>\n                        </el-form>\n                      </span>\n                    </li>\n                    <li style="float: left;width: 100%"><span>订单金额：</span><span>￥{{(data.total-data.discount).toFixed(2)}}</span></li>\n                    </ul>'},data:{discount:"0",total:"0"},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},computes:{total:"table@amount"}},ApplyDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{isdisable:"1",fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择部门",treeUrl:"/system/department/treeDepartments",treeParm:{},tableUrl:"/system/department/listPageDepartments",tableParm:{isdisable:"1",fieldCode:"code,name,deptTypeName,layer,parentName,remark"},temp:{}},dialogName:"dialogTreeOption"}},SupplierDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择供应商",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"49c0a7ebcb4c4175bd5195837a6a9a13",fieldCode:"code,name,typeName,remark,udate"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.$storage.get("userInfo");this.temp=this.initData.temp,this.apiObj.params.parentId=this.initData.temp.id,this.customSummary.data.discount=this.temp.discount,this.customSummary.data.total=this.temp.total},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){Array.isArray(e)?(this.tableList=[],this.tableList=e):(this.rowData=null,null!=e.row&&(this.rowData=e.row))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},addProduct:function(){this.dialogData.data=this.tableList,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},addPlan:function(){this.dialogData={title:"",data:null,tempLable:null},this.dialogData.apiName="listPagePurchasePlanDetails",this.dialogData.fieldCode="code,productCode,productName,spec,genre,unit,count,edate,reason",this.dialogData.queryStr=" detail.id not in (select plan_id from vmes_purchase_order_detail where plan_id is not null and state != '-1' ) and detail.state = '2' ",this.dialogData.orderStr="product.code desc";this.dialogData.searchList=[{label:"编码",type:"input",ruleType:"string",mapKey:"productCode",configs:{},placeholder:"请输入编码"},{label:"名称",type:"input",ruleType:"string",mapKey:"productName",configs:{},placeholder:"请输入名称"}],this.dialogData.data=this.tableList,this.dialogData.title="选择货品",this.openDialogName="definedTableDialog",this.showDialog=!0,this.inLinVisible=!0},editOrder:function(){var e=this,t="";if(this.$refs.orderAddDialog.getData(),null!=this.tableList&&0!=this.tableList.length){for(var i=[],a=0;a<this.tableList.length;a++){var n=this.tableList[a],o={productId:"",amount:"",unit:"",price:"",count:"",reason:"",edate:"",remark:"",planId:"",id:""};o.productId=n.productId,o.amount=n.amount,n.unit.item?o.unit=n.unit.item.id:o.unit=n.unitId,o.price=n.price,o.count=n.count,o.remark=n.remark,o.edate=n.edate,n.reason.item?o.reason=n.reason.item.id:o.reason=n.reasonId,o.planId=n.planId,o.id=n.id,i.push(o)}t=JSON.stringify(i),this.temp.discount=this.customSummary.data.discount,this.temp.total=this.customSummary.data.total,this.temp.amount=this.temp.total-this.temp.discount,this.temp.dtlJsonStr=t,this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(s.editPurchaseOrder)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},applySelect:function(e){e[0]&&(this.temp.applyId=e[0].id,this.temp.applyName=e[0].name)},supplierSelect:function(e){e[0]&&(this.temp.supplierId=e[0].id,this.temp.supplierName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],n={productId:"",productCode:"",productName:"",spec:"",genre:"",unit:"",amount:"",price:"",count:"",reason:"",edate:"",remark:"",planId:"",id:""};null!=a.productId&&a.productId.trim().length>0?(n.productId=a.productId.trim(),n.planId=a.id.trim(),n.remark=a.code,n.edate=a.edate,n.reason=a.reason,n.reasonId=a.reasonId,null!=a.productCode&&a.productCode.trim().length>0&&(n.productCode=a.productCode.trim()),null!=a.productName&&a.productName.trim().length>0&&(n.productName=a.productName.trim()),null!=a.spec&&a.spec.trim().length>0&&(n.spec=a.spec.trim()),null!=a.genre&&a.genre.trim().length>0&&(n.genre=a.genre.trim()),null!=a.unit&&a.unit.trim().length>0&&(n.unit=a.unit.trim(),n.unitId=a.unitId.trim())):(n.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(n.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(n.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(n.spec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(n.genre=a.genreName.trim()),null!=a.unitName&&a.unitName.trim().length>0&&(n.unit=a.unitName.trim(),n.unitId=a.unit.trim())),n.id=a.id.trim()||i,this.tableData.push(n)}}},watch:{}},c=(i("VI+Y"),i("KHd+")),d=Object(c.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1250px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"申请人:",prop:"applyName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.ApplyDialog.dialog},on:{callback:e.applySelect},model:{value:e.temp.applyName,callback:function(t){e.$set(e.temp,"applyName",t)},expression:"temp.applyName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"申请部门:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"供应商:",prop:"supplierName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.SupplierDialog.dialog},on:{callback:e.supplierSelect},model:{value:e.temp.supplierName,callback:function(t){e.$set(e.temp,"supplierName",t)},expression:"temp.supplierName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{height:"450px",width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"orderAddDialog",useDefaultBtn:!0,rowKey:"_insideId",showAll:!1,keyMapping:e.keyMapping,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.editOrder}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogEdit.vue";t.default=d.exports}}]);