(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3616"],{"0ppE":function(e,t,i){"use strict";i.r(t);i("rGqo"),i("91GP"),i("INYr");var n=i("uTIz"),a=i("Kabk"),s=i("CK78"),r={components:{searchBar:n.a,tabsTable:a.a},data:function(){return{rowTableList:[],openDialogName:"",showDialog:!1,visible:!1,dialogData:{title:"",temp:null,tempLable:null},searchList:[{label:"订单编号",type:"input",ruleType:"string",mapKey:"orderSysCode",configs:{},placeholder:"订单编号"},{label:"客户名称",type:"input",ruleType:"string",mapKey:"customerName",configs:{},placeholder:"客户名称"}],guid:"",currentpage:1,searchObj:{},activeName:"first",isFinance:!1,tableConfig:{configs:{0:{showCheckBox:!0,showIndex:!1,expandOne:!1,isSortable:!1,showPageData:!0},1:{showCheckBox:!1,showIndex:!0,isSortable:!1,isSingle:!0}},customColumn:{0:[{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"详情",editBtns_isShow:!0,icon:"add",method:this.addChild}]}]},mergeColumn:{0:[{index:1,columns:["orderSysCode","customerName","receiptTypeName","custInvoiceBankName","totalSum"]},{index:2,columns:["custInvoiceCompanyName","custInvoiceMobile","custInvoiceNumber","custInvoiceAddress","custInvoiceBankCode"]},{index:3,columns:["cuserDeptName","cuserName","cdate","stateName"]}]},columnGlobalStyle:{0:{titleStyle:{"font-size":"14px","font-weight":600,color:"#000000"},bodyStyle:{color:"#199ED4"}}},apiObj:{apiName:"listPageSaleInvoice",params:{state:"0"}}},tabs:[{label:"待开票",key:"first",btnName:"完成开票",method:this.addInvoice,disabled:!1,componentName:"customRowTable",apiObj:{apiName:"listPageSaleInvoice",params:{state:"0"}}},{label:"已开票",key:"second",btnName:"申请开票",disabled:!0,componentName:"customRowTable",apiObj:{apiName:"listPageSaleInvoice",params:{state:"1"}}}],tabsKey:"first"}},created:function(){},mounted:function(){},methods:{sendTabsKey:function(e){this.tabsKey=e},closeDialog:function(e){var t=this;if("ok"==e.resState){var i=this.tabs.findIndex(function(e){return e.key===t.tabsKey});i>-1&&(this.tabs[i].apiObj.params=Object.assign({},this.tabs[i].apiObj.params,this.searchObj))}},addInvoice:function(e){var t=this;if(null!=this.rowTableList&&0!=this.rowTableList.length){var i="";this.rowTableList.forEach(function(e){null!=e.id&&e.id.trim().length>0&&(i=i+e.id.trim()+",")}),Object(s.updateStateBySaleInvoice)({ids:i}).then(function(e){if(t.dialogLoading=!1,0===e.code){t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.rowTableList=[];var i=t.tabs.findIndex(function(e){return e.key===t.tabsKey});i>-1&&(t.tabs[i].apiObj.params=Object.assign({},t.tabs[i].apiObj.params,t.searchObj))}}).catch(function(e){})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少勾选一行数据！"})},databridge:function(e){Array.isArray(e)&&(this.rowTableList=[],this.rowTableList=e)},sendGuid:function(e){this.guid=e},searchMap:function(e){var t=this;this.searchObj=e;var i=this.tabs.findIndex(function(e){return e.key===t.tabsKey});i>-1&&(this.tabs[i].apiObj.params=Object.assign({},this.tabs[i].apiObj.params,this.searchObj))},addChild:function(e,t,i){}},computed:{tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0):0},dialogName:function(){return this.openDialogName}},watch:{currentpage:function(){}}},o=(i("ppmw"),i("KHd+")),c=Object(o.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"invoice"},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{staticStyle:{"border-bottom":"none",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.tableHeight+"px"}},[i("tabs-table",{attrs:{tabs:e.tabs,tableConfig:e.tableConfig},on:{tabsKey:e.sendTabsKey,databridge:e.databridge}})],1),e._v(" "),e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visible},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);c.options.__file="index.vue";t.default=c.exports},F9dT:function(e,t,i){"use strict";i.d(t,"a",function(){return l}),i.d(t,"c",function(){return u}),i.d(t,"b",function(){return p});i("pIFo"),i("SRfc"),i("KKXr"),i("INYr"),i("rGqo");var n=i("Yfch"),a=i("TB3a"),s=i("YP4+"),r=i("z0WU"),o=function(){return function(e,t,i){var a,s,r;t?(s=t-0,a=!0,r=e.ops[e.ops.length-1],e.ops&&e.ops.length&&e.ops.forEach(function(t,i){i<e.ops.length-1&&(r?Object(n.b)(t-0)?(!Object(n.b)(s)||t-0>s)&&(a=!1):t-0>s&&(a=!1):Object(n.b)(t-0)?(!Object(n.b)(s)||t-0>=s)&&(a=!1):t-0>=s&&(a=!1))}),a?i():i(new Error(e.message))):i(new Error("不能为空"))}},c=function(){return function(e,t,i){var a,s,r;t?(s=t-0,a=!0,r=e.ops[e.ops.length-1],e.ops&&e.ops.length&&e.ops.forEach(function(t,i){i<e.ops.length-1&&(r?Object(n.b)(t-0)?(!Object(n.b)(s-0)||s>t-0)&&(a=!1):s>t-0&&(a=!1):Object(n.b)(t-0)?(!Object(n.b)(s-0)||s>=t-0)&&(a=!1):s>=t-0&&(a=!1))}),a?i():i(new Error(e.message))):i(new Error("不能为空"))}};function l(e,t,i,n,a,s,r,l,p,f,g){var m,h,d,b,v;return e&&(m=u(e.greaterThan,a,s,p,!0,f)),b=l.findIndex(function(e){return e.greaterThan}),t&&(h=u(t.lessThan,a,s,p,!1,f)),v=l.findIndex(function(e){return e.lessThan}),d=[],m&&d.push({validator:o(),trigger:"blur",message:r[g||b],ops:m}),h&&d.push({validator:c(),trigger:"blur",message:r[g||v],ops:h}),d}function u(e,t,i,n,a,s,r){var o;"boolean"==typeof(e=JSON.parse(JSON.stringify(e)))[e.length-1]&&(o=e.pop());var c=e.map(function(e){return""});return e.forEach(function(e,o){var l=e.split(/\([\\+|\-|\\*|\\/]\)/);if(l.length>1)c.splice(o,1,p(l,t,i,n,e,s,r));else if(-1!==e.indexOf("@")){var u=e.split("@");2===u.length&&"self"===u[0]&&c.splice(o,1,t[u[1]]),2===u.length&&"parent"===u[0]&&c.splice(o,1,i[0][u[1]]),2===u.length&&"tempData"===u[0]&&c.splice(o,1,s[u[1]]),2===u.length&&"sibling"===u[0]&&c.splice(o,1,f(u[1],n,t,!1,a)),3===u.length&&"parent"===u[0]&&c.splice(o,1,JSON.parse(JSON.stringify(i)).reverse()[u[1]-1][u[2]])}else c.splice(o,1,e)}),"boolean"==typeof o?c.push(o):c.push(!0),c}function p(e,t,i,o,c,l,u){var p=e.map(function(e){return""});e.forEach(function(e,n){var a=e.split("@"),s=0;if(2===a.length)switch(a[0]){case"self":s=t[a[1]];break;case"parent":s=i[i.length-1][a[1]];break;case"tempData":s=l[a[1]];break;case"sibling":s=f(a[1],o,t,!0)}else 3===a.length?s=JSON.parse(JSON.stringify(i)).reverse()[a[1]-1][a[2]]:1===a.length&&(s=a[0]-0);p.splice(n,1,s||0)});var g=c.match(/\([\\+|\-|\\*|\\/]\)/g).map(function(e){return e.replace(/\(|\)/g,"")}),m="",h=function(e){if(Object(n.b)(e))return"number";if("string"==typeof e&&/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}/.test(e))return"date"}(p[0]);return"number"===h?(p.forEach(function(e,t){g[t]?m+=e+g[t]:m+=e}),parseFloat(Object(r.j)(m).toFixed(u||s.a.precision))):"date"===h?(p.forEach(function(e,t){var i=a.a.timeStamp(e);g[t]?m+=i+g[t]:m+=i}),a.a.formatDate(Object(r.j)(m))):0}function f(e,t,i,n,a){var s=[],r=0,o=t.findIndex(function(e){return e.id===i.id});return t.forEach(function(t,i){o!==i&&s.push(t[e])}),n?s.forEach(function(e){r+=e-0}):r=a?Math.min.apply(Math,s):Math.max.apply(Math,s),r}},TB3a:function(e,t,i){"use strict";i("a1Th"),i("SRfc"),i("KKXr");t.a={timeStamp:function(e){if("string"==typeof e){var t=e.split(" ");if(1===t.length){var i=t[0].match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);return null===i?(new Date).getTime():new Date(i[1],i[3]-1,i[4]).getTime()}var n=t[0].match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/),a=t[1].match(/^(\d{1,2})(-|\:)(\d{1,2})\2(\d{1,2})$/);return n&&a?new Date(n[1],n[3]-1,n[4],a[1],a[3],a[4]).getTime():(new Date).getTime()}return"number"==typeof e?864e5*e:(new Date).getTime()},formatDate:function(e,t){var i=e?new Date(e):new Date,n=i.getFullYear(),a=i.getMonth()+1,s=i.getDate(),r=i.getHours(),o=i.getMinutes(),c=i.getSeconds(),l=function(e){return(e=e.toString())[1]?e:"0"+e};return[n,a,s].map(l).join(t||"-")+" "+[r,o,c].map(l).join(":")}}},cQtt:function(e,t,i){},evdt:function(e,t,i){"use strict";i.d(t,"b",function(){return o}),i.d(t,"a",function(){return c});i("INYr"),i("91GP"),i("rGqo");var n=i("z0WU"),a=i("Yfch"),s=i("F9dT"),r=i("YP4+");function o(e,t){return function e(t,i,o,c){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var u=c.tableConfigList[i]?c.tableConfigList[i].customColumn||[]:c.customColumn||[];var p=u.filter(function(e){if(e._cellConfig&&e._cellConfig.compute)return e});var f=c.tableConfigList[i]?c.tableConfigList[i].tempData||{}:c.tempData||{};var g=c.tableConfigList[i]?c.tableConfigList[i].precision||r.a.precision:c.precision||r.a.precision;if(t&&t.result){t.result.titles="string"==typeof t.result.titles?JSON.parse(t.result.titles):t.result.titles,t.result.varList="string"==typeof t.result.varList?JSON.parse(t.result.varList):t.result.varList,t.result.pageData="string"==typeof t.result.pageData?JSON.parse(t.result.pageData):t.result.pageData;var m=Object(n.m)(t.result),h=function(e,t,i){return(t[i]&&Array.isArray(t[i])?t[i]:t).forEach(function(t){Object(a.b)(t.columnIndex)?e.splice(t.columnIndex,0,t):"first"===t.columnIndex?e.unshift(t):"last"===t.columnIndex?e.push(t):e.some(function(e){if(e.prop===t.columnIndex)return Object.assign(e,t),!0})}),e}(m,u,i);t.result.varList.forEach(function(a,r){if(a._internalId=Object(n.o)(),a._pInternalId=o,a.rowState="1",p.forEach(function(e){var i=Object(s.c)([e._cellConfig.compute],a,l.concat([a]),t.result.varList,"",f,e._cellConfig.precision||g);a[e.columnIndex]=i[0]}),a.titles&&a.hideTitles&&a.children&&a.children.length){var u={result:{titles:a.titles,hideTitles:a.hideTitles,varList:a.children,pageData:a.pageData||{}}},m=e(u,i+1,a._internalId,c,l.concat([a]));a.titleList=m.titleList,a.pageData=m.pageData}});var d={titleList:h,pageData:t.result.pageData,tableData:t.result.varList};return function(e,t,i){(i.tableConfigList[t]?i.tableConfigList[t].mergeTitle||[]:i.mergeTitle||[]).forEach(function(t,i){var n="",a=[],s=t.width||"",r=[];t.columns.forEach(function(t){if("string"==typeof t){var i=e.titleList.findIndex(function(e){if(e.prop===t)return r.push(e),!0});i>-1&&(a=a.concat(e.titleList.splice(i,1)))}else{var n=e.titleList.findIndex(function(e){if(e.prop===t.keyName)return r.push(Object.assign({},e,t)),!0});n>-1&&(a=a.concat(e.titleList.splice(n,1)))}}),n=t.alias?t.alias:"mergeKey"+i,e.titleList.splice(t.index-1,0,{prop:n,label:n,mergeTitles:a,width:s}),e.tableData.forEach(function(e){e[n]=r.map(function(t){var i=Object.assign({},t);return i._mergeValue=e[i.prop]||"",i})})}),e.titleList.forEach(function(e){!e.mergeTitles&&!e.component&&e.columnIndex&&(e.mergeTitles=[JSON.parse(JSON.stringify(e))])})}(d,i,c),d}return{}}(e,t.layer,"",t)}function c(e,t,i){return e.map(function(e){var n;switch(e){case"yesterday":n={text:"昨天",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-864e5<t?t:i.getTime()-864e5),e.$emit("pick",i)}};break;case"today":n={text:"今天",onClick:function(e){e.$emit("pick",new Date)}};break;case"tomorrow":n={text:"明天",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+864e5>i?i:t.getTime()+864e5),e.$emit("pick",t)}};break;case"lastWeek":n={text:"上周",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-6048e5<t?t:i.getTime()-6048e5),e.$emit("pick",i)}};break;case"nextWeek":n={text:"下周",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+6048e5>i?i:t.getTime()+6048e5),e.$emit("pick",t)}};break;case"lastMonth":n={text:"上月",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-2592e6<t?t:i.getTime()-2592e6),e.$emit("pick",i)}};break;case"nextMonth":n={text:"下月",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+2592e6>i?i:t.getTime()+2592e6),e.$emit("pick",t)}};break;case"lastYear":n={text:"去年",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-31536e6<t?t:i.getTime()-31536e6),e.$emit("pick",i)}};break;case"nextYear":n={text:"明年",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+31536e6>i?i:t.getTime()+31536e6),e.$emit("pick",t)}}}return n})}},ppmw:function(e,t,i){"use strict";var n=i("cQtt");i.n(n).a}}]);