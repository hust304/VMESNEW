(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4c6d"],{"9URt":function(t,e,i){"use strict";i.r(e);i("f3/d"),i("rGqo");var a=i("2+ib"),o=i("uTIz"),s=i("BESt"),n=(i("z0WU"),{components:{dialogReport:s.default,multilevelTable:a.a,searchBar:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{searchList:[{label:"期望生产数量",type:"input",ruleType:"string",mapKey:"expectCount",configs:{},placeholder:"请输入期望生产数量"}],guid:"",searchObj:{},tableConfigList:[{apiObj:{apiName:"getBomTreeProduct",params:{bomId:this.initData.temp.id,productId:this.initData.temp.prodId}},showIndex:!0,showCheckBox:!1,expand:!0,expandMode:"all",rowStyle:{"background-color":"#E4F3FA"}},{showIndex:!0,showCheckBox:!1,expand:!0,expandMode:"all",headerStyle:{"background-color":"#E4F3FA"}},{showIndex:!0,showCheckBox:!1,headerStyle:{"background-color":"#E4F3FA"}}],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},selectList:[],varList:[]}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(t,e){this.$refs.customBaseTable.pushData(t,e)},updateData:function(t){this.$refs.customBaseTable.updateData(t)},deleteData:function(t){this.$refs.customBaseTable.deleteData(t)},sendGuid:function(t){this.guid=t},searchMap:function(t){this.searchObj=t,this.updateData(t)},databridge:function(t){this.selectList=t},createReport:function(){if(this.getData(),this.varList=[],this.createVarList(this.varList,this.selectList),this.selectList[0]){if(this.selectList[0].expectCount<=0)return void this.$message({type:"warning",duration:5e3,showClose:!0,message:"请输入期望生产数量！"});if(this.varList.length<=0)return void this.$message({type:"warning",duration:5e3,showClose:!0,message:"物料充足，无需采购！"})}this.dialogData.data=JSON.stringify(this.varList),this.dialogData.title="选择货品",this.openDialogName="dialogReport",this.showDialog=!0,this.inLinVisible=!0},createVarList:function(t,e){var i=this;e.forEach(function(e){var a=e.id,o=e.code,s=e.name,n=e.spec,l=e.unit,r=e.stockCount,c=e.children,d=e.expectCount,u=e.lackCount,g={id:a,code:o,name:s,spec:n,unit:l,stockCount:r,expectCount:d,lackCount:u};u>0&&t.push(g),c.length>0&&i.createVarList(t,c)})},dialogOpen:function(){},dialogClose:function(t){this.$emit("close-dialog",t||{})},closeDialog:function(t,e){this.addedData={rowData:t[0],parentData:e},this.showDialog=!1}},watch:{}}),l=(i("xgHm"),i("KHd+")),r=Object(l.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:t.initData.title?t.initData.title:"",visible:t.isVisible,"append-to-body":t.inDialog,"close-on-click-modal":t.onModal,"close-on-press-escape":t.onEscape,fullscreen:t.fullscreen,width:"1500px"},on:{"update:visible":function(e){t.isVisible=e},open:t.dialogOpen,close:t.dialogClose}},[t.showDialog?i(t.dialogName,{tag:"component",attrs:{initData:t.dialogData,visible:t.inLinVisible},on:{"close-dialog":t.closeDialog}}):t._e(),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogLoading,expression:"dialogLoading"}]},[t.searchList.length?i("search-bar",{attrs:{searchList:t.searchList},on:{"search-map":t.searchMap,"send-guid":t.sendGuid}}):t._e(),t._v(" "),i("el-row",{staticStyle:{height:"600px","margin-top":"15px",width:"96%","margin-left":"2%","margin-bottom":"5px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{tableConfigList:t.tableConfigList},on:{databridge:t.databridge}})],1),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.createReport}},[t._v("生成缺料报表")]),t._v(" "),i("el-button",{on:{click:function(e){t.isVisible=!1}}},[t._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogAnalysis.vue";e.default=r.exports},BESt:function(t,e,i){"use strict";i.r(e);var a=i("2+ib"),o=i("cTe8"),s=(i("z0WU"),{components:{multilevelTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{remark:"齐套分析预采",makeId:""},tempLable:{},tempQuery:{},rowData:{},selectList:[],configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[{columnIndex:"lackCount",width:200,componentName:"input",_cellConfig:{rules:[]}},{columnIndex:"edate",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy年MM月dd日",valueFormat:"yyyy-MM-dd",greaterThan:["self@cdate",!0]}},{columnIndex:"remark",width:200,componentName:"input",_cellConfig:{rules:[]}}],apiObj:{apiName:"getLackProduct",params:{fieldCode:"code,name,spec,unit,stockCount,expectCount,lackCount,edate,remark",dtlJsonStr:this.initData.data}},showIndex:!0,showCheckBox:!1,expand:!1,expandMode:"none",rowStyle:{"background-color":"#E4F3FA"}}]}},created:function(){var t=this.$storage.get("userInfo");this.temp.makeId=t.userId},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(t,e){this.$refs.customBaseTable.pushData(t,e)},updateData:function(t){this.$refs.customBaseTable.updateData(t)},deleteData:function(t){this.$refs.customBaseTable.deleteData(t)},databridge:function(t){Array.isArray(t)?(this.selectList=[],this.selectList=t):(this.rowData=null,null!=t.row&&(this.rowData=t.row))},dialogOpen:function(){var t=this;this.$nextTick(function(){t.$refs.submitForm.clearValidate()})},dialogClose:function(t){this.$emit("close-dialog",t||{})},saveOrder:function(){var t=this,e="";if(this.getData(),null!=this.selectList&&0!=this.selectList.length){for(var i=[],a=0;a<this.selectList.length;a++){var s=this.selectList[a],n={productId:"",count:"",reason:"",edate:"",remark:"",id:""};n.productId=s.id,n.count=s.lackCount,n.remark=s.remark,n.edate=s.edate,n.reason="350135d34d1b43aeb4e2977061632045",n.id=s.id,i.push(n)}e=JSON.stringify(i),this.temp.dtlJsonStr=e,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,Object(o.addPurchasePlan)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},closeDialog:function(t){this.showDialog=!1;null!=t.isConfirm&&t.isConfirm;null!=t.selectList&&t.selectList}},watch:{}}),n=(i("WqLC"),i("KHd+")),l=Object(n.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:t.initData.title?t.initData.title:"",visible:t.isVisible,"append-to-body":t.inDialog,"close-on-click-modal":t.onModal,"close-on-press-escape":t.onEscape,fullscreen:t.fullscreen,width:"1250px"},on:{"update:visible":function(e){t.isVisible=e},open:t.dialogOpen,close:t.dialogClose}},[t.showDialog?i(t.dialogName,{tag:"component",attrs:{initData:t.dialogData,visible:t.inLinVisible},on:{"close-dialog":t.closeDialog}}):t._e(),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:t.rules,model:t.temp,"label-position":"right","label-width":"120px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{height:"450px",width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{tableConfigList:t.tableConfigList},on:{databridge:t.databridge}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.saveOrder}},[t._v("生成采购计划")]),t._v(" "),i("el-button",{on:{click:function(e){t.isVisible=!1}}},[t._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogReport.vue";e.default=l.exports},WqLC:function(t,e,i){"use strict";var a=i("mBQz");i.n(a).a},jGQn:function(t,e,i){},mBQz:function(t,e,i){},xgHm:function(t,e,i){"use strict";var a=i("jGQn");i.n(a).a}}]);