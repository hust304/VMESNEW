(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6e16"],{"+oky":function(e,t,a){},Bkt5:function(e,t,a){"use strict";a.r(t);a("91GP"),a("rGqo");var i=a("fFUy"),n=a("uTIz"),l=(a("xfY5"),a("z0WU")),o={name:"base-table",props:{colConfigs:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},showCheckBox:{type:Boolean,default:!1},showIndex:{type:Boolean,default:!1},pageData:{type:Object,default:function(){return{}}},isSingle:{type:Boolean,default:!1},isFixed:{type:Number,default:1},isSortable:{type:Boolean,default:!0},hidePages:{type:Boolean,default:!1},customColumn:{type:Array,default:function(){return[]}},mergeTitle:{type:Array,default:function(){return[]}},mergeColumn:{type:Array,default:function(){return[]}},mergeRow:{type:Array,default:function(){return[]}}},data:function(){return{wrapperWidth:0,tableWidth:0,fixedState:!1,fixedList:[],domTimer:"",scrollTimer:"",baseTableWidth:"",columnWidth:{}}},directives:{"auto-width":{inserted:function(e,t,a){var i=a.context,n=t.value.component?t.value.component.length:0;n>1&&e.clientHeight>60&&i.$set(i.columnWidth,t.value.prop,60*Math.ceil(n/2)+25+"px")}}},computed:{hasPageData:function(){var e=!1;for(var t in this.pageData)this.pageData.hasOwnProperty(t)&&(e=!0);return e},setTableHeight:function(){return!this.hidePages&&this.hasPageData?"calc(100% - 40px)":"100%"},setColumnWidth:function(){return this.columnWidth}},created:function(){if(this.data&&this.data.length>0&&this.data.forEach(function(e){e.rowState="1"}),this.isFixed-1){this.fixedState=!0;for(var e=0;e<this.isFixed;e++)this.fixedList.push(!0)}},mounted:function(){this.baseTableWidth=this.$refs.baseTable.$el.clientWidth},updated:function(){},watch:{data:function(){var e=this;this.setFixed(),this.$refs.baseTable.$nextTick(function(){e.isSingle&&e.showCheckBox&&(clearTimeout(e.domTimer),e.domTimer=setTimeout(function(){e.$refs.baseTable.$el.querySelectorAll(".el-table__header").forEach(function(e){e.querySelector(".el-checkbox").style.display="none"})},10))})},"pageData.current":function(e){var t=this;clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(function(e){var a=t.$refs.baseTable.$el;a.querySelector(".el-table__body-wrapper").scrollTop>0&&Object(l.l)(a.querySelector(".el-table__body-wrapper"))&&Object(l.l)(a.querySelector(".el-table__fixed-body-wrapper"))})}},methods:{setFixed:function(){var e=this,t=null;e.$refs.baseTable.$nextTick(function(){e.wrapperWidth=e.$el.clientWidth,clearTimeout(t),t=setTimeout(function(){e.tableWidth=document.getElementsByTagName("thead")[0].clientWidth,e.wrapperWidth<e.tableWidth&&!(e.isFixed-1)&&(e.fixedState=!0,e.fixedList.push(!0))},10)})},setStyle:function(e){},indexMethod:function(e){return e+1},tableRowClassName:function(e,t){e.index=t},selectItem:function(e,t){this.$emit("databridge",e,t),this.isSingle&&(e.length?(this.data.forEach(function(e){e.rowState="0"}),e[0].rowState="1"):this.data.forEach(function(e){e.rowState="1"}))},selectAllItem:function(e){if(this.isSingle){if(e.length)for(var t=e.length-1;t>=0;t--)e.splice(t,1)}else this.$emit("databridge",e)},handleCurrentChange:function(e){this.$emit("update:currentpage",e)},selectable:function(e,t){return"1"===e.rowState},spanMethod:function(e,t,a,i){}}},s=(a("Q3yV"),a("KHd+")),r=Object(s.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"tableWrapper",staticStyle:{height:"100%",position:"relative"}},[a("div",{style:{height:e.setTableHeight}},[a("el-table",{ref:"baseTable",staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"","current-row-key":"",height:"100%",fit:"","header-cell-class-name":e.setStyle,"row-key":"id","span-method":e.spanMethod},on:{select:e.selectItem,"select-all":e.selectAllItem}},[e.showCheckBox?[a("el-table-column",{attrs:{type:"selection",fixed:e.fixedState,selectable:e.selectable,width:"55",align:"center"}})]:e._e(),e._v(" "),e.showIndex?[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,fixed:e.fixedState,label:"序号",width:"60",align:"center"}})]:e._e(),e._v(" "),e._l(e.colConfigs,function(t,i){return[t.slot?e._t(t.slot,null,{fixed:i===e.colConfigs.length-1?"right":i<e.isFixed&&e.fixedList[i]}):Array.isArray(t.component)?[a("el-table-column",e._b({attrs:{"show-overflow-tooltip":"",fixed:i===e.colConfigs.length-1?"right":i<e.isFixed&&e.fixedList[i],width:e.setColumnWidth[t.prop]||null,align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return["button"===t.componentName?a("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:t,expression:"colConfig"}],staticClass:"btnBox",staticStyle:{display:"flex","white-space":"normal","flex-wrap":"wrap"},style:{"justify-content":e.setColumnWidth[t.prop]?"space-between":"center"}},e._l(t.component,function(t){return a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.editBtns_isShow,expression:"item.editBtns_isShow"}],staticStyle:{height:"30px",width:"60px",padding:"0",margin:"0","font-size":"12px","max-width":"60px"},attrs:{type:"text"},on:{click:function(e){t.method(i.row,i.$index,i)}}},[e._v(e._s(t.name))])}),1):e._e()]}}])},"el-table-column",t,!1))]:"object"==typeof t.component?a(t.component,{tag:"component",attrs:{"col-config":t,fixed:i===e.colConfigs.length-1?"right":i<e.isFixed&&e.fixedList[i]}}):a("el-table-column",e._b({attrs:{"show-overflow-tooltip":"",sortable:void 0===t.sortable?e.isSortable:t.sortable,fixed:i===e.colConfigs.length-1?"right":i<e.isFixed&&e.fixedList[i],label:t.label,align:"center"}},"el-table-column",t,!1))]})],2)],1),e._v(" "),!e.hidePages&&e.hasPageData?a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"5px"}},[a("el-pagination",{attrs:{background:"","current-page":e.pageData.current,"page-size":e.pageData.size,layout:"prev, pager, next, jumper",total:e.pageData.total-0},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.pageData,"current",t)}}})],1):e._e()])},[],!1,null,null,null);r.options.__file="index.vue";var c=r.exports,d=a("Yfch"),u=a("Z7+y"),h=(a("7lLV"),{data:function(){return{searchList:[{label:"货品编码",type:"input",ruleType:"code",ruleOps:{min:6,max:7},mapKey:"goodsCode",configs:{},placeholder:"请输入编码"},{label:"货品名称",type:"input",ruleType:"string",mapKey:"goodsName",configs:{},placeholder:"请输入货物名"},{label:"盘点时间",type:"select",ruleType:"number",mapKey:"inventoryTime",configs:{clearable:!0,name:"",options:[{value:1,label:"由近到远"},{value:2,label:"由远到近"}]},placeholder:"请选择"},{label:"库存变动时间",type:"select",mapKey:"inventoryChangeTime",configs:{clearable:!0,name:"",options:[{value:1,label:"近3天内"},{value:2,label:"近一周内"},{value:3,label:"近一个月"},{value:4,label:"近三个月"},{value:5,label:"近一年"}]},placeholder:"请选择"},{label:"库存数量",type:"cascader",mapKey:"cascaded",configs:{clearable:!0,apiName:"getDictionarys",params:{dictionaryKey:"userType",isglobal:"1"}},placeholder:"请选择"},{label:"盘点日期",type:"date",ruleType:"date",mapKey:"date",configs:{clearable:!0,name:"",type:"date",pickerOptions:{disabledDate:["2018-09-15","2018-10-20"]}},placeholder:"请选择"},{label:"盘点时间",type:"time",mapKey:"time",configs:{clearable:!0,name:"",pickerOptions:{}},placeholder:"选择时间"}],searchMethod:{},searchConfig:{},searchObj:{},fromTemp:{},showDialog:!1,dialogVisible:!1,dialogCallBackData:null,guid:"",tableData:{},currentpage:1,customColumn:[{prop:"code",componentName:"select",rules:[],message:["必须为字母或数字","","须大于取货数量","须小于出库数量"],valueType:"date",format:"yyyy年MM月dd日",valueFormat:"yyyy-MM-dd",placeholder:"选择日期",editable:!1,greaterThan:["2018-11-13 17:30:33","self@stockCount",!0],lessThan:["parent@1@count",!0],shortcuts:["yesterday","today","tomorrow","lastWeek","nextWeek","lastMonth","nextMonth","lastYear","nextYear"],options:[{id:"1",label:"用户1"},{id:"2",label:"用户2",isdisable:"0"},{id:"3",label:"用户3"},{id:"4",label:"用户4"},{id:"5",label:"用户5"}]},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"新增",nameEn:"add",editBtns_isShow:!0,icon:"add",method:this.addChild},{name:"删除",nameEn:"delete",editBtns_isShow:!0,icon:"delete",plain:!0,state:!0,method:this.deleteAllRow},{name:"删除",nameEn:"delete",editBtns_isShow:!0,icon:"delete",plain:!0,state:!0,method:this.deleteAllRow},{name:"删除",nameEn:"delete",editBtns_isShow:!0,icon:"delete",plain:!0,state:!0,method:this.deleteAllRow}]}],precision:3,apiObj:{apiName:"listPageWarehouseOutDetailsDispatch",params:{pageNo:1,queryStr:"detail.id in ('219967d2f6704d868b11002caef9885c')"}},mergeTitle:[{index:1,columns:[{keyName:"warehouseOutCode",bodyStyle:{color:"#199ED4","font-weight":600},events:{type:"navigation",path:"encapsulation/treeFormTable"}}]},{index:2,columns:["productGenreName",{keyName:"productUnitName",titleStyle:{"font-weight":600,"font-size":"16px",color:"#FF9900"},bodyStyle:{color:"#199ED4","font-weight":600}}]},{index:4,alias:"合并后的列",columns:["productName",{keyName:"productSpec",componentName:"el-steps",titleStyle:{"font-weight":600},componentConfig:{titleList:["待审核","待出库","待发货","已发货","已完成"]}},{keyName:"progress",componentName:"el-progress",titleStyle:{"font-weight":600,color:"#FF9900"},componentConfig:{"text-inside":!0,"stroke-width":18,color:"#009933","show-text":!0}}]},{index:5,columns:[{keyName:"count",componentName:"el-input",componentConfig:{placeholder:"嘎嘎嘎",type:"text",maxlength:"",minlength:"",clearable:!0,disabled:"inputState",size:"small",rule:{notEmpty:!0,type:"float"}},bodyStyle:{color:"#000000","font-weight":600},hideTitle:!0}]}],mergeColumn:[],mergeRow:[]}},components:{customRowTable:i.a,searchBar:n.a,customBaseTable:c},beforeCreate:function(){},created:function(){this.tableData=this.getListPage(u.a,this.customColumn)},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},methods:{getListPage:function(e,t){var a=this;if(e){e.result.titles="string"==typeof e.result.titles?JSON.parse(e.result.titles):e.result.titles,e.result.varList="string"==typeof e.result.varList?JSON.parse(e.result.varList):e.result.varList,e.result.pageData="string"==typeof e.result.pageData?JSON.parse(e.result.pageData):e.result.pageData;var i=Object(l.j)(e.result),n=this.addTableTitle(i,t);return e.result.varList.forEach(function(e,i){if(e.titles&&e.hideTitles&&e.children){var n={result:{titles:e.titles,hideTitles:e.hideTitles,varList:e.children,pageData:{}}},l=a.getListPage(n,t);e.titleList=l.titleList,e.pageData=l.pageData}}),{titleList:n,pageData:e.result.pageData,tableData:e.result.varList}}return{}},addTableTitle:function(e,t){return t&&Array.isArray(t)&&t.forEach(function(t){Object(d.b)(t.columnIndex)?e.splice(t.columnIndex,0,t):"first"===t.columnIndex?e.unshift(t):"last"===t.columnIndex?e.push(t):e.some(function(e){if(e.prop===t.columnIndex)return Object.assign(e,t),!0})}),e},getData:function(){this.$refs.treeFormTable.getData()},formData:function(e){},databridge:function(e){},sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(a){e(),t.showDialog=!1,t.fromTemp={}}).catch(function(e){})},addChild:function(e,t,a){},addChildRow:function(){},deleteAllRow:function(e,t,a){}},computed:{tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0):0}},watch:{currentpage:function(){}}}),p=(a("Whw8"),Object(s.a)(h,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cascadeTable"},[e.searchList.length?a("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),a("el-row",{staticStyle:{"border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.tableHeight+"px","margin-top":e.searchList.length?"10px":"0"}},[a("custom-base-table",{ref:"customBaseTable",attrs:{keyValue:!1,showIndex:!0,data:e.tableData.tableData,colConfigs:e.tableData.titleList,pageData:e.tableData.pageData,currentpage:e.currentpage,customColumn:e.customColumn,precision:e.precision,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,databridge:e.databridge}})],1),e._v(" "),a("div",{staticStyle:{position:"absolute",top:"80px",left:"300px"}},[a("el-button",{on:{click:e.getData}},[e._v("getData")])],1),e._v(" "),e.showDialog?[a("el-dialog",{attrs:{title:"新增下级",visible:e.dialogVisible,width:"400px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addChildRow}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Top Left 提示文字",placement:"top-start"}},[a("el-button",[e._v("上左")])],1)],1)])]:e._e()],2)},[],!1,null,null,null));p.options.__file="index.vue";t.default=p.exports},Q3yV:function(e,t,a){"use strict";var i=a("jgCq");a.n(i).a},Whw8:function(e,t,a){"use strict";var i=a("+oky");a.n(i).a},jgCq:function(e,t,a){}}]);