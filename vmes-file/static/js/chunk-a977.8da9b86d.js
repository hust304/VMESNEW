(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a977"],{"+bwc":function(e,t,a){"use strict";a.r(t);var o=a("fFUy"),r=a("uTIz"),n={props:["colConfig","scope"],template:'<div class="btnBox">\n              <el-button v-show="colConfig.infoByParent_isShow" type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.infoByParent(scope.row,scope.$index)">详情</el-button>\n    \t\t\t\t </div>'},i={props:["colConfig","scope"],template:'<div class="btnBox">\n              <el-button v-show="colConfig.lockCount_isShow" type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.lockCount(scope.row,scope.$index)">锁库</el-button>\n              <el-button v-show="colConfig.unlockCount_isShow" type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.unlockCount(scope.row,scope.$index)">解锁</el-button>\n    \t\t\t\t </div>'},_={components:{customRowTable:o.a,searchBar:r.a},data:function(){return{firstFieldCode:"sysCode,customerName,orderDate,deliverDate,makeName,orderStateByQuery,receiveProgress,advanceSum,isInvoice",openDialogName:"",showDialog:!1,visible:!1,dialogData:{title:"",temp:null,tempLable:null},searchList:[{label:"订单编号",type:"input",ruleType:"string",mapKey:"sysCode",configs:{},placeholder:"订单编号"},{label:"客户名称",type:"input",ruleType:"string",mapKey:"customerName",configs:{},placeholder:"客户名称"},{label:"订单状态",type:"select",ruleType:"string",mapKey:"state",configs:{clearable:!0,name:"",options:[{value:"0",label:"待提交"},{value:"1",label:"待审核"},{value:"2",label:"待发货"},{value:"3",label:"已发货"},{value:"4",label:"已完成"},{value:"-1",label:"已取消"}]},placeholder:"请选择"},{label:"下单日期起",type:"date",ruleType:"date",mapKey:"orderDateBegin",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"},{label:"下单日期止",type:"date",ruleType:"date",mapKey:"orderDateEnd",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"},{label:"约定交期",type:"date",ruleType:"date",mapKey:"deliverDate",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"},{label:"发票类型",type:"select",ruleType:"string",mapKey:"receiptType",configs:{clearable:!0,name:"",options:[{value:"1",label:"不开票"},{value:"2",label:"普通发票"},{value:"3",label:"增值税发票"}]},placeholder:"请选择"},{label:"订单明细状态",type:"select",ruleType:"string",mapKey:"orderDtlState",configs:{clearable:!0,name:"",options:[{value:"0",label:"待提交"},{value:"1",label:"待审核"},{value:"2",label:"待生产"},{value:"3",label:"待出库"},{value:"4",label:"待发货"},{value:"5",label:"已发货"},{value:"6",label:"已完成"},{value:"-1",label:"已取消"}]},placeholder:"请选择"}],searchMethod:{},searchConfig:{},guid:"",currentpage:1,searchObj:{},customColumn:{0:[{columnIndex:"last",prop:"operate",label:"操作",component:n,infoByParent_isShow:!0,infoByParent:this.infoByParent}],1:[{columnIndex:"last",prop:"operate",label:"操作",component:i,lockCount_isShow:!0,lockCount:this.lockCount,unlockCount_isShow:!0,unlockCount:this.unlockCount}]},tableSets:{0:{showCheckBox:!1,showIndex:!0,expandOne:!1,isSortable:!1,showPageData:!0},1:{showCheckBox:!0,showIndex:!0,isSortable:!1,isSingle:!0}},precision:2,apiObj:{apiName:"listPageSaleOrderQuery",params:{pageNo:1,firstFieldCode:"",secondFieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,count,productPrice,productSum,endDeliverCount"}},mergeColumn:{0:[{index:1,columns:[{keyName:"sysCode",bodyStyle:{color:"#199ED4","font-weight":600},events:{type:"navigation",path:""}}]},{index:3,columns:["orderDate","deliverDate"]},{index:4,alias:"合并后的列",columns:[{keyName:"orderStateByQuery",componentName:"el-steps",titleStyle:{"font-weight":600},componentConfig:{titleList:["待提交","待审核","待发货","已发货","已完成"]}},{keyName:"receiveProgress",componentName:"el-progress",titleStyle:{"font-weight":600,color:"#FF9900"},componentConfig:{"text-inside":!0,"stroke-width":18,color:"#009933","show-text":!0}}]}],1:[{index:9,alias:"进度",columns:[{keyName:"endDeliverCount",componentName:"el-progress",titleStyle:{"font-weight":600,color:"#FF9900"},componentConfig:{"text-inside":!1,"stroke-width":16,color:"#199ED4","show-text":!0,showInitValue:!0}}]}]}}},beforeCreate:function(){},created:function(){this.apiObj.params.firstFieldCode=this.firstFieldCode},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},methods:{getData:function(){this.$refs.treeFormTable.getData()},formData:function(e){},databridge:function(e){},sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(a){e(),t.showDialog=!1,t.fromTemp={}}).catch(function(e){})},infoByParent:function(e,t){},unlockCount:function(e,t){},lockCount:function(e,t){}},computed:{tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0):0}},watch:{currentpage:function(){}}},l=(a("lUQU"),a("KHd+")),s=Object(l.a)(_,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"orderQuery"},[e.searchList.length?a("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),a("el-row",{staticStyle:{border:"1px solid #E4E4E4","border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.tableHeight+"px","margin-top":e.searchList.length?"10px":"0"}},[a("custom-row-table",{ref:"treeFormTable",attrs:{"expand-all":!0,keyValue:!0,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:{},precision:e.precision,apiObj:e.apiObj,mergeColumn:e.mergeColumn},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,databridge:e.databridge}})],1),e._v(" "),e.showDialog?a(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visible},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);s.options.__file="index.vue";t.default=s.exports},"6P51":function(e,t,a){},F9dT:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return createRules}),__webpack_require__.d(__webpack_exports__,"c",function(){return searchVal}),__webpack_require__.d(__webpack_exports__,"b",function(){return getVal});var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("pIFo"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("SRfc"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("KKXr"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_array_find_index__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("INYr"),core_js_modules_es6_array_find_index__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_array_find_index__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("rGqo"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4__),_validate__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("Yfch"),_dateTools__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("TB3a"),rulesG=function(){return function(e,t,a){var o,r,n;t?(r=t-0,o=!0,n=e.ops[e.ops.length-1],e.ops&&e.ops.length&&e.ops.forEach(function(t,a){a<e.ops.length-1&&(n?Object(_validate__WEBPACK_IMPORTED_MODULE_5__.b)(t-0)?(!Object(_validate__WEBPACK_IMPORTED_MODULE_5__.b)(r)||t-0>r)&&(o=!1):t-0>r&&(o=!1):Object(_validate__WEBPACK_IMPORTED_MODULE_5__.b)(t-0)?(!Object(_validate__WEBPACK_IMPORTED_MODULE_5__.b)(r)||t-0>=r)&&(o=!1):t-0>=r&&(o=!1))}),o?a():a(new Error(e.message))):a(new Error("不能为空"))}},rulesL=function(){return function(e,t,a){var o,r,n;t?(r=t-0,o=!0,n=e.ops[e.ops.length-1],e.ops&&e.ops.length&&e.ops.forEach(function(t,a){a<e.ops.length-1&&(n?Object(_validate__WEBPACK_IMPORTED_MODULE_5__.b)(t-0)?(!Object(_validate__WEBPACK_IMPORTED_MODULE_5__.b)(r-0)||r>t-0)&&(o=!1):r>t-0&&(o=!1):Object(_validate__WEBPACK_IMPORTED_MODULE_5__.b)(t-0)?(!Object(_validate__WEBPACK_IMPORTED_MODULE_5__.b)(r-0)||r>=t-0)&&(o=!1):r>=t-0&&(o=!1))}),o?a():a(new Error(e.message))):a(new Error("不能为空"))}};function createRules(e,t,a,o,r,n,i,_,l,s,c){var u,p,d,g,h;return e&&(u=searchVal(e.greaterThan,r,n,l,!0,s)),g=_.findIndex(function(e){return e.greaterThan}),t&&(p=searchVal(t.lessThan,r,n,l,!1,s)),h=_.findIndex(function(e){return e.lessThan}),d=[],u&&d.push({validator:rulesG(),trigger:"blur",message:i[c||g],ops:u}),p&&d.push({validator:rulesL(),trigger:"blur",message:i[c||h],ops:p}),d}function searchVal(e,t,a,o,r,n){var i;"boolean"==typeof(e=JSON.parse(JSON.stringify(e)))[e.length-1]&&(i=e.pop());var _=e.map(function(e){return""});return e.forEach(function(e,i){var l=e.split(/\([\\+|\-|\\*|\\/]\)/);if(l.length>1)_.splice(i,1,getVal(l,t,a,o,e,n));else if(-1!==e.indexOf("@")){var s=e.split("@");2===s.length&&"self"===s[0]&&_.splice(i,1,t[s[1]]),2===s.length&&"parent"===s[0]&&_.splice(i,1,a[0][s[1]]),2===s.length&&"tempData"===s[0]&&_.splice(i,1,n[s[1]]),2===s.length&&"sibling"===s[0]&&_.splice(i,1,getSiblingSum(s[1],o,t,!1,r)),3===s.length&&"parent"===s[0]&&_.splice(i,1,JSON.parse(JSON.stringify(a)).reverse()[s[1]-1][s[2]])}else _.splice(i,1,e)}),"boolean"==typeof i?_.push(i):_.push(!0),_}function getVal(list,row,rowChain,siblingList,baseStr,tempData){var valList=list.map(function(e){return""});list.forEach(function(e,t){var a=e.split("@"),o=0;if(2===a.length)switch(a[0]){case"self":o=row[a[1]];break;case"parent":o=rowChain[rowChain.length-1][a[1]];break;case"tempData":o=tempData[a[1]];break;case"sibling":o=getSiblingSum(a[1],siblingList,row,!0)}else 3===a.length?o=JSON.parse(JSON.stringify(rowChain)).reverse()[a[1]-1][a[2]]:1===a.length&&(o=a[0]-0);valList.splice(t,1,o||0)});var operatorList=baseStr.match(/\([\\+|\-|\\*|\\/]\)/g).map(function(e){return e.replace(/\(|\)/g,"")}),tempStr="",dataType=checkType(valList[0]);return"number"===dataType?valList.forEach(function(e,t){operatorList[t]?tempStr+=e+operatorList[t]:tempStr+=e}):"date"===dataType&&valList.forEach(function(e,t){var a=_dateTools__WEBPACK_IMPORTED_MODULE_6__.a.timeStamp(e);operatorList[t]?tempStr+=a+operatorList[t]:tempStr+=a}),eval(tempStr)}function checkType(e){return Object(_validate__WEBPACK_IMPORTED_MODULE_5__.a)(e)?"number":"string"==typeof e&&/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}/.test(e)?"date":void 0}function getSiblingSum(e,t,a,o,r){var n=[],i=0,_=t.findIndex(function(e){return e.id===a.id});return t.forEach(function(t,a){_!==a&&n.push(t[e])}),o?n.forEach(function(e){i+=e-0}):i=r?Math.min.apply(Math,n):Math.max.apply(Math,n),i}},TB3a:function(e,t,a){"use strict";a("a1Th"),a("SRfc"),a("KKXr");t.a={timeStamp:function(e){if("string"==typeof e){var t=e.split(" ");if(1===t.length){var a=t[0].match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);return null===a?(new Date).getTime():new Date(a[1],a[3]-1,a[4]).getTime()}var o=t[0].match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/),r=t[1].match(/^(\d{1,2})(-|\:)(\d{1,2})\2(\d{1,2})$/);return o&&r?new Date(o[1],o[3]-1,o[4],r[1],r[3],r[4]).getTime():(new Date).getTime()}return"number"==typeof e?864e5*e:(new Date).getTime()},formatDate:function(e,t){var a=e?new Date(e):new Date,o=a.getFullYear(),r=a.getMonth()+1,n=a.getDate(),i=a.getHours(),_=a.getMinutes(),l=a.getSeconds(),s=function(e){return(e=e.toString())[1]?e:"0"+e};return[o,r,n].map(s).join(t||"-")+" "+[i,_,l].map(s).join(":")}}},lUQU:function(e,t,a){"use strict";var o=a("6P51");a.n(o).a}}]);