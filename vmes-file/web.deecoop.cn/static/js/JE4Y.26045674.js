(window.webpackJsonp=window.webpackJsonp||[]).push([["JE4Y"],{JE4Y:function(i,t,e){"use strict";e.r(t);e("f3/d");var a=e("WIyV"),o=e("MPAK"),s=e("Ikq8"),l={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{formData:{id:"",assistProductId:"",assistProductName:"",supplierId:"",supplierName:"",price:"",lossRatio:""},rules:{assistProductName:[{required:!0,message:"请选择外协件",trigger:"change"}],supplierName:[{required:!0,message:"请选择供应商",trigger:"change"}],price:[{required:!0,trigger:"change",validator:function(i,t,e){Object(o.isPriceByValueSystem)(t)?(0==t&&e(new Error("请输入大于零的正数支持4位小数！")),e()):e(new Error("请输入大于零的正数支持4位小数！"))}}],lossRatio:[{required:!0,trigger:"change",validator:function(i,t,e){Object(o.isNumberByValueSystem)(t)?(0==t&&e(new Error("请输入大于零的正数支持2位小数！")),e()):e(new Error("请输入大于零的正数支持2位小数！"))}}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,AssistProductDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"800px",title:"选择外协件"},dialogName:"dialogAssistProductOption"}},SupplierDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择供应商",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"49c0a7ebcb4c4175bd5195837a6a9a13",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}}}},beforeCreate:function(){},created:function(){var i=this.initData.rowData;this.formData.id=i.id,this.formData.assistProductId=i.assistProductId,this.formData.assistProductName=i.assistProductName,this.formData.supplierId=i.supplierId,this.formData.supplierName=i.supplierName,this.formData.price=i.price,this.formData.lossRatio=i.lossRatio},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{assistProductSelect:function(i){i[0]&&(this.formData.assistProductId=i[0].id,this.formData.assistProductName=i[0].productName)},supplierSelect:function(i){i[0]&&(this.formData.supplierId=i[0].id,this.formData.supplierName=i[0].name)},save:function(){var i=this;this.$refs.submitForm.validate(function(t){t&&(i.dialogLoading=!0,Object(s.updateAssistSupplier)(i.formData).then(function(t){i.dialogLoading=!1,0===t.code&&(i.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),i.isVisible=!1,i.dialogClose({resState:"ok"}))}).catch(function(t){i.dialogLoading=!1}))})},dialogOpen:function(){var i=this;this.$nextTick(function(){i.$refs.submitForm.clearValidate()})},dialogClose:function(i){this.$emit("close-dialog",i||{})},closeDialog:function(i){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},r=e("KHd+"),n=Object(r.a)(l,function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:i.initData.title?i.initData.title:"",visible:i.isVisible,"append-to-body":i.inDialog,"close-on-click-modal":i.onModal,"close-on-press-escape":i.onEscape,fullscreen:i.fullscreen,width:"350px"},on:{"update:visible":function(t){i.isVisible=t},open:i.dialogOpen,close:i.dialogClose}},[i.showDialog?e(i.dialogName,{tag:"component",attrs:{initData:i.dialogData,visible:i.inLinVisible},on:{"close-dialog":i.closeDialog}}):i._e(),i._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:i.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[e("el-form",{ref:"submitForm",attrs:{rules:i.rules,inline:!0,model:i.formData,"label-position":"right","label-width":"80px"}},[e("el-row",[e("el-col",[e("el-form-item",{attrs:{label:"外协件:",prop:"assistProductName"}},[e("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:i.AssistProductDialog.dialog},on:{callback:i.assistProductSelect},model:{value:i.formData.assistProductName,callback:function(t){i.$set(i.formData,"assistProductName",t)},expression:"formData.assistProductName"}})],1)],1)],1),i._v(" "),e("el-row",[e("el-col",[e("el-form-item",{attrs:{label:"供应商:",prop:"supplierName"}},[e("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:i.SupplierDialog.dialog},on:{callback:i.supplierSelect},model:{value:i.formData.supplierName,callback:function(t){i.$set(i.formData,"supplierName",t)},expression:"formData.supplierName"}})],1)],1)],1),i._v(" "),e("el-row",[e("el-col",[e("el-form-item",{attrs:{label:"单价:",prop:"price"}},[e("el-input",{staticStyle:{width:"200px"},model:{value:i.formData.price,callback:function(t){i.$set(i.formData,"price",t)},expression:"formData.price"}})],1)],1)],1),i._v(" "),e("el-row",[e("el-col",[e("el-form-item",{attrs:{label:"损耗率:",prop:"lossRatio"}},[e("el-input",{staticStyle:{width:"200px"},model:{value:i.formData.lossRatio,callback:function(t){i.$set(i.formData,"lossRatio",t)},expression:"formData.lossRatio"}})],1)],1)],1)],1),i._v(" "),e("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[e("el-button",{attrs:{type:"primary"},on:{click:i.save}},[i._v("保存")]),i._v(" "),e("el-button",{on:{click:function(t){i.isVisible=!1}}},[i._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogEdit.vue";t.default=n.exports}}]);