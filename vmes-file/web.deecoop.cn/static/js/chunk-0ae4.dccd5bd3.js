(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0ae4"],{"+bwc":function(e,t,o){"use strict";o.r(t);o("91GP"),o("rGqo"),o("yt8O"),o("XfO3"),o("9AAn");var a=o("fFUy"),i=o("uTIz"),l=o("5Fd+"),n=o("Pk/H"),r=o("rwyD"),s={props:["colConfig","scope"],template:'<div class="btnBox">\n              <el-button v-show="colConfig.infoByParent_isShow" type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.infoByParent(scope.row,scope.$index)">详情</el-button>\n              <el-button v-show="colConfig.lockCountByParent_isShow && scope.row.state == \'2\'" type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.lockCountByParent(scope.row,scope.$index)">锁库</el-button>\n    \t\t\t\t </div>'},c={props:["colConfig","scope"],template:'<div class="btnBox">\n              <el-button v-show="colConfig.rebackLockCountByDetail_isShow && (scope.row.isLockWarehouse == \'1\')" type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.rebackLockCountByDetail(scope.row,scope.$index)">解锁</el-button>\n    \t\t\t\t </div>'},d={components:{customRowTable:a.a,searchBar:i.a,orderCollect:l.default,dialogOrderDetailLockStock:n.default},data:function(){return{orderStateNameMap:new Map([["0","待提交"],["1","待审核"],["2","待发货"],["3","已完成"],["-1","已取消"]]),openDialogName:"",showDialog:!1,visible:!1,dialogData:{dialog_width:"",orderDetail_style:"",deliverDetail_style:"",title:"",temp:null,orderId:"",orderObject:{},tempLable:null},searchList:[{label:"订单编号",type:"input",ruleType:"string",mapKey:"sysCode",configs:{},placeholder:"订单编号"},{label:"客户名称",type:"input",ruleType:"string",mapKey:"customerName",configs:{},placeholder:"客户名称"},{label:"订单状态",type:"select",ruleType:"string",mapKey:"state",configs:{clearable:!0,name:"",options:[{value:"0",label:"待提交"},{value:"1",label:"待审核"},{value:"2",label:"待发货"},{value:"3",label:"已完成"},{value:"-1",label:"已取消"}]},placeholder:"请选择"},{label:"下单日期起",type:"date",ruleType:"date",mapKey:"orderDateBegin",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"},{label:"下单日期止",type:"date",ruleType:"date",mapKey:"orderDateEnd",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"},{label:"约定交期",type:"date",ruleType:"date",mapKey:"expectDate",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"},{label:"发票类型",type:"select",ruleType:"string",mapKey:"receiptType",configs:{clearable:!0,name:"",options:[{value:"1",label:"不开票"},{value:"2",label:"增值税普通发票"},{value:"3",label:"增值税专用发票"}]},placeholder:"请选择"},{label:"订单明细状态",type:"select",ruleType:"string",mapKey:"orderDtlState",configs:{clearable:!0,name:"",options:[{value:"0",label:"待提交"},{value:"1",label:"待审核"},{value:"2",label:"待生产"},{value:"3",label:"待出库"},{value:"4",label:"待发货"},{value:"5",label:"已完成"},{value:"-1",label:"已取消"}]},placeholder:"请选择"}],searchMethod:{},searchConfig:{},guid:"",currentpage:1,searchObj:{},customColumn:{0:[{columnIndex:"last",prop:"operate",label:"操作",component:s,infoByParent_isShow:!0,infoByParent:this.infoByParent,lockCountByParent_isShow:!0,lockCountByParent:this.lockCountByParent}],1:[{columnIndex:"prodInfo",width:"250",_cellConfig:{hideTitle:!0}},{columnIndex:"last",prop:"operate",label:"操作",component:c,rebackLockCountByDetail_isShow:!0,rebackLockCountByDetail:this.rebackLockCountByDetail}]},tableSets:{0:{showCheckBox:!1,showIndex:!1,expandOne:!1,isSortable:!1,showPageData:!0},1:{showCheckBox:!1,showIndex:!1,isSortable:!1,isSingle:!0}},precision:2,apiObj:{apiName:"listPageSaleOrderQuery",params:{pageNo:1,firstFieldCode:"sysCode,customerName,orderDate,deliverDate,orderStateByQuery,orderSum,priceTypeName",secondFieldCode:"prodInfo,orderUnitName,orderCount,lockCount,productPrice,productSum,stateName,deliverProgress",secondAddColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",orderStr:"saleOrder.cdate desc",dataType:this.$storage.get("dataType")}},mergeColumn:{0:[{index:1,columns:[{keyName:"sysCode",events:{type:"click"},hideTitle:!1,_cellConfig:{methodName:"infoByParentBySysCode"},bodyStyle:{color:"#1890FF"}},"customerName"]},{index:2,columns:["orderDate","deliverDate"]},{index:3,alias:"合并后的列",columns:[{keyName:"orderStateByQuery",componentName:"el-steps",titleStyle:{"font-weight":600},componentConfig:{titleList:["待提交","待审核","待发货","已完成"]}}]},{index:4,columns:["priceTypeName","orderSum"]}],1:[]}}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},methods:{getData:function(){this.$refs.treeFormTable.getData()},formData:function(e){},databridge:function(e){},sendGuid:function(e){this.guid=e},searchMap:function(e){this.apiObj.params.pageNo=1,this.searchObj=e},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(o){e(),t.showDialog=!1,t.fromTemp={}}).catch(function(e){})},closeDialog:function(e){this.visible=!1,this.showDialog=!1},infoByParentBySysCode:function(e){null!=e&&null!=e.row&&this.infoByParent(e.row,null)},infoByParent:function(e,t){var o=e,a=.8*document.body.clientWidth;this.dialogData.dialog_width=a+"px",this.dialogData.temp=JSON.parse(JSON.stringify(o)),this.dialogData.orderObject=JSON.parse(JSON.stringify(o)),this.dialogData.orderId=o.id,this.dialogData.title="订单详情",this.openDialogName="orderCollect",this.showDialog=!0,this.visible=!0},rebackLockCountByDetail:function(e,t){var o=this,a=e.lockCount;if(null!=a&&(a+"").trim().length>0&&a-0==0)this.$message({type:"warning",duration:5e3,showClose:!0,message:"该货品锁定库存数量为零，无需(解锁)操作！"});else{var i={id:e.id,productId:e.productId,productLockCount:e.productLockCount,lockCount:e.lockCount};this.$confirm("已锁定的库存将被解除锁定，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.rebackSaleOrderDetailByLockCount)(i).then(function(e){0===e.code&&o.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3})}).catch(function(e){})}).catch(function(){o.$message({type:"info",message:"已取消解锁"})})}},lockCountByParent:function(e,t){var o=.6*document.body.clientWidth;this.dialogData.dialog_width=o+"px";var a=.75*(.618*o)+"px";this.dialogData.orderDetail_style="height:"+a+";width: 96%;margin-left: 2%;";var i=e.state;if("2"==i)this.dialogData.orderId=e.id,this.dialogData.title="锁定产品库存数量",this.openDialogName="dialogOrderDetailLockStock",this.showDialog=!0,this.visible=!0;else{var l=this.orderStateNameMap.get(i);this.$message({type:"warning",duration:5e3,showClose:!0,message:"订单状态("+l+")，订单状态只能(待发货)时允许(锁库及修改)！"})}},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)}},computed:{tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0):0},setApiObj:function(){var e=Object.assign({},this.apiObj.params,this.searchObj);return{apiName:this.apiObj.apiName,params:e}},dialogName:function(){return this.openDialogName}},watch:{currentpage:function(){this.apiObj.params.pageNo=this.currentpage}}},p=(o("lUQU"),o("KHd+")),u=Object(p.a)(d,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"orderQuery"},[e.searchList.length?o("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),o("el-row",{staticStyle:{border:"1px solid #E4E4E4","border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.tableHeight+"px","margin-top":e.searchList.length?"10px":"0"}},[o("custom-row-table",{ref:"treeFormTable",attrs:{"expand-all":!0,keyValue:!0,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:{},precision:e.precision,apiObj:e.setApiObj,mergeColumn:e.mergeColumn},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),e.showDialog?o(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visible},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);u.options.__file="index.vue";t.default=u.exports},b5Er:function(e,t,o){},lUQU:function(e,t,o){"use strict";var a=o("b5Er");o.n(a).a}}]);