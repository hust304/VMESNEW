(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-45ea"],{"1FrY":function(e,t,a){"use strict";a.r(t);a("91GP");var i=a("uTIz"),s=a("WIyV"),n=a("W8KX"),o=a("fXSm"),c=a("We3Z"),l={components:{searchBar:i.a,customBaseTable:s.a,dialogDetail:n.default,dialogHistory:o.default},data:function(){return{nowReceiveAmount:"0.00",preReceiveAmount:"0.00",searchList:[{label:"客户名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"请输入客户名称"}],searchConfig:{hideSearchSwitch:!1},searchObj:{},guid:"",configs:{topBarBtnList:[{name:"结账",nameEn:"checkOut",isShow:!0,method:this.checkOut},{name:"反结账",nameEn:"unCheckOut",isShow:!0,method:this.unCheckOut}]},tableData:[],varList:[],apiObj:{apiName:"getFinanceReceiveView",params:{genre:"df7cb67fca4148bc9632c908e4a7fdea"}},customColumn:[{columnIndex:"name",width:"200",_cellConfig:{bodyStyle:{"text-align":"left",display:"inline-block",width:"100%"},hideTitle:!0}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",width:"160",component:[{name:"明细",nameEn:"findDetail",editBtns_isShow:!0,method:this.findDetail},{name:"历史",nameEn:"findHistory",editBtns_isShow:!0,method:this.findHistory}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},openDialogName:"",showDialog:!1,visible:!1,dialogData:{title:"",data:null},dialogLoading:!0,temp:{}}},beforeCreate:function(){},created:function(){var e=this;Object(c.getFinanceReceiveGroup)({genre:"df7cb67fca4148bc9632c908e4a7fdea"}).then(function(t){0!=t.result&&null!=t.result.nowReceiveAmount&&t.result.nowReceiveAmount.trim().length>0&&(e.nowReceiveAmount=t.result.nowReceiveAmount.trim()),0!=t.result&&null!=t.result.preReceiveAmount&&t.result.preReceiveAmount.trim().length>0&&(e.preReceiveAmount=t.result.preReceiveAmount.trim())}).catch(function(e){})},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(){this.$refs.customBaseTable.updateTable()},updateData:function(e){this.$refs.customBaseTable.updateData(e)},searchMap:function(e){this.searchObj=e,this.apiObj.params=Object.assign({},this.apiObj.params,this.searchObj)},sendGuid:function(e){this.guid=e},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.updateData(this.searchObj)},databridge:function(e){this.tableData=e},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},checkOut:function(){var e=this;Object(c.checkOutFinanceReceive)({genre:"df7cb67fca4148bc9632c908e4a7fdea",isNeedPage:"false"}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.updateData(e.searchObj))}).catch(function(e){})},unCheckOut:function(){var e=this;Object(c.unCheckOutFinanceReceive)({genre:"df7cb67fca4148bc9632c908e4a7fdea",isNeedPage:"false"}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.updateData(e.searchObj))}).catch(function(e){})},findDetail:function(e){e.currentPeriod?(this.temp=JSON.parse(JSON.stringify(e)),this.temp.customerId=e.id,this.dialogData.temp=this.temp,this.dialogData.tempLable=this.tempLable,this.dialogData.title="本期明细",this.openDialogName="dialogDetail",this.showDialog=!0,this.visible=!0):this.$message({type:"info",message:"期间为空，请先点击结账按钮初始化期间！"})},findHistory:function(e){this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.temp=this.temp,this.dialogData.tempLable=this.tempLable,this.dialogData.title="历史账单",this.openDialogName="dialogHistory",this.showDialog=!0,this.visible=!0}},computed:{tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0):0},dialogName:function(){return this.openDialogName}},watch:{}},r=(a("BxLO"),a("Jcc8"),a("KHd+")),h=Object(r.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"paymentQuery"},[e.searchList.length?a("search-bar",{attrs:{searchList:e.searchList,searchConfig:e.searchConfig},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),a("el-row",{staticClass:"tableTopBar"},[a("el-col",[a("div",{staticClass:"tableBtns"},[e._l(e.configs.topBarBtnList,function(e,t){return[a("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2)])],1),e._v(" "),a("el-row",{staticStyle:{border:"1px solid #E4E4E4","border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.tableHeight+"px"}},[a("el-col",{staticClass:"tableStyle",attrs:{span:24}},[a("div",{staticClass:"baseTable"},[a("el-row",{staticClass:"tableTopBar"},[a("el-col",{attrs:{span:12}},[e._v(" ")]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{width:"100%",height:"40px","background-color":"#2ED18C","text-align":"center","line-height":"40px",color:"#ffffff"}},[e._v("\n              应收款合计："+e._s(e.nowReceiveAmount)+"\n            ")])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{width:"100%",height:"40px","background-color":"#1482f0","text-align":"center","line-height":"40px",color:"#ffffff"}},[e._v("\n              预收款合计："+e._s(e.preReceiveAmount)+"\n            ")])])],1),e._v(" "),a("el-row",{staticClass:"tableContent"},[a("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_sale_receivables_receiveQuery_index0",isSortable:!1,varList:e.varList,keyValue:!1,showIndex:!1,showTableSet:!1,showCheckBox:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"customBaseTable",showAll:!1,keyMapping:e.keyMapping},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1)])],1),e._v(" "),e.showDialog?a(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visible},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);h.options.__file="index.vue";t.default=h.exports},"5LfS":function(e,t,a){},BxLO:function(e,t,a){"use strict";var i=a("5LfS");a.n(i).a},Jcc8:function(e,t,a){"use strict";var i=a("haJu");a.n(i).a},haJu:function(e,t,a){}}]);