(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-75f5"],{"1VmT":function(t,e,a){"use strict";var i=a("fRsp");a.n(i).a},FYU4:function(t,e,a){"use strict";var i=a("ZkDz");a.n(i).a},SBnf:function(t,e,a){"use strict";var i=a("i7ey");a.n(i).a},Sxdt:function(t,e,a){"use strict";var i=a("tNf1");a.n(i).a},ZYLg:function(t,e,a){},ZkDz:function(t,e,a){},fRsp:function(t,e,a){},fzaQ:function(t,e,a){"use strict";var i=a("ZYLg");a.n(i).a},i7ey:function(t,e,a){},lTEw:function(t,e,a){"use strict";a.r(e);a("91GP");var i=a("uTIz"),s=a("WIyV"),n=(a("XfO3"),a("HEwt"),a("a1Th"),a("rE2o"),a("ioFf"),a("rGqo"),a("KKXr"),a("xfY5"),a("Zni2")),r=a.n(n),o=a("XXtD"),l=(a("75ce"),a("lLGD"),a("0o9m"),a("AH3D"),a("Ynxi"),a("zixQ"),a("4Cjf"));function h(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u={name:"chart-sales-report-trend",components:{chart:r.a,ChartMask:o.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(t){var e=t.split("-");return e[1]=e[1]-0+"月",e.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,h(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var t=Math.max.apply(Math,h(this.salesNumber))-0,e=(Math.floor(t+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,h(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var t=Math.max.apply(Math,h(this.salesVolume))-0,e=(Math.floor(t+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销售趋势图",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["销售量","销售额"],left:5},xAxis:[{type:"category",data:this.setMonths,axisPointer:{type:"shadow"},axisTick:{show:!1}}],yAxis:[{type:"value",name:"销售量",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisTick:{show:!1},splitLine:{show:!1},axisLabel:{formatter:"{value}"},nameTextStyle:{color:"transparent"}},{show:!1,type:"value",name:"销售额",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisLabel:{formatter:"{value}"}}],series:[{name:"销售量",type:"bar",data:this.salesVolume},{name:"销售额",type:"line",yAxisIndex:1,itemStyle:{normal:{barBorderRadius:0,label:{show:!0,position:"top",formatter:function(t){return t.value||0}}}},data:this.salesNumber}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(t,e){return!!(t&&t.length&&e&&e.length)&&(t[0]>=e[0]&&e[1]>=t[1])},resetResult:function(t){var e=JSON.parse(this.resultData);this.chartData=e.filter(function(e){if(e.month>=t[0]&&t[1]>=e.month)return!0}),this.formatChartData()},formatChartData:function(){var t=this.chartData;t.length&&(this.salesVolume=t.map(function(t){return t.salesVolume-0}),this.salesNumber=t.map(function(t){return t.salesNumber-0}),this.months=t.map(function(t){return t.month}))},httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.resultData=JSON.stringify(l.a.trend.result||[]),t.chartData=l.a.trend.result||[],t.formatChartData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.resultData=JSON.stringify(e.result||[]),t.chartData=e.result||[],t.formatChartData(),t.loading=!1}).catch(function(e){t.loading=!1})}},created:function(){this.httpRequest()},render:function(t){return t("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?t("div",[t("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):t("chart-Mask",{attrs:{loading:this.loading}})])}},c=(a("wDdD"),{name:"comprehensive-sale-analysis",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}}},components:{chart:r.a,ChartMask:o.a},data:function(){return{chartTitles:["产品销售额","客户销售额","员工销售额","产品销量","客户销量","员工销量"],chartKeys:["productVolume","customerVolume","staffVolume","productNumber","customerNumber","staffNumber"],baseOption:{},chartData:null,loading:!0}},computed:{hasData:function(){return!!this.chartData},setSeriesData:function(){return this.chartData||{}},defaultOption:function(){var t=this;return this.chartKeys.map(function(e,a){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+t.chartTitles[a]+": {c} ({d}%)"},series:[{name:"产品",type:"pie",data:t.setSeriesData[e],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})}},methods:{httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.chartData=t.tempCreateData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.chartData=e.result||[],t.loading=!1}).catch(function(e){t.loading=!1})},tempCreateData:function(){var t=this,e={};return this.chartKeys.forEach(function(a){e[a]=t.genData(6)}),e},genData:function(t){for(var e=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],a=[],i=[],s={},n=0;n<t;n++)name=Math.random()>.65?r(4,1)+"·"+r(3,0):r(2,1),a.push(name),i.push({name:name,value:Math.round(1e5*Math.random())}),s[name]=n<6;return i;function r(t,a){for(var i=Math.ceil(Math.random()*t+a),s=[],n=0;n<i;n++)s.push(e[Math.round(Math.random()*e.length-1)]);return s.join("")}}},created:function(){this.httpRequest()},render:function(t){var e=this;return t("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.chartTitles.map(function(a,i){return t("el-col",{attrs:{span:8},class:"chartViews"},[t("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:e.loading}]},[t("div",{style:"text-align:center;"},[a]),t("div",{style:{height:"200px",position:"relative"}},[e.hasData?t("chart",{style:{height:"100%",width:"100%"},attrs:{options:e.defaultOption[i]}}):t("chart-Mask",{attrs:{loading:e.loading}})])])])})])}});function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var m={name:"charts-sale-comprehensive",components:{baseTable:s.a,searchBar:i.a,trend:u,comprehensiveAnalysis:c},data:function(){var t;return p(t={guid:"",searchList:[{label:"统计周期",type:"radio",mapKey:"cycle",configs:{options:["日","月","年"],defaultValue:0}},{label:"日期范围",type:"date",mapKey:"date",configs:{clearable:!0,name:"",type:"daterange",pickerOptions:{hidePicker:!0}},placeholder:"请选择"}],searchObj:{},tableConfigList:[{apiObj:{apiName:"getBomTreeProduct",params:{}},showCheckBox:!0,useSummary:!0}],userSelectedList:[],dialogVisible:[!1,!1],dialogIndex:0},"dialogVisible",!1),p(t,"trendApiObj",{apiName:"",params:{}}),p(t,"analysisObj",{apiName:"",params:{}}),t},computed:{systemInfo:function(){return this.$store.getters.systemInfo},size:function(){return this.$store.getters.size},tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0)-36+"px":"100%"}},methods:{sendGuid:function(t){this.guid=t},searchMap:function(t){this.searchObj=t,this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.searchObj),this.trendApiObj.params=Object.assign({},this.trendApiObj.params,this.searchObj),this.analysisObj.params=Object.assign({},this.analysisObj.params,this.searchObj)},databridge:function(t){this.userSelectedList=t},callMethod:function(t){t&&t.methodName&&this[t.methodName](t.params)},showSaleTrend:function(t){this.resetSaleTrendData(),this.dialogIndex=t,this.dialogVisible[this.dialogIndex]=!0},resetSaleTrendData:function(){this.dialogVisible=[!1,!1]}},created:function(){}},d=(a("Sxdt"),a("KHd+")),f=Object(d.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sale-comprehensive"},[t.searchList.length?a("search-bar",{attrs:{searchList:t.searchList,inChart:!0},on:{"search-map":t.searchMap,"send-guid":t.sendGuid}}):t._e(),t._v(" "),a("el-row",[a("el-button",{attrs:{type:"primary",size:t.size},on:{click:function(e){t.showSaleTrend(0)}}},[t._v("销售趋势")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:t.size,disabled:!t.userSelectedList.length},on:{click:function(e){t.showSaleTrend(1)}}},[t._v("分析")])],1),t._v(" "),a("el-row",{staticStyle:{"border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:t.tableHeight,"margin-top":t.searchList.length?"10px":"0"}},[a("base-table",{ref:"customBaseTable",attrs:{tableConfigList:t.tableConfigList},on:{databridge:t.databridge,callmethod:t.callMethod}})],1),t._v(" "),a("el-dialog",{attrs:{title:"销售趋势图","close-on-click-modal":!1,visible:t.dialogVisible[t.dialogIndex],width:"mini"===t.size?"800px":"1200px"},on:{"update:visible":function(e){t.$set(t.dialogVisible,t.dialogIndex,e)}}},[t.dialogVisible[0]?[a("trend",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.trendApiObj}})]:t.dialogVisible[1]?[a("comprehensive-analysis",{attrs:{height:t.systemInfo.clientHeight?.7*t.systemInfo.clientHeight+"px":"400px",apiObj:t.analysisObj}})]:t._e(),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.resetSaleTrendData}},[t._v("关 闭")])],1)],2)],1)},[],!1,null,"6e9a86aa",null);f.options.__file="index.vue";var g=f.exports;function b(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var y={name:"chart-sales-report-volume-line",components:{chart:r.a,ChartMask:o.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(t){var e=t.split("-");return e[1]=e[1]-0+"月",e.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,b(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var t=Math.max.apply(Math,b(this.salesNumber))-0,e=(Math.floor(t+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,b(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var t=Math.max.apply(Math,b(this.salesVolume))-0,e=(Math.floor(t+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销售额曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"],left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"邮件营销",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",areaStyle:{},data:[-220,182,191,234,290,330,3100]},{name:"视频广告",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",areaStyle:{},data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(t,e){return!!(t&&t.length&&e&&e.length)&&(t[0]>=e[0]&&e[1]>=t[1])},resetResult:function(t){var e=JSON.parse(this.resultData);this.chartData=e.filter(function(e){if(e.month>=t[0]&&t[1]>=e.month)return!0}),this.formatChartData()},formatChartData:function(){var t=this.chartData;t.length&&(this.salesVolume=t.map(function(t){return t.salesVolume-0}),this.salesNumber=t.map(function(t){return t.salesNumber-0}),this.months=t.map(function(t){return t.month}))},httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.resultData=JSON.stringify(l.a.trend.result||[]),t.chartData=l.a.trend.result||[],t.formatChartData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.resultData=JSON.stringify(e.result||[]),t.chartData=e.result||[],t.formatChartData(),t.loading=!1}).catch(function(e){t.loading=!1})}},created:function(){this.httpRequest()},render:function(t){return t("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?t("div",[t("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):t("chart-Mask",{attrs:{loading:this.loading}})])}};function v(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var M={name:"chart-sales-report-number-line",components:{chart:r.a,ChartMask:o.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(t){var e=t.split("-");return e[1]=e[1]-0+"月",e.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,v(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var t=Math.max.apply(Math,v(this.salesNumber))-0,e=(Math.floor(t+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,v(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var t=Math.max.apply(Math,v(this.salesVolume))-0,e=(Math.floor(t+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销量曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"],left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"邮件营销",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",areaStyle:{},data:[-220,182,191,234,290,330,3100]},{name:"视频广告",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",areaStyle:{},data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(t,e){return!!(t&&t.length&&e&&e.length)&&(t[0]>=e[0]&&e[1]>=t[1])},resetResult:function(t){var e=JSON.parse(this.resultData);this.chartData=e.filter(function(e){if(e.month>=t[0]&&t[1]>=e.month)return!0}),this.formatChartData()},formatChartData:function(){var t=this.chartData;t.length&&(this.salesVolume=t.map(function(t){return t.salesVolume-0}),this.salesNumber=t.map(function(t){return t.salesNumber-0}),this.months=t.map(function(t){return t.month}))},httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.resultData=JSON.stringify(l.a.trend.result||[]),t.chartData=l.a.trend.result||[],t.formatChartData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.resultData=JSON.stringify(e.result||[]),t.chartData=e.result||[],t.formatChartData(),t.loading=!1}).catch(function(e){t.loading=!1})}},created:function(){this.httpRequest()},render:function(t){return t("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?t("div",[t("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):t("chart-Mask",{attrs:{loading:this.loading}})])}},x={name:"product-sale-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}}},components:{chart:r.a,ChartMask:o.a},data:function(){return{chartTitles:["销售额占比","销量占比"],chartKeys:["productVolume","productNumber"],baseOption:{},chartData:null,loading:!0}},computed:{hasData:function(){return!!this.chartData},setSeriesData:function(){return this.chartData||{}},defaultOption:function(){var t=this;return this.chartKeys.map(function(e,a){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+t.chartTitles[a]+": {c} ({d}%)"},series:[{name:"产品",type:"pie",data:t.setSeriesData[e],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})}},methods:{httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.chartData=t.tempCreateData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.chartData=e.result||[],t.loading=!1}).catch(function(e){t.loading=!1})},tempCreateData:function(){var t=this,e={};return this.chartKeys.forEach(function(a){e[a]=t.genData(6)}),e},genData:function(t){for(var e=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],a=[],i=[],s={},n=0;n<t;n++)name=Math.random()>.65?r(4,1)+"·"+r(3,0):r(2,1),a.push(name),i.push({name:name,value:Math.round(1e5*Math.random())}),s[name]=n<6;return i;function r(t,a){for(var i=Math.ceil(Math.random()*t+a),s=[],n=0;n<i;n++)s.push(e[Math.round(Math.random()*e.length-1)]);return s.join("")}}},created:function(){this.httpRequest()},render:function(t){var e=this;return t("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.chartTitles.map(function(a,i){return t("el-col",{attrs:{span:12},class:"chartViews"},[t("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:e.loading}]},[t("div",{style:"text-align:center;"},[a]),t("div",{style:{height:"".concat(parseInt(e.height)-120,"px"),position:"relative"}},[e.hasData?t("chart",{style:{height:"100%",width:"100%"},attrs:{options:e.defaultOption[i]}}):t("chart-Mask",{attrs:{loading:e.loading}})])])])})])}},S={name:"product-customer-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}},list:{type:Array,default:function(){return[]}}},components:{chart:r.a,ChartMask:o.a},data:function(){return{chartTitles:["销售额占比","销量占比"],chartKeys:["productVolume","productNumber"],baseOption:{},chartData:null,loading:!0}},computed:{initLayout:function(){var t=this.list.length;return t<4?{height:"".concat(parseInt(this.height)-120,"px"),span:24/t}:{height:"200px",span:8}},hasData:function(){return!!this.chartData},setSeriesData:function(){return this.chartData||{}},defaultOption:function(){var t=this;return this.chartKeys.map(function(e,a){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+t.chartTitles[a]+": {c} ({d}%)"},series:[{name:"产品",type:"pie",data:t.setSeriesData[e],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})}},methods:{httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.chartData=t.tempCreateData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.chartData=e.result||[],t.loading=!1}).catch(function(e){t.loading=!1})},tempCreateData:function(){var t=this,e={};return this.chartKeys.forEach(function(a){e[a]=t.genData(6)}),e},genData:function(t){for(var e=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],a=[],i=[],s={},n=0;n<t;n++)name=Math.random()>.65?r(4,1)+"·"+r(3,0):r(2,1),a.push(name),i.push({name:name,value:Math.round(1e5*Math.random())}),s[name]=n<6;return i;function r(t,a){for(var i=Math.ceil(Math.random()*t+a),s=[],n=0;n<i;n++)s.push(e[Math.round(Math.random()*e.length-1)]);return s.join("")}}},created:function(){this.httpRequest()},render:function(t){var e=this;return t("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.list.map(function(a,i){return t("el-col",{attrs:{span:e.initLayout.span},class:"chartViews"},[t("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:e.loading}]},[t("div",{style:"text-align:center;"},[i]),t("div",{style:{height:e.initLayout.height,position:"relative"}},[e.hasData?t("chart",{style:{height:"100%",width:"100%"},attrs:{options:e.defaultOption[i]}}):t("chart-Mask",{attrs:{loading:e.loading}})])])])})])}},O={name:"charts-sale-product",components:{baseTable:s.a,searchBar:i.a,volumeLine:y,numberLine:M,salePie:x,customerPie:S},data:function(){return{guid:"",searchList:[{label:"货品编码",type:"input",mapKey:"productCode",configs:{},placeholder:"请输入编码"},{label:"货品名称",type:"input",mapKey:"productName",configs:{},placeholder:"请输入名称"},{label:"型号规格",type:"input",mapKey:"productNuit",configs:{},placeholder:"请输入规格"},{label:"属性",type:"input",mapKey:"productAttr",configs:{},placeholder:"请输入属性"},{label:"统计周期",type:"radio",mapKey:"cycle",configs:{options:["日","月","年"],defaultValue:0}},{label:"日期范围",type:"date",mapKey:"date",configs:{clearable:!0,name:"",type:"daterange",pickerOptions:{hidePicker:!0}},placeholder:"请选择"}],searchObj:{},tableConfigList:[{apiObj:{apiName:"getBomTreeProduct",params:{}},showCheckBox:!0,useSummary:!0}],userSelectedList:[],dialogVisible:[!1,!1,!1,!1,!1],dialogIndex:0,dialogTitle:["销售额曲线","销量曲线","销量占比","产品客户","产品员工"],volumeLineApiObj:{apiName:"",params:{}},numberLineApiObj:{apiName:"",params:{}}}},computed:{systemInfo:function(){return this.$store.getters.systemInfo},size:function(){return this.$store.getters.size},tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0)-36+"px":"100%"},setVolumeLineApiObj:function(){var t=Object.assign({},this.searchObj,{productIds:this.userSelectedList.map(function(t){return t.id||""})||[]});return this.volumeLineApiObj.params=Object.assign({},this.volumeLineApiObj.params,t),this.volumeLineApiObj},setNumberLineApiObj:function(){var t=Object.assign({},this.searchObj,{productIds:this.userSelectedList.map(function(t){return t.id||""})||[]});return this.numberLineApiObj.params=Object.assign({},this.numberLineApiObj.params,t),this.numberLineApiObj}},methods:{sendGuid:function(t){this.guid=t},searchMap:function(t){this.searchObj=t,this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.searchObj),this.volumeLineApiObj.params=Object.assign({},this.volumeLineApiObj.params,this.searchObj),this.numberLineApiObj.params=Object.assign({},this.numberLineApiObj.params,this.searchObj)},databridge:function(t){this.userSelectedList=t},callMethod:function(t){t&&t.methodName&&this[t.methodName](t.params)},showSaleProductDialog:function(t){this.resetSaleProductDialog(),this.dialogIndex=t,this.dialogVisible[this.dialogIndex]=!0},resetSaleProductDialog:function(){this.dialogVisible=[!1,!1,!1,!1,!1]}},created:function(){}},j=(a("uBi4"),Object(d.a)(O,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sale-product"},[t.searchList.length?a("search-bar",{attrs:{searchList:t.searchList,inChart:!0},on:{"search-map":t.searchMap,"send-guid":t.sendGuid}}):t._e(),t._v(" "),a("el-row",[a("el-button",{attrs:{type:"primary",size:t.size},on:{click:function(e){t.showSaleProductDialog(0)}}},[t._v("销售额曲线")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:t.size},on:{click:function(e){t.showSaleProductDialog(1)}}},[t._v("销量曲线")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:t.size},on:{click:function(e){t.showSaleProductDialog(2)}}},[t._v("销量占比")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:t.size,disabled:!t.userSelectedList.length},on:{click:function(e){t.showSaleProductDialog(3)}}},[t._v("产品客户")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:t.size,disabled:!t.userSelectedList.length},on:{click:function(e){t.showSaleProductDialog(4)}}},[t._v("产品员工")])],1),t._v(" "),a("el-row",{staticStyle:{"border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:t.tableHeight,"margin-top":t.searchList.length?"10px":"0"}},[a("base-table",{ref:"customBaseTable",attrs:{tableConfigList:t.tableConfigList},on:{databridge:t.databridge,callmethod:t.callMethod}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle[t.dialogIndex],"close-on-click-modal":!1,visible:t.dialogVisible[t.dialogIndex],width:"mini"===t.size?"800px":"1200px"},on:{"update:visible":function(e){t.$set(t.dialogVisible,t.dialogIndex,e)}}},[t.dialogVisible[0]?[a("volume-line",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.setVolumeLineApiObj}})]:t.dialogVisible[1]?[a("number-line",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.setNumberLineApiObj}})]:t.dialogVisible[2]?[a("sale-pie",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.setNumberLineApiObj}})]:t.dialogVisible[3]?[a("customer-pie",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.setNumberLineApiObj,list:t.userSelectedList}})]:t.dialogVisible[4]?[a("customer-pie",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.setNumberLineApiObj,list:t.userSelectedList}})]:t._e(),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.resetSaleProductDialog}},[t._v("关 闭")])],1)],2)],1)},[],!1,null,"d45bf26e",null));j.options.__file="index.vue";var D=j.exports;function N(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var w={name:"chart-sales-report-volume-line",components:{chart:r.a,ChartMask:o.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(t){var e=t.split("-");return e[1]=e[1]-0+"月",e.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,N(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var t=Math.max.apply(Math,N(this.salesNumber))-0,e=(Math.floor(t+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,N(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var t=Math.max.apply(Math,N(this.salesVolume))-0,e=(Math.floor(t+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销售额曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"],left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"邮件营销",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",areaStyle:{},data:[-220,182,191,234,290,330,3100]},{name:"视频广告",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",areaStyle:{},data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(t,e){return!!(t&&t.length&&e&&e.length)&&(t[0]>=e[0]&&e[1]>=t[1])},resetResult:function(t){var e=JSON.parse(this.resultData);this.chartData=e.filter(function(e){if(e.month>=t[0]&&t[1]>=e.month)return!0}),this.formatChartData()},formatChartData:function(){var t=this.chartData;t.length&&(this.salesVolume=t.map(function(t){return t.salesVolume-0}),this.salesNumber=t.map(function(t){return t.salesNumber-0}),this.months=t.map(function(t){return t.month}))},httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.resultData=JSON.stringify(l.a.trend.result||[]),t.chartData=l.a.trend.result||[],t.formatChartData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.resultData=JSON.stringify(e.result||[]),t.chartData=e.result||[],t.formatChartData(),t.loading=!1}).catch(function(e){t.loading=!1})}},created:function(){this.httpRequest()},render:function(t){return t("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?t("div",[t("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):t("chart-Mask",{attrs:{loading:this.loading}})])}};function V(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var A={name:"chart-sales-report-number-line",components:{chart:r.a,ChartMask:o.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(t){var e=t.split("-");return e[1]=e[1]-0+"月",e.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,V(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var t=Math.max.apply(Math,V(this.salesNumber))-0,e=(Math.floor(t+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,V(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var t=Math.max.apply(Math,V(this.salesVolume))-0,e=(Math.floor(t+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销量曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"],left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"邮件营销",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",areaStyle:{},data:[-220,182,191,234,290,330,3100]},{name:"视频广告",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",areaStyle:{},data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(t,e){return!!(t&&t.length&&e&&e.length)&&(t[0]>=e[0]&&e[1]>=t[1])},resetResult:function(t){var e=JSON.parse(this.resultData);this.chartData=e.filter(function(e){if(e.month>=t[0]&&t[1]>=e.month)return!0}),this.formatChartData()},formatChartData:function(){var t=this.chartData;t.length&&(this.salesVolume=t.map(function(t){return t.salesVolume-0}),this.salesNumber=t.map(function(t){return t.salesNumber-0}),this.months=t.map(function(t){return t.month}))},httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.resultData=JSON.stringify(l.a.trend.result||[]),t.chartData=l.a.trend.result||[],t.formatChartData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.resultData=JSON.stringify(e.result||[]),t.chartData=e.result||[],t.formatChartData(),t.loading=!1}).catch(function(e){t.loading=!1})}},created:function(){this.httpRequest()},render:function(t){return t("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?t("div",[t("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):t("chart-Mask",{attrs:{loading:this.loading}})])}},L={name:"product-sale-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}}},components:{chart:r.a,ChartMask:o.a},data:function(){return{chartTitles:["销售额占比","销量占比"],chartKeys:["productVolume","productNumber"],baseOption:{},chartData:null,loading:!0}},computed:{hasData:function(){return!!this.chartData},setSeriesData:function(){return this.chartData||{}},defaultOption:function(){var t=this;return this.chartKeys.map(function(e,a){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+t.chartTitles[a]+": {c} ({d}%)"},series:[{name:"产品",type:"pie",data:t.setSeriesData[e],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})}},methods:{httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.chartData=t.tempCreateData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.chartData=e.result||[],t.loading=!1}).catch(function(e){t.loading=!1})},tempCreateData:function(){var t=this,e={};return this.chartKeys.forEach(function(a){e[a]=t.genData(6)}),e},genData:function(t){for(var e=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],a=[],i=[],s={},n=0;n<t;n++)name=Math.random()>.65?r(4,1)+"·"+r(3,0):r(2,1),a.push(name),i.push({name:name,value:Math.round(1e5*Math.random())}),s[name]=n<6;return i;function r(t,a){for(var i=Math.ceil(Math.random()*t+a),s=[],n=0;n<i;n++)s.push(e[Math.round(Math.random()*e.length-1)]);return s.join("")}}},created:function(){this.httpRequest()},render:function(t){var e=this;return t("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.chartTitles.map(function(a,i){return t("el-col",{attrs:{span:12},class:"chartViews"},[t("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:e.loading}]},[t("div",{style:"text-align:center;"},[a]),t("div",{style:{height:"".concat(parseInt(e.height)-120,"px"),position:"relative"}},[e.hasData?t("chart",{style:{height:"100%",width:"100%"},attrs:{options:e.defaultOption[i]}}):t("chart-Mask",{attrs:{loading:e.loading}})])])])})])}},C={name:"product-customer-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}},list:{type:Array,default:function(){return[]}}},components:{chart:r.a,ChartMask:o.a},data:function(){return{chartTitles:["销售额占比","销量占比"],chartKeys:["productVolume","productNumber"],baseOption:{},chartData:null,loading:!0}},computed:{initLayout:function(){var t=this.list.length;return t<4?{height:"".concat(parseInt(this.height)-120,"px"),span:24/t}:{height:"200px",span:8}},hasData:function(){return!!this.chartData},setSeriesData:function(){return this.chartData||{}},defaultOption:function(){var t=this;return this.chartKeys.map(function(e,a){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+t.chartTitles[a]+": {c} ({d}%)"},series:[{name:"产品",type:"pie",data:t.setSeriesData[e],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})}},methods:{httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.chartData=t.tempCreateData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.chartData=e.result||[],t.loading=!1}).catch(function(e){t.loading=!1})},tempCreateData:function(){var t=this,e={};return this.chartKeys.forEach(function(a){e[a]=t.genData(6)}),e},genData:function(t){for(var e=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],a=[],i=[],s={},n=0;n<t;n++)name=Math.random()>.65?r(4,1)+"·"+r(3,0):r(2,1),a.push(name),i.push({name:name,value:Math.round(1e5*Math.random())}),s[name]=n<6;return i;function r(t,a){for(var i=Math.ceil(Math.random()*t+a),s=[],n=0;n<i;n++)s.push(e[Math.round(Math.random()*e.length-1)]);return s.join("")}}},created:function(){this.httpRequest()},render:function(t){var e=this;return t("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.list.map(function(a,i){return t("el-col",{attrs:{span:e.initLayout.span},class:"chartViews"},[t("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:e.loading}]},[t("div",{style:"text-align:center;"},[i]),t("div",{style:{height:e.initLayout.height,position:"relative"}},[e.hasData?t("chart",{style:{height:"100%",width:"100%"},attrs:{options:e.defaultOption[i]}}):t("chart-Mask",{attrs:{loading:e.loading}})])])])})])}},k={name:"charts-sale-customer",components:{baseTable:s.a,searchBar:i.a,volumeLine:w,numberLine:A,salePie:L,customerPie:C},data:function(){return{guid:"",searchList:[{label:"货品编码",type:"input",mapKey:"productCode",configs:{},placeholder:"请输入编码"},{label:"货品名称",type:"input",mapKey:"productName",configs:{},placeholder:"请输入名称"},{label:"型号规格",type:"input",mapKey:"productNuit",configs:{},placeholder:"请输入规格"},{label:"属性",type:"input",mapKey:"productAttr",configs:{},placeholder:"请输入属性"},{label:"客户名称",type:"input",mapKey:"customerName",configs:{},placeholder:"请输入属性"},{label:"统计周期",type:"radio",mapKey:"cycle",configs:{options:["日","月","年"],defaultValue:0}},{label:"日期范围",type:"date",mapKey:"date",configs:{clearable:!0,name:"",type:"daterange",pickerOptions:{hidePicker:!0}},placeholder:"请选择"}],searchObj:{},tableConfigList:[{apiObj:{apiName:"getBomTreeProduct",params:{}},showCheckBox:!0,useSummary:!0}],userSelectedList:[],dialogVisible:[!1,!1,!1,!1],dialogIndex:0,dialogTitle:["销售额曲线","销量曲线","销量占比","客户产品"],volumeLineApiObj:{apiName:"",params:{}},numberLineApiObj:{apiName:"",params:{}}}},computed:{systemInfo:function(){return this.$store.getters.systemInfo},size:function(){return this.$store.getters.size},tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0)-36+"px":"100%"},setVolumeLineApiObj:function(){var t=Object.assign({},this.searchObj,{productIds:this.userSelectedList.map(function(t){return t.id||""})||[]});return this.volumeLineApiObj.params=Object.assign({},this.volumeLineApiObj.params,t),this.volumeLineApiObj},setNumberLineApiObj:function(){var t=Object.assign({},this.searchObj,{productIds:this.userSelectedList.map(function(t){return t.id||""})||[]});return this.numberLineApiObj.params=Object.assign({},this.numberLineApiObj.params,t),this.numberLineApiObj}},methods:{sendGuid:function(t){this.guid=t},searchMap:function(t){this.searchObj=t,this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.searchObj),this.volumeLineApiObj.params=Object.assign({},this.volumeLineApiObj.params,this.searchObj),this.numberLineApiObj.params=Object.assign({},this.numberLineApiObj.params,this.searchObj)},databridge:function(t){this.userSelectedList=t},callMethod:function(t){t&&t.methodName&&this[t.methodName](t.params)},showSaleCustomerDialog:function(t){this.resetSaleCustomerDialog(),this.dialogIndex=t,this.dialogVisible[this.dialogIndex]=!0},resetSaleCustomerDialog:function(){this.dialogVisible=[!1,!1,!1,!1]}},created:function(){}},I=(a("SBnf"),Object(d.a)(k,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sale-customer"},[t.searchList.length?a("search-bar",{attrs:{searchList:t.searchList,inChart:!0},on:{"search-map":t.searchMap,"send-guid":t.sendGuid}}):t._e(),t._v(" "),a("el-row",[a("el-button",{attrs:{type:"primary",size:t.size},on:{click:function(e){t.showSaleCustomerDialog(0)}}},[t._v("销售额曲线")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:t.size},on:{click:function(e){t.showSaleCustomerDialog(1)}}},[t._v("销量曲线")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:t.size},on:{click:function(e){t.showSaleCustomerDialog(2)}}},[t._v("销量占比")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:t.size,disabled:!t.userSelectedList.length},on:{click:function(e){t.showSaleCustomerDialog(3)}}},[t._v("客户产品")])],1),t._v(" "),a("el-row",{staticStyle:{"border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:t.tableHeight,"margin-top":t.searchList.length?"10px":"0"}},[a("base-table",{ref:"customBaseTable",attrs:{tableConfigList:t.tableConfigList},on:{databridge:t.databridge,callmethod:t.callMethod}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle[t.dialogIndex],"close-on-click-modal":!1,visible:t.dialogVisible[t.dialogIndex],width:"mini"===t.size?"800px":"1200px"},on:{"update:visible":function(e){t.$set(t.dialogVisible,t.dialogIndex,e)}}},[t.dialogVisible[0]?[a("volume-line",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.setVolumeLineApiObj}})]:t.dialogVisible[1]?[a("number-line",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.setNumberLineApiObj}})]:t.dialogVisible[2]?[a("sale-pie",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.setNumberLineApiObj}})]:t.dialogVisible[3]?[a("customer-pie",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.setNumberLineApiObj,list:t.userSelectedList}})]:t._e(),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.resetSaleCustomerDialog}},[t._v("关 闭")])],1)],2)],1)},[],!1,null,"b186a152",null));I.options.__file="index.vue";var T=I.exports;function _(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var B={name:"chart-sales-report-volume-line",components:{chart:r.a,ChartMask:o.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(t){var e=t.split("-");return e[1]=e[1]-0+"月",e.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,_(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var t=Math.max.apply(Math,_(this.salesNumber))-0,e=(Math.floor(t+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,_(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var t=Math.max.apply(Math,_(this.salesVolume))-0,e=(Math.floor(t+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销售额曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"],left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"邮件营销",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",areaStyle:{},data:[-220,182,191,234,290,330,3100]},{name:"视频广告",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",areaStyle:{},data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(t,e){return!!(t&&t.length&&e&&e.length)&&(t[0]>=e[0]&&e[1]>=t[1])},resetResult:function(t){var e=JSON.parse(this.resultData);this.chartData=e.filter(function(e){if(e.month>=t[0]&&t[1]>=e.month)return!0}),this.formatChartData()},formatChartData:function(){var t=this.chartData;t.length&&(this.salesVolume=t.map(function(t){return t.salesVolume-0}),this.salesNumber=t.map(function(t){return t.salesNumber-0}),this.months=t.map(function(t){return t.month}))},httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.resultData=JSON.stringify(l.a.trend.result||[]),t.chartData=l.a.trend.result||[],t.formatChartData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.resultData=JSON.stringify(e.result||[]),t.chartData=e.result||[],t.formatChartData(),t.loading=!1}).catch(function(e){t.loading=!1})}},created:function(){this.httpRequest()},render:function(t){return t("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?t("div",[t("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):t("chart-Mask",{attrs:{loading:this.loading}})])}};function q(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var $={name:"chart-sales-report-number-line",components:{chart:r.a,ChartMask:o.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(t){var e=t.split("-");return e[1]=e[1]-0+"月",e.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,q(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var t=Math.max.apply(Math,q(this.salesNumber))-0,e=(Math.floor(t+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,q(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var t=Math.max.apply(Math,q(this.salesVolume))-0,e=(Math.floor(t+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销量曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"],left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"邮件营销",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",areaStyle:{},data:[-220,182,191,234,290,330,3100]},{name:"视频广告",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",areaStyle:{},data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(t,e){return!!(t&&t.length&&e&&e.length)&&(t[0]>=e[0]&&e[1]>=t[1])},resetResult:function(t){var e=JSON.parse(this.resultData);this.chartData=e.filter(function(e){if(e.month>=t[0]&&t[1]>=e.month)return!0}),this.formatChartData()},formatChartData:function(){var t=this.chartData;t.length&&(this.salesVolume=t.map(function(t){return t.salesVolume-0}),this.salesNumber=t.map(function(t){return t.salesNumber-0}),this.months=t.map(function(t){return t.month}))},httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.resultData=JSON.stringify(l.a.trend.result||[]),t.chartData=l.a.trend.result||[],t.formatChartData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.resultData=JSON.stringify(e.result||[]),t.chartData=e.result||[],t.formatChartData(),t.loading=!1}).catch(function(e){t.loading=!1})}},created:function(){this.httpRequest()},render:function(t){return t("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?t("div",[t("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):t("chart-Mask",{attrs:{loading:this.loading}})])}},P={name:"product-sale-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}}},components:{chart:r.a,ChartMask:o.a},data:function(){return{chartTitles:["销售额占比","销量占比"],chartKeys:["productVolume","productNumber"],baseOption:{},chartData:null,loading:!0}},computed:{hasData:function(){return!!this.chartData},setSeriesData:function(){return this.chartData||{}},defaultOption:function(){var t=this;return this.chartKeys.map(function(e,a){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+t.chartTitles[a]+": {c} ({d}%)"},series:[{name:"产品",type:"pie",data:t.setSeriesData[e],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})}},methods:{httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.chartData=t.tempCreateData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.chartData=e.result||[],t.loading=!1}).catch(function(e){t.loading=!1})},tempCreateData:function(){var t=this,e={};return this.chartKeys.forEach(function(a){e[a]=t.genData(6)}),e},genData:function(t){for(var e=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],a=[],i=[],s={},n=0;n<t;n++)name=Math.random()>.65?r(4,1)+"·"+r(3,0):r(2,1),a.push(name),i.push({name:name,value:Math.round(1e5*Math.random())}),s[name]=n<6;return i;function r(t,a){for(var i=Math.ceil(Math.random()*t+a),s=[],n=0;n<i;n++)s.push(e[Math.round(Math.random()*e.length-1)]);return s.join("")}}},created:function(){this.httpRequest()},render:function(t){var e=this;return t("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.chartTitles.map(function(a,i){return t("el-col",{attrs:{span:12},class:"chartViews"},[t("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:e.loading}]},[t("div",{style:"text-align:center;"},[a]),t("div",{style:{height:"".concat(parseInt(e.height)-120,"px"),position:"relative"}},[e.hasData?t("chart",{style:{height:"100%",width:"100%"},attrs:{options:e.defaultOption[i]}}):t("chart-Mask",{attrs:{loading:e.loading}})])])])})])}},z={name:"product-customer-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}},list:{type:Array,default:function(){return[]}}},components:{chart:r.a,ChartMask:o.a},data:function(){return{chartTitles:["销售额占比","销量占比"],chartKeys:["productVolume","productNumber"],baseOption:{},chartData:null,loading:!0}},computed:{initLayout:function(){var t=this.list.length;return t<4?{height:"".concat(parseInt(this.height)-120,"px"),span:24/t}:{height:"200px",span:8}},hasData:function(){return!!this.chartData},setSeriesData:function(){return this.chartData||{}},defaultOption:function(){var t=this;return this.chartKeys.map(function(e,a){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+t.chartTitles[a]+": {c} ({d}%)"},series:[{name:"产品",type:"pie",data:t.setSeriesData[e],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})}},methods:{httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.chartData=t.tempCreateData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.chartData=e.result||[],t.loading=!1}).catch(function(e){t.loading=!1})},tempCreateData:function(){var t=this,e={};return this.chartKeys.forEach(function(a){e[a]=t.genData(6)}),e},genData:function(t){for(var e=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],a=[],i=[],s={},n=0;n<t;n++)name=Math.random()>.65?r(4,1)+"·"+r(3,0):r(2,1),a.push(name),i.push({name:name,value:Math.round(1e5*Math.random())}),s[name]=n<6;return i;function r(t,a){for(var i=Math.ceil(Math.random()*t+a),s=[],n=0;n<i;n++)s.push(e[Math.round(Math.random()*e.length-1)]);return s.join("")}}},created:function(){this.httpRequest()},render:function(t){var e=this;return t("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.list.map(function(a,i){return t("el-col",{attrs:{span:e.initLayout.span},class:"chartViews"},[t("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:e.loading}]},[t("div",{style:"text-align:center;"},[i]),t("div",{style:{height:e.initLayout.height,position:"relative"}},[e.hasData?t("chart",{style:{height:"100%",width:"100%"},attrs:{options:e.defaultOption[i]}}):t("chart-Mask",{attrs:{loading:e.loading}})])])])})])}},H={name:"charts-sale-staff",components:{baseTable:s.a,searchBar:i.a,volumeLine:B,numberLine:$,salePie:P,customerPie:z},data:function(){return{guid:"",searchList:[{label:"货品编码",type:"input",mapKey:"productCode",configs:{},placeholder:"请输入编码"},{label:"货品名称",type:"input",mapKey:"productName",configs:{},placeholder:"请输入名称"},{label:"型号规格",type:"input",mapKey:"productNuit",configs:{},placeholder:"请输入规格"},{label:"属性",type:"input",mapKey:"productAttr",configs:{},placeholder:"请输入属性"},{label:"员工姓名",type:"input",mapKey:"staffName",configs:{},placeholder:"请输入属性"},{label:"统计周期",type:"radio",mapKey:"cycle",configs:{options:["日","月","年"],defaultValue:0}},{label:"日期范围",type:"date",mapKey:"date",configs:{clearable:!0,name:"",type:"daterange",pickerOptions:{hidePicker:!0}},placeholder:"请选择"}],searchObj:{},tableConfigList:[{apiObj:{apiName:"getBomTreeProduct",params:{}},showCheckBox:!0,useSummary:!0}],userSelectedList:[],dialogVisible:[!1,!1,!1,!1],dialogIndex:0,dialogTitle:["销售额曲线","销量曲线","销量占比","员工产品"],volumeLineApiObj:{apiName:"",params:{}},numberLineApiObj:{apiName:"",params:{}}}},computed:{systemInfo:function(){return this.$store.getters.systemInfo},size:function(){return this.$store.getters.size},tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0)-36+"px":"100%"},setVolumeLineApiObj:function(){var t=Object.assign({},this.searchObj,{productIds:this.userSelectedList.map(function(t){return t.id||""})||[]});return this.volumeLineApiObj.params=Object.assign({},this.volumeLineApiObj.params,t),this.volumeLineApiObj},setNumberLineApiObj:function(){var t=Object.assign({},this.searchObj,{productIds:this.userSelectedList.map(function(t){return t.id||""})||[]});return this.numberLineApiObj.params=Object.assign({},this.numberLineApiObj.params,t),this.numberLineApiObj}},methods:{sendGuid:function(t){this.guid=t},searchMap:function(t){this.searchObj=t,this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.searchObj),this.volumeLineApiObj.params=Object.assign({},this.volumeLineApiObj.params,this.searchObj),this.numberLineApiObj.params=Object.assign({},this.numberLineApiObj.params,this.searchObj)},databridge:function(t){this.userSelectedList=t},callMethod:function(t){t&&t.methodName&&this[t.methodName](t.params)},showSaleStaffDialog:function(t){this.resetSaleStaffDialog(),this.dialogIndex=t,this.dialogVisible[this.dialogIndex]=!0},resetSaleStaffDialog:function(){this.dialogVisible=[!1,!1,!1,!1]}},created:function(){}},R=(a("1VmT"),Object(d.a)(H,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sale-staff"},[t.searchList.length?a("search-bar",{attrs:{searchList:t.searchList,inChart:!0},on:{"search-map":t.searchMap,"send-guid":t.sendGuid}}):t._e(),t._v(" "),a("el-row",[a("el-button",{attrs:{type:"primary",size:t.size},on:{click:function(e){t.showSaleStaffDialog(0)}}},[t._v("销售额曲线")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:t.size},on:{click:function(e){t.showSaleStaffDialog(1)}}},[t._v("销量曲线")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:t.size},on:{click:function(e){t.showSaleStaffDialog(2)}}},[t._v("销量占比")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:t.size,disabled:!t.userSelectedList.length},on:{click:function(e){t.showSaleStaffDialog(3)}}},[t._v("员工产品")])],1),t._v(" "),a("el-row",{staticStyle:{"border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:t.tableHeight,"margin-top":t.searchList.length?"10px":"0"}},[a("base-table",{ref:"customBaseTable",attrs:{tableConfigList:t.tableConfigList},on:{databridge:t.databridge,callmethod:t.callMethod}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle[t.dialogIndex],"close-on-click-modal":!1,visible:t.dialogVisible[t.dialogIndex],width:"mini"===t.size?"800px":"1200px"},on:{"update:visible":function(e){t.$set(t.dialogVisible,t.dialogIndex,e)}}},[t.dialogVisible[0]?[a("volume-line",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.setVolumeLineApiObj}})]:t.dialogVisible[1]?[a("number-line",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.setNumberLineApiObj}})]:t.dialogVisible[2]?[a("sale-pie",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.setNumberLineApiObj}})]:t.dialogVisible[3]?[a("customer-pie",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.setNumberLineApiObj,list:t.userSelectedList}})]:t._e(),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.resetSaleStaffDialog}},[t._v("关 闭")])],1)],2)],1)},[],!1,null,"aebe0d3c",null));R.options.__file="index.vue";var Y=R.exports,K={name:"product-sale-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}}},components:{chart:r.a,ChartMask:o.a},data:function(){return{chartTitles:["应收款分布"],chartKeys:["productVolume"],baseOption:{},chartData:null,loading:!0}},computed:{hasData:function(){return!!this.chartData},setSeriesData:function(){return this.chartData||{}},defaultOption:function(){var t=this;return this.chartKeys.map(function(e,a){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+t.chartTitles[a]+": {c} ({d}%)"},series:[{name:"产品",type:"pie",data:t.setSeriesData[e],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})}},methods:{httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.chartData=t.tempCreateData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.chartData=e.result||[],t.loading=!1}).catch(function(e){t.loading=!1})},tempCreateData:function(){var t=this,e={};return this.chartKeys.forEach(function(a){e[a]=t.genData(6)}),e},genData:function(t){for(var e=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],a=[],i=[],s={},n=0;n<t;n++)name=Math.random()>.65?r(4,1)+"·"+r(3,0):r(2,1),a.push(name),i.push({name:name,value:Math.round(1e5*Math.random())}),s[name]=n<6;return i;function r(t,a){for(var i=Math.ceil(Math.random()*t+a),s=[],n=0;n<i;n++)s.push(e[Math.round(Math.random()*e.length-1)]);return s.join("")}}},created:function(){this.httpRequest()},render:function(t){var e=this;return t("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.chartTitles.map(function(a,i){return t("el-col",{attrs:{span:24},class:"chartViews"},[t("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:e.loading}]},[t("div",{style:"text-align:center;"},[a]),t("div",{style:{height:"".concat(parseInt(e.height)-120,"px"),position:"relative"}},[e.hasData?t("chart",{style:{height:"100%",width:"100%"},attrs:{options:e.defaultOption[i]}}):t("chart-Mask",{attrs:{loading:e.loading}})])])])})])}};function J(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var E={name:"chart-sales-report-trend",components:{chart:r.a,ChartMask:o.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(t){var e=t.split("-");return e[1]=e[1]-0+"月",e.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,J(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var t=Math.max.apply(Math,J(this.salesNumber))-0,e=(Math.floor(t+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,J(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var t=Math.max.apply(Math,J(this.salesVolume))-0,e=(Math.floor(t+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"客户分析（单选）",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["销售额","已收款","应收款"],left:5},xAxis:[{type:"category",data:this.setMonths,axisPointer:{type:"shadow"},axisTick:{show:!1}}],yAxis:[{type:"value",name:"应收款",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisTick:{show:!1},splitLine:{show:!1},axisLabel:{formatter:"{value}"},nameTextStyle:{color:"transparent"}},{show:!1,type:"value",name:"销售额",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisLabel:{formatter:"{value}"}},{show:!1,type:"value",name:"已收款",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisLabel:{formatter:"{value}"}}],series:[{name:"销售额",type:"bar",data:this.salesVolume},{name:"已收款",type:"bar",data:this.salesVolume.map(function(t){return 1.1*t})},{name:"应收款",type:"line",yAxisIndex:1,itemStyle:{normal:{barBorderRadius:0,label:{show:!0,position:"top",formatter:function(t){return t.value||0}}}},data:this.salesNumber}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(t,e){return!!(t&&t.length&&e&&e.length)&&(t[0]>=e[0]&&e[1]>=t[1])},resetResult:function(t){var e=JSON.parse(this.resultData);this.chartData=e.filter(function(e){if(e.month>=t[0]&&t[1]>=e.month)return!0}),this.formatChartData()},formatChartData:function(){var t=this.chartData;t.length&&(this.salesVolume=t.map(function(t){return t.salesVolume-0}),this.salesNumber=t.map(function(t){return t.salesNumber-0}),this.months=t.map(function(t){return t.month}))},httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.resultData=JSON.stringify(l.a.trend.result||[]),t.chartData=l.a.trend.result||[],t.formatChartData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.resultData=JSON.stringify(e.result||[]),t.chartData=e.result||[],t.formatChartData(),t.loading=!1}).catch(function(e){t.loading=!1})}},created:function(){this.httpRequest()},render:function(t){return t("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?t("div",[t("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):t("chart-Mask",{attrs:{loading:this.loading}})])}};function G(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var X={name:"chart-sales-report-trend",components:{chart:r.a,ChartMask:o.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(t){var e=t.split("-");return e[1]=e[1]-0+"月",e.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,G(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var t=Math.max.apply(Math,G(this.salesNumber))-0,e=(Math.floor(t+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,G(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var t=Math.max.apply(Math,G(this.salesVolume))-0,e=(Math.floor(t+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"月度趋势",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["销售额","应收款"],left:5},xAxis:[{type:"category",data:this.setMonths,axisPointer:{type:"shadow"},axisTick:{show:!1}}],yAxis:[{type:"value",name:"应收款",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisTick:{show:!1},splitLine:{show:!1},axisLabel:{formatter:"{value}"},nameTextStyle:{color:"transparent"}},{show:!1,type:"value",name:"销售额",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisLabel:{formatter:"{value}"}}],series:[{name:"销售额",type:"bar",data:this.salesVolume},{name:"应收款",type:"line",yAxisIndex:1,itemStyle:{normal:{barBorderRadius:0,label:{show:!0,position:"top",formatter:function(t){return t.value||0}}}},data:this.salesNumber}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(t,e){return!!(t&&t.length&&e&&e.length)&&(t[0]>=e[0]&&e[1]>=t[1])},resetResult:function(t){var e=JSON.parse(this.resultData);this.chartData=e.filter(function(e){if(e.month>=t[0]&&t[1]>=e.month)return!0}),this.formatChartData()},formatChartData:function(){var t=this.chartData;t.length&&(this.salesVolume=t.map(function(t){return t.salesVolume-0}),this.salesNumber=t.map(function(t){return t.salesNumber-0}),this.months=t.map(function(t){return t.month}))},httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.resultData=JSON.stringify(l.a.trend.result||[]),t.chartData=l.a.trend.result||[],t.formatChartData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.resultData=JSON.stringify(e.result||[]),t.chartData=e.result||[],t.formatChartData(),t.loading=!1}).catch(function(e){t.loading=!1})}},created:function(){this.httpRequest()},render:function(t){return t("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?t("div",[t("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):t("chart-Mask",{attrs:{loading:this.loading}})])}};function Z(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var F={name:"chart-sales-report-volume-line",components:{chart:r.a,ChartMask:o.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(t){var e=t.split("-");return e[1]=e[1]-0+"月",e.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,Z(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var t=Math.max.apply(Math,Z(this.salesNumber))-0,e=(Math.floor(t+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,Z(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var t=Math.max.apply(Math,Z(this.salesVolume))-0,e=(Math.floor(t+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return e[0]=e[0]-0+1,e.map(function(t,e){return e?"0":t+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"应收款曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"],left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"邮件营销",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",areaStyle:{},data:[-220,182,191,234,290,330,3100]},{name:"视频广告",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",areaStyle:{},data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(t,e){return!!(t&&t.length&&e&&e.length)&&(t[0]>=e[0]&&e[1]>=t[1])},resetResult:function(t){var e=JSON.parse(this.resultData);this.chartData=e.filter(function(e){if(e.month>=t[0]&&t[1]>=e.month)return!0}),this.formatChartData()},formatChartData:function(){var t=this.chartData;t.length&&(this.salesVolume=t.map(function(t){return t.salesVolume-0}),this.salesNumber=t.map(function(t){return t.salesNumber-0}),this.months=t.map(function(t){return t.month}))},httpRequest:function(){var t=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(e){t.resultData=JSON.stringify(l.a.trend.result||[]),t.chartData=l.a.trend.result||[],t.formatChartData(),t.loading=!1},3e3)},requestBody:function(t){t.$api[t.apiObj.apiName](t.setParams).then(function(e){t.resultData=JSON.stringify(e.result||[]),t.chartData=e.result||[],t.formatChartData(),t.loading=!1}).catch(function(e){t.loading=!1})}},created:function(){this.httpRequest()},render:function(t){return t("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?t("div",[t("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):t("chart-Mask",{attrs:{loading:this.loading}})])}};function Q(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var W={name:"charts-sale-receivables",components:{baseTable:s.a,searchBar:i.a,receivablesPie:K,singleAnalysis:E,multipleAnalysis:F,receivablesTrend:X},data:function(){var t;return Q(t={guid:"",searchList:[{label:"客户名称",type:"input",mapKey:"customerName",configs:{},placeholder:"请输入客户名称"}],searchObj:{},tableConfigList:[{apiObj:{apiName:"getBomTreeProduct",params:{}},showCheckBox:!0,useSummary:!0}],userSelectedList:[],dialogVisible:[!1,!1,!1],dialogWidth:["800px","".concat("mini"===this.size?"800px":"1200px"),"".concat("mini"===this.size?"800px":"1200px")],dialogIndex:0,chartTitle:["应收款分布","月度趋势","客户分析"]},"dialogVisible",!1),Q(t,"trendApiObj",{apiName:"",params:{}}),Q(t,"analysisObj",{apiName:"",params:{}}),t},computed:{systemInfo:function(){return this.$store.getters.systemInfo},size:function(){return this.$store.getters.size},tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0)-36+"px":"100%"}},methods:{sendGuid:function(t){this.guid=t},searchMap:function(t){this.searchObj=t,this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.searchObj),this.trendApiObj.params=Object.assign({},this.trendApiObj.params,this.searchObj),this.analysisObj.params=Object.assign({},this.analysisObj.params,this.searchObj)},databridge:function(t){this.userSelectedList=t},callMethod:function(t){t&&t.methodName&&this[t.methodName](t.params)},showSaleReceivables:function(t){if(this.resetSaleReceivablesData(),1===t&&this.userSelectedList.length>1)return this.$message({showClose:!0,message:"请不要选择多条数据进行展示",type:"warning"}),!1;this.dialogIndex=t,this.dialogVisible[this.dialogIndex]=!0},resetSaleReceivablesData:function(){this.dialogVisible=[!1,!1,!1]}},created:function(){}},U=(a("fzaQ"),Object(d.a)(W,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sale-receivables"},[t.searchList.length?a("search-bar",{attrs:{searchList:t.searchList,inChart:!0},on:{"search-map":t.searchMap,"send-guid":t.sendGuid}}):t._e(),t._v(" "),a("el-row",[a("el-button",{attrs:{type:"primary",size:t.size},on:{click:function(e){t.showSaleReceivables(0)}}},[t._v("应收款分布")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:t.size,disabled:!t.userSelectedList.length},on:{click:function(e){t.showSaleReceivables(1)}}},[t._v("月度趋势")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:t.size,disabled:!t.userSelectedList.length},on:{click:function(e){t.showSaleReceivables(2)}}},[t._v("客户分析")])],1),t._v(" "),a("el-row",{staticStyle:{"border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:t.tableHeight,"margin-top":t.searchList.length?"10px":"0"}},[a("base-table",{ref:"customBaseTable",attrs:{tableConfigList:t.tableConfigList},on:{databridge:t.databridge,callmethod:t.callMethod}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.chartTitle[t.dialogIndex],"close-on-click-modal":!1,visible:t.dialogVisible[t.dialogIndex],width:t.dialogWidth[t.dialogIndex]},on:{"update:visible":function(e){t.$set(t.dialogVisible,t.dialogIndex,e)}}},[t.dialogVisible[0]?[a("receivables-pie",{attrs:{height:t.systemInfo.clientHeight?.65*t.systemInfo.clientHeight+"px":"400px",apiObj:t.trendApiObj}})]:t.dialogVisible[1]?[a("receivables-trend",{attrs:{height:t.systemInfo.clientHeight?.7*t.systemInfo.clientHeight+"px":"400px",apiObj:t.analysisObj}})]:t.dialogVisible[2]?[1===t.userSelectedList.length?[a("single-analysis",{attrs:{height:t.systemInfo.clientHeight?.7*t.systemInfo.clientHeight+"px":"400px",apiObj:t.analysisObj}})]:[a("multiple-analysis",{attrs:{height:t.systemInfo.clientHeight?.7*t.systemInfo.clientHeight+"px":"400px",apiObj:t.analysisObj}})]]:t._e(),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.resetSaleReceivablesData}},[t._v("关 闭")])],1)],2)],1)},[],!1,null,"5ed2264f",null));U.options.__file="index.vue";var tt={name:"encapsulation-charts",components:{comprehensive:g,product:D,customer:T,staff:Y,receivables:U.exports},data:function(){return{tabs:[{label:"综合",componentName:"comprehensive",tableConfig:{}},{label:"产品",componentName:"product",tableConfig:{}},{label:"客户",componentName:"customer",tableConfig:{}},{label:"员工",componentName:"staff",tableConfig:{}},{label:"应收款",componentName:"receivables",tableConfig:{}}],activeName:"0"}},methods:{handleClick:function(t,e){},databridge:function(t){},callmethod:function(t){}},computed:{},directives:{},created:function(){}},et=(a("FYU4"),Object(d.a)(tt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"encapsulationCharts"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t._l(t.tabs,function(e,i){return[a("el-tab-pane",{key:i,attrs:{label:e.label,name:i+""}},[t.activeName===i+""?a(e.componentName,{tag:"component",attrs:{tableConfigList:e.tableConfig},on:{databridge:t.databridge,callmethod:t.callmethod}}):t._e()],1)]})],2)],1)},[],!1,null,null,null));et.options.__file="index.vue";e.default=et.exports},tNf1:function(t,e,a){},uBi4:function(t,e,a){"use strict";var i=a("ws36");a.n(i).a},ws36:function(t,e,a){}}]);