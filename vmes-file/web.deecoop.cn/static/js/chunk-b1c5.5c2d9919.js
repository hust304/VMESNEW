(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b1c5"],{"0ppE":function(e,t,a){"use strict";a.r(t);a("rGqo"),a("91GP"),a("INYr");var i=a("uTIz"),s=a("Kabk"),o=a("5Fd+"),n=a("CK78"),r={components:{searchBar:i.a,tabsTable:s.a,orderCollect:o.default},data:function(){return{rowTableList:[],openDialogName:"",showDialog:!1,visible:!1,dialogData:{dialog_width:"",orderDetail_style:"",deliverDetail_style:"",orderId:"",orderObject:{},title:"",temp:null,tempLable:null},searchList:[{label:"订单编号",type:"input",ruleType:"string",mapKey:"orderSysCode",configs:{},placeholder:"订单编号"},{label:"客户名称",type:"input",ruleType:"string",mapKey:"customerName",configs:{},placeholder:"客户名称"}],guid:"",currentpage:1,searchObj:{},activeName:"first",isFinance:!1,tableConfig:{configs:{0:{showCheckBox:!0,showIndex:!1,expandOne:!1,isSortable:!1,showPageData:!0},1:{showCheckBox:!1,showIndex:!0,isSortable:!1,isSingle:!0}},customColumn:{0:[{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"详情",editBtns_isShow:!0,icon:"add",method:this.infoByParent}]}]},mergeColumn:{0:[{index:1,columns:["orderSysCode","customerName","receiptTypeName","custInvoiceBankName","totalSum"]},{index:2,columns:["custInvoiceCompanyName","custInvoiceMobile","custInvoiceNumber","custInvoiceAddress","custInvoiceBankCode"]},{index:3,columns:["cuserDeptName","cuserName","cdate","stateName"]}]},columnGlobalStyle:{0:{titleStyle:{"font-size":"14px","font-weight":600,color:"#000000"},bodyStyle:{color:"#199ED4"}}},apiObj:{apiName:"listPageSaleInvoice",params:{state:"0"}}},tabs:[{label:"待开票",key:"first",btnName:"完成开票",method:this.addInvoice,disabled:!1,componentName:"customRowTable",apiObj:{apiName:"listPageSaleInvoice",params:{state:"0",dataType:this.$storage.get("dataType")}}},{label:"已开票",key:"second",btnName:"申请开票",disabled:!0,componentName:"customRowTable",apiObj:{apiName:"listPageSaleInvoice",params:{state:"1",dataType:this.$storage.get("dataType")}}}],tabsKey:"first"}},created:function(){},mounted:function(){},methods:{sendTabsKey:function(e){this.tabsKey=e},closeDialog:function(e){var t=this;if("ok"==e.resState){var a=this.tabs.findIndex(function(e){return e.key===t.tabsKey});a>-1&&(this.tabs[a].apiObj.params=Object.assign({},this.tabs[a].apiObj.params,this.searchObj))}this.visible=!1,this.showDialog=!1},addInvoice:function(e){var t=this;if(null!=this.rowTableList&&0!=this.rowTableList.length){var a="";this.rowTableList.forEach(function(e){null!=e.id&&e.id.trim().length>0&&(a=a+e.id.trim()+",")}),Object(n.updateStateBySaleInvoice)({ids:a}).then(function(e){if(t.dialogLoading=!1,0===e.code){t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.rowTableList=[];var a=t.tabs.findIndex(function(e){return e.key===t.tabsKey});a>-1&&(t.tabs[a].apiObj.params=Object.assign({},t.tabs[a].apiObj.params,t.searchObj))}}).catch(function(e){})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少勾选一行数据！"})},databridge:function(e){Array.isArray(e)&&(this.rowTableList=[],this.rowTableList=e)},sendGuid:function(e){this.guid=e},searchMap:function(e){var t=this;this.searchObj=e;var a=this.tabs.findIndex(function(e){return e.key===t.tabsKey});a>-1&&(this.tabs[a].apiObj.params=Object.assign({},this.tabs[a].apiObj.params,this.searchObj))},infoByParent:function(e,t){var a=document.body.clientWidth,i=document.body.clientHeight,s=.8*a;this.dialogData.dialog_width=s+"px";var o=.9*i,n=.25*o+"px";this.dialogData.orderDetail_style="height:"+n+";width: 96%;margin-left: 2%;";var r=.2*o+"px";this.dialogData.deliverDetail_style="height:"+r+";width: 96%;margin-left: 2%;",this.dialogData.temp=JSON.parse(JSON.stringify(e)),this.dialogData.orderObject=JSON.parse(JSON.stringify(e)),this.dialogData.orderId=e.orderId,this.dialogData.title="订单详情",this.openDialogName="orderCollect",this.showDialog=!0,this.visible=!0}},computed:{tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0):0},dialogName:function(){return this.openDialogName}},watch:{currentpage:function(){}}},l=(a("ppmw"),a("KHd+")),c=Object(l.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"invoice"},[e.searchList.length?a("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),a("el-row",{staticStyle:{"border-bottom":"none",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.tableHeight+"px"}},[a("tabs-table",{attrs:{tabs:e.tabs,tableConfig:e.tableConfig},on:{tabsKey:e.sendTabsKey,databridge:e.databridge}})],1),e._v(" "),e.showDialog?a(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visible},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);c.options.__file="index.vue";t.default=c.exports},G2ka:function(e,t,a){},ppmw:function(e,t,a){"use strict";var i=a("G2ka");a.n(i).a}}]);