(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ea94"],{"78b0":function(e,t,a){},UmDX:function(e,t,a){},"V6m+":function(e,t,a){"use strict";var i=a("78b0");a.n(i).a},VO62:function(e,t,a){"use strict";a.r(t);a("f3/d"),a("91GP");var i=a("uTIz"),o=a("WIyV"),s=a("KB6W"),n=a("Jn2s"),r=a("aZSg"),l=a("9rC1"),c=(a("Vobf"),a("z0WU"),{components:{searchBar:i.a,customBaseTable:o.a,dialogAdd:s.default,dialogEdit:n.default},data:function(){return{guid:"",searchList:[{label:"客户名称",type:"input",ruleType:"string",mapKey:"customerName",configs:{},placeholder:"请输入客户名称"},{label:"货品编码",type:"input",ruleType:"string",mapKey:"code",configs:{},placeholder:"请输入货品编码"},{label:"货品名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"请输入货品名称"},{label:"规格型号",type:"input",ruleType:"string",mapKey:"spec",configs:{},placeholder:"请输入规格型号"},{label:"货品属性",type:"input",ruleType:"string",mapKey:"genreName",configs:{},placeholder:"请输入货品属性"},{label:"单位",type:"input",ruleType:"string",mapKey:"unitName",configs:{},placeholder:"请输入货品单位"}],searchConfig:{hideSearchSwitch:!1},searchObj:{},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1},selectTree:{pid:"",id:"",name:""},configs:{topBarBtnList:[{name:"新增",nameEn:"add",isShow:!0,icon:"add",method:this.dialogAdd},{name:"删除",nameEn:"delete",isShow:!0,icon:"delete",method:this.deleteBatch},{name:"导出",nameEn:"export",isShow:!0,icon:"export",method:this.exportExcel},{name:"导入",nameEn:"import",isShow:!0,icon:"import",method:this.importExcelCallBack,dialog:{enable:!0,data:{exportUrl:"/fileUpload/excelTemplet/SaleCustomerProductPriceExcelImport.xlsx",importUrl:"/sale/saleUnitPrice/importExcelSaleUnitPrice"},dialogName:"dialogImportExcel"}}]},tableData:[],varList:[],apiObj:{apiName:"listPageSaleUnitPrices",params:{fieldCode:"customerName,prodInfo,unitName,prodPrice,custProdPrice,remark",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"code,name,spec,productProperty",dataType:this.$storage.get("dataType"),orderStr:"sup.cdate desc"}},customColumn:[{columnIndex:"customerName",width:"200",_cellConfig:{bodyStyle:{"text-align":"left",display:"inline-block",width:"100%"},hideTitle:!0}},{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",width:"100",component:[{name:"编辑",nameEn:"editBtns",editBtns_isShow:!0,method:this.editBtns}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},openDialogName:"",showDialog:!1,visible:!1,dialogData:{title:"",data:null},dialogLoading:!0,temp:{}}},beforeCreate:function(){},created:function(){this.initTree()},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},methods:{getData:function(){this.$refs.saleUnitPrice.getData()},pushData:function(){this.$refs.saleUnitPrice.updateTable()},searchMap:function(e){this.searchObj=e,this.apiObj.params=Object.assign({},this.apiObj.params,this.searchObj)},sendGuid:function(e){this.guid=e},initTree:function(){var e=this;this.dialogLoading=!0,Object(l.treeCustomer)({customerGenre:"df7cb67fca4148bc9632c908e4a7fdea"}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},loadTree:function(e){var t=[],a=e.result.treeList;this.selectTree={pid:a.pid,id:a.id,layer:a.layer,name:a.name},t.push(a),this.treeData=t,this.dialogLoading=!1},findCustomerByTreeData:function(e){var t="";return null!=e&&"root"!=e.pid&&null!=e.id&&(t=e.id),t},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name};var t=this.findCustomerByTreeData(this.selectTree);this.apiObj.params=Object.assign({},this.apiObj.params,{customerId:t})},closeDialog:function(e){if(this.showDialog=!1,"ok"===e.resState){var t=this.findCustomerByTreeData(this.selectTree);this.apiObj.params=Object.assign({},this.apiObj.params,{customerId:t})}},databridge:function(e){this.tableData=e},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},resetTemp:function(){for(var e in this.temp)this.temp[e]=""},dialogAdd:function(){this.dialogData.title="新增客户货品价格",this.openDialogName="dialogAdd",this.showDialog=!0,this.visible=!0},deleteBatch:function(){var e=this;null!=this.tableData&&0!=this.tableData.length?this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t="",a=0;a<e.tableData.length;a++){t=t+e.tableData[a].id+","}Object(r.deleteSaleUnitPrice)({ids:t}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.pushData())}).catch(function(e){})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一行数据！"})},exportExcel:function(){},importExcelCallBack:function(){this.pushData()},editBtns:function(e,t){this.resetTemp(),this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.rowData=this.temp,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑",this.openDialogName="dialogEdit",this.showDialog=!0,this.visible=!0}},computed:{tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0):0},dialogName:function(){return this.openDialogName}},watch:{}}),d=(a("V6m+"),a("fVHf"),a("KHd+")),h=Object(d.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customerPrice"},[e.searchList.length?a("search-bar",{attrs:{searchList:e.searchList,searchConfig:e.searchConfig},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),a("el-row",{staticStyle:{border:"1px solid #E4E4E4","border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.tableHeight+"px"}},[a("el-col",{staticClass:"treeStyle",attrs:{span:4}},[a("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),a("el-col",{staticClass:"tableStyle",attrs:{span:20}},[a("div",{staticClass:"baseTable"},[a("el-row",{staticClass:"tableTopBar"},[a("el-col",[e._l(e.configs.topBarBtnList,function(e,t){return[a("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state,dialog:e.dialog},on:{myclick:e.method}})]})],2)],1),e._v(" "),a("el-row",{staticClass:"tableContent"},[a("custom-base-table",{ref:"saleUnitPrice",attrs:{"data-custom-table-id":"views_sale_salePrice_customerPrice_index0",isSortable:!1,leftFixed:3,varList:e.varList,keyValue:!1,showIndex:!1,showTableSet:!1,showCheckBox:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"saleUnitPrice",showAll:!1,keyMapping:e.keyMapping},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1)])],1),e._v(" "),e.showDialog?a(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visible},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);h.options.__file="index.vue";t.default=h.exports},fVHf:function(e,t,a){"use strict";var i=a("UmDX");a.n(i).a}}]);