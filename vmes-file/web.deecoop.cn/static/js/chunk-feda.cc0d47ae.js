(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-feda"],{"179/":function(t,e,i){"use strict";i.r(e);i("rGqo");var s=i("Yfch"),n={name:"warehouse-task-statistics",props:{customData:{type:Object,default:function(){return null}},readonly:{type:Boolean,default:!0}},data:function(){return{baseHeader:["","待完成","已完成","完成率"],tableListViewsWidth:[110,90,90,90],viewWidth:0,viewHeight:0,titleFontSize:20,bodyFontSize:22,resultList:[],headerPadding:1,bodyTBPadding:4,bodyLRPadding:4,resultViewList:["现有货品","","库存预警",""],baseBodyPadding:5,resultViewPadding:8,baseBodyViewPadding:4,titleHeightScale:3,bodyHeightScale:3,taskPath:[[null,null,null,null],[null,"warehouse/out/execute","warehouse/out/execute",null],[null,"warehouse/in/execute","warehouse/in/execute",null],[null,"warehouse/check/manage","warehouse/check/manage",null]],resizeTimer:null,taskList:[["总任务数","allUnCompleted","allCompleted","allCompletedRatio"],["出库任务","outUnCompleted","outCompleted","outCompletedRatio"],["入库任务","inUnCompleted","inCompleted","inCompletedRatio"],["盘点任务","checkUnCompleted","checkCompleted","checkCompletedRatio"]],initTimer:null}},directives:{},computed:{setApiObj:function(){return this.customData&&this.customData.config?this.customData.config.apiObj:null},viewScale:function(){return this.viewWidth?this.computeViewScale():1},setTableListViewsWidth:function(){var t=this;return this.tableListViewsWidth.map(function(e){return Math.floor(e*t.viewScale)})},setTitleFontSize:function(){return this.viewScale*this.titleFontSize},setBodyFontSize:function(){return this.viewScale*this.bodyFontSize},setHeaderPadding:function(){return this.viewScale*this.headerPadding},setBodyTBPadding:function(){return this.viewScale*this.bodyTBPadding},setBodyLRPadding:function(){return this.viewScale*this.bodyLRPadding},setBaseBodyPadding:function(){return this.viewScale*this.baseBodyPadding},setResultViewPadding:function(){return this.viewScale*this.resultViewPadding},setBaseBodyViewPadding:function(){return this.viewScale*this.baseBodyViewPadding},resultColor:function(){return["transparent","rgb(255,255,0)","rgb(0,176,80)","rgb(96,74,123)"]},resultViewColor:function(){return["transparent","rgb(0,176,80)","transparent","rgb(255,0,0)"]},setTextColor:function(){return["#ffffff","#000000","#ffffff","#ffffff"]}},methods:{resFormat:function(t){return this.taskList.map(function(e){return e.map(function(i,n){return t.result&&Object(s.b)(t.result[i])?n===e.length-1?"".concat(t.result[i],"%"):t.result[i]:i})})},httpRequest:function(){var t=this;this.setApiObj&&this.$api[this.setApiObj.apiName](this.setApiObj.params).then(function(e){t.resultList=t.resFormat(e),t.resultViewList[1]=e.productCount||0,t.resultViewList[3]=e.alertProductCount||0}).catch(function(t){})},computeViewScale:function(){var t=0;return this.tableListViewsWidth.forEach(function(e){t+=e}),this.viewWidth/t},goTaskPage:function(t,e){var i=this;this.readonly&&this.taskPath[t][e]&&(this.$emit("unscreenfull"),setTimeout(function(s){i.$router.push({path:"/".concat(i.taskPath[t][e])})},1e3))},myResizeFn:function(){var t=this;clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(e){t.viewWidth=t.$parent.$el.clientWidth,t.viewHeight=t.$parent.$el.clientHeight},16.67)}},created:function(){this.httpRequest()},mounted:function(){var t=this;this.initTimer=setTimeout(function(e){t.viewWidth=t.$parent.$el.clientWidth,t.viewHeight=t.$parent.$el.clientHeight,!t.readonly&&addResizeListener(t.$el,t.myResizeFn)})},beforeDestroy:function(){clearTimeout(this.initTimer),this.readonly||this.$el.__resizeTrigger__.contentDocument&&removeResizeListener(this.$el,this.myResizeFn)}},a=(i("hScI"),i("KHd+")),d=Object(a.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"warehouseTaskStatistics"},[i("div",{staticClass:"resultPlan"},[i("div",{staticClass:"baseHeader"},t._l(t.baseHeader,function(e,s){return i("div",{key:s,staticClass:"baseHeaderViews",style:{width:t.setTableListViewsWidth[s]+"px",height:t.setTitleFontSize*t.titleHeightScale+"px",padding:t.setHeaderPadding+"px 0"}},[i("div",{staticStyle:{position:"relative",height:"100%"}},[i("svg",{attrs:{width:t.setTableListViewsWidth[s],height:t.setTitleFontSize*t.titleHeightScale-2*t.setHeaderPadding,viewBox:"0 0 "+t.setTableListViewsWidth[s]+" "+(t.setTitleFontSize*t.titleHeightScale-2*t.setHeaderPadding)}},[i("text",{attrs:{"font-size":t.setTitleFontSize,x:"50%",y:"50%",fill:"#ffffff","text-anchor":"middle","dominant-baseline":"middle"}},[t._v(t._s(e))])])])])})),t._v(" "),i("div",{staticClass:"baseBody",style:{padding:"0 0 "+t.setBaseBodyViewPadding+"px 0"}},[i("ul",t._l(t.resultList,function(e,s){return i("li",{key:s,staticClass:"baseBodyViews",style:{padding:t.setBaseBodyPadding+"px 0"}},t._l(e,function(e,n){return i("div",{key:n,staticClass:"baseBodyBoxs",style:{width:t.setTableListViewsWidth[n]+"px",height:t.setBodyFontSize*t.bodyHeightScale+"px",padding:t.setBodyTBPadding+"px "+t.setBodyLRPadding+"px"}},[i("div",{staticStyle:{position:"relative",height:"100%"},style:{cursor:t.taskPath[s][n]?"pointer":"inherit"},on:{click:function(e){t.goTaskPage(s,n)}}},[i("svg",{attrs:{width:t.setTableListViewsWidth[n]-2*t.setBodyLRPadding,height:t.setBodyFontSize*t.bodyHeightScale-2*t.setBodyTBPadding,viewBox:"0 0 "+(t.setTableListViewsWidth[n]-2*t.setBodyLRPadding)+" "+(t.setBodyFontSize*t.bodyHeightScale-2*t.setBodyTBPadding)}},[i("rect",{style:{fill:t.resultColor[n]},attrs:{width:"100%",height:"100%"}}),t._v(" "),i("text",{attrs:{"font-size":n?t.setBodyFontSize:t.setTitleFontSize,x:"50%",y:"50%",fill:t.setTextColor[n],"text-anchor":"middle","dominant-baseline":"middle"}},[t._v(t._s(e))])])])])}))}))])]),t._v(" "),i("div",{staticClass:"resultView",style:{padding:t.setResultViewPadding+"px 0"}},[i("div",{staticClass:"baseBodyViews"},t._l(t.resultViewList,function(e,s){return i("div",{key:s,staticClass:"baseBodyBoxs",style:{width:t.setTableListViewsWidth[s]+"px",height:3*t.setBodyFontSize+"px",padding:t.setBodyTBPadding+"px "+t.setBodyLRPadding+"px"}},[i("div",{staticStyle:{position:"relative",height:"100%"}},[i("svg",{attrs:{width:t.setTableListViewsWidth[s]-2*t.setBodyLRPadding,height:3*t.setBodyFontSize-2*t.setBodyTBPadding,viewBox:"0 0 "+(t.setTableListViewsWidth[s]-2*t.setBodyLRPadding)+" "+(3*t.setBodyFontSize-2*t.setBodyTBPadding)}},[i("rect",{style:{fill:t.resultViewColor[s]},attrs:{width:"100%",height:"100%"}}),t._v(" "),i("text",{attrs:{"font-size":1==s||3==s?t.setBodyFontSize:t.setTitleFontSize,x:"50%",y:"50%",fill:"#ffffff","text-anchor":"middle","dominant-baseline":"middle"}},[t._v(t._s(e))])])])])}))])])},[],!1,null,null,null);d.options.__file="warehouseTaskStatistics.vue";e.default=d.exports},hScI:function(t,e,i){"use strict";var s=i("w5wC");i.n(s).a},w5wC:function(t,e,i){}}]);