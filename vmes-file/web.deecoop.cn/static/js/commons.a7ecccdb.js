(window.webpackJsonp=window.webpackJsonp||[]).push([["commons"],{"+2p0":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}],entityTypeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.entityTypeData.defaultSelected.length<=0?a(new Error("请选择仓库类型")):a()}}]},entityTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseType",isglobal:"1"}},defaultSelected:[]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",fullscreen:!1,tempLable:null},formTemp:[]}},created:function(){this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{entityTypeSelect:function(e){e[0]?(this.temp.entityType=e[0],this.entityTypeData.defaultSelected=[e[0]]):(this.temp.entityType=[],this.entityTypeData.defaultSelected=[])},dialogOpen:function(){var e=this;this.temp.entityType=this.entityTypeData.defaultSelected[0],this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addWarehouseByEntity)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.entityTypeName+":",prop:"entityTypeName"}},[i("base-input-select",{attrs:{data:e.entityTypeData.data},on:{callback:e.entityTypeSelect},model:{value:e.entityTypeData.defaultSelected,callback:function(t){e.$set(e.entityTypeData,"defaultSelected",t)},expression:"entityTypeData.defaultSelected"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseEntityAdd.vue";t.default=s.exports},"+3R6":function(e,t,i){"use strict";var a=i("lNhn");i.n(a).a},"+BYO":function(e,t,i){"use strict";i.r(t);i("91GP"),i("rGqo");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("icrm")),l={components:{customTransferTable:a.a,dialogAddFromBom:n.default,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"下一步",isShow:!0,state:!0,method:this.nextStep},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageBoms",params:{modelCode:"BomProduct",fieldCode:"prodInfo,unitName,code,name",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"prodCode,prodName,prodSpec,productProperty",isdefault:"1",isdisable:"1",isNullAlarm:"true"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!0,entireRowDrag:!0},belowTableConfig:{customColumn:[],tempData:{},showIndex:!1,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!0,entireRowDrag:!0},addColumns:[],hideColumns:["remark"],tableSelectList:[]}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{tableSelectList:this.tableSelectList})},closeDialog:function(e){this.showDialog=!1},tableSelected:function(e){this.tableSelectList=e},nextStep:function(){this.$refs.trabsferTables.getTableSelected();var e="";this.tableSelectList.forEach(function(t){e+=""==e?"'"+t.id+"'":",'"+t.id+"'"}),""!=e?(this.dialogData.temp=JSON.stringify(this.tableSelectList),this.dialogData.tempLable=this.tempLable,this.dialogData.title="按产品BOM领料",this.openDialogName="dialogAddFromBom",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条记录！"})},confrim:function(){this.$refs.trabsferTables.getTableSelected()},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{height:"100%"},attrs:{span:24}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogAddProduct.vue";t.default=r.exports},"+CwU":function(e,t,i){"use strict";var a=i("Knh7");i.n(a).a},"+FfQ":function(e,t,i){"use strict";i.r(t);var a=i("WIyV"),o=i("3LyK"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){var e=this;return{rules:{receiptTypeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.temp.receiptType.length<=0?a(new Error("请选择发票类型")):a()}}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{orderId:"",receiptTypeBefore:"",receiptTypeAfter:""},tableData:[],orderDtlList:[],apiObj:{apiName:"listPageOrderDetaiByChange",params:{fieldCode:"prodInfo,orderUnitName,orderCount,deliverCount,retreatCount,miniChangeCount,newOrderCount,newProductPrice,productSum,newDeliverDate",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:"",queryState:"'2','3','4'",isOrderChange:"0"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"newOrderCount",width:"130",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{greaterThan:["self@miniChangeCount",!0]}],message:["此项不能为空！","请输入大于零的整数或(1,2)位小数！","不可小于最小变更数"]}},{columnIndex:"newProductPrice",width:"130",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]{1,4})?$"}],message:["此项不能为空！","请输入大于零的整数或(1,4)位小数！"]}},{columnIndex:"productSum",width:"120",componentName:"dynaContent",_cellConfig:{compute:"self@newOrderCount(*)self@newProductPrice",hideTitle:!0}},{columnIndex:"newDeliverDate",width:"180",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",rules:[{required:!0}],message:["此项不能为空！"]}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.temp=this.initData.temp,this.temp.orderId=this.initData.temp.id,this.temp.receiptTypeBefore=this.initData.temp.receiptType,this.apiObj.params.parentId=this.initData.temp.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){this.orderDtlList=[],Array.isArray(e)&&(this.orderDtlList=e)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.orderDtlList=[],e.$refs.orderEditDialog.getData(),null!=e.orderDtlList&&e.orderDtlList.length>0&&e.saveSaleOrder(e.orderDtlList))})},saveSaleOrder:function(e){var t=this;this.temp.receiptTypeAfter=this.temp.receiptType;for(var i=[],a=0;a<e.length;a++){var n=e[a],l={orderDtlId:n.id,orderCountBefore:n.orderCount,orderCountAfter:n.newOrderCount,productPriceBefore:n.productPrice,productPriceAfter:n.newProductPrice,deliverDateBefore:n.deliverDate,deliverDateAfter:n.newDeliverDate,deliverCount:n.deliverCount,retreatCount:n.retreatMoneyCount};i.push(l)}this.temp.dtlJsonStr="",null!=i&&i.length>0&&(this.temp.dtlJsonStr=JSON.stringify(i)),Object(o.checkSaleOrderChange)(this.temp).then(function(e){"true"==e.isChange?t.$confirm("保存后将该订单提交变更审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.addSaleOrderChange)(t.temp).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消操作"})}):t.$message({type:"warning",duration:5e3,showClose:!0,message:"(发票类型,订购数量,单价,约定交期)与原数据相同，无需提交变更！"})})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size},formItemWidth:function(){var e={};switch(this.size){case"mini":e.width="180px";break;case"small":e.width="200px";break;default:e.width="220px"}return e}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"100px",size:e.size}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"客户名称:",prop:"customerName"}},[i("el-input",{style:e.formItemWidth,attrs:{readonly:!0},model:{value:e.temp.customerName,callback:function(t){e.$set(e.temp,"customerName",t)},expression:"temp.customerName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"下单日期:",prop:"orderDate"}},[i("el-date-picker",{style:e.formItemWidth,attrs:{type:"date",placeholder:"下单日期","value-format":"yyyy-MM-dd",readonly:!0},model:{value:e.temp.orderDate,callback:function(t){e.$set(e.temp,"orderDate",t)},expression:"temp.orderDate"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发票类型:",prop:"receiptTypeName"}},[i("el-select",{style:e.formItemWidth,attrs:{placeholder:"发票类型"},model:{value:e.temp.receiptType,callback:function(t){e.$set(e.temp,"receiptType",t)},expression:"temp.receiptType"}},[i("el-option",{attrs:{label:"不开票",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"增值税普通发票",value:"2"}}),e._v(" "),i("el-option",{attrs:{label:"增值税专用发票",value:"3"}})],1)],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderEditDialog",attrs:{"data-custom-table-id":"views_sale_order_dialogOrderChange0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderEditDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogOrderChange.vue";t.default=s.exports},"+HYo":function(e,t,i){},"+IxY":function(e,t,i){},"+JIN":function(e,t,i){"use strict";var a=i("Ch95");i.n(a).a},"+S2+":function(e,t,i){},"+TbO":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("ywZ6"),l=i("Qe0A"),s=i("a0Xs");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddSupplier:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageForAddFromBOM",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",dtlJsonStr:this.initData.temp}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isOnlyEntity:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"4"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="采购退货出库",this.temp.type="4cba5d3815644b26920777512a20474b",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(s.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={productId:n.productId,priceCount:n.priceCount,priceUnit:n.priceUnit,p2nFormula:n.p2nFormula,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount,remark:n.remark};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.addWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseOut_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogAdd.vue";t.default=u.exports},"+X69":function(e,t,i){"use strict";i.r(t);i("Oyvg");var a=i("WIyV"),o=i("OCF4"),n=i("aUBR"),l=i("DlwF"),s={components:{customBaseTable:a.a,dialogSelect:o.default,selectProductByVirtual:n.default},props:["initData","visible"],data:function(){return{repairTaskId:"",rules:{taskResult:[{required:!0,message:"请选择报工结果",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{repairTaskId:"",tableData:[],title:"",data:null,isNeedRepeat:!1},resState:"",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",taskResult:"",remark:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],configs:{topBarBtnList:[{name:"原有货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"findListRepairTaskDetailByOutDetail",params:{type:"edit",fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,receiveCount,applyCount",taskId:"",outDtlState:"2"}},customColumn:[{columnIndex:"applyCount",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},isValidate:!1}},beforeCreate:function(){},created:function(){this.repairTaskId=this.initData.repairTaskId,this.formData.id=this.initData.repairTaskId,this.apiObj.params.taskId=this.initData.repairTaskId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)&&(this.orderDtlList=[],this.orderDtlList=e)},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.receiveCount,n=a.applyCount;null!=n&&n.trim().length>0&&!this.isNumberByValue(n.trim())&&(t=t+"第 "+(i+1)+" 行: 使用数量("+n+")输入错误，请输入大于零的正整数或(1,2)位小数！！"),null!=o&&o.trim().length>0&&null!=n&&n.trim().length>0&&n-0-(o-0)>0&&(t=t+"第 "+(i+1)+" 行: 使用数量不可大于领取数量！")}return t},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveSaleOrder(e.orderDtlList))})},saveSaleOrder:function(e){var t=this,i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else if(this.isShowRetreatWarehouse(e))this.dialogData.repairTaskId=this.formData.id,this.dialogData.formData=this.formData,this.dialogData.tableData=e,this.dialogData.title="选择退库方式",this.openDialogName="dialogSelect",this.showDialog=!0,this.inLinVisible=!0;else{var a="",o=this.tableData2AddList(e);null!=o&&o.length>0&&(a=JSON.stringify(o));var n="",s=this.tableData2EditList(e);null!=s&&s.length>0&&(n=JSON.stringify(s)),Object(l.updateRepairTaskDetail)({roleId:this.$storage.get("userInfo").roleIds,deptId:this.$storage.get("userInfo").deptId,repairTaskId:this.repairTaskId,retreatType:"1",repairTaskJson:JSON.stringify(this.formData),detailAddJson:a,detailEditJson:n}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.resState="ok",t.dialogClose())}).catch(function(e){})}},isShowRetreatWarehouse:function(e){for(var t=0;t<e.length;t++){var i=e[t];if(-1!=i.operateType.indexOf("edit")){var a=i.receiveCount,o="0";if(null!=i.applyCount&&i.applyCount.trim().length>0&&(o=i.applyCount.trim()),a-0-(o-0)!=0)return!0}}return!1},tableData2EditList:function(e){var t=[];if(null==e||0==e.length)return t;for(var i=0;i<e.length;i++){var a=e[i],o={id:a.id,productId:a.productId,productGenre:a.productGenre,receiveCount:a.receiveCount,applyCount:a.applyCount};"edit"==a.operateType&&t.push(o)}return t},tableData2AddList:function(e){var t=[];if(null==e||0==e.length)return t;for(var i=0;i<e.length;i++){var a=e[i],o={productId:a.productId,productGenre:a.productGenre,receiveCount:a.applyCount,applyCount:a.applyCount,warehouseGenre:a.warehouseGenre};"add"==a.operateType&&t.push(o)}return t},addProduct:function(){this.$refs.orderAddDialog.getData();var e=this.tableData2AddList(this.orderDtlList);this.dialogData.data=e,this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="selectProductByVirtual",this.showDialog=!0,this.inLinVisible=!0},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1,"selectProductByVirtual"===e.pageName?null!=e.selectList&&e.selectList.length>0&&this.tableSelected(e.selectList):(e.resState&&(this.resState=e.resState),this.isVisible=!1)},tableSelected:function(e){for(var t=0;t<e.length;t++){var i=e[t],a={productId:"",productCode:"",productName:"",productSpec:"",productGenre:"",productGenreName:"",productUnitName:"",receiveCount:"",operateType:"",warehouseGenre:""};a.operateType="add",a.warehouseGenre="virtual",a.productId=i.productId.trim(),null!=i.productCode&&i.productCode.trim().length>0&&(a.productCode=i.productCode.trim()),null!=i.productName&&i.productName.trim().length>0&&(a.productName=i.productName.trim()),null!=i.productSpec&&i.productSpec.trim().length>0&&(a.productSpec=i.productSpec.trim()),null!=i.genre&&i.genre.trim().length>0&&(a.productGenre=i.genre.trim()),null!=i.productGenreName&&i.productGenreName.trim().length>0&&(a.productGenreName=i.productGenreName.trim()),null!=i.productUnitName&&i.productUnitName.trim().length>0&&(a.productUnitName=i.productUnitName.trim()),null!=i.stockCount&&i.stockCount.trim().length>0&&(a.receiveCount=i.stockCount.trim()),this.tableData.push(a)}}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"报工结果:",prop:"taskResult"}},[i("el-select",{model:{value:e.formData.taskResult,callback:function(t){e.$set(e.formData,"taskResult",t)},expression:"formData.taskResult"}},[i("el-option",{attrs:{label:"故障已解决",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"故障未解决",value:"0"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}})],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{height:"450px",width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_equipment_equipmentRepair_repairTask_dialogProductConfirm0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogProductConfirm.vue";t.default=c.exports},"+h8N":function(e,t,i){"use strict";i.r(t);i("KKXr"),i("f3/d"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("t3Un")),l={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",state:!0,isShow:!0,plain:!0,icon:"refresh",method:this.resetQuery}],aboveTableConfig:{apiObj:{apiName:"listPageProducts",params:{fieldCode:"prodInfo,unitName,stockCount,safetyCount,lockCount,productStockCount",prodColumnKey:"code,name,spec,property"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!0,showTableSet:!1,showAll:!1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,dragTable:!1,entireRowDrag:!1},addColumns:[{columnIndex:9,label:"计划数量",prop:"count",componentName:"input",width:120,_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{greaterThan:["0",!1]}],message:["请输入大于零的正整数或(1,2)位小数！","不可等于零！"]}}],hideColumns:[],tableSelectList:[]}},created:function(){var e="";null!=this.initData.queryStr&&(e=this.initData.queryStr);var t="";t=null!=this.initData.orderStr?this.initData.orderStr:"prod.stock_count desc";var i="";if(null!=this.initData.tableData&&this.initData.tableData.length>0)for(var a=0;a<this.initData.tableData.length;a++){var o=this.initData.tableData[a];null!=o.productId&&o.productId.trim().length>0&&(i=i+o.productId+",")}var n=!0;null!=this.initData.isNeedRepeat&&(n=this.initData.isNeedRepeat),n||null!=i&&i.trim().length>0&&(i=i.substring(0,i.lastIndexOf(",")),e="prod.id not in ("+(i=this.findQueryProductIds(i))+")"),this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,{queryStr:e,orderStr:t,isdisable:"1"}),this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{selectList:this.tableSelectList,pageName:"selectProductByPurchasePlan"})},closeDialog:function(e){},tableSelected:function(e){this.tableSelectList=e},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.tempQuery.pid=this.selectTree.id,this.tempQuery.layer=this.selectTree.layer,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name},t.push(i),this.treeData=t,this.dialogLoading=!1},initTree:function(){var e=this;this.dialogLoading=!0,Object(n.a)({url:"/system/dictionary/treeDictionarys",method:"post",data:{dictionaryKey:"productGenre"}}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},findQueryProductIds:function(e){var t="";if(null==e||0==e.trim().length)return t;var i=e.split(",");if(null!=i&&i.length>0)for(var a=i.length,o=0;o<i.length;o++){var n="'"+i[o]+"'";o<a-1?t=t+n+",":o==a-1&&(t+=n)}return t},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},confrim:function(){this.$refs.trabsferTables.getTableSelected(),this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"选择货品",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"80%"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery}},[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1),e._v(" "),i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="selectProductByPurchasePlan.vue";t.default=r.exports},"+hWe":function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rGqo");var a=i("mSNy"),o=i("/nWt"),n=i("V/0Z"),l=i("z0WU");function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){r(e,t,i[t])})}return e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" @change="colConfig.changeState(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdefault" :disabled="scope.row.isdefault==\'1\'" @change="colConfig.changeIsDefault(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t\x3c!--<el-button  v-show="colConfig.editBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.editBtns(scope.row,scope.$index)">更换名称</el-button>--\x3e\n      \t\t\t\t\t\t\t\x3c!--<el-button  v-show="colConfig.deleteBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteBtns(scope.row,scope.$index)">删除</el-button>--\x3e\n      \t\t\t\t\t\t\t<el-button  v-show="colConfig.viewBomBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.viewBomBtns(scope.row,scope.$index)">查看/编辑</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},p={name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,topBarBtnList:[{name:"查询",icon:"search",method:this.queryTable},{name:"重置",icon:"refresh",plain:!0,method:this.resetQueryTemp}],initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",btnName:"编辑",isPropName:!0,component:u,editBtns:this.editBtns,editBtns_isShow:!0,viewBomBtns:this.viewBomBtns,viewBomBtns_isShow:!0,deleteBtns:this.deleteBtns,deleteBtns_isShow:!0}},configs:{topBarBtnList:[{name:"新增",nameEn:"add",isShow:!0,icon:"add",method:this.addNew},{name:"导出",nameEn:"export",isShow:!0,icon:"export",method:this.exportExcel}],tableConfigs:[],showCheckBox:!1,showIndex:!1,isSingle:!1},tableData:[],selectList:[],queryParms:[{name:"code"},{name:"name"}],tempQuery:{},tempLable:{},pageData:null,pageNo:1,openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{dialogView:o.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.configs.isSingle=this.initData.isSingle,this.userInfo=this.$storage.get("userInfo"),this.initTable(!0)},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},queryTable:function(){this.pageNo=1,this.initTable()},initTable:function(e){var t=this;t.dialogTopLoading=!0,Object(n.listPageBoms)(s({},t.tempQuery,{modelCode:"BomList",queryStr:" bom.id is not null ",prodId:this.initData.temp.prodId,pageNo:t.pageNo,orderStr:"bom.isdefault desc"})).then(function(i){t.getListPage(i),e&&(t.dialogTopLoading=!1)}).catch(function(e){t.dialogTopLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(l.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!1,this.configs.showIndex=!0,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var o=e[i];o.indexOf("_")>0&&("en"==a.a.locale?o=o.substring(o.indexOf("_")+1):"zh"==a.a.locale&&(o=o.substring(0,o.indexOf("_")))),t.tempLable[i]=o}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==a.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==a.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"是否启用"===e.label&&(e.component=c,e.changeState=t.changeState),"是否默认"===e.label&&(e.component=d,e.changeIsDefault=t.changeIsDefault)}),e.push(t.initConfigs.tableOperates),e},viewBomBtns:function(e,t){this.resetTemp(),this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.temp=this.temp,this.dialogData.tempLable=this.tempLable,this.dialogData.title="查看/编辑",this.openDialogName="dialogView",this.showDialog=!0,this.visibleState=!0},editBtns:function(e,t){this.resetTemp(),this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.temp=this.temp,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑",this.openDialogName="dialogEdit",this.showDialog=!0,this.visibleState=!0},deleteBtns:function(e,t){var i=this;i.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.id;Object(n.deleteBoms)(t).then(function(e){0===e.code&&(i.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),i.refreshTable())}).catch(function(e){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},resetTemp:function(){for(var e in this.temp)this.temp[e]=""},changeIsDefault:function(e,t){var i=this;Object(n.updateIsDefaultBom)(e.id,e.isdefault,this.initData.temp.prodId).then(function(e){i.refreshTable()}).catch(function(e){})},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.refreshTable()},refreshTable:function(){var e=this;e.$axios.all([Object(n.listPageBoms)(s({},e.tempQuery,{prodId:this.initData.temp.prodId,modelCode:"BomList",pageNo:e.pageNo}))]).then(e.$axios.spread(function(t){e.getListPage(t)})).catch(function(e){})},dataBridge:function(e){this.selectList=e},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]=""}},computed:{dialogName:function(){return this.openDialogName}},watch:{pageNo:function(){this.initTable()}}},m=i("KHd+"),h=Object(m.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}],staticStyle:{"padding-top":"10px"}},[i("div",{staticStyle:{padding:"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);h.options.__file="dialogList.vue";t.default=h.exports},"/0fS":function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=(i("z0WU"),{components:{multilevelTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tableData:[],selectList:[],configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"warehouseName,productCode,productName,productSpec,productGenreName,productUnitName,count,executeCount,stateName,remark",typeName:"报废处理",parentId:this.initData.temp.id}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseOutExecutes",params:{fieldCode:"warehouseName,actualCount,executorName,endDate",isNeedPage:"false"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},databridge:function(e){this.selectList=e},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;null!=e.selectList&&e.selectList}},watch:{}}),n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"90px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseBySimple_scrapBySimple_createScrapBySimple_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogView.vue";t.default=l.exports},"/57g":function(e,t,i){"use strict";var a=i("Q9PB");i.n(a).a},"/Axa":function(e,t,i){"use strict";var a=i("lzly");i.n(a).a},"/I2q":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("na5B"),n=i("txn6");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:a.a,productStockTreeTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:"null",typeName:"报废处理",fieldCode:"warehouseName,productCode,productName,productSpec,productGenreName,stockCount,count,remark"}},customColumn:[{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCount",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["报废数量必须大于零！","报废数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="报废处理",this.temp.type="def4b13175dc44b08d7a0315b811700e"},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productStockTreeTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={productId:l.productId,warehouseId:l.warehouseId,pathName:l.pathName,count:l.count,priceCount:l.count,productUnit:l.priceUnit,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount,remark:l.remark};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&t.$confirm("添加报废单后，是否将该报废单提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.temp.isAutoCommit="true",Object(n.addWarehouseOutScrapBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.temp.isAutoCommit="false",Object(n.addWarehouseOutScrapBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",warehouseName:"",warehouseId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCount:""};o.productId=a.productId.trim(),null!=a.warehouseName&&a.warehouseName.trim().length>0&&(o.warehouseName=a.warehouseName.trim()),null!=a.warehouseId&&a.warehouseId.trim().length>0&&(o.warehouseId=a.warehouseId.trim()),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.stockCount=a.stockCount,o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"操作类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouseBySimple_scrapBySimple_createScrapBySimple_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAdd.vue";t.default=c.exports},"/NOw":function(e,t,i){"use strict";var a=i("QW4X");i.n(a).a},"/RvK":function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("Oyvg"),i("rGqo");var a=i("ddId"),o=i("rwyD"),n=(i("a0Xs"),i("z0WU")),l=i("mSNy");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.productPrice" @change="colConfig.productPriceChange(scope.row,scope.$index)" />\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},d={components:{},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{fieldCode:"productCode,productName,productSpec,productGenreName,orderUnitName,orderCount,productPrice,productSum,deliverDate,remark",rules:{customerName:[{required:!0,message:"请选择客户名称",trigger:"change"}],receiptTypeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.temp.receiptType.length<=0?a(new Error("请选择发票类型")):a()}}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}],orderDate:[{required:!0,message:"请填写下单日期",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{id:"",discountSum:"",advanceSum:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],selectList:null,initConfigs:{tableOperates:{}},configs:{topBarBtnList:[],tableConfigs:[],showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1}},created:function(){this.temp=this.initData.temp,this.initTable(null,this.initData.temp.id)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==l.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==l.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==l.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==l.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"productPrice"===e.prop&&(e.component=c,e.productPriceChange=t.productPriceChange)}),this.internationalConfig(),e},internationalConfig:function(){"en"==l.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==l.a.locale&&(this.initConfigs.tableOperates.label="操作")},initTable:function(e,t){var i=this;this.$loading({spinner:"preloader",text:""}),Object(o.listPageSaleOrderDetail)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}({},this.tempQuery,{fieldCode:this.fieldCode,parentId:t,pageNo:this.pageNo})).then(function(e){i.getListPage(e),i.$loading().close()}).catch(function(e){i.$loading().close()})},dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},checkNumber:function(e,t){null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t+"("+e+") 输入错误，请输入大于零的正整数或(1,2)位小数！"})},checkDiscountSum:function(e){this.checkNumber(e,"折扣金额")},checkAdvanceSum:function(e){null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&this.checkNumber(e,"预付款")},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i].productPrice;null!=a&&0!=a.trim().length||(t=t+"第 "+(i+1)+" 行: 单价为空或空字符串！"),null!=a&&a.trim().length>0&&!this.isNumberByValue(a.trim())&&(t=t+"第 "+(index+1)+" 行: 单价("+a+") 输入错误，请输入大于零的正整数或(1,2)位小数！")}return t},saveSaleOrder:function(){var e,t=this,i=this.temp.discountSum;null!=i&&i.trim().length>0&&this.checkNumber(i,"折扣金额");var o=this.temp.advanceSum;null!=o&&o.trim().length>0&&this.checkNumber(o,"预付款");var n=this.checkColumn(this.tableData);if(null!=n&&n.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:n});else{for(var l=[],s=0;s<this.tableData.length;s++){var r=this.tableData[s],c={id:"",productPrice:"",productSum:""};c.id=r.id,c.productPrice=r.productPrice,c.productSum=r.productSum,l.push(c)}e=JSON.stringify(l),this.temp.dtlJsonStr=e,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,Object(a.updateSaleOrderByAudit)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+\\.{0,1}[0-9]{0,2}$").test(e.trim())},productPriceChange:function(e,t){var i=e.productPrice;if(null!=i&&i.trim().length>0&&!this.isNumberByValue(i))this.$message({showClose:!0,message:"第 "+(t+1)+" 行: 单价("+i+") 输入错误，请输入大于零的正整数或(1,2)位小数！",type:"warning",duration:5e3});else{var a=e.count;if(null!=a&&a.trim().length>0){if(!this.isNumberByValue(a))return void this.$message({showClose:!0,message:"第 "+(t+1)+" 行: 订购数量("+a+") 输入错误，请输入大于零的正整数或(1,2)位小数！",type:"warning",duration:5e3});e.productSum=(a.trim()*i.trim()).toFixed(2)}}},closeDialog:function(e){}},watch:{pageNo:function(){this.initTable("add","")}}},u=i("KHd+"),p=Object(u.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"客户名称:",prop:"customerName"}},[i("el-input",{staticStyle:{width:"230px"},attrs:{disabled:!0},model:{value:e.temp.customerName,callback:function(t){e.$set(e.temp,"customerName",t)},expression:"temp.customerName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发票类型:",prop:"receiptTypeName"}},[i("el-input",{staticStyle:{width:"230px"},attrs:{disabled:!0},model:{value:e.temp.receiptTypeName,callback:function(t){e.$set(e.temp,"receiptTypeName",t)},expression:"temp.receiptTypeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("el-input",{staticStyle:{width:"230px"},attrs:{disabled:!0},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"下单日期:",prop:"orderDate"}},[i("el-date-picker",{staticStyle:{width:"230px"},attrs:{type:"date",placeholder:"下单日期","value-format":"yyyy-MM-dd",disabled:!0},model:{value:e.temp.orderDate,callback:function(t){e.$set(e.temp,"orderDate",t)},expression:"temp.orderDate"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"约定交期:",prop:"deliverDate"}},[i("el-date-picker",{staticStyle:{width:"230px"},attrs:{type:"date",placeholder:"约定交期","value-format":"yyyy-MM-dd",disabled:!0},model:{value:e.temp.deliverDate,callback:function(t){e.$set(e.temp,"deliverDate",t)},expression:"temp.deliverDate"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"230px"},attrs:{disabled:!0},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"折扣金额:",prop:"discountSum"}},[i("el-input",{staticStyle:{width:"230px"},on:{change:e.checkDiscountSum},model:{value:e.temp.discountSum,callback:function(t){e.$set(e.temp,"discountSum",t)},expression:"temp.discountSum"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"预付款:",prop:"advanceSum"}},[i("el-input",{staticStyle:{width:"230px"},on:{change:e.checkAdvanceSum},model:{value:e.temp.advanceSum,callback:function(t){e.$set(e.temp,"advanceSum",t)},expression:"temp.advanceSum"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}})],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{height:"450px",width:"96%","margin-left":"2%"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveSaleOrder}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);p.options.__file="dialogEdit.vue";t.default=p.exports},"/S0c":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("xfY5");var a=i("nX/d");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{afterSetCount:[{required:!0,message:"请填写调整后数量！",trigger:"change"},{type:"number",message:"数量必须为数字值"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.beforeSetCount=this.initData.temp.setCount)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,Object(a.updateSetCount)({id:t.temp.warehouseOutId,setCount:t.temp.afterSetCount}).then(function(i){t.dialogLoading=!1,0===i.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,e.initData.temp.setCount=new Number(t.temp.afterSetCount).toFixed(2))}).catch(function(e){t.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"安全库存调整",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"150px"}},[i("el-form-item",{attrs:{label:"调整前套数:",prop:"beforeSetCount"}},[i("el-input",{staticStyle:{width:"140px"},attrs:{disabled:!0},model:{value:e.temp.beforeSetCount,callback:function(t){e.$set(e.temp,"beforeSetCount",t)},expression:"temp.beforeSetCount"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"调整后套数:",prop:"afterSetCount"}},[i("el-input",{staticStyle:{width:"140px"},model:{value:e.temp.afterSetCount,callback:function(t){e.$set(e.temp,"afterSetCount",e._n(t))},expression:"temp.afterSetCount"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogEditSetCount.vue";t.default=s.exports},"/Zso":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("6wnd");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{outExecuteId:"",productId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){this.outExecuteId=this.initData.outExecuteId,this.productId=this.initData.productId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.rebackWarehouseOutExecuteBySimple)({outExecuteId:e.outExecuteId,productId:e.productId,remark:e.temp.remark}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退单原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogRebackWarehouseOut.vue";t.default=s.exports},"/m+N":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo"),i("91GP"),i("pIFo");var a=i("f/WR"),o=i("uTIz"),n=i("F4/0");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{transferTable:a.a,searchBar:o.a,dialogAdd:n.default},name:"productTableDialog",props:["initData","visible"],data:function(){return{sourceWarehouseId:"",fieldCode_default:"code,name,spec,unitName,genreName,stockCount,safetyCount,lockCount,productStockCount",isConfirm:!1,temp:{},tempLable:{},rules:{},guid:"",tempQuery:{},searchList:[{label:"货品编码",type:"input",ruleType:"string",mapKey:"code",configs:{},placeholder:"请输入货品编码"},{label:"货品名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"请输入货品名称"},{label:"规格型号",type:"input",ruleType:"string",mapKey:"spec",configs:{},placeholder:"请输入规格型号"},{label:"计量单位",type:"input",ruleType:"string",mapKey:"unitName",configs:{},placeholder:"请输入计量单位"},{label:"货品属性",type:"select",ruleType:"string",mapKey:"genreName",configs:{clearable:!0,name:"",options:[{value:"成品",label:"成品"},{value:"原材料",label:"原材料"},{value:"辅料",label:"辅料"},{value:"半成品",label:"半成品"}]},placeholder:"请选择"}],searchConfig:{hideSearchSwitch:!1},resState:"",dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",table_style:"",sourceWarehouseId:"",productIds:"",title:"",data:null},pageData:null,pageNo:1,btnList:[{name:"确定",isShow:!0,state:!0,method:this.toAddWarehouseIn},{name:"取消",state:!1,method:this.closeWin,isShow:!0}],apiData:{apiName:"listPageProducts",params:{}},tableSelectList:[],stateBtnData:{},tableConfigs:{showIndex:!0},tempList:[]}},created:function(){this.sourceWarehouseId=this.initData.sourceWarehouseId;var e=this.fieldCode_default;null!=this.initData.fieldCode&&this.initData.fieldCode.trim().length>0&&(e=this.initData.fieldCode.trim());var t="";null!=this.initData.queryStr&&(t=this.initData.queryStr);var i="";i=null!=this.initData.orderStr?this.initData.orderStr:"prod.stock_count desc";var a="";if(null!=this.initData.data&&this.initData.data.length>0)for(var o=0;o<this.initData.data.length;o++){var n=this.initData.data[o];null!=n.productId&&n.productId.trim().length>0&&(a=a+n.productId+",")}var l=!0;null!=this.initData.isNeedRepeat&&(l=this.initData.isNeedRepeat),l||null!=a&&a.trim().length>0&&(t="prod.id not in ("+(a="'"+(a=a.substring(0,a.lastIndexOf(","))).replace(",","','")+"'")+")");var s="false";null!=this.initData.isNeedCustomerPrice&&this.initData.isNeedCustomerPrice&&(s="true");var r="";null!=this.initData.customerId&&this.initData.customerId.trim().length>0&&(r=this.initData.customerId.trim()),this.apiData.params={fieldCode:e,queryStr:t,orderStr:i,isNeedCustomerPrice:s,customerId:r,isdisable:"1",isNeedNotInGenreSpare:"true"}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{tableHeight:function(){},dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.apiData.params=Object.assign({},this.apiData.params,e)},dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},toAddWarehouseIn:function(){var e="";if(null!=this.tempList&&0!=this.tempList.length||(e="请至少选择一行数据！"),e.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:e});else{var t=.6*document.body.clientWidth;this.dialogData.dialog_width=t+"px";var i=.75*(.618*t)+"px";this.dialogData.table_style="height:"+i+";width: 96%;margin-left: 2%;";var a="";this.tempList.forEach(function(e){var t=e.id;null!=t&&t.trim().length>0&&(a=a+t.trim()+",")}),this.dialogData.sourceWarehouseId=this.sourceWarehouseId,this.dialogData.productIds=a,this.dialogData.title="创建移库单",this.openDialogName="dialogAdd",this.showDialog=!0,this.inLinVisible=!0}},tableSelected:function(e){this.tempList=e},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,searchConfig:e.searchConfig},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{style:{"margin-top":e.searchList.length?"10px":"0"}},[i("transfer-table",{ref:"trabsferTables",attrs:{tableConfigs:e.tableConfigs,btnList:e.btnList,stateBtn:e.stateBtnData,apiData:e.apiData},on:{"table-selected":e.tableSelected}})],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogProduct.vue";t.default=c.exports},"/nWt":function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rGqo"),i("f3/d");var a=i("mSNy"),o=i("LRel"),n=i("4+6Z"),l=i("IWCP"),s=i("Yt3B"),r=i("cpQ/"),c=i("HhAy"),d=i("z0WU");function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){p(e,t,i[t])})}return e}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var m={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center" width="150px">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t    <el-row>\n      \t\t\t\t\t      <el-col :span="12"><el-button  v-show="colConfig.editBtns_isShow && scope.row.layer>0" type="text" class="btns" style="font-size: 12px;" @click="colConfig.editBtns(scope.row,scope.$index)">编辑</el-button></el-col>\n      \t\t\t\t\t      <el-col :span="12"><el-button  v-show="colConfig.addReplaceable_isShow && scope.row.childrenNum==1" type="text" class="btns" style="font-size: 12px;" @click="colConfig.addReplaceable(scope.row,scope.$index)">新增替代物</el-button></el-col>\n      \t\t\t\t\t    </el-row>\n      \t\t\t\t\t    <el-row>\n                      <el-col :span="12"><el-button  v-show="colConfig.deleteBtns_isShow && scope.row.layer>0" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteBtns(scope.row,scope.$index)">删除</el-button></el-col>\n                      <el-col :span="12"><el-button  v-show="colConfig.viewReplaceable_isShow && scope.row.childrenNum==1" type="text" class="btns" style="font-size: 12px;" @click="colConfig.viewReplaceable(scope.row,scope.$index)">查看替代物</el-button></el-col>\n                    </el-row>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},h={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" width="500" align="center">\n\t\t\t      <div slot-scope="scope">\n    \t\t\t\t\t\t{{scope.row.prodInfo}}\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},g={name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:"",pathId:"",bomTreeId:"",bomId:""},userInfo:null,topBarBtnList:[{name:"查询",icon:"search",method:this.queryTable},{name:"重置",icon:"refresh",plain:!0,method:this.resetQueryTemp}],initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",btnName:"编辑",isPropName:!0,component:m,editBtns:this.editBtns,editBtns_isShow:!0,deleteBtns:this.deleteBtns,deleteBtns_isShow:!0,addReplaceable:this.addReplaceable,addReplaceable_isShow:!0,viewReplaceable:this.viewReplaceable,viewReplaceable_isShow:!0}},configs:{topBarBtnList:[{name:"新增",nameEn:"add",isShow:!0,icon:"add",method:this.addNew}],tableConfigs:[],showCheckBox:!1,showIndex:!1,isSingle:!1},tableData:[],selectList:[],queryParms:[{name:"code"},{name:"name"}],tempQuery:{},tempLable:{},temp:{},pageData:null,pageNo:1,openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null,selectTree:null}}},components:{dialogReplaceableView:r.default,dialogReplaceableAdd:s.default,dialogMutiAdd:l.default,dialogTreeAdd:n.default,dialogTreeEdit:o.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.configs.isSingle=this.initData.isSingle,this.userInfo=this.$storage.get("userInfo"),this.temp=JSON.parse(JSON.stringify(this.initData.temp)),this.initTree()},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},queryTable:function(){this.pageNo=1,this.initTable(this.selectTree.id,this.selectTree.layer)},initTree:function(){var e=this;e.dialogTopLoading=!0,Object(c.getBomTree)({isreplaceable:"0",bomId:e.initData.temp.id,prodId:e.initData.temp.prodId,orderStr:"product.name asc"}).then(function(t){var i=[],a=t.result.treeList;e.selectTree={pid:a.pid,id:a.id,layer:a.layer,name:a.name,pathId:a.pathId,bomTreeId:a.bomTreeId,bomId:a.bomId},i.push(a),e.treeData=i,e.treeNodes=[],Object(d.c)(e.treeData,e.showDisableDept,e.filterTextDept,e.treeNodes),e.$nextTick(function(){if(e.treeNodes.length>0){var t=e.treeNodes[0];e.selectTree={pid:t.pid,id:t.id,layer:t.layer,name:t.name,pathId:t.pathId,bomTreeId:t.bomTreeId,bomId:t.bomId}}e.initTable(e.selectTree.id,e.selectTree.layer,!0)})}).catch(function(t){e.dialogTopLoading=!1})},initTable:function(e,t,i){var a=this;Object(c.listPageBomTrees)(u({},a.tempQuery,{isreplaceable:"0",bomId:a.initData.temp.id,prodId:e,pageNo:a.pageNo,prodColumnKey:"code,name,spec,property",orderStr:"product.name asc"})).then(function(e){a.getListPage(e),i&&(a.dialogTopLoading=!1)}).catch(function(e){a.dialogTopLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(d.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!1,this.configs.showIndex=!0,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var o=e[i];o.indexOf("_")>0&&("en"==a.a.locale?o=o.substring(o.indexOf("_")+1):"zh"==a.a.locale&&(o=o.substring(0,o.indexOf("_")))),t.tempLable[i]=o}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==a.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==a.a.locale&&(e.label=t.substring(0,t.indexOf("_")))),"货品名称"===e.label&&(e.component=h)}),e.push(this.initConfigs.tableOperates),e},addReplaceable:function(e,t){this.dialogData.temp=JSON.parse(JSON.stringify(e)),this.dialogData.title="新增替代物("+e.name+")",this.openDialogName="dialogReplaceableAdd",this.showDialog=!0,this.visibleState=!0},viewReplaceable:function(e,t){this.dialogData.temp=JSON.parse(JSON.stringify(e)),this.dialogData.title="查看替代物("+e.name+")",this.openDialogName="dialogReplaceableView",this.showDialog=!0,this.visibleState=!0},addNew:function(){this.resetTemp(),this.selectTree.id?(this.dialogData.selectTree=this.selectTree,this.dialogData.title="新增(上级："+this.selectTree.name+")",this.openDialogName="dialogMutiAdd",this.showDialog=!0,this.visibleState=!0):this.$message({type:"info",message:"请选择上级节点"})},editBtns:function(e,t){this.resetTemp(),this.selectTree.id?(this.dialogData.selectTree=this.selectTree,this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.temp=this.temp,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑",this.openDialogName="dialogTreeEdit",this.showDialog=!0,this.visibleState=!0):this.$message({type:"info",message:"请选择上级节点"})},deleteBtns:function(e,t){var i=this;i.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.deleteBomTree)(e.id).then(function(e){0===e.code&&(i.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),i.refreshTable())}).catch(function(e){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},resetTemp:function(){for(var e in this.temp)this.temp[e]=""},changeIsDefault:function(e,t){},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.refreshTable()},refreshTable:function(){var e=this;e.$axios.all([Object(c.listPageBomTrees)(u({},e.tempQuery,{isreplaceable:"0",bomId:e.initData.temp.id,prodId:e.selectTree.id,pageNo:e.pageNo,prodColumnKey:"code,name,spec,property",orderStr:"product.name asc"})),Object(c.getBomTree)({isreplaceable:"0",bomId:e.initData.temp.id,prodId:e.initData.temp.prodId,orderStr:"product.name asc"})]).then(e.$axios.spread(function(t,i){e.getListPage(t);var a=i.result.treeList,o=[];o.push(a),e.treeData=o,e.$nextTick(function(){})})).catch(function(e){})},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name,pathId:e.nodeData.pathId,bomTreeId:e.nodeData.bomTreeId,bomId:e.nodeData.bomId},this.pageNo=1,this.initTable(this.selectTree.id,this.selectTree.layer)},dataBridge:function(e){this.selectList=e},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]=""}},computed:{dialogName:function(){return this.openDialogName}},watch:{pageNo:function(){this.initTable(this.selectTree.id,this.selectTree.layer)}}},f=(i("Lkhd"),i("KHd+")),b=Object(f.a)(g,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1200px",layoutType:1},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("el-row",[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-row",[i("el-col",{attrs:{span:2}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-col",{staticStyle:{padding:"10px"},attrs:{span:22}},[e._v("\n                  "),i("b",[e._v("货品：")]),e._v(e._s(e.initData.temp.prodInfo)+"\n                  "),i("b",[e._v("BOM编码：")]),e._v(e._s(e.initData.temp.code)+"\n                  "),i("b",[e._v("BOM名称：")]),e._v(e._s(e.initData.temp.name)+"\n            ")])],1)],1),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,pageData:e.pageData,currentpage:e.pageNo,isSortable:!1},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",position:"relative",top:"5px","padding-bottom":"10px"}},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)],1)],1)},[],!1,null,null,null);b.options.__file="dialogView.vue";t.default=b.exports},"/rIY":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("9rC1");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写名称",trigger:"change"}]},typeData:{},customerTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"customerType",isglobal:"0",isNeetOneLayer:"true"}},defaultSelected:[]},supplierTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"supplierType",isglobal:"0",isNeetOneLayer:"true"}},defaultSelected:[]},provinceData:{data:{selectUrl:"/system/dictionary/treeDictionarys",selectParm:{dictionaryKey:"area",cascade:"true"}},defaultSelected:[]},openDialogName:"",showDialog:!1,inLinVisible:!1}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[])},provinceSelect:function(e){e&&e.length>0?(this.temp.province=e[e.length-1],this.provinceData.defaultSelected=e):(this.temp.province=[],this.provinceData.defaultSelected=[])},dialogOpen:function(){var e=this,t=this.temp.genre;"df7cb67fca4148bc9632c908e4a7fdea"==t?(this.typeData=this.customerTypeData,this.temp.type=this.typeData.defaultSelected[0]):"49c0a7ebcb4c4175bd5195837a6a9a13"==t&&(this.typeData=this.supplierTypeData,this.temp.type=this.typeData.defaultSelected[0]),this.temp.province=this.provinceData.defaultSelected[0],this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;this.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,Object(a.addCustomer)(t.temp).then(function(i){t.dialogLoading=!1,0===i.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok",genre:e.temp.genre}))}).catch(function(e){t.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"80%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"80px"}},[i("el-form-item",{attrs:{label:"属性:",prop:"genreName"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{disabled:!0},model:{value:e.temp.genreName,callback:function(t){e.$set(e.temp,"genreName",t)},expression:"temp.genreName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"160px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类型:",prop:"typeName"}},[i("base-input-select",{staticStyle:{width:"160px"},attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地区:",prop:"provinceName"}},[i("base-input-select",{staticStyle:{width:"160px"},attrs:{data:e.provinceData.data},on:{callback:e.provinceSelect},model:{value:e.provinceData.defaultSelected,callback:function(t){e.$set(e.provinceData,"defaultSelected",t)},expression:"provinceData.defaultSelected"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},"/vRE":function(e,t,i){},"/xN3":function(e,t,i){"use strict";i("91GP"),i("KKXr"),i("Z2Ku"),i("L9s1"),i("rGqo"),i("yt8O"),i("RW0V");var a=i("uTIz"),o=i("WIyV"),n=(i("XfO3"),i("HEwt"),i("a1Th"),i("rE2o"),i("ioFf"),i("xfY5"),i("Zni2")),l=i.n(n),s=i("XXtD"),r=(i("75ce"),i("lLGD"),i("0o9m"),i("AH3D"),i("Ynxi"),i("zixQ"),i("4Cjf"));function c(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var d={name:"chart-sales-report-trend",components:{chart:l.a,ChartMask:s.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(e){var t=e.split("-");return t[1]=t[1]-0+"月",t.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,c(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var e=Math.max.apply(Math,c(this.salesNumber))-0,t=(Math.floor(e+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,c(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var e=Math.max.apply(Math,c(this.salesVolume))-0,t=(Math.floor(e+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销售趋势图",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["销售量","销售额"],left:5},xAxis:[{type:"category",data:this.setMonths,axisPointer:{type:"shadow"},axisTick:{show:!1}}],yAxis:[{type:"value",name:"销售量",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisTick:{show:!1},splitLine:{show:!1},axisLabel:{formatter:"{value}"},nameTextStyle:{color:"transparent"}},{show:!1,type:"value",name:"销售额",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisLabel:{formatter:"{value}"}}],series:[{name:"销售量",type:"bar",data:this.salesVolume},{name:"销售额",type:"line",yAxisIndex:1,itemStyle:{normal:{barBorderRadius:0,label:{show:!0,position:"top",formatter:function(e){return e.value||0}}}},data:this.salesNumber}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(e,t){return!!(e&&e.length&&t&&t.length)&&(e[0]>=t[0]&&t[1]>=e[1])},resetResult:function(e){var t=JSON.parse(this.resultData);this.chartData=t.filter(function(t){if(t.month>=e[0]&&e[1]>=t.month)return!0}),this.formatChartData()},formatChartData:function(){var e=this.chartData;e.length&&(this.salesVolume=e.map(function(e){return e.salesVolume-0}),this.salesNumber=e.map(function(e){return e.salesNumber-0}),this.months=e.map(function(e){return e.date}))},httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.resultData=JSON.stringify(r.a.trend.result||[]),e.chartData=r.a.trend.result||[],e.formatChartData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.resultData=JSON.stringify(t.result.varList||[]),e.chartData=t.result.varList||[],e.formatChartData(),e.loading=!1}).catch(function(t){e.loading=!1})}},created:function(){this.httpRequest()},render:function(e){return e("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?e("div",[e("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):e("chart-Mask",{attrs:{loading:this.loading}})])}},u=(i("f3/d"),i("wDdD"),{name:"comprehensive-sale-analysis",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}}},components:{chart:l.a,ChartMask:s.a},data:function(){return{chartTitles:["产品销售额","客户销售额","员工销售额","产品销量","客户销量","员工销量"],chartNames:["产品","客户","员工","产品","客户","员工"],chartKeys:["productVolume","customerVolume","staffVolume","productNumber","customerNumber","staffNumber"],chartApis:["salesTrendProductByDate","salesTrendCustomerByDate","salesTrendEmployeeByDate","salesTrendProductByDate","salesTrendCustomerByDate","salesTrendEmployeeByDate"],baseOption:{},chartData:{},loading:[!0,!0,!0,!0,!0,!0]}},computed:{defaultOption:function(){var e=this,t=this;return this.chartKeys.map(function(i,a){return{title:{text:e.chartTitles[a],subtext:e.apiObj.params.date,textStyle:{color:"#000000",fontSize:14},subtextStyle:{fontSize:12,color:"#B0B0B0"},x:"center",y:"center"},tooltip:{trigger:"item",formatter:function(e){return"".concat(e.seriesName,"：").concat(e.name,"<br/>").concat(t.chartTitles[a],"：").concat(e.data[a>2?"volume":"number"])}},series:[{name:e.chartNames[a],type:"pie",radius:["50%","95%"],center:["50%","50%"],data:e.chartData[i],label:{position:"inner",formatter:"{c}%"},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})},setChartHeight:function(){var e=(parseInt(this.height)-160)/2;return e>200?e:200}},methods:{httpRequest:function(){var e=this;this.loading=[!0,!0,!0,!0,!0,!0],this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.chartData=e.tempCreateData(),e.loading=[!1,!1,!1,!1,!1,!1]},3e3)},requestBody:function(e){e.chartApis.forEach(function(t,i){e.$api[t](Object.assign({},e.apiObj.params,{type:i>2?"number":"volume"})).then(function(t){var a=(t.result||[]).map(function(e){return{name:e.name,value:e.proportion,number:e.number,volume:e.volume}});e.$set(e.chartData,e.chartKeys[i],a),e.loading.splice(i,1,!1)}).catch(function(t){e.loading.splice(i,1,!1)})})},tempCreateData:function(){var e=this,t={};return this.chartKeys.forEach(function(i){t[i]=e.genData(6)}),t},genData:function(e){for(var t=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],i=[],a=[],o={},n=0;n<e;n++)name=Math.random()>.65?l(4,1)+"·"+l(3,0):l(2,1),i.push(name),a.push({name:name,value:Math.round(1e5*Math.random())}),o[name]=n<6;return a;function l(e,i){for(var a=Math.ceil(Math.random()*e+i),o=[],n=0;n<a;n++)o.push(t[Math.round(Math.random()*t.length-1)]);return o.join("")}}},created:function(){this.httpRequest()},render:function(e){var t=this;return e("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.chartTitles.map(function(i,a){return e("el-col",{attrs:{span:8},class:"chartViews"},[e("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:t.loading[a]}]},[e("div",{style:"text-align:center;"},[i]),e("div",{style:{height:"".concat(t.setChartHeight,"px"),position:"relative"}},[t.chartData[t.chartKeys[a]]&&t.chartData[t.chartKeys[a]].length?e("chart",{style:{height:"100%",width:"100%"},attrs:{options:t.defaultOption[a]}}):e("chart-Mask",{attrs:{loading:t.loading[a]}})])])])})])}}),p=i("KA1N"),m={name:"charts-sale-comprehensive",components:{baseTable:o.a,searchBar:a.a,trend:d,comprehensiveAnalysis:u},data:function(){return{guid:"",searchList:[{label:"统计周期",type:"radio",mapKey:"cycle",configs:{options:["日","月","年"],defaultValue:0}},{label:"日期范围",type:"date",mapKey:"date",configs:{clearable:!0,name:"",type:"daterange",pickerOptions:{disabledDate:[null,Object(p.a)()],hideShortcuts:!0},dynamic:{key:"cycle",options:{0:"daterange",1:"monthrange",2:"monthrange"}}},placeholder:"请选择"}],searchObj:{},tableConfigList:[{apiObj:{apiName:"salesTrendQueryByDMY",params:{}},showCheckBox:!0,useSummary:!0,isSingle:!0}],userSelectedList:[],dialogVisible:[!1,!1],dialogIndex:0,trendApiObj:{apiName:"salesTrendQueryByDMY",params:{}},analysisObj:{apiName:"salesTrendProductByDate",params:{}}}},computed:{systemInfo:function(){return this.$store.getters.systemInfo},size:function(){return this.$store.getters.size},tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0)-36+"px":"100%"},formatParams:function(){var e={cycle:"D",startDate:Object(p.a)("YYYY-MM-DD",this.setDate("D",!0)),endDate:Object(p.a)("YYYY-MM-DD",this.setDate("D",!1))},t=Object.keys(this.searchObj);if(t.length){if(t.includes("cycle"))switch(this.searchObj.cycle){case 0:e.cycle="D";break;case 1:e.cycle="M";break;case 2:e.cycle="Y";break;default:e.cycle="D"}t.includes("date")&&this.searchObj.date.length?(e.startDate=Object(p.a)("YYYY-MM-DD",this.searchObj.date[0]),e.endDate=Object(p.a)("YYYY-MM-DD",this.searchObj.date[1])):"D"!==e.cycle&&(delete e.startDate,delete e.endDate)}return e}},methods:{setLastDate:function(e){return["01","03","05","07","08","10","12"].includes(e)?"31":"02"==e?((new Date).getFullYear()-0)%4==0?"29":"28":"30"},setDate:function(e,t){var i=Object(p.a)().split("-");return"D"==e&&(i[2]=t?"01":i[2]),"M"!=e&&"Y"!=e||(i[2]=t?"01":this.setLastDate(i[1]),i[1]=t?"01":i[1]),i.join("-")},sendGuid:function(e){this.guid=e},searchMap:function(e){this.userSelectedList=[],this.searchObj=e,this.tableConfigList[0].apiObj.params=Object.assign({},this.formatParams),this.trendApiObj.params=Object.assign({},this.formatParams)},databridge:function(e){this.userSelectedList=e,this.userSelectedList.length&&(this.analysisObj.params={date:this.userSelectedList[0].date})},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},showSaleTrend:function(e){this.resetSaleTrendData(),this.dialogIndex=e,this.dialogVisible[this.dialogIndex]=!0},resetSaleTrendData:function(){this.dialogVisible=[!1,!1]}},created:function(){this.tableConfigList[0].apiObj.params=Object.assign({},this.formatParams),this.trendApiObj.params=Object.assign({},this.formatParams)}},h=(i("UmAM"),i("KHd+")),g=Object(h.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sale-comprehensive"},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,inChart:!0},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",[i("el-button",{attrs:{type:"primary",size:e.size},on:{click:function(t){e.showSaleTrend(0)}}},[e._v("销售趋势")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:e.size,disabled:!e.userSelectedList.length},on:{click:function(t){e.showSaleTrend(1)}}},[e._v("分析")])],1),e._v(" "),i("el-row",{staticStyle:{"border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.tableHeight,"margin-top":e.searchList.length?"10px":"0"}},[i("base-table",{ref:"customBaseTable",attrs:{tableConfigList:e.tableConfigList},on:{databridge:e.databridge,callmethod:e.callMethod}})],1),e._v(" "),i("el-dialog",{attrs:{title:"销售趋势图","close-on-click-modal":!1,visible:e.dialogVisible[e.dialogIndex],width:"mini"===e.size?"800px":"1200px"},on:{"update:visible":function(t){e.$set(e.dialogVisible,e.dialogIndex,t)}}},[e.dialogVisible[0]?[i("trend",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.trendApiObj}})]:e.dialogVisible[1]?[i("comprehensive-analysis",{attrs:{height:e.systemInfo.clientHeight?.7*e.systemInfo.clientHeight+"px":"400px",apiObj:e.analysisObj}})]:e._e(),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.resetSaleTrendData}},[e._v("关 闭")])],1)],2)],1)},[],!1,null,"793ee3fc",null);g.options.__file="index.vue";t.a=g.exports},"01ds":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("rmg0");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{dialogAddCustomerInvoice:i("SwnK").default,dialogAdd:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{customerId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{companyName:"",invoiceNumber:"",address:"",bankName:"",bankCode:"",mobile:"",remark:"",customerId:"",customerInvoiceId:""},tempLable:{},tempNotEditable:{},rules:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{temp:{},title:""},CustomerInvoiceDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择开票信息",tableUrl:"/base/customerInvoice/listPageCustomerInvoices",tableParm:{fieldCode:"companyName,invoiceNumber,address,bankName,mobile,remark,isdefaultStr",customerId:this.initData.customerId},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.customerInvoiceId=this.temp.id)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogData.temp=JSON.parse(JSON.stringify(e.temp)),e.dialogData.title="选择订单",e.openDialogName="dialogAdd",e.showDialog=!0,e.inLinVisible=!0)})},customerInvoiceSelect:function(e){e[0]&&(this.temp.customerInvoiceId=e[0].id,this.temp.customerId=this.initData.customerId,this.temp.companyName=e[0].companyName,this.temp.invoiceNumber=e[0].invoiceNumber,this.temp.address=e[0].address,this.temp.bankName=e[0].bankName,this.temp.bankCode=e[0].bankCode,this.temp.mobile=e[0].mobile,this.temp.remark=e[0].remark)},addCustomerInvoice:function(){this.temp={},this.temp.customerId=this.initData.customerId,this.dialogData.customerId=this.initData.customerId,this.dialogData.temp=JSON.parse(JSON.stringify(this.temp)),this.dialogData.title="新增开票信息",this.openDialogName="dialogAddCustomerInvoice",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"450px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"75%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"75px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"companyName"}},[i("base-input-option",{staticStyle:{display:"inline-block"},attrs:{disabled:!0,dialog:e.CustomerInvoiceDialog.dialog},on:{callback:e.customerInvoiceSelect},model:{value:e.temp.companyName,callback:function(t){e.$set(e.temp,"companyName",t)},expression:"temp.companyName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomerInvoice}})],1),e._v(" "),i("el-form-item",{attrs:{label:"税号:",prop:"invoiceNumber"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.invoiceNumber,callback:function(t){e.$set(e.temp,"invoiceNumber",t)},expression:"temp.invoiceNumber"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地址:",prop:"address"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.address,callback:function(t){e.$set(e.temp,"address",t)},expression:"temp.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电话:",prop:"mobile"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.mobile,callback:function(t){e.$set(e.temp,"mobile",t)},expression:"temp.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开户银行:",prop:"bankName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.bankName,callback:function(t){e.$set(e.temp,"bankName",t)},expression:"temp.bankName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"账号:",prop:"bankCode"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.bankCode,callback:function(t){e.$set(e.temp,"bankCode",t)},expression:"temp.bankCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:"2",disabled:!0},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEditCustomerInvoice.vue";t.default=s.exports},"01lf":function(e,t,i){"use strict";i.r(t);i("Oyvg");var a=i("9wPf"),o={components:{},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{amount:[{required:!0,trigger:"change",validator:function(t,i,a){e.isNumberByValue(i)?(0==i&&a(new Error("请输入大于零的正整数或(1,2)位小数！")),a()):a(new Error("请输入大于零的正整数或(1,2)位小数！"))}}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.formData=this.initData.rowData},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){e.$confirm("是否提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.formData.isAutoCommit="true",Object(a.updateFinanceBillByPurchase)({id:e.formData.id,remark:e.formData.remark,isAutoCommit:e.formData.isAutoCommit}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"设定成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.formData.isAutoCommit="false",Object(a.updateFinanceBillByPurchase)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"设定成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})})},closeDialog:function(e){}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"供应商编码:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.customerCode,callback:function(t){e.$set(e.formData,"customerCode",t)},expression:"formData.customerCode"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"供应商名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.customerName,callback:function(t){e.$set(e.formData,"customerName",t)},expression:"formData.customerName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"金额:",prop:"amount"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="editFinanceBillByPurchase.vue";t.default=l.exports},"0CID":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("91GP"),i("pIFo");var a=i("f/WR"),o=i("uTIz");i("xMja");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{transferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{fieldCode:"code,name,spec,unitName,genreName,stockCount,safetyCount,lockCount,productStockCount",isConfirm:!1,temp:{productIds:""},tempLable:{},rules:{},guid:"",tempQuery:{},searchList:[{label:"货品编码",type:"input",ruleType:"string",mapKey:"code",configs:{},placeholder:"请输入货品编码"},{label:"货品名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"请输入货品名称"},{label:"规格型号",type:"input",ruleType:"string",mapKey:"spec",configs:{},placeholder:"请输入规格型号"},{label:"计量单位",type:"input",ruleType:"string",mapKey:"unitName",configs:{},placeholder:"请输入计量单位"}],searchConfig:{hideSearchSwitch:!1},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},pageData:null,pageNo:1,btnList:[{name:"确定",isShow:!0,state:!0,method:this.toAddWarehouseIn},{name:"取消",state:!1,method:this.closeWin,isShow:!0}],apiData:{apiName:"listPageProducts",params:{}},tableSelectList:[],stateBtnData:{},tableConfigs:{showIndex:!0},tempList:[]}},created:function(){var e="";if(null!=this.initData.data&&this.initData.data.length>0)for(var t=0;t<this.initData.data.length;t++){var i=this.initData.data[t];null!=i.productId&&i.productId.trim().length>0&&(e=e+i.productId+",")}this.temp.productIds=e;var a="";null!=this.initData.queryStr&&(a=this.initData.queryStr);var o="";o=null!=this.initData.orderStr?this.initData.queryStr:"prod.stock_count desc";var n=!0;null!=this.initData.isNeedRepeat&&(n=this.initData.isNeedRepeat),n||null!=e&&e.trim().length>0&&(a="prod.id not in ("+(e="'"+(e=e.substring(0,e.lastIndexOf(","))).replace(",","','")+"'")+")"),this.apiData.params={fieldCode:this.fieldCode,isNeedGenreSpare:"true",queryStr:a,orderStr:o,isdisable:"1"}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{tableHeight:function(){},dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.apiData.params=Object.assign({},e),this.apiData.params.fieldCode=this.fieldCode},dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{isConfirm:this.isConfirm,selectList:this.tempList})},toAddWarehouseIn:function(){this.isConfirm=!0,this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},tableSelected:function(e){this.tempList=e},closeDialog:function(e){this.showDialog=!1}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{width:"100%"}},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,searchConfig:e.searchConfig},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{staticStyle:{height:"500px"},style:{"margin-top":e.searchList.length?"10px":"0"}},[i("transfer-table",{ref:"trabsferTables",attrs:{tableConfigs:e.tableConfigs,btnList:e.btnList,stateBtn:e.stateBtnData,apiData:e.apiData},on:{"table-selected":e.tableSelected}})],1)],1)],1)},[],!1,null,null,null);r.options.__file="selectProduct.vue";t.default=r.exports},"0Ga3":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("xiF3");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;e.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateTemplate)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:e.tempLable.code+":",prop:"code"}},[i("el-input",{attrs:{disabled:""},model:{value:e.temp.code,callback:function(t){e.$set(e.temp,"code",t)},expression:"temp.code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.name+":",prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},"0UjI":function(e,t,i){"use strict";i("rE2o"),i("ioFf"),i("91GP");var a=i("f/WR"),o=i("uTIz");i("xMja");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{transferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{isConfirm:!1,temp:{productIds:""},tempLable:{},rules:{},guid:"",tempQuery:{},searchList:[{label:"编码",type:"input",ruleType:"string",mapKey:"code",configs:{},placeholder:"请输入编码"},{label:"名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"请输入名称"}],searchConfig:{hideSearchSwitch:!1},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},pageData:null,pageNo:1,btnList:[{name:"确定",isShow:!0,state:!0,method:this.toAddWarehouseIn},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],apiData:{apiName:"listPageProducts",params:{}},stateBtnData:{},tableConfigs:{},tempList:[]}},created:function(){var e="";e=null!=this.initData.apiName?this.initData.apiName:"listPageProducts";var t="";t=null!=this.initData.fieldCode?this.initData.fieldCode:"code,name,spec,unitName,genreName,stockCount,safetyCount,lockCount,productStockCount,cdate";var i="";null!=this.initData.prodColumnKey&&(i=this.initData.prodColumnKey);var a="";null!=this.initData.queryStr&&(a=this.initData.queryStr);var o="";o=null!=this.initData.orderStr?this.initData.orderStr:"prod.stock_count desc",null!=this.initData.searchList&&this.initData.searchList.length>0&&(this.searchList=this.initData.searchList),this.apiData.apiName=e,this.apiData.params={fieldCode:t,prodColumnKey:i,queryStr:a,orderStr:o}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{tableHeight:function(){},dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.apiData.params=Object.assign({},this.apiData.params,e)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{isConfirm:this.isConfirm,selectList:this.tempList,pageName:"definedTableDialog"})},toAddWarehouseIn:function(){this.isConfirm=!0,this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},tableSelected:function(e){this.tempList=e},closeDialog:function(e){this.showDialog=!1}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"margin-top":"15px","margin-left":"10px"}},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,searchConfig:e.searchConfig},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{style:{"margin-top":e.searchList.length?"10px":"0"}},[i("transfer-table",{ref:"trabsferTables",attrs:{tableConfigs:e.tableConfigs,btnList:e.btnList,stateBtn:e.stateBtnData,apiData:e.apiData},on:{"table-selected":e.tableSelected}})],1)],1)],1)},[],!1,null,null,null);r.options.__file="definedTableDialog.vue";t.a=r.exports},"0VGJ":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},isShowDept:!1,isShowCust:!1,rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,DepartmentDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择部门",treeUrl:"/system/department/treeDepartments",treeParm:{},tableUrl:"/system/department/listPageDepartments",tableParm:{isdisable:"1",fieldCode:"code,name,deptTypeName,layer,parentName,remark"},temp:{}},dialogName:"dialogTreeOption"}},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择客户",treeUrl:"/system/dictionary/treeDictionarys",treeParm:{dictionaryKey:"customerSupplierGenre"},tableUrl:"/base/customer/listPageCustomers",tableParm:{},temp:{}},dialogName:"dialogTreeOption"}},formTemp:[]}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{changeVirtualGenre:function(){"1"==this.temp.virtualGenre?(this.isShowDept=!0,this.isShowCust=!1):"2"==this.temp.virtualGenre&&(this.isShowCust=!0,this.isShowDept=!1)},departmentSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualDeptId=e[0].id,this.temp.virtualDeptName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},customerSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualCustomerId=e[0].id,this.temp.virtualCustomerName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},dialogOpen:function(){var e=this;this.changeVirtualGenre(),"1"==this.temp.virtualGenre&&null!=this.temp.virtualDeptName&&this.temp.virtualDeptName.trim().length>0?this.temp.virtualDepartmentName=this.temp.virtualDeptName:"2"==this.temp.virtualGenre&&null!=this.temp.virtualCustomerName&&this.temp.virtualCustomerName.trim().length>0&&(this.temp.virtualDepartmentName=this.temp.virtualCustomerName),this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateWarehouseByVirtual)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"仓库性质:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{value:"虚拟库",readonly:!0}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.virtualGenreName+":",prop:"virtualGenreName"}},[i("el-select",{attrs:{placeholder:e.tempLable.virtualGenreName,disabled:!0},on:{change:e.changeVirtualGenre},model:{value:e.temp.virtualGenre,callback:function(t){e.$set(e.temp,"virtualGenre",t)},expression:"temp.virtualGenre"}},[i("el-option",{attrs:{label:"内部单位",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"外部单位",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowDept,expression:"isShowDept"}],attrs:{label:"部门名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DepartmentDialog.dialog},on:{callback:e.departmentSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowCust,expression:"isShowCust"}],attrs:{label:"客户名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseVirtualEdit.vue";t.default=s.exports},"0VPC":function(e,t,i){},"0WIs":function(e,t,i){"use strict";i.r(t);i("f3/d"),i("Oyvg");var a=i("9I58"),o=i("WIyV"),n=i("sanI"),l=i("8Vv6"),s=i("aZSg"),r=(i("rwyD"),i("a0Xs")),c={components:{customBaseTable:o.a,dialogAddCustomer:n.default,selectProductBySaleOrder:a.default},props:["initData","visible"],data:function(){var e=this;return{productUnit:{},rowData:{},isValidate:!1,rules:{customerName:[{required:!0,message:"请选择客户名称",trigger:"change"}],receiptTypeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.temp.receiptType.length<=0?a(new Error("请选择发票类型")):a()}}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}],orderDate:[{required:!0,message:"请填写下单日期",trigger:"change"}],expectDate:[{required:!0,message:"请填写约定交期",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{priceType:"2",customerId:"",customerName:"",receiptType:"",receiptTypeName:"",orderDate:new Date,expectDate:new Date,makeId:"",makeName:"",remark:"",dtlJsonStr:"",isAutoCommit:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择客户名称",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"df7cb67fca4148bc9632c908e4a7fdea",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}},apiObj:{apiName:"listPageSaleOrderDetail",params:{fieldCode:"prodInfo,orderUnitName,orderCount,stockCountByPrice,productStockCountByPrice,deliverDate,remark",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",type:"add"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"orderUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"orderCount",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"deliverDate",width:"180",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",lessThan:["tempData@maxExpectDate",!0]}},{columnIndex:"remark",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{maxExpectDate:""}}},beforeCreate:function(){},created:function(){var e=this.$storage.get("userInfo");null!=e.userId&&e.userId.trim().length>0&&(this.temp.makeId=e.userId.trim()),null!=e.userName&&e.userName.trim().length>0&&(this.temp.makeName=e.userName.trim())},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData),this.setProductSum(this.rowData))},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveSaleOrder(e.orderDtlList))})},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+\\.{0,1}[0-9]{0,2}$").test(e.trim())},checkColumn:function(e){for(var t="",i=this.temp.expectDate,a=0;a<e.length;a++){var o=e[a],n=o.orderCount;null!=n&&0!=n.trim().length||(t=t+"第 "+(a+1)+" 行: 订购数量为空或空字符串！");var l=o.deliverDate;null==l&&(t=t+"第 "+(a+1)+" 行: 约定交期为空或空字符串！"),null!=i&&null!=l&&i<l&&(t=t+"第 "+(a+1)+" 行: 约定交期不可大于("+i+")！")}return t},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},saveSaleOrder:function(e){var t=this;if(null!=e&&0!=e.length){var i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{for(var a=[],o=0;o<e.length;o++){var n=e[o],s={productId:"",productPrice:"",p2nFormula:"",n2pFormula:"",orderCount:"",orderUnit:"",productUnit:"",priceUnit:"",productSum:"",deliverDate:"",remark:""};s.productId=n.productId,s.productPrice=n.productPrice,s.p2nFormula=n.p2nFormula,s.n2pFormula=n.n2pFormula,s.orderCount=n.orderCount,s.orderUnit=n.orderUnit,s.productUnit=n.productUnit,s.priceUnit=n.priceUnit,s.productSum=n.productSum,s.deliverDate=n.deliverDate,s.remark=n.remark,a.push(s)}this.temp.dtlJsonStr="",null!=a&&a.length>0&&(this.temp.dtlJsonStr=JSON.stringify(a)),this.$confirm("添加订单后，是否将该订单提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.temp.isAutoCommit="true",Object(l.addSaleOrder)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.temp.isAutoCommit="false",Object(l.addSaleOrder)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},customerSelect:function(e){e[0]&&(this.temp.customerId=e[0].id,this.temp.customerName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},checkNumber:function(e,t){null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t+"("+e+") 输入错误，请输入大于零的正整数或(1,2)位小数！"})},changeAdvanceSum:function(e){null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&this.checkNumber(e,"预付款")},addProduct:function(){this.$refs.orderAddDialog.getData(),this.dialogData.data=this.orderDtlList,this.dialogData.isNeedRepeat=!1,this.dialogData.querySpare="isSpareAll",this.dialogData.title="选择货品",this.openDialogName="selectProductBySaleOrder",this.showDialog=!0,this.inLinVisible=!0},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id,t.orderUnit=e.id),this.temp.customerId?this.findProductPrice(t,this.temp.customerId,t.productId,e.id):null!=e.productPrice&&(t.productPrice=e.productPrice),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim());var a="";null!=t.productStockCount&&t.productStockCount.trim().length>0&&(a=t.productStockCount.trim()),Object(r.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i,productStockCount:a}).then(function(e){0===e.code&&(i-0!=0&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p),a-0!=0&&null!=e.productStockCount_n2p&&e.productStockCount_n2p.trim().length>0&&(t.productStockCountByPrice=e.productStockCount_n2p))}).catch(function(e){})}},setProductSum:function(e){if(null!=e){e.productSum="";var t=e.orderCount,i=e.productPrice;null!=t&&t.trim().length>0&&null!=i&&i.trim().length>0&&(e.productSum=(t.trim()*i.trim()).toFixed(2))}},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelected(t)},tableSelected:function(e){if(null!=e&&e.length>0)for(var t=this.temp.expectDate,i=0;i<e.length;i++){var a=e[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productPrice:"",n2pFormula:"",p2nFormula:"",prodInfo:"",orderUnit:"",orderCount:"",productUnit:"",productUnitName:"",productCount:"",stockCount:"",productStockCount:"",priceUnit:"",priceCount:"",stockCountByPrice:"",productStockCountByPrice:"",productSum:"",deliverDate:"",stateName:"",remark:""};null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),null!=a.unitName&&a.unitName.trim().length>0&&(o.productUnitName=a.unitName.trim()),null!=a.prodInfo&&a.prodInfo.trim().length>0&&(o.prodInfo=a.prodInfo.trim()),o.orderUnit=a.unit,o.orderUnitName=a.unitName,o.productPrice=a.price,o.p2nFormula=a.p2nFormula,o.n2pFormula=a.n2pFormula,o.productId=a.id.trim(),o.productUnit=a.unit.trim(),o.stockCount=a.stockCount.trim(),o.productStockCount=a.productStockCount.trim(),null!=t&&(o.deliverDate=t,o.maxExpectDate=t,this.tempData.maxExpectDate=t),o.stockCountByPrice=a.stockCount.trim(),o.productStockCountByPrice=a.productStockCount.trim(),this.tableData.push(o)}},findProductPrice:function(e,t,i,a){return Object(s.findSaleUnitPrice)({customerId:t,productId:i,unit:a}).then(function(t){0===t.code&&null!=t.productPrice&&t.productPrice.trim().length>0&&(e.productPrice=t.productPrice)}).catch(function(e){}),""}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size},formItemWidth:function(){var e={};switch(this.size){case"mini":e.width="180px";break;case"small":e.width="200px";break;default:e.width="220px"}return e}},watch:{"temp.expectDate":function(){this.tempData.maxExpectDate=this.temp.expectDate}}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"80%"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px",size:e.size}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"客户名称:",prop:"customerName"}},[i("base-input-option",{staticStyle:{display:"inline-block"},style:e.formItemWidth,attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.customerName,callback:function(t){e.$set(e.temp,"customerName",t)},expression:"temp.customerName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发票类型:",prop:"receiptTypeName"}},[i("el-select",{style:e.formItemWidth,attrs:{placeholder:"发票类型"},model:{value:e.temp.receiptType,callback:function(t){e.$set(e.temp,"receiptType",t)},expression:"temp.receiptType"}},[i("el-option",{attrs:{label:"不开票",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"增值税普通发票",value:"2"}}),e._v(" "),i("el-option",{attrs:{label:"增值税专用发票",value:"3"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{style:e.formItemWidth,attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"下单日期:",prop:"orderDate"}},[i("el-date-picker",{style:e.formItemWidth,attrs:{type:"date",placeholder:"下单日期","value-format":"yyyy-MM-dd"},model:{value:e.temp.orderDate,callback:function(t){e.$set(e.temp,"orderDate",t)},expression:"temp.orderDate"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"约定交期:",prop:"expectDate"}},[i("el-date-picker",{style:e.formItemWidth,attrs:{type:"date",placeholder:"约定交期","value-format":"yyyy-MM-dd"},model:{value:e.temp.expectDate,callback:function(t){e.$set(e.temp,"expectDate",t)},expression:"temp.expectDate"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{style:e.formItemWidth,model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_sale_orderByPrice_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"orderAddDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogAdd.vue";t.default=u.exports},"0msr":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo"),i("KKXr");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rangeType:"number",numberStart:1,numberEnd:1,letterStart:"A",letterEnd:"A",letterValues:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z",letterStartOptions:[],letterEndOptions:[],isShowNumber:!0,isShowLetter:!1,dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写货位名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",fullscreen:!1,tempLable:null},formTemp:[]}},created:function(){var e=this;null!=this.letterValues&&0!=this.letterValues.trim().length&&this.letterValues.split(",").forEach(function(t){if(null!=t&&t.trim().length>0){var i={value:"",label:""};i.value=t,i.label=t,e.letterStartOptions.push(i),e.letterEndOptions.push(i)}})},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},radioChange:function(){this.isShowNumber=!1,this.isShowLetter=!1,this.numberStart=1,this.numberEnd=1,this.letterStart="A",this.letterEnd="A","number"==this.rangeType?this.isShowNumber=!0:"letter"==this.rangeType&&(this.isShowLetter=!0)},save:function(){var e=this;if(null!=this.initData.nodeId&&0!=this.initData.nodeId.trim().length){var t="",i="",o=-1,n=-1;"number"==this.rangeType?(t=this.numberStart,i=this.numberEnd,o=t,n=i):"letter"==this.rangeType&&(t=this.letterStart,i=this.letterEnd,o=t.charCodeAt(),n=i.charCodeAt()),-1!="number,letter".indexOf(this.rangeType)&&n<o?this.$message({type:"warning",duration:5e3,showClose:!0,message:"输入范围参数错误，(结束范围)必须小于等于(起始范围)"}):-1!="number,letter".indexOf(this.rangeType)?this.$refs.submitForm.validate(function(o){o&&(e.dialogLoading=!0,e.temp.start=t,e.temp.end=i,e.temp.pid=e.initData.nodeId,Object(a.addWarehousePositionByRange)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))}):-1!="name".indexOf(this.rangeType)&&this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,e.temp.pid=e.initData.nodeId,Object(a.addWarehousePosition)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请在左边仓库树选择一个节点！"})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"500px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{height:"300px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{margin:"30px 120px"}},[i("el-radio-group",{on:{change:e.radioChange},model:{value:e.rangeType,callback:function(t){e.rangeType=t},expression:"rangeType"}},[i("el-radio",{attrs:{label:"number"}},[e._v("数字")]),e._v(" "),i("el-radio",{attrs:{label:"letter"}},[e._v("字母")]),e._v(" "),i("el-radio",{attrs:{label:"name"}},[e._v("自定义")])],1)],1),e._v(" "),i("div",{staticStyle:{height:"200px"}},[i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowNumber,expression:"isShowNumber"}]},[i("el-form-item",{attrs:{label:"序号范围："}},[i("el-input-number",{attrs:{size:"mini",min:1,max:100},model:{value:e.numberStart,callback:function(t){e.numberStart=t},expression:"numberStart"}}),e._v(" -\n            "),i("el-input-number",{attrs:{size:"mini",min:1,max:100},model:{value:e.numberEnd,callback:function(t){e.numberEnd=t},expression:"numberEnd"}})],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowLetter,expression:"isShowLetter"}]},[i("el-form-item",{attrs:{label:"起始范围:",prop:"start"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.letterStart,callback:function(t){e.letterStart=t},expression:"letterStart"}},e._l(e.letterStartOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"结束范围:",prop:"end"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.letterEnd,callback:function(t){e.letterEnd=t},expression:"letterEnd"}},e._l(e.letterEndOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"货位名称：",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehousePositionRangeAdd.vue";t.default=s.exports},"0ten":function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("rGqo");var a=i("wX7y"),o=i("ndgj"),n=i("z0WU"),l=i("mSNy");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.editBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.editBtns(scope.row,scope.$index)">修改执行人</el-button>\n      \t\t\t\t\t</div>\n    \t\t\t\t</el-table-column>'},d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable"  :disabled=true></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={components:{dialogEditExecutor:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],selectList:null,initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:c,editBtns:this.editBtns,editBtns_isShow:!1}},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},pageData:null,pageNo:1,resState:null}},created:function(){"1"==this.initData.temp.state&&(this.initConfigs.tableOperates.editBtns_isShow=!0),this.initTable(this.initData.temp.id)},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{initTable:function(e){var t=this;this.dialogLoading=!0,Object(o.listPageWarehouseMoveExecutors)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}({},this.tempQuery,{detailId:e,pageNo:1,pageSize:1e4})).then(function(e){t.getListPage(e),t.dialogLoading=!1}).catch(function(e){t.dialogLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==l.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==l.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==l.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==l.a.locale&&(e.label=t.substring(0,t.indexOf("_")))),"isdisable"===e.prop&&(e.component=d)}),this.internationalConfig(),e.push(this.initConfigs.tableOperates),e},internationalConfig:function(){"en"==l.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==l.a.locale&&(this.initConfigs.tableOperates.label="操作")},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.resState&&((e={}).resState=this.resState),this.$emit("close-dialog",e||{})},editBtns:function(e,t){this.dialogData.temp=e,this.dialogData.title="修改执行人",this.openDialogName="dialogEditExecutor",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){"ok"==e.resState&&(this.resState=e.resState,this.initTable(this.initData.temp.id)),this.showDialog=!1}},watch:{}},p=i("KHd+"),m=Object(p.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"800px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo,isSortable:!0},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);m.options.__file="dialogViewExecutor.vue";t.default=m.exports},"0wyt":function(e,t,i){"use strict";var a=i("+IxY");i.n(a).a},"1AWt":function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("rGqo"),i("f3/d");var a=i("K3g7"),o=i("IfZh"),n=i("z0WU"),l=i("mSNy");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{queryType:null,productId:"",productType:"",warehouseIds:"",dialogLoading:!1,isVisible:!1,inDialog:!0,tempLable:{},tempQuery:{},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{fullscreen:!1,title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1},selectTree:{pid:"",id:"",name:""},BaseTableLoading:!1,tableData:[],selectList:[],configs:{tableConfigs:[],isSingle:!0,showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1,resState:null}},created:function(){var e=this.initData.temp;this.productId=e.productId,this.productType=e.productType,this.warehouseIds=this.initData.warehouseIds,this.initTree()},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,name:e.nodeData.name},this.pageNo=1,this.radioChange()},initTree:function(){var e=this;this.dialogLoading=!0;var t=this;Object(a.treeWarehouse)({notInWarehouseIds:this.warehouseIds}).then(function(e){var i=[],a=e.result.treeList;t.selectTree={pid:a.pid,id:a.id,name:a.name},i.push(a),t.treeData=i,t.initTable(null,null,null,null,null),t.$nextTick(function(){t.$refs.tree.$children[0].setCurrentKey(t.selectTree.id)})}).catch(function(t){e.dialogLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!0,this.configs.showIndex=!0,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==l.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==l.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==l.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==l.a.locale&&(e.label=t.substring(0,t.indexOf("_"))))}),e},initTable:function(e,t,i,a,n){var l=this;null!=t&&0!=t.trim().length||(t=""),null!=i&&0!=i.trim().length||(i=""),null!=a&&0!=a.trim().length||(a=""),null!=n&&0!=n.trim().length||(n=""),e&&(this.BaseTableLoading=!0),Object(o.findWarehouseListByWarehouseIn)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}({},this.tempQuery,{notInWarehouseIds:this.warehouseIds,nodeId:t,productId:i,productType:a,isExistProd:n,pageNo:this.pageNo})).then(function(t){l.getListPage(t),l.dialogLoading=!1,e&&(l.BaseTableLoading=!1)}).catch(function(e){l.dialogLoading=!1,l.BaseTableLoading=!1})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},radioChange:function(){var e="",t="",i="";"productId"==this.queryType?(e=this.productId,i="true"):"productType"==this.queryType?(t=this.productType,i="true"):"warehouseId"==this.queryType&&(i="false");var a="";null!=this.selectTree&&null!=this.selectTree.id&&this.selectTree.id.trim().length>0&&(a=this.selectTree.id.trim()),this.initTable(!0,a,e,t,i)},dataBridge:function(e){if(null!=e&&e.length>0){var t=e[0];t.pageName="dialogChangeWarehouseByIn",this.selectList.push(t)}},save:function(){var e={id:this.selectList[0].id,pathName:this.selectList[0].pathName};this.dialogClose(e),this.isVisible=!1}},watch:{pageNo:function(){this.initTable()}}},d=(i("FXVt"),i("KHd+")),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticClass:"treeStyle",attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{attrs:{span:20}},[i("div",{staticClass:"tableContent",staticStyle:{"margin-left":"10px"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.BaseTableLoading,expression:"BaseTableLoading"}],staticStyle:{height:"400px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1)]),e._v(" "),i("el-row",{staticStyle:{height:"100px","text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogWarehouseBySimple.vue";t.default=u.exports},"1CNR":function(e,t,i){"use strict";i.r(t);var a={components:{customBaseTable:i("WIyV").a},props:["initData","visible"],data:function(){return{businessId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageRepairTaskDetailByOut",params:{fieldCode:"sysCode,repairUserName,beginTimeStr,endTimeStr,taskResultName,productCode,productName,productSpec,productGenreName,productUnitName,receiveCount,outCount",outId:"",orderStr:"task.cdate,taskDtl.cdate asc"}},customColumn:[{}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.businessId=this.initData.businessId,this.apiObj.params.outId=this.initData.businessId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("el-row",{staticStyle:{"padding-top":"10px"},style:e.initData.table_style},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_equipment_equipmentRepair_dialogRepairTaskDetailByOut0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);n.options.__file="dialogRepairTaskDetailByOut.vue";t.default=n.exports},"1HNo":function(e,t,i){"use strict";var a=i("HGsh");i.n(a).a},"1IKD":function(e,t,i){"use strict";i("f3/d"),i("KKXr"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("t3Un")),l={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},fieldCode_default:"prodInfo,unitName,stockCount,safetyCount,lockCount,productStockCount,remark",isConfirm:!1,dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageProducts",params:{fieldCode:"prodInfo,unitName,genreName,remark",prodColumnKey:"code,name,spec,property"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:["remark"],tableSelectList:[]}},created:function(){var e=this.fieldCode_default;null!=this.initData.fieldCode&&this.initData.fieldCode.trim().length>0&&(e=this.initData.fieldCode.trim());var t="";null!=this.initData.queryStr&&(t=this.initData.queryStr);var i="";i=null!=this.initData.orderStr?this.initData.orderStr:"prod.name,prod.spec asc";var a="";if(null!=this.initData.data&&this.initData.data.length>0)for(var o=0;o<this.initData.data.length;o++){var n=this.initData.data[o];null!=n.productId&&n.productId.trim().length>0&&(a=a+n.productId+",")}var l=!0;null!=this.initData.isNeedRepeat&&(l=this.initData.isNeedRepeat),l||null!=a&&a.trim().length>0&&(a=a.substring(0,a.lastIndexOf(",")),t="prod.id not in ("+(a=this.findQueryProductIds(a))+")");var s="false";null!=this.initData.isNeedCustomerPrice&&1==this.initData.isNeedCustomerPrice&&(s="true");var r="";null!=this.initData.customerId&&this.initData.customerId.trim().length>0&&(r=this.initData.customerId.trim());var c="false";null!=this.initData.isNeedWarehouseProduct&&(c=this.initData.isNeedWarehouseProduct);var d="";null!=this.initData.warehouseId&&(d=this.initData.warehouseId);var u="";null!=this.initData.genreNames&&(u=this.initData.genreNames);var p="";null!=this.initData.stockCountQuery&&(p=this.initData.stockCountQuery),null!=this.initData.isShowStateBtnData&&"false"==this.initData.isShowStateBtnData&&(this.stateBtnData={}),this.aboveTableConfig.apiObj.params={fieldCode:e,queryStr:t,orderStr:i,genreNames:u,isNeedWarehouseProduct:c,warehouseId:d,isNeedCustomerPrice:s,customerId:r,stockCountQuery:p,isdisable:"1",prodColumnKey:"code,name,spec,property"};var m=this.initData.querySpare;"isNeedSpare"==m?this.aboveTableConfig.apiObj.params.isNeedGenreSpare="true":null!=m&&0!=m.trim().length&&"isNotNeedSpare"!=m||(this.aboveTableConfig.apiObj.params.isNeedNotInGenreSpare="true"),this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{isConfirm:this.isConfirm,selectList:this.tableSelectList,pageName:"productTableDialog"})},closeDialog:function(e){this.showDialog=!1},tableSelected:function(e){this.tableSelectList=e},confrim:function(){this.$refs.trabsferTables.getTableSelected(),this.isConfirm=!0,this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},findQueryProductIds:function(e){var t="";if(null==e||0==e.trim().length)return t;var i=e.split(",");if(null!=i&&i.length>0)for(var a=i.length,o=0;o<i.length;o++){var n="'"+i[o]+"'";o<a-1?t=t+n+",":o==a-1&&(t+=n)}return t},initTree:function(){var e=this;e.dialogLoading=!0,Object(n.a)({url:"/system/dictionary/treeDictionarys",method:"post",data:{dictionaryKey:"productGenre"}}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name},t.push(i),this.treeData=t,this.dialogLoading=!1},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.tempQuery.pid=this.selectTree.id,this.tempQuery.layer=this.selectTree.layer,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="productTableDialogNew.vue";t.a=r.exports},"1Jrk":function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("VJB8"),o=i("WIyV"),n=i("7jNx"),l=i("MPAK"),s=i("AK/a"),r={components:{customBaseTable:o.a,dialogAddCraft:n.default,selectProductCustomTransferTable:a.a},props:["initData","visible"],data:function(){return{rules:{assistProductName:[{required:!0,message:"请选择外协件",trigger:"change"}],craftName:[{required:!0,message:"请选择工艺名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",assistProductId:"",assistProductName:"",assistProductInfo:"",unitId:"",craftId:"",craftName:"",dtlJsonStr:""},tableData:[],editData:[],configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},AssistProductDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"800px",title:"选择外协件"},dialogName:"dialogProductOption"}},AssistAraftDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择工艺名称"},dialogName:"dialogAssistCraftOption"}},apiObj:{apiName:"listPageAssistProductDetail",params:{fieldCode:"prodInfo,unitName,ratio",addColumn:{columnKey:"prodInfo",columnName:"原材料"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:"null"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"ratio",width:"120",componentName:"input",_cellConfig:{}}]}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.formData.id=e.id,this.formData.assistProductId=e.productId,this.formData.assistProductName=e.productName,this.formData.craftId=e.craftId,this.formData.craftName=e.craftName,this.apiObj.params.parentId=e.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.editData=[],this.editData=e)},getData:function(){this.$refs.customBaseTable.getData()},assistProductSelect:function(e){e[0]&&(this.formData.assistProductId=e[0].id,this.formData.assistProductName=e[0].name,this.formData.assistProductInfo=e[0].prodInfo,this.formData.unitId=e[0].unit)},assistAraftSelect:function(e){e[0]&&(this.formData.craftId=e[0].id,this.formData.craftName=e[0].name)},addCraft:function(){this.dialogData.isNeedShowResult="true",this.dialogData.title="新增工艺名称",this.openDialogName="dialogAddCraft",this.showDialog=!0,this.inLinVisible=!0},addProduct:function(){this.getData(),this.dialogData.data=this.editData,this.dialogData.isNeedRepeat=!1,this.dialogData.querySpare="isSpareAll",this.dialogData.fieldCode="prodInfo,unitName",this.dialogData.width="900px",this.dialogData.title="选择货品",this.openDialogName="selectProductCustomTransferTable",this.showDialog=!0,this.inLinVisible=!0},checkColumnByTable:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o="";null!=a.ratio&&(o=a.ratio+""),null==o||0==o.trim().length?t=t+"第 "+(i+1)+" 行: 单件用量为空或空字符串！":null!=o&&o.trim().length>0&&!Object(l.isNumberByValueSystem)(o)?t=t+"第 "+(i+1)+" 行: 单件用量("+o+") 输入错误，请输入大于零的正数支持2位小数！":null!=o&&o.trim().length>0&&Object(l.isNumberByValueSystem)(o)&&o/1<=0&&(t=t+"第 "+(i+1)+" 行: 单件用量("+o+") 输入错误，请输入大于零的正数支持2位小数！")}return t},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){if(e.editData=[],e.getData(),null==e.editData||0==e.editData.length)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"});var i=e.checkColumnByTable(e.editData);if(null!=i&&i.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:i});e.saveSaleOrder(e.editData)}})},saveSaleOrder:function(e){for(var t=this,i=[],a=0;a<e.length;a++){var o=e[a],n={productId:o.productId,ratio:o.ratio,unitId:o.unitId};i.push(n)}this.formData.dtlJsonStr="",null!=i&&i.length>0&&(this.formData.dtlJsonStr=JSON.stringify(i)),this.dialogLoading=!0,Object(s.updateAssistProduct)(this.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"selectProductCustomTransferTable"==e.pageName){var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelected(t)}else null!=e&&"dialogAdd"==e.pageName&&"true"==e.isNeedShowResult&&null!=e.Craft&&(this.formData.craftId=e.Craft.id,this.formData.craftName=e.Craft.name)},tableSelected:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={productId:i.id.trim(),prodInfo:i.prodInfo.trim(),unitId:i.unit,unitName:i.unitName,ratio:"0.00"};this.tableData.push(a)}}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"800px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,inline:!0,model:e.formData}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"外协件:",prop:"assistProductName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.AssistProductDialog.dialog},on:{callback:e.assistProductSelect},model:{value:e.formData.assistProductName,callback:function(t){e.$set(e.formData,"assistProductName",t)},expression:"formData.assistProductName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"工艺名称:",prop:"craftName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.AssistAraftDialog.dialog},on:{callback:e.assistAraftSelect},model:{value:e.formData.craftName,callback:function(t){e.$set(e.formData,"craftName",t)},expression:"formData.craftName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCraft}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{margin:"10px 0px 10px 0px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistBase_assistProduct_dialogEdit0",varList:e.tableData,showIndex:!1,showTableSet:!1,showCheckBox:!1,useDefaultBtn:!0,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogEdit.vue";t.default=d.exports},"1VmT":function(e,t,i){"use strict";var a=i("fRsp");i.n(a).a},"1jFx":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写货品名称",trigger:"change"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateWarehousePositionByName)({id:e.temp.id,pid:e.temp.pid,name:e.temp.name}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"货位名称:",prop:"pathName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.pathName,callback:function(t){e.$set(e.temp,"pathName",t)},expression:"temp.pathName"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="warehousePositionEdit.vue";t.default=s.exports},"1lsz":function(e,t,i){"use strict";var a=i("TgIW");i.n(a).a},"1tDi":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("na5B"),n=i("txn6");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:a.a,productStockTreeTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{typeName:"报废处理",fieldCode:"warehouseName,productCode,productName,productSpec,productGenreName,stockCount,count,remark",parentId:this.initData.temp.id}},customColumn:[{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCount",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["报废数量必须大于零！","报废数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="报废处理",this.temp.type="def4b13175dc44b08d7a0315b811700e"},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.dialogData.title="选择货品",this.openDialogName="productStockTreeTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={id:l.id,productId:l.productId,remark:l.remark,warehouseId:l.warehouseId,pathName:l.pathName,count:l.count,priceCount:l.count,productUnit:l.priceUnit,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&t.$confirm("修改报废单后，是否将该报废单提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.temp.isAutoCommit="true",Object(n.updateWarehouseOutScrapBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){t.dialogLoading=!0,t.temp.isAutoCommit="false",Object(n.updateWarehouseOutScrapBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})})})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",pathName:"",warehouseId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCount:""};o.productId=a.productId.trim(),null!=a.warehouseName&&a.warehouseName.trim().length>0&&(o.warehouseName=a.warehouseName.trim()),null!=a.warehouseId&&a.warehouseId.trim().length>0&&(o.warehouseId=a.warehouseId.trim()),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.stockCount=a.stockCount,o.priceUnit=a.unit,o.priceUnitName=a.unitName,this.tableData.push(o)}}},watch:{}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"操作类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouseBySimple_scrapBySimple_createScrapBySimple_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogEdit.vue";t.default=c.exports},"1uzU":function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=i("mbVW"),n={components:{multilevelTable:a.a},props:["initData","visible"],data:function(){return{addDiscardData:{supplierId:"",type:"",isAutoCommit:"",dtlJsonStr:""},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageAssistDeliverDetail",params:{fieldCode:"deliverCode,orderCode,supplier,assistProductName,assistProductUnitName,orderStateName",deliverDtlId:""}},tempData:{},showHeader:!0,showIndex:!1,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"editDiscardCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{lessThan:["self@maxDiscardCount",!0]}],message:["请输入大于零的正整数或(1,2)位小数！","不可大于最大报废数！"]}}],apiObj:{apiName:"listPageAssistDeliverDetailChildByRetreat",params:{fieldCode:"prodInfo,unitName,count,retreatCount,discardCount,maxDiscardCount,editDiscardCount",addColumn:{columnKey:"prodInfo,maxDiscardCount,editDiscardCount",columnName:"货品,最大报废,本次报废"},prodColumnKey:"productCode,productName,productSpec,productProperty",businessType:"discard",deliverId:"",supplierId:"",isNeedPage:"false"}},dynamicValue:{parentId:"self@id"},tempData:{},showIndex:!1,showCheckBox:!1,isSingle:!1,rightFixed:0,componentId:"twoLevelTable"}]}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.tableConfigList[0].apiObj.params.deliverDtlId=e.id,this.tableConfigList[1].apiObj.params.deliverId=e.parentId,this.tableConfigList[1].apiObj.params.supplierId=e.supplierId,this.addDiscardData.type="2",this.addDiscardData.supplierId=e.supplierId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.tableData=[],this.tableData=e)},getData:function(){this.$refs.customBaseTable.getData()},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){},findJsonStringByTable:function(e){for(var t=[],i=e[0].children,a=0;a<i.length;a++){var o=i[a],n={orderId:o.orderId,orderDtlId:o.orderDtlId,deliverDtlChildId:o.deliverDtlChildId,deliverDtlId:o.deliverDtlId,deliverId:o.deliverId,productId:o.productId,orderUnit:o.unitId,orderCount:o.editDiscardCount};t.push(n)}this.addDiscardData.dtlJsonStr=JSON.stringify(t)},save:function(){var e=this;this.getData(),null!=this.tableData&&this.tableData.length>0&&(this.findJsonStringByTable(this.tableData,this.addDeliverData),this.$confirm("是否将该报废单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.addDiscardData.isAutoCommit="true",Object(o.addAssistDiscard)(e.addDiscardData).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.dialogLoading=!1,e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.addDiscardData.isAutoCommit="false",Object(o.addAssistDiscard)(e.addDiscardData).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.dialogLoading=!1,e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))}))}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-row",[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistDiscard_createAssistDiscard_selectAssistDelive0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="selectAssistDelive.vue";t.default=s.exports},"1xh3":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d"),i("91GP"),i("pIFo");var a=i("uTIz"),o=i("varj"),n=i("K3g7");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customTransferTable:o.a,searchBar:a.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},resState:"",dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},isConfirm:!1,btnList:[{name:"确定",isShow:!0,state:!0,method:this.toDialogAdd},{name:"取消",state:!1,method:this.closeWin,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageProducts",params:{fieldCode:"code,name,spec,unitName,genreName,productStockCount,cdate",notInProductIds:"",isdisable:"1",isNeedWarehouseProduct:"true",warehouseId:"",orderStr:"prod.cdate desc"}},customColumn:[],tempData:{count:100,defaultDate:"2019-01-21"},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[],tempData:{count:100,defaultDate:"2019-01-21"},showIndex:!0,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:["remark"],tableSelectList:[],tempList:[]}},created:function(){var e="";if(null!=this.initData.data&&this.initData.data.length>0)for(var t=0;t<this.initData.data.length;t++){var i=this.initData.data[t];null!=i.productId&&i.productId.trim().length>0&&(e=e+i.productId+",")}var a=!0;null!=this.initData.isNeedRepeat&&(a=this.initData.isNeedRepeat),a||null!=e&&e.trim().length>0&&(e="'"+(e=e.substring(0,e.lastIndexOf(","))).replace(",","','")+"'",this.aboveTableConfig.apiObj.params.notInProductIds=e),this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{tableHeight:function(){},dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{isConfirm:this.isConfirm,selectList:this.tempList})},closeDialog:function(e){this.showDialog=!1},tableSelected:function(e){this.tempList=e},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},initTree:function(){var e=this;this.dialogLoading=!0,Object(n.treeWarehouse)({isNeedEntity:"true"}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name},t.push(i),this.treeData=t,this.dialogLoading=!1},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery,{warehouseId:this.selectTree.id})},toDialogAdd:function(){this.$refs.trabsferTables.getTableSelected(),this.isConfirm=!0,this.isVisible=!1}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);c.options.__file="selectProductByEntity.vue";t.default=c.exports},"2+ib":function(e,t,i){"use strict";i("dRSK"),i("INYr"),i("91GP"),i("Vd3H"),i("rGqo"),i("f3/d"),i("xfY5");var a=i("8WZi"),o=i("z0WU"),n=i("DKCI"),l=i("50Ol"),s=i("F9dT"),r=(i("Yfch"),i("YP4+")),c=i("WwWg"),d=(i("evdt"),i("mwzG")),u={name:"multilevel-table",mixins:[a.a],provide:function(){return{rootVm:this}},props:{expand:[Boolean],expandMode:[String],rootWidth:[String,Number],showExpandBtn:[Boolean],parentData:{type:Array,default:function(){return[]}},rowChain:{type:Array,default:function(){return[]}},layerSingle:{type:Boolean,default:!1},globalSingle:{type:Boolean,default:!1},widthDiffValue:{type:Number,default:r.a.widthDiffValue}},data:function(){return{_vnode:null,componentName:"multilevelTable",checkedViewHeight:0,pageId:"",initLoading:!0,headerWidthList:[],listLength:-1,restaurants:[],fileList:[],resultTableData:"",computedIds:[],tempCheckedList:[]}},components:{tableFilter:n.a,customSummaryOption:l.a},computed:{setMergeTitle:function(){return this.layerConfig.mergeTitle||this.mergeTitle},setInitLoading:function(){return this.initLoading},setTableLoading:function(){return 1===this.maxLayer?this.setShowTableSet?this.setShowTableSet&&this.setInitLoading:this.setInitLoading:!!this.setApiObj.apiName&&this.initLoading},tableData:function(){return this.layer?this.parentData[0]||{}:this.$store.getters[this.guid+"/tableData"]||{}},setExpand:function(){return this.layerConfig.expand||this.expand||!1},setExpandMode:function(){return this.layerConfig.expandMode||this.expandMode||"all"},setShowExpandBtn:function(){return this.layerConfig.showExpandBtn||this.showExpandBtn||!1},setExpandColumnWidth:function(){return this.setShowExpandBtn?"50":this.maxLayer>2?"50":this.setExpand&&"all"!==this.setExpandMode?"50":"1"},setTableClass:function(){return{twoLevelTable:"1"===this.setExpandColumnWidth&&2===this.maxLayer&&!this.layer,inTwoLevelTable:2===this.maxLayer&&this.layer,multilevelTable:"50"===this.setExpandColumnWidth||this.maxLayer>2,singleStageTable:1===this.maxLayer&&!this.layer,columnBaseTable:!this.layer,defaultSpacingClass:!this.layer&&this.maxLayer>1,noSpacingClass:this.layer}},setExpandRowKeys:function(){return"one"===this.setExpandMode&&this.tableData[this.dataName]?[this.tableData[this.dataName][0]]:[]},setShowHeader:function(){return"boolean"!=typeof this.layerConfig.showHeader||this.layerConfig.showHeader},setTableBorder:function(){return this.layer?!this.setExpand||("50"===this.setExpandColumnWidth||this.maxLayer>2):!!this.setShowTableSet},setRootWidth:function(){return this.layer?"100%":this.layerConfig.rootWidth||this.rootWidth?"".concat((this.layerConfig.rootWidth||this.rootWidth)+"","px"):"100%"}},created:function(){var e=this;if(!this.layer)if(this.guid=Object(o.a)(),Object(c.d)(this),this.initData.result){var t=JSON.parse(JSON.stringify(this.initData));this.computedIds=[],this.tempCheckedList=[],this.$store.commit(this.guid+"/SET_TABLEDATA",{res:t,vm:this}),this.pageId=this.$storage.get("menuId"),this.setRowExpansion(this.tableData[this.dataName][0],!0),this.setDragTable&&this.setSort(),this.$store.commit(this.guid+"/SET_TABLERULELIST",{cb:this.tableRuleForm,ruleId:"root",vm:this}),this.initLoading=!1}else this.setApiObj.apiName&&("单级表格"===this.$route.name||"两级表格"===this.$route.name||"多级表格"===this.$route.name?setTimeout(function(){var t=JSON.parse(JSON.stringify(d.a));e.computedIds=[],e.tempCheckedList=[],e.$store.commit(e.guid+"/SET_TABLEDATA",{res:t,vm:e}),e.pageId=e.$storage.get("menuId"),e.setRowExpansion(e.tableData[e.dataName][0],!0),e.setDragTable&&e.setSort(),e.$store.commit(e.guid+"/SET_TABLERULELIST",{cb:e.tableRuleForm,ruleId:"root",vm:e}),e.initLoading=!1},1e3):this.httpRequests());this.layer&&(this.setApiObj&&this.setApiObj.apiName?this.httpChildrenRequests(this.tableData):this.tableData[this.dataName]&&this.tableData[this.dataName].length?(this.tableData[this.dataName].forEach(function(e){e.rowState="1"}),this.setDragTable&&this.setSort(),this.$store.commit(this.setGuid+"/SET_TABLERULELIST",{cb:this.tableRuleForm,ruleId:this.internalRuleId,vm:this}),this.initLoading=!1,this.tableDoLayout()):(this.$emit("narrow-row",this.parentData[0]),this.initLoading=!1,this.tableDoLayout()))},mounted:function(){this.setFixed(),this.setTableCheckBoxDisplay()},updated:function(){},beforeDestroy:function(){var e=this;this.$store.state[this.setGuid]&&this.$store.commit(this.setGuid+"/SET_TABLERULELIST",{cb:null,ruleId:this.layer?this.internalRuleId:"root"}),this.tempCheckedList.forEach(function(t){e.$store.commit(e.setGuid+"/DELETE_CHECKED",[t])}),!this.layer&&Object(c.h)(this.$store,this.guid)},watch:{"tableData.tableData":function(){1===this.maxLayer&&this.setFixed(),this.setTableCheckBoxDisplay(),this.tableDoLayout()},"tableData.children":function(){this.maxLayer===this.layer+1&&this.setFixed(),this.setTableCheckBoxDisplay(),this.tableDoLayout()},initData:function(){this.$store.commit(this.setGuid+"/SET_TABLERULELIST",{cb:null,ruleId:this.layer?this.internalRuleId:"root"});var e=JSON.parse(JSON.stringify(this.initData));this.computedIds=[],this.tempCheckedList=[],this.$store.commit(this.setGuid+"/SET_TABLEDATA",{res:e,vm:this}),this.pageId=this.$storage.get("menuId"),this.setRowExpansion(this.tableData[this.dataName][0],!0),this.setDragTable&&this.setSort(),this.$store.commit(this.setGuid+"/SET_TABLERULELIST",{cb:this.tableRuleForm,ruleId:this.layer?this.internalRuleId:"root",vm:this}),this.initLoading=!1,this.tableDoLayout()},resetContentWidthList:function(){var e=this,t=this.resetContentWidthList.map(function(e){return null});this.resetContentWidthList.forEach(function(i,a){e.useMiddleValue=!1,t[a]=e.contentWidthAlgorithm(i.map(function(e){return Math.max.apply(null,e)})),e.useMiddleValueList[a]=e.useMiddleValue}),t.forEach(function(t,i){e.contentWidthList[i]=t?t+26:null})}},methods:{contentWidthAlgorithm:function(e){if(this.setWidthDiffValue&&e&&e.length){if(e.length>1){var t=Math.max.apply(null,e);if(t-Math.min.apply(null,e)>this.setWidthDiffValue){var i,a=[].concat(e);return a.sort(o.d),i=a.length%2==0?(a[a.length/2-1]+a[a.length/2])/2:a[(a.length+1)/2-1],this.useMiddleValue=!0,t-i>this.setWidthDiffValue&&(i=2*this.setWidthDiffValue),i}return t}return e[0]}return null},databridge:function(e,t){this.$emit("databridge",e,t)},expandChange:function(e,t){var i=this;"one"===this.setExpandMode&&t.forEach(function(i,a){e._internalId!==i._internalId&&t.splice(a,1)}),this.$refs.baseTable.$nextTick(function(e){i.$refs.baseTable&&i.$refs.baseTable.doLayout&&i.$refs.baseTable.doLayout(),i.$emit("table-dolayout")})},setRowExpansion:function(e,t){!this.layer&&this.maxLayer>1&&"one"===this.setExpandMode&&this.$refs.baseTable.toggleRowExpansion(e,t)},httpRequests:function(e){var t=this;this.$store.commit(this.guid+"/SET_TABLERULELIST",{cb:null,ruleId:"root"}),this.initLoading=!0,this.$api[this.setApiObj.apiName](Object.assign({},this.setApiObj.params,{pageNo:e||1},this.searchObj)).then(function(i){t.computedIds=[],t.tempCheckedList=[],t.$store.commit(t.guid+"/SET_TABLEDATA",{res:i,vm:t}),t.pageId=t.$storage.get("menuId"),t.setRowExpansion(t.tableData[t.dataName][0],!0),t.setDragTable&&t.setSort(),t.initLoading=!1,e&&(t.pageNo=e,t.scrollTable()),t.tableDoLayout(),t.$store.commit(t.guid+"/SET_TABLERULELIST",{cb:t.tableRuleForm,ruleId:"root",vm:t})}).catch(function(e){t.initLoading=!1})},httpChildrenRequests:function(e,t){var i=this;this.$store.commit(this.setGuid+"/SET_TABLERULELIST",{cb:null,ruleId:this.internalRuleId}),this.initLoading=!0,this.$api[this.setApiObj.apiName](Object.assign({},{pageNo:t||1},this.setParams(e,this.setApiObj),this.setDynaValue(e))).then(function(a){i.$store.commit(i.setGuid+"/UPDATE_CHILDRENTABLEDATA",{res:a,row:e,vm:i}),i.setDragTable&&i.setSort(),i.pageNo=i.tableData[i.dataName].pageData&&i.tableData[i.dataName].pageData.current||1,i.initLoading=!1,i.tableDoLayout(),t&&i.scrollTable(),i.$store.commit(i.setGuid+"/SET_TABLERULELIST",{cb:i.tableRuleForm,ruleId:i.internalRuleId,vm:i})}).catch(function(e){i.initLoading=!1})},selectItem:function(e,t){e.findIndex(function(e){return e._internalId===t._internalId})>-1?(this.tempCheckedList.push(t),this.$store.commit(this.setGuid+"/ADD_CHECKED",[t])):(this.$store.commit(this.setGuid+"/DELETE_CHECKED",[t]),this.tempCheckedList=this.tempCheckedList.filter(function(e){return e._internalId!==t._internalId})),this.$emit("databridge",this.$store.getters[this.setGuid+"/checkedList"]),(this.setIsSingle||this.setGlobalSingle||this.setLayerSingle)&&((this.setGlobalSingle||this.setLayerSingle)&&this.$store.commit(this.setGuid+"/SET_ROWSTATE",{model:this.setGlobalSingle?"global":"layer",layer:this.layer,state:e.length?"0":"1"}),e.length?(this.tableData[this.dataName].forEach(function(e){e.rowState="0"}),e[0].rowState="1"):this.tableData[this.dataName].forEach(function(e){e.rowState="1"}))},selectAllItem:function(e){if(this.setIsSingle){if(e.length)for(var t=e.length-1;t>=0;t--)e.splice(t,1)}else e.length?(this.tempCheckedList=e.map(function(e){return e}),this.$store.commit(this.setGuid+"/ADD_CHECKED",this.tempCheckedList)):(this.$store.commit(this.setGuid+"/DELETE_CHECKED",this.tempCheckedList),this.tempCheckedList=[]),this.$emit("databridge",this.$store.getters[this.setGuid+"/checkedList"])},handleCurrentChange:function(e){e!==this.pageNo&&this.httpRequests(e)},setDynaValue:function(e){if(this.setDynamicValue){var t={};for(var i in this.setDynamicValue)this.setDynamicValue.hasOwnProperty(i)&&(t[i]=Object(s.c)([this.setDynamicValue[i]],e,this.setRowChain,this.tableData[this.dataName],!1,this.setTempData)[0]);return t}return{}},setRowClass:function(){return this.setExpand?"1"===this.setExpandColumnWidth?"hide-expand-column":2===this.maxLayer?"row-expand-cover":"multilevel-expand-cover":""},setHeaderRowClass:function(){return this.setExpand?"1"===this.setExpandColumnWidth?"hide-header-expand-column":2===this.maxLayer&&"1"===this.setExpandColumnWidth?"header-expand-cover":"multilevel-header-expand-cover":""},searchTableData:function(e,t){var i=this;return t&&e?(this.resultTableData=(e.tableData||e.children).find(function(e){if(e._internalId===t)return!0;if(e.children&&e.children.length){var a={titleList:e.titleList,children:e.children,pageData:e.pageData||{}};i.resultTableData=i.searchTableData(a,t)}}),this.resultTableData?this.resultTableData:void 0):{}},callParentMethod:function(e){this.$emit("callmethod",e)},tableDoLayout:function(){var e=this;this.$nextTick(function(t){e.$refs.baseTable&&e.$refs.baseTable.doLayout&&e.$refs.baseTable.doLayout(),e.layer&&e.$emit("table-dolayout")})}}},p=(i("q7oa"),i("jB/s"),i("KHd+")),m=Object(p.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.setTableLoading,expression:"setTableLoading"}],staticClass:"myCoustomTable resetCoustomTableStyle",class:e.setTableClass},[e.setShowTableSet&&"outside"===e.setTableSetMode&&!e.layer?i("table-filter",{attrs:{headerList:e.setColConfigs,tableSwitchState:e.setTableSwitch,storeId:e.pageId,componentId:e.setComponentId},on:{"checked-list":e.checkedList,"checked-height":e.checkedHeight}}):e._e(),e._v(" "),i("div",{style:{height:e.setTableHeight}},[i("el-form",{ref:"ruleForm",style:{height:e.layer?"auto":"100%"},attrs:{model:e.ruleForm,"status-icon":""},nativeOn:{submit:function(e){e.preventDefault()}}},[i("el-table",{ref:"baseTable",style:{width:e.setRootWidth},attrs:{data:e.tableData[e.dataName],stripe:!e.setExpand||"50"===e.setExpandColumnWidth,"highlight-current-row":"",border:e.setTableBorder,"current-row-key":"_internalId","tooltip-effect":"dark",height:e.layer?null:"100%",fit:"","show-header":e.setShowHeader,"row-key":"_internalId","show-summary":e.setSysSummary,"default-expand-all":!e.setShowExpandBtn&&e.setExpand&&"all"===e.setExpandMode,"header-row-style":e.setHeaderRowStyle,"row-style":e.setRowStyle,"row-class-name":e.setRowClass,"cell-style":e.setCellStyle,"header-cell-style":e.setHeaderCellStyle,"header-row-class-name":e.setHeaderRowClass,"default-sort":e.setSortableConfig["default-sort"]},on:{select:e.selectItem,"select-all":e.selectAllItem,"selection-change":e.selectionChange,"expand-change":e.expandChange,"sort-change":e.sortChange,"row-click":e.rowClick,"row-dblclick":e.rowDblclick}},[e.setExpand?[i("el-table-column",{attrs:{type:"expand",width:e.setExpandColumnWidth,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("multilevel-table",{ref:"multilevelTable",attrs:{"data-custom-table-id":"components_customTable_multilevelTable_index0",tableConfigList:e.tableConfigList,layer:e.layer+1,internalRuleId:t.row._internalId,internalGuid:e.setGuid,parentData:[t.row],rowChain:e.setRowChain,tableSwitchBaseKey:e.columnSwitchBaseKey},on:{databridge:e.databridge,callmethod:e.callParentMethod,"table-dolayout":e.tableDoLayout,"narrow-row":e.narrowRow}})]}}])})]:e._e(),e._v(" "),e.setShowCheckBox?[i("el-table-column",{attrs:{type:"selection",fixed:e.setFixedState,selectable:e.selectable,width:"55",align:"center"}})]:e._e(),e._v(" "),e.setShowIndex?[i("el-table-column",{attrs:{type:"index",index:e.indexMethod,fixed:e.setFixedState,label:"序号",width:"50",align:"center"}})]:e._e(),e._v(" "),e._l(e.setTitleList,function(t,a){return[t.slot?e._t(t.slot,null,{fixed:e.setFixedList[a]}):Array.isArray(t.component)?[i("el-table-column",e._b({key:a,attrs:{"show-overflow-tooltip":"",fixed:e.setFixedList[a],"min-width":t.width||e.setColumnWidth[t.prop]||null,align:"center"},scopedSlots:e._u([{key:"header",fn:function(o){return[i("span",{directives:[{name:"auto-tran",rawName:"v-auto-tran",value:{state:t._isShow,index:a,isComponent:!0,label:t.label,prop:t.prop},expression:"{state:colConfig._isShow,index:infoIndex,isComponent: true,label:colConfig.label,prop:colConfig.prop}"}],staticStyle:{display:"inline-flex","white-space":"nowrap"}},[e._v("\n                  "+e._s(t.label)+"\n                ")])]}},{key:"default",fn:function(a){return["button"===t.componentName?i("div",{directives:[{name:"button-width",rawName:"v-button-width",value:t,expression:"colConfig"}],staticClass:"btnBox",staticStyle:{display:"flex","white-space":"normal","flex-wrap":"wrap"},style:{"justify-content":e.setColumnWidth[t.prop]?"space-between":"center"},on:{click:function(t){e.clickStop(t)},dblclick:function(t){e.clickStop(t)}}},e._l(t.component,function(t,o){return void 0!==t.editBtns_isShow&&!t.editBtns_isShow||!t.rowState||e.setButtonState(a.$index,a.row,t)?i("el-button",{key:o,style:e.setButtonStyle||{height:"24px",padding:"0 5px",margin:0,"font-size":"12px"},attrs:{type:"text"},on:{click:function(e){t.method(a.row,a.$index,a)}}},[e._v(e._s(t.name)+"\n                  ")]):e._e()}),1):e._e()]}}])},"el-table-column",t,!1))]:"object"!=typeof t.component||Array.isArray(t.component)?[t._isShow||"outside"!==e.setTableSetMode?i("el-table-column",{key:a,attrs:{"show-overflow-tooltip":"",label:t.label,prop:t.prop||t.columnIndex,width:t._isShow?t.width||e.constantWidth[t.componentName]||"auto":e.setTableColumnState?"20":"","min-width":t._isShow?t.width||t["min-width"]||e.constantWidth[t.componentName]||e.contentWidthList[a]||"none":"",sortable:!(!e.setSortableConfig[t.prop||t.columnIndex]||!t._isShow),"sort-method":e.setSortableConfig[t.prop||t.columnIndex]&&e.setSortableConfig[t.prop||t.columnIndex]["sort-method"]?e.setSortableConfig[t.prop||t.columnIndex]["sort-method"]:null,"sort-by":e.setSortableConfig[t.prop||t.columnIndex]&&e.setSortableConfig[t.prop||t.columnIndex]["sort-by"]?e.setSortableConfig[t.prop||t.columnIndex]["sort-by"]:null,fixed:e.setFixedList[a],align:"center"},scopedSlots:e._u([{key:"header",fn:function(o){return[i("span",{directives:[{name:"auto-tran",rawName:"v-auto-tran",value:{state:t._isShow,index:a,label:t.label,prop:t.prop},expression:"{state:colConfig._isShow,index:infoIndex,label:colConfig.label,prop:colConfig.prop}"},{name:"custom-table-switch",rawName:"v-custom-table-switch",value:{config:t,index:a,showSwitch:e.setTableColumnState},expression:"{config:colConfig,index:infoIndex,showSwitch:setTableColumnState}"}],style:{display:t._isShow?"inline-flex":"none","white-space":"nowrap"},domProps:{textContent:e._s(t.label)}})]}},{key:"default",fn:function(o){return[i("core-index",{directives:[{name:"show",rawName:"v-show",value:!!t._isShow||"outside"===e.setTableSetMode,expression:"colConfig._isShow?true:setTableSetMode === 'outside'"}],attrs:{scope:o,"info-index":a,"col-config":t,runTime:"multilevel"}})]}}])}):e._e()]:i(t.component,{key:a,tag:"component",attrs:{"col-config":t,fixed:e.setFixedList[a]}})]}),e._v(" "),e.setDragTable?[i("el-table-column",{attrs:{label:"拖拽",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tooltip",{attrs:{effect:"dark",content:"拖拽当前行",placement:"bottom","open-delay":1500,"hide-after":3e3,enterable:!1}},[i("div",{staticStyle:{display:"inline-block"},on:{click:function(t){return t.stopPropagation(),e.clickStop(t)},dblclick:function(t){return t.stopPropagation(),e.clickStop(t)}}},[i("svg-icon",{staticClass:"drag-handler theDragHandle",attrs:{"icon-class":"drag"}})],1)])]}}])})]:e._e()],2)],1),e._v(" "),e.setUseSummary&&e.setCustomSummary.component?[i("custom-summary-option",{attrs:{customSummary:e.setCustomSummary,tempData:e.setTempData,tableData:e.tableData[e.dataName]},on:{"send-height":e.customSummaryHeight,"custom-summary-value":e.customSummaryValue}})]:e._e()],2),e._v(" "),e.setHidePages?e._e():i("div",{staticStyle:{"text-align":"center"},style:{"padding-top":(e.customSummaryOptionHeight||5)+"px",height:this.setSmallPageHeight+"px"}},[i("el-pagination",{attrs:{background:"","current-page":e.tableData.pageData.current,"page-size":e.tableData.pageData.size,layout:"prev, pager, next, jumper",total:e.tableData.pageData.total-0},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.tableData.pageData,"current",t)}}})],1)],1)},[],!1,null,null,null);m.options.__file="index.vue";t.a=m.exports},"2+mA":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("PuDp");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{rebackBillReason:[{required:!0,message:"请填写退单原因！",trigger:"change"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;e.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.rebackWarehouseOutDetail)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退单原因:",prop:"rebackBillReason"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.rebackBillReason,callback:function(t){e.$set(e.temp,"rebackBillReason",t)},expression:"temp.rebackBillReason"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogRebackBill.vue";t.default=s.exports},"2SQY":function(e,t,i){},"2WVR":function(e,t,i){"use strict";var a=i("Onmc");i.n(a).a},"2bT2":function(e,t,i){"use strict";i.r(t);var a={components:{customBaseTable:i("WIyV").a},props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageAssistProductDetail",params:{fieldCode:"prodInfo,unitName,ratio",addColumn:{columnKey:"prodInfo",columnName:"原材料"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:"null"}},customColumn:[{columnIndex:"prodInfo",width:"500",_cellConfig:{hideTitle:!0}}]}},beforeCreate:function(){},created:function(){this.apiObj.params.parentId=this.initData.parentId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.tableData=[],this.tableData=e)},getData:function(){this.$refs.customBaseTable.getData()},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 20px 20px"}},[i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistBase_assistProduct_dialogAssistProductDetail0",showIndex:!1,showTableSet:!1,showCheckBox:!1,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogAssistProductDetail.vue";t.default=n.exports},"2iTg":function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=i("M994"),n={components:{multilevelTable:a.a,dialogRebackWarehouseOut:o.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tableData:[],selectList:[],configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:this.initData.temp.id}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"退单",nameEn:"rebackWarehouseOut",editBtns_isShow:!0,method:this.rebackWarehouseOut}]}],apiObj:{apiName:"listPageWarehouseOutExecutes",params:{fieldCode:"warehouseName,code,actualCount,executorName,endDate",executeIsdisable:"1",isNeedPage:"false"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},databridge:function(e){this.selectList=e},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.showDialog=!1,this.isVisible=!1},rebackWarehouseOut:function(e){this.dialogData.outExecuteId=e.id,this.dialogData.productId=e.productId,this.dialogData.title="退单原因",this.openDialogName="dialogRebackWarehouseOut",this.showDialog=!0,this.inLinVisible=!0}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"90px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseByWC_outByWC_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogView.vue";t.default=s.exports},"3+RD":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("2SRW");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{auditJsonStr:"",dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写审核原因",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},formTemp:[]}},created:function(){this.auditJsonStr=this.initData.temp.auditJsonStr},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.temp.auditExecuteJsonStr=this.auditJsonStr,this.$refs.submitForm.validate(function(t){t&&Object(a.auditDisagreeWarehouseCheckExecute)(e.temp).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"审核成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"不通过原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAuditDisagree.vue";t.default=s.exports},"3Er3":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}],entityTypeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.entityTypeData.defaultSelected.length<=0?a(new Error("请选择仓库类型")):a()}}]},entityTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseType",isglobal:"1"}},defaultSelected:[]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",fullscreen:!1,tempLable:null},formTemp:[]}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{entityTypeSelect:function(e){e[0]?(this.temp.entityType=e[0],this.entityTypeData.defaultSelected=[e[0]]):(this.temp.entityType=[],this.entityTypeData.defaultSelected=[])},dialogOpen:function(){var e=this;this.entityTypeData.defaultSelected=[],this.entityTypeData.defaultSelected.push(this.temp.entityType),this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateWarehouseByEntity)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"仓库性质:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{value:"实体库",readonly:!0}})],1),e._v(" "),i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.entityTypeName+":",prop:"entityTypeName"}},[i("base-input-select",{attrs:{data:e.entityTypeData.data},on:{callback:e.entityTypeSelect},model:{value:e.entityTypeData.defaultSelected,callback:function(t){e.$set(e.entityTypeData,"defaultSelected",t)},expression:"entityTypeData.defaultSelected"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseEntityEdit.vue";t.default=s.exports},"3HQu":function(e,t,i){},"3Hp2":function(e,t,i){"use strict";var a=i("g8mI");i.n(a).a},"3KXJ":function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseInDetail",params:{fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,remark",parentId:""}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseInExecute",params:{fieldCode:"pathName,count,executeUserName,executeTimeStr",isNeedPage:"false"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){this.tableConfigList[0].apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},databridge:function(e){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_sale_saleInWC_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogView.vue";t.default=n.exports},"3RIN":function(e,t,i){"use strict";i.r(t);i("91GP");var a=i("lX1r"),o=i("uTIz"),n=(i("z0WU"),{name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",searchConfig:{hideSearchSwitch:!1},searchList:[{label:"收款单号",type:"input",ruleType:"string",mapKey:"code",configs:{},placeholder:"请输入收款单号"},{label:"客户名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"请输入客户名称"}],guid:"",currentpage:1,maxLayer:2,expandTableApiList:["listPageSaleReceives","listPageSaleReceiveDetails"],expandTableApiParams:[{},{}],tableData:{},initParams:{},updateViewData:{},searchObj:{},childrenData:{},customColumn:{1:[],2:[]},tableSets:{1:{showCheckBox:!1,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},temp:{},tempQuery:{},tempLable:{},selectList:[],pageData:null,pageNo:1,openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{expandTable:a.a,searchBar:o.a},beforeCreate:function(){},created:function(){this.temp=this.initData.temp,this.initExpandTable()},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.refreshTable()},initExpandTable:function(){var e=this;this.$api[this.expandTableApiList[0]](this.setParams(1,this.initParams,this.currentpage)).then(function(t){e.tableData={row:null,layer:1,res:t,customColumn:e.customColumn},e.$loading().close()}).catch(function(t){e.$loading().close()})},findChildByRow:function(e,t,i,a,o){var n=this;this.$api[this.expandTableApiList[t-1]](this.setParams(t,e,o)).then(function(i){n.childrenData={row:e,layer:t,res:i,customColumn:n.customColumn}}).catch(function(e){})},setParams:function(e,t,i){if(e>1){var a=this.expandTableApiParams[e-1];for(var o in a)a.hasOwnProperty(o)&&(a[o]=t[o]||"");return Object.assign({},a,this.searchObj,{pageNo:i},{parentId:t.id})}return Object.assign({},t,this.searchObj,{pageNo:i},{customerId:this.temp.id},{orderStr:" receive.cdate desc "})},sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.initExpandTable()},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{pageNo:function(){}}}),l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":"",width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}],staticStyle:{padding:"7px"}},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,searchConfig:e.searchConfig},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("div",{staticStyle:{border:"1px solid #E4E4E4","border-bottom":"none"}},[i("expand-table",{attrs:{initData:e.tableData,childrenData:e.childrenData,configs:e.tableSets,currentpage:e.currentpage,apiObj:{apiName:e.expandTableApiList,apiParams:e.expandTableApiParams},updateViewData:e.updateViewData},on:{"update:currentpage":function(t){e.currentpage=t},databridge:e.databridge,"send-children-row":e.findChildByRow}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogReceiptList.vue";t.default=s.exports},"3akZ":function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("f3/d"),i("Oyvg"),i("rGqo");var a=i("0CID"),o=i("Qe0A"),n=i("PuDp"),l=i("z0WU"),s=i("mSNy");function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.deleteBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteBtns(scope.row,scope.$index)">删除</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.count" ></el-input>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},p={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.remark" ></el-input>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},m={components:{selectProduct:a.default},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],selectList:null,deleteIds:"",initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:d,deleteBtns:this.deleteBtns,deleteBtns_isShow:!0}},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},pageData:null,pageNo:1,typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{isNeedName:"true",nameValue:"备件出库",dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntityVirtual:"true",isNeedSpare:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"1"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.warehouseData.defaultSelected[0]=this.initData.temp.warehouseId,this.initTable(this.initData.temp.id)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=c(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{initTable:function(e){var t=this;this.dialogLoading=!0,Object(n.listPageWarehouseOutDetails)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){r(e,t,i[t])})}return e}({},this.tempQuery,{parentId:e,fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,stateName,remark",pageNo:1,pageSize:1e4})).then(function(e){t.getListPage(e),t.dialogLoading=!1}).catch(function(e){t.dialogLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(l.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==s.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==s.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==s.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==s.a.locale&&(e.label=t.substring(0,t.indexOf("_")))),"count"===e.prop&&(e.component=u),"remark"===e.prop&&(e.component=p)}),this.internationalConfig(),e.push(this.initConfigs.tableOperates),e},internationalConfig:function(){"en"==s.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==s.a.locale&&(this.initConfigs.tableOperates.label="操作")},dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},addProduct:function(){if(this.temp.warehouseId){var e="prod.id in (select DISTINCT product_id from vmes_warehouse_product where warehouse_id in (select id from vmes_warehouse where company_id = '"+this.$storage.get("userInfo").companyId+"' and name = '备件库' and layer = 2 ))";this.dialogData.queryStr=e,this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="selectProduct",this.showDialog=!0,this.inLinVisible=!0}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i].count;if(null==a||0==a.trim().length)t=t+"第 "+(i+1)+" 行: 出库数量为空或空字符串！";else new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(a)||(t=t+"第 "+(i+1)+" 行: 出库数量("+a+")输入错误，请输入大于零的正整数或(1,2)位小数！")}return t},saveWarehouseOut:function(){var e=this,t="";if(null!=this.tableData&&0!=this.tableData.length){var i=this.checkColumn(this.tableData);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{for(var a=[],n=0;n<this.tableData.length;n++){var l=this.tableData[n],s={productId:"",count:"",remark:"",id:""};s.productId=l.productId,s.count=l.count,s.remark=l.remark,s.id=l.id,a.push(s)}t=JSON.stringify(a),this.temp.dtlJsonStr=t,this.temp.deleteIds=this.deleteIds,this.temp.type=this.typeData.defaultSelected[0],this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,e.temp.warehouseDeptId=e.temp.deptId,Object(o.updateWarehouseOutBySimple)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){}))})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deleteBtns:function(e,t){this.tableData.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[])},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:"",count:"",state:"待派工",remark:"",id:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),null!=a.unitName&&a.unitName.trim().length>0&&(o.productUnitName=a.unitName.trim()),this.tableData.push(o)}}},watch:{}},h=i("KHd+"),g=Object(h.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{"margin-top":"10px"}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"仓库:",prop:"warehouseName"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{data:e.warehouseData.data},on:{callback:e.warehouseSelect},model:{value:e.warehouseData.defaultSelected,callback:function(t){e.$set(e.warehouseData,"defaultSelected",t)},expression:"warehouseData.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{height:"300px",width:"96%","margin-left":"2%"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveWarehouseOut}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);g.options.__file="dialogEdit.vue";t.default=g.exports},"3b2h":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("63W0");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{dateArray:[],sysPeriodTypeOption:[],sysPeriodTypeOptionDefault:[{label:"每天",value:"everDay"},{label:"每周星期几",value:"dayOfWeek"},{label:"每月第几个星期几",value:"weekOfMonth"},{label:"每年某月某日",value:"dayOfYear"},{label:"工作日[周1-周5]",value:"workDay"},{label:"自定义周期",value:"customPeriod"}],dayOfWeekOption:[],dayOfMonthOption:[],isShowCustomPeriod:!1,isShowDayOfWeek:!1,isShowDayOfMonth:!1,rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",beginPlan:"",endPlan:"",sysPeriodType:"",periodCount:"",periodType:"",periodDayofweek:"",periodDayofmonth:""}}},created:function(){var e=this;this.dateArray[0]=this.initData.rowData.beginPlanStr,this.dateArray[1]=this.initData.rowData.endPlanStr,this.initialDayOfWeekOption(),this.initialDayOfMonthOption(),this.formData.id=this.initData.rowData.id,this.formData.sysPeriodType=this.initData.rowData.sysPeriodType,this.formData.periodCount=this.initData.rowData.periodCount,this.formData.periodType=this.initData.rowData.periodType,this.formData.periodDayofweek=this.initData.rowData.periodDayofweek,this.formData.periodDayofmonth=this.initData.rowData.periodDayofmonth,this.sysPeriodTypeOption=this.sysPeriodTypeOptionDefault,Object(a.findSysPeriodTypeOption)({beginPlan:this.initData.rowData.beginPlan}).then(function(t){if(null!=t.options&&t.options.length>0){e.sysPeriodTypeOption=[];for(var i=0;i<t.options.length;i++){var a={label:t.options[i].label,value:t.options[i].value};e.sysPeriodTypeOption.push(a)}}})},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},hideDefaultDiv:function(){this.isShowCustomPeriod=!1,this.isShowDayOfWeek=!1,this.isShowDayOfMonth=!1},cleanColumnByBeginEndPlanChange:function(){this.formData.sysPeriodType="",this.sysPeriodTypeOption=this.sysPeriodTypeOptionDefault,this.formData.periodCount="",this.formData.periodType="",this.formData.periodDayofweek="",this.formData.periodDayofmonth=""},initialDayOfWeekOption:function(){for(var e=1;e<=7;e++)if(1==e){this.dayOfWeekOption.push({label:"星期一",value:"MONDAY"})}else if(2==e){this.dayOfWeekOption.push({label:"星期二",value:"TUESDAY"})}else if(3==e){this.dayOfWeekOption.push({label:"星期三",value:"WEDNESDAY"})}else if(4==e){this.dayOfWeekOption.push({label:"星期四",value:"THURSDAY"})}else if(5==e){this.dayOfWeekOption.push({label:"星期五",value:"FRIDAY"})}else if(6==e){this.dayOfWeekOption.push({label:"星期六",value:"SATURDAY"})}else if(7==e){this.dayOfWeekOption.push({label:"星期日",value:"SUNDAY"})}},initialDayOfMonthOption:function(){for(var e=1;e<=31;e++){var t=e+"";1==t.trim().length&&(t="0"+t);var i={label:t,value:t};this.dayOfMonthOption.push(i)}},beginEndPlanChange:function(){var e=this;null!=this.dateArray&&2==this.dateArray.length&&(this.cleanColumnByBeginEndPlanChange(),this.hideDefaultDiv(),Object(a.findSysPeriodTypeOption)({beginPlan:this.dateArray[0]}).then(function(t){if(null!=t.options&&t.options.length>0){e.sysPeriodTypeOption=[];for(var i=0;i<t.options.length;i++){var a={label:t.options[i].label,value:t.options[i].value};e.sysPeriodTypeOption.push(a)}}}))},sysPeriodTypeChange:function(e){this.formData.periodCount="",this.formData.periodType="",this.formData.periodDayofweek="",this.formData.periodDayofmonth="",this.hideDefaultDiv(),"customPeriod"==e&&(this.isShowCustomPeriod=!0)},sysPeriodTypeFocus:function(e){null!=this.dateArray&&2==this.dateArray.length||this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择完整的计划起止日期"})},periodTypeChange:function(e){this.formData.periodDayofweek="",this.formData.periodDayofmonth="",this.isShowDayOfWeek=!1,this.isShowDayOfMonth=!1,"week"==e?this.isShowDayOfWeek=!0:"month"==e&&(this.isShowDayOfMonth=!0)},save:function(){var e=this;null!=this.dateArray&&2==this.dateArray.length||this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择完整的计划起止日期"}),this.formData.beginPlan=this.dateArray[0],this.formData.endPlan=this.dateArray[1],this.$refs.submitForm.validate(function(t){t&&Object(a.updateMaintainPlan)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"500px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"计划起止日期:"}},[i("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.beginEndPlanChange},model:{value:e.dateArray,callback:function(t){e.dateArray=t},expression:"dateArray"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"系统匹配周期:"}},[i("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:""},on:{change:e.sysPeriodTypeChange,focus:e.sysPeriodTypeFocus},model:{value:e.formData.sysPeriodType,callback:function(t){e.$set(e.formData,"sysPeriodType",t)},expression:"formData.sysPeriodType"}},e._l(e.sysPeriodTypeOption,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowCustomPeriod,expression:"isShowCustomPeriod"}]},[i("el-row",[i("el-form-item",{attrs:{label:"重复频率:"}},[e._v("\n            每 "),i("el-input-number",{staticStyle:{width:"130px"},attrs:{min:1,max:99999},model:{value:e.formData.periodCount,callback:function(t){e.$set(e.formData,"periodCount",t)},expression:"formData.periodCount"}}),e._v(" "),i("el-select",{attrs:{placeholder:""},on:{change:e.periodTypeChange},model:{value:e.formData.periodType,callback:function(t){e.$set(e.formData,"periodType",t)},expression:"formData.periodType"}},[i("el-option",{attrs:{label:"周",value:"week"}}),e._v(" "),i("el-option",{attrs:{label:"月",value:"month"}})],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowDayOfWeek,expression:"isShowDayOfWeek"}]},[i("el-row",[i("el-form-item",{attrs:{label:"重复时间(周):"}},[i("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:""},model:{value:e.formData.periodDayofweek,callback:function(t){e.$set(e.formData,"periodDayofweek",t)},expression:"formData.periodDayofweek"}},e._l(e.dayOfWeekOption,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowDayOfMonth,expression:"isShowDayOfMonth"}]},[i("el-row",[i("el-form-item",{attrs:{label:"重复时间(月):"}},[i("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:""},model:{value:e.formData.periodDayofmonth,callback:function(t){e.$set(e.formData,"periodDayofmonth",t)},expression:"formData.periodDayofmonth"}},e._l(e.dayOfMonthOption,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="editPeriod.vue";t.default=s.exports},"3cBB":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("Qe0A"),l=i("a0Xs"),s=i("hZMg");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",parentId:""}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{deptType:"6d8a030ba1ce11e884ad00163e105f0a",type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="生产领料出库",this.temp.type="cb0a55d81e754cd3b59715d225dab087",this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(l.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={id:l.id,productId:l.productId,remark:l.remark,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.updateWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,this.temp.deptId="",this.temp.deptName="",Object(s.findUserDepartmentByUser)({userId:this.temp.makeId,deptType:"6d8a030ba1ce11e884ad00163e105f0a"}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_produce_materialRequisition_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},"3dsA":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("sanI"),l=i("Qe0A"),s=i("a0Xs");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddCustomer:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",parentId:""}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"3"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="销售发货出库",this.temp.type="9459be975cd94ada8443cdf32f52c2be",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"},this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(s.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={id:n.id,productId:n.productId,remark:n.remark,priceCount:n.priceCount,priceUnit:n.priceUnit,p2nFormula:n.p2nFormula,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.updateWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]);var t=this.temp.type;this.temp.deptName="",this.temp.deptId="",-1!="cb0a55d81e754cd3b59715d225dab087".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"5"}):-1!="609fa44c031847569a1d9e2516be4b41".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"2"}):-1!="9459be975cd94ada8443cdf32f52c2be".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}):-1!="4cba5d3815644b26920777512a20474b".indexOf(t)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_sale_saleOut_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},"3hmH":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("ywZ6"),l=i("Qe0A"),s=i("a0Xs");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddSupplier:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageForAddFromBOM",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",dtlJsonStr:this.initData.temp}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isOnlyEntity:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"4"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="采购退货出库",this.temp.type="4cba5d3815644b26920777512a20474b",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(s.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={productId:n.productId,priceCount:n.priceCount,priceUnit:n.priceUnit,p2nFormula:n.p2nFormula,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount,remark:n.remark};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.addWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseOutWC_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogAdd.vue";t.default=u.exports},"3n4a":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("EXX/");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{paymentSum:[{required:!0,message:"请填写付款金额",trigger:"change"}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.initData.rowData&&(this.formData=this.initData.rowData)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+\\.{0,1}[0-9]{0,2}$").test(e.trim())},isErrorByCheckPaymentSum:function(e){var t=0;return null!=this.formData.nowPaymentSum&&this.formData.nowPaymentSum.trim().length>0&&(t=this.formData.nowPaymentSum.trim()),this.isNumberByValue(e.trim())?e-t>0&&(this.$message({message:"退款金额:"+e+" 输入错误，退款金额不可大于付款金额(本期)！",type:"warning",duration:5e3}),!0):(this.$message({message:"退款金额:"+e+" 输入错误，请输入大于零的正整数或(1,2)位小数！",type:"warning",duration:5e3}),!0)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){var i=e.formData.paymentSum;e.isErrorByCheckPaymentSum(i)||Object(a.backPaymentRecord)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退款成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})},closeDialog:function(e){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"供应商编号:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.supplierCode,callback:function(t){e.$set(e.formData,"supplierCode",t)},expression:"formData.supplierCode"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"供应商名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"付款金额(本期):"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.nowPaymentSum,callback:function(t){e.$set(e.formData,"nowPaymentSum",t)},expression:"formData.nowPaymentSum"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"退款金额:",prop:"paymentSum"}},[i("el-input",{staticStyle:{width:"200px"},on:{change:e.isErrorByCheckPaymentSum},model:{value:e.formData.paymentSum,callback:function(t){e.$set(e.formData,"paymentSum",t)},expression:"formData.paymentSum"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="backPaymentRecord.vue";t.default=s.exports},"3zMr":function(e,t,i){},"4+6Z":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("HhAy");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-add",props:["initData","visible"],components:{},data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,selectTree:{},temp:{},tempLable:{},tempNotEditable:{deptName:!0},tempShow:{deptName:!0},rules:{name:[{required:!0,trigger:"change",message:"请选择货品"}],ratio:[{required:!0,trigger:"change",validator:function(e,t,i){t?/^[0-9]+(.[0-9]{1,2})?$/.test(t)?i():i(new Error("请填写正确的用料比例，只能填写数字！")):i(new Error("请填写用料比例"))}}]},optionData:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择货品",treeUrl:"/system/dictionary/treeDictionarys",treeParm:{dictionaryKey:"productGenre"},tableUrl:"/base/product/listPageProducts",tableParm:{fieldCode:"code,name,spec,genreName,unitName,remark",pathId:this.initData.selectTree.pathId},temp:{}},dialogName:"dialogTreeOption"}}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.isdefault="1"),this.initData.tempLable&&(this.tempLable=this.initData.tempLable),this.initData.selectTree&&(this.selectTree=this.initData.selectTree,this.temp.parentProdId=this.initData.selectTree.id,this.temp.pathId=this.initData.selectTree.pathId,this.temp.bomId=this.initData.selectTree.bomId,this.temp.bomTreeId=this.initData.selectTree.bomTreeId,this.temp.layer=this.initData.selectTree.layer)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},optionSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.prodId=e[0].id,this.temp.name=e[0].name,this.temp.genreName=e[0].genreName,this.temp.unitName=e[0].unitName,this.temp.typeName=e[0].typeName,this.temp.spec=e[0].spec)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addBomTree)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"500px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"400px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"上级名称:"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.selectTree.name,callback:function(t){e.$set(e.selectTree,"name",t)},expression:"selectTree.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"选择货品:",prop:"name"}},[i("base-input-option",{attrs:{dialog:e.optionData.dialog},on:{callback:e.optionSelect},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.spec+":",prop:"spec"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.spec,callback:function(t){e.$set(e.temp,"spec",t)},expression:"temp.spec"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.genreName+":",prop:"genreName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.genreName,callback:function(t){e.$set(e.temp,"genreName",t)},expression:"temp.genreName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.typeName+":",prop:"typeName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.unitName+":",prop:"unitName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.unitName,callback:function(t){e.$set(e.temp,"unitName",t)},expression:"temp.unitName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"单件用量:",prop:"ratio"}},[i("el-input",{model:{value:e.temp.ratio,callback:function(t){e.$set(e.temp,"ratio",t)},expression:"temp.ratio"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogTreeAdd.vue";t.default=s.exports},"4/ya":function(e,t,i){"use strict";var a=i("wFsc");i.n(a).a},"46wi":function(e,t,i){},"4Bx/":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("11iz");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{cancelReason:[{required:!0,trigger:"change",message:"请填写取消原因"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{repairId:"",repairTaskId:"",cancelReason:""}}},created:function(){this.formData.repairId=this.initData.repairId,this.formData.repairTaskId=this.initData.repairTaskId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.cancelRepairTask)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"取消原因:",prop:"cancelReason"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.cancelReason,callback:function(t){e.$set(e.formData,"cancelReason",t)},expression:"formData.cancelReason"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogCancel.vue";t.default=s.exports},"4Cjf":function(e,t,i){"use strict";t.a={trend:{result:[{month:"2018-01",salesVolume:220,salesNumber:315},{month:"2018-02",salesVolume:20,salesNumber:25},{month:"2018-03",salesVolume:120,salesNumber:135},{month:"2018-04",salesVolume:220,salesNumber:315},{month:"2018-05",salesVolume:320,salesNumber:355},{month:"2018-06",salesVolume:350,salesNumber:415},{month:"2018-07",salesVolume:320,salesNumber:365},{month:"2018-08",salesVolume:420,salesNumber:515},{month:"2018-09",salesVolume:520,salesNumber:615},{month:"2018-10",salesVolume:220,salesNumber:315},{month:"2018-11",salesVolume:330,salesNumber:355},{month:"2018-12",salesVolume:220,salesNumber:315},{month:"2019-01",salesVolume:120,salesNumber:125},{month:"2019-02",salesVolume:110,salesNumber:115},{month:"2019-03",salesVolume:220,salesNumber:315},{month:"2019-04",salesVolume:420,salesNumber:445},{month:"2019-05",salesVolume:520,salesNumber:715},{month:"2019-06",salesVolume:550,salesNumber:730},{month:"2019-07",salesVolume:420,salesNumber:555},{month:"2019-08",salesVolume:590,salesNumber:795},{month:"2019-09",salesVolume:320,salesNumber:415},{month:"2019-10",salesVolume:420,salesNumber:625},{month:"2019-11",salesVolume:720,salesNumber:915},{month:"2019-12",salesVolume:620,salesNumber:825},{month:"2020-01",salesVolume:320,salesNumber:415},{month:"2020-02",salesVolume:220,salesNumber:315},{month:"2020-03",salesVolume:420,salesNumber:515},{month:"2020-04",salesVolume:520,salesNumber:715}]},receivables:{result:[{name:"公司1",proportion:1},{name:"公司2",proportion:2},{name:"公司3",proportion:3},{name:"公司4",proportion:4},{name:"公司5",proportion:5},{name:"公司6",proportion:6},{name:"公司7",proportion:7},{name:"公司888888888888888888",proportion:8},{name:"公司9",proportion:9},{name:"公司10",proportion:10},{name:"公司11",proportion:11},{name:"公司12",proportion:12},{name:"公司13",proportion:13},{name:"公司14",proportion:14},{name:"公司15",proportion:15}]}}},"4Nw2":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("/a8v");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{initialPeriodDate:null,paymentPeriodDate:null,rules:{initialPeriodDate:[{required:!0,message:"请填写初始付款期间",trigger:"change"}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.initData.rowData&&(this.formData=this.initData.rowData)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},changeInitialPeriodDate:function(e){null!=e&&(this.initialPeriodDate=new Date(e),this.formData.initialPeriodDate=e)},changePaymentPeriodDate:function(e){this.paymentPeriodDate=new Date(e),this.formData.paymentPeriodDate=e},isErrorByPeriodDate:function(){var e=this.initialPeriodDate.getTime();if(null!=this.paymentPeriodDate&&this.paymentPeriodDate.getTime()-e<0)return this.$message({message:"当前付款期间不可小于初始付款期间！",type:"warning",duration:5e3}),!0;return!1},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&!e.isErrorByPeriodDate()&&Object(a.addCompanyPeriod)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})},closeDialog:function(e){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"企业编码:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.companyCode,callback:function(t){e.$set(e.formData,"companyCode",t)},expression:"formData.companyCode"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"企业名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.companyName,callback:function(t){e.$set(e.formData,"companyName",t)},expression:"formData.companyName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"初始付款期间:",prop:"initialPeriodDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"month","value-format":"yyyy-MM-dd",placeholder:"选择月"},on:{change:e.changeInitialPeriodDate},model:{value:e.formData.initialPeriodDate,callback:function(t){e.$set(e.formData,"initialPeriodDate",t)},expression:"formData.initialPeriodDate"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"当前付款期间:",prop:"paymentPeriodDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"month","value-format":"yyyy-MM-dd",placeholder:"选择月"},on:{change:e.changePaymentPeriodDate},model:{value:e.formData.paymentPeriodDate,callback:function(t){e.$set(e.formData,"paymentPeriodDate",t)},expression:"formData.paymentPeriodDate"}})],1)],1)],1),e._v(" "),i("div",{staticStyle:{"padding-left":"6%"}},[e._v("\n      备注："),i("br"),e._v("\n      1) 初始付款期间：当前企业首次采购付款结转初始期间"),i("br"),e._v("\n      2) 当前付款期间：供应商在当前付款期间内发生的所有"),i("br"),e._v("\n              \n              \n              \n      (采购金额，付款金额)"),i("br"),e._v("\n      3) 当前付款期间：为空不填保存后默认等于初始付款期间"),i("br"),e._v("\n      例如：201903 表示2019年03月份"),i("br"),i("br")]),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},"4P6j":function(e,t,i){},"4Rkp":function(e,t,i){"use strict";var a=i("GBqP");i.n(a).a},"4Rwx":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("Qe0A"),l=i("a0Xs"),s=i("wk8/");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:"null",fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1",notInids:"'9459be975cd94ada8443cdf32f52c2be','fa51ae2e17a9409d822fc4c9192d652c','8bcbc84893cf46daabbd2522bee482ad','12e84fefddc449a78cc3bf8075475823','9c7be2410a0045c8963f9273fe6da067','def4b13175dc44b08d7a0315b811700e'"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isOnlyEntity:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05"},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(l.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={productId:l.productId,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount,remark:l.remark};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.type=this.typeData.defaultSelected[0],this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.addWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){var t=this;this.temp.deptId="",this.temp.deptName="",e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]);var i=this.temp.type;this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"5"},-1!="9459be975cd94ada8443cdf32f52c2be".indexOf(i)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}):-1!="4cba5d3815644b26920777512a20474b".indexOf(i)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}),"f2b0aaceff914acd8636700a111ca8f0"==i&&Object(s.findUserDepartmentBySystemUser)({userId:this.temp.makeId}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,"f2b0aaceff914acd8636700a111ca8f0"==type&&Object(s.findUserDepartmentBySystemUser)({userId:this.temp.makeId}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouseByWC_outByWC_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogAdd.vue";t.default=u.exports},"4UkQ":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}],entityTypeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.entityTypeData.defaultSelected.length<=0?a(new Error("请选择仓库类型")):a()}}]},entityTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseType",isglobal:"1"}},defaultSelected:[]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",fullscreen:!1,tempLable:null},formTemp:[]}},created:function(){this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{entityTypeSelect:function(e){e[0]?(this.temp.entityType=e[0],this.entityTypeData.defaultSelected=[e[0]]):(this.temp.entityType=[],this.entityTypeData.defaultSelected=[])},dialogOpen:function(){var e=this;this.temp.entityType=this.entityTypeData.defaultSelected[0],this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addWarehouseByEntity)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.entityTypeName+":",prop:"entityTypeName"}},[i("base-input-select",{attrs:{data:e.entityTypeData.data},on:{callback:e.entityTypeSelect},model:{value:e.entityTypeData.defaultSelected,callback:function(t){e.$set(e.entityTypeData,"defaultSelected",t)},expression:"entityTypeData.defaultSelected"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseEntityAdd.vue";t.default=s.exports},"4aGx":function(e,t,i){"use strict";i("f3/d"),i("KKXr"),i("Z2Ku"),i("L9s1"),i("rGqo"),i("yt8O"),i("RW0V"),i("91GP");var a=i("uTIz"),o=i("WIyV"),n=(i("XfO3"),i("HEwt"),i("a1Th"),i("rE2o"),i("ioFf"),i("xfY5"),i("Zni2")),l=i.n(n),s=i("XXtD"),r=(i("75ce"),i("lLGD"),i("0o9m"),i("AH3D"),i("Ynxi"),i("zixQ"),i("4Cjf"));function c(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var d={name:"chart-sales-report-volume-line",components:{chart:l.a,ChartMask:s.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(e){var t=e.split("-");return t[1]=t[1]-0+"月",t.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,c(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var e=Math.max.apply(Math,c(this.salesNumber))-0,t=(Math.floor(e+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,c(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var e=Math.max.apply(Math,c(this.salesVolume))-0,t=(Math.floor(e+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销售额曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"],left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"邮件营销",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",areaStyle:{},data:[-220,182,191,234,290,330,3100]},{name:"视频广告",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",areaStyle:{},data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(e,t){return!!(e&&e.length&&t&&t.length)&&(e[0]>=t[0]&&t[1]>=e[1])},resetResult:function(e){var t=JSON.parse(this.resultData);this.chartData=t.filter(function(t){if(t.month>=e[0]&&e[1]>=t.month)return!0}),this.formatChartData()},formatChartData:function(){var e=this.chartData;e.length&&(this.salesVolume=e.map(function(e){return e.salesVolume-0}),this.salesNumber=e.map(function(e){return e.salesNumber-0}),this.months=e.map(function(e){return e.month}))},httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.resultData=JSON.stringify(r.a.trend.result||[]),e.chartData=r.a.trend.result||[],e.formatChartData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.resultData=JSON.stringify(t.result||[]),e.chartData=t.result||[],e.formatChartData(),e.loading=!1}).catch(function(t){e.loading=!1})}},created:function(){this.httpRequest()},render:function(e){return e("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?e("div",[e("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):e("chart-Mask",{attrs:{loading:this.loading}})])}};function u(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p={name:"chart-sales-report-number-line",components:{chart:l.a,ChartMask:s.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(e){var t=e.split("-");return t[1]=t[1]-0+"月",t.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,u(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var e=Math.max.apply(Math,u(this.salesNumber))-0,t=(Math.floor(e+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,u(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var e=Math.max.apply(Math,u(this.salesVolume))-0,t=(Math.floor(e+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销量曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"],left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"邮件营销",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",areaStyle:{},data:[-220,182,191,234,290,330,3100]},{name:"视频广告",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",areaStyle:{},data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(e,t){return!!(e&&e.length&&t&&t.length)&&(e[0]>=t[0]&&t[1]>=e[1])},resetResult:function(e){var t=JSON.parse(this.resultData);this.chartData=t.filter(function(t){if(t.month>=e[0]&&e[1]>=t.month)return!0}),this.formatChartData()},formatChartData:function(){var e=this.chartData;e.length&&(this.salesVolume=e.map(function(e){return e.salesVolume-0}),this.salesNumber=e.map(function(e){return e.salesNumber-0}),this.months=e.map(function(e){return e.month}))},httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.resultData=JSON.stringify(r.a.trend.result||[]),e.chartData=r.a.trend.result||[],e.formatChartData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.resultData=JSON.stringify(t.result||[]),e.chartData=t.result||[],e.formatChartData(),e.loading=!1}).catch(function(t){e.loading=!1})}},created:function(){this.httpRequest()},render:function(e){return e("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?e("div",[e("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):e("chart-Mask",{attrs:{loading:this.loading}})])}},m=(i("wDdD"),{name:"product-sale-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}}},components:{chart:l.a,ChartMask:s.a},data:function(){return{chartTitles:["销售额占比","销量占比"],chartKeys:["productVolume","productNumber"],baseOption:{},chartData:null,loading:!0}},computed:{hasData:function(){return!!this.chartData},setSeriesData:function(){return this.chartData||{}},defaultOption:function(){var e=this;return this.chartKeys.map(function(t,i){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+e.chartTitles[i]+": {c} ({d}%)"},series:[{name:"产品",type:"pie",data:e.setSeriesData[t],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})}},methods:{httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.chartData=e.tempCreateData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.chartData=t.result||[],e.loading=!1}).catch(function(t){e.loading=!1})},tempCreateData:function(){var e=this,t={};return this.chartKeys.forEach(function(i){t[i]=e.genData(6)}),t},genData:function(e){for(var t=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],i=[],a=[],o={},n=0;n<e;n++)name=Math.random()>.65?l(4,1)+"·"+l(3,0):l(2,1),i.push(name),a.push({name:name,value:Math.round(1e5*Math.random())}),o[name]=n<6;return a;function l(e,i){for(var a=Math.ceil(Math.random()*e+i),o=[],n=0;n<a;n++)o.push(t[Math.round(Math.random()*t.length-1)]);return o.join("")}}},created:function(){this.httpRequest()},render:function(e){var t=this;return e("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.chartTitles.map(function(i,a){return e("el-col",{attrs:{span:12},class:"chartViews"},[e("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:t.loading}]},[e("div",{style:"text-align:center;"},[i]),e("div",{style:{height:"".concat(parseInt(t.height)-120,"px"),position:"relative"}},[t.hasData?e("chart",{style:{height:"100%",width:"100%"},attrs:{options:t.defaultOption[a]}}):e("chart-Mask",{attrs:{loading:t.loading}})])])])})])}}),h={name:"product-customer-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}},list:{type:Array,default:function(){return[]}}},components:{chart:l.a,ChartMask:s.a},data:function(){return{chartTitles:["销售额占比","销量占比"],chartKeys:["productVolume","productNumber"],baseOption:{},chartData:null,loading:!0}},computed:{initLayout:function(){var e=this.list.length;return e<4?{height:"".concat(parseInt(this.height)-120,"px"),span:24/e}:{height:"200px",span:8}},hasData:function(){return!!this.chartData},setSeriesData:function(){return this.chartData||{}},defaultOption:function(){var e=this;return this.chartKeys.map(function(t,i){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+e.chartTitles[i]+": {c} ({d}%)"},series:[{name:"产品",type:"pie",data:e.setSeriesData[t],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})}},methods:{httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.chartData=e.tempCreateData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.chartData=t.result||[],e.loading=!1}).catch(function(t){e.loading=!1})},tempCreateData:function(){var e=this,t={};return this.chartKeys.forEach(function(i){t[i]=e.genData(6)}),t},genData:function(e){for(var t=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],i=[],a=[],o={},n=0;n<e;n++)name=Math.random()>.65?l(4,1)+"·"+l(3,0):l(2,1),i.push(name),a.push({name:name,value:Math.round(1e5*Math.random())}),o[name]=n<6;return a;function l(e,i){for(var a=Math.ceil(Math.random()*e+i),o=[],n=0;n<a;n++)o.push(t[Math.round(Math.random()*t.length-1)]);return o.join("")}}},created:function(){this.httpRequest()},render:function(e){var t=this;return e("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.list.map(function(i,a){return e("el-col",{attrs:{span:t.initLayout.span},class:"chartViews"},[e("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:t.loading}]},[e("div",{style:"text-align:center;"},[a]),e("div",{style:{height:t.initLayout.height,position:"relative"}},[t.hasData?e("chart",{style:{height:"100%",width:"100%"},attrs:{options:t.defaultOption[a]}}):e("chart-Mask",{attrs:{loading:t.loading}})])])])})])}},g=i("KA1N"),f={name:"charts-sale-customer",components:{baseTable:o.a,searchBar:a.a,volumeLine:d,numberLine:p,salePie:m,customerPie:h},data:function(){return{guid:"",searchList:[{label:"货品编码",type:"input",mapKey:"productCode",configs:{},placeholder:"请输入编码"},{label:"货品名称",type:"input",mapKey:"productName",configs:{},placeholder:"请输入名称"},{label:"型号规格",type:"input",mapKey:"productNuit",configs:{},placeholder:"请输入规格"},{label:"属性",type:"input",mapKey:"productAttr",configs:{},placeholder:"请输入属性"},{label:"客户名称",type:"input",mapKey:"customerName",configs:{},placeholder:"请输入属性"},{label:"统计周期",type:"radio",mapKey:"cycle",configs:{options:["日","月","年"],defaultValue:0}},{label:"日期范围",type:"date",mapKey:"date",configs:{clearable:!0,name:"",type:"daterange",pickerOptions:{disabledDate:[null,Object(g.a)()],hideShortcuts:!0},dynamic:{key:"cycle",options:{0:"daterange",1:"monthrange",2:"monthrange"}}},placeholder:"请选择"}],searchObj:{},tableConfigList:[{apiObj:{apiName:"salesCustomerQueryByDMY",params:{}},showCheckBox:!0,useSummary:!0}],userSelectedList:[],dialogVisible:[!1,!1,!1,!1],dialogIndex:0,dialogTitle:["销售额曲线","销量曲线","销量占比","客户产品"],volumeLineApiObj:{apiName:"salesCustomerVolumeByDMY",params:{}},numberLineApiObj:{apiName:"salesCustomerNumberByDMY",params:{}},salepieApiObj:{apiName:"salesCustomerProportion",params:{}},customerpieApiObj:{apiName:"salesCustomerProduct",params:{}}}},computed:{systemInfo:function(){return this.$store.getters.systemInfo},size:function(){return this.$store.getters.size},tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0)-36+"px":"100%"},setVolumeLineApiObj:function(){var e=Object.assign({},this.searchObj,{productIds:this.userSelectedList.map(function(e){return e.id||""})||[]});return this.volumeLineApiObj.params=Object.assign({},this.volumeLineApiObj.params,e),this.volumeLineApiObj},setNumberLineApiObj:function(){var e=Object.assign({},this.searchObj,{productIds:this.userSelectedList.map(function(e){return e.id||""})||[]});return this.numberLineApiObj.params=Object.assign({},this.numberLineApiObj.params,e),this.numberLineApiObj},formatParams:function(){var e={cycle:"D",startDate:Object(g.a)("YYYY-MM-DD",this.setDate("D",!0)),endDate:Object(g.a)("YYYY-MM-DD",this.setDate("D",!1))},t=Object.keys(this.searchObj);if(t.length){if(t.includes("cycle"))switch(this.searchObj.cycle){case 0:e.cycle="D";break;case 1:e.cycle="M";break;case 2:e.cycle="Y";break;default:e.cycle="D"}t.includes("date")&&this.searchObj.date.length?(e.startDate=Object(g.a)("YYYY-MM-DD",this.searchObj.date[0]),e.endDate=Object(g.a)("YYYY-MM-DD",this.searchObj.date[1])):"D"!==e.cycle&&(delete e.startDate,delete e.endDate)}return e}},methods:{setLastDate:function(e){return["01","03","05","07","08","10","12"].includes(e)?"31":"02"==e?((new Date).getFullYear()-0)%4==0?"29":"28":"30"},setDate:function(e,t){var i=Object(g.a)().split("-");return"D"==e&&(i[2]=t?"01":i[2]),"M"!=e&&"Y"!=e||(i[2]=t?"01":this.setLastDate(i[1]),i[1]=t?"01":i[1]),i.join("-")},sendGuid:function(e){this.guid=e},searchMap:function(e){this.userSelectedList=[],this.searchObj=e,this.tableConfigList[0].apiObj.params=Object.assign({},this.formatParams),this.volumeLineApiObj.params=Object.assign({},this.formatParams),this.numberLineApiObj.params=Object.assign({},this.formatParams)},databridge:function(e){this.userSelectedList=e},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},showSaleCustomerDialog:function(e){if(this.resetSaleCustomerDialog(),this.dialogIndex=e,3===e){var t=JSON.parse(JSON.stringify(this.userSelectedList));this.$refs.customBaseTable.getData();var i=this.setPieParams(t);this.customerpieApiObj.params=Object.assign({},i)}this.dialogVisible[this.dialogIndex]=!0},resetSaleCustomerDialog:function(){this.dialogVisible=[!1,!1,!1,!1]},setPieParams:function(e){var t=[],i=[];e.forEach(function(e){t.includes(e.id)||(t.push(e.id),i.push(e.name))});var a=this.userSelectedList[0].date,o=this.userSelectedList[this.userSelectedList.length-1].date,n=this.formatParams.cycle;return this.userSelectedList=i,{productIds:t,startDate:a,endDate:o,cycle:n}}},created:function(){this.tableConfigList[0].apiObj.params=Object.assign({},this.formatParams),this.volumeLineApiObj.params=Object.assign({},this.formatParams),this.numberLineApiObj.params=Object.assign({},this.formatParams)}},b=(i("BMZf"),i("KHd+")),v=Object(b.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sale-customer"},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,inChart:!0},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",[i("el-button",{attrs:{type:"primary",size:e.size},on:{click:function(t){e.showSaleCustomerDialog(0)}}},[e._v("销售额曲线")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:e.size},on:{click:function(t){e.showSaleCustomerDialog(1)}}},[e._v("销量曲线")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:e.size},on:{click:function(t){e.showSaleCustomerDialog(2)}}},[e._v("销量占比")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:e.size,disabled:!e.userSelectedList.length},on:{click:function(t){e.showSaleCustomerDialog(3)}}},[e._v("客户产品")])],1),e._v(" "),i("el-row",{staticStyle:{"border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.tableHeight,"margin-top":e.searchList.length?"10px":"0"}},[i("base-table",{ref:"customBaseTable",attrs:{tableConfigList:e.tableConfigList},on:{databridge:e.databridge,callmethod:e.callMethod}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.dialogTitle[e.dialogIndex],"close-on-click-modal":!1,visible:e.dialogVisible[e.dialogIndex],width:"mini"===e.size?"800px":"1200px"},on:{"update:visible":function(t){e.$set(e.dialogVisible,e.dialogIndex,t)}}},[e.dialogVisible[0]?[i("volume-line",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.volumeLineApiObj}})]:e.dialogVisible[1]?[i("number-line",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.numberLineApiObj}})]:e.dialogVisible[2]?[i("sale-pie",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.salepieApiObj}})]:e.dialogVisible[3]?[i("customer-pie",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.customerpieApiObj,list:e.userSelectedList}})]:e._e(),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.resetSaleCustomerDialog}},[e._v("关 闭")])],1)],2)],1)},[],!1,null,"1e3cf146",null);v.options.__file="index.vue";t.a=v.exports},"4rm1":function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rGqo");var a=i("mSNy"),o=i("a0Xs"),n=i("z0WU");function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var r={name:"dialog-option",props:["initData","visible"],data:function(){return{productId:"",dialogTopLoading:!1,isVisible:!1,title:"",topBarBtnList:[{name:"查询",icon:"search",method:this.queryTable},{name:"重置",icon:"refresh",plain:!0,method:this.resetQueryTemp}],initConfigs:{tableOperates:{}},configs:{topBarBtnList:[],tableConfigs:[],showCheckBox:!1,showIndex:!1,isSingle:!1},tableData:[],selectList:[],queryParms:[],temp:{},tempQuery:{},tempLable:{},pageData:null,pageNo:1,openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.productId=this.initData.productId,this.initTable(!0)},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},queryTable:function(){this.pageNo=1,this.initTable(!0)},initTable:function(e){var t=this;t.dialogTopLoading=!0,Object(o.listPageProductUnitPrices)(l({},t.tempQuery,{productId:this.productId,pageNo:t.pageNo})).then(function(i){t.getListPage(i),e&&(t.dialogTopLoading=!1)}).catch(function(e){t.dialogTopLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!0,this.configs.showIndex=!0,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var o=e[i];o.indexOf("_")>0&&("en"==a.a.locale?o=o.substring(o.indexOf("_")+1):"zh"==a.a.locale&&(o=o.substring(0,o.indexOf("_")))),t.tempLable[i]=o}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==a.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==a.a.locale&&(e.label=t.substring(0,t.indexOf("_"))))}),e},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.refreshTable()},refreshTable:function(){var e=this;e.$axios.all([Object(o.listPageProductUnitPrices)(l({},e.tempQuery,{productId:this.productId,pageNo:e.pageNo}))]).then(e.$axios.spread(function(t){e.getListPage(t)})).catch(function(e){})},dataBridge:function(e){this.selectList=e},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]=""}},computed:{dialogName:function(){return this.openDialogName}},watch:{pageNo:function(){this.initTable()}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{padding:"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,isSortable:!1,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);d.options.__file="dialogPriceList.vue";t.default=d.exports},"4vWl":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("UHWX");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{rebackRemark:[{required:!0,message:"请填写退单原因！",trigger:"change"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;e.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.rebackWarehouseInExecute)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退单原因:",prop:"rebackRemark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.rebackRemark,callback:function(t){e.$set(e.temp,"rebackRemark",t)},expression:"temp.rebackRemark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogRebackBill.vue";t.default=s.exports},"50Ol":function(e,t,i){"use strict";i("rGqo"),i("KKXr"),i("91GP");var a={name:"custom-summary-option",props:{customSummary:{type:Object,default:function(){return{}}},tableData:{type:Array,default:function(){return[]}},tempData:{type:Object,default:function(){return{}}}},data:function(){return{boxDefaultStyle:{width:"600px",float:"left"},data:{}}},directives:{"send-height":{inserted:function(e,t,i){i.context.$emit("send-height",e.clientHeight)}}},computed:{setStyle:function(){return this.customSummary.boxStyle||this.boxDefaultStyle},setData:function(){return this.customSummary.computes&&this.createFormula(this.customSummary.computes,this.tableData,this.tempData),this.data}},created:function(){this.data=this.customSummary.data,this.customSummary.apiObj&&this.customSummary.apiObj.apiName&&this.httpRequests()},mounted:function(){},methods:{httpRequests:function(){var e=this;try{this.$api[this.customSummary.apiObj.apiName](Object.assign({},this.customSummary.apiObj.params)).then(function(t){t.result&&e.assignmentFn(t.result)}).catch(function(e){})}catch(e){}},assignmentFn:function(e){for(var t in this.data)this.data.hasOwnProperty(t)&&(this.data[t]=e[t])},createFormula:function(e,t,i){for(var a in e)if(e.hasOwnProperty(a)){var o=e[a].split(/\([\\+|\-|\\*|\\/]\)/);if(o.length>1)o.forEach(function(e){});else{var n=e[a].split("@");"table"===n[0]&&(this.data[a]=this.getSum(n[1],t))}}},getSum:function(e,t){var i=0;return t.forEach(function(t){i+=t[e]-0}),i},customSummaryValue:function(e){this.$emit("custom-summary-value",e)}}},o=(i("MtNS"),i("KHd+")),n=Object(o.a)(a,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"customSummaryOption clearfix"},[t(this.customSummary.component,{directives:[{name:"send-height",rawName:"v-send-height"}],tag:"component",attrs:{data:this.setData,tempData:this.tempData,setStyle:this.customSummary.boxStyle},on:{"custom-summary-value":this.customSummaryValue}})],1)},[],!1,null,null,null);n.options.__file="index.vue";t.a=n.exports},"57D1":function(e,t,i){"use strict";i.r(t);var a=i("9wPf"),o={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",remark:""},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.formData.remark=this.initData.rowData.remark,this.formData.id=this.initData.rowData.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){e.dialogLoading=!0,Object(a.rebackAuditFinanceBillByPurchase)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"设定成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})})},closeDialog:function(e){}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogReback.vue";t.default=l.exports},"57Me":function(e,t,i){"use strict";i.r(t);i("KKXr"),i("f3/d"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("t3Un")),l={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",state:!0,isShow:!0,plain:!0,icon:"refresh",method:this.resetQuery}],aboveTableConfig:{apiObj:{apiName:"listPageProducts",params:{fieldCode:"prodInfo,unitName,stockCount,safetyCount,lockCount,productStockCount",prodColumnKey:"code,name,spec,property"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!0,showTableSet:!1,showAll:!1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,dragTable:!1,entireRowDrag:!1},addColumns:[{columnIndex:9,label:"计划数量",prop:"count",componentName:"input",width:120,_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{greaterThan:["0",!1]}],message:["请输入大于零的正整数或(1,2)位小数！","不可等于零！"]}}],hideColumns:[],tableSelectList:[]}},created:function(){var e="";null!=this.initData.queryStr&&(e=this.initData.queryStr);var t="";t=null!=this.initData.orderStr?this.initData.orderStr:"prod.stock_count desc";var i="";if(null!=this.initData.tableData&&this.initData.tableData.length>0)for(var a=0;a<this.initData.tableData.length;a++){var o=this.initData.tableData[a];null!=o.productId&&o.productId.trim().length>0&&(i=i+o.productId+",")}var n=!0;null!=this.initData.isNeedRepeat&&(n=this.initData.isNeedRepeat),n||null!=i&&i.trim().length>0&&(i=i.substring(0,i.lastIndexOf(",")),e="prod.id not in ("+(i=this.findQueryProductIds(i))+")"),this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,{queryStr:e,orderStr:t,isdisable:"1"}),this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{selectList:this.tableSelectList,pageName:"selectProductByProducePlan"})},closeDialog:function(e){},tableSelected:function(e){this.tableSelectList=e},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.tempQuery.pid=this.selectTree.id,this.tempQuery.layer=this.selectTree.layer,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name},t.push(i),this.treeData=t,this.dialogLoading=!1},initTree:function(){var e=this;this.dialogLoading=!0,Object(n.a)({url:"/system/dictionary/treeDictionarys",method:"post",data:{dictionaryKey:"productGenre"}}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},findQueryProductIds:function(e){var t="";if(null==e||0==e.trim().length)return t;var i=e.split(",");if(null!=i&&i.length>0)for(var a=i.length,o=0;o<i.length;o++){var n="'"+i[o]+"'";o<a-1?t=t+n+",":o==a-1&&(t+=n)}return t},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},confrim:function(){this.$refs.trabsferTables.getTableSelected(),this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"选择货品",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="selectProductByProducePlan.vue";t.default=r.exports},"5BnR":function(e,t,i){"use strict";i.r(t);i("91GP"),i("rGqo");var a=i("lX1r"),o=i("uTIz"),n=i("LCER"),l=(i("z0WU"),{name:"dialog-option",props:["initData","visible"],data:function(){return{nextButtonShow:!0,dialogTopLoading:!1,isVisible:!1,title:"",searchConfig:{hideSearchSwitch:!1},searchList:[{label:"订单号",type:"input",ruleType:"string",mapKey:"orderCode",configs:{},placeholder:"订单号"},{label:"下单日期起",type:"date",ruleType:"date",mapKey:"orderDateBegin",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"},{label:"下单日期止",type:"date",ruleType:"date",mapKey:"orderDateEnd",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"}],guid:"",currentpage:1,maxLayer:2,expandTableApiList:["listPageOrderReceiveDetail","listPageSaleDeliverDetail"],expandTableApiParams:[{},{}],tableData:{},initParams:{},updateViewData:{},searchObj:{},childrenData:{},customColumn:{1:[],2:[]},tableSets:{1:{showCheckBox:!0,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},temp:{},tempQuery:{},tempLable:{},selectList:[],pageData:null,pageNo:1,openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{expandTable:a.a,searchBar:o.a,dialogReceiptAdd:n.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,"订单收款明细"==this.title?(this.nextButtonShow=!1,this.tableSets[1].showCheckBox=!1,this.expandTableApiParams=[{orderStateNotin:"'-1'"},{}]):(this.nextButtonShow=!0,this.expandTableApiParams=[{havingStr:" sOrder.state > 1 ",orderStateNotin:"'-1','4'"},{}]),this.temp=this.initData.temp,this.initExpandTable()},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{nextPage:function(){if(this.selectList.length<=0)this.$message({showClose:!0,message:"请勾选收款费用分摊明细！",duration:5e3});else{var e="";this.selectList.forEach(function(t){e=e?e+",'"+t.id+"'":"'"+t.id+"'"}),this.dialogData.temp=this.temp,this.dialogData.ids=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="订单结算",this.openDialogName="dialogReceiptAdd",this.showDialog=!0,this.visibleState=!0}},dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState?this.dialogClose():(this.initExpandTable(),this.selectList=[])},initExpandTable:function(){var e=this;this.$loading({spinner:"preloader",text:""}),this.$api[this.expandTableApiList[0]](this.setParams(1,this.initParams,this.currentpage)).then(function(t){e.tableData={row:null,layer:1,res:t,customColumn:e.customColumn},e.$loading().close()}).catch(function(t){e.$loading().close()})},findChildByRow:function(e,t,i,a,o){var n=this;this.$api[this.expandTableApiList[t-1]](this.setParams(t,e,o)).then(function(i){n.childrenData={row:e,layer:t,res:i,customColumn:n.customColumn}}).catch(function(e){})},setParams:function(e,t,i){if(e>1){var a=this.expandTableApiParams[e-1];for(var o in a)a.hasOwnProperty(o)&&(a[o]=t[o]||"");return Object.assign({},a,this.searchObj,{pageNo:i},{orderId:t.id},{fieldCode:"deliverCode,productCode,productName,productSpec,productGenreName,orderUnitName,orderDetailCount,orderCount,,productPrice,sum,deliverDate,stateName"})}return Object.assign({},t,this.searchObj,{pageNo:i},{customerId:this.temp.id},this.expandTableApiParams[0])},sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.initExpandTable()},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{currentpage:function(){this.initExpandTable(),this.selectList=[]}}}),s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":"",width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}],staticStyle:{padding:"0 10px"}},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,searchConfig:e.searchConfig},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("div",{staticStyle:{border:"1px solid #E4E4E4","border-bottom":"none"}},[i("expand-table",{attrs:{initData:e.tableData,childrenData:e.childrenData,configs:e.tableSets,currentpage:e.currentpage,apiObj:{apiName:e.expandTableApiList,apiParams:e.expandTableApiParams},updateViewData:e.updateViewData},on:{"update:currentpage":function(t){e.currentpage=t},databridge:e.databridge,"send-children-row":e.findChildByRow}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.nextButtonShow,expression:"nextButtonShow"}],on:{click:e.nextPage}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);r.options.__file="dialogSelectDeliverList.vue";t.default=r.exports},"5FSm":function(e,t,i){"use strict";i.r(t);var a=i("WIyV"),o=i("3LyK"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){var e=this;return{rules:{receiptTypeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.temp.receiptType.length<=0?a(new Error("请选择发票类型")):a()}}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{orderId:"",receiptTypeBefore:"",receiptTypeAfter:""},tableData:[],orderDtlList:[],apiObj:{apiName:"listPageOrderDetaiByChange",params:{fieldCode:"prodInfo,orderUnitName,orderCount,deliverCount,retreatCount,miniChangeCount,newOrderCount,newDeliverDate",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:"",queryState:"'2','3','4'",isOrderChange:"0"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"newOrderCount",width:"130",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{greaterThan:["self@miniChangeCount",!0]}],message:["此项不能为空！","请输入大于零的整数或(1,2)位小数！","不可小于最小变更数"]}},{columnIndex:"newDeliverDate",width:"180",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",rules:[{required:!0}],message:["此项不能为空！"]}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.temp=this.initData.temp,this.temp.orderId=this.initData.temp.id,this.temp.receiptTypeBefore=this.initData.temp.receiptType,this.apiObj.params.parentId=this.initData.temp.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){this.orderDtlList=[],Array.isArray(e)&&(this.orderDtlList=e)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.orderDtlList=[],e.$refs.orderEditDialog.getData(),null!=e.orderDtlList&&e.orderDtlList.length>0&&e.saveSaleOrder(e.orderDtlList))})},saveSaleOrder:function(e){var t=this;this.temp.receiptTypeAfter=this.temp.receiptType;for(var i=[],a=0;a<e.length;a++){var n=e[a],l={orderDtlId:n.id,orderCountBefore:n.orderCount,orderCountAfter:n.newOrderCount,deliverDateBefore:n.deliverDate,deliverDateAfter:n.newDeliverDate,deliverCount:n.deliverCount,retreatCount:n.retreatMoneyCount};i.push(l)}this.temp.dtlJsonStr="",null!=i&&i.length>0&&(this.temp.dtlJsonStr=JSON.stringify(i)),Object(o.checkSaleOrderChangeByPrice)(this.temp).then(function(e){"true"==e.isChange?t.$confirm("保存后将该订单提交变更审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.addSaleOrderChange)(t.temp).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消操作"})}):t.$message({type:"warning",duration:5e3,showClose:!0,message:"(发票类型,订购数量,约定交期)与原数据相同，无需提交变更！"})})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size},formItemWidth:function(){var e={};switch(this.size){case"mini":e.width="180px";break;case"small":e.width="200px";break;default:e.width="220px"}return e}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"100px",size:e.size}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"客户名称:",prop:"customerName"}},[i("el-input",{style:e.formItemWidth,attrs:{readonly:!0},model:{value:e.temp.customerName,callback:function(t){e.$set(e.temp,"customerName",t)},expression:"temp.customerName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"下单日期:",prop:"orderDate"}},[i("el-date-picker",{style:e.formItemWidth,attrs:{type:"date",placeholder:"下单日期","value-format":"yyyy-MM-dd",readonly:!0},model:{value:e.temp.orderDate,callback:function(t){e.$set(e.temp,"orderDate",t)},expression:"temp.orderDate"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发票类型:",prop:"receiptTypeName"}},[i("el-select",{style:e.formItemWidth,attrs:{placeholder:"发票类型"},model:{value:e.temp.receiptType,callback:function(t){e.$set(e.temp,"receiptType",t)},expression:"temp.receiptType"}},[i("el-option",{attrs:{label:"不开票",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"增值税普通发票",value:"2"}}),e._v(" "),i("el-option",{attrs:{label:"增值税专用发票",value:"3"}})],1)],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderEditDialog",attrs:{"data-custom-table-id":"views_sale_orderByPrice_dialogOrderChange0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderEditDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogOrderChange.vue";t.default=s.exports},"5Fd+":function(e,t,i){"use strict";i.r(t);var a=i("WIyV"),o=i("2+ib"),n=i("8Vv6"),l={components:{customBaseTable:a.a,multilevelTable:o.a},name:"dialog-edit",props:["initData","visible"],data:function(){return{orderId:"",orderObject:{},orderCollect:{},isShowText:!1,rowData:{},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",tempLable:null,data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageOrderDetailCollectByInfo",params:{fieldCode:"prodInfo,orderUnitName,orderCount,productPrice,productSum,deliverCount,deliverSum,retreatCount,retreatSum,invoiceCount,invoiceSum,deliverDate",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:this.initData.orderId}},tempData:{},showHeader:!0,showIndex:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"state",width:"140",componentName:"tag",_cellConfig:{success:{state:"5",text:"已完成"},default:{state:"0",text:"待提交"},info1:{state:"1",text:"待审核"},info2:{state:"2",text:"待生产"},info3:{state:"3",text:"待出库"},info4:{state:"4",text:"待发货"},info:{state:"-1",text:"已取消"}}}],apiObj:{apiName:"listPageSaleDeliverDetail",params:{fieldCode:"deliverCode,orderCount,productPrice,sum,cdate,deliverDate",isNeedPage:"false",state:"1",orderStr:"detail.product_id,detail.cdate asc"}},dynamicValue:{orderDetaiId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable"}]}},beforeCreate:function(){},created:function(){this.orderObject=this.initData.orderObject,this.orderId=this.initData.orderId,this.findOrderCollectByOrderId(this.orderId)},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){},dialogOpen:function(){this.$nextTick(function(){})},dialogClose:function(e){this.$emit("close-dialog",e||{})},findOrderCollectByOrderId:function(e){var t=this;this.dialogLoading=!0,Object(n.getSaleOrderCollectByOrderId)({id:e}).then(function(e){t.dialogLoading=!1,0===e.code&&null!=e.result&&null!=e.result.varList&&e.result.varList.length>0&&(t.orderCollect=e.result.varList[0])}).catch(function(e){t.dialogLoading=!1})}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}}},s=(i("ghff"),i("5N22"),i("KHd+")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"1em 2em"}},[i("el-row",{staticStyle:{"margin-bottom":"10px"}},[i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("订单编号  :  ")]),e._v(e._s(e.orderCollect.sysCode))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("订单状态  :  ")]),e._v(e._s(e.orderCollect.stateName))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("制单人  :  ")]),e._v(e._s(e.orderCollect.makeName))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("下单日期  :  ")]),e._v(e._s(e.orderCollect.orderDate))])])],1),e._v(" "),i("el-row",{staticStyle:{"margin-bottom":"10px"}},[i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("客户名称  :  ")]),e._v(e._s(e.orderCollect.customerName))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("约定交期  :  ")]),e._v(e._s(e.orderCollect.expectDate))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("发票类型  :  ")]),e._v(e._s(e.orderCollect.receiptTypeName))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("审核人:")]),e._v(e._s(e.orderCollect.auditName))])])],1),e._v(" "),i("el-row",{staticStyle:{"margin-bottom":"10px"}},[i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("订单金额  :  ")]),e._v(e._s(e.orderCollect.orderAmount))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("发货完成日期  :  ")]),e._v(e._s(e.orderCollect.deliverDate))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("发货金额  :  ")]),e._v(e._s(e.orderCollect.deliverAmount))])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("b",[e._v("退货金额  :  ")]),e._v(e._s(e.orderCollect.retreatAmount))])])],1),e._v(" "),i("el-row",{staticStyle:{"margin-bottom":"10px"}},[i("el-col",[i("div",[i("b",[e._v("备注  :  ")]),e._v(e._s(e.orderCollect.remark))])])],1)],1),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_sale_order_orderCollect0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),i("br"),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);r.options.__file="orderCollect.vue";t.default=r.exports},"5FjX":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("px1p"),o=i("xiF3");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={name:"dialog-add",props:["initData","visible"],components:{dialogSearchDemo:a.default},data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{width:900,height:500,fullscreen:!1,title:"",data:null}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(o.addTemplate)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},openInline:function(){this.openDialogName="dialogSearchDemo",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:e.tempLable.code+":",prop:"code"}},[i("el-input",{model:{value:e.temp.code,callback:function(t){e.$set(e.temp,"code",t)},expression:"temp.code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.name+":",prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.openInline}},[e._v("内层弹框")]),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogAdd.vue";t.default=r.exports},"5Gme":function(e,t,i){},"5Gyy":function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},props:["initData","visible"],data:function(){return{signDtlId:"",rules:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],tableConfigList:[{customColumn:[{columnIndex:"state",width:"140",componentName:"tag",_cellConfig:{success:{state:"3",text:"已完成"},info:{state:"-1",text:"已取消"},warning:{state:"1",text:"待审核"},danger:{state:"2",text:"采购中"},default:{state:"0",text:"待提交"}}}],apiObj:{apiName:"listPageFinanceBillDetailByPurchase",params:{fieldCode:"cdate,typeName,code,paymentAmount,occurAmount,remark",customerId:this.initData.rowData.customerId,period:this.initData.rowData.period}},tempData:{},showHeader:!0,showIndex:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,isSingle:!0,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0}]}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"financeBillDetail",attrs:{"data-custom-table-id":"views_purchase_paymentByPurchase_paymentQuery_dialogDetail1",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogDetail.vue";t.default=n.exports},"5IAh":function(e,t,i){},"5N22":function(e,t,i){"use strict";var a=i("FrM3");i.n(a).a},"5NST":function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=(i("z0WU"),{components:{multilevelTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tableData:[],selectList:[],configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:this.initData.temp.id}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseOutExecutes",params:{isNeedPage:"false",fieldCode:"name,actualCount,executorName,endDate"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},databridge:function(e){this.selectList=e},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;null!=e.selectList&&e.selectList}},watch:{}}),n=(i("fWTv"),i("rloJ"),i("KHd+")),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"90px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_produce_materialRequisition_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogView.vue";t.default=l.exports},"5cBD":function(e,t,i){"use strict";i.r(t);i("KKXr"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("t3Un"),{components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",state:!0,isShow:!0,plain:!0,icon:"refresh",method:this.resetQuery}],aboveTableConfig:{apiObj:{apiName:"listPageAssistProduct",params:{fieldCode:"productName,craftName,unitName"}},customColumn:[{columnIndex:"productName",width:"400",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!0,showTableSet:!1,showAll:!1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"productName",width:"400",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:[],tableSelectList:[]}},created:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,{queryStr:"",orderStr:"assistProd.cdate asc"})},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{selectList:this.tableSelectList,pageName:"selectProductCustomTransferTable"})},closeDialog:function(e){},tableSelected:function(e){this.tableSelectList=e},findQueryProductIds:function(e){var t="";if(null==e||0==e.trim().length)return t;var i=e.split(",");if(null!=i&&i.length>0)for(var a=i.length,o=0;o<i.length;o++){var n="'"+i[o]+"'";o<a-1?t=t+n+",":o==a-1&&(t+=n)}return t},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},confrim:function(){this.$refs.trabsferTables.getTableSelected(),this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()}}}),l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"选择货品",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"800px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{height:"100%"}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticStyle:{margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery}},[i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"外协件："}},[i("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"名称或编码"},model:{value:e.tempQuery.assistProductName,callback:function(t){e.$set(e.tempQuery,"assistProductName",t)},expression:"tempQuery.assistProductName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"工艺名称："}},[i("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"工艺名称"},model:{value:e.tempQuery.craftName,callback:function(t){e.$set(e.tempQuery,"craftName",t)},expression:"tempQuery.craftName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:e.queryTable}})],1),e._v(" "),i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:e.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);s.options.__file="selectAssistProductBySupplier.vue";t.default=s.exports},"67kp":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("91GP");var a=i("fFUy"),o=i("uTIz"),n=i("HltP"),l=i("Ey5t"),s=i("5Fd+"),r=i("QmdA");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d={props:["colConfig","scope"],template:'<div class="btnBox">\n              <el-button v-show="colConfig.infoByParent_isShow" type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.infoByParent(scope.row,scope.$index)">详情</el-button>\n    \t\t\t\t </div>'},u={components:{searchBar:o.a,customRowTable:a.a,dialogAdd:n.default,addCustomerInvoice:l.default,orderCollect:s.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rowTableList:[],orderData:{id:"",customerId:"",receiptType:"",receiptTypeName:"",custInvoiceCompanyName:"",custInvoiceNumber:"",custInvoiceAddress:"",custInvoiceBankName:"",custInvoiceBankCode:"",custInvoiceMobile:"",custInvoicePhone:""},guid:"",searchList:[{label:"订单编号",type:"input",ruleType:"string",mapKey:"sysCode",configs:{},placeholder:"订单编号"}],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",orderDetail_style:"",deliverDetail_style:"",orderId:"",orderObject:{},title:"",temp:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,resState:"",temp:{},tempLable:{},currentpage:1,searchObj:{},customColumn:{0:[{columnIndex:"last",prop:"operate",label:"操作",component:d,infoByParent_isShow:!0,infoByParent:this.infoByParent}],1:[{}]},tableSets:{0:{showCheckBox:!0,showIndex:!0,expandOne:!1,isSortable:!1,showPageData:!0,isSingle:!0},1:{showCheckBox:!1,showIndex:!1,isSortable:!1,isSingle:!0}},precision:2,apiObj:{apiName:"listPageOrderByInvoice",params:{pageNo:1}},mergeColumn:{0:[{index:3,columns:["orderDate","expectDate"]},{index:6,columns:["orderSum","receiveSum"]},{index:7,columns:["deliverSum","invoiceSum"]}]}}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=c(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},setApiObj:function(){var e=Object.assign({},this.apiObj.params,this.searchObj);return{apiName:this.apiObj.apiName,params:e}}},watch:{currentpage:function(){this.apiObj.params.pageNo=this.currentpage}},methods:{getData:function(){this.$refs.orderTableByInvoice.getData()},formData:function(e){},databridge:function(e){Array.isArray(e)&&(this.rowTableList=[],this.rowTableList=e)},sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e},dialogOpen:function(){},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},rowTableList2OrderData:function(e){if(this.orderData={id:"",customerId:"",receiptType:"",receiptTypeName:"",custInvoiceCompanyName:"",custInvoiceNumber:"",custInvoiceAddress:"",custInvoiceBankName:"",custInvoiceBankCode:"",custInvoiceMobile:"",custInvoicePhone:""},null!=e&&0!=e.length){var t=e[0];this.orderData.id=t.id,this.orderData.customerId=t.customerId,this.orderData.receiptType=t.receiptType,this.orderData.receiptTypeName=t.receiptTypeName,this.orderData.custInvoiceCompanyName=t.custInvoiceCompanyName,this.orderData.custInvoiceNumber=t.custInvoiceNumber,this.orderData.custInvoiceAddress=t.custInvoiceAddress,this.orderData.custInvoiceBankName=t.custInvoiceBankName,this.orderData.custInvoiceBankCode=t.custInvoiceBankCode,this.orderData.custInvoiceMobile=t.custInvoiceMobile,this.orderData.custInvoicePhone=t.custInvoicePhone}},addInvoice:function(){var e=this;if(this.$refs.orderTableByInvoice.getData(),null!=this.rowTableList&&0!=this.rowTableList.length){this.rowTableList2OrderData(this.rowTableList);var t=this.orderData.customerId;Object(r.findIsExistCustomerInvoice)({customerId:t}).then(function(i){"false"==i.isExistCustomerInvoice?(e.dialogData.customerId=t,e.dialogData.orderData=e.orderData,e.dialogData.title="客户开票信息",e.openDialogName="addCustomerInvoice",e.showDialog=!0,e.inLinVisible=!0):(e.dialogData.temp=e.orderData,e.dialogData.title="选择订单",e.openDialogName="dialogAdd",e.showDialog=!0,e.inLinVisible=!0)})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条数据！"})},infoByParent:function(e,t){var i=document.body.clientWidth,a=document.body.clientHeight,o=.8*i;this.dialogData.dialog_width=o+"px";var n=.9*a,l=.35*n+"px";this.dialogData.orderDetail_style="height:"+l+";width: 96%;margin-left: 2%;";var s=.2*n+"px";this.dialogData.deliverDetail_style="height:"+s+";width: 96%;margin-left: 2%;",this.dialogData.temp=JSON.parse(JSON.stringify(e)),this.dialogData.orderObject=JSON.parse(JSON.stringify(e)),this.dialogData.orderId=e.id,this.dialogData.title="订单详情",this.openDialogName="orderCollect",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}}},p=i("KHd+"),m=Object(p.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"98%",margin:"0 1%",border:"1px solid #ebeef5"}},[i("custom-row-table",{ref:"orderTableByInvoice",attrs:{"expand-all":!0,keyValue:!0,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:{},precision:e.precision,apiObj:e.setApiObj,mergeColumn:e.mergeColumn},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addInvoice}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);m.options.__file="dialogOrderByInvoice.vue";t.default=m.exports},"68T8":function(e,t,i){"use strict";var a=i("OMP0");i.n(a).a},"6LRo":function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=(i("z0WU"),{components:{multilevelTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tableData:[],selectList:[],configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"warehouseName,productCode,productName,productSpec,productGenreName,productUnitName,count,executeCount,stateName,remark",typeName:"报废处理",parentId:this.initData.temp.id}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseOutExecutes",params:{fieldCode:"warehouseName,code,actualCount,executorName,endDate",isNeedPage:"false"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},databridge:function(e){this.selectList=e},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;null!=e.selectList&&e.selectList}},watch:{}}),n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"90px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseByWC_scrapByWC_createScrapByWC_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogView.vue";t.default=l.exports},"6Q0v":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("5W5M");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{name:[{required:!0,trigger:"change",message:"请填写字典名称"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{pid:"",parentName:"",name:"",remark:""}}},created:function(){this.formData.pid=this.initData.pid,this.formData.parentName=this.initData.parentName},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.addDictionary)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok",unitId:t.id,unitName:e.formData.name}))}).catch(function(t){e.dialogLoading=!1})})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"上级名称:",prop:"parentName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.formData.parentName,callback:function(t){e.$set(e.formData,"parentName",t)},expression:"formData.parentName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAddProductUnit.vue";t.default=s.exports},"6aE2":function(e,t,i){},"6h4f":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo"),i("91GP"),i("pIFo");var a=i("f/WR"),o=i("uTIz"),n=i("T31V");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{transferTable:a.a,searchBar:o.a,dialogAdd:n.default},name:"productTableDialog",props:["initData","visible"],data:function(){return{sourceWarehouseId:"",fieldCode_default:"code,name,spec,unitName,genreName,stockCount,safetyCount,lockCount,productStockCount",isConfirm:!1,temp:{},tempLable:{},rules:{},guid:"",tempQuery:{},searchList:[{label:"货品编码",type:"input",ruleType:"string",mapKey:"code",configs:{},placeholder:"请输入货品编码"},{label:"货品名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"请输入货品名称"},{label:"规格型号",type:"input",ruleType:"string",mapKey:"spec",configs:{},placeholder:"请输入规格型号"},{label:"计量单位",type:"input",ruleType:"string",mapKey:"unitName",configs:{},placeholder:"请输入计量单位"},{label:"货品属性",type:"select",ruleType:"string",mapKey:"genreName",configs:{clearable:!0,name:"",options:[{value:"成品",label:"成品"},{value:"原材料",label:"原材料"},{value:"辅料",label:"辅料"},{value:"半成品",label:"半成品"}]},placeholder:"请选择"}],searchConfig:{hideSearchSwitch:!1},resState:"",dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",table_style:"",sourceWarehouseId:"",productIds:"",title:"",data:null},pageData:null,pageNo:1,btnList:[{name:"确定",isShow:!0,state:!0,method:this.toAddWarehouseIn},{name:"取消",state:!1,method:this.closeWin,isShow:!0}],apiData:{apiName:"listPageProducts",params:{}},tableSelectList:[],stateBtnData:{},tableConfigs:{showIndex:!0},tempList:[]}},created:function(){this.sourceWarehouseId=this.initData.sourceWarehouseId;var e=this.fieldCode_default;null!=this.initData.fieldCode&&this.initData.fieldCode.trim().length>0&&(e=this.initData.fieldCode.trim());var t="";null!=this.initData.queryStr&&(t=this.initData.queryStr);var i="";i=null!=this.initData.orderStr?this.initData.orderStr:"prod.stock_count desc";var a="";if(null!=this.initData.data&&this.initData.data.length>0)for(var o=0;o<this.initData.data.length;o++){var n=this.initData.data[o];null!=n.productId&&n.productId.trim().length>0&&(a=a+n.productId+",")}var l=!0;null!=this.initData.isNeedRepeat&&(l=this.initData.isNeedRepeat),l||null!=a&&a.trim().length>0&&(t="prod.id not in ("+(a="'"+(a=a.substring(0,a.lastIndexOf(","))).replace(",","','")+"'")+")");var s="false";null!=this.initData.isNeedCustomerPrice&&this.initData.isNeedCustomerPrice&&(s="true");var r="";null!=this.initData.customerId&&this.initData.customerId.trim().length>0&&(r=this.initData.customerId.trim()),this.apiData.params={fieldCode:e,queryStr:t,orderStr:i,isNeedCustomerPrice:s,customerId:r,isdisable:"1",isNeedNotInGenreSpare:"true"}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{tableHeight:function(){},dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.apiData.params=Object.assign({},this.apiData.params,e)},dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},toAddWarehouseIn:function(){var e="";if(null!=this.tempList&&0!=this.tempList.length||(e="请至少选择一行数据！"),e.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:e});else{var t=.6*document.body.clientWidth;this.dialogData.dialog_width=t+"px";var i=.75*(.618*t)+"px";this.dialogData.table_style="height:"+i+";width: 96%;margin-left: 2%;";var a="";this.tempList.forEach(function(e){var t=e.id;null!=t&&t.trim().length>0&&(a=a+t.trim()+",")}),this.dialogData.sourceWarehouseId=this.sourceWarehouseId,this.dialogData.productIds=a,this.dialogData.title="创建移库单",this.openDialogName="dialogAdd",this.showDialog=!0,this.inLinVisible=!0}},tableSelected:function(e){this.tempList=e},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,searchConfig:e.searchConfig},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{style:{"margin-top":e.searchList.length?"10px":"0"}},[i("transfer-table",{ref:"trabsferTables",attrs:{tableConfigs:e.tableConfigs,btnList:e.btnList,stateBtn:e.stateBtnData,apiData:e.apiData},on:{"table-selected":e.tableSelected}})],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogProduct.vue";t.default=c.exports},"6k2s":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d"),i("Oyvg");var a=i("WIyV"),o=i("1IKD"),n=i("z9VH");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择入库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{pageNo:1,type:"add",fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntityVirtual:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"1"}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i].priceCount;if(null==a||0==a.trim().length)t=t+"第 "+(i+1)+" 行: 入库数量为空或空字符串！";else new RegExp("^[0-9]+([.]{1}[0-9]+){0,1}$").test(a)||(t=t+"第 "+(i+1)+" 行: 入库数量("+a+")输入错误，请输入大于零的整数或小数！")}return t},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){var a=this.checkColumn(e);if(null!=a&&a.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:a});else{for(var o=[],l=0;l<e.length;l++){var s=e[l],r={productId:"",remark:"",priceUnit:"",priceCount:"",p2nIsScale:"",p2nDecimalCount:""};r.productId=s.productId,r.priceCount=s.priceCount,r.priceUnit=s.priceUnit,r.p2nFormula=s.p2nFormula,r.p2nIsScale=s.p2nIsScale,r.p2nDecimalCount=s.p2nDecimalCount,r.remark=s.remark,o.push(r)}null!=o&&o.length>0&&(i=JSON.stringify(o)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,Object(n.addWarehouseIn)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){this.temp.deptId="",this.temp.deptName="",e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]);var t=this.temp.type;-1!="2c4a104aedc046848455f5fa6e3da87c,8e35209f19804e94940f076c8d71b955".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"1"}):-1!="d78ceba5beef41f5be16f0ceee775399,064dda15d44d4f8fa6330c5c7e46300e".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}):-1!="81907167d5c8498692e6c4f3694c5cfa".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}):-1!="80ac00503a1d41e5926be50f93c32c54".indexOf(t)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"2"})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{pageNo:function(){this.initTable("add","")}}},r=(i("SlmE"),i("YfE7"),i("KHd+")),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto",width:"100%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"仓库:",prop:"warehouseName"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{data:e.warehouseData.data},on:{callback:e.warehouseSelect},model:{value:e.warehouseData.defaultSelected,callback:function(t){e.$set(e.warehouseData,"defaultSelected",t)},expression:"warehouseData.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouse_in_manage_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAdd.vue";t.default=c.exports},"6nHU":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo");var a=i("zF5t"),o=i("928u");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{customBaseTable:i("WIyV").a},name:"dialog-add",props:["initData","visible"],data:function(){return{userData:[],executorIds:[],isSingle:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,temp:{}},dialogLoading:!1,isVisible:!1,inDialog:!0,tableData:[],rowTableList:[],apiObj:{apiName:"listUserByRole",params:{pageNo:1,userIsdisable:"1",queryStr:"role.name like '%仓库管理员%'",fieldCode:"userCode,userName,roleName"}},customColumn:[],mergeTitle:[],mergeColumn:[],mergeRow:[],temp:{},tempLable:{}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initUserData()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{initUserData:function(){var e=this;Object(a.findListUserByRole)({userIsdisable:"1",queryStr:"role.name like '%仓库管理员%'"}).then(function(t){var i=t.result.options;null!=i&&i.length>0&&i.forEach(function(t){var i=t.id,a=t.userName;null!=i&&i.trim().length>0&&null!=a&&a.trim().length>0&&e.userData.push({key:i,label:a,disabled:!1})})}).catch(function(e){})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},leftCheckChange:function(e){this.isSingle&&this.singleUserData(e)},singleUserData:function(e){var t=this.userData;if(null!=t&&0!=t.length)if(0==e.length)t.forEach(function(e){e.disabled=!1});else if(e.length>0){var i="";e.forEach(function(e){i=i+e+","}),t.forEach(function(e){var t=e.key;-1==i.indexOf(t)&&(e.disabled=!0)})}},databridge:function(e){e.length&&(this.executorIds=[e[0].id])},save:function(){var e=this;if(null!=this.executorIds&&0!=this.executorIds.length){var t="";this.executorIds.forEach(function(e){t=t+e+","}),this.dialogLoading=!0,Object(o.updateExecutor)({detailId:this.temp.detailId,executorIds:t}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择执行人！"})},closeDialog:function(e){this.showDialog=!1}},watch:{}},s=(i("4/ya"),i("wzuy"),i("KHd+")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"700px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{padding:"10px"}},[i("custom-base-table",{ref:"editExecutorDialog",attrs:{"data-custom-table-id":"views_warehouse_in_manage_dialogEditExecutor0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,showCheckBox:!0,isSingle:!0,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"editExecutorDialog",useDefaultBtn:!1,showAll:!1},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogEditExecutor.vue";t.default=r.exports},"6nQq":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("cTe8");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{orderId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.rebackPurchasePlan)({id:e.initData.temp.id,remark:e.temp.remark}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"100%",padding:"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"100px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogRebackBill.vue";t.default=s.exports},"6tA9":function(e,t,i){"use strict";i.r(t);i("xfY5");var a=i("WIyV"),o=i("c5eW"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{receiptType:2,productUnit:{},rules:{},openDialogName:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],rowTableList:[],configs:{tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"getInvoiceAmount",params:{customerId:this.initData.temp.customerId,isNeedPage:"false",fieldCode:"customerName,amount"}},customColumn:[{columnIndex:"customerName",width:"300",_cellConfig:{hideTitle:!0}},{columnIndex:"amount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}}],mergeTitle:[],mergeColumn:[],mergeRow:[]}},beforeCreate:function(){},created:function(){this.temp=this.initData.temp,null!=this.initData.temp.receiptType&&this.initData.temp.receiptType.trim().length>0&&(this.receiptType=Number(this.initData.temp.receiptType)),null!=this.initData.temp.id&&this.initData.temp.id.trim().length>0&&(this.apiObj.params.parentId=this.initData.temp.id.trim())},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){if(Array.isArray(e)){if(this.rowTableList=e,!(this.rowTableList.length>0))return void this.$message({type:"warning",duration:5e3,showClose:!0,message:"至少要选择一条记录！"});this.saveFinanceInvoice(this.rowTableList)}},save:function(){this.$refs.orderAddByInvoiceDialog.getData()},saveFinanceInvoice:function(e){for(var t=this,i=0;i<e.length;i++){var a=e[i];this.temp.amount=a.amount}this.temp.type=this.receiptType,this.dialogLoading=!0,Object(o.saveFinanceInvoice)(this.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{"padding-left":"50px",margin:"10px 50px"}},[i("el-radio-group",{model:{value:e.receiptType,callback:function(t){e.receiptType=t},expression:"receiptType"}},[i("el-radio",{attrs:{label:2}},[e._v("增值税普通发票")]),e._v(" "),i("el-radio",{attrs:{label:3}},[e._v("增值税专用发票")])],1)],1),e._v(" "),i("div",{staticStyle:{"padding-left":"50px"}},[i("el-row",{staticStyle:{margin:"10px 50px"}},[i("el-col",{attrs:{span:12}},[i("p",[i("a",[e._v("名称:")]),e._v(e._s(e.temp.companyName))]),e._v(" "),i("p",[i("a",[e._v("地址:")]),e._v(e._s(e.temp.address))]),e._v(" "),i("p",[i("a",[e._v("电话:")]),e._v(e._s(e.temp.mobile))])]),e._v(" "),i("el-col",{attrs:{span:12}},[i("p",[i("a",[e._v("税号:")]),e._v(e._s(e.temp.invoiceNumber))]),e._v(" "),i("p",[i("a",[e._v("开户银行:")]),e._v(e._s(e.temp.bankName))]),e._v(" "),i("p",[i("a",[e._v("账号:")]),e._v(e._s(e.temp.bankCode))])])],1)],1),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddByInvoiceDialog",attrs:{"data-custom-table-id":"views_sale_saleInvoice_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddByInvoiceDialog",useDefaultBtn:!1,showAll:!1},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},"7+Lp":function(e,t,i){"use strict";var a=i("Q8Fw");i.n(a).a},"70rc":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("ywZ6"),l=i("Qe0A"),s=i("a0Xs");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddSupplier:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",parentId:""}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"4"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="采购退货出库",this.temp.type="4cba5d3815644b26920777512a20474b",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"},this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(s.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={id:n.id,productId:n.productId,remark:n.remark,priceCount:n.priceCount,priceUnit:n.priceUnit,p2nFormula:n.p2nFormula,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.updateWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseOut_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},"7Cm4":function(e,t,i){"use strict";i.r(t);i("91GP");var a=i("WIyV"),o=i("TDqz"),n=i("9wPf"),l={components:{customBaseTable:a.a,editFinanceBillByPurchase:o.default},props:["initData","visible"],data:function(){return{signDtlId:"",rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPagePurchaseByFinanceBill",params:{fieldCode:"code,customerName,typeName,amount,stateName,cuserName,cdate",businessId:"",billType:"13",orderStr:"bill.cdate asc"}},customColumn:[{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",width:"160",component:[{name:"提交",nameEn:"submitByParent",rowState:"#self@state#===0",editBtns_isShow:!0,method:this.submitByParent},{name:"撤回",nameEn:"rebackSubmitByParent",rowState:"#self@state#===1",editBtns_isShow:!0,method:this.rebackSubmitByParent},{name:"编辑",nameEn:"editByParent",rowState:"#self@state#===0",editBtns_isShow:!0,method:this.editByParent},{name:"删除",nameEn:"deleteByParent",rowState:"#self@state#===-1",editBtns_isShow:!0,method:this.deleteByParent},{name:"取消",nameEn:"cancelByParent",rowState:"#self@state#===0",editBtns_isShow:!0,method:this.cancelByParent},{name:"恢复",nameEn:"rebackCancelByParent",rowState:"#self@state#===-1",editBtns_isShow:!0,method:this.rebackCancelByParent}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.apiObj.params.businessId=this.initData.rowData.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},refreshPage:function(){this.apiObj.params=Object.assign({},this.apiObj.params)},closeDialog:function(e){this.showDialog=!1,this.inLinVisible=!1,"ok"===e.resState&&this.refreshPage()},editByParent:function(e){this.dialogData.rowData=JSON.parse(JSON.stringify(e)),this.dialogData.title="编辑",this.openDialogName="editFinanceBillByPurchase",this.showDialog=!0,this.inLinVisible=!0},submitByParent:function(e){var t=this;this.$confirm("此操作将此记录提交审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.submitFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消提交"})})},rebackSubmitByParent:function(e){var t=this;this.$confirm("此操作将此记录状态变更为待提交, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.rebackSubmitFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消撤回"})})},deleteByParent:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.deleteFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},cancelByParent:function(e){var t=this;this.$confirm("此操作将将此记录取消, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.cancelFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},rebackCancelByParent:function(e){var t=this;this.$confirm("此操作将此记录状态变更为待提交, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.rebackCancelFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size}},watch:{}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"purchaseSignDtlQualityByInfo",attrs:{"data-custom-table-id":"views_quality_assistQuality_assistSignByQuality_dialogListFinanceBill0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!1,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"purchaseSignDtlQualityByInfo",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogListFinanceBill.vue";t.default=r.exports},"7J8i":function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=(i("z0WU"),{components:{multilevelTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tableData:[],selectList:[],configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:this.initData.temp.id}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseOutExecutes",params:{isNeedPage:"false",fieldCode:"name,actualCount,executorName,endDate"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},databridge:function(e){this.selectList=e},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;null!=e.selectList&&e.selectList}},watch:{}}),n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"90px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_purchaseOut_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogView.vue";t.default=l.exports},"7NWZ":function(e,t,i){},"7ROA":function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseInDetail",params:{fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,remark",parentId:""}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseInExecute",params:{fieldCode:"pathName,count,executeUserName,executeTimeStr",isNeedPage:"false"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){this.tableConfigList[0].apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},databridge:function(e){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_sale_saleIn_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogView.vue";t.default=n.exports},"7TcM":function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rGqo");var a=i("mSNy"),o=i("a0Xs"),n=i("9l+V"),l=i("4rm1"),s=i("z0WU");function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){c(e,t,i[t])})}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" @change="colConfig.changeState(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.editBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.editBtns(scope.row,scope.$index)">编辑</el-button>\n      \t\t\t\t\t\t\t\x3c!--<el-button v-show="colConfig.listBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.listBtns(scope.row,scope.$index)">历史价格</el-button>--\x3e\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},p={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" width="400" align="center">\n\t\t\t      <div slot-scope="scope">\n    \t\t\t\t\t\t{{scope.row.prodInfo}}\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},m={name:"dialog-option",props:["initData","visible"],data:function(){return{fieldCode:"name,punitName,productPrice,remark",dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,topBarBtnList:[{name:"查询",icon:"search",method:this.queryTable},{name:"重置",icon:"refresh",plain:!0,method:this.resetQueryTemp}],initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",btnName:"编辑",isPropName:!0,component:u,editBtns:this.editBtns,editBtns_isShow:!0}},configs:{topBarBtnList:[],tableConfigs:[],showCheckBox:!1,showIndex:!1,isSingle:!1},tableData:[],selectList:[],queryParms:[{name:"code"},{name:"name"}],temp:{},tempQuery:{},tempLable:{},pageData:null,pageNo:1,openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{dialogPriceEdit:n.default,dialogPriceList:l.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.configs.isSingle=this.initData.isSingle,this.userInfo=this.$storage.get("userInfo"),this.initTable(!0)},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{editBtns:function(e,t){this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.temp=this.temp,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑",this.openDialogName="dialogPriceEdit",this.showDialog=!0,this.visibleState=!0},changeState:function(e,t){Object(o.updateDisableProductUnit)(e.id,e.isdisable).then(function(e){}).catch(function(e){})},listBtns:function(e,t){this.dialogData.productId=e.productId,this.dialogData.title="货品历史价格",this.openDialogName="dialogPriceList",this.showDialog=!0,this.visibleState=!0},dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},queryTable:function(){this.pageNo=1,this.initTable(!0)},initTable:function(e){var t=this;t.dialogTopLoading=!0,Object(o.listPageProductUnits)(r({},t.tempQuery,{productId:this.initData.temp.id,addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"code,name,spec,property",fieldCode:"prodInfo,punitName,productPrice,remark",pageNo:t.pageNo})).then(function(i){t.getListPage(i),e&&(t.dialogTopLoading=!1)}).catch(function(e){t.dialogTopLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(s.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!1,this.configs.showIndex=!0,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var o=e[i];o.indexOf("_")>0&&("en"==a.a.locale?o=o.substring(o.indexOf("_")+1):"zh"==a.a.locale&&(o=o.substring(0,o.indexOf("_")))),t.tempLable[i]=o}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==a.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==a.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"是否启用"===e.label&&(e.component=d,e.changeState=t.changeState),"是否默认"===e.label&&(e.component=isdefaultBtns,e.changeIsDefault=t.changeIsDefault),"货品"===e.label&&(e.component=p)}),e.push(t.initConfigs.tableOperates),e},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.refreshTable()},refreshTable:function(){var e=this;e.$axios.all([Object(o.listPageProductUnits)(r({},e.tempQuery,{productId:this.initData.temp.id,addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"code,name,spec,property",fieldCode:"prodInfo,punitName,productPrice,remark",pageNo:e.pageNo}))]).then(e.$axios.spread(function(t){e.getListPage(t)})).catch(function(e){})},dataBridge:function(e){this.selectList=e},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]=""}},computed:{dialogName:function(){return this.openDialogName}},watch:{pageNo:function(){this.initTable()}}},h=i("KHd+"),g=Object(h.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{padding:"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,isSortable:!1,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);g.options.__file="dialogPrice.vue";t.default=g.exports},"7cmB":function(e,t,i){"use strict";i("rE2o"),i("ioFf"),i("pIFo"),i("Oyvg"),i("yt8O"),i("RW0V"),i("rGqo"),i("91GP"),i("xfY5"),i("XfO3"),i("HEwt"),i("a1Th"),i("dRSK"),i("KKXr");var a=i("yO6P"),o=(i("lNSx"),i("F9dT")),n=i("TB3a");function l(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{},name:"tree-form-children-table",props:{configs:{type:Object,default:function(){return{}}},layer:{type:Number,default:1},apiObj:{type:Object,default:function(){return{}}},customColumn:{type:Object,default:function(){return{}}},editable:[Object,Array],precision:{type:Number,default:2},data:{type:Array,default:function(){return[]}},titleList:{type:Array,default:function(){return[]}},guid:{type:String,default:""},parent:{type:Array,default:function(){return[]}},rowChain:{type:Array,default:function(){return[]}},tablesHeight:[String,Number]},data:function(){return{wrapperWidth:0,tableWidth:0,fixedList:[],getRowKey:function(e){return e.id},tableObj:{},parentId:"",tempType:[],setRowChain:[],baseRules:null,ruleForm:{tableData:[]},restaurants:[],debounce:300,selectOptionList:[],selectLoading:!1,removalList:[],selectOptionObj:{}}},computed:{initChildHeight:function(){return"number"==typeof this.tablesHeight?this.tablesHeight+"px":"string"==typeof this.tablesHeight&&"auto"!==this.tablesHeight?parseFloat(this.tablesHeight)+"px":"auto"},setTableHeight:function(){return this.showPageData?"calc(100% - 40px)":"100%"},setShowCheckBox:function(){return!(!this.configs[this.layer]||!this.configs[this.layer].showCheckBox)},setShowIndex:function(){return!(!this.configs[this.layer]||!this.configs[this.layer].showIndex)},setTitleList:function(){return this.titleList},setTableData:function(){var e=this;return this.data.forEach(function(t,i){t._pid=e.parentId,t.index=i}),this.data},computedKeys:function(){var e=[];if(this.data[0]&&this.data[0]._editConfig)for(var t in this.data[0]._editConfig)this.data[0]._editConfig.hasOwnProperty(t)&&this.data[0]._editConfig[t].compute&&e.push(t);return e},createSelectOptions:function(){var e=[];return this.setTableData.forEach(function(t,i){var a={};if(t._editConfig&&"object"===s(t._editConfig))for(var o in t._editConfig)t._editConfig.hasOwnProperty(o)&&"select"===t._editConfig[o].type&&(t._editConfig[o].asyn&&t._editConfig[o].asyn.apiName?a[o]=[]:t._editConfig[o].options&&(a[o]=t._editConfig[o].options.length?t._editConfig[o].options:[]));e[i]=a}),e}},created:function(){this.parentId=this.parent[0].id,this.setRowChain=this.rowChain.concat(this.parent),this.baseRules=this.createRult(),this.ruleForm.tableData=this.setTableData,this.selectOptionList=this.createSelectOptions},mounted:function(){var e=this;this.$refs.baseTable.$nextTick(function(t){e.$emit("do-layout")})},watch:{editable:function(){},setTableData:function(){this.$emit("do-layout")}},methods:{httpRemoval:function(e,t,i){if(this.removalList.length){var a=this.setParams(e,t),o=this.removalList.some(function(i){if(i.apiName===e._editConfig[t].asyn.apiName){if((new Date).getTime()-i.timeStamp>3e4)return i.timeStamp=(new Date).getTime(),i.params=a,!0;for(var o in i.params)if(i.params.hasOwnProperty(o)&&i.params[o]!==a[o])return i.timeStamp=(new Date).getTime(),i.params=a,!0}});return this.removalList.some(function(i){return i.apiName!==e._editConfig[t].asyn.apiName})?(this.removalList.push({apiName:e._editConfig[t].asyn.apiName,params:this.setParams(e,t),timeStamp:(new Date).getTime()}),!0):o}var n={apiName:e._editConfig[t].asyn.apiName,params:this.setParams(e,t),timeStamp:(new Date).getTime()};return this.removalList.push(n),!0},getSelectOptions:function(e,t,i){var a=this;e._editConfig[t]&&e._editConfig[t].asyn&&(this.httpRemoval(e,t,i)?(this.selectLoading=!0,this.$api[e._editConfig[t].asyn.apiName](this.setParams(e,t)).then(function(o){a.selectLoading=!1,a.selectOptionList[i][t]=o.result.options,a.selectOptionObj[e._editConfig[t].asyn.apiName]=o.result.options}).catch(function(e){})):this.selectOptionList[i][t]=this.selectOptionObj[e._editConfig[t].asyn.apiName])},setParams:function(e,t){var i=Object.assign({},e._editConfig[t].asyn.params);for(var a in i)i.hasOwnProperty(a)&&!i[a]&&(i[a]=e[a]||"");return Object.assign({},i)},defaultValue:function(e,t,i){var a=Object(o.c)(e?[e]:[],t,this.setRowChain,this.data);1===a.length&&t._editConfig[i].compute&&(t[i]=this.computeVal(t._editConfig[i].compute,t,i)),a.length>1&&(t[i]=a[0])},computeVal:function(e,t,i){var a=e.split(/\([\\+|\-|\\*|\\/]\)/);if(a.length>1){var l=Object(o.b)(a,t,this.setRowChain,this.data,e);return n.a.formatDate(l)}return t[i]},setCloWidth:function(e){var t="";if(!Array.isArray(this.editable))switch(this.editable[e.prop]?this.editable[e.prop].type:""){case"date":t="180";break;case"cascader":case"select":case"inputNumber":break;case"time":t="140";break;case"dateTime":t="220"}return t},pickerOptions:function(e,t){var i,a,o=e._editConfig[t];o.greaterThan&&(i=this.formatDates(e,t,o.greaterThan,!1)),o.lessThan&&(a=this.formatDates(e,t,o.lessThan,!0));var n,l,s={};return s.disabledDate=function(e){return i&&a?!(e.getTime()>i&&e.getTime()<a-864e5):i&&!a?e.getTime()<i:!(i||!a)&&e.getTime()>a+864e5},i&&o.greaterThan[o.greaterThan.length-1]&&(n=i+864e5),a&&o.lessThan[o.lessThan.length-1]&&(l=a-864e5),o.shortcuts&&(s.shortcuts=this.createShortcuts(o.shortcuts,n,l)),s},formatDates:function(e,t,i,a){var s,r,c=Object(o.c)(i,e,this.setRowChain,this.data);return"boolean"==typeof c[c.length-1]&&(s=c.pop()),a?(r=Math.min.apply(Math,l(c.map(function(e){return n.a.timeStamp(e)}))),s&&(r+=864e5)):(r=Math.max.apply(Math,l(c.map(function(e){return n.a.timeStamp(e)}))),s&&(r-=864e5)),r},createShortcuts:function(e,t,i){return e.map(function(e){var a;switch(e){case"yesterday":a={text:"昨天",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-864e5<t?t:i.getTime()-864e5),e.$emit("pick",i)}};break;case"today":a={text:"今天",onClick:function(e){e.$emit("pick",new Date)}};break;case"tomorrow":a={text:"明天",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+864e5>i?i:t.getTime()+864e5),e.$emit("pick",t)}};break;case"lastWeek":a={text:"上周",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-6048e5<t?t:i.getTime()-6048e5),e.$emit("pick",i)}};break;case"nextWeek":a={text:"下周",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+6048e5>i?i:t.getTime()+6048e5),e.$emit("pick",t)}};break;case"lastMonth":a={text:"上月",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-2592e6<t?t:i.getTime()-2592e6),e.$emit("pick",i)}};break;case"nextMonth":a={text:"下月",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+2592e6>i?i:t.getTime()+2592e6),e.$emit("pick",t)}};break;case"lastYear":a={text:"去年",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-31536e6<t?t:i.getTime()-31536e6),e.$emit("pick",i)}};break;case"nextYear":a={text:"明年",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+31536e6>i?i:t.getTime()+31536e6),e.$emit("pick",t)}}}return a})},querySearchAsync:function(e,t){var i=this;return function(a,o){var n=e._editConfig[t].asyn||null;n&&i.$api[n.apiName](n.params).then(function(n){i.restaurants=n.result.options||[];var l=a?i.restaurants.filter(i.createStateFilter(a,e,t)):i.restaurants;o(l)}).catch(function(e){})}},createStateFilter:function(e,t,i){return function(a){return 0===a[t._editConfig[i].valueKey?t._editConfig[i].valueKey:"name"].toLowerCase().indexOf(e.toLowerCase())}},computedCell:function(e,t){var i=this;if(!this.computedKeys.length)return!1;this.computedKeys.forEach(function(t){var a=e._editConfig[t].compute.split(/\([\\+|\-|\\*|\\/]\)/);a.length>1&&(e[t]=Object(o.b)(a,e,i.setRowChain,i.data,e._editConfig[t].compute).toFixed(i.precision))})},createRult:function(){var e={};if(!Array.isArray(this.editable))for(var t in this.editable)this.editable.hasOwnProperty(t)&&this.editable[t].rules&&this.editable[t].rules.length&&(e[t]=this.initRowRules(this.editable[t]));return e},initRowRules:function(e){var t=[];return e.rules.forEach(function(i,o){0===o&&t.push({required:!0,message:"请输入内容",trigger:"blur"}),!1===i.required&&(t[0].required=i.required),i.type&&t.push({pattern:new RegExp(a.a[i.type].replace(/placeholder/g,"0,"),"g"),message:e.message[o]||"",trigger:"blur"}),(i.min||i.max)&&t.push({min:i.min||0,max:i.max||"",message:e.message[o]||"",trigger:"blur"})}),t},createItemRules:function(e,t,i){var a,n=null;if(a=this.baseRules[t]?[].concat(this.baseRules[t]):[],this.editable[t]&&this.editable[t].rules&&this.editable[t].rules.length){var l=this.editable[t].rules.find(function(e){return e.greaterThan}),s=this.editable[t].rules.find(function(e){return e.lessThan}),r=this.editable[t].rules.find(function(e){return e.type});(l||s)&&(n=Object(o.a)(l,s,r,t,i,this.setRowChain,this.editable[t].message,this.editable[t].rules,this.setTableData)),n&&n.forEach(function(e){a.push(e)})}return a},setShowHeader:function(){return!this.layer||0!==this.setTableData.length},selectable:function(e,t){return"1"===e.rowState},indexMethod:function(e){return e+1},selectItem:function(e,t){this.$emit("databridge",e)},selectAll:function(e){this.$emit("databridge",e)}}},c=(i("mqp0"),i("KHd+")),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"childrens",style:{height:e.initChildHeight}},[i("el-form",{ref:"ruleForm",staticStyle:{height:"100%"},attrs:{model:e.ruleForm,"status-icon":""}},[i("el-table",{ref:"baseTable",staticStyle:{width:"100%"},attrs:{data:e.setTableData,stripe:"",height:"100%",fit:"","highlight-current-row":"","tooltip-effect":"dark",border:0!=e.layer,"show-header":e.setShowHeader(),"row-key":e.getRowKey},on:{select:e.selectItem,"select-all":e.selectAll}},[e.setShowCheckBox?[i("el-table-column",{attrs:{type:"selection",selectable:e.selectable,width:"55",align:"center"}})]:e._e(),e._v(" "),e.setShowIndex?[i("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"60",align:"center"}})]:e._e(),e._v(" "),e._l(e.setTitleList,function(t,a){return[t.component?i(t.component,{key:a,tag:"component",attrs:{"col-config":t}}):i("el-table-column",e._b({key:a,attrs:{"show-overflow-tooltip":"",label:t.label,width:e.setCloWidth(t),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row._editConfig&&a.row._editConfig[t.prop]?["input"===a.row._editConfig[t.prop].type?[a.row._editConfig[t.prop].asyn?[i("el-form-item",{attrs:{prop:"tableData."+a.$index+"."+t.prop,rules:e.createItemRules(t,t.prop,a.row),"inline-message":!0}},[i("el-autocomplete",{attrs:{size:"small",placeholder:"请输入内容",clearable:"","value-key":a.row._editConfig[t.prop].valueKey?a.row._editConfig[t.prop].valueKey:"name",debounce:e.debounce,"fetch-suggestions":e.querySearchAsync(a.row,t.prop),disabled:"0"===a.row.isdisable},model:{value:a.row[t.prop],callback:function(i){e.$set(a.row,t.prop,i)},expression:"scope.row[colConfig.prop]"}},[a.row._editConfig[t.prop].icon?i("i",{staticClass:"treeFormTableIcon",attrs:{slot:"suffix"},slot:"suffix"},[i("svg-icon",{attrs:{"icon-class":a.row._editConfig[t.prop].icon}})],1):e._e()])],1)]:[i("el-form-item",{attrs:{prop:"tableData."+a.$index+"."+t.prop,rules:e.createItemRules(t,t.prop,a.row),"inline-message":!0}},[i("el-input",{attrs:{size:"small",placeholder:"请输入内容",clearable:"",align:"center",type:a.row._editConfig[t.prop].textarea?"textarea":"text",disabled:!!a.row._editConfig[t.prop].compute||"0"===a.row.isdisable},on:{blur:function(i){e.computedCell(a.row,t.prop)}},model:{value:a.row[t.prop],callback:function(i){e.$set(a.row,t.prop,i)},expression:"scope.row[colConfig.prop]"}},[a.row._editConfig[t.prop].icon?i("i",{staticClass:"treeFormTableIcon",attrs:{slot:"suffix"},slot:"suffix"},[i("svg-icon",{attrs:{"icon-class":a.row._editConfig[t.prop].icon}})],1):e._e()])],1)]]:"date"===a.row._editConfig[t.prop].type?[i("el-date-picker",{attrs:{size:"small",format:a.row._editConfig[t.prop].format||"yyyy 年 MM 月 dd 日","value-format":a.row._editConfig[t.prop].format||"yyyy-MM-dd","default-value":e.defaultValue(a.row._editConfig[t.prop].defaultValue,a.row,t.prop),editable:void 0===a.row._editConfig[t.prop].editable||a.row._editConfig[t.prop].editable,disabled:"0"===a.row.isdisable,type:a.row._editConfig[t.prop].valueType||"date",placeholder:a.row._editConfig[t.prop].placeholder||"选择日期","picker-options":e.pickerOptions(a.row,t.prop)},model:{value:a.row[t.prop],callback:function(i){e.$set(a.row,t.prop,i)},expression:"scope.row[colConfig.prop]"}})]:"time"===a.row._editConfig[t.prop].type?[i("el-time-picker",{attrs:{clearable:"",size:"small",align:"center",disabled:"0"===a.row.isdisable,editable:!1,placeholder:"任意时间点"},model:{value:a.row[t.prop],callback:function(i){e.$set(a.row,t.prop,i)},expression:"scope.row[colConfig.prop]"}})]:"select"===a.row._editConfig[t.prop].type?[i("el-select",{attrs:{size:"small",clearable:"",filterable:"",disabled:"0"===a.row.isdisable,multiple:a.row._editConfig[t.prop].multiple||!1,loading:e.selectLoading,placeholder:"请选择"},on:{focus:function(i){e.getSelectOptions(a.row,t.prop,a.$index)}},model:{value:a.row[t.prop],callback:function(i){e.$set(a.row,t.prop,i)},expression:"scope.row[colConfig.prop]"}},e._l(e.selectOptionList[a.$index][t.prop],function(e){return i("el-option",{key:e.id,attrs:{label:e.label,value:e.id,disabled:"0"===e.isdisable}})}),1)]:"cascader"===a.row._editConfig[t.prop].type?void 0:"switch"===a.row._editConfig[t.prop].type?void 0:"dateTime"===a.row._editConfig[t.prop].type?[i("el-date-picker",{attrs:{size:"small",clearable:"",type:"datetime",align:"center",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss",disabled:"0"===a.row.isdisable,editable:!1},model:{value:a.row[t.prop],callback:function(i){e.$set(a.row,t.prop,i)},expression:"scope.row[colConfig.prop]"}})]:"inputNumber"===a.row._editConfig[t.prop].type?void 0:[i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(a.row[t.prop]))])]]:[i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(a.row[t.prop]))])]]}}])},"el-table-column",t,!1))]})],2)],1)],1)},[],!1,null,null,null);d.options.__file="childrenTable.vue";var u=d.exports,p=i("z0WU"),m=i("Yfch");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g={props:["colConfig"],template:'<el-table-column :label="colConfig.label" align="center">\n    \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n    \t\t\t\t\t  <template v-for="item in colConfig.methods">\n    \t\t\t\t\t\t\t<el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="item(scope.row,scope.$index,scope)">删除</el-button>\n    \t\t\t\t\t\t</template>\n    \t\t\t\t\t</div>\n  \t\t\t\t</el-table-column>'},f={name:"tree-form-table",props:{initData:{type:Object,default:function(){return{}}},configs:{type:Object,default:function(){return{}}},layer:{type:Number,default:0},apiObj:{type:Object,default:function(){return{}}},"expand-all":{type:Boolean,default:!0},customColumn:{type:Object,default:function(){return{}}},editable:[Object,Array],childHeight:[String,Number],precision:{type:Number,default:2},data:{type:Array,default:function(){return[]}},titleList:{type:Array,default:function(){return[]}},addedData:{type:Object,default:function(){return{}}},deleteKey:{type:String,default:"id"}},data:function(){return{wrapperWidth:0,tableWidth:0,fixedList:[],expandRowKeys:[],getRowKey:function(e){return e.id},tableObj:{},inlineColumn:{1:[{columnIndex:"last",prop:"operate",label:"操作",component:g,methods:[this.deleteRow]}]},guid:"",editTableLayer:-1}},components:{childrenTable:u},computed:{initChildHeight:function(){return this.childHeight||"auto"},setTableHeight:function(){return this.showPageData?"calc(100% - 40px)":"100%"},setShowCheckBox:function(){return!!(this.configs[this.layer]&&this.configs[this.layer].showCheckBox&&this.setTableData&&this.setTableData.length)},setShowIndex:function(){return!!(this.configs[this.layer]&&this.configs[this.layer].showIndex&&this.setTableData&&this.setTableData.length)},expandOne:function(){return!(!this.configs[this.layer]||!this.configs[this.layer].expandOne)},formatedCustomColumn:function(){for(var e in this.inlineColumn)this.customColumn[e]||(this.customColumn[e]=this.inlineColumn[e]);return this.customColumn},tableData:function(){return this.$store.getters[this.guid+"/dataTree"]},setTitleList:function(){return this.tableData.titleList},setTableData:function(){return this.tableData.tableData},setExpand:function(){return this.expandAll},setColumnWidth:function(){return this.setExpand?"1":"50"}},created:function(){var e=this;0===this.layer&&(this.guid=Object(p.a)(),Object(p.y)(this),this.apiObj.apiName&&this.$api[this.apiObj.apiName](Object.assign({},this.apiObj.params)).then(function(t){e.$store.commit(e.guid+"/SET_DATATREE",e.formatedTable({res:t}))}).catch(function(e){}))},mounted:function(){},beforeDestroy:function(){Object(p.z)(this.$store,this.guid)},watch:{addedData:function(){var e=JSON.parse(JSON.stringify(this.addedData));e.rowData._editConfig=Object.assign({},this.editable),this.$store.commit(this.guid+"/ADD_ROW",e)},"apiObj.params":function(){var e=this;this.$api[this.apiObj.apiName](Object.assign({},this.apiObj.params)).then(function(t){e.$store.commit(e.guid+"/SET_DATATREE",e.formatedTable({res:t}))}).catch(function(e){})}},methods:{upDateView:function(e){var t=this;this.$api[this.apiObj.apiName](Object.assign({},this.apiObj.params,e||void 0)).then(function(e){t.$store.commit(t.guid+"/SET_DATATREE",t.formatedTable({res:e}))}).catch(function(e){})},getData:function(){!this.layer&&this.$emit("get-data",this.tableData)},formatedTable:function(e){if(this.layer)return{};var t=JSON.parse(JSON.stringify(e)),i=this.getListPage(t.res,this.formatedCustomColumn,this.layer);return i.tableData&&i.tableData.length&&this.formatEditTable(i.tableData),i},formatEditTable:function(e){var t=this;this.editTableLayer++,e.forEach(function(e){if(e.children&&e.children.length&&t.formatEditTable(e.children),t.editTableLayer>0)if(Array.isArray(t.editable)){var i={};t.editable.forEach(function(a){i[a]={type:t.automaticInference(a,e)}}),e._editConfig=i}else"object"===h(t.editable)&&Object.keys(t.editable).forEach(function(i){Object.keys(e).indexOf(i)>-1&&(e._editConfig=Object.assign({},t.editable))})})},automaticInference:function(e,t){var i=t[e];return"1"!==i&&"0"!==i||"isdisable"!==e?new RegExp(a.a.date.replace(/placeholder/g,"0,"),"g").test(i)?"date":new RegExp(a.a.time.replace(/placeholder/g,"0,"),"g").test(i)?"time":"input":"switch"},deleteRow:function(e,t){var i=this;this.$store.commit(this.guid+"/DELETE_ROW",e),this.$nextTick(function(e){i.$refs.baseTable.doLayout()})},setShowHeader:function(){return!this.layer||0!==this.setTableData.length},setRowClass:function(){if(this.setExpand)return"row-expand-cover"},setHeaderRowClass:function(){if(this.setExpand)return"header-expand-cover"},selectable:function(e,t){return"1"===e.rowState},expandChange:function(e,t){var i=this;t.some(function(t){return t.id===e.id})&&this.expandOne&&this.toggleRowExpands(t,e),this.$refs.baseTable.setCurrentRow(e),this.$refs.baseTable.$nextTick(function(e){i.$refs.baseTable.doLayout()})},toggleRowExpands:function(e,t){var i=this;e.forEach(function(e){i.$refs.baseTable.toggleRowExpansion(e,e.id===t.id)})},getListPage:function(e,t,i){var a=this;if(e){e.result.titles="string"==typeof e.result.titles?JSON.parse(e.result.titles):e.result.titles,e.result.varList="string"==typeof e.result.varList?JSON.parse(e.result.varList):e.result.varList,e.result.pageData="string"==typeof e.result.pageData?JSON.parse(e.result.pageData):e.result.pageData;var o=Object(p.o)(e.result),n=this.addTableTitle(o,t,i);return e.result.varList.forEach(function(e){if(e.titles&&e.hideTitles&&e.children){var o={result:{titles:e.titles,hideTitles:e.hideTitles,varList:e.children,pageData:{}}},n=a.getListPage(o,t,i+1);e.titleList=n.titleList,e.pageData=n.pageData}}),{titleList:n,pageData:e.result.pageData,tableData:e.result.varList}}return{}},addTableTitle:function(e,t,i){return t[i]&&Array.isArray(t[i])&&t[i].forEach(function(t){Object(m.b)(t.columnIndex)?e.splice(t.columnIndex,0,t):"first"===t.columnIndex?e.unshift(t):"last"===t.columnIndex?e.push(t):e.some(function(e){if(e.prop===t.columnIndex)return Object.assign(e,t),!0})}),e},indexMethod:function(e){return e+1},selectItem:function(e,t){this.$emit("databridge",e)},selectAll:function(e){this.$emit("databridge",e)},databridge:function(e){this.$emit("databridge",e)},handleCurrentChange:function(e){this.$emit("update:currentpage",e)},doLayout:function(){var e=this;this.$refs.baseTable.$nextTick(function(t){e.$refs.baseTable.doLayout()})}}},b=(i("3Hp2"),Object(c.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"myCoustomTable resetTreeTableStyle",staticStyle:{height:"100%"}},[i("div",{staticStyle:{position:"relative",overflow:"hidden"},style:{height:e.setTableHeight}},[i("div",{staticClass:"resetTableStyle baseTableStyle"},[i("el-table",{ref:"baseTable",staticStyle:{width:"100%"},attrs:{data:e.setTableData,stripe:"",height:"100%",fit:"","highlight-current-row":"","tooltip-effect":"dark",border:0!=e.layer,"show-header":e.setShowHeader(),"default-expand-all":e.setExpand,"row-key":e.getRowKey,"expand-row-keys":e.expandRowKeys,"row-class-name":e.setRowClass,"header-row-class-name":e.setHeaderRowClass},on:{"expand-change":e.expandChange,"do-layout":e.doLayout,select:e.selectItem,"select-all":e.selectAll}},[e.setTableData&&e.setTableData.length?i("el-table-column",{attrs:{type:"expand",width:e.setColumnWidth,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.children&&t.row.children?[i("children-table",{attrs:{layer:e.layer+1,"expand-all":e.setExpand,data:t.row.children,titleList:t.row.titleList,configs:e.configs,customColumn:e.customColumn,editable:e.editable,precision:e.precision,guid:e.guid,parent:[t.row],rowChain:[],tablesHeight:e.initChildHeight},on:{"do-layout":e.doLayout,databridge:e.databridge}})]:[i("div",{staticStyle:{"text-align":"center"}},[e._v("暂无数据")])]]}}])}):e._e(),e._v(" "),e.setShowCheckBox?[i("el-table-column",{attrs:{type:"selection",selectable:e.selectable,width:"55",align:"center"}})]:e._e(),e._v(" "),e.setShowIndex?[i("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"60",align:"center"}})]:e._e(),e._v(" "),e._l(e.setTitleList,function(t,a){return[t.component?i(t.component,{key:a,tag:"component",attrs:{"col-config":t}}):i("el-table-column",e._b({key:a,attrs:{"show-overflow-tooltip":"",label:t.label,align:"center"}},"el-table-column",t,!1))]})],2)],1)])])},[],!1,null,null,null));b.options.__file="index.vue";t.a=b.exports},"7jNx":function(e,t,i){"use strict";i.r(t);var a=i("ZeDI"),o={name:"dialog-edit",props:["initData","visible"],data:function(){return{isNeedShowResult:"",rules:{name:[{required:!0,message:"请填写工艺名称！",trigger:"change"}]},dialogLoading:!1,isVisible:!1,inDialog:!0,formData:{name:"",remark:""}}},created:function(){null!=this.initData.isNeedShowResult&&this.initData.isNeedShowResult.trim().length>0&&(this.isNeedShowResult=this.initData.isNeedShowResult.trim())},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addAssistCraft)(e.formData).then(function(t){0===t.code&&(e.dialogLoading=!1,e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok",pageName:"dialogAdd",isNeedShowResult:e.isNeedShowResult,Craft:t.Craft}))}).catch(function(t){e.dialogLoading=!1}))})}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"100%",padding:"10px"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"90px"}},[i("el-form-item",{attrs:{label:"工艺名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"240px"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);l.options.__file="dialogAdd.vue";t.default=l.exports},"7uPa":function(e,t,i){"use strict";var a=i("isnl");i.n(a).a},"80ie":function(e,t,i){"use strict";var a=i("C/GO");i.n(a).a},"8CNV":function(e,t,i){"use strict";i.r(t);i("Oyvg"),i("f3/d");var a=i("2+ib"),o=i("zwJs"),n=i("UHWX"),l={components:{multilevelTable:a.a,dialogOption:o.default},props:["initData","visible"],data:function(){return{parentId:"",tableData:[],tableConfigList:[{customColumn:[{columnIndex:"code",_cellConfig:{hideTitle:!0},width:"150"},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"选择库位",nameEn:"changeWarehouse",method:this.changeWarehouse}]}],apiObj:{apiName:"listPageWarehouseInDetail",params:{fieldCode:"parentCode,productCode,productName,productSpec,productGenreName,productUnitName,count",parentId:""}},tempData:{},showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"},{greaterThan:["0",!1]}],message:["不能为空！","请输入大于零的整数或小数","不可等于零！"]}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],apiObj:{apiName:"findWarehouseInExecuteByBySimple",params:{fieldCode:"name,stockCount,count"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!1,isVisible:!1,inDialog:!0}},beforeCreate:function(){},created:function(){this.parentId=this.initData.temp.id,this.tableConfigList[0].apiObj.params.parentId=this.initData.temp.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},getData:function(){this.$refs.customBaseTable.getData()},databridge:function(e){this.tableData=e},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},closeDialog:function(e,t,i){var a=this.findExecuteCountByParentData(t);if("close"!=i){var o={id:"",detailId:"",executorId:"",executorName:"",warehouseId:"",pathName:"",stockCount:null,count:null};if(null!=e&&e.length>0){o.executorId=this.$storage.get("userInfo").userId,o.executorName=this.$storage.get("userInfo").userName,o.detailId=t.id;var n=e[0];o.id=n.id,o.warehouseId=n.warehouseId,o.name=n.name,o.stockCount=n.stockCount,o.count=t.count/1-a+"",this.pushData(o,t)}}this.showDialog=!1},findExecuteCountByParentData:function(e){var t=0;if(null==e||null==e.children||0==e.children.length)return t;for(var i=e.children,a=0;a<i.length;a++){var o=i[a].count+"";null!=o&&o.trim().length>0&&this.isNumberByValue(o.trim())&&(t+=o.trim()/1)}return t},deleteRow:function(e){this.deleteData(e)},findWarehouseByRowData:function(e){var t="";if(null!=e&&null!=e.children&&e.children.length>0)for(var i=e.children,a=0;a<i.length;a++){var o=i[a].warehouseId;null!=o&&o.trim().length>0&&(t=t+o.trim()+",")}return t},changeWarehouse:function(e){var t=this.findWarehouseByRowData(e);this.dialogData.temp=e,this.dialogData.title="选择库位",this.dialogData.isSingle=!0,this.dialogData.tableUrl="/warehouse/warehouseProduct/listPageWarehouseToWarehouseProductBySimple",this.dialogData.tableParm={fieldCode:"name,stockCount",notInWarehouseIds:t,warehouseIsdisable:"1",isNeedAll_productId:e.productId,isNotNeedSpare:"true",isNeedEntity:"true",orderStr:"wp.stock_count desc"},this.openDialogName="dialogOption",this.showDialog=!0,this.inLinVisible=!0},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},checkColumnExecuteBySmall:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.productCode,n=a.productName,l=0;if(null!=a.count)l=a.count+""-0;var s="("+o+","+n+")货品 ",r=a.children;if(null==r||0==r.length)t=s+"无货位执行数据，请至少选择一个库位！";else{for(var c=0,d=0;d<r.length;d++){c+=r[d].count-0}c<l&&(t=s+"执行数量总和必须大于等于入库数量！")}}return t},checkColumnExecuteByBig:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.productCode,n=a.productName,l=0;if(null!=a.count)l=a.count+""-0;for(var s="("+o+","+n+")货品 ",r=0,c=a.children,d=0;d<c.length;d++){r+=c[d].count-0}r>l&&(t=s+"执行数量总和大于入库数量")}return t},save:function(){this.getData(),null!=this.tableData&&this.tableData.length>0&&this.addWarehouseInExecute(this.tableData)},addWarehouseInExecute:function(e){var t=this,i=this.checkColumnExecuteBySmall(e);null!=i&&i.trim().length>0?this.$message({type:"warning",duration:5e3,showClose:!0,message:i}):null!=(i=this.checkColumnExecuteByBig(e))&&i.trim().length>0?this.$confirm(i+"，是否执行入库?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.submitWarehouseInExecute(e)}).catch(function(){t.$message({type:"info",message:"已取消操作"})}):this.submitWarehouseInExecute(e)},submitWarehouseInExecute:function(e){var t=this,i=JSON.stringify(e);Object(n.addWarehouseInExecuteBySimple)({parentId:this.parentId,jsonDataStr:i}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}},watch:{}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseBySimple_inBySimple_dialogExecute0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogExecute.vue";t.default=r.exports},"8KPM":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d"),i("91GP");var a=i("uTIz"),o=i("varj"),n=i("K3g7"),l=i("Qbmm");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customTransferTable:o.a,searchBar:a.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},resState:"",dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.toDialogAdd},{name:"取消",state:!1,method:this.closeWin,isShow:!0}],stateBtnData:{title:"显示全部(台账数量)",keyName:"isAllStockCount"},aboveTableConfig:{apiObj:{apiName:"findWarehouseInitialByWC",params:{fieldCode:"warehouseName,code,productCode,productName,productSpec,productGenreName,productUnitName,checkStockCount",warehouseNodeId:"",isNeedEntity:"true",isNotNeedSpare:"true"}},customColumn:[],tempData:{count:100,defaultDate:"2019-01-21"},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[],tempData:{count:100,defaultDate:"2019-01-21"},showIndex:!0,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:["remark"],tableSelectList:[],tempList:[]}},created:function(){this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{tableHeight:function(){},dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1},tableSelected:function(e){this.tempList=e},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},initTree:function(){var e,t=this;this.dialogLoading=!0,Object(n.treeWarehouse)((e={id:"2d75e49bcb9911e884ad00163e105f05",isNeedEntity:"true"},s(e,"isNeedEntity","true"),s(e,"isNotNeedSpare","true"),e)).then(function(e){t.loadTree(e)}).catch(function(e){t.dialogLoading=!1})},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name},t.push(i),this.treeData=t,this.dialogLoading=!1},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery,{warehouseNodeId:this.selectTree.id})},toDialogAdd:function(){var e=this;this.$refs.trabsferTables.getTableSelected();var t=[];if(null!=this.tempList&&this.tempList.length>0)for(var i=0;i<this.tempList.length;i++){var a=this.tempList[i],o={warehouseId:a.warehouseId,productId:a.productId,checkStockCount:a.checkStockCount,code:a.code,warehouseProductId:a.warehouseProductId};t.push(o)}var n="";t.length>0&&(n=JSON.stringify(t)),Object(l.addWarehouseCheckBySimple)({dtlJsonStr:n}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-row",[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.productCode,callback:function(t){e.$set(e.tempQuery,"productCode",t)},expression:"tempQuery.productCode"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.productName,callback:function(t){e.$set(e.tempQuery,"productName",t)},expression:"tempQuery.productName"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.productSpec,callback:function(t){e.$set(e.tempQuery,"productSpec",t)},expression:"tempQuery.productSpec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);u.options.__file="selectProductByWarehouse.vue";t.default=u.exports},"8N7a":function(e,t,i){},"8Ne5":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},isShowDept:!1,isShowCust:!1,rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,DepartmentDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择部门",treeUrl:"/system/department/treeDepartments",treeParm:{},tableUrl:"/system/department/listPageDepartments",tableParm:{isdisable:"1",fieldCode:"code,name,deptTypeName,layer,parentName,remark"},temp:{}},dialogName:"dialogTreeOption"}},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择客户",treeUrl:"/system/dictionary/treeDictionarys",treeParm:{dictionaryKey:"customerSupplierGenre"},tableUrl:"/base/customer/listPageCustomers",tableParm:{},temp:{}},dialogName:"dialogTreeOption"}},formTemp:[]}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{changeVirtualGenre:function(){"1"==this.temp.virtualGenre?(this.isShowDept=!0,this.isShowCust=!1):"2"==this.temp.virtualGenre&&(this.isShowCust=!0,this.isShowDept=!1)},departmentSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualDeptId=e[0].id,this.temp.virtualDeptName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},customerSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualCustomerId=e[0].id,this.temp.virtualCustomerName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},dialogOpen:function(){var e=this;this.changeVirtualGenre(),"1"==this.temp.virtualGenre&&null!=this.temp.virtualDeptName&&this.temp.virtualDeptName.trim().length>0?this.temp.virtualDepartmentName=this.temp.virtualDeptName:"2"==this.temp.virtualGenre&&null!=this.temp.virtualCustomerName&&this.temp.virtualCustomerName.trim().length>0&&(this.temp.virtualDepartmentName=this.temp.virtualCustomerName),this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateWarehouseByVirtual)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"仓库性质:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{value:"虚拟库",readonly:!0}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.virtualGenreName+":",prop:"virtualGenreName"}},[i("el-select",{attrs:{placeholder:e.tempLable.virtualGenreName,disabled:!0},on:{change:e.changeVirtualGenre},model:{value:e.temp.virtualGenre,callback:function(t){e.$set(e.temp,"virtualGenre",t)},expression:"temp.virtualGenre"}},[i("el-option",{attrs:{label:"内部单位",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"外部单位",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowDept,expression:"isShowDept"}],attrs:{label:"部门名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DepartmentDialog.dialog},on:{callback:e.departmentSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowCust,expression:"isShowCust"}],attrs:{label:"客户名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseVirtualEdit.vue";t.default=s.exports},"8QfV":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("uTIz"),o=i("2+ib");i("WZUi");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{searchBar:a.a,multilevelTable:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{productId:"",searchList:[{label:"起始日期",type:"date",ruleType:"date",mapKey:"beginDate",configs:{clearable:!0,name:"",type:"date",pickerOptions:{hidePicker:!0}},placeholder:"请选择"},{label:"结束日期",type:"date",ruleType:"date",mapKey:"endDate",configs:{clearable:!0,name:"",type:"date",pickerOptions:{hidePicker:!0}},placeholder:"请选择"}],guid:"",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{equipmentId:"",rowData:{}},dataList:[],tableConfigList:[{customColumn:[],apiObj:{apiName:"findListWarehouseLoginfoBySpare",params:{productId:"",fieldCode:"appOperateName,appOperate,beforeStockCount,afterStockCount,operationCount,appOperateUserName,appOperateTime",orderStr:"loginfo.cdate desc"}},tempData:{},showHeader:!0,showIndex:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable"}]}},created:function(){this.productId=this.initData.productId,this.tableConfigList[0].apiObj.params.productId=this.productId,this.formData=this.initData.rowData},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.dataList=e},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.updateData(this.searchObj)},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.updateData(this.searchObj)},closeDialogPage:function(){this.isVisible=!1,this.dialogClose()}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("el-row",{staticStyle:{width:"96%"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto",width:"100%"},attrs:{model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"货品编码:"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.formData.productCode,callback:function(t){e.$set(e.formData,"productCode",t)},expression:"formData.productCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"货品名称:",prop:"targetName"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.formData.productName,callback:function(t){e.$set(e.formData,"productName",t)},expression:"formData.productName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"规格型号:",prop:"targetName"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.formData.productSpec,callback:function(t){e.$set(e.formData,"productSpec",t)},expression:"formData.productSpec"}})],1)],1)],1)],1)],1),e._v(" "),i("el-row",[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e()],1),e._v(" "),i("el-row",{style:e.initData.table_style},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_equipment_equipmentSpare_warehouseLoginfoBySpare_dialogSpareWarehouseLoginfoByProduct0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDialogPage}},[e._v("关闭")])],1),e._v(" "),e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);r.options.__file="dialogSpareWarehouseLoginfoByProduct.vue";t.default=r.exports},"8U56":function(e,t,i){},"8WZi":function(e,t,i){"use strict";i("XfO3"),i("HEwt"),i("a1Th"),i("rE2o"),i("ioFf"),i("f3/d"),i("yt8O"),i("RW0V"),i("7h0T"),i("KKXr"),i("91GP"),i("pIFo"),i("Oyvg"),i("dRSK"),i("rGqo"),i("Z2Ku"),i("L9s1"),i("INYr"),i("xfY5");var a=i("F9dT"),o=i("z0WU"),n=i("Yfch"),l=i("YP4+"),s=i("TB3a"),r=i("evdt"),c=i("yO6P");i("SRfc");function d(e,t,i){var l=e;e&&(e.match(/#[A-Za-z0-9_@]+#/g)||[]).map(function(e){return Object(a.c)([e.replace(/#/g,"")],t,i.setRowChain,i.tableData[i.dataName],!1,i.setTempData)[0]}).forEach(function(e){l=l.replace(/#[A-Za-z0-9_@]+#/,Object(n.a)(e)?e:'"'.concat(e,'"'))});try{return Object(o.l)(l)}catch(e){return!1}}var u={name:"dialog-img",props:{config:{type:Object,default:function(){return{}}},row:{type:Object,default:function(){return{}}}},data:function(){return{imgWidth:0,imgHeight:0,imgLoading:!0,clientWidth:0,clientHeight:0}},computed:{setStyle:function(){return{width:this.imgWidth+"px",height:this.imgHeight+"px",overflow:"auto",margin:"0 auto","text-align":"center","max-width":this.setMaxWidth,"max-height":this.setMaxHeight}},setMaxWidth:function(){return this.clientWidth?this.clientWidth-70+"px":""},setMaxHeight:function(){return this.clientHeight?this.clientHeight-140+"px":""},imgPath:function(){return this.$baseUrl+"/".concat(this.row[this.config._cellConfig.events.path])}},render:function(e){return e("div",{style:this.setStyle,directives:[{name:"loading",value:this.imgLoading}]},[e("img",{attrs:{src:this.imgPath,alt:"图片详情"},on:{load:this.masBoxImgLoad}})])},methods:{masBoxImgLoad:function(e){e.target?(this.imgWidth=e.target.width,this.imgHeight=e.target.height,this.imgLoading=!1):this.$nextTick(function(){this.imgWidth=e.target.width,this.imgHeight=e.target.height,this.imgLoading=!1})}},mounted:function(){var e=this;this.$parent.$nextTick(function(){var t=this;setTimeout(function(i){e.clientWidth=t.$el.offsetWidth,e.clientHeight=t.$el.offsetHeight})})}},p=(i("OG14"),{name:"table-input",inject:["rootVm"],props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}},computed:{setDisabled:function(){if(!this.childColconfig._cellConfig)return"0"===this.scope.row.isdisable;var e=Object.keys(this.childColconfig._cellConfig);return e.includes("disabledState")?this.scope.row[this.childColconfig._cellConfig.disabledState.key]===this.childColconfig._cellConfig.disabledState.value:e.includes("compute")?!this.childColconfig._cellConfig.editable:void 0}},mounted:function(){},methods:{}}),m=i("KHd+"),h=Object(m.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-input",{attrs:{size:"small",placeholder:"请输入内容",clearable:"",align:"center",type:e.childColconfig._cellConfig.textarea?"textarea":"text",disabled:e.setDisabled},on:{blur:function(t){e.rootVm.computedCell(e.scope.row,e.childColconfig,e.scope.$index)},clear:function(t){e.rootVm.computedCell(e.scope.row,e.childColconfig,e.scope.$index)}},model:{value:e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex],callback:function(t){e.$set(e.scope.row,e.childColconfig.prop||e.childColconfig.columnIndex,t)},expression:"scope.row[childColconfig.prop || childColconfig.columnIndex]"}},[e.childColconfig._cellConfig.icon?i("i",{staticClass:"treeFormTableIcon",attrs:{slot:"suffix"},slot:"suffix"},[i("svg-icon",{attrs:{"icon-class":e.childColconfig._cellConfig.icon}})],1):e._e()])},[],!1,null,null,null);h.options.__file="input.vue";var g=h.exports,f={name:"table-autocomplete",inject:["rootVm"],props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}},methods:{}},b=Object(m.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-autocomplete",{attrs:{size:"small",placeholder:"请输入内容",clearable:"","value-key":e.childColconfig._cellConfig.valueKey?e.childColconfig._cellConfig.valueKey:"name","fetch-suggestions":e.rootVm.querySearchAsync(e.scope.row,e.childColconfig),disabled:"0"===e.scope.row.isdisable},on:{clear:function(t){e.rootVm.computedCell(e.scope.row,e.childColconfig,e.scope.$index)}},model:{value:e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex],callback:function(t){e.$set(e.scope.row,e.childColconfig.prop||e.childColconfig.columnIndex,t)},expression:"scope.row[childColconfig.prop || childColconfig.columnIndex]"}},[e.childColconfig._cellConfig.icon?i("i",{staticClass:"treeFormTableIcon",attrs:{slot:"suffix"},slot:"suffix"},[i("svg-icon",{attrs:{"icon-class":e.childColconfig._cellConfig.icon}})],1):e._e()])},[],!1,null,null,null);b.options.__file="autocomplete.vue";var v=b.exports,D={name:"table-date-picker",inject:["rootVm"],props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}},methods:{}},y=(i("K7Qy"),Object(m.a)(D,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-date-picker",{key:e.scope.row._internalId,attrs:{size:"small",format:e.childColconfig._cellConfig.format||"yyyy 年 MM 月 dd 日","value-format":e.childColconfig._cellConfig.format||"yyyy-MM-dd","default-value":e.childColconfig._cellConfig.defaultValue?e.rootVm.defaultValue(e.childColconfig._cellConfig.defaultValue,e.scope.row,e.childColconfig):void 0,editable:void 0===e.childColconfig._cellConfig.editable||e.childColconfig._cellConfig.editable,disabled:!(!e.childColconfig._cellConfig.compute||e.childColconfig._cellConfig.edit)||"0"===e.scope.row.isdisable,type:e.childColconfig._cellConfig.valueType||"date",placeholder:e.childColconfig._cellConfig.placeholder||"选择日期","picker-options":e.rootVm.pickerOptions(e.scope.row,e.childColconfig)},on:{change:function(t){e.rootVm.datePickerChange(e.scope.row,e.childColconfig)}},model:{value:e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex],callback:function(t){e.$set(e.scope.row,e.childColconfig.prop||e.childColconfig.columnIndex,t)},expression:"scope.row[childColconfig.prop || childColconfig.columnIndex]"}})},[],!1,null,"ebf39f46",null));y.options.__file="datePicker.vue";var w=y.exports,C={name:"table-time-picker",inject:["rootVm"],props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}}},x=(i("IUtr"),Object(m.a)(C,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-time-picker",{key:e.scope.row._internalId,attrs:{clearable:"",size:"small",align:"center",disabled:"0"===e.scope.row.isdisable,editable:!1,placeholder:"任意时间点"},model:{value:e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex],callback:function(t){e.$set(e.scope.row,e.childColconfig.prop||e.childColconfig.columnIndex,t)},expression:"scope.row[childColconfig.prop || childColconfig.columnIndex]"}})},[],!1,null,"099c30af",null));x.options.__file="timePicker.vue";var S=x.exports,N={name:"table-select",inject:["rootVm"],props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}},computed:{selectOptions:function(){return this.rootVm.createSelectOptions[this.scope.$index]&&this.rootVm.createSelectOptions[this.scope.$index][this.childColconfig.prop||this.childColconfig.columnIndex]?this.rootVm.createSelectOptions[this.scope.$index][this.childColconfig.prop||this.childColconfig.columnIndex]:[]}},created:function(){}},k=Object(m.a)(N,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-select",{attrs:{size:"small",clearable:"",filterable:"",disabled:"0"===e.scope.row.isdisable,multiple:e.childColconfig._cellConfig.multiple||!1,loading:e.rootVm.selectLoading,"value-key":"item.id",placeholder:"请选择"},on:{focus:function(t){e.rootVm.getSelectOptions(e.scope.row,e.childColconfig,e.scope.$index)},change:e.rootVm.rowSelectChange},model:{value:e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex],callback:function(t){e.$set(e.scope.row,e.childColconfig.prop||e.childColconfig.columnIndex,t)},expression:"scope.row[childColconfig.prop || childColconfig.columnIndex]"}},e._l(e.selectOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.label,value:{item:t,row:e.scope.row,config:e.childColconfig,index:e.scope.$index},disabled:"0"===t.isdisable}})}),1)},[],!1,null,null,null);k.options.__file="select.vue";var _=k.exports,L={name:"table-cascader",inject:["rootVm"],props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}}},I=Object(m.a)(L,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-cascader",{attrs:{size:"small",filterable:void 0!==e.childColconfig._cellConfig.filterable&&e.childColconfig._cellConfig.filterable,disabled:void 0!==e.childColconfig._cellConfig.disabled&&("boolean"==typeof e.childColconfig._cellConfig.disabled?e.childColconfig._cellConfig.disabled:e.scope.row[e.childColconfig._cellConfig.disabled]),clearable:void 0===e.childColconfig._cellConfig.clearable||e.childColconfig._cellConfig.clearable,props:e.childColconfig._cellConfig.props||{value:"id",label:"label",children:"children",disabled:"disabled"},"expand-trigger":e.childColconfig._cellConfig.expand||"hover","show-all-levels":void 0===e.childColconfig._cellConfig.showLevels||e.childColconfig._cellConfig.showLevels,"change-on-select":void 0!==e.childColconfig._cellConfig.onChange&&e.childColconfig._cellConfig.onChange,options:e.rootVm.createCascaderOptions[e.scope.$index]&&e.rootVm.createCascaderOptions[e.scope.$index][e.childColconfig.prop||e.childColconfig.columnIndex]||[]},on:{focus:function(t){e.rootVm.getCascaderOptions(e.scope.row,e.childColconfig,e.scope.$index)},"active-item-change":e.rootVm.cascaderActiveItemChange},model:{value:e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex],callback:function(t){e.$set(e.scope.row,e.childColconfig.prop||e.childColconfig.columnIndex,t)},expression:"scope.row[childColconfig.prop  || childColconfig.columnIndex]"}})},[],!1,null,null,null);I.options.__file="cascader.vue";var T=I.exports,O={name:"table-switch",inject:["rootVm"],props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}}},$=Object(m.a)(O,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-switch",{attrs:{"active-color":e.childColconfig._cellConfig&&e.childColconfig._cellConfig.activeColor||"#13ce66","inactive-color":e.childColconfig._cellConfig&&e.childColconfig._cellConfig.inactiveColor||"#ff4949","active-value":e.childColconfig._cellConfig&&e.childColconfig._cellConfig.activeValue||"1","inactive-value":e.childColconfig._cellConfig&&e.childColconfig._cellConfig.inactiveValue||"0",disabled:!!e.childColconfig._cellConfig&&void 0!==e.childColconfig._cellConfig.disabled&&("boolean"==typeof e.childColconfig._cellConfig.disabled?e.childColconfig._cellConfig.disabled:e.scope.row[e.childColconfig._cellConfig.disabled])},on:{change:function(t){e.rootVm.componentMethod(e.scope.row,e.scope.$index,e.childColconfig)}},model:{value:e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex],callback:function(t){e.$set(e.scope.row,e.childColconfig.prop||e.childColconfig.columnIndex,t)},expression:"scope.row[childColconfig.prop || childColconfig.columnIndex]"}})},[],!1,null,null,null);$.options.__file="switch.vue";var V=$.exports,B={name:"table-date-time",props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}}},P=(i("WLa+"),Object(m.a)(B,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-date-picker",{key:e.scope.row._internalId,attrs:{size:"small",clearable:"",type:"datetime",align:"center",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss",disabled:"0"===e.scope.row.isdisable,editable:!1},model:{value:e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex],callback:function(t){e.$set(e.scope.row,e.childColconfig.prop||e.childColconfig.columnIndex,t)},expression:"scope.row[childColconfig.prop || childColconfig.columnIndex]"}})},[],!1,null,"9362f222",null));P.options.__file="dateTime.vue";var E=P.exports,j={name:"table-input-number",props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}}},M=Object(m.a)(j,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-input-number",{attrs:{size:"small",disabled:void 0!==e.childColconfig._cellConfig.disabled&&("boolean"==typeof e.childColconfig._cellConfig.disabled?e.childColconfig._cellConfig.disabled:e.scope.row[e.childColconfig._cellConfig.disabled]),precision:e.childColconfig._cellConfig.precision||2,step:e.childColconfig._cellConfig.step||1,max:e.childColconfig._cellConfig.max,min:e.childColconfig._cellConfig.min},model:{value:e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex],callback:function(t){e.$set(e.scope.row,e.childColconfig.prop||e.childColconfig.columnIndex,t)},expression:"scope.row[childColconfig.prop || childColconfig.columnIndex]"}})},[],!1,null,null,null);M.options.__file="inputNumber.vue";var A=M.exports,F={name:"table-progress",inject:["rootVm"],props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}}},U=(i("hHmD"),Object(m.a)(F,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-progress",{attrs:{percentage:(e.childColconfig._cellConfig.componentConfig.baseValue?100*(e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex]-0)/((e.scope.row[e.childColconfig._cellConfig.componentConfig.baseValue]||e.childColconfig._cellConfig.componentConfig.baseValue)-0):e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex]-0).toFixed(e.childColconfig._cellConfig.componentConfig.precision||e.rootVm.setPrecision)-0||0,"text-inside":e.childColconfig._cellConfig.componentConfig["text-inside"]||!1,"stroke-width":e.childColconfig._cellConfig.componentConfig["stroke-width"]||16,"show-text":!!e.childColconfig._cellConfig.componentConfig["show-text"],color:e.rootVm.setProgressColor(e.childColconfig._cellConfig.componentConfig.color,(e.childColconfig._cellConfig.componentConfig.baseValue?100*(e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex]-0)/((e.scope.row[e.childColconfig._cellConfig.componentConfig.baseValue]||e.childColconfig._cellConfig.componentConfig.baseValue)-0):e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex]-0).toFixed(e.childColconfig._cellConfig.componentConfig.precision||e.rootVm.setPrecision)-0||0)}})},[],!1,null,null,null));U.options.__file="progress.vue";var R=U.exports,W={name:"table-upload",inject:["rootVm"],props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}}},q=Object(m.a)(W,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{staticClass:"upload-demo",attrs:{disabled:void 0!==e.childColconfig._cellConfig.disabled&&("boolean"==typeof e.childColconfig._cellConfig.disabled?e.childColconfig._cellConfig.disabled:e.scope.row[e.childColconfig._cellConfig.disabled]),action:e.childColconfig._cellConfig.action||"",multiple:!!e.childColconfig._cellConfig.limit||e.childColconfig._cellConfig.multiple,data:e.childColconfig._cellConfig.data,name:e.childColconfig._cellConfig.name,"on-preview":e.rootVm.handlePreview,"on-success":e.rootVm.handleSuccess,"on-error":e.rootVm.handleError,limit:e.childColconfig._cellConfig.limit,"on-exceed":e.rootVm.handleExceed(e.childColconfig),"file-list":e.rootVm.fileList}},[i("el-button",{attrs:{size:"small",type:"text"},domProps:{textContent:e._s(e.childColconfig._cellConfig.btnName||"点击上传")}}),e._v(" "),e.childColconfig._cellConfig.tip?i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n    "+e._s(e.childColconfig._cellConfig.tip)+"\n  ")]):e._e()],1)},[],!1,null,null,null);q.options.__file="upload.vue";var K=q.exports,H={name:"table-tag",inject:["rootVm"],props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}}},Q=Object(m.a)(H,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-tag",{attrs:{type:e.rootVm.setTagState(e.scope.$index,e.scope.row,e.childColconfig).type,color:e.rootVm.setTagState(e.scope.$index,e.scope.row,e.childColconfig).color||"",size:"small"}},[e._v(e._s(e.rootVm.setTagState(e.scope.$index,e.scope.row,e.childColconfig).text||"未知状态")+"\n")])},[],!1,null,null,null);Q.options.__file="tag.vue";var G=Q.exports,z={name:"table-button",inject:["rootVm"],props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}}},J=Object(m.a)(z,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-button",{style:{"padding-left":e.childColconfig._cellConfig.hideTitle?"":"0"},attrs:{type:"text",size:"small",disabled:!!e.childColconfig._cellConfig.disabled&&e.scope.row[e.childColconfig._cellConfig.disabled]},on:{click:function(t){e.rootVm.componentMethod(e.scope.row,e.scope.$index,e.childColconfig)}}},[e._v(e._s(e.childColconfig._cellConfig.name||e.scope.row[e.childColconfig.prop||e.childColconfig.columnIndex]))])},[],!1,null,null,null);J.options.__file="button.vue";var Y=J.exports,X=i("Sr1L");function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ee={name:"dynaContent",inject:["rootVm"],props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}},components:{tableInput:g,tableAutocomplete:v,tableDate:w,tableTime:S,tableSelect:_,tableCascader:T,tableSwitch:V,tableDateTime:E,tableInputNumber:A,tableSteps:X.a,tableProgress:R,tableUpload:K,tableTag:G,tableButton:Y},data:function(){return{resultConfig:null}},computed:{setResultConfig:function(){return this.rootVm.dynaContentCellConfigs[this.scope.$index]?this.rootVm.dynaContentCellConfigs[this.scope.$index][this.childColconfig.prop||this.childColconfig.columnIndex]||null:this.resultConfig?this.resultConfig:null}},methods:{initComponentName:function(e){var t=e.charAt(0).toUpperCase()+e.substring(1,e.length);return"table".concat(t)},createNodeOptions:function(e){if(e&&"object"===Z(e)){var t={},i=Object.keys(e);return i.includes("innerText")&&(t.domProps={innerHTML:e.innerText.search(/self@|parent@|tempData@|sibling@/)>-1?this.computedVal(this.scope.row,e.innerText):e.innerText}),i.includes("style")&&(t.style=e.style),i.includes("class")&&(t.class=e.class),t.domProps&&Object.keys(t.domProps).includes("innerHTML")||(t.domProps={innerHTML:this.scope.row[this.childColconfig.prop||this.childColconfig.columnIndex]}),t}return null},createComponentOptions:function(e){if("cascader"===e.componentName||"select"===e.componentName){var t="_"+(this.childColconfig.prop||this.childColconfig.columnIndex);e.prop=t,this.rootVm.createDynaCascaderOptions(t,this.childColconfig,this.scope,e)}return"date"!==e.componentName&&"dateTime"!==e.componentName||(this.scope.row[this.childColconfig.prop||this.childColconfig.columnIndex]=new Date),{props:{scope:this.scope,childColconfig:e}}},computedVal:function(e,t){var i,o=t.split(/\([\\+|\-|\\*|\\/]\)/);return i=o.length>1?Object(a.b)(o,e,this.rootVm.setRowChain,this.rootVm.tableData[this.rootVm.dataName],t,this.rootVm.setTempData):Object(a.c)(o,e,this.rootVm.setRowChain,this.rootVm.tableData[this.rootVm.dataName],"",this.rootVm.setTempData)[0],Number.isNaN(parseFloat(i))||(i=i.toFixed(this.childColconfig._cellConfig.precision||this.rootVm.setPrecision)),i}},created:function(){this.resultConfig=this.rootVm.createDynaContentConfig(this.scope.row,this.childColconfig,this.scope.$index)},render:function(e){var t="",i=null;return this.setResultConfig?this.setResultConfig.componentName&&"string"==typeof this.setResultConfig.componentName?(t=this.initComponentName(this.setResultConfig.componentName),i=this.createComponentOptions(this.setResultConfig)):(t="span",i=this.createNodeOptions(this.setResultConfig)):(t="span",i={domProps:{innerHTML:this.scope.row[this.childColconfig.prop||this.childColconfig.columnIndex]}}),e(t,i)}},te={name:"content-postfix",inject:["rootVm"],props:{runTime:{type:String,default:"base"},scope:{type:Object,default:function(){return{}}},infoIndex:Number,colConfig:{type:Object,default:function(){return{}}}},created:function(){},render:function(e){var t=this.colConfig.postfix;if(t){var i=d(t.expression,this.scope.row,this.rootVm)?0:1;return"icon"===t.type&&t.contentConfigs[i]?e("svg-icon",{attrs:{"icon-class":t.contentConfigs[i].content},style:t.contentConfigs[i].style}):"text"===t.type&&t.contentConfigs[i]?e("span",{style:t.contentConfigs[i].style,domProps:{innerHTML:t.contentConfigs[i].content}}):"rowData"===t.type&&t.contentConfigs[i]?e("span",{style:t.contentConfigs[i].style,domProps:{innerHTML:function(e,t,i){if(!e)return 0;var o,l=e.split(/\([\\+|\-|\\*|\\/]\)/);return"string"==typeof(o=l.length>1?Object(a.b)(l,t,i.setRowChain,i.tableData[i.dataName],e,i.setTempData):Object(a.c)(l,t,i.setRowChain,i.tableData[i.dataName],"",i.setTempData)[0])&&Object(n.b)(o)||"number"==typeof o&&!Number.isNaN(o)?Object(n.a)(o)&&(o=parseFloat(o).toFixed(i.setPrecision)):o="",o}(t.contentConfigs[i].content,this.scope.row,this.rootVm)}}):null}return null}},ie={directives:{"button-width":{inserted:function(e,t,i){var a=t.value.that||i.context,o=t.value.component?t.value.component.length:0;o>1&&e.clientHeight>60&&a.$set(a.columnWidth,t.value.prop,60*Math.ceil(o/2)+25+"px")}},"auto-tran":{inserted:function(e,t,i){var a=t.value.that||i.context;clearTimeout(a.headerWidthTimerList[t.value.index]),a.headerWidthTimerList[t.value.index]=setTimeout(function(i){var o=t.value.isComponent?parseInt(a.columnWidth[t.value.prop]):e.clientWidth+20;a.headerWidthList.splice(t.value.index,1,Object.assign(t.value,{_width:o}))},20)}},"content-set":{inserted:function(e,t,i){var n=t.value.contentSet||t.value.config._cellConfig&&t.value.config._cellConfig.contentSet||"";if(n){var l=n.state||{},s=t.value.that||i.context,r=n.style||{};for(var c in l)if(l.hasOwnProperty(c))for(var d in r)r.hasOwnProperty(d)&&(e.style[d]=Object(o.l)(r[d].replace(c,Object(a.c)([l[c]],t.value.row,s.setRowChain,s.tableData[s.dataName],!1,s.setTempData)[0])))}}},"reset-content-width":{inserted:function(e,t,i){var a=t.value.that||i.context,o=t.value;o.colConfig.width||(a.resetContentWidthList[o.index]||(a.$set(a.resetContentWidthList,o.index,[]),a.$set(a.contentWidthList,o.index,null),a.$set(a.useMiddleValueList,o.index,!1),a.$set(a.contentTitleWidthList,o.index,0)),!a.resetContentWidthList[o.index][o.rowIndex]&&a.$set(a.resetContentWidthList[o.index],o.rowIndex,[]),!a.resetContentWidthList[o.index][o.rowIndex][o.cIndex]&&a.$set(a.resetContentWidthList[o.index][o.rowIndex],o.cIndex,0),a.resetContentWidthList[o.index][o.rowIndex][o.cIndex]+=e.offsetWidth,o.isTitle&&e.offsetWidth>a.contentTitleWidthList[o.index]&&(a.contentTitleWidthList[o.index]=e.offsetWidth))}},"custom-table-switch":{inserted:function(e,t,i){if(t.value.showSwitch){var a=t.value.that||i.context,o=e.parentNode.parentNode;a.createTableSwitch(o,t.value)}}},"merga-width":{bind:function(e,t,i){var a=t.value.that||i.context;!a.autoWidthTimer[t.value.id]&&(a.autoWidthTimer[t.value.id]=-1)},inserted:function(e,t,i){var a=t.value.that||i.context;!a.autoWidthList.length&&(a.autoWidthList=a.setTitleList.map(function(e){return[]})),a.$nextTick(function(i){-1===a.autoWidthTimer[t.value.id]&&(a.autoWidthTimer[t.value.id]=setTimeout(function(i){var o=e.offsetWidth,n=t.value,l=a.autoWidthList;if(l[n.parentLayer].length)if(l[n.parentLayer][n.selfLayer]>-1){var s=l[n.parentLayer][n.selfLayer];l[n.parentLayer].splice(n.selfLayer,1,o+s)}else l[n.parentLayer][n.selfLayer]=o;else{var r=[];r[n.selfLayer]=o,l.splice(n.parentLayer,1,r)}},20))})}}}},ae={name:"core-index",components:{contentTxt:{name:"content-txt",inject:["rootVm"],mixins:[ie],components:{ContentPostfix:te,ContentCustom:{name:"content-custom",inject:["rootVm"],mixins:[ie],props:{runTime:{type:String,default:"base"},scope:{type:Object,default:function(){return{}}},infoIndex:Number,colConfig:{type:Object,default:function(){return{}}}},computed:{config:function(){return this.colConfig._cellConfig.customContent},content:function(){return this.scope.row[this.colConfig.prop||this.colConfig.columnIndex]}},methods:{createMultiTxt:function(e){var t=this;return this.content?(this.content+"").split(this.config.contentConfig.separator||"\n").map(function(i,a){return t.config.contentConfig.contentSet?e("div",{class:{resetContent:t.rootVm.setMiddleValue[t.infoIndex],ellipsis:!!t.rootVm.setMiddleValue[t.infoIndex]&&t.rootVm.isEllipsis(t.scope.row[t.colConfig.prop||t.colConfig.columnIndex],parseInt(t.rootVm.setMiddleValue[t.infoIndex].body.width))},style:[t.colConfig._cellConfig?t.colConfig._cellConfig.bodyStyle:{},t.rootVm.setColumnGlobalStyle?t.rootVm.setColumnGlobalStyle.bodyStyle:{},t.rootVm.setMiddleValue[t.infoIndex]?t.rootVm.setMiddleValue[t.infoIndex].body:{}],directives:[{name:"content-set",value:{config:t.colConfig,row:t.scope.row,that:t.rootVm,contentSet:t.config.contentConfig.contentSet}}],domProps:{innerHTML:i}}):e("div",{domProps:{innerHTML:i}})}):[null]}},render:function(e){var t=null;return"multiTxt"===this.config.mode?t=this.createMultiTxt(e):"singleTxt"===this.config.mode||"multiHybird"===this.config.mode||"singleHybird"===this.config.mode||(t=[e("span",{domProps:{innerHTML:this.scope.row[this.colConfig.prop||this.colConfig.columnIndex]}})]),e("div",{},t)}}},props:{runTime:{type:String,default:"base"},scope:{type:Object,default:function(){return{}}},colConfig:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}},cIndex:Number,infoIndex:Number},data:function(){return{}},methods:{setDirectives:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[{name:"reset-content-width",value:{index:this.infoIndex,cIndex:this.cIndex,colConfig:this.colConfig,childColconfig:this.childColconfig,rowIndex:this.scope.$index,isTitle:e,that:this.rootVm}}];return"base"===this.runTime&&i.push({name:"merga-width",value:{parentLayer:this.infoIndex,selfLayer:this.cIndex,id:"_".concat(e?"0":"1").concat(this.childColconfig.prop),that:this.rootVm}}),i.concat(t)}},render:function(e){var t=this;return e("div",{style:{"text-align":this.childColconfig._cellConfig&&this.childColconfig._cellConfig.hideTitle?"center":"left",position:"relative"},on:{click:function(e){return t.rootVm.clickStop(e)},doubleClick:function(e){return t.rootVm.clickStop(e)}},key:(this.scope.row._internalId||this.infoIndex)+this.cIndex},[this.childColconfig._cellConfig?this.childColconfig._cellConfig.hideTitle?null:e("span",{style:[this.childColconfig._cellConfig.titleStyle||(this.rootVm.setColumnGlobalStyle?this.rootVm.setColumnGlobalStyle.titleStyle:{}),this.rootVm.setMiddleValue[this.infoIndex]?this.rootVm.setMiddleValue[this.infoIndex].title:{}],directives:this.setDirectives(!0),domProps:{innerHTML:"".concat(this.childColconfig.label,": ")}}):e("span",{style:this.rootVm.setMiddleValue[this.infoIndex]?this.rootVm.setMiddleValue[this.infoIndex].title:{},directives:this.setDirectives(!0),domProps:{innerHTML:"".concat(this.childColconfig.label,": ")}}),this.childColconfig._cellConfig&&this.childColconfig._cellConfig.events&&e("span",{style:[this.childColconfig._cellConfig.bodyStyle||(this.rootVm.setColumnGlobalStyle?this.rootVm.setColumnGlobalStyle.bodyStyle:{}),this.rootVm.setMiddleValue[this.infoIndex]?this.rootVm.setMiddleValue[this.infoIndex].body:{}],directives:this.setDirectives(!1)},[e("a",{on:{click:function(e){t.rootVm.mergeColumnEvents(t.childColconfig,t.scope)}},domProps:{innerHTML:this.scope.row[this.childColconfig.prop]}})]),this.childColconfig._cellConfig&&this.childColconfig._cellConfig.customContent&&e("content-custom",{props:{scope:this.scope,colConfig:this.childColconfig,infoIndex:this.infoIndex}}),(!this.childColconfig._cellConfig||!this.childColconfig._cellConfig.events&&!this.childColconfig._cellConfig.customContent)&&e("span",{class:{resetContent:this.rootVm.setMiddleValue[this.infoIndex],ellipsis:!!this.rootVm.setMiddleValue[this.infoIndex]&&this.rootVm.isEllipsis(this.scope.row[this.childColconfig.prop||this.childColconfig.columnIndex],parseInt(this.rootVm.setMiddleValue[this.infoIndex].body.width))},style:[this.childColconfig._cellConfig?this.childColconfig._cellConfig.bodyStyle:{},this.rootVm.setColumnGlobalStyle?this.rootVm.setColumnGlobalStyle.bodyStyle:{},this.rootVm.setMiddleValue[this.infoIndex]?this.rootVm.setMiddleValue[this.infoIndex].body:{}],directives:this.setDirectives(!1,[{name:"content-set",value:{config:this.childColconfig,row:this.scope.row,that:this.rootVm}}]),domProps:{innerHTML:this.scope.row[this.childColconfig.prop||this.childColconfig.columnIndex]}}),this.childColconfig&&this.childColconfig.postfix?e("span",{style:{position:"absolute"}},[e("content-postfix",{props:{scope:this.scope,"col-config":this.childColconfig}})]):null])}},contentComponent:{name:"content-component",inject:["rootVm"],mixins:[ie],components:{TableInput:g,TableAutocomplete:v,TableDate:w,TableTime:S,TableSelect:_,TableCascader:T,TableSwitch:V,TableDateTime:E,TableInputNumber:A,TableSteps:X.a,TableProgress:R,TableUpload:K,TableTag:G,TableButton:Y,TableDynaContent:ee,ContentPostfix:te},props:{runTime:{type:String,default:"base"},scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}},cIndex:Number,infoIndex:Number},data:function(){return{needRules:["input","date","time","select","cascader","dateTime","inputNumber"],componentNames:["input","date","time","select","cascader","switch","dateTime","inputNumber","steps","progress","upload","tag","dynaContent","button"],noHideTitle:["upload","tag"]}},render:function(e){var t,i,a=this;return this.componentNames.includes(this.childColconfig.componentName)?(i="steps"===this.childColconfig.componentName||"progress"===this.childColconfig.componentName,t=this.$createElement("table-".concat("input"===this.childColconfig.componentName&&this.childColconfig._cellConfig.asyn?"autocomplete":this.childColconfig.componentName),{props:{scope:this.scope,childColconfig:this.childColconfig}}),(this.needRules.includes(this.childColconfig.componentName)?e("ElFormItem",{style:{marginBottom:0,position:"relative"},attrs:{prop:"tableData.".concat(this.scope.$index,".").concat(this.childColconfig.prop),rules:this.rootVm.baseRules(this.scope.$index,this.scope.row,this.childColconfig),"inline-message":!0},key:(this.scope.row._internalId||this.infoIndex)+this.cIndex},[e("div",{style:{display:"inline-block"},on:{click:function(e){return a.rootVm.clickStop(e)},doubleClick:function(e){return a.rootVm.clickStop(e)}}},[t||null]),this.childColconfig&&this.childColconfig.postfix?e("div",{style:{display:"inline-block",position:"relative"}},[e("content-postfix",{attrs:{scope:this.scope,colConfig:this.childColconfig}})]):null]):e("div",{class:"customTableRowResetClass ".concat("steps"===this.childColconfig.componentName?"resetElStepStyle":""),style:{"text-align":this.childColconfig._cellConfig.hideTitle?"cneter":this.noHideTitle.includes(this.childColconfig.componentName)?"cneter":"left",position:"relative"},key:(this.scope.row._internalId||this.infoIndex)+this.cIndex,on:{click:function(e){return a.rootVm.clickStop(e)},doubleClick:function(e){return a.rootVm.clickStop(e)}}},[this.childColconfig._cellConfig.hideTitle||this.noHideTitle.includes(this.childColconfig.componentName)?null:this.$createElement("div",{style:"progress"===this.childColconfig.componentName?[{display:"inline-block","line-height":this.childColconfig._cellConfig.componentConfig["stroke-width"]>23?2:""},this.childColconfig._cellConfig.titleStyle||(this.rootVm.setColumnGlobalStyle?this.rootVm.setColumnGlobalStyle.titleStyle:{})||{}]:[this.childColconfig._cellConfig.titleStyle||{},{display:"inline-block"}],directives:i&&"base"===this.runTime?[{name:"merga-width",value:{parentLayer:this.infoIndex,selfLayer:this.cIndex,id:"_0"+this.childColconfig.prop,that:this.rootVm}}]:[],domProps:{innerHTML:"".concat(this.childColconfig.label,": ").concat("progress"===this.childColconfig.componentName&&this.childColconfig._cellConfig.componentConfig.showInitValue?this.scope.row[this.childColconfig.prop]:"")}}),this.$createElement("div",{style:"progress"===this.childColconfig.componentName?[{display:"inline-block",overflow:"hidden","vertical-align":"middle"},{width:(this.childColconfig._cellConfig.componentConfig.width||this.rootVm.constantWidth[this.childColconfig.componentName])+"px"}]:{display:"inline-block"},directives:i&&"base"===this.runTime?[{name:"merga-width",value:{parentLayer:this.infoIndex,selfLayer:this.cIndex,id:"_1"+this.childColconfig.prop,that:this.rootVm}}]:[]},[t]),this.childColconfig&&this.childColconfig.postfix?e("div",{style:{display:"inline-block",position:"relative"}},[e("content-postfix",{props:{scope:this.scope,"col-config":this.childColconfig}})]):null]))||null):e("span",{style:{marginLeft:"10px"},key:(this.scope.row._internalId||this.infoIndex)+this.cIndex},[this.scope.row[this.childColconfig.prop]])}},contentPostfix:te},props:{runTime:{type:String,default:"base"},scope:{type:Object,default:function(){return{}}},infoIndex:Number,colConfig:{type:Object,default:function(){return{}}}},data:function(){return{}},render:function(e){var t,i=this;return t=this.colConfig.mergeTitles&&this.colConfig.mergeTitles.length?this.colConfig.mergeTitles.map(function(t,a){return t.componentName?e("content-component",{attrs:{scope:i.scope,childColconfig:t,infoIndex:i.infoIndex,cIndex:a,runTime:i.runTime}}):e("content-txt",{attrs:{scope:i.scope,childColconfig:t,infoIndex:i.infoIndex,cIndex:a,colConfig:i.colConfig,runTime:i.runTime}})}):[e("div",{style:{"max-width":"100%",display:this.colConfig.postfix?"inline-block":"block","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},domProps:{innerHTML:this.scope.row[this.colConfig.prop]}}),e("content-postfix",{attrs:{scope:this.scope,colConfig:this.colConfig}})],e("div",{},t)}},oe=i("i7/w"),ne=i.n(oe),le={name:"custom-table-switch",props:{showSwitch:Boolean,columnData:Object,columnIndex:[String,Number]},data:function(){return{iconName:""}},computed:{setIconName:function(){return this.setState?"columnopen":"columnretract"},setTitleFirstStr:function(){return this.setState?"收起":"展开"},setSwitchTitle:function(){return this.setTitleFirstStr+(this.columnData?this.columnData.label+"列"||!1:"当前列")},setState:function(){return this.columnData._isShow}},methods:{handleClick:function(e){e.stopPropagation()},changeState:function(){this.$emit("change-column",this.columnIndex)}},created:function(){},render:function(e){var t=this;return e("div",{class:"customTableClass",on:{click:function(e){return t.handleClick(e)}}},[e("div",{style:"height:100%;padding:1px;",attrs:{title:this.setSwitchTitle},on:{click:function(e){return t.changeState()}}},[e("svg-icon",{attrs:{"icon-class":this.setIconName,"class-name":"el-button--text"}})])])}},se=i("U/5H"),re=i.n(se);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ue=ne.a.extend(le);t.a={props:{tableConfigList:{type:Array,default:function(){return[]}},layer:{type:Number,default:0},precision:{type:Number,default:l.a.precision},keyMapping:{type:Object,default:function(){return{}}},apiObj:{type:Object,default:function(){return{}}},dynamicValue:{type:Object,default:function(){return null}},tempData:{type:Object,default:function(){return{}}},useSummary:{type:Boolean,default:!1},customSummary:{type:Object,default:function(){return{}}},columnGlobalStyle:{type:Object,default:function(){return{}}},leftFixed:{type:Number,default:0},rightFixed:{type:Number,default:0},sortableConfig:{type:Object,default:function(){return{}}},showCheckBox:{type:Boolean,default:!1},showIndex:{type:Boolean,default:!1},pageData:{type:Object,default:function(){return{}}},isSingle:{type:Boolean,default:!1},hidePages:{type:Boolean,default:!1},customColumn:{type:Array,default:function(){return[]}},mergeTitle:{type:Array,default:function(){return[]}},mergeColumn:{type:Array,default:function(){return[]}},mergeRow:{type:Array,default:function(){return[]}},showTableSet:{type:Boolean,default:!1},componentId:{type:String,default:""},dragTable:{type:Boolean,default:!1},entireRowDrag:{type:Boolean,default:!1},internalGuid:{type:String,default:""},tableSwitchBaseKey:{type:String,default:""},tableSetMode:{type:String,default:"inline"},useScenarios:{type:String,default:""},initData:{type:Object,default:function(){return{}}},buttonStyle:{type:Object,default:function(){return null}},columnStyle:{type:Object,default:function(){return null}},postfix:{type:Object,default:function(){return null}},disableLoading:{type:Boolean,default:!1},smallPage:{type:Boolean,default:!1},internalRuleId:String},mixins:[ie],components:{coreIndex:ae,dialogImg:u},data:function(){return{domTimer:"",scrollTimer:"",userInfo:null,guid:"",pageNo:1,customSummaryOptionHeight:0,searchObj:{},wrapperWidth:0,tableWidth:0,fixedState:!1,tableHeaderObserver:null,removalList:[],selectLoading:!1,selectOptionTempList:[],selectOptionObj:{},selectOptionList:[],cascaderOptions:[],cascaderOptionList:[],cascaderOptionObj:{},resetContentWidthTimer:null,resetContentWidthList:[],contentWidthList:[],useMiddleValueList:[],contentTitleWidthList:[],useMiddleValue:!1,layerTableWidth:0,columnWidth:{},constantWidth:l.a.tableComponentWidth,headerWidthTimerList:[],restaurants:[],pickerOptionsTimer:"",defaultRowStyle:{"border-spacing":"5px"},rowClickTimer:"",rowDblclickSwitch:!1,rowDblclickRow:null,fixedTimer:"",dynaContentCellConfigs:[],userSwitchKey:"",tableColumnSwitch:null,showColList:[],columnSwitchBaseKey:""}},created:function(){this.userInfo=this.$storage.get("userInfo"),this.userSwitchKey="coustomTableColumnSwitch"+this.userInfo.userId,this.layer&&(this.columnSwitchBaseKey=this.tableSwitchBaseKey)},mounted:function(){this.setColumnState()},beforeDestroy:function(){this.tableHeaderObserver&&(this.tableHeaderObserver.disconnect(),this.tableHeaderObserver.takeRecords()),clearTimeout(this.fixedTimer),clearTimeout(this.scrollTimer),clearTimeout(this.rowClickTimer),clearInterval(this.domTimer),this.removalVarListTimer&&clearInterval(this.removalVarListTimer),this.setScrollWidthTimer&&clearTimeout(this.setScrollWidthTimer)},computed:{layerConfig:function(){return this.tableConfigList&&this.tableConfigList[this.layer]||{}},setWidthDiffValue:function(){return this.layerConfig.widthDiffValue||this.widthDiffValue},setButtonStyle:function(){return this.layerConfig.buttonStyle||this.buttonStyle},setColumnStyle:function(){return this.layerConfig.columnStyle||this.columnStyle},setPostfix:function(){return this.layerConfig.postfix||this.postfix},setHeaderRowStyle:function(){return this.layerConfig.headerStyle||this.headerStyle||{}},maxLayer:function(){return this.tableConfigList.length||this.layer+1},setRowStyle:function(){return this.layerConfig.rowStyle||this.rowStyle||{}},setTempData:function(){return this.layerConfig.tempData||this.tempData},setApiObj:function(){return this.layerConfig.apiObj||this.apiObj},setDynamicValue:function(){return this.layerConfig.dynamicValue||this.dynamicValue},setKeyMapping:function(){return this.layerConfig.keyMapping||this.keyMapping},setPrecision:function(){return this.layerConfig.precision||this.precision},setComponentId:function(){return this.layerConfig.componentId||this.componentId},setFixedState:function(){return!(this.maxLayer!==this.layer+1||!this.fixedState)},setLeftFixed:function(){return this.layerConfig.leftFixed||this.leftFixed},setRightFixed:function(){return this.layerConfig.rightFixed||this.rightFixed},setIsSingle:function(){return this.layerConfig.isSingle||this.isSingle},setGlobalSingle:function(){return this.layerConfig.globalSingle||this.globalSingle||!1},setLayerSingle:function(){return this.layerConfig.layerSingle||this.layerSingle||!1},setSortableConfig:function(){return this.layerConfig.sortableConfig||this.sortableConfig},dataName:function(){return this.layer?"children":"tableData"},setShowCheckBox:function(){return!(!this.tableData[this.dataName]||!this.tableData[this.dataName].length)&&(this.layerConfig.showCheckBox||this.showCheckBox)},setShowIndex:function(){return!(!this.tableData[this.dataName]||!this.tableData[this.dataName].length)&&(this.layerConfig.showIndex||this.showIndex)},setCustomColumn:function(){return this.layerConfig.customColumn||this.customColumn},setFixedList:function(){var e=this;if(this.maxLayer===this.layer+1){if("number"==typeof this.isFixed&&!this.isFixed)return[];var t=this.setTitleList.map(function(t,i,a){return i<e.setLeftFixed?"left":a.length-1-i<e.setRightFixed&&!e.setDragTable&&"right"});return this.wrapperWidth<this.tableWidth&&(t[0]="left",t[t.length-1]=!this.setDragTable&&"right"),t.findIndex(function(e){return"left"===e||"right"===e})>-1?this.fixedState=!0:this.fixedState=!1,t||[]}return[]},ruleForm:function(){return{tableData:this.tableData[this.dataName]}},setColumnGlobalStyle:function(){return this.layerConfig.columnGlobalStyle||this.columnGlobalStyle||!1},setUseSummary:function(){return this.layerConfig.useSummary||this.useSummary},setCustomSummary:function(){return this.layerConfig.customSummary||this.customSummary},setSysSummary:function(){return this.setUseSummary&&!this.setCustomSummary.component},setShowTableSet:function(){return this.layerConfig.showTableSet||this.showTableSet},setTableSetMode:function(){return this.layerConfig.tableSetMode||this.tableSetMode},columnSwitchKey:function(){return"number"!=typeof this.layer||this.layer?this.columnSwitchBaseKey+"Layer".concat(this.layer):this.columnSwitchBaseKey},setTableSwitch:function(){var e=(this.tableData.titleList||[]).map(function(e){return e.label});return this.$store.getters.switchState[this.userSwitchKey]&&this.$store.getters.switchState[this.userSwitchKey][this.columnSwitchKey]||e},setTitleList:function(){var e=this;return(this.tableData.titleList||[]).map(function(t){return e.$set(t,"_isShow",e.setTableSwitch.includes(t.label)),t})},hasPageData:function(){var e=!1;if(this.tableData.pageData)for(var t in this.tableData.pageData)this.tableData.pageData.hasOwnProperty(t)&&(e=!0);return e},setHidePages:function(){return!this.hasPageData||(this.layerConfig.hidePages||this.hidePages)},setSmallPageHeight:function(){return this.smallPage?30:40},resetHeight:function(){return this.checkedViewHeight+this.customSummaryOptionHeight+(this.setHidePages?0:this.setSmallPageHeight)},setTableHeight:function(){return this.layer?"":"calc(100% - "+this.resetHeight+"px)"},setColumnWidth:function(){return this.columnWidth},setColConfigs:function(){var e=this;return this.tableData.titleList?this.setShowTableSet&&"outside"===this.setTableSetMode?this.tableData.titleList.map(function(t){return t._isShow=!e.showColList||e.showColList.findIndex(function(e){return e===t.label})>-1,t}):void 0:[]},computedKeys:function(){var e=[];return this.setCustomColumn.forEach(function(t){t.componentName&&("input"===t.componentName||"select"===t.componentName)&&t._cellConfig&&t._cellConfig.compute&&e.push(t)}),e},dynaContentKeys:function(){var e=[];return this.setCustomColumn.forEach(function(t){t.componentName&&"dynaContent"===t.componentName&&t._cellConfig&&e.push(t)}),e},computedDateKeys:function(){var e=[];return this.setCustomColumn.forEach(function(t){t.componentName&&"date"===t.componentName&&t._cellConfig&&t._cellConfig.compute&&e.push(t)}),e},createSelectOptions:function(){var e=this;return this.tableData[this.dataName].forEach(function(t,i){e.setCustomColumn.forEach(function(t){t.componentName&&"select"===t.componentName&&t._cellConfig&&(!e.selectOptionTempList[i]&&e.$set(e.selectOptionTempList,i,{}),t._cellConfig.asyn&&t._cellConfig.asyn.apiName?!e.selectOptionTempList[i][t.prop||t.columnIndex]&&e.$set(e.selectOptionTempList[i],t.prop||t.columnIndex,[]):t._cellConfig.options&&!e.selectOptionTempList[i][t.prop||t.columnIndex]&&e.$set(e.selectOptionTempList[i],t.prop||t.columnIndex,t._cellConfig.options))})}),this.selectOptionTempList},createCascaderOptions:function(){var e=this;return this.tableData[this.dataName].forEach(function(t,i){e.setCustomColumn.forEach(function(t){t.componentName&&"cascader"===t.componentName&&t._cellConfig&&(!e.cascaderOptions[i]&&e.$set(e.cascaderOptions,i,{}),t._cellConfig.asyn&&t._cellConfig.asyn.apiName?!e.cascaderOptions[i][t.prop||t.columnIndex]&&e.$set(e.cascaderOptions[i],t.prop||t.columnIndex,[]):t._cellConfig.options&&!e.cascaderOptions[i][t.prop||t.columnIndex]&&e.$set(e.cascaderOptions[i],t.prop||t.columnIndex,t._cellConfig.options))})}),this.cascaderOptions},setMiddleValue:function(){var e=this;return this.useMiddleValueList.map(function(t,i){return t?{title:{display:"inline-block","vertical-align":"middle"},body:{width:e.contentWidthList[i]-e.contentTitleWidthList[i]-26+"px",display:"inline-block","white-space":"normal","vertical-align":"middle"}}:{title:{},body:{}}})},setDragTable:function(){return this.maxLayer===this.layer+1&&(this.layerConfig.dragTable||this.dragTable)||!1},setEntireRowDrag:function(){return this.layerConfig.entireRowDrag||this.entireRowDrag},setRowChain:function(){return this.layer?this.rowChain.concat(this.parentData):[]},setGuid:function(){return this.layer?this.internalGuid:this.guid},setTableColumnState:function(){return this.setShowTableSet&&"inline"===this.setTableSetMode},getTableRuleList:function(){return this.layer?null:this.$store.getters[this.guid+"/tableRuleList"]},getTableRuleStr:function(){return this.layer?null:this.$store.getters[this.guid+"/tableRuleStr"]}},methods:{getSummaries:function(e){var t=e.columns,i=e.data,a=[];return t.forEach(function(e,t){if(0!==t){var o=i.map(function(t){return Number(t[e.property])});o.every(function(e){return isNaN(e)})?a[t]="N/A":a[t]=o.reduce(function(e,t){var i=Number(t);return isNaN(i)?e:e+t},0)}else a[t]="总计"}),a},setColumnState:function(){"number"!=typeof this.layer||this.layer||(this.columnSwitchBaseKey=this.$el.dataset.customTableId)},createDynaCascaderOptions:function(e,t,i,a){var o="cascader"===a.componentName?"cascaderOptions":"selectOptionTempList";"select"!==a.componentName||a._cellConfig.multiple?i.row[e]&&(i.row[e]=[]):i.row[e]&&(i.row[e]=""),!this[o][i.$index]&&this.$set(this[o],i.$index,{}),!this[o][i.$index][e]&&this.$set(this[o][i.$index],e,[]),t._cellConfig.options&&t._cellConfig.options.length&&(this[o][i.$index][e]=t._cellConfig.options)},clickStop:function(e){return e.stopPropagation(),!1},narrowRow:function(e){this.$refs.baseTable.toggleRowExpansion&&this.$refs.baseTable.toggleRowExpansion(e,!1)},rowClick:function(e,t){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.maxLayer>1&&this.setExpand&&"1"!==this.setExpandColumnWidth){if(!this.tableConfigList[this.layer+1].apiObj&&e.children&&!e.children.length)return!1;clearTimeout(this.rowClickTimer),this.rowClickTimer=setTimeout(function(t){if(a&&a.label){var o=i.setTitleList.find(function(e){return e.label===a.label});if(o&&o.component)return!1;i.$refs.baseTable.toggleRowExpansion&&i.$refs.baseTable.toggleRowExpansion(e)}else{if("expand"===a.type||"selection"===a.type)return!1;i.$refs.baseTable.toggleRowExpansion&&i.$refs.baseTable.toggleRowExpansion(e)}},500)}},rowDblclick:function(e){if(clearTimeout(this.rowClickTimer),this.setShowCheckBox){if((this.setIsSingle||this.setGlobalSingle||this.setLayerSingle)&&"0"===e.rowState)return!1;this.rowDblclickSwitch=!0,this.rowDblclickRow=e,this.$refs.baseTable.toggleRowSelection&&this.$refs.baseTable.toggleRowSelection(e)}},selectionChange:function(e){this.rowDblclickSwitch&&(this.$refs.baseTable.$emit("select",e,this.rowDblclickRow),this.rowDblclickSwitch=!1,this.rowDblclickRow=null)},createTableSwitch:function(e,t){if(e){var i=this,a=new ue({propsData:{showSwitch:t.showSwitch,columnData:t.config,columnIndex:t.index}});a.$on("change-column",function(e){i.resetColumnState(e)}),e.appendChild(a.$mount().$el)}},resetColumnState:function(e){var t=this,i=this.tableData.titleList[e].label,a=this.setTableSwitch.slice(0);a.includes(i)?a=a.filter(function(e){return e!==i}):a.push(i),this.$store.commit("UPDATE_SWITCHSTATE",{userSwitchKey:this.userSwitchKey,columnSwitchKey:this.columnSwitchKey,list:a}),this.$nextTick(function(e){t.$refs.baseTable.doLayout()}),this.initLoading=!1},isEllipsis:function(e,t){var i,a=document.createElement("div");return a.innerHTML=e,a.style.whiteSpace="nowrap",a.style.position="absolute",a.style.opacity=0,document.body.appendChild(a),i=a.clientWidth,document.body.removeChild(a),i>=2*t},callTableFn:function(e){var t=e[0],i=e[1];return this[t].apply(this,de(i)),"123"},setFixed:function(){var e=this;e.$refs.baseTable&&e.$refs.baseTable.$nextTick&&e.$refs.baseTable.$nextTick(function(){e.$refs.baseTable&&(clearTimeout(e.fixedTimer),e.fixedTimer=setTimeout(function(){var t=e.$refs.baseTable.$el?e.$refs.baseTable.$el.querySelectorAll(".el-table__header")[0]:e.$el.querySelectorAll(".el-table__header")[0];e.wrapperWidth=e.$el.clientWidth,t&&(e.tableHeaderObserver=new MutationObserver(e.getTableHeaderWidth),e.tableHeaderObserver.observe(t,{attributes:!0,subtree:!1}))},10))})},getTableHeaderWidth:function(e,t){e[0]&&e[0].target&&(this.tableWidth=e[0].target.clientWidth)},indexMethod:function(e){return e+1},baseRules:function(e,t,i){return i._cellConfig&&i._cellConfig.rules&&i._cellConfig.rules.length?this.initRowRules(i._cellConfig,t,i):[]},initRowRules:function(e,t,i){var o=this,n=[];return e.rules.forEach(function(l,s){var r=null;0===s&&n.push({required:!0,message:"请输入内容",trigger:"blur"}),!1===l.required&&(n[0].required=l.required),l.type&&n.push({pattern:new RegExp(c.a[l.type].replace(/placeholder/g,"0,"),"g"),message:e.message[s]||"",trigger:"blur"}),l.regexp&&n.push({pattern:l.regexp,message:e.message[s]||"",trigger:"blur"}),(l.min||l.max)&&n.push({min:l.min||0,max:l.max||"",message:e.message[s]||"",trigger:"blur"}),(l.greaterThan||l.lessThan)&&(r=Object(a.a)(l.greaterThan?l:null,l.lessThan?l:null,l.type,"",t,[],i._cellConfig.message,i._cellConfig.rules,o.tableData[o.dataName],o.setTempData,s)),r&&r.forEach(function(e){n.push(e)})}),n},setTagState:function(e,t,i){var a=["success","info","warning","danger","default"],o=t[i.prop||i.columnIndex];for(var n in i._cellConfig)if(i._cellConfig.hasOwnProperty(n)&&parseInt(o)==parseInt(i._cellConfig[n].state))return{type:a.indexOf(n)>-1?n:"",text:i._cellConfig[n].text,color:i._cellConfig[n].color||""};return{type:"",text:"",color:""}},setButtonState:function(e,t,i){return d(i.rowState,t,this)},getSelectOptions:function(e,t,i){var a=this;t._cellConfig&&t._cellConfig.asyn&&(this.httpRemoval(e,t,i,this.removalList)?(this.selectLoading=!0,this.$api[t._cellConfig.asyn.apiName](this.setParams(e,t)).then(function(e){a.selectLoading=!1,a.selectOptionTempList[i][t.prop]=e.result.options,a.selectOptionObj[t._cellConfig.asyn.apiName]=e.result.options}).catch(function(e){})):this.selectOptionTempList[i][t.prop]=this.selectOptionObj[t._cellConfig.asyn.apiName])},getCascaderOptions:function(e,t,i){var a=this;t._cellConfig&&t._cellConfig.asyn&&!t._cellConfig.options&&(this.httpRemoval(e,t,i,this.cascaderOptionList)?this.$api[t._cellConfig.asyn.apiName](this.setParams(e,t)).then(function(e){a.cascaderOptions[i][t.prop]=e.result.options,a.cascaderOptionObj[t._cellConfig.asyn.apiName]=e.result.options}).catch(function(e){}):this.cascaderOptions[i][t.prop]=this.cascaderOptionObj[t._cellConfig.asyn.apiName])},cascaderActiveItemChange:function(e){},setParams:function(e,t){var i=Object.assign({},t._cellConfig?t._cellConfig.asyn.params:t.params);for(var a in i)i.hasOwnProperty(a)&&!i[a]&&(i[a]=e[a]||"");return Object.assign({},i)},httpRemoval:function(e,t,i,a){var o=!1;if(a.length){var n=this.setParams(e,t);a.find(function(e){if(e.apiName===t._cellConfig.asyn.apiName){if((new Date).getTime()-e.timeStamp>3e4)return e.timeStamp=(new Date).getTime(),e.params=n,o=!0,!0;for(var i in e.params)if(e.params.hasOwnProperty(i)&&e.params[i]!==n[i])return e.timeStamp=(new Date).getTime(),e.params=n,o=!0,!0}}),o||-1!==a.findIndex(function(e){return e.apiName===t._cellConfig.asyn.apiName})||(a.push({apiName:t._cellConfig.asyn.apiName,params:this.setParams(e,t),timeStamp:(new Date).getTime()}),o=!0)}else{var l={apiName:t._cellConfig.asyn.apiName,params:this.setParams(e,t),timeStamp:(new Date).getTime()};a.push(l),o=!0}return o},sortChange:function(e,t,i){this.resetTableComponentData()},resetTableComponentData:function(){this.cascaderOptions.forEach(function(e){({})}),this.selectOptionTempList.forEach(function(e){({})}),this.removalList=[],this.selectOptionObj={},this.cascaderOptionList=[],this.cascaderOptionObj={}},selectable:function(e,t){return"1"===e.rowState},querySearchAsync:function(e,t){var i=this;return function(a,o){var n=t._cellConfig.asyn||null;n&&i.$api[n.apiName](n.params).then(function(n){i.restaurants=n.result.options||[];var l=a?i.restaurants.filter(i.createStateFilter(a,e,t)):i.restaurants;o(l)}).catch(function(e){})}},createStateFilter:function(e,t,i){return function(t){return 0===t[i._cellConfig.valueKey?i._cellConfig.valueKey:"name"].toLowerCase().indexOf(e.toLowerCase())}},setTableCheckBoxDisplay:function(){var e=this;(this.setIsSingle||this.setGlobalSingle||this.setLayerSingle)&&this.setShowCheckBox&&(this.$refs.baseTable&&this.$refs.baseTable.$el?this.$refs.baseTable.$nextTick(function(t){e.$refs.baseTable.$el.querySelectorAll(".el-table__header").forEach(function(e){var t=e.querySelector(".el-checkbox");t&&(t.style.display="none")})}):(clearInterval(this.domTimer),this.domTimer=setInterval(function(){e.$refs.baseTable&&e.$refs.baseTable.$nextTick&&(clearInterval(e.domTimer),e.$refs.baseTable.$nextTick(function(t){e.$refs.baseTable.$el.querySelectorAll(".el-table__header").forEach(function(e){var t=e.querySelector(".el-checkbox");t&&(t.style.display="none")})}))},100)))},scrollTable:function(){var e=this;clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(function(t){var i=e.$refs.baseTable.$el,a=i?i.querySelector(".el-table__body-wrapper"):null,n=i?i.querySelector(".el-table__body-wrapper"):null;a&&a.scrollTop>0&&Object(o.w)(a),n&&n.scrollTop>0&&Object(o.w)(n)})},componentMethod:function(e,t,i){i&&i._cellConfig&&i._cellConfig.methodName&&this.$emit("callmethod",{methodName:i._cellConfig.methodName,params:{row:e,index:t}})},customSummaryValue:function(e){this.$emit("custom-summary-value",e)},btnAuthority:function(){var e={menuId:this.$storage.get("menuId"),roleId:this.$storage.get("userInfo").roleIds};this.$api.initMenuButtons(e).then(function(e){}).catch(function(e){})},rowSelectChange:function(e){e&&(e.config._cellConfig&&e.config._cellConfig.outputData&&this.$emit("databridge",e),e.config._cellConfig&&e.config._cellConfig.formulaName&&(this.replaceFormula(e),this.computedCell(e.row,e.config)))},replaceFormula:function(e){var t=e.item[e.config._cellConfig.formulaName];if(t){for(var i in this.setKeyMapping.resultKey)this.setKeyMapping.resultKey.hasOwnProperty(i)&&(t=t.replace(new RegExp(i),this.setKeyMapping.resultKey[i]));for(var a in this.setKeyMapping.variableKey)this.setKeyMapping.variableKey.hasOwnProperty(a)&&(t=t.replace(new RegExp("(?<![A-Za-z0-9_])"+a+"(?![A-Za-z0-9_])","g"),e.row[this.setKeyMapping.variableKey[a]]));var n=t.split("=");e.row[n[0]]=Object(o.l)(n[1])}},computedCell:function(e,t,i){var o=this;this.computedKeys.forEach(function(i){if((t.prop||t.columnIndex)!==(i.prop||i.columnIndex)){var l,s=i._cellConfig.compute.split(/\([\\+|\-|\\*|\\/]\)/);"string"==typeof(l=s.length>1?Object(a.b)(s,e,o.setRowChain,o.tableData[o.dataName],i._cellConfig.compute,o.setTempData):Object(a.c)(s,e,o.setRowChain,o.tableData[o.dataName],"",o.setTempData)[0])&&Object(n.b)(l)||"number"==typeof l&&!Number.isNaN(l)?e[i.prop||i.columnIndex]=parseFloat(l).toFixed(i._cellConfig.precision||o.setPrecision):e[i.prop||i.columnIndex]=l}}),this.dynaContentCell(e,t,i)},dynaContentCell:function(e,t,i){var o=this;this.dynaContentKeys.forEach(function(t){if(t._cellConfig.compute){var l,s=t._cellConfig.compute.split(/\([\\+|\-|\\*|\\/]\)/);"string"==typeof(l=s.length>1?Object(a.b)(s,e,o.setRowChain,o.tableData[o.dataName],t._cellConfig.compute,o.setTempData):Object(a.c)(s,e,o.setRowChain,o.tableData[o.dataName],"",o.setTempData)[0])&&Object(n.b)(l)||"number"==typeof l&&!Number.isNaN(l)?e[t.prop||t.columnIndex]=parseFloat(l).toFixed(t._cellConfig.precision||o.setPrecision):e[t.prop||t.columnIndex]=l}if(!o.dynaContentCellConfigs[i])for(var r=0;i>=r;)o.dynaContentCellConfigs[r]||o.dynaContentCellConfigs.splice(r,0,{}),r++;o.dynaContentCellConfigs[i][t.prop||t.columnIndex]||o.$set(o.dynaContentCellConfigs[i],t.prop||t.columnIndex,null),o.dynaContentCellConfigs[i][t.prop||t.columnIndex]=o.createDynaContentConfig(e,t,i)})},createDynaContentConfig:function(e,t,i){var o,s,r=this,c=Object.keys(t._cellConfig);if(c.includes("states")&&c.includes("contentConfigs")){if(s=this.setDynaContentData(e,t),"number"==typeof t._cellConfig.states)s<t._cellConfig.states&&(o=0),s===t._cellConfig.states&&(o=1),s>t._cellConfig.states&&(o=2);else if("string"==typeof t._cellConfig.states){var u,p=t._cellConfig.states.split(/\([\\+|\-|\\*|\\/]\)/);s<(u="string"==typeof(u=p.length>1?Object(a.b)(p,e,this.setRowChain,this.tableData[this.dataName],t._cellConfig.states,this.setTempData):Object(a.c)(p,e,this.setRowChain,this.tableData[this.dataName],"",this.setTempData)[0])&&Object(n.b)(u)||"number"==typeof u&&!Number.isNaN(u)?parseFloat(u).toFixed(t._cellConfig.precision||this.setPrecision)-0:l.a._infinity)&&(o=0),s===u&&(o=1),s>u&&(o=2)}else Array.isArray(t._cellConfig.states)&&(o=t._cellConfig.states.map(function(t){return d(t,e,r)}).findIndex(function(e){return!0===e}));return t._cellConfig.contentConfigs[o]?Object.assign({},{columnIndex:t.prop||t.columnIndex},t._cellConfig.contentConfigs[o]):null}return null},setDynaContentData:function(e,t){var i,a=e[t.prop||t.columnIndex];switch(ce(a)){case"string":!a&&(i=0),Object(n.b)(a)&&(i=parseFloat(a)),!Object(n.b)(a)&&(i=s.a.timeStamp(a));break;default:i=a}return i},handleExceed:function(e){var t=this;return function(i,a){t.$message.warning("当前限制选择 ".concat(e._cellConfig.limit," 个文件，本次选择了 ").concat(i.length," 个文件，共选择了 ").concat(i.length+a.length," 个文件"))}},handlePreview:function(e){e.url&&this.$alert('<div style="text-align: center"><img src="'.concat(e.url,'"></div>'),"",{dangerouslyUseHTMLString:!0})},handleError:function(e,t,i){this.$message.error("".concat(t.name,"上传失败"))},handleSuccess:function(e,t,i){this.$message({message:"".concat(t.name,"上传成功"),type:"success"})},setProgressColor:function(e,t){return e&&"auto"!==e?e:Object(o.s)(t)},checkedHeight:function(e){this.checkedViewHeight=e||0},checkedList:function(e){var t=this;this.$store.commit("UPDATE_SWITCHSTATE",{userSwitchKey:this.userSwitchKey,columnSwitchKey:this.columnSwitchKey,list:e}),this.showColList=e,this.$nextTick(function(e){t.$refs.baseTable.doLayout()}),this.initLoading=!1},defaultValue:function(e,t,i){return i._cellConfig&&i._cellConfig.compute?void(t[i.prop]=this.computeVal(i._cellConfig.compute,t,i.prop)):Object(a.c)([e],t,this.setRowChain,this.tableData[this.dataName],"",this.setTempData)[0]||new Date},computeVal:function(e,t,i){var o=e.split(/\([\\+|\-|\\*|\\/]\)/);if(o.length>1){var n=Object(a.b)(o,t,this.setRowChain,this.tableData[this.dataName],e,this.setTempData);return s.a.formatDate(n)}return t[i]},datePickerChange:function(e,t){var i=this;if(!this.computedDateKeys.length)return!1;this.computedDateKeys.forEach(function(o){if((t.prop||t.columnIndex)!==(o.prop||o.columnIndex)){var n=o._cellConfig.compute.split(/\([\\+|\-|\\*|\\/]\)/);n.length>1?e[o.prop||o.columnIndex]=Object(a.b)(n,e,i.setRowChain,i.tableData[i.dataName],o._cellConfig.compute,i.setTempData):e[o.prop||o.columnIndex]=Object(a.c)(n,e,i.setRowChain,i.tableData[i.dataName],"",i.setTempData)[0]||null}})},pickerOptions:function(e,t){var i,a,o=t._cellConfig;o.greaterThan&&(i=this.formatDates(e,t.prop,o.greaterThan,!1)),o.lessThan&&(a=this.formatDates(e,t.prop,o.lessThan,!0));var n,l,s={};return s.disabledDate=function(e){return i&&a?!(e.getTime()>i&&e.getTime()<a):i&&!a?e.getTime()<i:!(i||!a)&&e.getTime()>a-864e5},i&&o.greaterThan[o.greaterThan.length-1]&&(n=i+864e5),a&&o.lessThan[o.lessThan.length-1]&&(l=a-864e5),o.shortcuts&&(s.shortcuts=Object(r.a)(o.shortcuts,n,l)),s},formatDates:function(e,t,i,o){var n,l,r=Object(a.c)(i,e,this.setRowChain,this.tableData[this.dataName],"",this.setTempData);return"boolean"==typeof r[r.length-1]&&(n=r.pop()),o?(l=Math.min.apply(Math,de(r.map(function(e){return s.a.timeStamp(e)}))),n&&(l+=864e5)):(l=Math.max.apply(Math,de(r.map(function(e){return s.a.timeStamp(e)}))),n&&(l-=864e5)),l},mergeColumnEvents:function(e,t){var i=this,a=e._cellConfig.events.type;if("navigation"===a)this.$router.push({path:"/"+e._cellConfig.events.path});else if("link"===a)this.linkEvent(t.row[e._cellConfig.events.path]?"".concat(this.$baseUrl+"/"+t.row[e._cellConfig.events.path]):e._cellConfig.events.path);else if("file"===a){var o=t.row[e.prop||e.columnIndex]||"";if(/\w(\.gif|\.jpg|\.JGP|\.png|\.bmp)$/.test(o)){var n=this.$createElement;this.$msgbox({title:"预览",message:n(u,{props:{config:e,row:t.row},key:(new Date).getTime()}),customClass:"resetMsgBoxStyle",showCancelButton:!0,dangerouslyUseHTMLString:!0,confirmButtonText:"下载",cancelButtonText:"关闭",beforeClose:function(a,n,l){"confirm"===a?i.downloadFile(i.$baseUrl+"/"+t.row[e._cellConfig.events.path],o,n,l):l()}}).then(function(e){}).catch(function(e){})}else this.downloadFile(this.$baseUrl+"/"+t.row[e._cellConfig.events.path],o)}},linkEvent:function(e){window.open(e)},downloadFile:function(e,t,i,a){var o=document.createElement("a"),n=new MouseEvent("click");o.download=t||"downloadfile",o.href=e,o.dispatchEvent(n),i&&(i.confirmButtonText="已下载"),a&&a()},customSummaryHeight:function(e){this.customSummaryOptionHeight=e||0},setCellStyle:function(e){var t={};return this.setExpand&&(t=2===this.maxLayer&&"1"===this.setExpandColumnWidth?{"border-bottom":"none","background-color":"inherit"}:{"background-color":"inherit"}),this.setColumnStyle&&this.setColumnStyle[e.column.property]&&(t=Object.assign(t,this.setColumnStyle[e.column.property])),t},setHeaderCellStyle:function(e){var t={};return this.setColumnStyle&&this.setColumnStyle[e.column.property]&&(t=Object.assign(t,this.setColumnStyle[e.column.property])),t},setSort:function(){var e=this;this.$nextTick(function(t){var i=e.$refs.baseTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];re.a.create(i,{ghostClass:"sortable-ghost",handle:e.setEntireRowDrag?"":".theDragHandle",animation:150,setData:function(e){e.setData("Text","")},onEnd:function(t){e.$store.commit(e.setGuid+"/SORE_CHANGE",{evt:t,dataName:e.dataName,dataCopy:e.tableData[e.dataName].slice(),layer:e.layer}),e.resetTableComponentData()}})})},getData:function(){if(!this.layer){var e;this.$store.commit(this.setGuid+"/SET_TABLERULESTR",null),this.getTableRuleList.forEach(function(e){e.cb(e.vm)}),(e=this.getTableRuleStr.map(function(e){return'<p style="padding-left: '.concat(10*e.layer,'px;white-space: nowrap;">').concat(e.htmlStr,"</p>")}).join(""))&&this.$message({duration:5e3,showClose:!0,dangerouslyUseHTMLString:!0,message:"".concat(e),type:"error",center:!0}),!e&&this.$emit("databridge",this.tableData[this.dataName])}},tableRuleForm:function(e){var t=this;e.$refs.ruleForm.validate(function(i,a){if(!i){var o="",n=Object.keys(a);n.forEach(function(t,i){var l=t.split("."),s="";l[2]&&(s=e.tableData.titleList.find(function(e){return e.mergeTitles&&e.mergeTitles.length?e.mergeTitles.find(function(e){return e.prop===l[2]}):e.prop===l[2]})),o+="第".concat(parseInt(l[1])+1,"行<strong> ").concat(s&&s.label||""," </strong>").concat(a[t][0].message,"<br/>").concat(i===n.length-1?"":"<br/>")}),e.$store.commit(t.setGuid+"/SET_TABLERULESTR",{htmlStr:o,layer:e.layer})}})},updateData:function(e){this.pageNo=1,this.resetContentWidthList=[],this.layer||(this.setApiObj&&this.setApiObj.apiName?(this.searchObj=e||{},this.httpRequests()):e.result&&e.result.varList&&(this.$store.commit(this.guid+"/SET_TABLERULELIST",{cb:null,ruleId:this.layer?this.internalRuleId:"root"}),this.computedIds=[],this.tempCheckedList=[],this.$store.commit(this.guid+"/SET_TABLEDATA",{res:e,vm:this}),this.pageId=this.$storage.get("menuId"),this.setRowExpansion(this.tableData[this.dataName][0],!0),this.setDragTable&&this.setSort(),this.initLoading=!1,this.scrollTable(),this.$store.commit(this.guid+"/SET_TABLERULELIST",{cb:this.tableRuleForm,ruleId:this.layer?this.internalRuleId:"root",vm:this})))},deleteData:function(e){e&&!this.layer&&this.$store.commit(this.setGuid+"/DELETE_TABLEROW",e)},pushData:function(e,t){e&&!this.layer&&this.$store.commit(this.setGuid+"/ADD_TABLEROW",{data:e,target:t})},reviseData:function(e){e&&!this.layer&&this.$store.commit(this.setGuid+"/REVISE_DATA",e)},updataTableRow:function(e){e&&!this.layer&&this.$store.commit(this.setGuid+"/UPDATA_TABLEROW",e)}}}},"8Y3+":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("/Kw/");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{initialPeriodDate:null,paymentPeriodDate:null,rules:{initialPeriodDate:[{required:!0,message:"请填写初始付款期间",trigger:"change"}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.initData.rowData&&(this.formData=this.initData.rowData,this.initialPeriodDate=new Date(this.initData.rowData.initialPeriodDate),null!=this.initData.rowData.paymentPeriodDate&&(this.paymentPeriodDate=new Date(this.initData.rowData.paymentPeriodDate)))},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.updateCompanyByCompanyUser)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})},closeDialog:function(e){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"企业编码:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"企业名称:"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"企业简称:"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.companyShortname,callback:function(t){e.$set(e.formData,"companyShortname",t)},expression:"formData.companyShortname"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},"8h7S":function(e,t,i){},"8jQw":function(e,t,i){},"8ptq":function(e,t,i){"use strict";i.r(t);i("Oyvg"),i("xfY5");var a=i("WIyV"),o=i("CK78"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{receiptType:2,productUnit:{},rowData:{},rules:{},openDialogName:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],rowTableList:[],configs:{tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageSaleInvoiceDetail",params:{pageNo:1,fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,orderCount,productPrice,productSum,count,nowInvoiceSum",parentId:""}},customColumn:[{columnIndex:"count",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"},{lessThan:["self@notInvoiceCount",!0]}],message:["请输入大于零的正整数或(1,2)位小数！","必须小于等于未开发票数量！"]}},{columnIndex:"sum",componentName:"input",_cellConfig:{hideTitle:!0,editable:!1,compute:"self@count(*)self@productPrice"}},{columnIndex:"nowInvoiceSum",componentName:"input",_cellConfig:{hideTitle:!0,editable:!1,compute:"self@count(*)self@productPrice"}}],mergeTitle:[],mergeColumn:[],mergeRow:[]}},beforeCreate:function(){},created:function(){this.temp=this.initData.temp,null!=this.initData.temp.receiptType&&this.initData.temp.receiptType.trim().length>0&&(this.receiptType=Number(this.initData.temp.receiptType)),null!=this.initData.temp.id&&this.initData.temp.id.trim().length>0&&(this.apiObj.params.parentId=this.initData.temp.id.trim())},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){Array.isArray(e)&&(this.rowTableList=[],this.rowTableList=e,this.saveSaleOrder(this.rowTableList))},save:function(){this.$refs.orderAddByInvoiceDialog.getData()},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+\\.{0,1}[0-9]{0,2}$").test(e.trim())},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i].count;null!=a&&0!=a.trim().length||(t=t+"第 "+(i+1)+" 行: 开票数量为空或空字符串！"),null!=a&&a.trim().length>0&&!this.isNumberByValue(a.trim())&&(t=t+"第 "+(index+1)+" 行: 开票数量("+a+") 输入错误，请输入大于零的正整数或(1,2)位小数！")}return t},saveSaleOrder:function(e){var t=this,i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{for(var a=[],n=0;n<e.length;n++){var l=e[n];l.orderCount=l.count,a.push(l)}this.temp.dtlJsonStr="",null!=a&&a.length>0&&(this.temp.dtlJsonStr=JSON.stringify(a)),this.temp.receiptType=this.receiptType,this.dialogLoading=!0,Object(o.updateSaleInvoice)(this.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{margin:"10px 50px"}},[i("el-radio-group",{model:{value:e.receiptType,callback:function(t){e.receiptType=t},expression:"receiptType"}},[i("el-radio",{attrs:{label:2}},[e._v("增值税普通发票")]),e._v(" "),i("el-radio",{attrs:{label:3}},[e._v("增值税专用发票")])],1)],1),e._v(" "),i("div",{staticStyle:{"padding-left":"50px"}},[i("p",[i("a",[e._v("名称:")]),e._v(e._s(e.temp.custInvoiceCompanyName))]),e._v(" "),i("p",[i("a",[e._v("税号:")]),e._v(e._s(e.temp.custInvoiceNumber))]),e._v(" "),i("p",[i("a",[e._v("地址:")]),e._v(e._s(e.temp.custInvoiceAddress))]),e._v(" "),i("p",[i("a",[e._v("电话:")]),e._v(e._s(e.temp.custInvoiceMobile))]),e._v(" "),i("p",[i("a",[e._v("开户银行:")]),e._v(e._s(e.temp.custInvoiceBankName))]),e._v(" "),i("p",[i("a",[e._v("账号:")]),e._v(e._s(e.temp.custInvoiceBankCode))])]),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddByInvoiceDialog",attrs:{"data-custom-table-id":"views_sale_invoice_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddByInvoiceDialog",useDefaultBtn:!0,showAll:!1},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},"8veI":function(e,t,i){"use strict";i.r(t);i("rGqo");var a=i("WIyV"),o=(i("MPAK"),i("AUoE")),n={components:{customBaseTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){return{priceType:"1",dialogLoading:!1,isVisible:!1,inDialog:!0,resState:null,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{fullscreen:!1,title:"",data:null},tableData:[],apiObj:{apiName:"listPageOrderDetailQueryByDeliver",params:{ids:"",fieldCode:"prodInfo,orderUnitName,orderCount,needDeliverCount,notDeliverCount,orderDtlDeliverCount,productPrice,productSum",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"orderDtlDeliverCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"},{greaterThan:["0",!1]},{lessThan:["self@notDeliverCount",!0]}],message:["请输入数字！","必须大于零！","必须小于未发货数量！"]}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},created:function(){var e=this.initData.orderDtlIds;this.apiObj.params.ids=e},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.addDeliverDialog.getData()},databridge:function(e){Array.isArray(e)&&(this.tableData=[],this.tableData=e)},dialogOpen:function(){},closeDialog:function(e){},dialogClose:function(e){this.$emit("close-dialog",e||{})},saveSaleDeliver:function(){var e=this;if(this.getData(),null!=this.tableData&&this.tableData.length>0){var t=[];this.tableData.forEach(function(e){t.push(e)});var i=JSON.stringify(t);this.dialogLoading=!0,Object(o.addSaleDeliver)({roleId:this.$storage.get("userInfo").roleIds,priceType:this.priceType,dtlJsonStr:i}).then(function(t){0===t.code&&(e.dialogLoading=!1,e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{padding:"10px"}},[i("custom-base-table",{ref:"addDeliverDialog",attrs:{"data-custom-table-id":"views_sale_deliver_createDeliver_dialogAddDeliverDetail0",isSortable:!1,keyValue:!1,showIndex:!1,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"addDeliverDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("el-row",{staticStyle:{height:"100px","text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveSaleDeliver}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAddDeliverDetail.vue";t.default=s.exports},9030:function(e,t,i){"use strict";i.r(t);var a={components:{customBaseTable:i("WIyV").a},props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageAssistOrderDetailChild",params:{fieldCode:"prodInfo,unitName,ratio,count",addColumn:{columnKey:"prodInfo",columnName:"原材料"},prodColumnKey:"productCode,productName,productSpec,productProperty",orderId:"",orderDtlId:""}},customColumn:[{columnIndex:"prodInfo",width:"400",_cellConfig:{hideTitle:!0}}]}},beforeCreate:function(){},created:function(){null!=this.initData.orderDtlId&&(this.apiObj.params.orderDtlId=this.initData.orderDtlId),null!=this.initData.orderId&&(this.apiObj.params.orderId=this.initData.orderId)},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.tableData=[],this.tableData=e)},getData:function(){this.$refs.customBaseTable.getData()},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"900px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 20px 20px"}},[i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistOrde_dialogAssistOrderDetailChild0",showIndex:!1,showTableSet:!1,showCheckBox:!1,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogAssistOrderDetailChild.vue";t.default=n.exports},"9CSB":function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=(i("z0WU"),{components:{multilevelTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tableData:[],selectList:[],configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPagePurchaseReceipts",params:{fieldCode:"cdate,amount,cuserName",orderStr:"receipt.cdate desc",purchaseId:this.initData.temp.id}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}}]}},created:function(){},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},databridge:function(e){this.selectList=e},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;null!=e.selectList&&e.selectList}},watch:{}}),n=(i("wY0e"),i("MXGa"),i("KHd+")),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"800px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"90px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_purchaseReceipt_dialogViewReceipt0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogViewReceipt.vue";t.default=l.exports},"9Edw":function(e,t,i){},"9I58":function(e,t,i){"use strict";i.r(t);i("KKXr"),i("f3/d"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("t3Un")),l={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",state:!0,isShow:!0,plain:!0,icon:"refresh",method:this.resetQuery}],aboveTableConfig:{apiObj:{apiName:"listPageProducts",params:{fieldCode:"prodInfo,unitName,stockCount,safetyCount,lockCount,productStockCount",prodColumnKey:"code,name,spec,property"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!0,showTableSet:!1,showAll:!1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:[],tableSelectList:[]}},created:function(){var e="";e=null!=this.initData.orderStr?this.initData.orderStr:"prod.stock_count desc";var t="";if(null!=this.initData.data&&this.initData.data.length>0)for(var i=0;i<this.initData.data.length;i++){var a=this.initData.data[i];null!=a.productId&&a.productId.trim().length>0&&(t=t+a.productId+",")}var o="",n=!0;null!=this.initData.isNeedRepeat&&(n=this.initData.isNeedRepeat),n||null!=t&&t.trim().length>0&&(t=t.substring(0,t.lastIndexOf(",")),o="prod.id not in ("+(t=this.findQueryProductIds(t))+")");var l="false";null!=this.initData.isNeedCustomerPrice&&1==this.initData.isNeedCustomerPrice&&(l="true");var s="";null!=this.initData.customerId&&this.initData.customerId.trim().length>0&&(s=this.initData.customerId.trim()),this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,{isNeedCustomerPrice:l,customerId:s,isdisable:"1",queryStr:o,orderStr:e}),this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{selectList:this.tableSelectList,pageName:"selectProductByPurchasePlan"})},closeDialog:function(e){},tableSelected:function(e){this.tableSelectList=e},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.tempQuery.pid=this.selectTree.id,this.tempQuery.layer=this.selectTree.layer,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name},t.push(i),this.treeData=t,this.dialogLoading=!1},initTree:function(){var e=this;this.dialogLoading=!0,Object(n.a)({url:"/system/dictionary/treeDictionarys",method:"post",data:{dictionaryKey:"productGenre"}}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},findQueryProductIds:function(e){var t="";if(null==e||0==e.trim().length)return t;var i=e.split(",");if(null!=i&&i.length>0)for(var a=i.length,o=0;o<i.length;o++){var n="'"+i[o]+"'";o<a-1?t=t+n+",":o==a-1&&(t+=n)}return t},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},confrim:function(){this.$refs.trabsferTables.getTableSelected(),this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"选择货品",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"80%"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery}},[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1),e._v(" "),i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="selectProductBySaleOrder.vue";t.default=r.exports},"9L0e":function(e,t,i){"use strict";var a=i("/vRE");i.n(a).a},"9O1b":function(e,t,i){"use strict";var a=i("8N7a");i.n(a).a},"9QvX":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},isShowDept:!1,isShowCust:!1,rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,DepartmentDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择部门",treeUrl:"/system/department/treeDepartments",treeParm:{},tableUrl:"/system/department/listPageDepartments",tableParm:{isdisable:"1",fieldCode:"code,name,deptTypeName,layer,parentName,remark"},temp:{}},dialogName:"dialogTreeOption"}},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择客户",treeUrl:"/system/dictionary/treeDictionarys",treeParm:{dictionaryKey:"customerSupplierGenre"},tableUrl:"/base/customer/listPageCustomers",tableParm:{},temp:{}},dialogName:"dialogTreeOption"}},formTemp:[]}},created:function(){this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{changeVirtualGenre:function(){"1"==this.temp.virtualGenre?(this.isShowDept=!0,this.isShowCust=!1):"2"==this.temp.virtualGenre&&(this.isShowCust=!0,this.isShowDept=!1)},departmentSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualDeptId=e[0].id,this.temp.virtualDeptName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},customerSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualCustomerId=e[0].id,this.temp.virtualCustomerName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},dialogOpen:function(){var e=this;this.temp.virtualGenre="1",this.isShowDept=!0,this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addWarehouseByVirtual)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:e.tempLable.virtualGenreName+":",prop:"virtualGenreName"}},[i("el-select",{attrs:{placeholder:e.tempLable.virtualGenreName},on:{change:e.changeVirtualGenre},model:{value:e.temp.virtualGenre,callback:function(t){e.$set(e.temp,"virtualGenre",t)},expression:"temp.virtualGenre"}},[i("el-option",{attrs:{label:"内部单位",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"外部单位",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowDept,expression:"isShowDept"}],attrs:{label:"部门名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DepartmentDialog.dialog},on:{callback:e.departmentSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowCust,expression:"isShowCust"}],attrs:{label:"客户名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseVirtualAdd.vue";t.default=s.exports},"9URt":function(e,t,i){"use strict";i.r(t);i("f3/d"),i("rGqo");var a=i("2+ib"),o=i("uTIz"),n=i("BESt"),l=i("z0WU"),s={components:{dialogReport:n.default,multilevelTable:a.a,searchBar:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{expectCount:[{required:!0,message:"请输入期望生产数量"},{type:"number",message:"请输入数字"}]},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"250",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"getBomTreeProduct",params:{isreplaceable:"0",bomId:this.initData.temp.id,productId:this.initData.temp.prodId}},showIndex:!0,showCheckBox:!1,expand:!0,expandMode:"one",rowStyle:{"background-color":"#E4F3FA"}},{customColumn:[{columnIndex:"prodInfo",width:"250",_cellConfig:{hideTitle:!0}}],showIndex:!0,showCheckBox:!1,expand:!0,expandMode:"none",headerStyle:{"background-color":"#E4F3FA"}},{customColumn:[{columnIndex:"prodInfo",width:"250",_cellConfig:{hideTitle:!0}}],showIndex:!0,showCheckBox:!1,expand:!0,expandMode:"none",headerStyle:{"background-color":"#E4F3FA"}},{customColumn:[{columnIndex:"prodInfo",width:"250",_cellConfig:{hideTitle:!0}}],showIndex:!0,showCheckBox:!1,expand:!0,expandMode:"none",headerStyle:{"background-color":"#E4F3FA"}},{customColumn:[{columnIndex:"prodInfo",width:"250",_cellConfig:{hideTitle:!0}}],showIndex:!0,showCheckBox:!1,expand:!0,expandMode:"none",headerStyle:{"background-color":"#E4F3FA"}}],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},selectList:[],varList:[]}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},databridge:function(e){this.selectList=e},refreshTable:function(){this.updateData({expectCount:this.temp.expectCount})},createReport:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,setTimeout(function(){e.dialogLoading=!1,e.getData(),e.varList=[],e.createVarList(e.varList,e.selectList),e.selectList[0]&&e.selectList[0].expectCount<=0&&e.temp.expectCount>0?e.$message({type:"warning",duration:5e3,showClose:!0,message:"查询错误，请重新尝试！"}):e.varList.length<=0?e.$message({type:"warning",duration:5e3,showClose:!0,message:"物料充足，无需采购！"}):(e.dialogData.data=JSON.stringify(e.unique(e.varList,"id")),e.dialogData.title="选择货品",e.openDialogName="dialogReport",e.showDialog=!0,e.inLinVisible=!0)},2e3))})},useReplaceable:function(e){this.tableConfigList[0].apiObj.params=e?{bomId:this.initData.temp.id,productId:this.initData.temp.prodId,isreplaceable:"1"}:{bomId:this.initData.temp.id,productId:this.initData.temp.prodId,isreplaceable:"0"},this.updateData()},unique:function(e,t){for(var i={},a=[],o=0;o<e.length;o++)i[e[o][t]]?(Object(l.t)(a,i[e[o][t]]),e[o].expectCount=e[o].expectCount+i[e[o][t]].expectCount,e[o].lackCount=e[o].expectCount-e[o].stockCount,a.push(e[o])):(i[e[o][t]]=e[o],a.push(e[o]));return a},createVarList:function(e,t){var i=this;t.forEach(function(t){var a=t.id,o=t.code,n=t.name,l=t.spec,s=t.unit,r=t.stockCount,c=t.children,d=t.expectCount,u=t.lackCount,p=t.layer,m={id:a,code:o,name:n,spec:l,unit:s,stockCount:r,expectCount:d,lackCount:u};u>0&&p>0&&0==c.length&&e.push(m),c.length>0&&i.createVarList(e,c)})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e,t){this.addedData={rowData:e[0],parentData:t},this.showDialog=!1}},watch:{}},r=(i("xgHm"),i("jLjb"),i("KHd+")),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1500px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",[i("el-checkbox",{staticStyle:{"padding-top":"15px","padding-right":"5%",float:"right"},on:{change:e.useReplaceable}},[e._v("是否使用替代物")])],1),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_bundleAnalysis_dialogAnalysis0",tableConfigList:e.tableConfigList},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAnalysis.vue";t.default=c.exports},"9Uvm":function(e,t,i){"use strict";var a=i("J1zL");i.n(a).a},"9keN":function(e,t,i){},"9l+V":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("a0Xs");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},checkPrice:function(e){new RegExp("^[0-9]+([.]{1}[0-9]{1,4})?$").test(e)||this.$message({message:"单价:"+e+" 输入错误，请输入大于零的正整数或(1,4)位小数！",type:"warning",duration:5e3})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateProductUnitPrice)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"单位:",prop:"punitName"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{disabled:!0},model:{value:e.temp.punitName,callback:function(t){e.$set(e.temp,"punitName",t)},expression:"temp.punitName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"货品单价:",prop:"productPrice"}},[i("el-input",{staticStyle:{width:"240px"},on:{change:e.checkPrice},model:{value:e.temp.productPrice,callback:function(t){e.$set(e.temp,"productPrice",e._n(t))},expression:"temp.productPrice"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",e._n(t))},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogPriceEdit.vue";t.default=s.exports},"9rbG":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("uH3l"),o=i("WZUi");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{dialogEquipmentFormula:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{isShowTargetFormula:!1,rules:{targetName:[{required:!0,message:"请填写指标名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",equipmentId:"",targetType:"",targetName:"",targetFormula:"",targetFormulaSql:"",targetFormulaDisplay:"",remark:""}}},created:function(){this.formData=this.initData.rowData,this.isShowTargetFormula=!1,"B"==this.formData.targetType&&(this.isShowTargetFormula=!0)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){this.inLinVisible=!1,this.showDialog=!1,this.formulaData=e,this.formData.targetFormulaDisplay=e.targetFormulaDisplay,this.formData.targetFormula=e.targetFormula,this.formData.targetFormulaSql=e.targetFormulaSql},openFormula:function(){if(this.formData.targetName){this.dialogData.equipmentId=this.formData.equipmentId,this.dialogData.targetName=this.formData.targetName;var e=this.formData.targetFormulaDisplay;this.dialogData.formulaDisplay=e.substr(e.indexOf("=")+1,e.length-e.indexOf("=")+1),this.dialogData.title="设置公式",this.openDialogName="dialogEquipmentFormula",this.showDialog=!0,this.inLinVisible=!0}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先填写指标名称！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(o.updateEquipmentSensor)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){}))})}},watch:{}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"margin-top":"20px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto",width:"100%"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"指标名称:",prop:"targetName"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.targetName,callback:function(t){e.$set(e.formData,"targetName",t)},expression:"formData.targetName"}})],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowTargetFormula,expression:"isShowTargetFormula"}]},[i("el-form-item",{attrs:{label:"指标公式:",prop:"targetFormulaDisplay"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2",disabled:!0},model:{value:e.formData.targetFormulaDisplay,callback:function(t){e.$set(e.formData,"targetFormulaDisplay",t)},expression:"formData.targetFormulaDisplay"}}),e._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.openFormula}},[e._v("公式编辑器")])],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogEdit.vue";t.default=r.exports},A7y8:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("EDKZ");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择入库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{pageNo:1,type:"add",fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1",inIds:"'2c4a104aedc046848455f5fa6e3da87c','8e35209f19804e94940f076c8d71b955','4d89ccb1e64f499cbdc6409f173f5407','064dda15d44d4f8fa6330c5c7e46300e','81907167d5c8498692e6c4f3694c5cfa'"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"5"}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={productId:l.productId,remark:l.remark,p2nFormula:l.p2nFormula,priceUnit:l.priceUnit,priceCount:l.priceCount,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.addWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){this.temp.deptId="",this.temp.deptName="",e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]);var t=this.temp.type;this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"5"},-1!="d78ceba5beef41f5be16f0ceee775399,064dda15d44d4f8fa6330c5c7e46300e".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}):-1!="81907167d5c8498692e6c4f3694c5cfa,d1c6dc9aa3b045dbabff2d5e1e253c22".indexOf(t)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{pageNo:function(){this.initTable("add","")}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px",width:"100%"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouseByWC_inByWC_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAdd.vue";t.default=c.exports},AC8J:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},isShowDept:!1,isShowCust:!1,rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,DepartmentDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择部门",treeUrl:"/system/department/treeDepartments",treeParm:{},tableUrl:"/system/department/listPageDepartments",tableParm:{isdisable:"1",fieldCode:"code,name,deptTypeName,layer,parentName,remark"},temp:{}},dialogName:"dialogTreeOption"}},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择客户",treeUrl:"/system/dictionary/treeDictionarys",treeParm:{dictionaryKey:"customerSupplierGenre"},tableUrl:"/base/customer/listPageCustomers",tableParm:{},temp:{}},dialogName:"dialogTreeOption"}},formTemp:[]}},created:function(){this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{changeVirtualGenre:function(){"1"==this.temp.virtualGenre?(this.isShowDept=!0,this.isShowCust=!1):"2"==this.temp.virtualGenre&&(this.isShowCust=!0,this.isShowDept=!1)},departmentSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualDeptId=e[0].id,this.temp.virtualDeptName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},customerSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualCustomerId=e[0].id,this.temp.virtualCustomerName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},dialogOpen:function(){var e=this;this.temp.virtualGenre="1",this.isShowDept=!0,this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addWarehouseByVirtual)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:e.tempLable.virtualGenreName+":",prop:"virtualGenreName"}},[i("el-select",{attrs:{placeholder:e.tempLable.virtualGenreName},on:{change:e.changeVirtualGenre},model:{value:e.temp.virtualGenre,callback:function(t){e.$set(e.temp,"virtualGenre",t)},expression:"temp.virtualGenre"}},[i("el-option",{attrs:{label:"内部单位",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"外部单位",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowDept,expression:"isShowDept"}],attrs:{label:"部门名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DepartmentDialog.dialog},on:{callback:e.departmentSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowCust,expression:"isShowCust"}],attrs:{label:"客户名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseVirtualAdd.vue";t.default=s.exports},AGXJ:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("rGqo");var a=i("jCec"),o=i("we3T"),n=i("z0WU"),l=i("mSNy");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.editBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.editBtns(scope.row,scope.$index)">修改执行人</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" :disabled=true />\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={components:{dialogEditExecutor:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{detail:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],selectList:null,initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:c,editBtns:this.editBtns,editBtns_isShow:!1}},configs:{tableConfigs:[],showCheckBox:!1,showIndex:!0},pageData:null,pageNo:1}},created:function(){this.detail=this.initData.temp,"1"==this.detail.state&&(this.initConfigs.tableOperates.editBtns_isShow=!0),this.initTable(this.initData.temp.id)},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{initTable:function(e){var t=this;this.dialogLoading=!0,Object(o.listPageWarehouseCheckExecutor)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}({},this.tempQuery,{detailId:e,pageNo:1,pageSize:1e4})).then(function(e){t.getListPage(e),t.dialogLoading=!1}).catch(function(e){t.dialogLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==l.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==l.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==l.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==l.a.locale&&(e.label=t.substring(0,t.indexOf("_")))),"isdisable"===e.prop&&(e.component=d)}),this.internationalConfig(),e.push(this.initConfigs.tableOperates),e},internationalConfig:function(){"en"==l.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==l.a.locale&&(this.initConfigs.tableOperates.label="操作")},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},editBtns:function(e,t){var i="";null!=this.detail&&null!=this.detail.state&&this.detail.state.trim().length>0&&(i=this.detail.state.trim()),"1"==i?(this.dialogData.temp=e,this.dialogData.title="修改执行人",this.openDialogName="dialogEditExecutor",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"明细状态必须是(执行中)允许修改执行人！"})},closeDialog:function(e){"ok"==e.resState&&this.initTable(this.initData.temp.id),this.showDialog=!1,e.resState=this.resState}},watch:{}},p=i("KHd+"),m=Object(p.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"700px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo,isSortable:!0},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);m.options.__file="dialogViewExecutor.vue";t.default=m.exports},AZ8z:function(e,t,i){"use strict";i.d(t,"a",function(){return l});i("rE2o"),i("ioFf"),i("dRSK"),i("Oyvg"),i("a1Th");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return Object.prototype.toString.call(e).slice(8,-1)}function n(e){var t="";e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m");var i=new RegExp(e,t);return i.lastIndex=e.lastIndex,i}function l(e){if(null==e||"object"!==a(e))return e;var t;switch(o(e)){case"RegExp":return n(e);case"Date":return new Date(e.getTime());case"Function":return e;case"Array":t=[];break;default:t=Object.create(Object.getPrototypeOf(e))}for(var i=[],l=[{parent:t,key:void 0,data:e}],s=function(){var e=l.pop(),t=e.parent,s=e.key,r=e.data,c=t;if(void 0!==s)switch(o(r)){case"RegExp":return t[s]=n(r),"continue";case"Date":return t[s]=new Date(r.getTime()),"continue";case"Function":return t[s]=r,"continue";case"Array":c=t[s]=[];break;default:var d=Object.getPrototypeOf(r);c=t[s]=Object.create(d)}var u=i.find(function(e){return e.source===r});if(u)return t[s]=u.target,"continue";for(var p in i.push({source:r,target:c}),r)r.hasOwnProperty(p)&&(null==r[p]||"object"!==a(r[p])?c[p]=r[p]:l.push({parent:c,key:p,data:r[p]}))};l.length;)s();return t}},Ah2L:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("xfY5");var a=i("xMja");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{afterCount:[{required:!0,message:"请填写调整后数量！",trigger:"change"},{type:"number",message:"数量必须为数字值"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.beforeCount=this.initData.temp.safetyCount)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,Object(a.updateProductSafeStock)({id:t.temp.id,safetyCount:t.temp.afterCount}).then(function(i){t.dialogLoading=!1,0===i.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,e.initData.temp.safetyCount=new Number(t.temp.afterCount).toFixed(2),t.dialogClose({resState:"ok",afterCount:new Number(t.temp.afterCount).toFixed(2)}))}).catch(function(e){t.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"安全库存调整",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"150px"}},[i("el-form-item",{attrs:{label:"调整前安全库存:",prop:"beforeCount"}},[i("el-input",{staticStyle:{width:"140px"},attrs:{disabled:!0},model:{value:e.temp.beforeCount,callback:function(t){e.$set(e.temp,"beforeCount",t)},expression:"temp.beforeCount"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"调整后安全库存:",prop:"afterCount"}},[i("el-input",{staticStyle:{width:"140px"},model:{value:e.temp.afterCount,callback:function(t){e.$set(e.temp,"afterCount",e._n(t))},expression:"temp.afterCount"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogSafeStock.vue";t.default=s.exports},Ao2Z:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("1IKD"),o=i("uupt"),n=i("WIyV"),l=i("spKr"),s={components:{customBaseTable:n.a,productTableDialog:a.a,dialogAddSupplier:o.default},props:["initData","visible"],data:function(){return{rules:{supplierName:[{required:!0,message:"请选择供应商",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,SupplierDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择供应商",width:"500px",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"49c0a7ebcb4c4175bd5195837a6a9a13",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}},formData:{retreatId:"",supplierId:"",supplierName:"",type:"",typeName:"",remark:"",dtlJsonStr:""},tableData:[],tableList:[],configs:{topBarBtnList:[{name:"选择货品",nameEn:"selectProduct",isShow:!0,method:this.selectProduct}]},apiObj:{apiName:"listPageRetreatDetail",params:{fieldCode:"prodInfo,unitName,count,price,amount",prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:"",isNeedPage:"false"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"price",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,4})?$"}],message:["请输入大于零的正整数或(1,4)位小数！"]}},{columnIndex:"amount",width:"120",componentName:"input",_cellConfig:{hideTitle:!0,compute:"self@count(*)self@price"}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>{{data.total.toFixed(2)}}</span></li>\n                    </ul>'},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},data:{total:"0.00"},computes:{total:"table@amount"}}}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.formData.retreatId=e.id,this.apiObj.params.parentId=e.id,this.formData.supplierId=e.supplierId,this.formData.supplierName=e.supplierName,this.formData.type=e.type,this.formData.typeName=e.typeName,this.formData.remark=e.remark},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.retreatAddDialog.getData()},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},databridge:function(e){Array.isArray(e)&&(this.tableList=[],this.tableList=e)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},supplierSelect:function(e){e[0]&&(this.formData.supplierId=e[0].id,this.formData.supplierName=e[0].name)},selectProduct:function(){this.getData(),this.dialogData.data=this.tableList,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t&&(e.getData(),null!=e.tableList&&e.tableList.length>0)){for(var i=[],a=0;a<e.tableList.length;a++){var o=e.tableList[a],n={productId:o.productId,unit:o.unit,count:o.count,price:o.price};i.push(n)}null!=i&&i.length>0&&(e.formData.dtlJsonStr=JSON.stringify(i)),e.$confirm("添加采购退货单后，是否将该退货单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.formData.isAutoCommit="true",Object(l.updatePurchaseRetreat)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.formData.isAutoCommit="false",Object(l.updatePurchaseRetreat)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}})},closeDialog:function(e){this.showDialog=!1;var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByProduct(t)},tableSelectedByProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={id:"",productId:"",productCode:"",productName:"",productSpec:"",productProperty:"",unit:"",unitName:"",count:"0.00",amount:"0.00"};a.productId=i.id.trim(),null!=i.code&&i.code.trim().length>0&&(a.productCode=i.code.trim()),null!=i.name&&i.name.trim().length>0&&(a.productName=i.name.trim()),null!=i.spec&&i.spec.trim().length>0&&(a.productSpec=i.spec.trim()),null!=i.property&&i.property.trim().length>0&&(a.productProperty=i.property.trim()),null!=i.prodInfo&&i.prodInfo.trim().length>0&&(a.prodInfo=i.prodInfo.trim()),a.unit=i.unit,a.unitName=i.unitName,a.id=i.id.trim()||t,this.tableData.push(a)}}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px",width:"96%","margin-left":"2%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right"}},[i("el-row",[i("el-col",{attrs:{span:14}},[i("el-form-item",{attrs:{label:"供应商:",prop:"supplierName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"300px"},attrs:{dialog:e.SupplierDialog.dialog},on:{callback:e.supplierSelect},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"0px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1),e._v(" "),i("el-row",[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticStyle:{"padding-top":"10px"}},[i("custom-base-table",{ref:"retreatAddDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseRetreat_createRetreatByPurchase_dialogEditByPrice0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"retreatAddDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogEditByPrice.vue";t.default=c.exports},AsBr:function(e,t,i){},Aug8:function(e,t,i){},AvBW:function(e,t,i){},"Aw+t":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("uTIz"),o=i("2+ib");i("EXX/");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{searchBar:a.a,multilevelTable:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{searchList:[{label:"付款日期起",type:"date",ruleType:"date",mapKey:"beginDate",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"},{label:"付款日期止",type:"date",ruleType:"date",mapKey:"endDate",configs:{clearable:!0,name:"",type:"date",pickerOptions:{}},placeholder:"请选择"}],dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{},dataList:[],tableConfigList:[{customColumn:[],apiObj:{apiName:"listPagePurchasePaymentRecord",params:{fieldCode:"supplierCode,supplierName,typeName,paymentSum,backSum,cdateStr,remark",supplierId:""}},tempData:{},showIndex:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}]}},created:function(){var e=this.initData.supplierId;this.tableConfigList[0].apiObj.params.supplierId=e},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.updateData(e)},databridge:function(e){this.dataList=e},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{style:e.initData.table_style},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_paymentManager_listPaymentRecord0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);r.options.__file="listPaymentRecord.vue";t.default=r.exports},Aybl:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("91GP");var a=i("2+ib"),o=(i("z0WU"),i("Ppn9")),n=i("HhAy"),l=i("HSP/"),s={name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,tempQuery:{},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageBoms",params:{modelCode:"BomProduct",fieldCode:"prodInfo,unitName,code,name",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"prodCode,prodName,prodSpec,productProperty",isdefault:"1",isdisable:"1"}},temp:{},showIndex:!0,showHeader:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a,dialogAddFromBom:l.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{queryTable:function(){this.tableConfigList[0].apiObj.params.isNullAlarm="false",this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.tempQuery),this.updateData()},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.tableConfigList[0].apiObj.params.isNullAlarm="false",this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.tempQuery),this.updateData()},dialogClose:function(){this.$emit("close-dialog",{resState:"ok",selectList:[]})},nextStep:function(){var e="";this.selectList.forEach(function(t){e+=""==e?"'"+t.id+"'":",'"+t.id+"'"}),""!=e?(this.dialogData.temp=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="按产品BOM领料",this.openDialogName="dialogAddFromBom",this.showDialog=!0,this.visibleState=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条记录！"})},addProduct:function(){var e=this;this.selectList.length>0?this.$axios.all([Object(n.listProdLackNum)({dtlJsonStr:JSON.stringify(this.selectList),fieldCode:"code,name,spec,genre,unit,planCount,maxCount"})]).then(this.$axios.spread(function(t){e.$emit("close-dialog",{resState:"ok",selectList:t.result.varList})})).catch(function(e){}):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条记录！"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},delete:function(e,t){var i=this;i.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.deleteAttachment)(e).then(function(e){0===e.code&&(i.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),i.updateData())}).catch(function(e){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.updateData()},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}},r=(i("LnJg"),i("rSAu"),i("KHd+")),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1500px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-row",[i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{model:{value:e.tempQuery.prodCode,callback:function(t){e.$set(e.tempQuery,"prodCode",t)},expression:"tempQuery.prodCode"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{model:{value:e.tempQuery.prodName,callback:function(t){e.$set(e.tempQuery,"prodName",t)},expression:"tempQuery.prodName"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"BOM编码："}},[i("el-input",{model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"BOM名称："}},[i("el-input",{model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:2}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:2}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_produce_materialRequisition_dialogAddProduct20",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:"index"!=this.initData.parent,expression:"this.initData.parent != 'index' "}],attrs:{type:"primary"},on:{click:e.addProduct}},[e._v("确定")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"index"==this.initData.parent,expression:"this.initData.parent == 'index' "}],attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);c.options.__file="dialogAddProduct2.vue";t.default=c.exports},B3qi:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d"),i("Oyvg");var a=i("WIyV"),o=i("1IKD"),n=i("z9VH");i("Q4qC");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择入库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:"",deleteIds:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark",parentId:"",type:"edit"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntityVirtual:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type;var e=this.initData.temp.pid,t=this.initData.temp.pathId;null!=t&&t.trim().length>0&&-1!=t.indexOf("56f5e83dcb9911e884ad00163e105f05")?(this.warehouseData.defaultSelected[0]=e,this.warehouseData.defaultSelected[1]=this.initData.temp.warehouseId):null!=t&&t.trim().length>0&&-1!=t.indexOf("2d75e49bcb9911e884ad00163e105f05")&&(this.warehouseData.defaultSelected[0]=this.initData.temp.warehouseId),this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i].priceCount;if(null==a||0==a.trim().length)t=t+"第 "+(i+1)+" 行: 入库数量为空或空字符串！";else new RegExp("^[0-9]+([.]{1}[0-9]+){0,1}$").test(a)||(t=t+"第 "+(i+1)+" 行: 入库数量("+a+")输入错误，请输入大于零的整数或小数！")}return t},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){var a=this.checkColumn(e);if(null!=a&&a.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:a});else{for(var o=[],l=0;l<e.length;l++){var s=e[l],r={id:s.id,productId:s.productId,remark:s.remark,priceCount:s.priceCount,priceUnit:s.priceUnit,p2nFormula:s.p2nFormula,p2nIsScale:s.p2nIsScale,p2nDecimalCount:s.p2nDecimalCount};o.push(r)}null!=o&&o.length>0&&(i=JSON.stringify(o)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,Object(n.updateWarehouseIn)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]);var t=this.temp.type;-1!="2c4a104aedc046848455f5fa6e3da87c,8e35209f19804e94940f076c8d71b955".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"1"}):-1!="d78ceba5beef41f5be16f0ceee775399,064dda15d44d4f8fa6330c5c7e46300e".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}):-1!="81907167d5c8498692e6c4f3694c5cfa".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}):-1!="80ac00503a1d41e5926be50f93c32c54".indexOf(t)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"2"})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,this.tableData.push(o)}}},watch:{}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"仓库:",prop:"warehouseName"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{data:e.warehouseData.data},on:{callback:e.warehouseSelect},model:{value:e.warehouseData.defaultSelected,callback:function(t){e.$set(e.warehouseData,"defaultSelected",t)},expression:"warehouseData.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouse_in_manage_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogEdit.vue";t.default=c.exports},B7Ix:function(e,t,i){"use strict";var a=i("oeZg");i.n(a).a},"BC+U":function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("rGqo"),i("f3/d");var a=i("K3g7"),o=i("uTIz"),n=i("y9YZ"),l=i("R1DK"),s=i("zF5t"),r=i("z0WU"),c=i("mSNy");function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p={components:{searchBar:o.a,dialogDispatch:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{searchList:[{label:"货品编码",type:"input",ruleType:"string",mapKey:"code",configs:{},placeholder:"请输入货品编码"},{label:"货品名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"请输入货品名称"},{label:"规格型号",type:"input",ruleType:"string",mapKey:"spec",configs:{},placeholder:"请输入规格型号"},{label:"货品属性",type:"input",ruleType:"string",mapKey:"genreName",configs:{},placeholder:"请输入货品属性"},{label:"计量单位",type:"input",ruleType:"string",mapKey:"unitName",configs:{},placeholder:"请输入计量单位"},{label:"货品类型",type:"input",ruleType:"string",mapKey:"typeName",configs:{},placeholder:"请输入货品类型"}],guid:"",queryType:null,productId:"",productType:"",dialogLoading:!1,isVisible:!1,inDialog:!0,tempLable:{},tempQuery:{},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{fullscreen:!1,title:"",data:null,temp:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1},selectTree:{pid:"",id:"",name:""},BaseTableLoading:!1,tableData:[],selectList:[],configs:{tableConfigs:[],isSingle:!1,showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1}},created:function(){var e=this.initData.temp;this.productId=e.productId,this.productType=e.productType,this.initTree()},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=u(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.tempQuery=e,this.pageNo=1,this.initTable(null,this.selectTree.id)},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,name:e.nodeData.name},this.pageNo=1,this.initTable(null,this.selectTree.id)},initTree:function(){var e=this;this.dialogLoading=!0;var t=this;Object(a.treeWarehouse)({isNotNeedSpare:"true"}).then(function(e){var i=[],a=e.result.treeList;t.selectTree={pid:a.pid,id:a.id,name:a.name},i.push(a),t.treeData=i,t.initTable(null,null),t.$nextTick(function(){t.$refs.tree.$children[0].setCurrentKey(t.selectTree.id)})}).catch(function(t){e.dialogLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(r.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!0,this.configs.showIndex=!0,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==c.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==c.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==c.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==c.a.locale&&(e.label=t.substring(0,t.indexOf("_"))))}),e},initTable:function(e,t){var i=this;null!=t&&0!=t.trim().length||(t=""),e&&(this.BaseTableLoading=!0),Object(l.listPageWarehouseProductMove)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){d(e,t,i[t])})}return e}({},this.tempQuery,{fieldCode:"pathName,wpCode,code,name,spec,genreName,unitName,typeName,stockCount",isNotNeedSpare:"true",queryStr:" (wp.stock_count > 0 ) ",warehouseId:t,pageNo:this.pageNo})).then(function(t){i.getListPage(t),i.dialogLoading=!1,e&&(i.BaseTableLoading=!1)}).catch(function(e){i.dialogLoading=!1,i.BaseTableLoading=!1})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",{resState:this.resState})},dataBridge:function(e){this.selectList=e},save:function(){var e=this,t=this.selectList;if(null!=t&&0!=t.length){var i={userType:this.$storage.get("userInfo").userType,roleName:"仓库管理员"};Object(s.addRoleByName)(i).then(function(i){var a=i.result,o=a.roleId,n=a.roleName;null!=o&&0!=o.trim().length?(e.dialogData.temp=t,e.dialogData.temp.roleId=o,e.dialogData.temp.roleName=n,e.dialogData.title="派单",e.openDialogName="dialogDispatch",e.showDialog=!0,e.inLinVisible=!0):e.$message({type:"warning",duration:5e3,showClose:!0,message:"仓库管理员角色ID不存在(角色ID为空或空字符串)！"})}).catch(function(e){})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条明细！"})},closeDialog:function(e){"ok"==e.resState&&(this.resState="ok",this.isVisible=!1),this.inLinVisible=!1,this.showDialog=!1}},watch:{pageNo:function(){this.initTable(null,this.selectTree.id)}}},m=(i("SAfV"),i("KHd+")),h=Object(m.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"},{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{staticClass:"clearfix",staticStyle:{height:"100%"}},[i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}),e._v(" "),i("div",{staticStyle:{float:"left",width:"16.67%",position:"relative","background-color":"#F9FAFC","overflow-y":"auto",padding:"5px"}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("div",{staticStyle:{float:"left",width:"83.33%"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.BaseTableLoading,expression:"BaseTableLoading"}],staticClass:"tableContent",staticStyle:{transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("el-row",{staticStyle:{height:"100px","text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)],1)},[],!1,null,null,null);h.options.__file="dialogSelectWarehouseProduct.vue";t.default=h.exports},BESt:function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=i("cTe8"),n=(i("z0WU"),{components:{multilevelTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{remark:"齐套分析预采",makeId:""},tempLable:{},tempQuery:{},rowData:{},selectList:[],configs:{topBarBtnList:[]},tempData:{defaultDate:new Date},tableConfigList:[{customColumn:[{columnIndex:"lackCount",width:120,componentName:"input",_cellConfig:{rules:[]}},{columnIndex:"edate",width:180,componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",greaterThan:["self@cdate",!0]}},{columnIndex:"remark",width:120,componentName:"input",_cellConfig:{rules:[]}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"deleteData",editBtns_isShow:!0,icon:"deleteData",method:this.deleteData}]}],apiObj:{apiName:"getLackProduct",params:{fieldCode:"code,name,spec,unit,lackCount,edate,remark",dtlJsonStr:this.initData.temp}},showIndex:!0,showCheckBox:!1,expand:!1,expandMode:"none",rowStyle:{"background-color":"#E4F3FA"}}]}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},databridge:function(e){Array.isArray(e)?(this.selectList=[],this.selectList=e):(this.rowData=null,null!=e.row&&(this.rowData=e.row))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},saveOrder:function(){var e=this,t="",i="";if(this.getData(),null!=this.selectList&&0!=this.selectList.length){for(var a=[],n=0;n<this.selectList.length;n++){var l=this.selectList[n],s={productId:"",count:"",reason:"",edate:"",remark:"",id:""};s.productId=l.id,s.count=l.lackCount,s.remark=l.remark,s.edate=l.edate,s.reason="350135d34d1b43aeb4e2977061632045",s.id=l.id,i=i?i+",'"+l.id+"'":"'"+l.id+"'",a.push(s)}t=JSON.stringify(a),this.temp.prodIds=i,this.temp.dtlJsonStr=t,this.$refs.submitForm.validate(function(t){t&&Object(o.checkPurchasePlan)(e.temp).then(function(t){0===t.code&&(t.msg?e.$confirm(t.msg,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.addPurchasePlan(e.temp)}):e.addPurchasePlan(e.temp))}).catch(function(e){})})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},addPurchasePlan:function(e){var t=this;this.dialogLoading=!0,Object(o.addPurchasePlan)(e).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})},closeDialog:function(e){this.showDialog=!1;null!=e.isConfirm&&e.isConfirm;null!=e.selectList&&e.selectList}},watch:{}}),l=(i("WqLC"),i("Efe/"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1024px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_bundleAnalysis_dialogReport0",tableConfigList:e.tableConfigList},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveOrder}},[e._v("生成采购计划")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogReport.vue";t.default=s.exports},BMZf:function(e,t,i){"use strict";var a=i("k4rH");i.n(a).a},BsFA:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("91GP");var a=i("WIyV"),o=i("uTIz"),n=i("rmg0"),l=i("SwnK"),s=i("01ds"),r=i("QmdA");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var u={components:{searchBar:o.a,customBaseTable:a.a,dialogAdd:n.default,dialogEditCustomerInvoice:s.default,dialogAddCustomerInvoice:l.default},name:"dialog-add",props:["initData","visible"],data:function(){var e;return d(e={rowTableList:[],guid:"",searchList:[{label:"客户名称",type:"input",ruleType:"string",mapKey:"customerName",configs:{},placeholder:"客户名称"}],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",orderDetail_style:"",deliverDetail_style:"",orderId:"",orderObject:{},title:"",temp:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,resState:"",temp:{},tempLable:{},currentpage:1,searchObj:{},tableData:[]},"rowTableList",[]),d(e,"configs",{tableConfigs:[],showCheckBox:!1,showIndex:!1}),d(e,"apiObj",{apiName:"getInvoiceAmount",params:{fieldCode:"customerName,uninvoiceAmount"}}),d(e,"customColumn",[]),d(e,"mergeTitle",[]),d(e,"mergeColumn",[]),d(e,"mergeRow",[]),e},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=c(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},setApiObj:function(){return this.apiObj.params=Object.assign({},this.apiObj.params,this.searchObj),this.apiObj}},watch:{},methods:{getData:function(){this.$refs.dialogFinanceInvoice.getData()},formData:function(e){},databridge:function(e){Array.isArray(e)&&(this.rowTableList=[],this.rowTableList=e)},sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.setApiObj()},dialogOpen:function(){},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},addInvoice:function(){var e=this;if(null!=this.rowTableList&&0!=this.rowTableList.length){var t=this.rowTableList[0].customerId;Object(r.findIsExistCustomerInvoice)({customerId:t}).then(function(i){"false"==i.isExistCustomerInvoice?(e.dialogData.customerId=t,e.dialogData.title="客户开票信息",e.openDialogName="dialogAddCustomerInvoice",e.showDialog=!0,e.inLinVisible=!0):(e.dialogData.temp=i.customerInvoice,e.dialogData.customerId=t,e.dialogData.title="客户开票信息",e.openDialogName="dialogEditCustomerInvoice",e.showDialog=!0,e.inLinVisible=!0)})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条数据！"})},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}}},p=i("KHd+"),m=Object(p.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"98%",margin:"0 1%",border:"1px solid #ebeef5"}},[i("custom-base-table",{ref:"dialogFinanceInvoice",attrs:{"data-custom-table-id":"views_finance_financeInvoice_dialogFinanceInvoice0",isSortable:!1,varList:e.tableData,keyValue:!1,isSingle:!0,showCheckBox:!0,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.setApiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddByInvoiceDialog",useDefaultBtn:!1,showAll:!1},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addInvoice}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);m.options.__file="dialogFinanceInvoice.vue";t.default=m.exports},BwO8:function(e,t,i){"use strict";var a=i("g2Wg");i.n(a).a},"C/GO":function(e,t,i){},C3qa:function(e,t,i){"use strict";var a=i("8U56");i.n(a).a},C4Dn:function(e,t,i){},C9Ry:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("txn6");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{parentId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){this.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.auditDisagreeWarehouseOutScrapBySimple)({id:e.parentId,remark:e.temp.remark}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAuditDisagree.vue";t.default=s.exports},CBQj:function(e,t,i){"use strict";var a=i("qEi0");i.n(a).a},CC3z:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo");var a=i("uTIz"),o=i("2+ib"),n=i("Qbmm");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{searchBar:a.a,multilevelTable:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{parentId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",table_style:""},rowTableList:[],tableConfigList:[{customColumn:[{columnIndex:"stockCount",componentName:"input",_cellConfig:{rules:[{required:!0},{greaterThan:["0",!0]}],message:["此项不能为空！","盘点数量必须大于等于零！"]}},{columnIndex:"editChangeCount",componentName:"input",_cellConfig:{compute:"self@stockCount(-)self@checkStockCount"}}],apiObj:{apiName:"listPageWarehouseCheckDetails",params:{parentId:"",isNeedEqual:"true",fieldCode:"warehouseName,productCode,productName,productSpec,productGenreName,productUnitName,checkStockCount,stockCount,editChangeCount"}},tempData:{},showHeader:!0,showIndex:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable"}]}},created:function(){this.parentId=this.initData.parentId,this.tableConfigList[0].apiObj.params.parentId=this.initData.parentId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1},save:function(){var e=this;if(this.$refs.customBaseTable.getData(),null!=this.rowTableList&&this.rowTableList.length>0){var t=[];this.rowTableList.forEach(function(e){var i={id:e.id,warehouseId:e.warehouseId,productId:e.productId,code:e.code,warehouseProductId:e.warehouseProductId,checkStockCount:e.checkStockCount,stockCount:e.stockCount};t.push(i)});var i="";t.length>0&&(i=JSON.stringify(t)),Object(n.executeWarehouseCheckBySimple)({id:this.parentId,deptId:this.$storage.get("userInfo").deptId,dtlJsonStr:i}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{staticStyle:{"padding-top":"10px"},style:e.initData.table_style},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseByWC_checkByWC_checkExecute0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);c.options.__file="checkExecute.vue";t.default=c.exports},CIQn:function(e,t,i){"use strict";i("f3/d"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("t3Un")),l={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{fieldCode_default:"code,name,spec,genreName,unitName,stockCount,safetyCount,lockCount,productStockCount",temp:{},tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],aboveTableConfig:{apiObj:{apiName:"listPageProducts",params:{}},customColumn:[],tempData:{},showIndex:!1,showCheckBox:!0,showTableSet:!1,showAll:!1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[],tempData:{},showIndex:!1,showCheckBox:!1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:[],tableSelectList:[]}},created:function(){var e=this.fieldCode_default;null!=this.initData.fieldCode&&this.initData.fieldCode.trim().length>0&&(e=this.initData.fieldCode.trim());var t="";null!=this.initData.queryStr&&(t=this.initData.queryStr);var i="";i=null!=this.initData.orderStr?this.initData.orderStr:"prod.stock_count desc",this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,{fieldCode:e,queryStr:t,orderStr:i,isdisable:"1"}),this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{tableSelectList:this.tableSelectList})},closeDialog:function(e){},tableSelected:function(e){this.tableSelectList=e},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.tempQuery.pid=this.selectTree.id,this.tempQuery.layer=this.selectTree.layer,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name},t.push(i),this.treeData=t,this.dialogLoading=!1},initTree:function(){var e=this;this.dialogLoading=!0,Object(n.a)({url:"/system/dictionary/treeDictionarys",method:"post",data:{dictionaryKey:"productGenre"}}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},confrim:function(){this.$refs.trabsferTables.getTableSelected(),this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"选择货品",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="productCustomTransferTable.vue";t.a=r.exports},CL6Q:function(e,t,i){e.exports=i.p+"static/img/warehouseTaskStatistics.e614ad2.png"},CU5c:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("+h8N"),n=i("vzyZ"),l=i("m8Ov"),s=i("MPAK"),r=i("hZMg"),c=i("QD6Y"),d=i("cTe8");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p={components:{customBaseTable:a.a,selectProductByPurchasePlan:o.default,dialogAddProductByBOM:l.default,selectOrderByPurchasePlan:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{sysDateStr:"",reasonId:"372b0432c06e4792b00b03b8fb5be190",reason:"常规补货",rules:{makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{remark:"",makeId:"",makeName:"",dtlJsonStr:"",isAutoCommit:""},tempLable:{},tempQuery:{},tableData:[],tableList:[],configs:{topBarBtnList:[{name:"货品新增",nameEn:"addPlanByProduct",isShow:!0,method:this.addPlanByProduct},{name:"订单新增",nameEn:"addPlanByOrder",isShow:!0,method:this.addPlanByOrder},{name:"BOM",nameEn:"addPlanByBOM",isShow:!0,method:this.addPlanByBOM},{name:"产品合并",nameEn:"mergeProduct",isShow:!0,method:this.mergeProduct}]},apiObj:{apiName:"listPagePurchasePlanDetails",params:{fieldCode:"prodInfo,unitName,count,reason,edate,remark,orderCode",prodColumnKey:"productCode,productName,spec,productProperty",parentId:"null"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{}},{columnIndex:"reason",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"getDictionarys",params:{dictionaryKey:"purchaseReason",isglobal:"1"}},outputData:!0}},{columnIndex:"edate",width:"150",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",greaterThan:["tempData@minDate",!0]}},{columnIndex:"remark",width:"110",componentName:"input",_cellConfig:{}},{columnIndex:"orderCode",width:"110",_cellConfig:{hideTitle:!0}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{minDate:new Date},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this,t=this.$storage.get("userInfo");this.temp.makeId=t.userId,this.temp.makeName=t.userName,this.apiObj.params.parentId="null",Object(r.findSystemDateTime)({dateFormat:"yyyy-MM-dd"}).then(function(t){0==t.code&&null!=t.sysDateTime&&t.sysDateTime.trim().length>0&&(e.sysDateStr=t.sysDateTime.trim())}).catch(function(e){})},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=u(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.planAddDialog.getData()},databridge:function(e){Array.isArray(e)&&(this.tableList=[],this.tableList=e)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},addPlanByProduct:function(){this.tableList=[],this.getData(),this.dialogData.title="选择货品",this.openDialogName="selectProductByPurchasePlan",this.dialogData.tableData=this.tableList,this.dialogData.isNeedRepeat=!1,this.showDialog=!0,this.inLinVisible=!0},addPlanByBOM:function(){this.dialogData.title="选择BOM",this.openDialogName="dialogAddProductByBOM",this.showDialog=!0,this.inLinVisible=!0},addPlanByOrder:function(){this.tableList=[],this.getData(),this.dialogData.title="选择销售订单",this.openDialogName="selectOrderByPurchasePlan",this.dialogData.tableData=this.tableList,this.dialogData.isNeedRepeat=!1,this.showDialog=!0,this.inLinVisible=!0},mergeProduct:function(){var e=this;this.getData();var t=[];if(this.tableList.length>0)for(var i=0;i<this.tableList.length;i++){var a=this.tableList[i],o="";null!=a.reason&&null!=a.reason.item&&null!=a.reason.item.id?o=a.reason.item.id:null!=a.reasonId&&(o=a.reasonId),a.reasonId=o,a.reason="",t.push(a)}var n="";null!=t&&t.length>0&&(n=JSON.stringify(t),Object(c.mergeProductByPurchasePlanDetail)({dtlJsonStr:n}).then(function(t){if(null!=t.mergeProductList&&(e.tableList.length>0&&e.tableList.splice(0,e.tableList.length),null!=t.mergeProductList&&t.mergeProductList.length>0))for(var i=0;i<t.mergeProductList.length;i++){var a=t.mergeProductList[i],o={id:a.id,count:a.count,orderCode:a.orderCode,edate:a.edate,jsonStr:a.jsonStr,productId:a.productId,productCode:a.productCode,productName:a.productName,productSpec:a.productSpec,productProperty:a.productProperty,prodInfo:a.prodInfo,reasonId:a.reasonId,reason:a.reason,unitId:a.unitId,unitName:a.unitName};e.tableData.push(o)}}).catch(function(e){}))},checkColumnByTable:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o="";null!=a.count&&(o=a.count+""),null==o||0==o.trim().length?t=t+"第 "+(i+1)+" 行: 计划数量为空或空字符串！":null!=o&&o.trim().length>0&&!Object(s.isNumberByValueSystem)(o)?t=t+"第 "+(i+1)+" 行: 计划数量("+o+") 输入错误，请输入大于零的正数支持(1,2)位小数！":null!=o&&o.trim().length>0&&Object(s.isNumberByValueSystem)(o)&&o/1<=0&&(t=t+"第 "+(i+1)+" 行: 计划数量("+o+") 输入错误，请输入大于零的正数支持(1,2)位小数！"),""===a.reason&&(t=t+"第 "+(i+1)+" 行: 采购原因为空，请选择采购原因！"),null==a.edate&&(t=t+"第 "+(i+1)+" 行: 期望到货日期为空，请选择期望到货日期！")}return t},save:function(){var e=this;this.tableList=[],this.getData(),setTimeout(function(){var t=e.checkColumnByTable(e.tableList);null!=t&&t.trim().length>0?e.$message({type:"warning",duration:5e3,showClose:!0,message:t}):e.savePlan()},1e3)},savePlan:function(){var e=this,t="";if(null!=this.tableList&&0!=this.tableList.length){for(var i=[],a=0;a<this.tableList.length;a++){var o=this.tableList[a],n="";n=o.reason.item?o.reason.item.id:o.reasonId;var l={orderDtlId:o.orderDtlId,count:o.count,reason:n,edate:o.edate,remark:o.remark,productId:o.productId,unitId:o.unitId,jsonStr:o.jsonStr};i.push(l)}t=JSON.stringify(i),this.temp.dtlJsonStr=t,this.$refs.submitForm.validate(function(t){t&&e.$confirm("添加计划后，是否将该计划提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.temp.isAutoCommit="true",Object(d.addPurchasePlan)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.temp.isAutoCommit="false",Object(d.addPurchasePlan)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})})}},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"selectProductByPurchasePlan"==e.pageName){var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByProduct(t)}else if(null!=e&&"selectOrderByPurchasePlan"==e.pageName){var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelectedBySaleOrder(i)}else if(null!=e&&"dialogAddProductByBOM"==e.pageName){var a=[];null!=e.selectList&&(a=e.selectList),this.tableSelectedByBOM(a)}},tableSelectedByBOM:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t];this.tableData.push(i)}},tableSelectedByProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={id:"",productId:"",productCode:"",productName:"",spec:"",productProperty:"",unitId:"",unitName:"",reasonId:"",reason:""};a.productId=i.id.trim(),null!=i.code&&i.code.trim().length>0&&(a.productCode=i.code.trim()),null!=i.name&&i.name.trim().length>0&&(a.productName=i.name.trim()),null!=i.spec&&i.spec.trim().length>0&&(a.spec=i.spec.trim()),null!=i.property&&i.property.trim().length>0&&(a.productProperty=i.property.trim()),null!=i.prodInfo&&i.prodInfo.trim().length>0&&(a.prodInfo=i.prodInfo.trim()),null!=i.count&&i.count.trim().length>0&&(a.count=i.count.trim()),a.unitId=i.unit,a.unitName=i.unitName,a.reasonId=this.reasonId,a.reason=this.reason,a.edate=this.sysDateStr,a.id=i.id.trim()||t,this.tableData.push(a)}},tableSelectedBySaleOrder:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a="0.00";null!=i&&null!=i.purchasePlanCount&&i.purchasePlanCount.trim().length>0&&(a=i.purchasePlanCount.trim());var o={id:i.id,count:a,orderDtlId:i.orderDtlId,orderCode:i.sysCode,productId:i.productId,productCode:i.productCode,productName:i.productName,spec:i.productSpec,productProperty:i.productProperty,prodInfo:i.prodInfo,unitId:i.prodUnitId,unitName:i.prodUnitName,edate:this.sysDateStr,reasonId:this.reasonId,reason:this.reason};this.tableData.push(o)}}},watch:{}},m=i("KHd+"),h=Object(m.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"planAddDialog",attrs:{"data-custom-table-id":"views_purchase_planManager_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"planAddDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);h.options.__file="dialogAdd.vue";t.default=h.exports},CcWj:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("EDKZ");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择入库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{pageNo:1,type:"add",fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1",notInids:"'def4b13175dc44b08d7a0315b811700e'"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"5"}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={productId:l.productId,remark:l.remark,p2nFormula:l.p2nFormula,priceUnit:l.priceUnit,priceCount:l.priceCount,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.addWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){this.temp.deptId="",this.temp.deptName="",e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]);var t=this.temp.type;this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"5"},-1!="d78ceba5beef41f5be16f0ceee775399,064dda15d44d4f8fa6330c5c7e46300e".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}):-1!="81907167d5c8498692e6c4f3694c5cfa,d1c6dc9aa3b045dbabff2d5e1e253c22".indexOf(t)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:"",count:"",remark:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{pageNo:function(){this.initTable("add","")}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px",width:"100%"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouseBySimple_inBySimple_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAdd.vue";t.default=c.exports},CeHE:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("xfY5");var a=i("R1DK");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{afterCount:[{required:!0,message:"请填写调整后数量！",trigger:"change"},{type:"number",message:"数量必须为数字值"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.beforeCount=this.initData.temp.stockCount)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,Object(a.updateWarehouseProduct)(t.temp).then(function(i){t.dialogLoading=!1,0===i.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,e.initData.temp.stockCount=new Number(t.temp.afterCount).toFixed(2),t.dialogClose({resState:"ok",afterCount:new Number(t.temp.afterCount).toFixed(2)}))}).catch(function(e){t.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"安全库存调整",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"150px"}},[i("el-form-item",{attrs:{label:"调整前库存数量:",prop:"beforeCount"}},[i("el-input",{staticStyle:{width:"140px"},attrs:{disabled:!0},model:{value:e.temp.beforeCount,callback:function(t){e.$set(e.temp,"beforeCount",t)},expression:"temp.beforeCount"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"调整后库存数量:",prop:"afterCount"}},[i("el-input",{staticStyle:{width:"140px"},model:{value:e.temp.afterCount,callback:function(t){e.$set(e.temp,"afterCount",e._n(t))},expression:"temp.afterCount"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogStock.vue";t.default=s.exports},Ch95:function(e,t,i){},Ck00:function(e,t,i){"use strict";var a={name:"formula-dialog",props:["visible","state"],components:{formulaEdit:i("eIWk").a},data:function(){return{innerVisible:!1,formulaStr:""}},computed:{setState:function(){return this.state}},watch:{},methods:{formula:function(e){this.formulaStr=e,this.innerVisible=!1},dialogClose:function(){this.$emit("close-dialog",this.formulaStr)}},created:function(){},mounted:function(){this.innerVisible=this.visible}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{width:"650px",title:"公式编辑器",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t},close:e.dialogClose}},[i("div",{staticStyle:{padding:"10px","text-align":"center"}},[i("formula-edit",{attrs:{state:e.setState},on:{"send-formula":e.formula}})],1)])},[],!1,null,null,null);n.options.__file="dialog.vue";t.a=n.exports},Cki8:function(e,t,i){"use strict";i.r(t);i("91GP");var a=i("varj"),o=i("uTIz"),n=i("BUpD"),l={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},btnList:[{name:"保存",isShow:!0,state:!0,method:this.save},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],aboveTableConfig:{apiObj:{apiName:"listPageFinanceBases",params:{modelCode:"purchaseByFinanceBase",fieldCode:"customerCode,customerName,beginPlus,beginMinus,remark",customerGenre:"supplier"}},customColumn:[],tempData:{},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"beginPlus",width:200,componentName:"input",_cellConfig:{compute:"self@beginMinus(*)0",editable:!0,rules:[{required:!0},{greaterThan:["0",!1]}],message:["必填","必须大于零！"]}},{columnIndex:"beginMinus",width:200,componentName:"input",_cellConfig:{compute:"self@beginPlus(*)0",editable:!0,rules:[{required:!0},{greaterThan:["0",!1]}],message:["必填","必须大于零！"]}},{columnIndex:"remark",width:200,componentName:"input",_cellConfig:{}}],tempData:{},showIndex:!1,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:["remark"],tableSelectList:[]}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{tableSelectList:this.tableSelectList})},closeDialog:function(e){this.showDialog=!1},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},tableSelected:function(e){this.tableSelectList=e},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},save:function(){var e=this;this.$refs.trabsferTables.getTableSelected(),null!=this.tableSelectList&&0!=this.tableSelectList.length?(this.temp.type="1",this.temp.dtlJsonStr=JSON.stringify(this.tableSelectList),this.dialogLoading=!0,Object(n.batchAddFinanceBase)(this.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{height:"100%"},attrs:{span:24}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"100px"}},[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"供应商编码："}},[i("el-input",{attrs:{placeholder:"供应商编码"},model:{value:e.tempQuery.customerCode,callback:function(t){e.$set(e.tempQuery,"customerCode",t)},expression:"tempQuery.customerCode"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:6}},[i("el-form-item",{attrs:{label:"供应商名称："}},[i("el-input",{attrs:{placeholder:"供应商名称"},model:{value:e.tempQuery.customerName,callback:function(t){e.$set(e.tempQuery,"customerName",t)},expression:"tempQuery.customerName"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList},on:{callmethod:e.callMethod,"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogBatchAdd.vue";t.default=r.exports},CqDg:function(e,t,i){"use strict";i.r(t);i("KKXr"),i("f3/d"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("K3g7")),l={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},isConfirm:!1,dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageWCWarehouseProductView",params:{fieldCode:"warehouseName,wpCode,code,name,spec,unitName,genreName,stockCount,safetyCount",stockCountQuery:"stockCountGreaterThanZero",productNotIn:"",isNeedEntity:"true",isNotNeedSpare:"true"}},customColumn:[],tempData:{},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[],tempData:{},showIndex:!1,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:["remark"],tableSelectList:[]}},created:function(){this.initTree();var e="";if(null!=this.initData.data&&this.initData.data.length>0)for(var t=0;t<this.initData.data.length;t++){var i=this.initData.data[t];null!=i.productId&&i.productId.trim().length>0&&(e=e+i.productId+",")}var a=!0;null!=this.initData.isNeedRepeat&&(a=this.initData.isNeedRepeat),a||null!=e&&e.trim().length>0&&(e=e.substring(0,e.lastIndexOf(",")),e=this.findQueryProductIds(e),this.aboveTableConfig.apiObj.params.productNotIn=e)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{isConfirm:this.isConfirm,selectList:this.tableSelectList})},closeDialog:function(e){this.showDialog=!1},tableSelected:function(e){this.tableSelectList=e},confrim:function(){this.$refs.trabsferTables.getTableSelected(),this.isConfirm=!0,this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},queryTable:function(){this.tempQuery.warehouseId=this.selectTree.id,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.tempQuery.warehouseId=this.selectTree.id,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},initTree:function(){var e=this;e.dialogLoading=!0,Object(n.treeWarehouse)({id:"2d75e49bcb9911e884ad00163e105f05",isNeedEntity:"true",isNotNeedSpare:"true"}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name,virtualGenre:i.virtualGenre},t.push(i),this.treeData=t,this.dialogLoading=!1},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name,pathId:e.pathId},this.tempQuery.warehouseId=this.selectTree.id,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},findQueryProductIds:function(e){var t="";if(null==e||0==e.trim().length)return t;var i=e.split(",");if(null!=i&&i.length>0)for(var a=i.length,o=0;o<i.length;o++){var n="'"+i[o]+"'";o<a-1?t=t+n+",":o==a-1&&(t+=n)}return t}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="productStockTreeTableDialog.vue";t.default=r.exports},D0r1:function(e,t,i){"use strict";i.r(t);var a={components:{customBaseTable:i("WIyV").a},props:["initData","visible"],data:function(){return{businessId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageMaintainTaskDetailByIn",params:{fieldCode:"sysCode,maintainUserName,beginTimeStr,endTimeStr,taskResultName,productCode,productName,productSpec,productGenreName,productUnitName,receiveCount,inCount",inId:"",orderStr:"task.cdate,taskDtl.cdate asc"}},customColumn:[{}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.businessId=this.initData.businessId,this.apiObj.params.inId=this.initData.businessId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("el-row",{staticStyle:{"padding-top":"10px"},style:e.initData.table_style},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_equipment_equipmentMaintain_dialogMaintainTaskDetailByIn0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);n.options.__file="dialogMaintainTaskDetailByIn.vue";t.default=n.exports},D2zt:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("spKr");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{retreatId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){this.retreatId=this.initData.retreatId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){e.dialogLoading=!0;var i=e.$storage.get("userInfo").userName;Object(a.auditDisagreePurchaseRetreat)({retreatId:e.retreatId,remark:e.temp.remark,userName:i}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAuditDisagree.vue";t.default=s.exports},D7Ds:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("QFMg");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{maintainTask:{id:"",taskResult:"",remark:""},maintainTaskId:"",tableData:[],retreatType:"1",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",table_style:"",title:"",fullscreen:!1}}},created:function(){this.maintainTask=this.initData.formData,this.maintainTaskId=this.initData.maintainTaskId,this.tableData=this.initData.tableData},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},radioChange:function(){},tableData2EditList:function(e){var t=[];if(null==e||0==e.length)return t;for(var i=0;i<e.length;i++){var a=e[i],o={id:a.id,productId:a.productId,productGenre:a.productGenre,receiveCount:a.receiveCount,applyCount:a.applyCount};"edit"==a.operateType&&t.push(o)}return t},tableData2AddList:function(e){var t=[];if(null==e||0==e.length)return t;for(var i=0;i<e.length;i++){var a=e[i],o={productId:a.productId,productGenre:a.productGenre,receiveCount:a.applyCount,applyCount:a.applyCount,warehouseGenre:a.warehouseGenre};"add"==a.operateType&&t.push(o)}return t},save:function(){var e=this,t="",i=this.tableData2AddList(this.tableData);null!=i&&i.length>0&&(t=JSON.stringify(i));var o="",n=this.tableData2EditList(this.tableData);null!=n&&n.length>0&&(o=JSON.stringify(n)),Object(a.updateMaintainTaskDetail)({roleId:this.$storage.get("userInfo").roleIds,deptId:this.$storage.get("userInfo").deptId,maintainTaskId:this.maintainTaskId,retreatType:this.retreatType,maintainTaskJson:JSON.stringify(this.maintainTask),detailAddJson:t,detailEditJson:o}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.dialogClose({pageName:"dialogSelect",resState:"ok"}))}).catch(function(e){})},closeDialog:function(e){this.showDialog=!1,this.isVisible=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",attrs:{model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{margin:"10px 20px"}},[e._v("\n        剩余物料是否生成退库单？"),i("br"),i("br"),e._v(" "),i("el-radio-group",{on:{change:e.radioChange},model:{value:e.retreatType,callback:function(t){e.retreatType=t},expression:"retreatType"}},[i("el-radio",{attrs:{label:"1"}},[e._v("生成退库单")]),i("br"),e._v(" "),i("el-radio",{attrs:{label:"2"}},[e._v("退回虚拟库")]),i("br")],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogSelect.vue";t.default=s.exports},D7Gk:function(e,t,i){},"D8+m":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("xfY5");var a=i("xMja");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{afterCount:[{required:!0,message:"请填写调整后数量！",trigger:"change"},{type:"number",message:"数量必须为数字值"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.beforeCount=this.initData.temp.safetyCount)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,Object(a.updateProductSafeStock)({id:t.temp.id,safetyCount:t.temp.afterCount}).then(function(i){t.dialogLoading=!1,0===i.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,e.initData.temp.safetyCount=new Number(t.temp.afterCount).toFixed(2),t.dialogClose({resState:"ok",afterCount:new Number(t.temp.afterCount).toFixed(2)}))}).catch(function(e){t.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"安全库存调整",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"150px"}},[i("el-form-item",{attrs:{label:"调整前安全库存:",prop:"beforeCount"}},[i("el-input",{staticStyle:{width:"140px"},attrs:{disabled:!0},model:{value:e.temp.beforeCount,callback:function(t){e.$set(e.temp,"beforeCount",t)},expression:"temp.beforeCount"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"调整后安全库存:",prop:"afterCount"}},[i("el-input",{staticStyle:{width:"140px"},model:{value:e.temp.afterCount,callback:function(t){e.$set(e.temp,"afterCount",e._n(t))},expression:"temp.afterCount"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogSafeStock.vue";t.default=s.exports},DJRg:function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=(i("z0WU"),i("Ppn9")),n={name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,tableConfigList:[{customColumn:[{columnIndex:"name","min-width":160,_cellConfig:{hideTitle:!0,bodyStyle:{color:"#199ED4","font-weight":600,width:"100%"},events:{type:"file",path:"url"}}},{columnIndex:"relativeUrl","min-width":250,_cellConfig:{hideTitle:!0}},{columnIndex:"cdate","min-width":120,_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageBoms",params:{modelCode:"BomProduct",fieldCode:"prodInfo,unitName,code,name",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"prodCode,prodName,prodSpec,productProperty",isdefault:"1",isdisable:"1",notBomIds:this.initData.temp}},temp:{},showIndex:!0,showHeader:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok",selectList:[]})},addProduct:function(){this.selectList.length>0?this.$emit("close-dialog",{resState:"ok",selectList:this.selectList}):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条记录！"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},delete:function(e,t){var i=this;i.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.deleteAttachment)(e).then(function(e){0===e.code&&(i.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),i.updateData())}).catch(function(e){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.updateData()},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}},l=(i("OkRj"),i("OZyy"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_bundleAnalysis_dialogAddProduct0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addProduct}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);s.options.__file="dialogAddProduct.vue";t.default=s.exports},DKCI:function(e,t,i){"use strict";i("rGqo"),i("Z2Ku"),i("L9s1");var a={name:"table-filter",props:{headerList:{type:Array,default:function(){return[]}},tableSwitchState:{type:Array,default:function(){return[]}},storeId:{type:String,default:""},componentId:{type:String,default:""}},directives:{"auto-width":{inserted:function(e,t,i){i.context.widthList[t.value]=e.clientWidth}}},data:function(){return{checkList:[],widthSwitch:!1,checkViewWidth:0,checkViewHeight:0,checkViewWidthTimer:"",widthList:[],userConfig:"",storeKey:"",userId:"",localStoreKey:"",useStore:!1,tempList:""}},created:function(){},computed:{setHeight:function(){return this.checkViewHeight&&this.widthSwitch?(this.$emit("checked-height",this.checkViewHeight),this.checkViewHeight):(this.$emit("checked-height",20),20)},setHeaderList:function(){return this.headerList.filter(function(e){return!e.component&&!e.slot})}},methods:{checkedList:function(e){this.$emit("checked-list",e)},viewSwitch:function(){this.widthSwitch=!this.widthSwitch},localStore:function(e,t,i){return this.localStoreKey="_"+e+t+i,JSON.parse(localStorage.getItem(this.localStoreKey))||""},setChecked:function(e){return this.tableSwitchState.includes(e.label)}},watch:{widthSwitch:function(){var e=this;this.widthSwitch&&!this.checkViewHeight&&(clearTimeout(this.checkViewWidthTimer),this.checkViewWidthTimer=setTimeout(function(t){var i=0;e.widthList.forEach(function(e){e-0&&(i+=e+15)}),e.checkViewHeight=20*Math.ceil(i/e.$refs.checkBoxView.clientWidth)},200))}}},o=(i("Y893"),i("KHd+")),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tableFilter",style:{height:e.setHeight+"px"}},[i("div",{staticClass:"msg",attrs:{title:"列开关"},on:{click:e.viewSwitch}},[i("svg-icon",{attrs:{"icon-class":"tableSetting"}})],1),e._v(" "),i("div",{ref:"checkBoxView",staticClass:"checkView",class:{setWidth:e.widthSwitch}},[i("div",{staticStyle:{position:"relative"}},[i("div",{staticStyle:{position:"absolute",top:"0",left:"0"}},[i("el-checkbox-group",{attrs:{size:"mini"},on:{change:e.checkedList},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.setHeaderList,function(t,a){return i("el-checkbox",{directives:[{name:"auto-width",rawName:"v-auto-width",value:a,expression:"index"}],key:t.prop,attrs:{label:t.label,checked:e.setChecked(t)}})}),1)],1)])])])},[],!1,null,"4607a2ba",null);n.options.__file="index.vue";t.a=n.exports},DKhc:function(e,t,i){},DQs1:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("WIyV"),o=i("MPAK"),n=i("Ikq8"),l={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{formData:{assistProductId:"",assistProductName:"",supplierId:"",supplierName:"",price:"",lossRatio:""},rules:{assistProductName:[{required:!0,message:"请选择外协件",trigger:"change"}],supplierName:[{required:!0,message:"请选择供应商",trigger:"change"}],price:[{required:!0,trigger:"change",validator:function(e,t,i){Object(o.isPriceByValueSystem)(t)?(0==t&&i(new Error("请输入大于零的正数支持4位小数！")),i()):i(new Error("请输入大于零的正数支持4位小数！"))}}],lossRatio:[{required:!0,trigger:"change",validator:function(e,t,i){Object(o.isNumberByValueSystem)(t)?(0==t&&i(new Error("请输入大于零的正数支持2位小数！")),i()):i(new Error("请输入大于零的正数支持2位小数！"))}}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,AssistProductDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"800px",title:"选择外协件"},dialogName:"dialogAssistProductOption"}},SupplierDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择供应商",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"49c0a7ebcb4c4175bd5195837a6a9a13",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}}}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{assistProductSelect:function(e){e[0]&&(this.formData.assistProductId=e[0].id,this.formData.assistProductName=e[0].productName)},supplierSelect:function(e){e[0]&&(this.formData.supplierId=e[0].id,this.formData.supplierName=e[0].name)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(n.addAssistSupplier)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"360px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,inline:!0,model:e.formData,"label-position":"right","label-width":"80px"}},[i("el-row",[i("el-col",[i("el-form-item",{attrs:{label:"外协件:",prop:"assistProductName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.AssistProductDialog.dialog},on:{callback:e.assistProductSelect},model:{value:e.formData.assistProductName,callback:function(t){e.$set(e.formData,"assistProductName",t)},expression:"formData.assistProductName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",[i("el-form-item",{attrs:{label:"供应商:",prop:"supplierName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.SupplierDialog.dialog},on:{callback:e.supplierSelect},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",[i("el-form-item",{attrs:{label:"单价:",prop:"price"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.price,callback:function(t){e.$set(e.formData,"price",t)},expression:"formData.price"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",[i("el-form-item",{attrs:{label:"损耗率:",prop:"lossRatio"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.lossRatio,callback:function(t){e.$set(e.formData,"lossRatio",t)},expression:"formData.lossRatio"}}),e._v("  %\n          ")],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogAdd.vue";t.default=r.exports},DV56:function(e,t,i){"use strict";i.r(t);i("KKXr"),i("91GP");var a=i("varj"),o=i("uTIz"),n={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{queryForm:{sysCode:"",customerName:"",isBindOrderProduce:""},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",state:!0,isShow:!0,plain:!0,icon:"refresh",method:this.resetQuery}],aboveTableConfig:{apiObj:{apiName:"listPageOrderDetaiByProducePlan",params:{fieldCode:"prodInfo,prodUnitName,sysCode,customerName,orderDate,expectDate,orderCount,endDeliverCount,allowStockCount,safetyCount,producePlanName",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",inOrderDtlState:"2,3,4",isBindOrderProduce:"false",orderStr:"saleOrder.cdate desc,orderDtl.cdate asc"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!0,showTableSet:!1,showAll:!1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,dragTable:!1,entireRowDrag:!1},addColumns:[{columnIndex:30,label:"计划数量",prop:"producePlanCount",componentName:"input",width:120,_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{greaterThan:["0",!1]}],message:["请输入大于零的正整数或(1,2)位小数！","不可等于零！"]}}],hideColumns:["customerName","producePlanName"],tableSelectList:[]}},created:function(){this.queryForm.isBindOrderProduce="false";var e="";if(null!=this.initData.tableData&&this.initData.tableData.length>0)for(var t=0;t<this.initData.tableData.length;t++){var i=this.initData.tableData[t];null!=i.orderDtlId&&i.orderDtlId.trim().length>0&&(e=e+i.orderDtlId+",")}var a=!0;null!=this.initData.isNeedRepeat&&(a=this.initData.isNeedRepeat),a||null!=e&&e.trim().length>0&&(e=e.substring(0,e.lastIndexOf(",")),e=this.findQueryIds(e)),this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,{notInOrderDtlIds:e})},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{selectList:this.tableSelectList,pageName:"selectOrderByProducePlan"})},closeDialog:function(e){},tableSelected:function(e){this.tableSelectList=e},findQueryIds:function(e){var t="";if(null==e||0==e.trim().length)return t;var i=e.split(",");if(null!=i&&i.length>0)for(var a=i.length,o=0;o<i.length;o++){var n="'"+i[o]+"'";o<a-1?t=t+n+",":o==a-1&&(t+=n)}return t},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.queryForm)},resetQueryTemp:function(){for(var e in this.queryForm)this.queryForm[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.queryForm)},confrim:function(){this.$refs.trabsferTables.getTableSelected(),this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{height:"100%"},attrs:{span:24}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.queryForm,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:6}},[i("el-form-item",{attrs:{label:"订单编号："}},[i("el-input",{attrs:{placeholder:"订单编号"},model:{value:e.queryForm.sysCode,callback:function(t){e.$set(e.queryForm,"sysCode",t)},expression:"queryForm.sysCode"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:6}},[i("el-form-item",{attrs:{label:"客户名称："}},[i("el-input",{attrs:{placeholder:"客户名称"},model:{value:e.queryForm.customerName,callback:function(t){e.$set(e.queryForm,"customerName",t)},expression:"queryForm.customerName"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:6}},[i("el-form-item",{attrs:{label:"排产状态："}},[i("el-select",{model:{value:e.queryForm.isBindOrderProduce,callback:function(t){e.$set(e.queryForm,"isBindOrderProduce",t)},expression:"queryForm.isBindOrderProduce"}},[i("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),i("el-option",{attrs:{label:"已排产",value:"true"}}),e._v(" "),i("el-option",{attrs:{label:"未排产",value:"false"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",{attrs:{align:"right"}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:e.queryTable}})],1),e._v(" "),i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:e.resetQueryTemp}})],1)],1)])],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);s.options.__file="selectOrderByProducePlan.vue";t.default=s.exports},DYgg:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("1FtD");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{stockCount:[{required:!0,message:"请填写库存数量",trigger:"change"},{type:"number",message:"库存数量必须为数字"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.updateWarehouseProduct)({id:e.temp.id,stockCount:e.temp.stockCount}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"620px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.warehouseCode+":",prop:"warehouseCode"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.warehouseCode,callback:function(t){e.$set(e.temp,"warehouseCode",t)},expression:"temp.warehouseCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.pathName+":",prop:"pathName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.pathName,callback:function(t){e.$set(e.temp,"pathName",t)},expression:"temp.pathName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productCode+":",prop:"productCode"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productCode,callback:function(t){e.$set(e.temp,"productCode",t)},expression:"temp.productCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productName+":",prop:"productName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productName,callback:function(t){e.$set(e.temp,"productName",t)},expression:"temp.productName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productSpec+":",prop:"productSpec"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productSpec,callback:function(t){e.$set(e.temp,"productSpec",t)},expression:"temp.productSpec"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productGenreName+":",prop:"productGenreName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productGenreName,callback:function(t){e.$set(e.temp,"productGenreName",t)},expression:"temp.productGenreName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productUnitName+":",prop:"productUnitName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productUnitName,callback:function(t){e.$set(e.temp,"productUnitName",t)},expression:"temp.productUnitName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.code+":",prop:"code"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.code,callback:function(t){e.$set(e.temp,"code",t)},expression:"temp.code"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.stockCount+":",prop:"stockCount"}},[i("el-input",{model:{value:e.temp.stockCount,callback:function(t){e.$set(e.temp,"stockCount",e._n(t))},expression:"temp.stockCount"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},DlF3:function(e,t,i){},DmEo:function(e,t,i){"use strict";var a=i("vFju");i.n(a).a},Dphv:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("WIyV"),o=i("57Me"),n=i("DV56"),l=i("hZMg"),s=i("+Dad"),r=i("6tE/"),c={components:{customBaseTable:a.a,selectProductByProducePlan:o.default,selectOrderByProducePlan:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{sysDateStr:"",formData:{planId:"",produceType:"",makeName:"",makeId:"",dtlJsonStr:"",isAutoCommit:""},rules:{makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,tableData:[],tableList:[],configs:{topBarBtnList:[{name:"货品新增",nameEn:"selectProduct",isShow:!0,method:this.selectProduct},{name:"订单新增",nameEn:"selectOrder",isShow:!0,method:this.selectOrder},{name:"产品合并",nameEn:"mergeProduct",isShow:!0,method:this.mergeProduct}]},apiObj:{apiName:"listPageProducePlanDetail",params:{fieldCode:"prodInfo,unitName,count,beginDate,endDate,orderCode,expectDate",prodColumnKey:"productCode,productName,productSpec,productProperty",state:"0",pageType:"edit",isNeedChild:"true",parentId:""}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"beginDate",width:"130",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",greaterThan:["self@sysDate",!0],rules:[{required:!0}],message:["此项不能为空！"]}},{columnIndex:"endDate",width:"130",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd"}},{columnIndex:"count",width:"90",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{minDate:new Date},produceType:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"produceType",isglobal:"1",isNeetOneLayer:"true"}},defaultSelected:["bc562e2269814984a4769a7f89cc9b60"]},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this,t=this.initData.rowData;this.formData.produceType=t.produceType,this.formData.produceTypeName=t.produceTypeName,this.formData.makeId=t.makeId,this.formData.makeName=t.makeName,this.formData.planId=t.id,this.apiObj.params.parentId=t.id,Object(l.findSystemDateTime)({dateFormat:"yyyy-MM-dd"}).then(function(t){0==t.code&&null!=t.sysDateTime&&t.sysDateTime.trim().length>0&&(e.sysDateStr=t.sysDateTime.trim())}).catch(function(e){})},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.EditProducePlan.getData()},deleteData:function(e){this.$refs.EditProducePlan.deleteData(e)},databridge:function(e){Array.isArray(e)&&(this.tableList=[],this.tableList=e)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},produceTypeSelect:function(e){e[0]?(this.formData.produceType=e[0],this.produceType.defaultSelected=[e[0]]):(this.formData.produceType=[],this.produceType.defaultSelected=[])},makeSelect:function(e){e[0]&&(this.formData.makeId=e[0].id,this.formData.makeName=e[0].name)},selectProduct:function(){this.dialogData.data=this.tableList,this.dialogData.querySpare="isSpareAll",this.dialogData.title="选择货品",this.openDialogName="selectProductByProducePlan",this.showDialog=!0,this.inLinVisible=!0},selectOrder:function(){this.dialogData.title="选择销售订单",this.openDialogName="selectOrderByProducePlan",this.showDialog=!0,this.inLinVisible=!0},mergeProduct:function(){var e=this;this.getData();var t=[];if(this.tableList.length>0)for(var i=0;i<this.tableList.length;i++){var a=this.tableList[i];t.push(a)}var o="";null!=t&&t.length>0&&(o=JSON.stringify(t)),Object(s.mergeProductByProducePlanDetail)({dtlJsonStr:o}).then(function(t){if(null!=t.mergeProductList&&(e.tableList.length>0&&e.tableList.splice(0,e.tableList.length),null!=t.mergeProductList&&t.mergeProductList.length>0))for(var i=0;i<t.mergeProductList.length;i++){var a=t.mergeProductList[i],o="add";null!=a&&null!=a.operType&&a.operType.trim().length>0&&(o=a.operType.trim());var n={id:a.id,operType:o,count:a.count,orderCode:a.orderCode,expectDate:a.expectDate,jsonStr:a.jsonStr,planDtlId:a.planDtlId,productId:a.productId,productCode:a.productCode,productName:a.productName,productSpec:a.productSpec,productProperty:a.productProperty,prodInfo:a.prodInfo,unitId:a.unitId,unitName:a.unitName};e.tableData.push(n)}}).catch(function(e){})},checkTableByExpectDate:function(){var e="";if(null!=this.tableList&&this.tableList.length>0)for(var t=0;t<this.tableList.length;t++){var i=this.tableList[t],a=i.endDate,o=i.expectDate;null!=a&&null!=o&&a>o&&(e=e+"第 "+(t+1)+" 行: 结束日期大于约定交期！")}return e},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){e.getData();var i=e.checkTableByExpectDate();null!=i&&i.trim().length>0?e.$confirm(i+" 是否继续(保存)?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.savePlan()}).catch(function(){e.$message({type:"info",message:"已取消"})}):e.savePlan()}})},savePlan:function(){var e=this,t="";if(null!=this.tableList&&0!=this.tableList.length){for(var i=[],a=0;a<this.tableList.length;a++){var o=this.tableList[a],n={planDtlId:o.planDtlId,operType:o.operType,beginDate:o.beginDate,endDate:o.endDate,orderDtlId:o.orderDtlId,count:o.count,productId:o.productId,unitId:o.unitId,jsonStr:o.jsonStr};i.push(n)}t=JSON.stringify(i),this.formData.dtlJsonStr=t,this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(r.updateProducePlan)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"selectProductByProducePlan"==e.pageName){o.default;var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByProduct(t)}else if(null!=e&&"selectOrderByProducePlan"==e.pageName){var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelectedBySaleOrder(i)}},tableSelectedByProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={id:"",productId:"",productCode:"",productName:"",productSpec:"",productProperty:"",unitId:"",unitName:"",count:"0.00",beginDate:"",operType:""};a.operType="add",a.productId=i.id.trim(),null!=i.code&&i.code.trim().length>0&&(a.productCode=i.code.trim()),null!=i.name&&i.name.trim().length>0&&(a.productName=i.name.trim()),null!=i.spec&&i.spec.trim().length>0&&(a.productSpec=i.spec.trim()),null!=i.property&&i.property.trim().length>0&&(a.productProperty=i.property.trim()),null!=i.prodInfo&&i.prodInfo.trim().length>0&&(a.prodInfo=i.prodInfo.trim()),a.beginDate=this.sysDateStr,null!=i.count&&i.count.trim().length>0&&(a.count=i.count.trim()),a.unitId=i.unit,a.unitName=i.unitName,a.id=i.id.trim()||t,this.tableData.push(a)}},tableSelectedBySaleOrder:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a="0.00";null!=i&&null!=i.producePlanCount&&i.producePlanCount.trim().length>0&&(a=i.producePlanCount.trim());var o={id:i.id,count:a,beginDate:this.sysDateStr,operType:"add",orderDtlId:i.orderDtlId,expectDate:i.expectDate,orderCode:i.sysCode,productId:i.productId,productCode:i.productCode,productName:i.productName,productSpec:i.productSpec,productProperty:i.productProperty,prodInfo:i.prodInfo,unitId:i.prodUnitId,unitName:i.prodUnitName};this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"生产类型:",prop:"remark"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{data:e.produceType.data},on:{callback:e.produceTypeSelect},model:{value:e.produceType.defaultSelected,callback:function(t){e.$set(e.produceType,"defaultSelected",t)},expression:"produceType.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.formData.makeName,callback:function(t){e.$set(e.formData,"makeName",t)},expression:"formData.makeName"}})],1)],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"EditProducePlan",attrs:{"data-custom-table-id":"views_produce_producePlan_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"EditProducePlan",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},"E/IF":function(e,t,i){"use strict";var a=i("2SQY");i.n(a).a},EAXU:function(e,t,i){"use strict";i("f3/d"),i("XfO3"),i("HEwt"),i("91GP"),i("rGqo"),i("Z2Ku"),i("L9s1"),i("INYr"),i("dRSK"),i("xfY5");var a=[{id:"aabbcc",title:"布局一",layout:[{x:0,y:0,w:24,h:4,i:"0",txt:"标题",componentName:"header",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:0,y:3,w:24,h:20,i:"1",txt:"正文",componentName:"main",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"}],name:"",backgroundColor:""},{id:"abcsa",title:"布局二",layout:[{x:0,y:0,w:24,h:4,i:"0",txt:"标题",componentName:"header",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:0,y:3,w:24,h:16,i:"1",txt:"正文",componentName:"main",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:0,y:6,w:24,h:4,i:"2",txt:"题尾",componentName:"footer",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"}],name:"",backgroundColor:""},{id:"aabsacc",title:"布局三",layout:[{x:0,y:0,w:6,h:24,i:"0",txt:"左侧栏",componentName:"leftAside",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:6,y:0,w:18,h:24,i:"1",txt:"右侧栏",componentName:"rightAside",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"}],name:"",backgroundColor:""},{id:"aaabcc",title:"布局四",layout:[{x:0,y:0,w:24,h:4,i:"0",txt:"标题",componentName:"header",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:0,y:3,w:9,h:20,i:"1",txt:"左侧栏",componentName:"leftAside",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:9,y:3,w:15,h:20,i:"2",txt:"右侧栏",componentName:"rightAside",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"}],name:"",backgroundColor:""},{id:"aabddc",title:"布局五",layout:[{x:0,y:0,w:24,h:4,i:"0",txt:"标题",componentName:"header",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:0,y:3,w:6,h:20,i:"1",txt:"左侧栏",componentName:"leftAside",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:6,y:3,w:18,h:16,i:"2",txt:"正文",componentName:"main",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:6,y:16,w:18,h:4,i:"3",txt:"题尾",componentName:"footer",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"}],name:"",backgroundColor:""},{id:"adfbbcc",title:"布局六",layout:[{x:6,y:0,w:18,h:4,i:"0",txt:"标题",componentName:"header",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:0,y:0,w:6,h:24,i:"1",txt:"左侧栏",componentName:"leftAside",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:6,y:3,w:18,h:20,i:"2",txt:"正文",componentName:"main",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"}],name:"",backgroundColor:""},{id:"afdscc",title:"布局七",layout:[{x:6,y:0,w:18,h:4,i:"0",txt:"标题",componentName:"header",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:0,y:0,w:6,h:24,i:"1",txt:"左侧栏",componentName:"leftAside",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:6,y:3,w:18,h:16,i:"2",txt:"正文",componentName:"main",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"},{x:6,y:16,w:18,h:4,i:"3",txt:"题尾",componentName:"footer",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"}],name:"",backgroundColor:""}],o=i("wOnQ"),n=i.n(o),l=i("jq09"),s=i("e+jF"),r={name:"default-layout",components:{GridLayout:s.GridLayout,GridItem:s.GridItem},props:{config:{type:Object,default:function(){return null}}},computed:{},created:function(){},methods:{dropDefaultLayout:function(e,t){e.dataTransfer.setData("layout",JSON.stringify(t))},setLayoutItemStyle:function(e,t){var i={};switch(e.componentName){case"header":i.backgroundColor="#b3c0d1";break;case"main":i.backgroundColor="#e9eef3";break;case"leftAside":i.backgroundColor="#d3dce6";break;case"rightAside":i.backgroundColor="#B3C0DF";break;case"footer":i.backgroundColor="#b3c0d1";break;default:i.backgroundColor="#b3c5d1"}return i}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{draggable:"true"},on:{dragstart:function(t){e.dropDefaultLayout(t,e.config)}}},[i("grid-layout",{attrs:{layout:e.config.layout,"col-num":24,"row-height":6,"is-draggable":!1,"is-resizable":!1,"is-mirrored":!1,"vertical-compact":!0,margin:[0,0],"use-css-transforms":!0},on:{"update:layout":function(t){e.$set(e.config,"layout",t)}}},e._l(e.config.layout,function(t,a){return i("grid-item",{key:t.i,staticStyle:{"text-align":"center"},style:e.setLayoutItemStyle(t,a),attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i}},[e._v("\n      "+e._s(t.txt)+"\n    ")])}),1)],1)},[],!1,null,null,null);d.options.__file="defaultLayout.vue";var u=d.exports,p=(i("yt8O"),i("RW0V"),i("MngD")),m=i("z1Gy"),h=i("z0WU");function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){f(e,t,i[t])})}return e}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var b={name:"edit-plan",props:{scope:{type:Object,default:function(){return{}}},stepIndex:{type:Number,default:0}},components:g({editShape:p.a},m.a),data:function(){return{getCommonStyle:l.b.getCommonStyle}},computed:{activeId:function(){return this.$store.getters.activeId},userSelectLayout:function(){return this.$store.getters.userSelectLayout},userSelectItem:function(){return this.$store.getters.userSelectLayoutItem},setUserSelectComponents:{get:function(){return this.scope.userComponents||[]},set:function(e){this.scope.userComponents=e}},setUserSelectItemState:function(){return this.userSelectItem&&this.userSelectItem.i==this.scope.i&&2!=this.stepIndex},userSelectView:function(){return{height:"100%",position:"relative","box-shadow":this.setUserSelectItemState?"0 0 12px 0 rgba(0,0,0,.8)":"none",padding:"".concat(this.scope.padding||0,"px")}},selectViewBoxStyle:function(){return{backgroundColor:this.scope.childBackgroundColor}}},methods:{sendUserSelect:function(e){this.$store.commit("SET_LAYOUTITEM",this.scope),this.$store.commit("SET_ACTIVEID",""),e.stopPropagation(),e.preventDefault()},dropTools:function(e){var t=this;if(e.target.dataset.itemId){var i=JSON.parse(e.dataTransfer.getData("componentName"));if("custom"===i.type){if(-1!=this.setUserSelectComponents.findIndex(function(e){return"custom"!==e.type}))return this.$message({message:"目标容器中存在基础组件，请先删除基础组件！",type:"warning"}),!1;this.setUserSelectComponents.length?this.$confirm("将替换已放置的组件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.defaultStyle={},i.uuid=Object(h.g)(),t.setUserSelectComponents=[i],t.$store.commit("SET_ACTIVEID",i.uuid)}).catch(function(){}):(i.defaultStyle={},i.uuid=Object(h.g)(),this.setUserSelectComponents=JSON.parse(JSON.stringify(this.setUserSelectComponents)).concat(i),this.$store.commit("SET_ACTIVEID",i.uuid))}else{if(-1!==this.setUserSelectComponents.findIndex(function(e){return"custom"===e.type}))return this.$message({message:"目标容器中存在业务组件，请先删除业务组件！",type:"warning"}),!1;i.defaultStyle=this.initTargetElStyle(e,i),i.uuid=Object(h.g)(),this.setUserSelectComponents=JSON.parse(JSON.stringify(this.setUserSelectComponents)).concat(i),this.$store.commit("SET_ACTIVEID",i.uuid)}}},dropToolOver:function(){return!1},initTargetElStyle:function(e,t){var i={position:"absolute",width:t.defaultStyle.width,height:t.defaultStyle.height,top:e.offsetY-t.defaultStyle.height/2,left:e.offsetX-t.defaultStyle.width/2,rotate:0,paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:0,marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,borderWidth:0,borderColor:"",borderStyle:"solid",borderRadius:0,boxShadow:"",fontSize:16,fontWeight:500,lineHeight:1.4,letterSpacing:0,textAlign:"center",color:"#ffffff",backgroundColor:"",backgroundImage:"",backgroundSize:"cover",opacity:1,zIndex:this.setUserSelectComponents.length+1};return Object.assign({},i)},handleElementResize:function(e){var t=this;this.activeId&&e&&this.setUserSelectComponents.forEach(function(i){i.uuid===t.activeId&&(i.defaultStyle=g({},e))})},valueBus:function(e){this.setUserSelectComponents.forEach(function(t){t.uuid===e.uuid&&(t=Object.assign(t,e))})},deleteUserSelectComponents:function(e){this.activeId&&this.activeId===e&&(this.setUserSelectComponents=this.setUserSelectComponents.filter(function(t){return t.uuid!==e}),this.$store.commit("SET_ACTIVEID",""))},resetActive:function(e){!e||"input"!==e.type&&"textarea"!==e.type||this.$el.querySelector("#".concat(e.uuid)).querySelector("input").blur(),this.$store.commit("SET_ACTIVEID","")},resetSelectComponetns:function(){this.$store.commit("SET_ACTIVEID",""),this.setUserSelectComponents=[]},changeComponentColor:function(){var e=["input","textarea","date","time","datetime"];(this.setUserSelectComponents||[]).forEach(function(t){e.includes(t.type)&&("#ffffff"===t.defaultStyle.color?t.defaultStyle.color="#000000":"#000000"===t.defaultStyle.color&&(t.defaultStyle.color="#ffffff"))})}},watch:{stepIndex:function(){var e=this;this.stepIndex&&this.$nextTick(function(t){e.scope.baseWidth=e.$refs.viewBox.offsetWidth,e.scope.baseHeight=e.$refs.viewBox.offsetHeight})}},mounted:function(){}},v=(i("IlrH"),Object(c.a)(b,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editPlan",on:{click:function(t){e.sendUserSelect(t)}}},[i("div",{style:e.userSelectView,on:{drop:function(t){e.dropTools(t)},dragover:e.dropToolOver}},[i("div",{ref:"viewBox",staticStyle:{position:"relative",height:"100%"},style:e.stepIndex?e.selectViewBoxStyle:{},attrs:{"data-item-id":e.scope.i}},e._l(e.setUserSelectComponents,function(t){return i("edit-shape",{key:t.uuid,style:"custom"===t.type?{width:"100%",height:"100%"}:e.getCommonStyle(t.defaultStyle),attrs:{uuid:t.uuid,defaultStyle:t.defaultStyle,showOnly:2===e.stepIndex,isCustom:"custom"===t.type,active:e.setUserSelectItemState&&t.uuid===e.activeId,data:t},on:{resize:e.handleElementResize,"reset-active":e.resetActive,"delete-active":e.deleteUserSelectComponents}},[i(t.elName,e._b({tag:"component",staticClass:"element-on-edit-pane",attrs:{id:t.uuid},on:{"value-bus":e.valueBus}},"component",{value:t.value,item:t,readonly:2===e.stepIndex},!1))],1)}),1)])])},[],!1,null,"391fce1a",null));v.options.__file="editPlan.vue";var D=v.exports,y=i("k9rF"),w={name:"component-libs",props:{stepIndex:{type:Number,default:1}},data:function(){return{componentsList:JSON.parse(JSON.stringify(y.a))}},methods:{dropTools:function(e,t){e.dataTransfer.setData("componentName",JSON.stringify(t))},stopClick:function(e){window.event?window.event.cancelBubble=!0:e.stopPropagation()}}},C=(i("IWb6"),Object(c.a)(w,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"components-libs-wrapper scrollbar-wrapper"},[i("p",{staticClass:"page-title text-center"},[e._v("组件库")]),e._v(" "),i("el-scrollbar",{staticStyle:{height:"100%"}},[i("ul",{staticClass:"scrollbar-wrapper"},e._l(e.componentsList,function(t,a){return i("li",{key:a,staticClass:"clearfix paddingB30"},[i("div",{staticClass:"components-libs-title"},[i("p",[e._v(e._s(t.title))])]),e._v(" "),t.components&&t.components.length?i("div",{staticClass:"clearfix"},[e._l(t.components,function(t,a){return[t.hidden?e._e():i("div",{key:a,staticClass:"components-lib-item",style:{width:t.img?"46.4%":"30%"},attrs:{draggable:"true"},on:{dragstart:function(i){e.dropTools(i,t)}}},[i("div",{staticClass:"lib-item-img"},[t.icon?i("svg-icon",{attrs:{"icon-class":"layout-"+t.icon,"class-name":"layoutSvgClass"}}):i("div",{staticClass:"item-img-box"},[i("img",{staticStyle:{width:"auto",height:"100%",display:"inline-block"},attrs:{src:t.img}})])],1),e._v(" "),i("p",{staticClass:"lib-item-title",style:{padding:t.img?"5px 0":0}},[e._v(e._s(t.title))])])]})],2):i("div",[i("p",{staticClass:"gray text-center paddingT20"},[e._v("待完善...")])])])}))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===e.stepIndex,expression:"stepIndex===2"}],staticClass:"layoutCover",on:{click:function(t){e.stopClick(t)}}},[i("div",{staticStyle:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.stepIndex,expression:"stepIndex===1"}],staticClass:"layoutCoverTxt"},[e._v("请先选择布局区域")])])])],1)},[],!1,null,null,null));C.options.__file="index.vue";var x=C.exports,S=i("gepB"),N={name:"visualization-root",props:{colNum:{type:Number,default:24}},components:{GridLayout:s.GridLayout,GridItem:s.GridItem,defaultLayout:u,editPlan:D,functionComponent:x,visualizationTemplate:S.a},data:function(){return{userInfo:{},activeNames:"1",headerHeight:0,rootHeight:0,customLayout:[],defaultLayoutList:[],customLayoutList:[{title:"横栏",icon:"customV",type:"custom",x:0,y:0,w:10,h:3,i:"",txt:"",componentName:"",padding:10,backgroundColor:"",childBackgroundColor:"",baseWidth:0,baseHeight:0,userComponents:[]},{title:"竖栏",icon:"customH",type:"custom",x:0,y:0,w:3,h:10,i:"",txt:"",componentName:"",padding:10,backgroundColor:"",childBackgroundColor:"",baseWidth:0,baseHeight:0,userComponents:[]},{title:"块栏",icon:"customFree",type:"custom",x:0,y:0,w:10,h:10,i:"",txt:"",componentName:"",padding:10,backgroundColor:"",childBackgroundColor:"",baseWidth:0,baseHeight:0,userComponents:[]}],titleList:["第一步：定义基本布局（可跳过）","第二步：设置功能组件","第三步：预览看板效果"],stepIndex:0,screen:null,layoutBoxScale:1,layoutBoxHeight:0,layoutRegister:null,layoutChanged:null,noSavedLayout:null,menuOptions:[{title:"删除布局",icon:"delete",scene:["business"]},{title:"移除组件",icon:"remove",scene:["input","textarea","date","time","datetime","image","custom"]},{title:"字体放大",icon:"txtup",scene:["input","textarea","date","time","datetime"]},{title:"字体缩小",icon:"txtdown",scene:["input","textarea","date","time","datetime"]},{title:"字体加粗",icon:"txtbold",scene:["input","textarea","date","time","datetime"]},{title:"字体颜色",icon:"txtcolor",scene:["input","textarea","date","time","datetime"],isColor:!0,value:""},{title:"背景色",icon:"bgcolor",scene:["root","business"],isBgColor:!0,value:""},{title:"内容背景色",icon:"contentbgcolor",scene:["business"],isContentBgColor:!0,value:""},{title:"上传图片",icon:"upload",isUpload:!0,scene:["image"]},{title:"图层上移",icon:"layerup",scene:["input","textarea","date","time","datetime","image"]},{title:"图层下移",icon:"layerdown",scene:["input","textarea","date","time","datetime","image"]},{title:"块边距",icon:"padding",isStep:!0,scene:["business"]},{title:"左右居中",icon:"level",scene:["input","textarea","date","time","datetime"]},{title:"垂直居中",icon:"vertical",scene:[]}],layoutBGcolor:null,cornerMarkerTimer:{},cornerMarkerColor:{},themeColor:!0,themeColorList:["rgb(255,255,255)","rgb(10, 24, 40)"],isSaved:!1,dialogVisible:!1,previewLayoutTimer:"",saveLayoutTimer:"",needPreview:!1,needSave:!1,saveLoading:!1,saveLoadingTxt:"",layoutViewTop:0,layoutViewLeft:0,layoutWidth:0,layoutHeight:0,layoutGrids:null,inCustom:!1}},computed:{isCustom:function(){return this.inCustom},userSelectLayout:function(){return this.$store.getters.userSelectLayout},tempLayout:function(){return this.userSelectLayout&&this.userSelectLayout.layout||[]},activeId:function(){return this.$store.getters.activeId},userSelectLayoutItem:function(){return this.$store.getters.userSelectLayoutItem},userTargetComponent:{get:function(){var e,t=this;return this.activeId&&this.userSelectLayout?(this.tempLayout.find(function(i){return i.userComponents&&i.userComponents.length&&(e=i.userComponents.find(function(e){return e.uuid===t.activeId})),e}),_log(e,"userTargetComponent"),e):null},set:function(e){var t=this,i=-1;this.userSelectLayout&&this.userSelectLayout.layout.find(function(a){a.userComponents&&a.userComponents.length&&(i=a.userComponents.findIndex(function(e){return e.uuid===t.activeId})),i>-1&&a.userComponents.splice(i,1,e)})}},screenScale:function(){return this.screen?this.screen.width/this.screen.height:1},layoutViewHeight:function(){return.8*this.layoutBoxHeight},layoutViewWidth:function(){return this.layoutViewHeight*this.screenScale},setRowHeight:function(){return this.layoutViewHeight/this.colNum},setMenuOptions:function(){var e=this;return this.menuOptions.filter(function(t){return t.scene.includes(e.userTargetComponent?e.userTargetComponent.type:e.userSelectLayoutItem?e.userSelectLayoutItem.type:"root")})},userSelectLayoutIndex:function(){var e=this;return this.userSelectLayoutItem?this.tempLayout.findIndex(function(t){return t.i===e.userSelectLayoutItem.i}):-1},setDefaultStep:{get:function(){return this.userTargetComponent?this.userTargetComponent.defaultStyle.paddingTop||0:this.userSelectLayoutItem&&this.userSelectLayoutItem.padding||0},set:function(e){if(this.userTargetComponent){var t=JSON.parse(JSON.stringify(this.userTargetComponent));t.defaultStyle.paddingTop=e,t.defaultStyle.paddingLeft=e,t.defaultStyle.paddingRight=e,t.defaultStyle.paddingBottom=e,this.userTargetComponent=t}else if(this.userSelectLayoutItem){var i=JSON.parse(JSON.stringify(this.userSelectLayoutItem));i.padding=e,this.$store.commit("SET_LAYOUTITEM",i)}}},setDefaultColor:{get:function(){return this.userTargetComponent&&this.userTargetComponent.defaultStyle.color||""},set:function(e){if(this.userTargetComponent){var t=JSON.parse(JSON.stringify(this.userTargetComponent));t.defaultStyle.color=e,this.userTargetComponent=t}}},setBgColor:{get:function(){var e=this;if(this.userSelectLayoutItem){var t=this.userSelectLayout.layout.find(function(t){return t.i===e.userSelectLayoutItem.i});return t?t.backgroundColor:""}return this.userSelectLayout.backgroundColor},set:function(e){var t=this;this.userSelectLayoutItem?this.userSelectLayout.layout.find(function(i){if(i.i===t.userSelectLayoutItem.i)return i.backgroundColor=e,!0}):this.userSelectLayout.backgroundColor=e}},setContentBgColor:{get:function(){var e=this,t=this.userSelectLayout.layout.find(function(t){return t.i===e.userSelectLayoutItem.i});return t?t.childBackgroundColor:""},set:function(e){var t=this;this.userSelectLayoutItem&&this.userSelectLayout.layout.find(function(i){if(i.i===t.userSelectLayoutItem.i)return i.childBackgroundColor=e,!0})}},setGlobelColor:{get:function(){return this.userSelectLayout?this.userSelectLayout.backgroundColor||"":"#ffffff"},set:function(e){this.userSelectLayout.backgroundColor=e}},setThemeColor:function(){return this.themeColor?this.themeColorList[1]:this.themeColorList[0]},setGridLayoutStyle:function(){return{height:"100%",backgroundColor:this.userSelectLayout.backgroundColor}},layoutRowHeight:function(){return this.layoutHeight/this.colNum},layoutColumnWidth:function(){return this.layoutWidth/this.colNum},userTargetComponentState:function(){return!this.userTargetComponent||"custom"===this.userTargetComponent.type}},created:function(){var e=this;this.screen=window.screen,this.userInfo=this.$storage.get("userInfo"),this.noSavedLayout=(this.$storage.get("visualizationConfig")||[]).find(function(t){return t.userId===e.userInfo.userId}),this.httpRequests()},mounted:function(){var e,t,i,a=this,o=this;e=this.$el.querySelectorAll(".el-collapse-item__header"),t=this.$el.querySelector("#layoutBox"),i=t.querySelector("#layoutView"),this.rootHeight=this.$el.querySelector("#visualizationPlanHeight").clientHeight,[].forEach.call(e,function(e){o.headerHeight+=e.clientHeight}),this.layoutBoxHeight=t.clientHeight,this.$nextTick(function(e){var t=i.getBoundingClientRect();a.layoutViewTop=t.top,a.layoutViewLeft=t.left,a.layoutWidth=t.width,a.layoutHeight=t.height}),this.noSavedLayout&&this.$confirm("您有未保存的配置, 是否继续配置?","提示",{confirmButtonText:"继续",cancelButtonText:"重新开始",type:"warning"}).then(function(){var e=a.$storage.get("visualizationConfig").filter(function(e){return e.userId!==a.userInfo.userId});a.$storage.set("visualizationConfig",e),a.$store.commit("SET_LAYOUT",a.noSavedLayout.tempLayout),a.stepIndex=a.noSavedLayout.stepIndex,a.noSavedLayout=null}).catch(function(){var e=a.$storage.get("visualizationConfig").filter(function(e){return e.userId!==a.userInfo.userId});a.$storage.set("visualizationConfig",e),a.noSavedLayout=null})},beforeDestroy:function(){},methods:{createCornerMarker:function(e){},clickLayout:function(){this.$store.commit("SET_ACTIVEID",""),this.$store.commit("SET_LAYOUTITEM",null)},removeLayout:function(e,t){var i=this;this.$api.deleteUserKanban({id:e.id}).then(function(e){i.httpRequests()}).catch(function(e){})},setNoSavedLayout:function(e){var t=this;this.$confirm("您有未保存的配置, 是否临时保存以便下次继续配置?","提示",{confirmButtonText:"临时保存",cancelButtonText:"不保存",type:"warning"}).then(function(){var i=t.$storage.get("visualizationConfig")||[];i?(-1===i.findIndex(function(e){if(e.userId===t.userInfo.userId)return e.tempLayout=t.userSelectLayout,e.stepIndex=t.stepIndex,!0})&&i.push({userId:t.userInfo.userId,tempLayout:t.userSelectLayout,stepIndex:t.stepIndex}),t.$storage.set("visualizationConfig",i)):t.$storage.set("visualizationConfig",[{userId:t.userInfo.userId,tempLayout:t.userSelectLayout,stepIndex:t.stepIndex}]);t.resetLayoutStore(),e()}).catch(function(){var i=(t.$storage.get("visualizationConfig")||[]).filter(function(e){return e.userId!==t.userInfo.userId});t.$storage.set("visualizationConfig",i),t.resetLayoutStore(),e()})},httpRequests:function(){var e=this;this.$api.listUserEditedKanban().then(function(t){e.defaultLayoutList=a.concat((t.result||[]).map(function(e){var t=JSON.parse(e.layout);return t.id=e.id,t}))}).catch(function(e){})},dropLayout:function(e){var t,i,a;if(t=e.dataTransfer.getData("layout"),(i=e.dataTransfer.getData("componentName"))&&(i=JSON.parse(i),(a=e.target.getAttribute("class"))&&a.indexOf("vue-grid-layout")>-1)){var o=this.createCustomLayoutItem(e);"custom"===i.type?i.defaultStyle={}:i.defaultStyle=this.initTargetElStyle(e,i,!0),i.uuid=Object(h.g)(),o.userComponents.push(i),this.userSelectLayout.layout.push(o),this.$store.commit("SET_LAYOUTITEM",null),this.layoutRegister=this.layoutChanged=JSON.stringify(this.userSelectLayout)}t&&(this.layoutRegister=this.layoutChanged=t,this.$store.commit("SET_LAYOUT",JSON.parse(t)))},createCustomLayoutItem:function(e){return{x:Math.floor(e.offsetX/this.layoutColumnWidth),y:Math.floor(e.offsetY/this.layoutRowHeight),w:5,h:5,i:Object(h.g)(),txt:"",componentName:"",padding:10,backgroundColor:"rgb(10, 24, 40)",childBackgroundColor:"rgb(16,36,63)",baseWidth:0,baseHeight:0,userComponents:[],type:"business"}},initTargetElStyle:function(e,t,i){var a={position:"absolute",width:t.defaultStyle.width,height:t.defaultStyle.height,top:i?0:e.offsetY-t.defaultStyle.height/2,left:i?0:e.offsetX-t.defaultStyle.width/2,rotate:0,paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:0,marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,borderWidth:0,borderColor:"",borderStyle:"solid",borderRadius:0,boxShadow:"",fontSize:16,fontWeight:500,lineHeight:1.4,letterSpacing:0,textAlign:"center",color:"#ffffff",backgroundColor:"",backgroundImage:"",backgroundSize:"cover",opacity:1,zIndex:this.userSelectLayoutItem?this.userSelectLayoutItem.userComponents.length+1:0};return Object.assign({},a)},createGrids:function(){var e=this;this.layoutGrids=Array.from(new Array(this.colNum)).map(function(t){return Array.from(new Array(e.colNum)).map(function(e){return!1})})},dropLayoutOver:function(){},nextStep:function(){this.stepIndex||this.userSelectLayout||(this.inCustom=!0),this.stepIndex++},upStep:function(){var e=this;1===this.stepIndex?this.$confirm("退回上一步将清除本次的所有设置，请确认！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resetLayoutSet(),e.$store.commit("SET_LAYOUT",null),e.inCustom=!1,e.stepIndex--}):(2===this.stepIndex&&(this.themeColor=!0),this.stepIndex--)},clearTempLayout:function(){this.$store.commit("SET_LAYOUT",null)},setLayoutItemStyle:function(e){var t="";switch(e.componentName){case"header":t="#b3c0d1";break;case"main":t="#e9eef3";break;case"leftAside":t="#d3dce6";break;case"rightAside":t="#B3C0DF";break;case"footer":t="#b3c0d1";break;default:t="#b3c5d1"}return t},resizedEvent:function(e,t){var i=this;if((JSON.parse(this.layoutChanged).layout||[]).find(function(e){return e.i===t.i})){var a=(JSON.parse(this.layoutChanged).layout||[]).find(function(e){return e.i===t.i});if(t.w!=a.w&&this.userSelectLayout.layout.forEach(function(e){e.i!==t.i&&e.x===a.w&&(e.x=t.w)}),t.h>a.h){var o=this.numToList(this.colNum);this.userSelectLayout.layout.forEach(function(e){if(e.i!==t.i&&(e.x===t.x||e.x<t.x&&e.x+e.w>t.x||e.x-t.x>0&&e.x-t.x<t.w))for(var i=0;i<e.h;i++)o.splice(e.y+i,1,null)}),o.length>this.colNum&&(this.userSelectLayout.layout.forEach(function(e){e.i===t.i&&(e.h-=o.length-i.colNum)}),this.$store.commit("SET_LAYOUT",JSON.parse(JSON.stringify(this.userSelectLayout))))}this.layoutChanged=JSON.stringify(this.userSelectLayout)}},numToList:function(e){for(var t=[],i=0;i<e;i++)t.push(i);return t},resetLayoutStore:function(){this.stepIndex=0,this.$store.commit("SET_ACTIVEID",""),this.$store.commit("SET_LAYOUTITEM",null),this.layoutBGcolor=null,this.$store.commit("SET_LAYOUT",null),this.layoutChanged=null},resetLayoutSet:function(){this.$store.commit("SET_LAYOUTITEM",null),(this.$refs.editPlan||[]).forEach(function(e){e.resetSelectComponetns&&e.resetSelectComponetns()})},handleElementCommand:function(e){var t=this,i=e.icon,a=JSON.parse(JSON.stringify(this.userTargetComponent));switch(i){case"delete":this.userSelectLayoutItem&&(this.userSelectLayout.layout=this.userSelectLayout.layout.filter(function(e){return e.i!==t.userSelectLayoutItem.i}),this.$store.commit("SET_LAYOUTITEM",null),this.layoutRegister=this.layoutChanged=JSON.stringify(this.userSelectLayout));break;case"remove":this.userTargetComponent&&this.$refs.editPlan[this.userSelectLayoutIndex].deleteUserSelectComponents(this.userTargetComponent.uuid);break;case"txtup":a.defaultStyle.fontSize+=1,this.userTargetComponent=a;break;case"txtdown":this.userTargetComponent.defaultStyle.fontSize>12&&(a.defaultStyle.fontSize-=1,this.userTargetComponent=a);break;case"txtbold":a.defaultStyle.fontWeight>=900?a.defaultStyle.fontWeight=300:a.defaultStyle.fontWeight+=100,this.userTargetComponent=a;break;case"txtcolor":case"bgcolor":case"upload":break;case"layerup":a.defaultStyle.zIndex+=1,this.userTargetComponent=a;break;case"layerdown":a.defaultStyle.zIndex-=1,this.userTargetComponent=a;break;case"padding":break;case"level":a.defaultStyle.textAlign="center"===a.defaultStyle.textAlign?"left":"center",this.userTargetComponent=a}},changeGlobelColor:function(e){this.userSelectLayout&&(this.userSelectLayout.backgroundColor=e)},formatUserComponents:function(){var e=JSON.parse(JSON.stringify(this.userSelectLayout));return e.layout.forEach(function(e){e.userComponents=e.userComponents.map(function(e){return e.componentName?{componentId:e.componentId,img:e.componentId,defaultStyle:e.defaultStyle}:e})}),e},previewLayout:function(){this.dialogVisible=!0},saveLayout:function(){var e=this;this.$prompt("请输入看板名称","最后一步",{confirmButtonText:"确定",cancelButtonText:"默认"}).then(function(t){var i=t.value;e.saveLoadingTxt="生成缩略图...",e.saveLoading=!0,setTimeout(function(t){e.layoutViewThumbnail(i)},1e3)}).catch(function(){e.saveLoadingTxt="生成缩略图...",e.saveLoading=!0,setTimeout(function(t){e.layoutViewThumbnail()},1e3)})},httpPushImgFile:function(e,t){var i=this,a="".concat(this.userInfo.userId,"-").concat(Object(h.g)()),o=Object(l.a)(e,a),n=new FormData;n.append("fileName",o),n.append("photoDir","visualization"),this.saveLoadingTxt="保存设置...",this.$axios.post("/fileIO/file/uploadPhoto",n).then(function(e){var a;i.userSelectLayout.baseImg=e.photo,i.userSelectLayout.name=t||"default",a=i.formatUserComponents(),i.httpSaveLayout(a);var o=i.$storage.get("tempLayouts");o?(o.push(a),i.$storage.set("tempLayouts",o)):i.$storage.set("tempLayouts",[a])}).catch(function(e){})},httpSaveLayout:function(e){var t=this;this.$api.addUserEditedKanban({layout:JSON.stringify(e),title:e.name}).then(function(e){t.saveLoading=!1,t.$confirm("保存成功，前往看板列表？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){t.isSaved=!0,t.resetLayoutStore(),t.$router.push({path:"/kanban/kanbanList"})}).catch(function(){t.isSaved=!0,t.resetLayoutStore()})}).catch(function(e){})},layoutViewThumbnail:function(e){var t=this,i="",a=this.$el.querySelector("#layoutView");a&&n()(a,{width:a.offsetWidth,height:a.offsetHeight,scale:.6}).then(function(a){i=a.toDataURL(),t.httpPushImgFile(i,e)}).catch(function(e){})},stopStepClick:function(e){e.stopPropagation(),e.preventDefault()},closeview:function(){this.dialogVisible=!1},dropTools:function(e,t){e.dataTransfer.setData("layout",JSON.stringify(t))}},watch:{isCustom:function(){this.isCustom&&(this.$store.commit("SET_LAYOUT",{id:"",title:"自定义",layout:[],name:"",backgroundColor:""}),this.createGrids())},setThemeColor:function(){(this.$refs.editPlan||[]).forEach(function(e){e.changeComponentColor&&e.changeComponentColor()})}},directives:{"corner-marker":{componentUpdated:function(e,t,i){var a=i.context,o=t.value;a.stepIndex&&(clearTimeout(a.cornerMarkerTimer[o.i]),a.cornerMarkerTimer[o.i]=setTimeout(function(t){var i=e.querySelector(".vue-resizable-handle");if(i){var a=Object(h.e)(o.backgroundColor);i.style.backgroundImage='url(\'data:image/svg+xml;utf8,<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg" class="icon"><g><title>background</title><rect fill="none" id="canvas_background" height="202" width="202" y="-1" x="-1"/></g><g><title>Layer 1</title><rect id="svg_5" height="170" width="30" y="30" x="170" fill-opacity="null" stroke-opacity="null" stroke-width="null" stroke="null" fill="'.concat(a,'"/><rect id="svg_6" height="30" width="170" y="170" x="30" fill-opacity="null" stroke-opacity="null" stroke-width="null" stroke="null" fill="').concat(a,"\"/></g></svg>') !important")}}))}}}},k=(i("0wyt"),Object(c.a)(N,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.saveLoading,expression:"saveLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"visualization",attrs:{"element-loading-text":e.saveLoadingTxt,"element-loading-spinner":"none","element-loading-background":"rgba(255,255,255,0.6)"}},[i("el-row",{staticStyle:{height:"100%"}},[i("el-col",{staticStyle:{height:"100%"},attrs:{span:18}},[i("div",{staticStyle:{height:"100%"}},[i("div",{staticClass:"customLayoutHeader"},[i("div",{staticClass:"headerView leftArrow"},[i("base-button",{attrs:{icon:"arrowright",name:"上一步",type:"primary",plain:"",state:!e.stepIndex},on:{myclick:e.upStep}})],1),e._v(" "),i("div",{staticClass:"headerView headerTxt"},[i("div",{staticClass:"clearfix titleBox",style:{left:"-"+100*e.stepIndex+"%"}},[e._l(e.titleList,function(t,a){return[i("div",{key:a,staticClass:"titleView",style:{opacity:a===e.stepIndex?"1":"0",width:100/e.titleList.length+"%"},domProps:{textContent:e._s(t)}})]})],2)]),e._v(" "),i("div",{staticClass:"headerView rightArrow"},[i("base-button",{directives:[{name:"show",rawName:"v-show",value:2!=e.stepIndex,expression:"stepIndex!=2"}],attrs:{icon:"arrowleft",name:"下一步",iconRight:!0,type:"primary",plain:""},on:{myclick:e.nextStep}}),e._v(" "),i("base-button",{directives:[{name:"show",rawName:"v-show",value:2==e.stepIndex,expression:"stepIndex==2"}],attrs:{icon:"",name:"保存",type:"primary",plain:""},on:{myclick:e.saveLayout}})],1)]),e._v(" "),i("div",{attrs:{id:"layoutBox"}},[i("div",{style:{width:e.layoutViewWidth+"px",height:e.layoutViewHeight+"px"},attrs:{id:"layoutView"},on:{click:e.clickLayout,drop:function(t){return t.preventDefault(),e.dropLayout(t)},dragover:function(t){return t.preventDefault(),e.dropLayoutOver(t)}}},[e.userSelectLayout?[i("grid-layout",{style:e.setGridLayoutStyle,attrs:{layout:e.tempLayout,"col-num":e.colNum,"row-height":e.setRowHeight,"max-rows":e.colNum,"vertical-compact":!1,margin:[0,0],"use-css-transforms":!1},on:{"update:layout":function(t){e.tempLayout=t}}},e._l(e.tempLayout,function(t,a){return i("grid-item",{directives:[{name:"corner-marker",rawName:"v-corner-marker",value:t,expression:"item"}],key:t.i,staticStyle:{"text-align":"center","line-height":"200%"},style:{backgroundColor:e.stepIndex?t.backgroundColor:e.setLayoutItemStyle(t)},attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i,"is-resizable":2!==e.stepIndex,"is-draggable":2!==e.stepIndex&&e.userTargetComponentState},on:{resized:function(i){e.resizedEvent(arguments,t)}}},[i("edit-plan",{ref:"editPlan",refInFor:!0,attrs:{stepIndex:e.stepIndex,scope:t}})],1)}),1)]:[i("div",{staticStyle:{height:"100%","text-align":"center","font-size":"20px","font-weight":"bold"},style:{"line-height":e.layoutViewHeight+"px"},attrs:{"data-html2canvas-ignore":""}},[e._v("\n                请将右侧内置布局中的布局方式拖动到此处\n              ")])]],2),e._v(" "),i("div",{style:{width:e.layoutViewWidth+"px",height:.18*e.layoutBoxHeight+"px"},attrs:{id:"layoutViewBtns"}},[i("div",{attrs:{id:"layoutViewBtnsStyle"}},[e.stepIndex?1==e.stepIndex?[i("div",{staticClass:"page-wrapper-menu-operation clearfix"},e._l(e.setMenuOptions,function(t,a){return i("el-tooltip",{key:a,attrs:{effect:t.isColor||t.isUpload||t.isStep||t.isBgColor||t.isContentBgColor?"light":"dark",placement:"top"}},[t.isUpload?i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{domProps:{textContent:e._s(t.title)}}),e._v(" "),i("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:1,"file-list":[]}},[i("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("点击上传")])],1)],1):t.isStep?i("div",{staticStyle:{"text-align":"center"},attrs:{slot:"content"},slot:"content"},[i("div",{domProps:{textContent:e._s(t.title)}}),e._v(" "),i("div",{staticStyle:{display:"inline-block"},on:{click:function(t){e.stopStepClick(t)}}},[i("el-input-number",{attrs:{size:"mini",step:2,"step-strictly":"",min:0,max:50,label:"块边距"},model:{value:e.setDefaultStep,callback:function(t){e.setDefaultStep=t},expression:"setDefaultStep"}})],1)]):t.isColor?i("div",{staticStyle:{"text-align":"center"},attrs:{slot:"content"},slot:"content"},[i("div",{domProps:{textContent:e._s(t.title)}}),e._v(" "),i("el-color-picker",{attrs:{"show-alpha":"",size:"mini"},model:{value:e.setDefaultColor,callback:function(t){e.setDefaultColor=t},expression:"setDefaultColor"}})],1):t.isBgColor?i("div",{staticStyle:{"text-align":"center"},attrs:{slot:"content"},slot:"content"},[i("div",{domProps:{textContent:e._s(t.title)}}),e._v(" "),i("el-color-picker",{attrs:{"show-alpha":"",size:"mini"},model:{value:e.setBgColor,callback:function(t){e.setBgColor=t},expression:"setBgColor"}})],1):t.isContentBgColor?i("div",{staticStyle:{"text-align":"center"},attrs:{slot:"content"},slot:"content"},[i("div",{domProps:{textContent:e._s(t.title)}}),e._v(" "),i("el-color-picker",{attrs:{"show-alpha":"",size:"mini"},model:{value:e.setContentBgColor,callback:function(t){e.setContentBgColor=t},expression:"setContentBgColor"}})],1):i("div",{attrs:{slot:"content"},domProps:{textContent:e._s(t.title)},slot:"content"}),e._v(" "),i("div",{staticClass:"menu-item menu-item-on-edit-panel",style:{padding:t.icon?"8px 12px":"2px 2px 0 2px"},on:{click:function(i){e.handleElementCommand(t)}}},[i("svg-icon",{attrs:{"icon-class":"layout-"+t.icon}})],1)])}),1),e._v(" "),i("div",[i("div",{staticStyle:{display:"inline-block",visibility:"hidden"}},[i("span",{staticStyle:{display:"inline-block","vertical-align":"middle"}},[e._v("主题：")]),e._v(" "),i("el-switch",{class:{resetSwitchStyle:!e.themeColor},staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{"active-color":e.themeColorList[1],"inactive-color":e.themeColorList[0],"active-text":"黑","inactive-text":"白"},model:{value:e.themeColor,callback:function(t){e.themeColor=t},expression:"themeColor"}})],1),e._v(" "),i("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-refresh",disabled:!e.userSelectLayoutItem},on:{click:e.resetLayoutSet}},[e._v("清除所有设置\n                  ")])],1)]:[i("div"),e._v(" "),i("div",[i("div",{staticStyle:{display:"inline-block",visibility:"hidden"}},[i("span",{staticStyle:{display:"inline-block","vertical-align":"middle"}},[e._v("主题：")]),e._v(" "),i("el-switch",{class:{resetSwitchStyle:!e.themeColor},staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{"active-color":e.themeColorList[1],"inactive-color":e.themeColorList[0],"active-text":"黑","inactive-text":"白"},model:{value:e.themeColor,callback:function(t){e.themeColor=t},expression:"themeColor"}})],1),e._v(" "),i("el-button",{attrs:{plain:"",type:"primary"},on:{click:e.previewLayout}},[e._v("预 览\n                  ")])],1)]:[i("div",{staticStyle:{"font-size":"18px",padding:"10px 0"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!e.isCustom,expression:"!isCustom"}]},[e._v("当前布局：")]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!e.isCustom,expression:"!isCustom"}],staticStyle:{color:"#74bcff","font-weight":"600"},domProps:{textContent:e._s(e.userSelectLayout?e.userSelectLayout.title||"未命名":"未选择")}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isCustom&&e.tempLayout.length,expression:"isCustom&&tempLayout.length"}],staticClass:"page-wrapper-menu-operation clearfix"},[i("span",{staticStyle:{display:"inline-block","vertical-align":"middle"}},[e._v("全局背景色：")]),e._v(" "),i("el-color-picker",{staticStyle:{"vertical-align":"middle"},attrs:{"show-alpha":"",size:"mini"},on:{change:e.changeGlobelColor},model:{value:e.setGlobelColor,callback:function(t){e.setGlobelColor=t},expression:"setGlobelColor"}})],1)]),e._v(" "),i("div",[i("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-delete",disabled:!e.tempLayout.length},on:{click:e.clearTempLayout}},[e._v("清空布局\n                  ")])],1)]],2)])])])]),e._v(" "),i("el-col",{attrs:{span:6,id:"visualizationPlanHeight"}},[i("div",{staticClass:"layoutPlan",style:{left:0===e.stepIndex?0:"120%","z-index":0===e.stepIndex?20:10}},[i("el-collapse",{staticStyle:{height:"100%"},attrs:{accordion:""},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[i("el-collapse-item",{style:{backgroundColor:e.isCustom?"#fff":"rgb(232,244,255)"},attrs:{title:"快捷布局",name:"1"}},[i("div",{staticClass:"defaultLayoutView",style:{height:e.rootHeight-e.headerHeight+"px"}},[e._l(e.defaultLayoutList,function(t,a){return[i("el-card",{key:a,staticClass:"layoutItemView"},[i("div",{staticClass:"clearfix",staticStyle:{position:"relative"},attrs:{slot:"header"},slot:"header"},[i("div",{staticStyle:{"text-align":"center"},domProps:{textContent:e._s(t.name||t.title)}}),e._v(" "),t.name?i("div",{staticStyle:{position:"absolute",top:"50%",right:"5px",transform:"translate(0,-50%)"}},[i("el-button",{staticStyle:{padding:"5px"},attrs:{icon:"el-icon-delete"},on:{click:function(i){e.removeLayout(t,a)}}})],1):e._e()]),e._v(" "),i("default-layout",{attrs:{config:t}})],1)]})],2)])],1)],1),e._v(" "),i("div",{staticClass:"layoutPlan",style:{left:1===e.stepIndex||2===e.stepIndex?0:"120%","z-index":1===e.stepIndex||2===e.stepIndex?20:10}},[i("function-component",{attrs:{stepIndex:e.stepIndex}})],1)])],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible,fullscreen:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogVisible?i("visualizationTemplate",{tag:"component",attrs:{visualizationConfig:e.formatUserComponents()},on:{closeview:e.closeview}}):e._e()],1)],1)},[],!1,null,null,null));k.options.__file="index.vue";t.a=k.exports},EF8R:function(e,t,i){"use strict";i.r(t);var a={components:{customBaseTable:i("WIyV").a},props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageAssistPlanDetailChilds",params:{fieldCode:"prodInfo,unitName,ratio,count",addColumn:{columnKey:"prodInfo",columnName:"原材料"},prodColumnKey:"productCode,productName,productSpec,productProperty",planDtlId:this.initData.rowData.id}},customColumn:[{columnIndex:"prodInfo",width:"400",_cellConfig:{hideTitle:!0}}]}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.tableData=[],this.tableData=e)},getData:function(){this.$refs.customBaseTable.getData()},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"900px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 20px 20px"}},[i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistPlan_dialogAssistPlanDetailChild0",showIndex:!1,showTableSet:!1,showCheckBox:!1,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogAssistPlanDetailChild.vue";t.default=n.exports},EFeR:function(e,t,i){},EPCU:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},isShowDept:!1,isShowCust:!1,rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,DepartmentDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择部门",treeUrl:"/system/department/treeDepartments",treeParm:{},tableUrl:"/system/department/listPageDepartments",tableParm:{isdisable:"1",fieldCode:"code,name,deptTypeName,layer,parentName,remark"},temp:{}},dialogName:"dialogTreeOption"}},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择客户",treeUrl:"/system/dictionary/treeDictionarys",treeParm:{dictionaryKey:"customerSupplierGenre"},tableUrl:"/base/customer/listPageCustomers",tableParm:{},temp:{}},dialogName:"dialogTreeOption"}},formTemp:[]}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{changeVirtualGenre:function(){"1"==this.temp.virtualGenre?(this.isShowDept=!0,this.isShowCust=!1):"2"==this.temp.virtualGenre&&(this.isShowCust=!0,this.isShowDept=!1)},departmentSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualDeptId=e[0].id,this.temp.virtualDeptName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},customerSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualCustomerId=e[0].id,this.temp.virtualCustomerName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},dialogOpen:function(){var e=this;this.changeVirtualGenre(),"1"==this.temp.virtualGenre&&null!=this.temp.virtualDeptName&&this.temp.virtualDeptName.trim().length>0?this.temp.virtualDepartmentName=this.temp.virtualDeptName:"2"==this.temp.virtualGenre&&null!=this.temp.virtualCustomerName&&this.temp.virtualCustomerName.trim().length>0&&(this.temp.virtualDepartmentName=this.temp.virtualCustomerName),this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateWarehouseByVirtual)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"仓库性质:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{value:"虚拟库",readonly:!0}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.virtualGenreName+":",prop:"virtualGenreName"}},[i("el-select",{attrs:{placeholder:e.tempLable.virtualGenreName,disabled:!0},on:{change:e.changeVirtualGenre},model:{value:e.temp.virtualGenre,callback:function(t){e.$set(e.temp,"virtualGenre",t)},expression:"temp.virtualGenre"}},[i("el-option",{attrs:{label:"内部单位",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"外部单位",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowDept,expression:"isShowDept"}],attrs:{label:"部门名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DepartmentDialog.dialog},on:{callback:e.departmentSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowCust,expression:"isShowCust"}],attrs:{label:"客户名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseVirtualEdit.vue";t.default=s.exports},EUUs:function(e,t,i){},"Efe/":function(e,t,i){"use strict";var a=i("ZtFv");i.n(a).a},Ey5t:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("HltP"),o=i("QmdA");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{dialogAdd:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{customerId:"",orderData:{},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{companyName:"",invoiceNumber:"",address:"",bankName:"",bankCode:"",mobile:"",remark:"",customerId:""},tempLable:{},tempNotEditable:{},rules:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{temp:{},title:""}}},created:function(){this.customerId=this.initData.customerId,this.temp.customerId=this.initData.customerId,this.orderData=this.initData.orderData},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},isBankCodeNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[1-9][0-9]*$").test(e.trim())},checkBankCodeValue:function(e,t){var i="";return null!=e&&e.trim().length>0&&!this.isBankCodeNumberByValue(e.trim())&&(i=t+"("+e+")输入错误，请输入正确的账号！"),i},checkBankCode:function(e){var t=this.checkBankCodeValue(e,"账号");null!=t&&t.trim().length>0&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t})},save:function(){var e=this,t=this;this.$refs.submitForm.validate(function(i){if(i){var a="",n=e.temp.bankCode,l=e.checkBankCodeValue(n,"账号");if(null!=l&&l.trim().length>0&&(a=a+" "+l),null!=a&&a.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:a});t.dialogLoading=!0,Object(o.addCustomerInvoice)(t.temp).then(function(i){t.dialogLoading=!1,0===i.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.orderData.custInvoiceCompanyName=t.temp.companyName,e.orderData.custInvoiceNumber=t.temp.invoiceNumber,e.orderData.custInvoiceAddress=t.temp.address,e.orderData.custInvoiceMobile=t.temp.mobile,e.orderData.custInvoiceBankName=t.temp.bankName,e.orderData.custInvoiceBankCode=t.temp.bankCode,e.dialogData.temp=e.orderData,e.dialogData.title="选择订单",e.openDialogName="dialogAdd",e.showDialog=!0,e.inLinVisible=!0)}).catch(function(e){t.dialogLoading=!1})}})},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"companyName"}},[i("el-input",{model:{value:e.temp.companyName,callback:function(t){e.$set(e.temp,"companyName",t)},expression:"temp.companyName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"税号:",prop:"invoiceNumber"}},[i("el-input",{model:{value:e.temp.invoiceNumber,callback:function(t){e.$set(e.temp,"invoiceNumber",t)},expression:"temp.invoiceNumber"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地址:",prop:"address"}},[i("el-input",{model:{value:e.temp.address,callback:function(t){e.$set(e.temp,"address",t)},expression:"temp.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电话:",prop:"mobile"}},[i("el-input",{model:{value:e.temp.mobile,callback:function(t){e.$set(e.temp,"mobile",t)},expression:"temp.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开户银行:",prop:"bankName"}},[i("el-input",{model:{value:e.temp.bankName,callback:function(t){e.$set(e.temp,"bankName",t)},expression:"temp.bankName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"账号:",prop:"bankCode"}},[i("el-input",{on:{change:e.checkBankCode},model:{value:e.temp.bankCode,callback:function(t){e.$set(e.temp,"bankCode",t)},expression:"temp.bankCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="addCustomerInvoice.vue";t.default=r.exports},"F/Du":function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("WIyV"),o=i("CIQn"),n=i("sanI"),l=i("JcIl"),s={components:{customBaseTable:a.a,dialogAddCustomer:n.default,productTableDialog:o.a},props:["initData","visible"],data:function(){return{parentId:"",rules:{customerName:[{required:!0,message:"请选择客户名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{parentId:"",customerId:"",customerName:"",type:"",typeName:"",remarkParent:"",dtlJsonStr:"",isAutoCommit:""},tableData:[],orderDtlList:[],deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择客户名称",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"df7cb67fca4148bc9632c908e4a7fdea",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}},apiObj:{apiName:"listPageSaleWaresRetreatDetail",params:{type:"edit",parentId:"",fieldCode:"productCode,productName,productSpec,orderUnitName,orderCount,orderPrice,orderSum,remark"}},customColumn:[{columnIndex:"orderCount",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{greaterThan:["0",!1]}],message:["退货数量不能为空！","请输入大于零的正整数或(1,2)位小数！","不可等于零！"]}},{columnIndex:"orderPrice",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]{1,4})?$"},{greaterThan:["0",!1]}],message:["单价不能为空！","请输入大于零的正整数或(1,4)位小数！","不可等于零！"]}},{columnIndex:"orderSum",componentName:"input",_cellConfig:{hideTitle:!0,compute:"self@orderCount(*)self@orderPrice"}},{columnIndex:"remark",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{maxExpectDate:""},customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>{{data.total.toFixed(2)}}</span></li>\n                    </ul>'},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},data:{total:"0.00"},computes:{total:"table@orderSum"}}}},beforeCreate:function(){},created:function(){this.parentId=this.initData.data.id,this.apiObj.params.parentId=this.initData.data.id,this.temp.parentId=this.initData.data.id,this.temp.customerId=this.initData.data.customerId,this.temp.customerName=this.initData.data.customerName,this.temp.type="1",this.temp.typeName="退货退款"},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},databridge:function(e){Array.isArray(e)&&(this.orderDtlList=[],this.orderDtlList=e)},customerSelect:function(e){e[0]&&(this.temp.customerId=e[0].id,this.temp.customerName=e[0].name)},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.$refs.editWaresRetreat.getData(),null!=e.orderDtlList&&e.orderDtlList.length>0&&e.saveSaleOrder(e.orderDtlList))})},saveSaleOrder:function(e){for(var t=this,i=[],a=0;a<e.length;a++){var o=e[a],n={id:o.id,productId:o.productId,orderUnit:o.orderUnit,orderCount:o.orderCount,orderPrice:o.orderPrice,remark:o.remark};i.push(n)}this.temp.dtlJsonStr="",null!=i&&i.length>0&&(this.temp.dtlJsonStr=JSON.stringify(i)),this.$confirm("是否将该退货单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.temp.isAutoCommit="true",t.temp.deleteIds=t.deleteIds,Object(l.updateSaleWaresRetreat)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.temp.isAutoCommit="false",t.temp.deleteIds=t.deleteIds,Object(l.updateSaleWaresRetreat)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})},deleteAllRow:function(e,t){this.$refs.editWaresRetreat.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.dialogData.fieldCode="code,name,spec,unitName,genreName",this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=[];null!=e.tableSelectList&&(t=e.tableSelectList),this.tableSelected(t),e.customerId&&(this.temp.customerId=e.customerId),e.customerName&&(this.temp.customerName=e.customerName)},tableSelected:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={productId:i.id.trim(),productCode:i.code.trim(),productName:i.name.trim(),productSpec:i.spec.trim(),productGenreName:i.genreName.trim(),orderUnit:i.unit.trim(),orderUnitName:i.unitName.trim(),orderCount:"",orderPrice:"",orderSum:""};this.tableData.push(a)}}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px",size:e.size}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"退货类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{readonly:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"客户名称:",prop:"customerName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"160px"},attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.customerName,callback:function(t){e.$set(e.temp,"customerName",t)},expression:"temp.customerName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"0px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注:"}},[i("el-input",{staticStyle:{width:"160px"},model:{value:e.temp.remarkParent,callback:function(t){e.$set(e.temp,"remarkParent",t)},expression:"temp.remarkParent"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"editWaresRetreat",attrs:{"data-custom-table-id":"views_sale_retreatByWares_createWaresRetreat_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"editWaresRetreat",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogEdit.vue";t.default=c.exports},F0s3:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rGqo");var a=i("mSNy"),o=i("a0Xs"),n=i("c+Jk"),l=i("iA4u"),s=i("z0WU");function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){c(e,t,i[t])})}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" :disabled="scope.row.type===\'计量单位\'" @change="colConfig.changeState(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdefault" @change="colConfig.changeIsdefault(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},p={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button  v-show="colConfig.editBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.editBtns(scope.row,scope.$index)">编辑</el-button>\n      \t\t\t\t\t\t\t<el-button  v-show="colConfig.deleteBtns_isShow&&scope.row.isdisable==\'0\'" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteBtns(scope.row,scope.$index)">删除</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},m={name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,topBarBtnList:[{name:"查询",icon:"search",method:this.queryTable},{name:"重置",icon:"refresh",plain:!0,method:this.resetQueryTemp}],initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",btnName:"编辑",isPropName:!0,component:p,editBtns:this.editBtns,editBtns_isShow:!0,deleteBtns:this.deleteBtns,deleteBtns_isShow:!0}},configs:{topBarBtnList:[{name:"新增",nameEn:"add",isShow:!0,icon:"add",method:this.addNew}],tableConfigs:[],showCheckBox:!1,showIndex:!1,isSingle:!1},tableData:[],selectList:[],queryParms:[{name:"code"},{name:"name"}],temp:{},tempQuery:{},tempLable:{},pageData:null,pageNo:1,openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{dialogUnitAdd:n.default,dialogUnitEdit:l.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.configs.isSingle=this.initData.isSingle,this.userInfo=this.$storage.get("userInfo"),this.initTable(!0)},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{editBtns:function(e,t){this.dialogData.temp=JSON.parse(JSON.stringify(e)),this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑",this.openDialogName="dialogUnitEdit",this.showDialog=!0,this.visibleState=!0},changeState:function(e,t){Object(o.updateDisableProductUnit)(e.id,e.isdisable).then(function(e){}).catch(function(e){})},deleteBtns:function(e,t){var i=this;i.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.deleteProductUnit)(e.id).then(function(e){0===e.code&&(i.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),i.initTable(!0))}).catch(function(e){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},queryTable:function(){this.pageNo=1,this.initTable(!0)},initTable:function(e){var t=this;t.dialogTopLoading=!0,Object(o.listPageProductUnits)(r({},t.tempQuery,{productId:this.initData.temp.id,pageNo:t.pageNo})).then(function(i){t.getListPage(i),e&&(t.dialogTopLoading=!1)}).catch(function(e){t.dialogTopLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(s.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!0,this.configs.showIndex=!0,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var o=e[i];o.indexOf("_")>0&&("en"==a.a.locale?o=o.substring(o.indexOf("_")+1):"zh"==a.a.locale&&(o=o.substring(0,o.indexOf("_")))),t.tempLable[i]=o}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==a.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==a.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"是否启用"===e.label&&(e.component=d,e.changeState=t.changeState),"是否默认"===e.label&&(e.component=u,e.changeIsdefault=t.changeIsdefault)}),e.push(t.initConfigs.tableOperates),e},addNew:function(){this.dialogData.temp=this.initData.temp,this.dialogData.tempLable=this.initData.tempLable,this.dialogData.title="新增计价单位",this.openDialogName="dialogUnitAdd",this.showDialog=!0,this.visibleState=!0},resetTemp:function(){for(var e in this.temp)this.temp[e]=""},changeIsdefault:function(e,t){var i=this;Object(o.updateIsDefaultProductUnit)(e.id,e.isdefault,e.productId).then(function(e){i.refreshTable()}).catch(function(e){})},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.refreshTable()},refreshTable:function(){var e=this;e.$axios.all([Object(o.listPageProductUnits)(r({},e.tempQuery,{productId:this.initData.temp.id,pageNo:e.pageNo}))]).then(e.$axios.spread(function(t){e.getListPage(t)})).catch(function(e){})},dataBridge:function(e){this.selectList=e},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]=""}},computed:{dialogName:function(){return this.openDialogName}},watch:{pageNo:function(){this.initTable()}}},h=i("KHd+"),g=Object(h.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}],staticStyle:{height:"500px"}},[i("el-col",{staticStyle:{height:"100%"},attrs:{span:24}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("div",{staticStyle:{height:"calc(100% - 60px)","box-sizing":"border-box",padding:"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,isSortable:!1,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1)]),e._v(" "),e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e()],1)])},[],!1,null,null,null);g.options.__file="dialogUnit.vue";t.default=g.exports},"F4/0":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("uTIz"),o=i("2+ib"),n=i("1AWt"),l=i("b5Ov");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{searchBar:a.a,multilevelTable:o.a,dialogWarehouseBySimple:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{sourceWarehouseId:"",warehouse:{name:null,id:null},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{warehouseIds:"",title:"",dialog_width:"",table_style:"",temp:{}},rowTableList:[],tableConfigList:[{customColumn:[{columnIndex:"moveCount",componentName:"input",_cellConfig:{rules:[{required:!0},{greaterThan:["0",!1]},{lessThan:["self@stockCount",!0]}],message:["此项不能为空！","移库数量必须大于零！","移库数量必须小于等于库存数量！"]}}],apiObj:{apiName:"listPageSimpleWarehouseProductView",params:{ids:this.initData.ids,isNeedEntity:"true",isNotNeedSpare:"true",fieldCode:"warehouseName,code,name,spec,unitName,genreName,stockCount,moveCount"}},tempData:{},showHeader:!0,showIndex:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable"}],warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{notInWarehouseIds:this.initData.warehouseIds,isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]}}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){"{}"!=JSON.stringify(e)&&(this.warehouse.id=e.id,this.warehouse.name=e.pathName),this.inLinVisible=!1,this.showDialog=!1},warehouseSelect:function(e){null!=e&&e.length>0?(this.warehouse.id=e[e.length-1],this.warehouse.name=e[e.length-1]):(this.warehouse.id="",this.warehouse.name="")},save:function(){var e=this;if(this.warehouse.name){if(this.$refs.customBaseTable.getData(),null!=this.rowTableList&&this.rowTableList.length>0){var t=JSON.stringify(this.rowTableList);Object(l.addWarehouseMoveBySimple)({targetWarehouseId:this.warehouse.id,dtlJsonStr:t}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择目标仓库，目标仓库为必填项不可为空！"})}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"300px","margin-top":"15px","margin-left":"2%"}},[i("b",[e._v("目标仓库:")]),e._v(" "),i("base-input-select",{staticStyle:{width:"200px"},attrs:{data:e.warehouseData.data},on:{callback:e.warehouseSelect},model:{value:e.warehouseData.defaultSelected,callback:function(t){e.$set(e.warehouseData,"defaultSelected",t)},expression:"warehouseData.defaultSelected"}})],1),e._v(" "),i("el-row",{style:e.initData.table_style},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseBySimple_moveBySimple_dialogAdd0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);d.options.__file="dialogAdd.vue";t.default=d.exports},F9dT:function(e,t,i){"use strict";i.d(t,"a",function(){return c}),i.d(t,"c",function(){return d}),i.d(t,"b",function(){return u});i("pIFo"),i("SRfc"),i("KKXr"),i("INYr"),i("rGqo");var a=i("Yfch"),o=i("TB3a"),n=i("YP4+"),l=(i("yO6P"),i("z0WU")),s=function(){return function(e,t,i){var o,n,l;t?(n=t-0,o=!0,l=e.ops[e.ops.length-1],e.ops&&e.ops.length&&e.ops.forEach(function(t,i){i<e.ops.length-1&&(l?Object(a.b)(t-0)?(!Object(a.b)(n)||t-0>n)&&(o=!1):t-0>n&&(o=!1):Object(a.b)(t-0)?(!Object(a.b)(n)||t-0>=n)&&(o=!1):t-0>=n&&(o=!1))}),o?i():i(new Error(e.message))):i(new Error("不能为空"))}},r=function(){return function(e,t,i){var o,n,l;t?(n=t-0,o=!0,l=e.ops[e.ops.length-1],e.ops&&e.ops.length&&e.ops.forEach(function(t,i){i<e.ops.length-1&&(l?Object(a.b)(t-0)?(!Object(a.b)(n-0)||n>t-0)&&(o=!1):n>t-0&&(o=!1):Object(a.b)(t-0)?(!Object(a.b)(n-0)||n>=t-0)&&(o=!1):n>=t-0&&(o=!1))}),o?i():i(new Error(e.message))):i(new Error("不能为空"))}};function c(e,t,i,a,o,n,l,c,u,p,m){var h,g,f,b,v;return e&&(h=d(e.greaterThan,o,n,u,!0,p)),b=c.findIndex(function(e){return e.greaterThan}),t&&(g=d(t.lessThan,o,n,u,!1,p)),v=c.findIndex(function(e){return e.lessThan}),f=[],h&&f.push({validator:s(),trigger:"blur",message:l[m||b],ops:h}),g&&f.push({validator:r(),trigger:"blur",message:l[m||v],ops:g}),f}function d(e,t,i,a,o,n,l){var s;"boolean"==typeof(e=JSON.parse(JSON.stringify(e)))[e.length-1]&&(s=e.pop());var r=e.map(function(e){return""});return e.forEach(function(e,s){var c=e.split(/\([\\+|\-|\\*|\\/]\)/);if(c.length>1)r.splice(s,1,u(c,t,i,a,e,n,l));else if(-1!==e.indexOf("@")){var d=e.split("@");2===d.length&&"self"===d[0]&&r.splice(s,1,t[d[1]]),2===d.length&&"parent"===d[0]&&r.splice(s,1,i[0][d[1]]),2===d.length&&"tempData"===d[0]&&r.splice(s,1,n[d[1]]),2===d.length&&"sibling"===d[0]&&r.splice(s,1,p(d[1],a,t,!1,o)),3===d.length&&"parent"===d[0]&&r.splice(s,1,JSON.parse(JSON.stringify(i)).reverse()[d[1]-1][d[2]])}else r.splice(s,1,e)}),"boolean"==typeof s?r.push(s):r.push(!0),r}function u(e,t,i,s,r,c,d){var u=e.map(function(e){return""});e.forEach(function(e,o){var n=e.split("@"),l=0;if(2===n.length)switch(n[0]){case"self":l=t[n[1]];break;case"parent":l=i[i.length-1][n[1]];break;case"tempData":l=c[n[1]];break;case"sibling":l=p(n[1],s,t,!0)}else 3===n.length?l=JSON.parse(JSON.stringify(i)).reverse()[n[1]-1][n[2]]:1===n.length&&(l=n[0]-0);Object(a.b)(l)&&l-0<0&&(l="(".concat(l,")")),u.splice(o,1,l||0)});var m=r.match(/\([\\+|\-|\\*|\\/]\)/g).map(function(e){return e.replace(/\(|\)/g,"")}),h="",g=function(e){var t="string"==typeof e?e.replace(/\(|\)/g,""):e;if(Object(a.b)(t))return"number";if("string"==typeof t&&/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}/.test(t))return"date"}(u[0]);return"number"===g?(u.forEach(function(e,t){m[t]?h+=e+m[t]:h+=e}),parseFloat(Object(l.l)(h).toFixed(d||n.a.precision))):"date"===g?(u.forEach(function(e,t){var i=o.a.timeStamp(e);m[t]?h+=i+m[t]:h+=i}),o.a.formatDate(Object(l.l)(h))):0}function p(e,t,i,a,o){var n=[],l=0,s=t.findIndex(function(e){return e.id===i.id});return t.forEach(function(t,i){s!==i&&n.push(t[e])}),a?n.forEach(function(e){l+=e-0}):l=o?Math.min.apply(Math,n):Math.max.apply(Math,n),l}},FCj2:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("3LyK");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{parentId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){this.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.auditDisagreeSaleOrderChange)({id:e.parentId,remark:e.temp.remark}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAuditDisagree.vue";t.default=s.exports},FIN3:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("91GP");var a=i("2+ib"),o=(i("z0WU"),i("Ppn9")),n=i("HhAy"),l=i("icrm"),s={name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,tempQuery:{},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageBoms",params:{modelCode:"BomProduct",fieldCode:"prodInfo,unitName,code,name",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"prodCode,prodName,prodSpec,productProperty",isdefault:"1",isdisable:"1"}},temp:{},showIndex:!0,showHeader:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a,dialogAddFromBom:l.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{queryTable:function(){this.tableConfigList[0].apiObj.params.isNullAlarm="false",this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.tempQuery),this.updateData()},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.tableConfigList[0].apiObj.params.isNullAlarm="false",this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.tempQuery),this.updateData()},dialogClose:function(){this.$emit("close-dialog",{resState:"ok",selectList:[]})},nextStep:function(){var e="";this.selectList.forEach(function(t){e+=""==e?"'"+t.id+"'":",'"+t.id+"'"}),""!=e?(this.dialogData.temp=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="按产品BOM领料",this.openDialogName="dialogAddFromBom",this.showDialog=!0,this.visibleState=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条记录！"})},addProduct:function(){var e=this;this.selectList.length>0?this.$axios.all([Object(n.listProdLackNum)({dtlJsonStr:JSON.stringify(this.selectList),fieldCode:"code,name,spec,genre,unit,planCount,maxCount"})]).then(this.$axios.spread(function(t){e.$emit("close-dialog",{resState:"ok",selectList:t.result.varList})})).catch(function(e){}):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条记录！"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},delete:function(e,t){var i=this;i.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.deleteAttachment)(e).then(function(e){0===e.code&&(i.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),i.updateData())}).catch(function(e){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.updateData()},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}},r=(i("KpZ4"),i("JhGc"),i("KHd+")),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1500px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-row",[i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{model:{value:e.tempQuery.prodCode,callback:function(t){e.$set(e.tempQuery,"prodCode",t)},expression:"tempQuery.prodCode"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{model:{value:e.tempQuery.prodName,callback:function(t){e.$set(e.tempQuery,"prodName",t)},expression:"tempQuery.prodName"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"BOM编码："}},[i("el-input",{model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"BOM名称："}},[i("el-input",{model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:2}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:2}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_produce_materialRequisitionWC_dialogAddProduct20",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:"index"!=this.initData.parent,expression:"this.initData.parent != 'index' "}],attrs:{type:"primary"},on:{click:e.addProduct}},[e._v("确定")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"index"==this.initData.parent,expression:"this.initData.parent == 'index' "}],attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);c.options.__file="dialogAddProduct2.vue";t.default=c.exports},FK0u:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo"),i("91GP"),i("f3/d");var a=i("f/WR"),o=i("uTIz"),n=i("5W5M"),l=(i("xMja"),i("uXxI"));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{transferTable:a.a,searchBar:o.a},name:"dialogAddByProduct",props:["initData","visible"],data:function(){return{temp:{productIds:""},tempLable:{},rules:{},guid:"",tempQuery:{},searchList:[{label:"货品编码",type:"input",ruleType:"string",mapKey:"code",configs:{},placeholder:"货品编码"},{label:"货品名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"货品名称"}],searchConfig:{hideSearchSwitch:!1},dialogLoading:!1,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},pageData:null,pageNo:1,treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1},selectTree:{pid:"",id:"",name:""},btnList:[{name:"生成盘点任务",isShow:!0,state:!0,method:this.addWarehouseCheck},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],apiData:{apiName:"listPageProducts",params:{fieldCode:"code,name,spec,unitName,genreName,stockCount,cdate",genreId:"",isNeedWarehouseProduct:"true",isNeedNotInGenreSpare:"true",isdisable:"1",orderStr:"prod.cdate desc"}},tableSelectList:[],stateBtnData:{},tableConfigs:{showIndex:!0},tempList:[],searchObj:{}}},created:function(){this.initTree()},mounted:function(){this.isVisible=this.visible},computed:{tableHeight:function(){},dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,name:e.nodeData.name},this.pageNo=1,this.apiData.params=Object.assign({},this.searchObj,this.apiData.params,{genreId:this.selectTree.id})},initTree:function(){var e=this;this.dialogLoading=!0,Object(n.listTreeDictionary)({dictionaryKey:"productGenre"}).then(function(t){var i=[],a=[],o={};if(null!=t.result&&null!=t.result.treeList){var n=(o=t.result.treeList).children;if(null!=n&&n.length>0){for(var l=0;l<n.length;l++){var s=n[l];"备件"!=s.name&&a.push(s)}o.children=a}}e.selectTree={pid:o.pid,id:o.id,layer:o.layer,name:o.name},i.push(o),e.treeData=i,e.apiData.params=Object.assign({},e.searchObj,e.apiData.params,{genreId:e.selectTree.id}),e.$nextTick(function(){this.$refs.tree.$children[0].setCurrentKey(this.selectTree.id)}),e.dialogLoading=!1}).catch(function(t){e.dialogLoading=!1})},sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.apiData.params=Object.assign({},this.searchObj,this.apiData.params)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{selectList:this.tempList})},addWarehouseCheck:function(){var e=this,t=this.tempList,i=[];null!=t&&t.length>0&&t.forEach(function(e){var t=e.id;if(null!=t&&t.trim().length>0){var a={businessId:""};a.businessId=t,i.push(a)}}),0!=i.length?Object(l.addWarehouseCheck)({type:"2",dtlJsonStr:JSON.stringify(i)}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){}):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条货品数据！"})},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},tableSelected:function(e){this.tempList=e},closeDialog:function(e){this.showDialog=!1}}},c=(i("7+Lp"),i("KHd+")),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px",layoutType:1},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{attrs:{span:6}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{attrs:{span:18}},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,searchConfig:e.searchConfig},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",[i("div",[i("transfer-table",{ref:"trabsferTables",attrs:{tableConfigs:e.tableConfigs,btnList:e.btnList,stateBtn:e.stateBtnData,apiData:e.apiData},on:{"table-selected":e.tableSelected}})],1)])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogAddByProduct.vue";t.default=d.exports},FPYt:function(e,t,i){"use strict";var a=i("7NWZ");i.n(a).a},FXVt:function(e,t,i){"use strict";var a=i("y93b");i.n(a).a},FgPX:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("yt8O"),i("RW0V"),i("Yfch");var a=i("WIBD"),o=i("XS0u");i("yO6P");function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.default={data:function(){var e=this;return{loginForm:{username:"",password:"",authcode:""},loginRules:{username:[{required:!0,trigger:"blur",validator:function(e,t,i){t.trim()?/^[A-Za-z0-9_]{1,}$/.test(t)?i():i(new Error("仅限输入英文，数字，下划线")):i(new Error("请输入正确的用户名"))}}],password:[{required:!0,trigger:"blur",validator:function(e,t,i){t.trim()?t.length<0?i(new Error("密码长度过低")):i():i(new Error("请输入密码"))}}],authcode:[{required:!0,trigger:"blur",validator:function(t,i,a){var o=i.toUpperCase();o&&e.authcode?o!==e.authcode?a(new Error("验证码错误")):a():a(new Error("验证码不匹配"))}}]},loading:!1,pwdType:"password",checked:!1,lading:null,codeTimer:"",userKey:""}},created:function(){var e=this,t=o.a.localGet("auth")||{};e.$loading(),t.password&&(e.loginForm.username=t.username,e.loginForm.password=t.password,e.checked=!0),e.userKey=o.a.localGet("tempUserKey")||"",o.a.localRemove("tempUserKey"),e.userKey&&e.$api.findUserCodeByToken({token:e.userKey}).then(function(t){e.loginForm.username=t.userCode,e.loginForm.password="123456",e.checked=!1}).catch(function(t){e.loginForm.username="",e.loginForm.password="",e.checked=!1}),e.changeCode(),e.$loading({}).close()},mounted:function(){},methods:{showPwd:function(){this.userKey||("password"===this.pwdType?this.pwdType="":this.pwdType="password")},handleLogin:function(){var e=this;e.savePwd(e.checked),e.$refs.loginForm.validate(function(t){if(!t)return!1;e.loading=!0,e.$store.dispatch("Login",{userInfo:e.loginForm,token:e.userKey}).then(function(t){clearTimeout(e.codeTimer),e.loading=!1,e.$store.dispatch("tagsView/delAllViews").then(function(e){e.visitedViews}),e.$router.push({path:"/home"})}).catch(function(){e.loading=!1,e.$loading({}).close()})})},savePwd:function(e){if(e){var t={username:this.loginForm.username,password:this.loginForm.password};o.a.localSet("auth",t)}else o.a.localRemove("auth")},changeCode:function(){var e=this;e.$store.dispatch("CreateSecurityCode",{}).then(function(){e.$refs.loginForm&&e.$refs.loginForm.clearValidate&&e.$refs.loginForm.clearValidate(),e.loginForm.authcode="",e.drawPic(e.authcode),clearTimeout(e.codeTimer),e.codeTimer=setTimeout(function(t){e.changeCode()},27e3)}).catch(function(){e.$refs.loginForm&&e.$refs.loginForm.clearValidate&&e.$refs.loginForm.clearValidate(),e.loginForm.authcode="",clearTimeout(e.codeTimer),e.codeTimer=setTimeout(function(t){e.changeCode()},27e3)})},drawPic:function(e){var t=document.getElementById("canvas"),i=t.width,a=t.height,o=t.getContext("2d");function n(e,t){return Math.floor(Math.random()*(t-e)+e)}function l(e,t){return"rgb("+n(e,t)+","+n(e,t)+","+n(e,t)+")"}o.textBaseline="bottom",o.fillStyle=l(180,240),o.fillRect(0,0,i,a);for(var s=e,r=0;r<4;r++){var c=s[r];o.fillStyle=l(50,160),o.font=n(18,30)+"px SimHei";var d=5+20*r,u=n(25,30),p=n(-30,30);o.translate(d,u),o.rotate(p*Math.PI/180),o.fillText(c,0,0),o.rotate(-p*Math.PI/180),o.translate(-d,-u)}}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){n(e,t,i[t])})}return e}({},Object(a.mapGetters)(["authcode"]),{btnState:function(){return!(this.loginForm.username&&this.loginForm.password&&this.loginForm.authcode&&this.loginForm.authcode.toLowerCase()===this.authcode.toLowerCase())}}),watch:{checked:function(){this.checked||o.a.localRemove("auth")}}}},FnUz:function(e,t,i){"use strict";i.r(t);i("91GP"),i("rGqo");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("HSP/")),l={components:{customTransferTable:a.a,dialogAddFromBom:n.default,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"下一步",isShow:!0,state:!0,method:this.nextStep},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageBoms",params:{modelCode:"BomProduct",fieldCode:"prodInfo,unitName,code,name",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"prodCode,prodName,prodSpec,productProperty",isdefault:"1",isdisable:"1",isNullAlarm:"true"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!0,entireRowDrag:!0},belowTableConfig:{customColumn:[],tempData:{},showIndex:!1,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!0,entireRowDrag:!0},addColumns:[],hideColumns:["remark"],tableSelectList:[]}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{tableSelectList:this.tableSelectList})},closeDialog:function(e){this.showDialog=!1},tableSelected:function(e){this.tableSelectList=e},nextStep:function(){this.$refs.trabsferTables.getTableSelected();var e="";this.tableSelectList.forEach(function(t){e+=""==e?"'"+t.id+"'":",'"+t.id+"'"}),""!=e?(this.dialogData.temp=JSON.stringify(this.tableSelectList),this.dialogData.tempLable=this.tempLable,this.dialogData.title="按产品BOM领料",this.openDialogName="dialogAddFromBom",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条记录！"})},confrim:function(){this.$refs.trabsferTables.getTableSelected()},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{height:"100%"},attrs:{span:24}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogAddProduct.vue";t.default=r.exports},FrM3:function(e,t,i){},FrX8:function(e,t,i){},"G/y+":function(e,t,i){},G3ET:function(e,t,i){},G3sP:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo");var a=i("uTIz"),o=i("2+ib"),n=i("Qbmm");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{searchBar:a.a,multilevelTable:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{parentId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",table_style:""},rowTableList:[],tableConfigList:[{customColumn:[{columnIndex:"stockCount",componentName:"input",_cellConfig:{rules:[{required:!0},{greaterThan:["0",!0]}],message:["此项不能为空！","盘点数量必须大于等于零！"]}},{columnIndex:"editChangeCount",componentName:"input",_cellConfig:{compute:"self@stockCount(-)self@checkStockCount"}}],apiObj:{apiName:"listPageWarehouseCheckDetails",params:{parentId:"",isNeedEqual:"true",fieldCode:"warehouseName,productCode,productName,productSpec,productGenreName,productUnitName,checkStockCount,stockCount,editChangeCount"}},tempData:{},showHeader:!0,showIndex:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable"}]}},created:function(){this.parentId=this.initData.parentId,this.tableConfigList[0].apiObj.params.parentId=this.initData.parentId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1},save:function(){var e=this;if(this.$refs.customBaseTable.getData(),null!=this.rowTableList&&this.rowTableList.length>0){var t=[];this.rowTableList.forEach(function(e){var i={id:e.id,warehouseId:e.warehouseId,productId:e.productId,checkStockCount:e.checkStockCount,stockCount:e.stockCount};t.push(i)});var i="";t.length>0&&(i=JSON.stringify(t)),Object(n.executeWarehouseCheckBySimple)({id:this.parentId,deptId:this.$storage.get("userInfo").deptId,dtlJsonStr:i}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{staticStyle:{"padding-top":"10px"},style:e.initData.table_style},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseBySimple_checkBySimple_checkExecute0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);c.options.__file="checkExecute.vue";t.default=c.exports},G5My:function(e,t,i){"use strict";i.r(t);i("KKXr"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("t3Un"),{components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",state:!0,isShow:!0,plain:!0,icon:"refresh",method:this.resetQuery}],aboveTableConfig:{apiObj:{apiName:"listPageAssistProductBySupplier",params:{fieldCode:"assistProductName,craftName,productUnitName,price,lossRatio",supplierId:"null"}},customColumn:[{columnIndex:"assistProductName",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!0,showTableSet:!1,showAll:!1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"assistProductName",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:[],tableSelectList:[]}},created:function(){var e="";if(null!=this.initData.tableData&&this.initData.tableData.length>0)for(var t=0;t<this.initData.tableData.length;t++){var i=this.initData.tableData[t];null!=i.assistProductId&&i.assistProductId.trim().length>0&&(e=e+i.assistProductId+",")}var a="",o=!0;null!=this.initData.isNeedRepeat&&(o=this.initData.isNeedRepeat),o||null!=e&&e.trim().length>0&&(e=e.substring(0,e.lastIndexOf(",")),a=e=this.findQueryIds(e));var n="null";null!=this.initData.supplierId&&this.initData.supplierId.trim().length>0&&(n=this.initData.supplierId.trim()),this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,{notInAssistProductIds:a,supplierId:n,orderStr:"assistProd.cdate asc"})},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){var e="1200px";return null!=this.initData.width&&(e=this.initData.width),e},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{selectList:this.tableSelectList,pageName:"selectAssistProductBySupplier"})},closeDialog:function(e){},tableSelected:function(e){this.tableSelectList=e},findQueryIds:function(e){var t="";if(null==e||0==e.trim().length)return t;var i=e.split(",");if(null!=i&&i.length>0)for(var a=i.length,o=0;o<i.length;o++){var n="'"+i[o]+"'";o<a-1?t=t+n+",":o==a-1&&(t+=n)}return t},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},confrim:function(){this.$refs.trabsferTables.getTableSelected(),this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()}}}),l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"选择货品",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{height:"100%"}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"外协件："}},[i("el-input",{attrs:{placeholder:"名称或编码"},model:{value:e.tempQuery.assistProductName,callback:function(t){e.$set(e.tempQuery,"assistProductName",t)},expression:"tempQuery.assistProductName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"工艺名称："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.craftName,callback:function(t){e.$set(e.tempQuery,"craftName",t)},expression:"tempQuery.craftName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:e.queryTable}})],1),e._v(" "),i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:e.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);s.options.__file="selectAssistProductBySupplier.vue";t.default=s.exports},G9HT:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d"),i("91GP"),i("pIFo");var a=i("uTIz"),o=i("varj"),n=i("K3g7");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customTransferTable:o.a,searchBar:a.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},resState:"",dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},isConfirm:!1,btnList:[{name:"确定",isShow:!0,state:!0,method:this.toDialogAdd},{name:"取消",state:!1,method:this.closeWin,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageProducts",params:{fieldCode:"code,name,spec,unitName,genreName,productStockCount,cdate",notInProductIds:"",isdisable:"1",isNeedWarehouseProduct:"true",warehouseId:"",orderStr:"prod.cdate desc"}},customColumn:[],tempData:{count:100,defaultDate:"2019-01-21"},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[],tempData:{count:100,defaultDate:"2019-01-21"},showIndex:!0,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:["remark"],tableSelectList:[],tempList:[]}},created:function(){var e="";if(null!=this.initData.data&&this.initData.data.length>0)for(var t=0;t<this.initData.data.length;t++){var i=this.initData.data[t];null!=i.productId&&i.productId.trim().length>0&&(e=e+i.productId+",")}var a=!0;null!=this.initData.isNeedRepeat&&(a=this.initData.isNeedRepeat),a||null!=e&&e.trim().length>0&&(e="'"+(e=e.substring(0,e.lastIndexOf(","))).replace(",","','")+"'",this.aboveTableConfig.apiObj.params.notInProductIds=e),this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{tableHeight:function(){},dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{isConfirm:this.isConfirm,selectList:this.tempList})},closeDialog:function(e){this.showDialog=!1},tableSelected:function(e){this.tempList=e},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},initTree:function(){var e=this;this.dialogLoading=!0,Object(n.treeWarehouse)({isNeedEntity:"true"}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name},t.push(i),this.treeData=t,this.dialogLoading=!1},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery,{warehouseId:this.selectTree.id})},toDialogAdd:function(){this.$refs.trabsferTables.getTableSelected(),this.isConfirm=!0,this.isVisible=!1}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);c.options.__file="selectProductByEntity.vue";t.default=c.exports},G9cW:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("xfY5"),i("8Vv6");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={name:"dialog-edit",props:["initData","visible"],data:function(){return{currentBalance_before:"",currentBalance:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.totalBalance=Number(this.temp.addBalance)+Number(this.temp.balance)),this.initData.tempLable&&(this.tempLable=this.initData.tempLable),this.currentBalance_before=this.temp.currentBalance,this.currentBalance=this.temp.currentBalance},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=a(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;if(this.currentBalance>this.temp.totalBalance)this.$message({showClose:!0,message:"当前分摊金额不能大于预收款！",duration:5e3});else{var i=this.currentBalance-this.currentBalance_before;t.$refs.submitForm.validate(function(a){a&&(t.isVisible=!1,t.dialogClose({resState:"ok",currentBalance:e.currentBalance,currentBalance_edit:i}))})}}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"预收款:",prop:"totalBalance"}},[i("el-input",{staticStyle:{width:"140px"},attrs:{disabled:!0},model:{value:e.temp.totalBalance,callback:function(t){e.$set(e.temp,"totalBalance",t)},expression:"temp.totalBalance"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"本次分摊金额:",prop:"currentBalance"}},[i("el-input",{staticStyle:{width:"140px"},model:{value:e.currentBalance,callback:function(t){e.currentBalance=e._n(t)},expression:"currentBalance"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);l.options.__file="dialogReceiptBalanceEdit.vue";t.default=l.exports},G9ua:function(e,t,i){},GBqP:function(e,t,i){},GDz4:function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseInDetail",params:{fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,remark",parentId:""}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseInExecute",params:{fieldCode:"warehouseName,count,executeUserName,executeTimeStr",isNeedPage:"false"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){this.tableConfigList[0].apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},databridge:function(e){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseByWC_inByWC_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogView.vue";t.default=n.exports},GYtu:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rGqo");var a=i("mSNy"),o=i("t3Un"),n=i("z0WU");function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" @change="colConfig.changeState(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},r={name:"dialog-option",props:["initData","visible"],data:function(){return{buttonName:"",dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,topBarBtnList:[{name:"查询",icon:"search",method:this.queryTable},{name:"重置",icon:"refresh",plain:!0,method:this.resetQueryTemp}],configs:{tableConfigs:[],showCheckBox:!1,showIndex:!1,isSingle:!1},tableData:[],selectList:[],queryParms:[{name:"pathName"}],tempQuery:{},tempLable:{},pageData:null,pageNo:1}},components:{},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.configs.isSingle=this.initData.isSingle,this.userInfo=this.$storage.get("userInfo"),this.initTable()},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",this.selectList,this.initData.temp,this.buttonName)},queryTable:function(){this.pageNo=1,this.initTable()},initTable:function(){var e=this;e.dialogTopLoading=!0,Object(o.a)({url:e.initData.tableUrl,method:"post",data:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){l(e,t,i[t])})}return e}({},e.initData.tableParm,e.tempQuery,{pageNo:e.pageNo})}).then(function(t){e.dialogTopLoading=!1,e.getListPage(t)}).catch(function(t){e.dialogTopLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!0,this.configs.showIndex=!0,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var o=e[i];o.indexOf("_")>0&&("en"==a.a.locale?o=o.substring(o.indexOf("_")+1):"zh"==a.a.locale&&(o=o.substring(0,o.indexOf("_")))),t.tempLable[i]=o}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==a.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==a.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"是否启用"===e.label&&(e.component=s,e.changeState=t.changeState)}),e},dataBridge:function(e){this.selectList=e},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.pageNo=1,this.initTable()},closeDialogPage:function(){this.isVisible=!1,this.buttonName="close"}},computed:{},watch:{pageNo:function(){this.initTable()}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"900px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"80px"}},[i("el-col",{staticStyle:{"max-width":"260px"},attrs:{span:6}}),e._v(" "),i("el-col",{staticStyle:{"max-width":"260px"},attrs:{span:6}},[i("el-form-item",{attrs:{label:e.tempLable.name}},[i("el-input",{attrs:{placeholder:e.tempLable.name},model:{value:e.tempQuery.pathName,callback:function(t){e.$set(e.tempQuery,"pathName",t)},expression:"tempQuery.pathName"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:e.topBarBtnList[0].name,icon:e.topBarBtnList[0].icon,plain:e.topBarBtnList[0].plain,state:e.topBarBtnList[0].state},on:{myclick:e.topBarBtnList[0].method}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:e.topBarBtnList[1].name,icon:e.topBarBtnList[1].icon,plain:e.topBarBtnList[1].plain,state:e.topBarBtnList[1].state},on:{myclick:e.topBarBtnList[1].method}})],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{"box-sizing":"border-box",padding:"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{position:"relative",height:"60px","text-align":"center","box-sizing":"border-box",padding:"10px 0 0 0"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",disabled:!e.selectList.length},on:{click:function(t){e.isVisible=!1}}},[e._v("确认")]),e._v(" "),i("el-button",{on:{click:e.closeDialogPage}},[e._v("取消")])],1)])])},[],!1,null,null,null);d.options.__file="dialogOption.vue";t.default=d.exports},GjEI:function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,selectList:[],tableConfigList:[{customColumn:[],apiObj:{apiName:"listPagePurchaseSign",params:{fieldCode:"sysCode,supplierName,signUserName,cdate,stateName",orderId:this.initData.temp.id,orderStr:"sign.cdate desc"}},tempData:{},showIndex:!1,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPagePurchaseSignDetail",params:{fieldCode:"prodInfo,orderUnitName,qualityTypeName,price,arriveCount",prodColumnKey:"productCode,productName,productSpec,productProperty",isNeedPage:"false"}},dynamicValue:{parentId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},databridge:function(e){this.selectList=e},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;null!=e.selectList&&e.selectList}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"900px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_orderSign_dialogSignList0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogSignList.vue";t.default=n.exports},Gr86:function(e,t,i){"use strict";i.r(t);i("RW0V"),i("rE2o"),i("ioFf"),i("rGqo"),i("yt8O"),i("XfO3"),i("9AAn");var a=i("OsNz"),o=i("z0WU"),n=i("mSNy");function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{fieldCode:"sysOrderCode,productCode,productName,productSpec,productGenreName,orderUnitName,orderCount,productPrice,sum,remark",fieldCode_by_price:"sysOrderCode,productCode,productName,productSpec,productGenreName,orderUnitName,orderCount,productPrice,sum,sumStateName,remark",parentId:"",isShowSend:!1,isShowDeliver:!1,isShowSelf:!1,deliverTypeKeyNameMap:new Map([["1","send"],["2","deliver"],["3","self"]]),rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],selectList:null,initConfigs:{tableOperates:{}},configs:{tableConfigs:[],showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1}},created:function(){this.temp=this.initData.temp,this.parentId=this.initData.temp.id;var e=this.deliverTypeKeyNameMap.get(this.initData.temp.type);"send"==e?this.isShowSend=!0:"deliver"==e?this.isShowDeliver=!0:"self"==e&&(this.isShowSelf=!0);var t="1";null!=this.initData.temp.priceType&&this.initData.temp.priceType.trim().length>0&&(t=this.initData.temp.priceType.trim()),"2"==t&&(this.fieldCode=this.fieldCode_by_price),this.initTable()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(o.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==n.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==n.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==n.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==n.a.locale&&(e.label=t.substring(0,t.indexOf("_"))))}),this.internationalConfig(),e},internationalConfig:function(){"en"==n.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==n.a.locale&&(this.initConfigs.tableOperates.label="操作")},initTable:function(){var e=this;this.$loading({spinner:"preloader",text:""}),Object(a.listPageSaleDeliverDetail)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){l(e,t,i[t])})}return e}({},this.tempQuery,{fieldCode:this.fieldCode,parentId:this.parentId,pageNo:this.pageNo})).then(function(t){e.getListPage(t),e.$loading().close()}).catch(function(t){e.$loading().close()})},dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},watch:{pageNo:function(){this.initTable("add","")}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发货单编号：",prop:"deliverCode"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.deliverCode,callback:function(t){e.$set(e.temp,"deliverCode",t)},expression:"temp.deliverCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"客户名称：",prop:"customerName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.customerName,callback:function(t){e.$set(e.temp,"customerName",t)},expression:"temp.customerName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"件数：",prop:"pieceCount"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.pieceCount,callback:function(t){e.$set(e.temp,"pieceCount",t)},expression:"temp.pieceCount"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发货类型：",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"经办人：",prop:"makeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发货日期：",prop:"deliverDate"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.deliverDate,callback:function(t){e.$set(e.temp,"deliverDate",t)},expression:"temp.deliverDate"}})],1)],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowSend,expression:"isShowSend"}]},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"物流公司：",prop:"waybillCompany"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.waybillCompany,callback:function(t){e.$set(e.temp,"waybillCompany",t)},expression:"temp.waybillCompany"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"物流单号：",prop:"waybillCode"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.waybillCode,callback:function(t){e.$set(e.temp,"waybillCode",t)},expression:"temp.waybillCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"收货地址：",prop:"custAddress"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.custAddress,callback:function(t){e.$set(e.temp,"custAddress",t)},expression:"temp.custAddress"}})],1)],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowSend,expression:"isShowSend"}]},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"联系人：",prop:"custAddressName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.custAddressName,callback:function(t){e.$set(e.temp,"custAddressName",t)},expression:"temp.custAddressName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"手机号：",prop:"custMobile"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.custMobile,callback:function(t){e.$set(e.temp,"custMobile",t)},expression:"temp.custMobile"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowDeliver,expression:"isShowDeliver"}]},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"车牌号：",prop:"carCode"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.carCode,callback:function(t){e.$set(e.temp,"carCode",t)},expression:"temp.carCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"收货地址：",prop:"custAddress"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.custAddress,callback:function(t){e.$set(e.temp,"custAddress",t)},expression:"temp.custAddress"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"联系人：",prop:"custAddressName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.custAddressName,callback:function(t){e.$set(e.temp,"custAddressName",t)},expression:"temp.custAddressName"}})],1)],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowDeliver,expression:"isShowDeliver"}]},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"手机号：",prop:"custMobile"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.custMobile,callback:function(t){e.$set(e.temp,"custMobile",t)},expression:"temp.custMobile"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}})],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowSelf,expression:"isShowSelf"}]},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"车牌号：",prop:"carCode"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.carCode,callback:function(t){e.$set(e.temp,"carCode",t)},expression:"temp.carCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}})],1),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogDeliverInfo.vue";t.default=d.exports},GxsS:function(e,t,i){},GyfT:function(e,t,i){"use strict";var a=i("yhB7");i.n(a).a},Gyk6:function(e,t,i){},H2KT:function(e,t,i){"use strict";var a=i("WNFT");i.n(a).a},HGsh:function(e,t,i){},HMYo:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("sanI"),l=i("FGWf");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddCustomer:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,price,priceSum,remark",parentId:"null",isNeedPage:"false"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"price",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["单价必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"priceSum",width:"120",componentName:"input",_cellConfig:{compute:"self@priceCount(*)self@price",editable:!1}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>￥ {{data.total.toFixed(2)}}</span></li>\n                    </ul>'},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},data:{total:"0.00"},computes:{total:"table@priceSum"}},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"3"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="销售发货出库",this.temp.type="9459be975cd94ada8443cdf32f52c2be",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={productId:n.productId,price:n.price,remark:n.remark,priceCount:n.priceCount,priceUnit:n.priceUnit,p2nFormula:n.p2nFormula,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.addWarehouseOutByWc)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:"",priceCount:"",remark:"",price:"0.00",priceSum:"0.00"};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_sale_saleOutWC_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogAdd.vue";t.default=d.exports},"HSP/":function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=i("Aybl"),n=i("ubz/"),l=(i("z0WU"),i("Ppn9"),{name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,isreplaceable:null,topBarBtnList:[],tempCount:{count:0},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"planCount",componentName:"input",_cellConfig:{rules:[{required:!0},{greaterThan:["0",!1]},{lessThan:["self@assembledCount",!0]}],message:["该项不能为空！","该项输入必须大于零！","必须小于等于最大可生产数量！"]}}],apiObj:{apiName:"listProdLackNum",params:{dtlJsonStr:this.initData.temp,addColumn:{columnKey:"prodInfo",columnName:"货品"},fieldCode:"prodInfo,unit,planCount,assembledCount"}},temp:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,dragTable:!1,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a,dialogAddProduct2:o.default,dialogAdd:n.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},delete:function(e,t){var i=this,a=this;a.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.deleteData(e)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},useReplaceable:function(e){e?(this.isreplaceable="1",this.tableConfigList[0].apiObj.params={dtlJsonStr:this.initData.temp,fieldCode:"code,name,spec,genre,unit,planCount,assembledCount",isreplaceable:"1"}):(this.isreplaceable="0",this.tableConfigList[0].apiObj.params={dtlJsonStr:this.initData.temp,fieldCode:"code,name,spec,genre,unit,planCount,assembledCount"}),this.updateData()},backStep:function(){this.$emit("close-dialog",{})},nextStep:function(){this.getData(),0!=this.selectList.length&&(this.dialogData.isreplaceable=this.isreplaceable,this.dialogData.temp=JSON.stringify(this.selectList),this.dialogData.tempLable=this.tempLable,this.dialogData.title="新增物料",this.openDialogName="dialogAdd",this.showDialog=!0,this.visibleState=!0)},addProduct:function(){this.dialogData.temp=this.initData.temp,this.dialogData.title="添加产品",this.openDialogName="dialogAddProduct2",this.showDialog=!0,this.visibleState=!0},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&(e.selectList?e.selectList.length>0&&this.pushData(e.selectList):this.dialogClose())},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}}),s=(i("OaOy"),i("E/IF"),i("KHd+")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[e._l(e.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]}),e._v(" "),i("el-checkbox",{staticStyle:{"padding-top":"15px",float:"right"},on:{change:e.useReplaceable}},[e._v("是否使用替代物")])],2),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_produce_materialRequisition_dialogAddFromBom0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.backStep}},[e._v("上一步")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);r.options.__file="dialogAddFromBom.vue";t.default=r.exports},HScr:function(e,t,i){"use strict";var a=i("cSYJ");i.n(a).a},HSjz:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("yt8O"),i("XfO3"),i("9AAn");var a=i("2+ib"),o=i("wMKg"),n={components:{multilevelTable:a.a},props:["initData","visible"],data:function(){return{signDtlId:"",qualityTypeSelect:{},rowData:{},qualityTypeNameMap:new Map([["全检","1"],["抽检","2"]]),tableData:[],tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"qualityTypeName",width:"100",componentName:"select",_cellConfig:{outputData:!0,hideTitle:!0,options:[{id:"全检",label:"全检"},{id:"抽检",label:"抽检"}]}},{columnIndex:"qualityCount",width:"120",componentName:"input",_cellConfig:{disabledState:{key:"qualityTypeValue",value:"1"},rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"},{greaterThan:["0",!1]}],message:["不可为空！","请输入大于零的整数或小数","不可等于零！"]}},{columnIndex:"badCount",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["不可为空！","请输入大于零的整数或小数"]}},{columnIndex:"retreatCount",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["不可为空！","请输入大于零的整数或小数"]}},{columnIndex:"receiveCount",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["不可为空！","请输入大于零的整数或小数"]}}],apiObj:{apiName:"listPagePurchaseSignDetailByQualityExecute",params:{fieldCode:"prodInfo,orderUnitName,qualityTypeName,arriveCount,qualityCount,badCount,retreatCount,receiveCount,",prodColumnKey:"productCode,productName,productSpec,productProperty",signDtlId:""}},tempData:{},showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"badCount",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["不可为空！","请输入大于零的整数或小数"]}}],apiObj:{apiName:"findQualityByPurchaseSignDtl",params:{fieldCode:"qualityName,qualityCriterion,badCount",business:"purchase",isNeedPage:"false",orderStr:"cdate asc"}},dynamicValue:{productId:"self@productId"},tempData:{},showIndex:!1,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!1,isVisible:!1,inDialog:!0}},beforeCreate:function(){},created:function(){this.signDtlId=this.initData.rowData.id,this.tableConfigList[0].apiObj.params.signDtlId=this.initData.rowData.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},getData:function(){this.$refs.customBaseTable.getData()},databridge:function(e){Array.isArray(e)?(this.tableData=[],this.tableData=e):(null!=e.item&&(this.qualityTypeSelect=e.item),null!=e.item&&null!=e.row&&(this.rowData=e.row),this.setQualityTypeValue(this.qualityTypeSelect,this.rowData),this.setQualityCountDefault(this.qualityTypeSelect,this.rowData))},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},closeDialog:function(){},deleteRow:function(e){this.deleteData(e)},setQualityTypeValue:function(e,t){var i=e.id,a=this.qualityTypeNameMap.get(i);t.qualityTypeValue=a},setQualityCountDefault:function(e,t){var i=e.id,a=this.qualityTypeNameMap.get(i);"1"==a?t.qualityCount=t.arriveCount:"2"==a&&(t.qualityCount="0.00")},findSumBadCount:function(e){var t=0;if(null!=e&&e.length>0)for(var i=0;i<e.length;i++){t+=e[i].badCount/1}return t},findMinimumBadCount:function(e){var t=0;if(null!=e&&e.length>0)for(var i=0;i<e.length;i++){var a=e[i].badCount/1;a>0&&0==t?t=a:a>0&&a<t&&(t=a)}return t},checkColumnByFirst:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.qualityTypeValue,n=a.arriveCount,l=a.qualityCount;"1"==o&&l/1-n/1!=0?t+="检验方式(全检) 实检数必须与签收数相等！":"2"==o&&l/1-n/1>0&&(t+="检验方式(抽检) 实检数不可大于签收数！");var s=a.badCount/1;a.retreatCount/1+a.receiveCount/1-s!=0&&(t+="不合格数必须等于(退货数+让步接收)！")}return t},checkColumnBySecond_1:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.qualityCount,n=a.children;if(null!=n&&n.length>0)for(var l=0;l<n.length;l++){n[l].badCount/1>o&&(t+="检验不合格不可大于实检数！")}}return t},checkColumnBySecond_2:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.badCount/1,n=a.children;if(null!=n&&n.length>0)for(var l=0;l<n.length;l++){n[l].badCount/1>o&&(t+="检验不合格不可大于不合格数！")}if(null!=n&&n.length>0){var s=this.findSumBadCount(n);if(s>0){var r=this.findMinimumBadCount(n);o<r&&(t=t+"不合格数不可小于"+r+"！")}o>s&&(t+="不合格数不可大于检验不合格总和！")}}return t},findJsonStringByTable:function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i],o="全检";null!=a.qualityTypeName&&null!=a.qualityTypeName.item&&null!=a.qualityTypeName.item.id?o=a.qualityTypeName.item.id:null!=a.qualityTypeName&&a.qualityTypeName.trim().length>0&&(o=a.qualityTypeName.trim());for(var n=this.qualityTypeNameMap.get(o),l={id:a.id,qualityType:n,arriveCount:a.arriveCount,qualityCount:a.qualityCount,badCount:a.badCount,retreatCount:a.retreatCount,receiveCount:a.receiveCount,parentId:a.parentId,productId:a.productId,p2nFormula:a.p2nFormula,p2nIsScale:a.p2nIsScale,p2nDecimalCount:a.p2nDecimalCount,signCode:a.signCode,orderId:a.orderId,orderDtlId:a.orderDetailId,price:a.price,orderUnit:a.orderUnit,supplierId:a.supplierId,supplierName:a.supplierName,children:""},s=[],r=a.children,c=0;c<r.length;c++){var d=r[c],u={signDetailId:a.id,productId:a.productId,orderUnit:a.orderUnit,qualityId:d.id,badCount:d.badCount};s.push(u)}l.children=s,t.push(l)}return JSON.stringify(t)},save:function(){this.getData(),null!=this.tableData&&this.tableData.length>0&&this.addWarehouseInExecute(this.tableData)},addWarehouseInExecute:function(e){var t=this,i=this.checkColumnByFirst(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else if(null!=(i=this.checkColumnBySecond_1(e))&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else if(null!=(i=this.checkColumnBySecond_2(e))&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{var a=this.findJsonStringByTable(e);this.dialogLoading=!0,Object(o.purchaseSignDetailByQualityExecute)({roleId:this.$storage.get("userInfo").roleIds,jsonStr:a}).then(function(e){0===e.code&&(t.dialogLoading=!1,t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_quality_purchaseSignByQuality_dialogExecute0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogExecute.vue";t.default=s.exports},HeP5:function(e,t,i){"use strict";i.r(t);i("Oyvg");var a=i("9wPf"),o={components:{},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{amount:[{required:!0,trigger:"change",validator:function(t,i,a){e.isNumberByValue(i)?(0==i&&a(new Error("请输入大于零的正整数或(1,2)位小数！")),a()):a(new Error("请输入大于零的正整数或(1,2)位小数！"))}}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{signId:"",sysCode:"",supplierId:"",supplierCode:"",supplierName:"",amount:"",remark:""},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.formData.signId=this.initData.rowData.id,this.formData.supplierId=this.initData.rowData.supplierId,this.formData.supplierCode=this.initData.rowData.supplierCode,this.formData.supplierName=this.initData.rowData.supplierName,this.formData.sysCode=this.initData.rowData.sysCode},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addFinanceBillByPurchase)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"供应商名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"金额:",prop:"amount"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="addFinanceBillByPurchase.vue";t.default=l.exports},HevR:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={components:{treeFormTable:i("7cmB").a},name:"dialog-add",props:["initData","visible"],data:function(){return{rootData:{},tableSets:{1:{showCheckBox:!1,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},currentpage:1,customColumn:{},editable:{suggestCount:{}},apiObj:{apiName:"findListWarehouseInExecuteByEdit",params:{firstFieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,executeCount,surplusCount,code,warehouseName",secondFieldCode:"",queryStr:"",pageNo:1}},addedData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",temp:{},tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{}}},created:function(){this.temp=this.initData.temp,this.initData.temp.id&&(this.apiObj.params.queryStr="a.parent_id = '"+this.initData.temp.id+"'")},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=a(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},sendChildrenRow:function(e){},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},formData:function(e){},closeDialog:function(e,t){}},watch:{pageNo:function(){this.initTable()}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px",top:"50px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{padding:"0 20px","font-size":"16px","font-weight":"600"}},[i("el-col",{attrs:{span:8}},[i("span",[e._v("入库单号: "+e._s(e.temp.code))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("来源单位: "+e._s(e.temp.deptName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("入库类型: "+e._s(e.temp.typeName))])])],1),e._v(" "),i("el-row",{staticStyle:{padding:"0 20px",margin:"10px 0","font-size":"16px","font-weight":"600"}},[i("el-col",{attrs:{span:8}},[i("span",[e._v("仓库 : "+e._s(e.temp.warehouseName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("制单人 : "+e._s(e.temp.makeName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("制单时间 : "+e._s(e.temp.cdate))])])],1),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("tree-form-table",{ref:"treeFormTable",attrs:{"expand-all":!0,initData:e.rootData,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:e.editable,apiObj:e.apiObj,addedData:e.addedData},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,"send-children-row":e.sendChildrenRow,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogAllRecords.vue";t.default=l.exports},Hgzq:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("91GP"),i("pIFo");var a=i("f/WR"),o=i("uTIz");i("R1DK");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{transferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{isConfirm:!1,tempLable:{},rules:{},guid:"",tempQuery:{},searchList:[{label:"货品编码",type:"input",ruleType:"string",mapKey:"code",configs:{},placeholder:"请输入货品编码"},{label:"货品名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"请输入货品名称"},{label:"规格型号",type:"input",ruleType:"string",mapKey:"spec",configs:{},placeholder:"请输入规格型号"},{label:"计量单位",type:"input",ruleType:"string",mapKey:"unitName",configs:{},placeholder:"请输入计量单位"}],searchConfig:{hideSearchSwitch:!1},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},pageData:null,pageNo:1,btnList:[{name:"确定",isShow:!0,state:!0,method:this.toAddWarehouseIn},{name:"取消",state:!1,method:this.closeWin,isShow:!0}],apiData:{apiName:"findListProductByWarehouseVirtual",params:{fieldCode:"productCode,productName,productSpec,productUnitName,productGenreName,stockCount",notInProductIds:"",deptId:"",deptPlaceKey:""}},tableSelectList:[],stateBtnData:{},tableConfigs:{showIndex:!0},tempList:[]}},created:function(){var e="";if(null!=this.initData.data&&this.initData.data.length>0)for(var t=0;t<this.initData.data.length;t++){var i=this.initData.data[t];null!=i.productId&&i.productId.trim().length>0&&(e=e+i.productId+",")}var a=!0;null!=this.initData.isNeedRepeat&&(a=this.initData.isNeedRepeat),a||null!=e&&e.trim().length>0&&(e="'"+(e=e.substring(0,e.lastIndexOf(","))).replace(",","','")+"'",this.apiData.params.notInProductIds=e),this.apiData.params.deptId=this.$storage.get("userInfo").deptId,this.apiData.params.deptPlaceKey="a42f32ef9d39476e932e1e30b77fefbb"},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{tableHeight:function(){},dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.apiData.params=Object.assign({},e),this.apiData.params.fieldCode=this.fieldCode},dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{pageName:"selectProductByVirtual",isConfirm:this.isConfirm,selectList:this.tempList})},toAddWarehouseIn:function(){this.isConfirm=!0,this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},tableSelected:function(e){this.tempList=e},closeDialog:function(e){this.showDialog=!1}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{width:"100%"}},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,searchConfig:e.searchConfig},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{staticStyle:{height:"500px"},style:{"margin-top":e.searchList.length?"10px":"0"}},[i("transfer-table",{ref:"trabsferTables",attrs:{tableConfigs:e.tableConfigs,btnList:e.btnList,stateBtn:e.stateBtnData,apiData:e.apiData},on:{"table-selected":e.tableSelected}})],1)],1)],1)},[],!1,null,null,null);r.options.__file="selectProductByVirtual.vue";t.default=r.exports},Hhy1:function(e,t,i){"use strict";i.r(t);i("91GP");var a=i("WIyV"),o=i("Ig0I"),n=i("9wPf"),l={components:{customBaseTable:a.a,editFinanceBillByPurchase:o.default},props:["initData","visible"],data:function(){return{signDtlId:"",rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPagePurchaseByFinanceBill",params:{fieldCode:"code,customerName,typeName,amount,stateName,cuserName,cdate",businessId:"",billType:"13",orderStr:"bill.cdate asc"}},customColumn:[{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",width:"160",component:[{name:"提交",nameEn:"submitByParent",rowState:"#self@state#===0",editBtns_isShow:!0,method:this.submitByParent},{name:"撤回",nameEn:"rebackSubmitByParent",rowState:"#self@state#===1",editBtns_isShow:!0,method:this.rebackSubmitByParent},{name:"编辑",nameEn:"editByParent",rowState:"#self@state#===0",editBtns_isShow:!0,method:this.editByParent},{name:"删除",nameEn:"deleteByParent",rowState:"#self@state#===-1",editBtns_isShow:!0,method:this.deleteByParent},{name:"取消",nameEn:"cancelByParent",rowState:"#self@state#===0",editBtns_isShow:!0,method:this.cancelByParent},{name:"恢复",nameEn:"rebackCancelByParent",rowState:"#self@state#===-1",editBtns_isShow:!0,method:this.rebackCancelByParent}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.apiObj.params.businessId=this.initData.rowData.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},refreshPage:function(){this.apiObj.params=Object.assign({},this.apiObj.params)},closeDialog:function(e){this.showDialog=!1,this.inLinVisible=!1,"ok"===e.resState&&this.refreshPage()},editByParent:function(e){this.dialogData.rowData=JSON.parse(JSON.stringify(e)),this.dialogData.title="编辑",this.openDialogName="editFinanceBillByPurchase",this.showDialog=!0,this.inLinVisible=!0},submitByParent:function(e){var t=this;this.$confirm("此操作将此记录提交审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.submitFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消提交"})})},rebackSubmitByParent:function(e){var t=this;this.$confirm("此操作将此记录状态变更为待提交, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.rebackSubmitFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消撤回"})})},deleteByParent:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.deleteFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},cancelByParent:function(e){var t=this;this.$confirm("此操作将将此记录取消, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.cancelFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},rebackCancelByParent:function(e){var t=this;this.$confirm("此操作将此记录状态变更为待提交, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.rebackCancelFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size}},watch:{}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"purchaseSignDtlQualityByInfo",attrs:{"data-custom-table-id":"views_quality_assistQuality_assistRetreatProductByQuality_dialogListFinanceBill0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!1,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"purchaseSignDtlQualityByInfo",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogListFinanceBill.vue";t.default=r.exports},HltP:function(e,t,i){"use strict";i.r(t);i("Oyvg");var a=i("WIyV"),o=i("CK78"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,orderCount,productPrice,productSum,notInvoiceCount,count,nowInvoiceSum",receiptType:2,productUnit:{},rowData:{},rules:{},openDialogName:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],rowTableList:[],configs:{tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageOrderDetailByInvoice",params:{pageNo:1,fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,orderCount,productPrice,productSum,notInvoiceCount,count,nowInvoiceSum",parentId:""}},customColumn:[{columnIndex:"count",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"},{lessThan:["self@notInvoiceCount",!0]}],message:["请输入大于零的正整数或(1,2)位小数！","必须小于等于未开发票数量！"]}},{columnIndex:"nowInvoiceSum",componentName:"input",_cellConfig:{hideTitle:!0,editable:!1,compute:"self@count(*)self@productPrice"}}],mergeTitle:[],mergeColumn:[],mergeRow:[]}},beforeCreate:function(){},created:function(){this.temp=this.initData.temp,null!=this.initData.temp.id&&this.initData.temp.id.trim().length>0&&(this.apiObj.params.parentId=this.initData.temp.id.trim()),this.apiObj.params.fieldCode=this.fieldCode},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){if(Array.isArray(e)){if(this.rowTableList=[],this.rowTableList=e,null==this.rowTableList||0==this.rowTableList.length)return void this.$message({type:"warning",duration:5e3,showClose:!0,message:"无开票明细！"});this.saveSaleOrder(this.rowTableList)}},save:function(){this.$refs.orderAddByInvoiceDialog.getData()},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+\\.{0,1}[0-9]{0,2}$").test(e.trim())},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.notInvoiceCount,n=a.count;null==n||0==n.trim().length?t=t+"第 "+(i+1)+" 行: 开票数量为空或空字符串！":null!=n&&n.trim().length>0&&!this.isNumberByValue(n.trim())&&(t=t+"第 "+(i+1)+" 行: 开票数量("+n+") 输入错误，请输入大于零的正整数或(1,2)位小数！"),n-o>0&&(t=t+"第 "+(i+1)+" 行: 开票数量("+n+") 输入错误，开票数量不可大于未开票数量！")}return t},saveSaleOrder:function(e){var t=this,i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{for(var a=[],n=0;n<e.length;n++){var l=e[n];l.orderCount=l.count,a.push(l)}this.temp.dtlJsonStr="",null!=a&&a.length>0&&(this.temp.dtlJsonStr=JSON.stringify(a)),this.temp.receiptType=this.receiptType,this.dialogLoading=!0,Object(o.addSaleInvoice)(this.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{margin:"10px 50px"}},[i("el-radio-group",{model:{value:e.receiptType,callback:function(t){e.receiptType=t},expression:"receiptType"}},[i("el-radio",{attrs:{label:2}},[e._v("增值税普通发票")]),e._v(" "),i("el-radio",{attrs:{label:3}},[e._v("增值税专用发票")])],1)],1),e._v(" "),i("div",{staticStyle:{"padding-left":"50px"}},[i("p",[i("a",[e._v("名称:")]),e._v(e._s(e.temp.custInvoiceCompanyName))]),e._v(" "),i("p",[i("a",[e._v("税号:")]),e._v(e._s(e.temp.custInvoiceNumber))]),e._v(" "),i("p",[i("a",[e._v("地址:")]),e._v(e._s(e.temp.custInvoiceAddress))]),e._v(" "),i("p",[i("a",[e._v("电话:")]),e._v(e._s(e.temp.custInvoiceMobile))]),e._v(" "),i("p",[i("a",[e._v("开户银行:")]),e._v(e._s(e.temp.custInvoiceBankName))]),e._v(" "),i("p",[i("a",[e._v("账号:")]),e._v(e._s(e.temp.custInvoiceBankCode))])]),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddByInvoiceDialog",attrs:{"data-custom-table-id":"views_sale_invoice_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddByInvoiceDialog",useDefaultBtn:!0,showAll:!1},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},HmqJ:function(e,t,i){"use strict";var a=i("a4AW");i.n(a).a},Hzpf:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("sanI"),l=i("Qe0A"),s=i("a0Xs");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddCustomer:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageForAddFromBOM",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",dtlJsonStr:this.initData.temp}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isOnlyEntity:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"3"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="销售发货出库",this.temp.type="9459be975cd94ada8443cdf32f52c2be",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(s.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={productId:n.productId,priceCount:n.priceCount,priceUnit:n.priceUnit,p2nFormula:n.p2nFormula,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount,remark:n.remark};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.addWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_sale_saleOut_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogAdd.vue";t.default=u.exports},I9r8:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("sNnr");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{orderId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){this.orderId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.rebackPurchaseOrder)({id:e.initData.temp.id,remark:e.temp.remark}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogRebackBill.vue";t.default=s.exports},ICOL:function(e,t,i){"use strict";var a=i("IK4Z");i.n(a).a},IIYD:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg"),i("rGqo");var a=i("uTIz"),o=i("2+ib"),n=i("spKr");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{searchBar:a.a,multilevelTable:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{retreatId:"",supplierId:"",supplierName:"",totalSum:"",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",table_style:"",orderId:"",orderDtlIds:"",supplierId:"",supplierName:""},rowTableList:[],tableConfigList:[{customColumn:[{columnIndex:"state",width:"140",componentName:"tag",_cellConfig:{success:{state:"3",text:"已完成"},default:{state:"1",text:"待审核"},info2:{state:"2",text:"待退货"},info3:{state:"3",text:"已完成"},info:{state:"-1",text:"已取消"}}}],apiObj:{apiName:"listPageRetreat",params:{id:"",fieldCode:"sysCode,supplierName,typeName,cdate,remark,state"}},tempData:{},showHeader:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"state",width:"140",componentName:"tag",_cellConfig:{success:{state:"3",text:"已完成"},default:{state:"1",text:"待审核"},info2:{state:"2",text:"待退货"},info3:{state:"3",text:"已完成"},info:{state:"-1",text:"已取消"}}}],apiObj:{apiName:"listPageRetreatDetail",params:{fieldCode:"prodInfo,unitName,count,price,amount,remark",prodColumnKey:"productCode,productName,productSpec,productProperty",isNeedPage:"false"}},dynamicValue:{parentId:"self@id"},tempData:{},isSingle:!1,componentId:"twoLevelTable",useSummary:!0,customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 50%" class="inputStyle">\n                      <span>退货总额：</span>\n                      <span>\n                        <el-form inline inline-message :model="data" ref="numberValidateForm" label-width="0">\n                          <el-form-item prop="realityTotal">\n                            <el-input v-model="data.realityTotal" size="mini" :readonly="true"></el-input>\n                          </el-form-item>\n                        </el-form>\n                      </span>\n                    </li>\n                    </ul>'},data:{realityTotal:""},boxStyle:{width:"500px",float:"left",padding:"10px"},computes:{realityTotal:"table@amount"}}}]}},created:function(){this.retreatId=this.initData.retreatId,this.supplierId=this.initData.supplierId,this.supplierName=this.initData.supplierName,null!=this.initData.totalSum&&(this.totalSum=this.initData.totalSum+""),this.tableConfigList[0].apiObj.params.id=this.retreatId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){},findChildrenList:function(e){var t=[];return null!=e&&null!=e[0].children&&e[0].children.length>0&&e[0].children.forEach(function(e){t.push(e)}),t},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+\\.{0,1}[0-9]{0,2}$").test(e.trim())},checkNumber:function(e,t){var i="";return null==e||0==e.trim().length?i=t+"输入为空或空字符串！":null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&(i=t+"("+e+") 输入错误，请输入大于零的正整数或(1,2)位小数！"),i},save:function(){if(this.$refs.AuditPassDialog.getData(),null!=this.rowTableList&&this.rowTableList.length>0){var e=this.findChildrenList(this.rowTableList);this.auditPass(e)}},auditPass:function(e){var t=this,i=this.tableConfigList[1].customSummary.data.realityTotal;i+="";var a=this.checkNumber(i,"退货总额");if(null!=a&&a.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:a});else{if(null!=this.totalSum&&this.totalSum.trim().length>0&&this.totalSum.trim(),i-this.totalSum>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:"退货总额("+i+") 不可大于退货明细总金额"});else if(null!=e&&0!=e.length){var o=[];e.forEach(function(e){var t={id:e.id,orderDetailId:e.orderDetailId,count:e.count,price:e.price,productId:e.productId,productGenre:e.productGenre,planDtlId:e.planDtlId,planId:e.planParentId,unitName:e.unitName,p2nFormula:e.p2nFormula};o.push(t)});var l="";null!=o&&o.length>0&&(l=JSON.stringify(o)),Object(n.auditPassPurchaseRetreat)({retreatId:this.retreatId,supplierId:this.supplierId,supplierName:this.supplierName,roleId:this.$storage.get("userInfo").roleIds,realityTotal:i,dtlJsonStr:l}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"无退货单明细数据！"})}}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"AuditPassDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseRetreat_auditRetreatByPurchase_dialogAuditPassByPrice0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("通过")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAuditPassByPrice.vue";t.default=c.exports},IK4Z:function(e,t,i){},IMzh:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("c5eW");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{initialPeriodDate:null,paymentPeriodDate:null,rules:{invoiceCode:[{required:!0,message:"请填写发票号码！",trigger:"change"}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.initData.temp&&(this.formData=this.initData.temp)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.openFinanceInvoice)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"发票号码:",prop:"invoiceCode"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"text"},model:{value:e.formData.invoiceCode,callback:function(t){e.$set(e.formData,"invoiceCode",t)},expression:"formData.invoiceCode"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEditInvoiceCode.vue";t.default=s.exports},IQoZ:function(e,t,i){},IROo:function(e,t,i){"use strict";i.r(t);var a=i("WIyV"),o=i("mbVW"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",supplierId:"",isAutoCommit:"",dtlJsonStr:""},tableData:[],editData:[],apiObj:{apiName:"listPageAssistDiscardDetailEditByProduct",params:{fieldCode:"prodInfo,orderUnitName,deliverCount,retreatCount,discardCount,maxDiscardCount,orderCount",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:""}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"orderCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{lessThan:["self@maxDiscardCount",!0]}],message:["请输入大于零的正整数或(1,2)位小数！","不可大于最大报废数！"]}}]}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.formData.id=e.id,this.formData.supplierId=e.supplierId,this.apiObj.params.parentId=e.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.editData=[],this.editData=e)},getData:function(){this.$refs.customBaseTable.getData()},save:function(){this.editData=[],this.getData(),this.saveSaleOrder(this.editData)},saveSaleOrder:function(e){for(var t=this,i=[],a=0;a<e.length;a++){var n=e[a],l={orderId:n.orderId,orderDtlId:n.orderDtlId,deliverDtlChildId:n.deliverDtlChildId,deliverDtlId:n.deliverDtlId,deliverId:n.deliverId,productId:n.productId,orderUnit:n.orderUnit,orderCount:n.orderCount};i.push(l)}this.formData.dtlJsonStr="",null!=i&&i.length>0&&(this.formData.dtlJsonStr=JSON.stringify(i)),this.$confirm("是否将该报废单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.formData.isAutoCommit="true",Object(o.updateAssistDiscard)(t.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.formData.isAutoCommit="false",Object(o.updateAssistDiscard)(t.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistDiscard_listAssistDiscard_dialogEdit0",varList:e.tableData,showIndex:!1,showTableSet:!1,showCheckBox:!1,useDefaultBtn:!0,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},IUtr:function(e,t,i){"use strict";var a=i("gJvL");i.n(a).a},IWCP:function(e,t,i){"use strict";i.r(t);i("f3/d"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("t3Un")),l=i("HhAy"),s={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageProducts",params:{fieldCode:"prodInfo,unitName,genreName,remark",prodColumnKey:"code,name,spec,property",isNeedNotInGenreSpare:"true",notInProductIds:"'"+this.initData.selectTree.id+"'"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[{columnIndex:5,prop:"ratio",label:"用料比例",componentName:"input",width:120,_cellConfig:{rules:[{regexp:/\d/g},{greaterThan:["0",!1]}],message:["必须为数字！","必须大于零！"]}}],hideColumns:["remark"],tableSelectList:[]}},created:function(){this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{tableSelectList:this.tableSelectList})},closeDialog:function(e){this.showDialog=!1},tableSelected:function(e){this.tableSelectList=e,this.save(e)},save:function(e){var t=this,i=[];if(e&&e.length>0){for(var a=0;a<e.length;a++){var o={prodId:"",ratio:"",bomId:"",parentProdId:"",pathId:"",bomTreeId:"",layer:""};if(o.prodId=e[a].id,!e[a].ratio)return void this.$message({type:"error",message:"请输入用料比例！"});o.ratio=e[a].ratio,o.bomId=this.initData.selectTree.bomId,o.parentProdId=this.initData.selectTree.id,o.pathId=this.initData.selectTree.pathId,o.bomTreeId=this.initData.selectTree.bomTreeId,o.layer=this.initData.selectTree.layer,i.push(o)}var n=JSON.stringify(i);t.dialogLoading=!0,Object(l.addBomTrees)({dtlJsonStr:n}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}},confrim:function(){this.$refs.trabsferTables.getTableSelected()},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},initTree:function(){var e=this;e.dialogLoading=!0,Object(n.a)({url:"/system/dictionary/treeDictionarys",method:"post",data:{dictionaryKey:"productGenre",isNotNeedName:"true",nameValue:"备件"}}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name},t.push(i),this.treeData=t,this.dialogLoading=!1},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.tempQuery.pid=this.selectTree.id,this.tempQuery.layer=this.selectTree.layer,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogMutiAdd.vue";t.default=c.exports},IWb6:function(e,t,i){"use strict";var a=i("V5zP");i.n(a).a},IbCE:function(e,t,i){"use strict";i("f3/d"),i("rGqo");var a=i("33YK"),o=i("V6E3"),n={data:function(){return{tempList:[],menuList:[{},{},{},{},{},{}],menuIndex:null,userInfo:null}},components:{Drag:a.Drag,Drop:a.Drop},beforeCreate:function(){},created:function(){var e=this;e.userInfo=e.$storage.get("userInfo"),e.$axios.all([Object(o.getusermenu)(e.userInfo.userId),Object(o.listRoleMeunAll)({userType:e.userInfo.userType,roleIds:e.userInfo.roleIds})]).then(e.$axios.spread(function(t,i){var a=[];t.result.varList.length&&t.result.varList.forEach(function(t){e.menuList.splice(t.serialNumber,1,t)}),e.$store.commit("SET_USERMENU",e.menuList),e.filterMenuList(i.result).forEach(function(e){t.result.varList.some(function(t){return t.id===e.id})||a.push(e)}),e.tempList=a,e.$loading().close()})).catch(function(t){e.$loading().close()})},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},methods:{httpGetuserMenu:function(){var e=this;Object(o.getusermenu)().then(function(t){t.result.varList.forEach(function(t,i){e.menuList.splice(i,1,t)}),e.$loading().close()}).catch(function(e){})},httpListRoleMeunAll:function(e){var t=this;Object(o.listRoleMeunAll)(e).then(function(e){t.$loading().close()}).catch(function(e){})},handleDrop:function(e,t,i){var a=t.list;"menuList"===t.example&&a&&(e.push(t.item),a.splice(this.menuIndex,1,{}))},settingDrop:function(e,t,i){var a=t.list;if("menuList"===t.example){var o=i.target.parentElement.dataset.index||"";if(this.menuIndex+""&&o){var n=e[o];e.splice(o,1,t.item),e.splice(this.menuIndex,1,n)}}else if("tempList"===t.example){var l=i.target.parentElement.dataset,s=l.index||"";s&&!l.id&&(e.splice(s,1,t.item),a.splice(a.indexOf(t.item),1))}},changeDrop:function(e,t,i){if("tempList"===t.example){var a=t.list;if(a){var o=i.target.parentElement.dataset,n={icon:o.icon,path:o.path,name:o.name,id:o.id};this.changeList(n.id,e,a,t)}}},dragenterE:function(e,t,i){i.target.style.backgroundColor="#1664D5",t.example},dragleaveE:function(e,t,i){i.target.style.backgroundColor="#169BD5",t.example},dragstartE:function(e,t,i){if("menuList"===t.example){var a=i.target.parentElement.dataset.index||"";a&&(this.menuIndex=a-0)}},changeList:function(e,t,i,a){var o=t.filter(function(t){if(t.id===e)return t});t.splice(t.indexOf(o[0]),1,a.item),i.splice(i.indexOf(a.item),1,o[0])},saveMenu:function(){var e=this,t=[];e.menuList.forEach(function(i,a){var o=!1;for(var n in i)o=!0;o&&(i.serialNumber=a,i.userId=e.userInfo.userId,t.push(i))}),Object(o.saveusermenu)(t).then(function(t){e.$loading().close(),e.$store.commit("SET_USERMENU",e.menuList),e.$router.push({path:"/home/index"})}).catch(function(e){})},filterMenuList:function(e){var t=[];if(Array.isArray(e))return e.forEach(function(e){!t.some(function(t){return e.id===t.id})&&e.url&&t.push(e)}),t}},computed:{menuListState:function(){return this.menuList.some(function(e){return!!e.id})}},watch:{}},l=(i("1HNo"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"customHomePage"},[i("div",{staticClass:"saveView"},[i("button",{staticClass:"el-button el-button--primary",class:e.menuListState?"":"is-disabled",attrs:{disabled:!e.menuListState,type:"button"},on:{click:e.saveMenu}},[i("svg-icon",{attrs:{"icon-class":"save"}}),e._v(" "),i("span",[e._v("保存")])],1)]),e._v(" "),i("div",{staticClass:"menuBoxView"},[i("h3",[e._v("常用功能（最多显示6个模块）")]),e._v(" "),i("div",{staticClass:"menuBox"},[i("div",{key:"0",staticClass:"menulist"},e._l(e.menuList,function(t,a){return i("drop",{staticClass:"drop menu",attrs:{"data-index":a},on:{drop:function(t){for(var i=arguments.length,a=Array(i);i--;)a[i]=arguments[i];e.settingDrop.apply(void 0,[e.menuList].concat(a,[t]))}}},[t.id?i("drag",{key:t.id,staticClass:"drag",class:(o={},o[t]=!0,o),attrs:{"data-id":t.id,"data-name":t.name,"data-icon":t.url,"data-path":t.url,"data-index":a,"transfer-data":{item:t,list:e.menuList,example:"menuList"}},on:{dragstart:function(t){for(var i=arguments.length,a=Array(i);i--;)a[i]=arguments[i];e.dragstartE.apply(void 0,[e.menuList].concat(a,[t]))}}},[i("drop",{staticStyle:{height:"100%","line-height":"45px",overflow:"hidden"},on:{drop:function(t){for(var i=arguments.length,a=Array(i);i--;)a[i]=arguments[i];e.changeDrop.apply(void 0,[e.menuList].concat(a,[t]))},dragleave:function(t){for(var i=arguments.length,a=Array(i);i--;)a[i]=arguments[i];e.dragleaveE.apply(void 0,[e.menuList].concat(a,[t]))},dragenter:function(t){for(var i=arguments.length,a=Array(i);i--;)a[i]=arguments[i];e.dragenterE.apply(void 0,[e.menuList].concat(a,[t]))}}},[e._v(e._s(t.name))])],1):i("div",{staticStyle:{"text-align":"center",height:"100%","line-height":"45px",border:"1px dashed #E4E4E4"}},[e._v("功能模块")])],1);var o}),1)])]),e._v(" "),i("div",{staticStyle:{height:"50px","line-height":"50px","text-align":"center"}},[e._v("请拖动下方功能模块至常用功能区")]),e._v(" "),i("div",{staticClass:"menuSelectView"},[i("div",{key:"1",staticClass:"menulist"},[i("drop",{staticClass:"drop tempMenuList",on:{drop:function(t){for(var i=arguments.length,a=Array(i);i--;)a[i]=arguments[i];e.handleDrop.apply(void 0,[e.tempList].concat(a,[t]))}}},e._l(e.tempList,function(t){return i("drag",{key:t.id,staticClass:"drag",class:(a={},a[t]=!0,a),attrs:{"transfer-data":{item:t,list:e.tempList,example:"tempList"}}},[e._v("\n\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t")]);var a}),1)],1)])])},[],!1,null,null,null);s.options.__file="index.vue";t.a=s.exports},IbvJ:function(e,t,i){"use strict";i.r(t);i("f3/d"),i("Oyvg");var a=i("9I58"),o=i("WIyV"),n=i("sanI"),l=i("8Vv6"),s=(i("rwyD"),i("aZSg")),r=i("a0Xs"),c={components:{customBaseTable:o.a,dialogAddCustomer:n.default,selectProductBySaleOrder:a.default},props:["initData","visible"],data:function(){var e=this;return{productUnit:{},rowData:{},rules:{customerName:[{required:!0,message:"请选择客户名称",trigger:"change"}],receiptTypeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.temp.receiptType.length<=0?a(new Error("请选择发票类型")):a()}}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}],orderDate:[{required:!0,message:"请填写下单日期",trigger:"change"}],expectDate:[{required:!0,message:"请填写约定交期",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{customerId:"",customerName:"",receiptType:"",receiptTypeName:"",orderDate:new Date,expectDate:new Date,makeId:"",makeName:"",remark:"",dtlJsonStr:"",isAutoCommit:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择客户名称",width:"500px",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"df7cb67fca4148bc9632c908e4a7fdea",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}},apiObj:{apiName:"listPageSaleOrderDetail",params:{fieldCode:"prodInfo,orderUnitName,orderCount,productPrice,productSum,stockCountByPrice,productStockCountByPrice,deliverDate,remark",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:""}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"orderUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"orderCount",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"productPrice",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,4})?$"}],message:["请输入大于零的正整数或(1,4)位小数！"]}},{columnIndex:"productSum",width:"120",componentName:"input",_cellConfig:{hideTitle:!0,compute:"self@orderCount(*)self@productPrice"}},{columnIndex:"deliverDate",width:"180",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",lessThan:["tempData@maxExpectDate",!0]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>{{data.total.toFixed(2)}}</span></li>\n                    </ul>'},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},data:{total:"0.00"},computes:{total:"table@productSum"}},tempData:{maxExpectDate:""}}},beforeCreate:function(){},created:function(){var e=this.$storage.get("userInfo");null!=e.userId&&e.userId.trim().length>0&&(this.temp.makeId=e.userId.trim()),null!=e.userName&&e.userName.trim().length>0&&(this.temp.makeName=e.userName.trim()),this.temp=this.initData.temp,this.apiObj.params.parentId=this.initData.temp.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData),this.setProductSum(this.rowData))},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&e.$refs.orderEditDialog.getData()}),this.saveSaleOrder(this.orderDtlList)},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},checkColumn:function(e){for(var t="",i=this.temp.expectDate,a=0;a<e.length;a++){var o=e[a],n=o.orderCount;null!=n&&0!=n.trim().length||(t=t+"第 "+(a+1)+" 行: 订购数量为空或空字符串！");var l=o.productPrice;null!=l&&0!=l.trim().length||(t=t+"第 "+(a+1)+" 行: 单价为空或空字符串！");var s=o.deliverDate;null==s&&(t=t+"第 "+(a+1)+" 行: 约定交期为空或空字符串！"),null!=i&&null!=s&&i<s&&(t=t+"第 "+(a+1)+" 行: 约定交期不可大于("+i+")！")}return t},saveSaleOrder:function(e){var t=this;if(null!=e&&0!=e.length){var i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{for(var a=[],o=0;o<e.length;o++){var n=e[o],s={id:"",productId:"",productPrice:"",p2nFormula:"",n2pFormula:"",orderCount:"",orderUnit:"",productUnit:"",priceUnit:"",productSum:"",deliverDate:"",remark:""};s.id=n.id,s.productId=n.productId,s.productPrice=n.productPrice,s.p2nFormula=n.p2nFormula,s.n2pFormula=n.n2pFormula,s.orderCount=n.orderCount,s.orderUnit=n.orderUnit,s.productUnit=n.productUnit,s.priceUnit=n.priceUnit,s.productSum=n.productSum,s.deliverDate=n.deliverDate,s.remark=n.remark,a.push(s)}this.temp.dtlJsonStr="",null!=a&&a.length>0&&(this.temp.dtlJsonStr=JSON.stringify(a)),this.$confirm("修改订单后，是否将该订单提交？","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.temp.isAutoCommit="true",Object(l.updateSaleOrder)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.temp.isAutoCommit="false",Object(l.updateSaleOrder)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},customerSelect:function(e){e[0]&&(this.temp.customerId=e[0].id,this.temp.customerName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},checkNumber:function(e,t){null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t+"("+e+") 输入错误，请输入大于零的正整数或(1,2)位小数！"})},changeAdvanceSum:function(e){null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&this.checkNumber(e,"预付款")},addProduct:function(){this.$refs.orderEditDialog.getData(),this.dialogData.data=this.orderDtlList,this.dialogData.isNeedRepeat=!1,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedCustomerPrice=!0,this.dialogData.customerId=this.temp.customerId,this.dialogData.title="选择货品",this.openDialogName="selectProductBySaleOrder",this.showDialog=!0,this.inLinVisible=!0},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id,t.orderUnit=e.id),null!=e.productPrice&&(t.productPrice=e.productPrice),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula))},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim());var a="";null!=t.productStockCount&&t.productStockCount.trim().length>0&&(a=t.productStockCount.trim()),Object(r.formulaReckonByProductCount)({parmKey:"N",stockCount:i,productStockCount:a,formula:e}).then(function(e){0===e.code&&(i-0!=0&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p),a-0!=0&&null!=e.productStockCount_n2p&&e.productStockCount_n2p.trim().length>0&&(t.productStockCountByPrice=e.productStockCount_n2p))}).catch(function(e){})}},setProductSum:function(e){if(null!=e){e.productSum="";var t=e.orderCount,i=e.productPrice;null!=t&&t.trim().length>0&&null!=i&&i.trim().length>0&&(e.productSum=(t.trim()*i.trim()).toFixed(2))}},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelected(t),e.customerId&&(this.temp.customerId=e.customerId),e.customerName&&(this.temp.customerName=e.customerName)},tableSelected:function(e){if(null!=e&&e.length>0)for(var t=this.temp.expectDate,i=0;i<e.length;i++){var a=e[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productPrice:"",n2pFormula:"",p2nFormula:"",prodInfo:"",productUnit:"",productUnitName:"",productCount:"",stockCount:"",productStockCount:"",priceUnit:"",stockCountByPrice:"",productStockCountByPrice:"",count:"",productSum:"",deliverDate:"",stateName:"",remark:""};null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),null!=a.unitName&&a.unitName.trim().length>0&&(o.productUnitName=a.unitName.trim()),null!=a.prodInfo&&a.prodInfo.trim().length>0&&(o.prodInfo=a.prodInfo.trim()),o.orderUnit=a.unit,o.orderUnitName=a.unitName,o.productPrice=a.price,o.p2nFormula=a.p2nFormula,o.n2pFormula=a.n2pFormula,o.stockCountByPrice=a.stockCount,o.productStockCountByPrice=a.productStockCount,o.productId=a.id.trim(),o.productUnit=a.unit.trim(),o.stockCount=a.stockCount.trim(),o.productStockCount=a.productStockCount.trim(),null!=t&&(o.deliverDate=t,o.maxExpectDate=t,this.tempData.maxExpectDate=t),this.tableData.push(o)}},findProductPrice:function(e,t,i,a){return Object(s.findSaleUnitPrice)({customerId:t,productId:i,unit:a}).then(function(t){0===t.code&&null!=t.productPrice&&t.productPrice.trim().length>0&&(e.productPrice=t.productPrice)}).catch(function(e){}),""}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size},formItemWidth:function(){var e={};switch(this.size){case"mini":e.width="180px";break;case"small":e.width="200px";break;default:e.width="220px"}return e}},watch:{"temp.expectDate":function(){this.tempData.maxExpectDate=this.temp.expectDate}}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"85%"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px",size:e.size}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"客户名称:",prop:"customerName"}},[i("base-input-option",{staticStyle:{display:"inline-block"},style:e.formItemWidth,attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.customerName,callback:function(t){e.$set(e.temp,"customerName",t)},expression:"temp.customerName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发票类型:",prop:"receiptTypeName"}},[i("el-select",{style:e.formItemWidth,attrs:{placeholder:"发票类型"},model:{value:e.temp.receiptType,callback:function(t){e.$set(e.temp,"receiptType",t)},expression:"temp.receiptType"}},[i("el-option",{attrs:{label:"不开票",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"增值税普通发票",value:"2"}}),e._v(" "),i("el-option",{attrs:{label:"增值税专用发票",value:"3"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{style:e.formItemWidth,attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"下单日期:",prop:"orderDate"}},[i("el-date-picker",{style:e.formItemWidth,attrs:{type:"date",placeholder:"下单日期","value-format":"yyyy-MM-dd"},model:{value:e.temp.orderDate,callback:function(t){e.$set(e.temp,"orderDate",t)},expression:"temp.orderDate"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"约定交期:",prop:"expectDate"}},[i("el-date-picker",{style:e.formItemWidth,attrs:{type:"date",placeholder:"约定交期","value-format":"yyyy-MM-dd"},model:{value:e.temp.expectDate,callback:function(t){e.$set(e.temp,"expectDate",t)},expression:"temp.expectDate"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{style:e.formItemWidth,model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderEditDialog",attrs:{"data-custom-table-id":"views_sale_order_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"orderEditDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},Ig0I:function(e,t,i){"use strict";i.r(t);var a=i("KHd+"),o=Object(a.a)({},void 0,void 0,!1,null,null,null);o.options.__file="editFinanceBillByPurchase.vue",t.default=o.exports},Ikhz:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("WI6C");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{content:[{required:!0,trigger:"change",message:"请填写保养内容"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",content:"",remark:""}}},created:function(){var e=this.initData.rowData;this.formData.id=e.id,this.formData.content=e.content,this.formData.remark=e.remark},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.updateMaintainContent)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"保养内容:",prop:"content"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},IlrH:function(e,t,i){"use strict";var a=i("bvAX");i.n(a).a},Isb9:function(e,t,i){"use strict";i("f3/d");var a=i("Lt5i"),o={props:{configs:{type:Object,default:function(){return null}},cardData:{type:Object,default:function(){return null}}},computed:{},data:function(){return{loopTime:6e5}},watch:{cardData:function(){this["".concat(this.configs.name,"Loading")]=!0,this.httpRequests()}}},n={name:"realtime-data",mixins:[o],data:function(){return{dailyOutput:"",startingTime:"",collectionTime:"",httpRequestsTimer:"",realtimeDataLoading:!1}},methods:{httpRequests:function(){var e=this;this.cardData&&this.cardData.id&&(this.requestsBody(),clearInterval(this.httpRequestsTimer),this.httpRequestsTimer=setInterval(function(t){e.requestsBody()},this.loopTime))},requestsBody:function(){var e=this;this.$api.getOutputAndDate({equipmentId:this.cardData.id}).then(function(t){e.dailyOutput="number"==typeof t.outputNum?t.outputNum:parseFloat(t.outputNum||"0"),e.startingTime=t.startDate||"",e.collectionTime=t.collectDate||"",e.realtimeDataLoading&&(e.realtimeDataLoading=!1)}).catch(function(t){e.dailyOutput="",e.startingTime="",e.collectionTime="",e.realtimeDataLoading&&(e.realtimeDataLoading=!1)})}},created:function(){this.cardData&&this.cardData.id&&(this.realtimeDataLoading=!0,this.httpRequests())},beforeDestroy:function(){clearInterval(this.httpRequestsTimer)}},l=(i("HmqJ"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.realtimeDataLoading,expression:"realtimeDataLoading"}],staticClass:"realtimeData"},[i("p",{staticStyle:{color:"#868686"}},[e._v("当日产量（件）："),i("span",{staticStyle:{color:"#333333"},domProps:{textContent:e._s(e.dailyOutput)}})]),e._v(" "),i("p",{staticStyle:{color:"#868686"}},[e._v("最后开机时间："),i("span",{domProps:{textContent:e._s(e.startingTime)}})]),e._v(" "),i("p",{staticStyle:{color:"#868686"}},[e._v("最后采集时间："),i("span",{domProps:{textContent:e._s(e.collectionTime)}})])])},[],!1,null,null,null);s.options.__file="realtimeData.vue";var r=s.exports,c=(i("rGqo"),i("WIyV")),d=i("Zni2"),u=i.n(d),p=(i("4Feb"),i("75ce"),i("AH3D"),{name:"round-the-clock-data",mixins:[o],components:{"v-chart":u.a,customBaseTable:c.a},data:function(){return{chartData:null,categories:["开机时间","工作时间","故障报警"],tableInitData:null,roundTheClockDataLoading:!1,httpRequestsTimer:""}},computed:{sys:function(){return this.$store.getters.systemInfo},setPageSize:function(){return!(this.sys.clientWidth>1366)},chartsData:function(){return this.formatChartsData(this.chartData)},polar:function(){return{grid:{top:23,left:70,right:30,bottom:2},tooltip:{formatter:function(e){return e.marker+e.value[3]+"--"+e.value[4]}},xAxis:{type:"time",position:"top",min:this.dataTool().start,max:this.dataTool().end,interval:108e5,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:function(e){var t=new Date(e).getHours();return 23===t?t+1:t}},splitLine:{lineStyle:{color:"#F2F2F2",type:"dashed",width:2}}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0},inverse:!0,data:this.categories},series:[{type:"custom",renderItem:this.renderItem,encode:{x:[1,2],y:0},data:this.chartsData}],animationDuration:2e3}}},methods:{formatChartsData:function(e){var t=this;if(!e)return[];var i=[],a=[],o={};return this.categories.forEach(function(n,l){"开机时间"===n?(a=e.openDate,o={normal:{color:"#66CCFF"}}):"工作时间"===n?(a=e.workDate,o={normal:{color:"#009900"}}):(a=e.alarmDate,o={normal:{color:"#FF0000"}}),a.forEach(function(e){i.push({name:n,value:[l,t.timeTool(e.startDate),t.timeTool(e.endDate),e.startDate,e.endDate],itemStyle:o})})}),i},timeTool:function(e){return new Date((new Date).toDateString()+" "+e).getTime()},dataTool:function(){return{start:new Date(new Date((new Date).toLocaleDateString()).getTime()),end:new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1)}},renderItem:function(e,t){var i=t.value(0),a=t.coord([t.value(1),i]),o=t.coord([t.value(2),i]),n=u.a.graphic.clipRectByRect({x:a[0],y:a[1],width:o[0]-a[0],height:10},{x:e.coordSys.x,y:e.coordSys.y,width:e.coordSys.width,height:e.coordSys.height});return n&&{type:"rect",shape:n,style:t.style()}},httpRequests:function(){var e=this;this.cardData&&this.cardData.id&&(this.requestsBody(),clearInterval(this.httpRequestsTimer),this.httpRequestsTimer=setInterval(function(t){e.requestsBody()},this.loopTime))},requestsBody:function(){var e=this;this.$axios.all([this.$api.get24HoursData({equipmentId:this.cardData.id}),this.$api.get24HoursDataDetail({equipmentId:this.cardData.id})]).then(this.$axios.spread(function(t,i){e.chartData=t,e.tableInitData=i,e.roundTheClockDataLoading&&(e.roundTheClockDataLoading=!1)})).catch(function(t){e.roundTheClockDataLoading&&(e.roundTheClockDataLoading=!1)})}},watch:{},created:function(){this.cardData&&this.cardData.id&&(this.roundTheClockDataLoading=!0,this.httpRequests())},mounted:function(){},beforeDestroy:function(){clearInterval(this.httpRequestsTimer)}}),m=(i("PiZM"),i("7uPa"),Object(l.a)(p,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:this.roundTheClockDataLoading,expression:"roundTheClockDataLoading"}],staticClass:"roundTheClockData"},[t("div",{staticStyle:{height:"30%"}},[t("v-chart",{attrs:{options:this.polar,autoresize:""}})],1),this._v(" "),t("div",{staticStyle:{height:"70%"}},[t("custom-base-table",{key:this.cardData.id,attrs:{"data-custom-table-id":"components_equipmentData_roundTheClockData0",initData:this.tableInitData,disableLoading:!0,isSortable:!0,showTableSet:!0,smallPage:this.setPageSize}})],1)])},[],!1,null,null,null));m.options.__file="roundTheClockData.vue";var h=m.exports,g=(i("91GP"),{name:"alarm-record",mixins:[o],components:{customBaseTable:c.a},data:function(){return{alarmRecordLoading:!1,tableInitData:null,customColumn:[{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"处理详情",editBtns_isShow:!0,method:this.processingDetails}]}],processingDetailsDialogCustomColumn:[{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"备件详情",editBtns_isShow:!0,method:this.useDetails}]}],processingDetailsDialogStamp:"",processingDetailsDialog:!1,useDetailsDialogStamp:"",useDetailsDialog:!1,httpRequestsTimer:"",paramsConstant_one:{fieldCode:"warnDateTimeStr,sysCode,faultDescribe,beginTimeStr,endTimeStr,equipmentStateName",orderStr:"repair.cdate desc"},paramsConstant_two:{fieldCode:"repairUserName,faultDescribe,timeLengthStr,beginTimeStr,endTimeStr,taskResultName",orderStr:"task.cdate asc"},paramsConstant_three:{fieldCode:"productCode,productName,productSpec,productUnitName,receiveCount,warehouseGenreName,outDtlStateName,applyCount,retreatCount,retreatTypeName,inDtlStateName",orderStr:"taskDtl.cdate asc"},params_two:null,apiObj_two:{apiName:"listPageEquipmentRepairTask",params:{repairId:""}},params_three:null,apiObj_three:{apiName:"findListRepairTaskDetailByInfo",params:{taskId:""}}}},watch:{},computed:{sysClientWidth:function(){return this.$store.getters.systemInfo.clientHeight||0},params_one:function(){return Object.assign({},this.paramsConstant_one,{equipmentId:this.cardData?this.cardData.id:""})},setApiObj_two:function(){return this.apiObj_two.params=Object.assign({},this.paramsConstant_two,{repairId:this.params_two?this.params_two.id:""}),this.apiObj_two},setApiObj_three:function(){return this.apiObj_three.params=Object.assign({},this.paramsConstant_three,{taskId:this.params_three?this.params_three.id:""}),this.apiObj_three}},methods:{processingDetails:function(e,t){this.params_two=e,this.resetProcessingDetailsDialog(),this.processingDetailsDialog=!0},useDetails:function(e,t){this.params_three=e,this.resetUseDetailsDialog(),this.useDetailsDialog=!0},resetProcessingDetailsDialog:function(){this.processingDetailsDialogStamp=(new Date).getTime()},resetUseDetailsDialog:function(){this.useDetailsDialogStamp=(new Date).getTime()},httpRequests:function(){var e=this;this.cardData&&this.cardData.id&&(this.requestsBody(),clearInterval(this.httpRequestsTimer),this.httpRequestsTimer=setInterval(function(t){e.requestsBody()},this.loopTime))},requestsBody:function(){var e=this;this.$api.listPageEquipmentRepair(this.params_one).then(function(t){e.tableInitData=t,e.alarmRecordLoading&&(e.alarmRecordLoading=!1)}).catch(function(t){e.alarmRecordLoading&&(e.alarmRecordLoading=!1)})}},created:function(){this.resetProcessingDetailsDialog(),this.resetUseDetailsDialog(),this.cardData&&this.cardData.id&&(this.alarmRecordLoading=!0,this.httpRequests())},mounted:function(){},beforeDestroy:function(){clearTimeout(this.httpRequestsTimer)}}),f=(i("WhPK"),i("YOPT"),Object(l.a)(g,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.alarmRecordLoading,expression:"alarmRecordLoading"}],staticClass:"alarmRecord"},[i("custom-base-table",{key:e.cardData.id,attrs:{"data-custom-table-id":"components_equipmentData_alarmRecord0",customColumn:e.customColumn,initData:e.tableInitData,disableLoading:!0,isSortable:!1}}),e._v(" "),i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],key:e.processingDetailsDialogStamp,attrs:{title:"处理详情",visible:e.processingDetailsDialog,width:"80%","append-to-body":"",layoutType:2},on:{"update:visible":function(t){e.processingDetailsDialog=t}}},[e.useDetailsDialog?[i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],key:e.useDetailsDialogStamp,attrs:{width:"70%",title:"备件使用详情",visible:e.useDetailsDialog,layoutType:2,"append-to-body":""},on:{"update:visible":function(t){e.useDetailsDialog=t}}},[i("div",{staticStyle:{padding:"10px","padding-bottom":"0"},style:{height:.6*e.sysClientWidth+"px"}},[i("custom-base-table",{attrs:{"data-custom-table-id":"components_equipmentData_alarmRecord1",apiObj:e.setApiObj_three,disableLoading:!1,isSortable:!1}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.useDetailsDialog=!1}}},[e._v("关 闭")])],1)])]:e._e(),e._v(" "),i("div",{staticStyle:{padding:"10px","padding-bottom":"0"},style:{height:.7*e.sysClientWidth+"px"}},[i("custom-base-table",{attrs:{"data-custom-table-id":"components_equipmentData_alarmRecord2",apiObj:e.setApiObj_two,customColumn:e.processingDetailsDialogCustomColumn,disableLoading:!1,isSortable:!1}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.processingDetailsDialog=!1}}},[e._v("关 闭")])],1)],2)],1)},[],!1,null,null,null));f.options.__file="alarmRecord.vue";var b=f.exports,v={name:"equipment-data",props:{configs:{type:Object,default:function(){return null}},apiObj:{type:Object,default:function(){return null}},inDialog:{type:Boolean,default:!1},cardData:{type:Object,default:function(){return null}}},components:{equipmentCard:a.a,realtimeData:r,roundTheClockData:h,alarmRecord:b},data:function(){return{activeName:"",activeNameIndex:0,tabs:[{label:"实时数据",name:"realtimeData"},{label:"24小时数据",name:"roundTheClockData"},{label:"报警记录",name:"alarmRecord"}],userSelectedCardData:null,sessionStore:{}}},computed:{setCardData:function(){if(this.inDialog)return this.cardData},setUserSelectedCardData:function(){return this.inDialog?this.cardData:this.userSelectedCardData}},watch:{},methods:{handleClick:function(){this.inDialog||this.activeName!==this.sessionStore.activeName&&(this.sessionStore.activeName=this.activeName)},databridge:function(e){},cardDataBridge:function(e){this.userSelectedCardData=e,this.sessionStore.cardData=e},callmethod:function(e){this.$emit("callmethod",e)}},created:function(){this.activeName=this.tabs[this.activeNameIndex].name},mounted:function(){}},D=(i("Z3I7"),Object(l.a)(v,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"equipmentData clearfix"},[i("div",{staticStyle:{float:"left",width:"220px",height:"100%",position:"relative"}},[i("equipment-card",{attrs:{rowNum:1,inDialog:e.inDialog,apiObj:e.apiObj,cardData:e.setCardData},on:{databridge:e.cardDataBridge}})],1),e._v(" "),i("div",{staticStyle:{float:"left",width:"calc(100% - 220px)",height:"100%",position:"relative","padding-left":"10px"},style:{"padding-right":e.inDialog?"10px":0}},[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e._l(e.tabs,function(t,a){return[i("el-tab-pane",{key:a,attrs:{label:t.label,name:t.name}},[e.activeName===t.name?i(t.name,{tag:"component",attrs:{configs:t,cardData:e.setUserSelectedCardData},on:{databridge:e.databridge,callmethod:e.callmethod}}):e._e()],1)]})],2)],1)])},[],!1,null,null,null));D.options.__file="index.vue";t.a=D.exports},ItSD:function(e,t,i){"use strict";var a=i("JBVM");i.n(a).a},J1zL:function(e,t,i){},J55C:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("CqDg"),n=i("txn6");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:a.a,productStockTreeTableDialog:o.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:"null",typeName:"报废处理",fieldCode:"warehouseName,productCode,productName,productSpec,productGenreName,stockCount,count,remark"}},customColumn:[{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCount",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["报废数量必须大于零！","报废数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="报废处理",this.temp.type="def4b13175dc44b08d7a0315b811700e"},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productStockTreeTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={productId:l.productId,warehouseId:l.warehouseId,pathName:l.pathName,count:l.count,priceCount:l.count,productUnit:l.priceUnit,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount,remark:l.remark,warehouseProductId:l.warehouseProductId};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&t.$confirm("添加报废单后，是否将该报废单提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.temp.isAutoCommit="true",Object(n.addWarehouseOutScrapBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.temp.isAutoCommit="false",Object(n.addWarehouseOutScrapBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={warehouseProductId:"",productId:"",warehouseName:"",warehouseId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCount:""};o.productId=a.productId.trim(),null!=a.warehouseName&&a.warehouseName.trim().length>0&&(o.warehouseName=a.warehouseName.trim()),null!=a.warehouseId&&a.warehouseId.trim().length>0&&(o.warehouseId=a.warehouseId.trim()),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),null!=a.warehouseProductId&&a.warehouseProductId.trim().length>0&&(o.warehouseProductId=a.warehouseProductId.trim()),o.stockCount=a.stockCount,o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"操作类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouseByWC_scrapByWC_createScrapByWC_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAdd.vue";t.default=c.exports},JBVM:function(e,t,i){},JDYd:function(e,t,i){},JE4Y:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("WIyV"),o=i("MPAK"),n=i("Ikq8"),l={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{formData:{id:"",assistProductId:"",assistProductName:"",supplierId:"",supplierName:"",price:"",lossRatio:""},rules:{assistProductName:[{required:!0,message:"请选择外协件",trigger:"change"}],supplierName:[{required:!0,message:"请选择供应商",trigger:"change"}],price:[{required:!0,trigger:"change",validator:function(e,t,i){Object(o.isPriceByValueSystem)(t)?(0==t&&i(new Error("请输入大于零的正数支持4位小数！")),i()):i(new Error("请输入大于零的正数支持4位小数！"))}}],lossRatio:[{required:!0,trigger:"change",validator:function(e,t,i){Object(o.isNumberByValueSystem)(t)?(0==t&&i(new Error("请输入大于零的正数支持2位小数！")),i()):i(new Error("请输入大于零的正数支持2位小数！"))}}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,AssistProductDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"800px",title:"选择外协件"},dialogName:"dialogAssistProductOption"}},SupplierDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择供应商",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"49c0a7ebcb4c4175bd5195837a6a9a13",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}}}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.formData.id=e.id,this.formData.assistProductId=e.assistProductId,this.formData.assistProductName=e.assistProductName,this.formData.supplierId=e.supplierId,this.formData.supplierName=e.supplierName,this.formData.price=e.price,this.formData.lossRatio=e.lossRatio},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{assistProductSelect:function(e){e[0]&&(this.formData.assistProductId=e[0].id,this.formData.assistProductName=e[0].productName)},supplierSelect:function(e){e[0]&&(this.formData.supplierId=e[0].id,this.formData.supplierName=e[0].name)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(n.updateAssistSupplier)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"360px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,inline:!0,model:e.formData,"label-position":"right","label-width":"80px"}},[i("el-row",[i("el-col",[i("el-form-item",{attrs:{label:"外协件:",prop:"assistProductName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.AssistProductDialog.dialog},on:{callback:e.assistProductSelect},model:{value:e.formData.assistProductName,callback:function(t){e.$set(e.formData,"assistProductName",t)},expression:"formData.assistProductName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",[i("el-form-item",{attrs:{label:"供应商:",prop:"supplierName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.SupplierDialog.dialog},on:{callback:e.supplierSelect},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",[i("el-form-item",{attrs:{label:"单价:",prop:"price"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.price,callback:function(t){e.$set(e.formData,"price",t)},expression:"formData.price"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",[i("el-form-item",{attrs:{label:"损耗率:",prop:"lossRatio"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.lossRatio,callback:function(t){e.$set(e.formData,"lossRatio",t)},expression:"formData.lossRatio"}}),e._v("  %\n          ")],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogEdit.vue";t.default=r.exports},JPyY:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("Qe0A"),l=i("a0Xs"),s=i("hZMg");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",parentId:""}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{deptType:"6d8a030ba1ce11e884ad00163e105f0a",type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="生产领料出库",this.temp.type="cb0a55d81e754cd3b59715d225dab087",this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(l.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={id:l.id,productId:l.productId,remark:l.remark,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.updateWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,this.temp.deptId="",this.temp.deptName="",Object(s.findUserDepartmentByUser)({userId:this.temp.makeId,deptType:"6d8a030ba1ce11e884ad00163e105f0a"}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_produce_materialRequisitionWC_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},JgNL:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("hdRB");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{cancelReason:[{required:!0,trigger:"change",message:"请填写取消原因"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{repairId:"",repairTaskId:"",cancelReason:""}}},created:function(){this.formData.repairId=this.initData.repairId,this.formData.repairTaskId=this.initData.repairTaskId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.cancelEquipmentRepair)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"取消原因:",prop:"cancelReason"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.cancelReason,callback:function(t){e.$set(e.formData,"cancelReason",t)},expression:"formData.cancelReason"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogCancel.vue";t.default=s.exports},JhGc:function(e,t,i){"use strict";var a=i("KXGx");i.n(a).a},Jksm:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("ywZ6"),l=i("Qe0A"),s=i("a0Xs");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddSupplier:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",parentId:""}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"4"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="采购退货出库",this.temp.type="4cba5d3815644b26920777512a20474b",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"},this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(s.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={id:n.id,productId:n.productId,remark:n.remark,priceCount:n.priceCount,priceUnit:n.priceUnit,p2nFormula:n.p2nFormula,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.updateWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseOutWC_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},JmJo:function(e,t,i){},Jn2s:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("aZSg");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{custProdPrice:[{required:!0,trigger:"change",message:"请填写客户单价"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{}}},created:function(){this.formData=this.initData.rowData},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,4})?$").test(e.trim())},checkValueNumber:function(e,t){var i="";return null==e||0==e.trim().length?i=t+"为空或空字符串！":null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())?i=t+"("+e+")输入错误，请输入大于零的正整数或(1,4)位小数！":e/1==0&&(i=t+"("+e+")输入错误，请输入大于零的正整数或(1,4)位小数！"),i},changePrice:function(e){var t=this.checkValueNumber(e,"客户单价");null!=t&&t.trim().length>0&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){var i=e.formData.custProdPrice,o=e.checkValueNumber(i,"客户单价");if(null!=o&&o.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:o});Object(a.updateSaleUnitPrice)({id:e.formData.id,remark:e.formData.remark,productPrice:e.formData.custProdPrice}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"600px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"货品编码:",prop:"code"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{readonly:!0},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"货品名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{readonly:!0},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"规格型号:",prop:"spec"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{readonly:!0},model:{value:e.formData.spec,callback:function(t){e.$set(e.formData,"spec",t)},expression:"formData.spec"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"属性:",prop:"genreName"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{readonly:!0},model:{value:e.formData.genreName,callback:function(t){e.$set(e.formData,"genreName",t)},expression:"formData.genreName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"客户名称:",prop:"customerName"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{readonly:!0},model:{value:e.formData.customerName,callback:function(t){e.$set(e.formData,"customerName",t)},expression:"formData.customerName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"单位:",prop:"unitName"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{readonly:!0},model:{value:e.formData.unitName,callback:function(t){e.$set(e.formData,"unitName",t)},expression:"formData.unitName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"标准单价:",prop:"prodPrice"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{readonly:!0},model:{value:e.formData.prodPrice,callback:function(t){e.$set(e.formData,"prodPrice",t)},expression:"formData.prodPrice"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"客户单价:",prop:"custProdPrice"}},[i("el-input",{staticStyle:{width:"160px"},on:{change:e.changePrice},model:{value:e.formData.custProdPrice,callback:function(t){e.$set(e.formData,"custProdPrice",t)},expression:"formData.custProdPrice"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[i("el-input",{staticStyle:{width:"460px"},attrs:{type:"textarea",rows:"3"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},K77I:function(e,t,i){"use strict";var a=i("z0WU");t.a={directives:{switchshadow:{inserted:function(e,t,i){var a=i.context;e.scrollHeight>e.offsetHeight?a.showBoxShadow=!0:a.showBoxShadow=!1},componentUpdated:function(e,t,i){var a=i.context;e.scrollHeight>e.offsetHeight?a.showBoxShadow=!0:a.showBoxShadow=!1}}},props:{},data:function(){return{showBoxShadow:!1,scaleNum:0,suid:""}},created:function(){this.suid=Object(a.b)()},mounted:function(){setTimeout(function(e){})},beforeDestroy:function(){this.suid&&this.removeDialogClass()},computed:{size:function(){return this.$store.getters.size},formItemWidth:function(){var e={};switch(this.size){case"mini":e.width="180px";break;case"small":e.width="200px";break;default:e.width="220px"}return e},createDialogStyle:function(){return".".concat(this.suid,"{\n        width: ").concat(this.scaleNum,"%;\n        height: ").concat(this.scaleNum,"%;\n        margin-top: ").concat((100-this.scaleNum)/2*this.$store.getters.systemInfo.offsetHeight/100,"px !important;\n      }")},computeDialogClass:function(){return this.setStyle(this.suid),this.suid}},methods:{setStyle:function(e){if(e){var t=document.getElementById(e);t&&t.remove(),(t=document.createElement("style")).setAttribute("id",e),document.head.appendChild(t),t.innerText=this.createDialogStyle}},removeDialogClass:function(){var e=document.getElementById(this.suid);e&&e.remove()}},watch:{}}},K7Qy:function(e,t,i){"use strict";var a=i("N0+h");i.n(a).a},K8za:function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},props:["initData","visible"],data:function(){return{tableData:[],tableConfigList:[{customColumn:[],apiObj:{apiName:"listPagePurchaseSign",params:{fieldCode:"sysCode,orderCode,supplierName,signUserName,cdate,stateName",signId:"",orderStr:"sign.cdate desc"}},tempData:{},showHeader:!0,showIndex:!1,showCheckBox:!1,showTableSet:!1,showAll:!1,expand:!0,expandMode:"all",showExpandBtn:!1,rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPagePurchaseSignDetail",params:{fieldCode:"prodInfo,orderUnitName,arriveCount,qualityName,qualityCount,badCount,retreatCount,receiveCount,stateName",prodColumnKey:"productCode,productName,productSpec,productProperty",isNeedPage:"false"}},dynamicValue:{parentId:"self@id"},tempData:{},showIndex:!1,showCheckBox:!1,isSingle:!1,expand:!0,expandMode:"all",showExpandBtn:!0,leftFixed:4},{customColumn:[],apiObj:{apiName:"listPagePurchaseQualityDetail",params:{fieldCode:"qualityName,qualityCriterion,badCount",isNeedPage:"false",orderStr:"quality.cdate asc"}},dynamicValue:{signDetailId:"self@id"},showIndex:!1,showCheckBox:!1}],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!1,isVisible:!1,inDialog:!0}},beforeCreate:function(){},created:function(){this.tableConfigList[0].apiObj.params.signId=this.initData.signId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},getData:function(){this.$refs.customBaseTable.getData()},databridge:function(e){this.tableData=e},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},closeDialog:function(){},deleteRow:function(e){this.deleteData(e)}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_orderSign_purchaseSignByInfo0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="purchaseSignByInfo.vue";t.default=n.exports},KA1N:function(e,t,i){"use strict";i.d(t,"a",function(){return a});i("pIFo"),i("a1Th");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY-MM-DD",t=arguments.length>1?arguments[1]:void 0;if("string"==typeof e){e||(e="YYYY-MM-DD hh:mm:ss");var i=t?new Date(t):new Date,a=i.getFullYear(),o=i.getMonth()+1,n=i.getDate(),l=i.getHours(),s=i.getMinutes(),r=i.getSeconds(),c=function(e){return(e=e.toString())[1]?e:"0"+e},d=e;return/YYYY/.test(e)&&(d=d.replace(/YYYY/,c(a))),/MM/.test(e)&&(d=d.replace(/MM/,c(o))),/DD/.test(e)&&(d=d.replace(/DD/,c(n))),/hh/.test(e)&&(d=d.replace(/hh/,c(l))),/mm/.test(e)&&(d=d.replace(/mm/,c(s))),/ss/.test(e)&&(d=d.replace(/ss/,c(r))),d}}},KAlK:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("6Q2N");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{newStockCount:[{required:!0,message:"请填写库存数量",trigger:"change"},{type:"number",message:"库存数量必须为数字"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},checkNumber:function(e,t){var i="";return null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&(i=t+"("+e+") 输入错误，请输入大于零的正整数或(1,2)位小数！"),i},changeStockCount:function(e){var t="";null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&(t=this.checkNumber(e,"库存数量")),null!=t&&t.trim().length>0&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){var i="",o=e.formData.newStockCount,n=e.checkNumber(o,"库存数量");if(null!=n&&n.trim().length>0&&(i+=n),null!=i&&i.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:i});Object(a.updateWarehouseProductBySimple)({warehouseId:e.temp.warehouseId,productId:e.temp.productId,oldStockCount:e.temp.stockCount,newStockCount:e.temp.newStockCount}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"620px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.warehouseCode+":",prop:"warehouseCode"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.warehouseCode,callback:function(t){e.$set(e.temp,"warehouseCode",t)},expression:"temp.warehouseCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.pathName+":",prop:"pathName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.pathName,callback:function(t){e.$set(e.temp,"pathName",t)},expression:"temp.pathName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productCode+":",prop:"productCode"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productCode,callback:function(t){e.$set(e.temp,"productCode",t)},expression:"temp.productCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productName+":",prop:"productName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productName,callback:function(t){e.$set(e.temp,"productName",t)},expression:"temp.productName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productSpec+":",prop:"productSpec"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productSpec,callback:function(t){e.$set(e.temp,"productSpec",t)},expression:"temp.productSpec"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productGenreName+":",prop:"productGenreName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productGenreName,callback:function(t){e.$set(e.temp,"productGenreName",t)},expression:"temp.productGenreName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productUnitName+":",prop:"productUnitName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productUnitName,callback:function(t){e.$set(e.temp,"productUnitName",t)},expression:"temp.productUnitName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.stockCount+":",prop:"newStockCount"}},[i("el-input",{on:{change:e.changeStockCount},model:{value:e.temp.newStockCount,callback:function(t){e.$set(e.temp,"newStockCount",e._n(t))},expression:"temp.newStockCount"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},KB6W:function(e,t,i){"use strict";i.r(t);i("f3/d"),i("Oyvg");var a=i("1IKD"),o=i("WIyV"),n=i("sanI"),l=i("aZSg"),s={components:{customBaseTable:o.a,dialogAddCustomer:n.default,productTableDialog:a.a},props:["initData","visible"],data:function(){return{productUnit:{},rowData:{},rules:{customerName:[{required:!0,message:"请选择客户名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null,isNeedCustomerPrice:!1,customerId:""},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{customerId:"",customerName:"",remark:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择客户名称",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"df7cb67fca4148bc9632c908e4a7fdea",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}},apiObj:{apiName:"listPageSaleUnitPrices",params:{customerId:"-1",fieldCode:"prodInfo,unitName,custProdPrice,remark",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"code,name,spec,productProperty"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"unitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"custProdPrice",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,4})?$"}],message:["请输入大于零的正整数或(1,4)位小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},isValidate:!1}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductUnit(this.productUnit,this.rowData))},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveSaleOrder(e.orderDtlList))})},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,4})?$").test(e.trim())},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i].custProdPrice;null==a||0==a.trim().length?t=t+"第 "+(i+1)+" 行: 客户单价为空或空字符串！":null!=a&&a.trim().length>0&&a/1==0&&(t=t+"第 "+(i+1)+" 行: 客户单价("+a+") 输入错误，请输入大于零的正整数或(1,4)位小数！"),null!=a&&a.trim().length>0&&!this.isNumberByValue(a.trim())&&(t=t+"第 "+(i+1)+" 行: 客户单价("+a+") 输入错误，请输入大于零的正整数或(1,4)位小数！")}return t},saveSaleOrder:function(e){var t=this;if(null!=e&&0!=e.length){var i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{for(var a=[],o=0;o<e.length;o++){var n=e[o],s={productId:n.productId,unit:n.unit,productPrice:n.custProdPrice,remark:n.remark};a.push(s)}this.temp.dtlJsonStr="",null!=a&&a.length>0&&(this.temp.dtlJsonStr=JSON.stringify(a)),this.dialogLoading=!0,Object(l.addSaleUnitPrice)(this.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},customerSelect:function(e){e[0]&&(this.temp.customerId=e[0].id,this.temp.customerName=e[0].name)},addProduct:function(){this.dialogData.fieldCode="prodInfo,unitName,stockCount",this.dialogData.querySpare="isSpareAll",this.dialogData.isShowStateBtnData="false",this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},setProductUnit:function(e,t){null!=e&&null!=t&&null!=e.id&&(t.unit=e.id,t.unit=e.id)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:a.id.trim(),code:a.code.trim(),name:a.name.trim(),spec:a.spec.trim(),genreName:a.genreName.trim(),prodInfo:a.prodInfo,unit:a.unit,unitName:a.unitName};this.tableData.push(o)}}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size},formItemWidth:function(){var e={};switch(this.size){case"mini":e.width="180px";break;case"small":e.width="200px";break;default:e.width="220px"}return e}},watch:{}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"80%"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px",size:e.size}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"客户名称:",prop:"customerName"}},[i("base-input-option",{staticStyle:{display:"inline-block"},style:e.formItemWidth,attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.customerName,callback:function(t){e.$set(e.temp,"customerName",t)},expression:"temp.customerName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_sale_salePrice_customerPrice_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAdd.vue";t.default=c.exports},KBHC:function(e,t,i){},KC3E:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("Oyvg");var a=i("WIyV"),o=i("91ra"),n={components:{customBaseTable:a.a,dialogAdd:r},props:["initData","visible"],data:function(){var e=this;return{customerId:"",deliverDtlIds:"",formData:{cuserName:"",customerName:"",type:"",typeName:""},rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择退货类型")):a()}}]},openDialogName:"",dialogLoading:!0,isVisible:!1,inDialog:!0,showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",orderDetail_style:"",title:"",temp:null,tempLable:null},typeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"retreatType",isglobal:"1"}},defaultSelected:[]},tableData:[],rowTableList:[],apiObj:{apiName:"listPageDeliverDetailByRetreat",params:{isNeedPage:"false",deliverDtlIds:"",state:"1",fieldCode:"sysOrderCode,deliverCode,prodInfo,orderUnitName,orderCount,notRetreatCount,retreatOrderCount,productPrice,retreatOrderSum,retreatRemark",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty"}},customColumn:[{columnIndex:"sysOrderCode",_cellConfig:{hideTitle:!0},width:"100"},{columnIndex:"deliverCode",_cellConfig:{hideTitle:!0},width:"100"},{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"retreatOrderCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"},{lessThan:["self@notRetreatCount",!0]},{greaterThan:["0",!1]}],message:["请输入大于零的正整数或(1,2)位小数！","必须小于等于可退货数量！","必须大于零！"]}},{columnIndex:"retreatOrderSum",componentName:"input",_cellConfig:{compute:"self@retreatOrderCount(*)self@productPrice",editable:!1}},{columnIndex:"retreatRemark",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>{{data.total.toFixed(2)}}</span></li>\n                    </ul>'},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},data:{total:"0.00"},computes:{total:"table@retreatOrderSum"}}}},beforeCreate:function(){},created:function(){this.customerId=this.initData.customerId,this.deliverDtlIds=this.initData.deliverDtlIds,this.apiObj.params.deliverDtlIds=this.deliverDtlIds;var e=this.$storage.get("userInfo");this.formData.cuserName=e.userName,this.formData.customerName=this.initData.customerName},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.retreatOrderCount;o-a.notRetreatCount>0&&(t=t+"第 "+(i+1)+" 行: 本次退货数量("+o+") 输入错误，本次退货数量不可大于可退货数量！")}return t},typeSelect:function(e){e[0]?(this.formData.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.formData.type=[],this.typeData.defaultSelected=[])},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.$refs.retreatAddDialog.getData(),null!=e.rowTableList&&e.rowTableList.length>0&&e.saveSaleRetreat(e.rowTableList))})},saveSaleRetreat:function(e){var t=this;if(null!=e&&0!=e.length){var i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{var a=[];e.forEach(function(e){var t={deliverDetailId:e.id,orderDetailId:e.orderDetaiId,productId:e.productId,orderSum:e.retreatOrderSum,orderUnit:e.orderUnit,orderCount:e.retreatOrderCount,productUnit:e.productUnit,remark:e.retreatRemark,sysOrderCode:e.sysOrderCode,orderId:e.orderId,receiveAmount:e.receiveAmount,notRetreatSum:e.notRetreatSum,n2pFormula:e.n2pFormula,p2nFormula:e.p2nFormula};a.push(t)});var n="";null!=a&&a.length>0&&(n=JSON.stringify(a)),null!=n&&0!=n?this.$confirm("添加退货单后，是否将该退货单提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){Object(o.addSaleRetreat)({type:t.formData.type,remark:t.formData.remark,customerId:t.customerId,dtlJsonStr:n,isAutoCommit:"true"}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}).catch(function(e){"cancel"==e&&Object(o.addSaleRetreat)({type:t.formData.type,remark:t.formData.remark,customerId:t.customerId,dtlJsonStr:n,isAutoCommit:"false"}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}):this.$message({type:"warning",duration:5e3,showClose:!0,message:"暂无发货单明细！"})}}},dialogOpen:function(){},dialogClose:function(e){this.rowTableList=[],this.customerId="",this.deliverDtlIds="",this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px","padding-right":"20px","padding-left":"20px"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"90px"}},[i("el-row",[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"退货类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"客户名称:",prop:"customerName"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.formData.customerName,callback:function(t){e.$set(e.formData,"customerName",t)},expression:"formData.customerName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.formData.cuserName,callback:function(t){e.$set(e.formData,"cuserName",t)},expression:"formData.cuserName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("el-row",{style:e.initData.orderDetail_style},[i("custom-base-table",{ref:"retreatAddDialog",attrs:{"data-custom-table-id":"views_sale_retreat_createRetreat_dialogAdd0",leftFixed:3,isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!1,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"retreatAddDialog",useDefaultBtn:!0,showAll:!1,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAdd.vue";var r=t.default=s.exports},KInz:function(e,t,i){"use strict";var a=i("rSer");i.n(a).a},KKNG:function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},name:"dialog-add",props:["initData","visible"],data:function(){return{rowData:{},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"prodInfo,productUnitName,count,executeCount,stateName",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:""}},tempData:{},showHeader:!0,showIndex:!1,showCheckBox:!1,isSingle:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseOutExecutes",params:{fieldCode:"warehouseName,actualCount,executorName,endDate,remark",isNeedPage:"false"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!1,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable"}]}},beforeCreate:function(){},created:function(){this.rowData=this.initData.rowData,this.tableConfigList[0].apiObj.params.parentId=this.rowData.warehouseOutId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"0px 20px 0px 20px"}},[i("el-row",{staticStyle:{"margin-left":"17%","margin-top":"30px","font-size":"15px","font-weight":"500"}},[i("el-col",{attrs:{span:8}},[i("span",[e._v("出库单号："+e._s(e.rowData.outCode))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("接收单位："+e._s(e.rowData.supplier))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("出库类型："+e._s(e.rowData.outTypeName))])])],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"17%","margin-top":"10px","font-size":"15px","font-weight":"500"}},[i("el-col",{attrs:{span:8}},[i("span",[e._v("制单人："+e._s(e.rowData.outUserName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("制单日期："+e._s(e.rowData.outCdate))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("状态："+e._s(e.rowData.outStateName))])])],1),e._v(" "),i("el-row",{staticStyle:{margin:"20px 0px 0px 0px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistDeliver_dialogWarehouseOutInfo0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogWarehouseOutInfo.vue";t.default=n.exports},KWEx:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("Oi+5"),o=i("WZUi");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{dialogEquipmentSensor:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{equipmentId:"",isBindSensor:"",selectType:"N",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",table_style:"",equipmentId:"",title:"",fullscreen:!1}}},created:function(){this.equipmentId=this.initData.equipmentId,this.selectType="N",this.isBindSensor=this.initData.isBindSensor,"Y"==this.isBindSensor&&(this.selectType="Y")},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},radioChange:function(){},save:function(){var e=this;"Y"==this.selectType?Object(o.addStandardEquipmentSensor)({equipmentId:this.equipmentId}).then(function(t){if(0===t.code){var i=.6*document.body.clientWidth;e.dialogData.dialog_width=i+"px";var a=.75*(.618*i)+"px";e.dialogData.table_style="height:"+a+";width: 96%;margin-left: 2%;",e.dialogData.equipmentId=e.equipmentId,e.openDialogName="dialogEquipmentSensor",e.dialogData.title="设置传感器指标",e.showDialog=!0,e.inLinVisible=!0}}).catch(function(e){}):"N"==this.selectType&&this.$confirm("此操作将删除该设备的全部传感器指标，请谨慎操作！ 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.deleteEquipmentSensorByEquipment)({equipmentId:e.equipmentId}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.dialogClose({resState:"ok"}))}).catch(function(e){})}).catch(function(){e.$message({type:"info",message:"已取消操作"})})},closeDialog:function(e){this.dialogClose(e),this.showDialog=!1,this.isVisible=!1}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",attrs:{model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{margin:"10px 100px"}},[i("el-radio-group",{on:{change:e.radioChange},model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[i("el-radio",{directives:[{name:"show",rawName:"v-show",value:"Y"==this.isBindSensor,expression:"this.isBindSensor == 'Y'"}],attrs:{label:"N"}},[e._v("非联网设备")]),i("br"),e._v(" "),i("el-radio",{directives:[{name:"show",rawName:"v-show",value:"N"==this.isBindSensor,expression:"this.isBindSensor == 'N'"}],attrs:{label:"Y"}},[e._v("联网设备")]),i("br")],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:"N"==this.isBindSensor,expression:"this.isBindSensor == 'N'"}],attrs:{type:"primary"},on:{click:e.save}},[e._v("下一步")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"Y"==this.isBindSensor,expression:"this.isBindSensor == 'Y'"}],attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogSelect.vue";t.default=r.exports},KXGx:function(e,t,i){},Kabk:function(e,t,i){"use strict";var a=i("fFUy"),o=i("Lt5i"),n=i("Isb9"),l={name:"tabs-table",components:{customRowTable:a.a,equipmentCard:o.a,equipmentData:n.a},props:{tableConfig:{type:Object,default:function(){return{}}},tabs:{type:Array,default:function(){return[]}},defaultKey:{type:String,default:""}},data:function(){return{activeName:""}},computed:{},watch:{},methods:{databridge:function(e){this.$emit("databridge",e)},handleClick:function(e,t){this.$emit("tabsKey",this.activeName)},callmethod:function(e){this.$emit("callmethod",e)}},created:function(){this.defaultKey?this.activeName=this.defaultKey:this.activeName=this.tabs[0].key},mounted:function(){}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e._l(e.tabs,function(t,a){return[i("el-tab-pane",{key:a,attrs:{label:t.label,name:t.key}},[t.btnName?i("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"mini",disabled:t.disabled},domProps:{textContent:e._s(t.btnName)},on:{click:function(e){t.method(t)}}}):e._e(),e._v(" "),e.activeName===t.key?i(t.componentName,{tag:"component",attrs:{baseHeight:e.tableConfig.baseHeight?e.tableConfig.baseHeight:"calc(100% - 40px)",baseBorder:e.tableConfig.baseBorder?e.tableConfig.baseBorder:"1px solid #E4E4E4","expand-all":void 0===e.tableConfig["expand-all"]||e.tableConfig["expand-all"],keyValue:void 0===e.tableConfig.keyValue||e.tableConfig.keyValue,configs:e.tableConfig.configs?e.tableConfig.configs[e.activeName]||e.tableConfig.configs:{},customColumn:e.tableConfig.customColumn,columnGlobalStyle:e.tableConfig.columnGlobalStyle,editable:e.tableConfig.editable?e.tableConfig.editable:{},apiObj:t.apiObj||{},mergeColumn:e.tableConfig.mergeColumn},on:{databridge:e.databridge,callmethod:e.callmethod}}):e._e()],1)]})],2)},[],!1,null,null,null);r.options.__file="index.vue";t.a=r.exports},KbnD:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("pIFo");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},fileData:{photoDir:"employee/"},imageUrl:"",politicalData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"political",isglobal:"0"}},defaultSelected:["ebb2eae0e5c3479aa1b19a9251917077"]}}},created:function(){this.temp=this.initData.rowData},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=a(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},handleAvatarSuccess:function(e){if(0==e.code){var t=e.photo;null!=t&&t.trim().length>0&&(this.temp.photo=t,this.imageUrl="/api/"+t),this.$message({message:"图片上传成功！",type:"success",duration:5e3})}else 0!=e.code&&null!=e.msg&&e.msg.trim().length>0&&this.$message.error(e.msg.trim())},beforeAvatarUpload:function(e){var t=e.type;if(t=t.replace("image/",""),-1!="jpg,jpeg,png".indexOf(t)){e.size>5242880&&this.$message({message:"上传员工照片大小不能超过 5MB!",type:"error",duration:5e3})}else this.$message({message:"上传员工照片只能是(jpg,jpeg,png)格式文件!",type:"error",duration:5e3})}},watch:{}},n=(i("+CwU"),i("KHd+")),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"600px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("div",{staticStyle:{"padding-left":"120px"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{name:"fileName",action:e.temp.uploadUrl,data:e.fileData,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?i("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"员工编号:",prop:"code"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.temp.code,callback:function(t){e.$set(e.temp,"code",t)},expression:"temp.code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"性别:",prop:"sexName"}},[i("el-select",{attrs:{disabled:!0},model:{value:e.temp.sex,callback:function(t){e.$set(e.temp,"sex",t)},expression:"temp.sex"}},[i("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"女",value:"0"}})],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"部门:",prop:"deptName"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"岗位:",prop:"postName"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.temp.postName,callback:function(t){e.$set(e.temp,"postName",t)},expression:"temp.postName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"手机号:",prop:"mobile"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.temp.mobile,callback:function(t){e.$set(e.temp,"mobile",t)},expression:"temp.mobile"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.temp.email,callback:function(t){e.$set(e.temp,"email",t)},expression:"temp.email"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出生日期:",prop:"birthday"}},[i("el-date-picker",{staticStyle:{width:"165px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",readonly:!0},model:{value:e.temp.birthday,callback:function(t){e.$set(e.temp,"birthday",t)},expression:"temp.birthday"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入职日期:",prop:"entryDate"}},[i("el-date-picker",{staticStyle:{width:"165px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",readonly:!0},model:{value:e.temp.entryDate,callback:function(t){e.$set(e.temp,"entryDate",t)},expression:"temp.entryDate"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"籍贯:",prop:"nativePlace"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.temp.nativePlace,callback:function(t){e.$set(e.temp,"nativePlace",t)},expression:"temp.nativePlace"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"政治面貌:",prop:"politicalName"}},[i("base-input-select",{staticStyle:{width:"165px"},attrs:{data:e.politicalData.data,disabled:!0},model:{value:e.politicalData.defaultSelected,callback:function(t){e.$set(e.politicalData,"defaultSelected",t)},expression:"politicalData.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"身份证号:",prop:"identityNumber"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.temp.identityNumber,callback:function(t){e.$set(e.temp,"identityNumber",t)},expression:"temp.identityNumber"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"婚姻状况:",prop:"maritalName"}},[i("el-select",{attrs:{disabled:!0},model:{value:e.temp.marital,callback:function(t){e.$set(e.temp,"marital",t)},expression:"temp.marital"}},[i("el-option",{attrs:{label:"未婚",value:"0"}}),e._v(" "),i("el-option",{attrs:{label:"已婚",value:"1"}})],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:2,readonly:!0},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="employeeInfo.vue";t.default=l.exports},Knh7:function(e,t,i){},KpZ4:function(e,t,i){"use strict";var a=i("OK+T");i.n(a).a},KuSK:function(e,t,i){"use strict";i.r(t);i("91GP");var a=i("varj"),o=i("uTIz"),n=i("MPAK"),l=i("9wPf"),s={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{queryForm:{code:"",name:"",type:"",isAutoCommit:"",dtlJsonStr:""},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",state:!0,isShow:!0,plain:!0,icon:"refresh",method:this.resetQuery}],aboveTableConfig:{apiObj:{apiName:"listPageCustomers",params:{fieldCode:"name",genre:"49c0a7ebcb4c4175bd5195837a6a9a13"}},customColumn:[],tempData:{},showIndex:!1,showCheckBox:!0,showTableSet:!1,showAll:!1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"name",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,dragTable:!1,entireRowDrag:!1},addColumns:[{columnIndex:3,prop:"amount",label:"金额",componentName:"input",_cellConfig:{rules:[{required:!0},{greaterThan:["0",!1]}],message:["必填","必须大于零！"]}},{columnIndex:4,prop:"remark",label:"备注",componentName:"input",_cellConfig:{}}],hideColumns:["typeName","provinceName"],tableSelectList:[]}},created:function(){this.queryForm.type=this.initData.type},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){},tableSelected:function(e){this.tableSelectList=e},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.queryForm)},resetQueryTemp:function(){for(var e in this.queryForm)this.queryForm[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.queryForm)},checkColumnByAmount:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o="";null!=a.amount&&(o=a.amount+""),null==o||0==o.trim().length?t=t+"第 "+(i+1)+" 行: 金额为空或空字符串！":null!=o&&o.trim().length>0&&!Object(n.isNumberByValueSystem)(o)?t=t+"第 "+(i+1)+" 行: 金额("+o+") 输入错误，请输入大于零的正整数或(1,2)位小数！":null!=o&&o.trim().length>0&&Object(n.isNumberByValueSystem)(o)&&o/1<=0&&(t=t+"第 "+(i+1)+" 行: 金额("+o+") 输入错误，请输入大于零的正整数或(1,2)位小数！")}return t},confrim:function(){var e=this;if(this.$refs.trabsferTables.getTableSelected(),null!=this.tableSelectList&&0!=this.tableSelectList.length){var t=this.checkColumnByAmount(this.tableSelectList);null!=t&&t.trim().length>0?this.$message({type:"warning",duration:5e3,showClose:!0,message:t}):this.$confirm("是否提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.queryForm.dtlJsonStr=JSON.stringify(e.tableSelectList),e.queryForm.isAutoCommit="true",Object(l.addBatchFinanceBillByPurchase)(e.queryForm).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.queryForm.dtlJsonStr=JSON.stringify(e.tableSelectList),e.queryForm.isAutoCommit="false",Object(l.addBatchFinanceBillByPurchase)(e.queryForm).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"600px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{height:"50px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"90%",margin:"10px auto","padding-top":"10px"},attrs:{inline:!0,model:e.queryForm}},[i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"名称："}},[i("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"名称"},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:10}},[i("div",{attrs:{align:"right"}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:e.queryTable}})],1),e._v(" "),i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:e.resetQueryTemp}})],1)],1)])],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList},on:{"table-selected":e.tableSelected}})],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAdd.vue";t.default=c.exports},L4vu:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("a0Xs");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{formulaDialog:i("Ck00").a},name:"dialog-edit",props:["initData","visible"],data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{pnFormula:[{required:!0,trigger:"change",validator:function(t,i,a){e.temp.pnFormula?a():a(new Error("请填写计量单位转计价单位公式！"))}}],npFormula:[{required:!0,trigger:"change",validator:function(t,i,a){e.temp.npFormula?a():a(new Error("请填写计价单位转计量单位公式！"))}}],punitName:[{required:!0,trigger:"change",validator:function(t,i,a){e.unitData.defaultSelected.length<=0?a(new Error("请选择计价单位")):a()}}]},unitData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"productUnit",isglobal:"0"}},defaultSelected:[]},formTemp:[],showDialog:!1,visibleState:!1,dialogName:"",formulaState:"",Poption:"",Noption:"",Pprecision:0,Nprecision:0}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable),"Y"==this.temp.n2pIsScale?this.Poption=1:"N"==this.temp.n2pIsScale?this.Poption=2:this.Poption=1,this.Pprecision=this.temp.n2pDecimalCount,"Y"==this.temp.p2nIsScale?this.Noption=1:"N"==this.temp.p2nIsScale?this.Noption=2:this.Noption=1,this.Nprecision=this.temp.p2nDecimalCount},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},n2pIsScale:function(){return 1===this.Poption},p2nIsScale:function(){return 1===this.Noption},n2pDecimalCount:function(){return this.Pprecision},p2nDecimalCount:function(){return this.Nprecision}},methods:{closeDialog:function(e){this.visibleState=!1,this.showDialog=!1,e&&("n"===this.formulaState?this.temp.npFormula=e:this.temp.pnFormula=e)},openFormulaEdit:function(e){this.dialogName="formulaDialog",this.showDialog=!0,this.formulaState=e,this.visibleState=!0},dialogOpen:function(){this.unitData.defaultSelected=[this.initData.temp.punit],this.temp.unit=this.initData.temp.punit},unitSelect:function(e){e[0]?(this.temp.unit=e[0],this.unitData.defaultSelected=[e[0]]):(this.temp.unit=[],this.unitData.defaultSelected=[])},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){if(i){t.dialogLoading=!0;var o=t.temp.npFormula,n=t.temp.pnFormula;t.temp.pnFormula=o,t.temp.npFormula=n;var l="N",s=e.n2pIsScale;null!=s&&s&&(l="Y"),t.temp.n2pIsScale=l,t.temp.n2pDecimalCount=e.n2pDecimalCount;var r="N",c=e.p2nIsScale;null!=c&&c&&(r="Y"),t.temp.p2nIsScale=r,t.temp.p2nDecimalCount=e.p2nDecimalCount,Object(a.updateProductUnit)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"620px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"计价单位"==e.temp.type,expression:"temp.type=='计价单位'"}],attrs:{label:"计量单位:",prop:"unitName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.unitName,callback:function(t){e.$set(e.temp,"unitName",t)},expression:"temp.unitName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.punitName+":",prop:"punitName"}},[i("base-input-select",{attrs:{data:e.unitData.data},on:{callback:e.unitSelect},model:{value:e.unitData.defaultSelected,callback:function(t){e.$set(e.unitData,"defaultSelected",t)},expression:"unitData.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:"计价单位"==e.temp.type,expression:"temp.type=='计价单位'"}]},[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"计量单位转换计价单位(公式):",prop:"pnFormula"}},[i("el-input",{attrs:{type:"textarea",rows:"3",disabled:!0},model:{value:e.temp.pnFormula,callback:function(t){e.$set(e.temp,"pnFormula",t)},expression:"temp.pnFormula"}}),e._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){e.openFormulaEdit("p")}}},[e._v("公式编辑器")])],1)],1),e._v(" "),i("el-col",{staticStyle:{"padding-top":"3px"},attrs:{span:8}},[i("el-radio-group",{staticClass:"resetFormulaRadioStyle",staticStyle:{width:"100%"},model:{value:e.Poption,callback:function(t){e.Poption=t},expression:"Poption"}},[i("el-radio",{staticStyle:{display:"block",width:"100%","margin-left":"0","padding-left":"5px"},attrs:{label:1}},[e._v("需要四舍五入")]),e._v(" "),i("el-radio",{staticStyle:{display:"block",width:"100%","margin-left":"0",height:"28px","line-height":"30px","padding-left":"5px"},attrs:{label:2}},[e._v("无需四舍五入")])],1),e._v(" "),i("div",{staticClass:"resetFormulaRadioInputStyle",staticStyle:{display:"block",width:"100%","margin-left":"0","padding-left":"5px"}},[e._v("\n            保留小数"),i("el-input-number",{attrs:{size:"mini",max:4,min:0},model:{value:e.Pprecision,callback:function(t){e.Pprecision=t},expression:"Pprecision"}}),e._v("位\n          ")],1)],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:"计价单位"==e.temp.type,expression:"temp.type=='计价单位'"}]},[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"计价单位转换计量单位(公式):",prop:"npFormula"}},[i("el-input",{attrs:{type:"textarea",rows:"3",disabled:!0},model:{value:e.temp.npFormula,callback:function(t){e.$set(e.temp,"npFormula",t)},expression:"temp.npFormula"}}),e._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){e.openFormulaEdit("n")}}},[e._v("公式编辑器")])],1)],1),e._v(" "),i("el-col",{staticStyle:{"padding-top":"3px"},attrs:{span:8}},[i("el-radio-group",{staticClass:"resetFormulaRadioStyle",staticStyle:{width:"100%"},model:{value:e.Noption,callback:function(t){e.Noption=t},expression:"Noption"}},[i("el-radio",{staticStyle:{display:"block",width:"100%","margin-left":"0","padding-left":"5px"},attrs:{label:1}},[e._v("需要四舍五入")]),e._v(" "),i("el-radio",{staticStyle:{display:"block",width:"100%","margin-left":"0",height:"28px","line-height":"30px","padding-left":"5px"},attrs:{label:2}},[e._v("无需四舍五入")])],1),e._v(" "),i("div",{staticClass:"resetFormulaRadioInputStyle",staticStyle:{display:"block",width:"100%","margin-left":"0","padding-left":"5px"}},[e._v("\n            保留小数"),i("el-input-number",{attrs:{size:"mini",max:4,min:0},model:{value:e.Nprecision,callback:function(t){e.Nprecision=t},expression:"Nprecision"}}),e._v("位\n          ")],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1),e._v(" "),e.showDialog?i(e.dialogName,{tag:"component",attrs:{state:e.formulaState,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);s.options.__file="dialogUnitEdit.vue";t.default=s.exports},LCER:function(e,t,i){"use strict";i.r(t);i("91GP"),i("xfY5");var a=i("uTIz"),o=i("G9cW"),n=i("kAts"),l=i("WIyV"),s=(i("z0WU"),{name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",selectList:[],temp:{},tempLable:{},pageData:null,pageNo:1,unapportionedValue:0,openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null},customColumn:[{columnIndex:"receiveAmount",componentName:"input",_cellConfig:{rules:[{type:"number"},{required:!0},{lessThan:["tempData@currentBalance",!0]},{lessThan:["self@orderAmount(-)self@discountAmount(-)self@haveReceivedAmount",!0]}],message:["输入类型必须是数字！","该单元格是必填项","必须小于等于可分摊总额","本次收款金额与折扣金额之和加上已收金额必须小于等于订单金额！"]}},{columnIndex:"discountAmount",componentName:"input",_cellConfig:{defaultValue:"0.00",rules:[{type:"number"},{lessThan:["self@orderAmount(-)self@receiveAmount(-)self@haveReceivedAmount",!0]}],message:["输入类型必须是数字！","本次收款金额与折扣金额之和加上已收金额必须小于等于订单金额！"]}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,icon:"delete",plain:!0,state:!0,method:this.deleteAllRow}]}],apiObj:{apiName:"listPageOrderReceiveDetail",params:{pageNo:this.pageNo,queryStr:" sOrder.id in ("+this.initData.ids+") ",fieldCode:"sysCode,orderAmount,haveReceivedAmount,nowReceiveAmount,receiveAmount,discountAmount "}},customSummary:{component:{props:["data","setStyle","tempData"],created:function(){},computed:{unapportionedValue:function(){var e=this.data.orderAmount.toFixed(2);return/\d/.test(e)?(this.$emit("custom-summary-value",e),e):(this.$emit("custom-summary-value",""),"输入错误")}},template:'<ul class="clearfix" :style="setStyle">\n                        <li style="float: left;width: 100%"><span>本次分摊总金额：</span><span>{{unapportionedValue}}元</span></li>\n                    </ul>'},data:{orderAmount:""},boxStyle:{width:"220px",float:"right",padding:"10px"},computes:{orderAmount:"table@receiveAmount"}}}},components:{searchBar:a.a,dialogReceiptBalanceEdit:o.default,customBaseTable:l.a},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.temp=this.initData.temp,!this.temp.addBalance&&this.$set(this.temp,"addBalance",""),!this.temp.lastBalance&&this.$set(this.temp,"lastBalance",""),!this.temp.currentBalance&&this.$set(this.temp,"currentBalance",""),this.temp.addBalance?this.temp.currentBalance=Number(this.temp.balance)+Number(this.temp.addBalance):(this.temp.currentBalance=this.temp.balance,this.temp.addBalance=0),this.temp.lastBalance=0},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1,e.resState},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},getData:function(){this.$refs.customBaseTable.getData()},dataBridge:function(e){var t=this;if(this.selectList=e,this.unapportionedValue>0&&this.unapportionedValue-this.temp.currentBalance<=0)if(this.selectList.length>0){var i=JSON.stringify(this.selectList);this.temp.dtlJsonStr=i,this.dialogLoading=!0,Object(n.saveSaleReceiveAndDetail)(this.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"当前界面没有分摊明细，请重新选择分摊明细！"});else this.$message({type:"warning",duration:5e3,showClose:!0,message:"分摊明细总金额必须小于等于分摊总额！"})},customSummaryValue:function(e){this.unapportionedValue=e},deleteAllRow:function(e,t,i){this.deleteData(e)},edit:function(){this.dialogData.temp=this.temp,this.dialogData.tempLable=this.tempLable,this.dialogData.title="本次分摊金额",this.openDialogName="dialogReceiptBalanceEdit",this.showDialog=!0,this.visibleState=!0},save:function(){this.$refs.customBaseTable.getData()}},computed:{dialogName:function(){return this.openDialogName},setApiObj:function(){return this.apiObj.params=Object.assign({},this.apiObj.params,this.searchObj),this.apiObj}},watch:{}}),r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{padding:"20px 10px"}},[i("el-row",{staticStyle:{"text-align":"center"}},[i("el-col",{staticStyle:{height:"100%","vertical-align":"middle"},attrs:{span:5}},[e._v("客户名称："+e._s(e.temp.name))]),e._v(" "),i("el-col",{staticStyle:{height:"100%","vertical-align":"middle"},attrs:{span:5}},[e._v("客户类型："+e._s(e.temp.typeName))]),e._v(" "),i("el-col",{staticStyle:{height:"100%","vertical-align":"middle"},attrs:{span:5}},[e._v("地域："+e._s(e.temp.provinceName))]),e._v(" "),i("el-col",{staticStyle:{height:"100%","vertical-align":"middle"},attrs:{span:5}},[e._v("可分摊总额："+e._s(e.temp.currentBalance))])],1)],1),e._v(" "),i("div",{staticStyle:{padding:"0 10px"}},[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_sale_receivables_receipt_dialogReceiptAdd0",keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.setApiObj,tempData:e.temp,componentId:"customBaseTable",showAll:!1,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.dataBridge,"custom-summary-value":e.customSummaryValue}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);c.options.__file="dialogReceiptAdd.vue";t.default=c.exports},LGoM:function(e,t,i){"use strict";i("f3/d"),i("KKXr"),i("Z2Ku"),i("L9s1"),i("rGqo"),i("yt8O"),i("RW0V"),i("91GP");var a=i("uTIz"),o=i("WIyV"),n=(i("XfO3"),i("HEwt"),i("a1Th"),i("rE2o"),i("ioFf"),i("xfY5"),i("Zni2")),l=i.n(n),s=i("XXtD"),r=(i("75ce"),i("lLGD"),i("0o9m"),i("AH3D"),i("Ynxi"),i("zixQ"),i("4Cjf"));function c(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var d={name:"chart-sales-report-volume-line",components:{chart:l.a,ChartMask:s.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:[],salesVolume:[],salesNumber:[],months:[]}},computed:{hasData:function(){return!!this.chartData.length},setMonths:function(){return this.months.map(function(e){var t=e.split("-");return t[1]=t[1]-0+"月",t.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,c(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var e=Math.max.apply(Math,c(this.salesNumber))-0,t=(Math.floor(e+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,c(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var e=Math.max.apply(Math,c(this.salesVolume))-0,t=(Math.floor(e+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销售额曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:this.legendList,left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:this.dateList}],yAxis:[{type:"value"}],series:this.serieList}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)},dateList:function(){if(!this.chartData||!this.chartData.length)return[];var e=[];return this.chartData.forEach(function(t){e.length<t.dateData.length&&(e=t.dateData)}),e},legendList:function(){if(!this.chartData||!this.chartData.length)return[];var e=this.chartData.map(function(e){return e.name||""});return e},serieList:function(){var e=(this.chartData||[]).map(function(e){return{name:e.name,data:e.seriesData,type:"line",stack:"总量",areaStyle:{}}});return e}},watch:{},methods:{httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.chartData=r.a.trend.result||[],e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.chartData=t.result||[],e.loading=!1}).catch(function(t){e.loading=!1})}},created:function(){this.httpRequest()},render:function(e){return e("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?e("div",[e("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):e("chart-Mask",{attrs:{loading:this.loading}})])}};function u(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p={name:"chart-sales-report-number-line",components:{chart:l.a,ChartMask:s.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:[],salesVolume:[],salesNumber:[],months:[]}},computed:{hasData:function(){return!!this.chartData.length},setMonths:function(){return this.months.map(function(e){var t=e.split("-");return t[1]=t[1]-0+"月",t.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,u(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var e=Math.max.apply(Math,u(this.salesNumber))-0,t=(Math.floor(e+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,u(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var e=Math.max.apply(Math,u(this.salesVolume))-0,t=(Math.floor(e+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销量曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:this.legendList,left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:this.dateList}],yAxis:[{type:"value"}],series:this.serieList}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)},dateList:function(){if(!this.chartData||!this.chartData.length)return[];var e=[];return this.chartData.forEach(function(t){e.length<t.dateData.length&&(e=t.dateData)}),e},legendList:function(){return this.chartData&&this.chartData.length?this.chartData.map(function(e){return e.name||""}):[]},serieList:function(){return(this.chartData||[]).map(function(e){return{name:e.name,data:e.seriesData,type:"line",stack:"总量",areaStyle:{}}})}},watch:{},methods:{httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.chartData=r.a.trend.result||[],e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.chartData=t.result||[],e.loading=!1}).catch(function(t){e.loading=!1})}},created:function(){this.httpRequest()},render:function(e){return e("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?e("div",[e("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):e("chart-Mask",{attrs:{loading:this.loading}})])}},m=(i("wDdD"),{name:"product-sale-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}}},components:{chart:l.a,ChartMask:s.a},data:function(){return{chartTitles:["销售额占比","销量占比"],chartKeys:["productVolume","productNumber"],chartData:null,loading:!0}},computed:{hasData:function(){return!!this.chartData},formatChartData:function(){var e=[],t=[];return(this.chartData||[]).forEach(function(i){e.push({name:i.name,value:i.volume}),t.push({name:i.name,value:i.number})}),[e,t]},setSeriesData:function(){var e=this;return this.chartTitles.map(function(t,i){return{name:"产品",type:"pie",data:e.formatChartData[i],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}})},defaultOption:function(){var e=this;return e.chartKeys.map(function(t,i){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+e.chartTitles[i]+": {c} ({d}%)"},series:e.setSeriesData[i]}})}},methods:{httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.chartData=e.tempCreateData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.chartData=t.result||[],e.loading=!1}).catch(function(t){e.loading=!1})},tempCreateData:function(){var e=this,t={};return this.chartKeys.forEach(function(i){t[i]=e.genData(6)}),t},genData:function(e){for(var t=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],i=[],a=[],o={},n=0;n<e;n++)name=Math.random()>.65?l(4,1)+"·"+l(3,0):l(2,1),i.push(name),a.push({name:name,value:Math.round(1e5*Math.random())}),o[name]=n<6;return a;function l(e,i){for(var a=Math.ceil(Math.random()*e+i),o=[],n=0;n<a;n++)o.push(t[Math.round(Math.random()*t.length-1)]);return o.join("")}}},created:function(){this.httpRequest()},render:function(e){var t=this;return e("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.chartTitles.map(function(i,a){return e("el-col",{attrs:{span:12},class:"chartViews"},[e("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:t.loading}]},[e("div",{style:"text-align:center;"},[i]),e("div",{style:{height:"".concat(parseInt(t.height)-120,"px"),position:"relative"}},[t.hasData?e("chart",{style:{height:"100%",width:"100%"},attrs:{options:t.defaultOption[a]}}):e("chart-Mask",{attrs:{loading:t.loading}})])])])})])}}),h={name:"product-customer-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}},list:{type:Array,default:function(){return[]}}},components:{chart:l.a,ChartMask:s.a},data:function(){return{chartTitles:["销售额占比","销量占比"],chartKeys:["productVolume","productNumber"],baseOption:{},chartData:[],loading:!0}},computed:{initLayout:function(){var e=this.list.length;return e<4?{height:"".concat(parseInt(this.height)-120,"px"),span:24/e}:{height:"200px",span:8}},hasData:function(){return!!this.chartData.length},setSeriesData:function(){return this.chartData.map(function(e,t){return{name:"客户",type:"pie",data:e.data||[],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}})},defaultOption:function(){var e=this;return e.list.map(function(t,i){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+t+": {c} ({d}%)"},series:e.setSeriesData}})}},methods:{httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.chartData=e.tempCreateData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.apiObj.params).then(function(t){e.chartData=t.result||[],e.loading=!1}).catch(function(t){e.loading=!1})},tempCreateData:function(){var e=this,t={};return this.chartKeys.forEach(function(i){t[i]=e.genData(6)}),t},genData:function(e){for(var t=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],i=[],a=[],o={},n=0;n<e;n++)name=Math.random()>.65?l(4,1)+"·"+l(3,0):l(2,1),i.push(name),a.push({name:name,value:Math.round(1e5*Math.random())}),o[name]=n<6;return a;function l(e,i){for(var a=Math.ceil(Math.random()*e+i),o=[],n=0;n<a;n++)o.push(t[Math.round(Math.random()*t.length-1)]);return o.join("")}}},created:function(){this.httpRequest()},render:function(e){var t=this;return e("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.list.map(function(i,a){return e("el-col",{attrs:{span:t.initLayout.span},class:"chartViews"},[e("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:t.loading}]},[e("div",{style:"text-align:center;"},[i]),e("div",{style:{height:t.initLayout.height,position:"relative"}},[t.hasData?e("chart",{style:{height:"100%",width:"100%"},attrs:{options:t.defaultOption[a]}}):e("chart-Mask",{attrs:{loading:t.loading}})])])])})])}},g={name:"product-staff-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}},list:{type:Array,default:function(){return[]}}},components:{chart:l.a,ChartMask:s.a},data:function(){return{chartTitles:["销售额占比","销量占比"],chartKeys:["productVolume","productNumber"],baseOption:{},chartData:[],loading:!0}},computed:{initLayout:function(){var e=this.list.length;return e<4?{height:"".concat(parseInt(this.height)-120,"px"),span:24/e}:{height:"200px",span:8}},hasData:function(){return!!this.chartData.length},setSeriesData:function(){return this.chartData.map(function(e,t){return{name:"员工",type:"pie",data:e.data||[],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}})},defaultOption:function(){var e=this;return e.list.map(function(t,i){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+t+": {c} ({d}%)"},series:e.setSeriesData}})}},methods:{httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.chartData=e.tempCreateData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.apiObj.params).then(function(t){e.chartData=t.result||[],e.loading=!1}).catch(function(t){e.loading=!1})},tempCreateData:function(){var e=this,t={};return this.chartKeys.forEach(function(i){t[i]=e.genData(6)}),t},genData:function(e){for(var t=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],i=[],a=[],o={},n=0;n<e;n++)name=Math.random()>.65?l(4,1)+"·"+l(3,0):l(2,1),i.push(name),a.push({name:name,value:Math.round(1e5*Math.random())}),o[name]=n<6;return a;function l(e,i){for(var a=Math.ceil(Math.random()*e+i),o=[],n=0;n<a;n++)o.push(t[Math.round(Math.random()*t.length-1)]);return o.join("")}}},created:function(){this.httpRequest()},render:function(e){var t=this;return e("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.list.map(function(i,a){return e("el-col",{attrs:{span:t.initLayout.span},class:"chartViews"},[e("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:t.loading}]},[e("div",{style:"text-align:center;"},[i]),e("div",{style:{height:t.initLayout.height,position:"relative"}},[t.hasData?e("chart",{style:{height:"100%",width:"100%"},attrs:{options:t.defaultOption[a]}}):e("chart-Mask",{attrs:{loading:t.loading}})])])])})])}},f=i("KA1N"),b={name:"charts-sale-product",components:{baseTable:o.a,searchBar:a.a,volumeLine:d,numberLine:p,salePie:m,customerPie:h,staffPie:g},data:function(){return{guid:"",searchList:[{label:"货品编码",type:"input",mapKey:"productCode",configs:{},placeholder:"请输入编码"},{label:"货品名称",type:"input",mapKey:"productName",configs:{},placeholder:"请输入名称"},{label:"型号规格",type:"input",mapKey:"productNuit",configs:{},placeholder:"请输入规格"},{label:"属性",type:"input",mapKey:"productAttr",configs:{},placeholder:"请输入属性"},{label:"统计周期",type:"radio",mapKey:"cycle",configs:{options:["日","月","年"],defaultValue:0}},{label:"日期范围",type:"date",mapKey:"date",configs:{clearable:!0,name:"",type:"daterange",pickerOptions:{disabledDate:[null,Object(f.a)()],hideShortcuts:!0},dynamic:{key:"cycle",options:{0:"daterange",1:"monthrange",2:"monthrange"}}},placeholder:"请选择"}],searchObj:{},tableConfigList:[{apiObj:{apiName:"salesProductQueryByDMY",params:{}},showCheckBox:!0,useSummary:!0}],userSelectedList:[],dialogVisible:[!1,!1,!1,!1,!1],dialogIndex:0,dialogTitle:["销售额曲线","销量曲线","销量占比","产品客户","产品员工"],volumeLineApiObj:{apiName:"salesProductVolumeByDMY",params:{}},numberLineApiObj:{apiName:"salesProductNumberByDMY",params:{}},salepieApiObj:{apiName:"salesProductProportion",params:{}},customerpieApiObj:{apiName:"salesProductCustomer",params:{}},staffpieApiObj:{apiName:"salesProductEmployee",params:{}}}},computed:{systemInfo:function(){return this.$store.getters.systemInfo},size:function(){return this.$store.getters.size},tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0)-36+"px":"100%"},setVolumeLineApiObj:function(){var e=Object.assign({},this.searchObj,{productIds:this.userSelectedList.map(function(e){return e.id||""})||[]});return this.volumeLineApiObj.params=Object.assign({},this.volumeLineApiObj.params,e),this.volumeLineApiObj},setNumberLineApiObj:function(){var e=Object.assign({},this.searchObj,{productIds:this.userSelectedList.map(function(e){return e.id||""})||[]});return this.numberLineApiObj.params=Object.assign({},this.numberLineApiObj.params,e),this.numberLineApiObj},formatParams:function(){var e={cycle:"D",startDate:Object(f.a)("YYYY-MM-DD",this.setDate("D",!0)),endDate:Object(f.a)("YYYY-MM-DD",this.setDate("D",!1))},t=Object.keys(this.searchObj);if(t.length){if(t.includes("cycle"))switch(this.searchObj.cycle){case 0:e.cycle="D";break;case 1:e.cycle="M";break;case 2:e.cycle="Y";break;default:e.cycle="D"}t.includes("date")&&this.searchObj.date.length?(e.startDate=Object(f.a)("YYYY-MM-DD",this.searchObj.date[0]),e.endDate=Object(f.a)("YYYY-MM-DD",this.searchObj.date[1])):"D"!==e.cycle&&(delete e.startDate,delete e.endDate)}return e}},methods:{setLastDate:function(e){return["01","03","05","07","08","10","12"].includes(e)?"31":"02"==e?((new Date).getFullYear()-0)%4==0?"29":"28":"30"},setDate:function(e,t){var i=Object(f.a)().split("-");return"D"==e&&(i[2]=t?"01":i[2]),"M"!=e&&"Y"!=e||(i[2]=t?"01":this.setLastDate(i[1]),i[1]=t?"01":i[1]),i.join("-")},sendGuid:function(e){this.guid=e},searchMap:function(e){this.userSelectedList=[],this.searchObj=e,this.tableConfigList[0].apiObj.params=Object.assign({},this.formatParams),this.volumeLineApiObj.params=Object.assign({},this.formatParams),this.numberLineApiObj.params=Object.assign({},this.formatParams)},databridge:function(e){this.userSelectedList=e},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},showSaleProductDialog:function(e){if(this.resetSaleProductDialog(),this.dialogIndex=e,3===e||4===e){var t=JSON.parse(JSON.stringify(this.userSelectedList));this.$refs.customBaseTable.getData();var i=this.setPieParams(t);this.customerpieApiObj.params=Object.assign({},i),this.staffpieApiObj.params=Object.assign({},i)}this.dialogVisible[this.dialogIndex]=!0},resetSaleProductDialog:function(){this.dialogVisible=[!1,!1,!1,!1,!1]},setPieParams:function(e){var t=[],i=[];e.forEach(function(e){t.includes(e.id)||(t.push(e.id),i.push(e.name))});var a=this.userSelectedList[0].date,o=this.userSelectedList[this.userSelectedList.length-1].date,n=this.formatParams.cycle;return this.userSelectedList=i,{productIds:t,startDate:a,endDate:o,cycle:n}}},created:function(){this.tableConfigList[0].apiObj.params=Object.assign({},this.formatParams),this.volumeLineApiObj.params=Object.assign({},this.formatParams),this.numberLineApiObj.params=Object.assign({},this.formatParams)}},v=(i("l/VW"),i("KHd+")),D=Object(v.a)(b,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sale-product"},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,inChart:!0},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",[i("el-button",{attrs:{type:"primary",size:e.size},on:{click:function(t){e.showSaleProductDialog(0)}}},[e._v("销售额曲线")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:e.size},on:{click:function(t){e.showSaleProductDialog(1)}}},[e._v("销量曲线")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:e.size},on:{click:function(t){e.showSaleProductDialog(2)}}},[e._v("销量占比")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:e.size,disabled:!e.userSelectedList.length},on:{click:function(t){e.showSaleProductDialog(3)}}},[e._v("产品客户")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:e.size,disabled:!e.userSelectedList.length},on:{click:function(t){e.showSaleProductDialog(4)}}},[e._v("产品员工")])],1),e._v(" "),i("el-row",{staticStyle:{"border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.tableHeight,"margin-top":e.searchList.length?"10px":"0"}},[i("base-table",{ref:"customBaseTable",attrs:{tableConfigList:e.tableConfigList},on:{databridge:e.databridge,callmethod:e.callMethod}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.dialogTitle[e.dialogIndex],"close-on-click-modal":!1,visible:e.dialogVisible[e.dialogIndex],width:"mini"===e.size?"800px":"1200px"},on:{"update:visible":function(t){e.$set(e.dialogVisible,e.dialogIndex,t)}}},[e.dialogVisible[0]?[i("volume-line",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.volumeLineApiObj}})]:e.dialogVisible[1]?[i("number-line",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.numberLineApiObj}})]:e.dialogVisible[2]?[i("sale-pie",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.salepieApiObj}})]:e.dialogVisible[3]?[i("customer-pie",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.customerpieApiObj,list:e.userSelectedList}})]:e.dialogVisible[4]?[i("staff-pie",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.staffpieApiObj,list:e.userSelectedList}})]:e._e(),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.resetSaleProductDialog}},[e._v("关 闭")])],1)],2)],1)},[],!1,null,"0c94df1c",null);D.options.__file="index.vue";t.a=D.exports},LKBe:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("xfY5");var a=i("R1DK");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{afterCount:[{required:!0,message:"请填写调整后数量！",trigger:"change"},{type:"number",message:"数量必须为数字值"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.beforeCount=this.initData.temp.stockCount)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,Object(a.updateWarehouseProduct)(t.temp).then(function(i){t.dialogLoading=!1,0===i.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,e.initData.temp.stockCount=new Number(t.temp.afterCount).toFixed(2),t.dialogClose({resState:"ok",afterCount:new Number(t.temp.afterCount).toFixed(2)}))}).catch(function(e){t.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"安全库存调整",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"150px"}},[i("el-form-item",{attrs:{label:"调整前库存数量:",prop:"beforeCount"}},[i("el-input",{staticStyle:{width:"140px"},attrs:{disabled:!0},model:{value:e.temp.beforeCount,callback:function(t){e.$set(e.temp,"beforeCount",t)},expression:"temp.beforeCount"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"调整后库存数量:",prop:"afterCount"}},[i("el-input",{staticStyle:{width:"140px"},model:{value:e.temp.afterCount,callback:function(t){e.$set(e.temp,"afterCount",e._n(t))},expression:"temp.afterCount"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogStock.vue";t.default=s.exports},LQ5K:function(e,t,i){},LRel:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("HhAy");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-add",props:["initData","visible"],components:{},data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,selectTree:{},temp:{},tempLable:{},tempNotEditable:{deptName:!0},tempShow:{deptName:!0},rules:{name:[{required:!0,trigger:"change",message:"请选择货品"}],ratio:[{required:!0,trigger:"change",validator:function(e,t,i){t?/^[0-9]+(.[0-9]{1,2})?$/.test(t)?t<=0?i(new Error("用料比例必须大于零！")):i():i(new Error("请填写正确的用料比例，只能填写数字！")):i(new Error("用料比例必须大于零！"))}}]},optionData:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择货品",width:"80%",treeUrl:"/system/dictionary/treeDictionarys",treeParm:{dictionaryKey:"productGenre"},tableUrl:"/base/product/listPageProducts",tableParm:{fieldCode:"prodInfo,unitName,genreName,remark",prodColumnKey:"code,name,spec,property",pathId:this.initData.selectTree.pathId},temp:{}},dialogName:"dialogTreeOption"}}}},created:function(){this.initData.selectTree&&(this.selectTree=this.initData.selectTree),this.initData.temp&&(this.temp=this.initData.temp,this.temp.isdefault="1",this.temp.ratio&&(this.temp.ratio=this.temp.ratio.substring(2))),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},optionSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.prodId=e[0].id,this.temp.name=e[0].name,this.temp.genreName=e[0].genreName,this.temp.unitName=e[0].unitName,this.temp.typeName=e[0].typeName,this.temp.spec=e[0].spec)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateBomTree)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"500px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"400px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"上级名称:"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.selectTree.name,callback:function(t){e.$set(e.selectTree,"name",t)},expression:"selectTree.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"选择货品:",prop:"name"}},[i("base-input-option",{attrs:{dialog:e.optionData.dialog},on:{callback:e.optionSelect},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.spec+":",prop:"spec"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.spec,callback:function(t){e.$set(e.temp,"spec",t)},expression:"temp.spec"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.genreName+":",prop:"genreName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.genreName,callback:function(t){e.$set(e.temp,"genreName",t)},expression:"temp.genreName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.typeName+":",prop:"typeName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.unitName+":",prop:"unitName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.unitName,callback:function(t){e.$set(e.temp,"unitName",t)},expression:"temp.unitName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"单件用量:",prop:"ratio"}},[i("el-input",{model:{value:e.temp.ratio,callback:function(t){e.$set(e.temp,"ratio",t)},expression:"temp.ratio"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogTreeEdit.vue";t.default=s.exports},LTGG:function(e,t,i){},LUHp:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("Qe0A"),l=i("a0Xs"),s=i("wk8/");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",parentId:""}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1",notInids:"'def4b13175dc44b08d7a0315b811700e','cb0a55d81e754cd3b59715d225dab087','609fa44c031847569a1d9e2516be4b41'"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(l.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={id:l.id,productId:l.productId,remark:l.remark,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.updateWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]);var t=this.temp.type;this.temp.deptName="",this.temp.deptId="",-1!="cb0a55d81e754cd3b59715d225dab087".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"5"}):-1!="609fa44c031847569a1d9e2516be4b41".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"2"}):-1!="9459be975cd94ada8443cdf32f52c2be".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}):-1!="4cba5d3815644b26920777512a20474b".indexOf(t)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,Object(s.findUserDepartmentBySystemUser)({userId:this.temp.makeId}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_officeSupplies_officeSuppliesOut_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},LUos:function(e,t,i){},Lgo6:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("ywZ6"),l=i("vet8");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddSupplier:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:"",deleteIds:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,price,priceSum,remark",parentId:"",type:"edit",isNeedPage:"false"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"price",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["单价必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"priceSum",width:"120",componentName:"input",_cellConfig:{compute:"self@priceCount(*)self@price",editable:!1}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>￥ {{data.total.toFixed(2)}}</span></li>\n                    </ul>'},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},data:{total:"0.00"},computes:{total:"table@priceSum"}},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"3"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="采购入库",this.temp.type="d78ceba5beef41f5be16f0ceee775399",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"},this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.$refs.orderAddDialog.getData(),this.dialogData.data=this.orderDtlList,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={id:n.id,productId:n.productId,price:n.price,remark:n.remark,priceCount:n.priceCount,priceUnit:n.priceUnit,p2nFormula:n.p2nFormula,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.updateWarehouseInByWc)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:"",priceCount:"",remark:"",price:"0.00",priceSum:"0.00"};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseInWC_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogEdit.vue";t.default=d.exports},Lkhd:function(e,t,i){"use strict";var a=i("GxsS");i.n(a).a},LnJg:function(e,t,i){"use strict";var a=i("46wi");i.n(a).a},LnPG:function(e,t,i){"use strict";var a=i("d6kd");i.n(a).a},LnwY:function(e,t,i){},Lt5i:function(e,t,i){"use strict";i("f3/d"),i("xfY5");var a={name:"text-tooltip",props:{str:[String],txtSize:[String],parentSize:[String],parentWidth:[String,Number]},computed:{setStr:function(){return this.str||""},setTextSize:function(){return this.txtSize||1},setParentSize:function(){return this.parentSize||"14px"},boxWidth:function(){return this.parentWidth?"string"==typeof this.parentWidth?parseFloat(this.parentWidth):this.parentWidth:0},isTooltip:function(){return!(!this.boxWidth||!this.textWidth)&&this.boxWidth<this.textWidth+1}},data:function(){return{textWidth:0}},created:function(){this.textWidth=this.textSize(this.setParentSize,this.setTextSize,"",this.setStr).width},mounted:function(){},methods:{textSize:function(e,t,i,a){var o=document.createElement("div"),n=document.createElement("span"),l={};return o.style.visibility="hidden",o.style.fontSize=e,l.width=n.offsetWidth,l.height=n.offsetHeight,n.style.fontSize=t,n.style.fontFamily=i,n.style.display="inline-block",o.appendChild(n),document.body.appendChild(o),void 0!==n.textContent?n.textContent=a:n.innerText=a,l.width=parseFloat(window.getComputedStyle(n).width)-l.width,l.height=parseFloat(window.getComputedStyle(n).height)-l.height,document.body.removeChild(o),l}},watch:{setParentSize:function(){this.textWidth=this.textSize(this.setParentSize,this.setTextSize,"",this.setStr).width}}},o=(i("R+4s"),i("KHd+")),n=Object(o.a)(a,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.setStr&&this.isTooltip?[t("el-tooltip",{attrs:{effect:"dark",content:this.setStr,placement:"top-start"}},[t("div",{staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},domProps:{textContent:this._s(this.setStr)}})])]:[t("div",{staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},domProps:{textContent:this._s(this.setStr)}})]],2)},[],!1,null,null,null);n.options.__file="index.vue";var l={name:"equipment-card",components:{textTooltip:n.exports},props:{baseHeight:{type:String,default:""},baseBorder:{type:String,default:""},configs:{type:Object,default:function(){return{}}},apiObj:{type:Object,default:function(){return{}}},renameKey:{type:Object,default:function(){return null}},rowNum:{type:Number,default:4},cardData:{type:Object,default:function(){return null}},inDialog:{type:Boolean,default:!1}},data:function(){return{isLoading:!1,viewWidth:0,cardWidth:0,cardList:[],textParentWidth:0,textParentHeight:0,selectedCardIndex:-1,isVisible:!1,equimentData:null,submitForm:{faultDescribe:""},dialogLoading:!1}},directives:{},computed:{setCardList:function(){return this.inDialog?[this.cardData]:this.cardList},size:function(){return this.$store.getters.size},sysClientWidth:function(){return this.$store.getters.systemInfo.clientWidth||0},setViewWidth:function(){return this.configs.viewWidth?"".concat(this.configs.viewWidth,"px"):"100%"},adapted:function(){return this.renameKey||{name:"name",id:"id",code:"code"}},setCardViewPadding:function(){return this.inDialog||1===this.rowNum?10:this.sysClientWidth>=1920?45:this.sysClientWidth>=1440?35:this.sysClientWidth>=1366?25:10},setCardHeight:function(){return.9*this.cardWidth+"px"},fontSizeConstant:function(){return this.setCardViewPadding>35?20:17},setCardFontSize:function(){return this.cardWidth?this.cardWidth/this.fontSizeConstant+"px":null},setTextFontSize:function(){return"1em"},setLoading:function(){return 1!==this.rowNum&&this.isLoading}},methods:{save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(!t)return!1;e.dialogLoading=!0,e.$api.addEquipmentRepair({equipmentId:e.equimentData.id,equipmentCode:e.equimentData.code,equipmentName:e.equimentData.name,companyId:e.$storage.get("userInfo").companyId,faultDescribe:e.submitForm.faultDescribe}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,!e.inDialog&&e.httpRequests())}).catch(function(t){e.dialogLoading=!1})})},dialogClose:function(){this.submitForm.faultDescribe="",this.equimentData=null},setBtnState:function(e){return!!e.alarmId},getSize:function(){this.$el&&(this.cardWidth=this.$el.offsetWidth/this.rowNum-2*this.setCardViewPadding,this.setCardList.length&&this.cardViewHeight())},cardViewHeight:function(){var e=this;e.$el&&e.$nextTick(function(t){var i=e.$el.querySelector("#textView");i&&(e.textParentWidth=i.offsetWidth,e.textParentHeight=i.offsetHeight)})},httpRequests:function(){var e=this;this.isLoading=!0,this.$api[this.apiObj.apiName](this.apiObj.params).then(function(t){e.cardList=t.EquipmentState||[],e.cardViewHeight(),1===e.rowNum&&(e.$emit("databridge",e.cardList[0]),e.selectedCardIndex=0),e.isLoading=!1}).catch(function(t){e.isLoading=!1})},setEquipmentStateColor:function(e){if(!e)return{"background-color":"#e9e9e9"};var t={"background-color":""};switch(e){case"0":t["background-color"]="#66CCFF";break;case"1":t["background-color"]="#009900";break;case"2":case"3":t["background-color"]="#FF9900";break;default:t["background-color"]="#e9e9e9"}return t},setSensorText:function(e){if(!e)return"";var t="";switch(e){case"Y":t="联网设备";break;case"N":t="非联网设备"}return t},setSensorOnline:function(e){if(!e)return"未知";var t="未知";switch(e){case"1":t="在线";break;case"0":t="不在线"}return t},setFault:function(e){e&&e&&(this.equimentData=e,this.isVisible=!0)},cardClick:function(e,t){if(this.inDialog)return!1;this.selectedCardIndex=t,this.$emit(1===this.rowNum?"databridge":"callmethod",e)},setCardShadow:function(e){return this.selectedCardIndex===e?"always":"hover"}},watch:{sysClientWidth:function(){this.getSize()},"apiObj.params":function(){!this.inDialog&&this.httpRequests()}},created:function(){},mounted:function(){this.getSize(),!this.inDialog&&this.httpRequests()}},s=(i("ItSD"),Object(o.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.setLoading,expression:"setLoading"}],ref:"equipmentCard",staticClass:"equipmentCard clearfix",style:{width:e.setViewWidth,height:e.baseHeight?e.baseHeight:"100%",border:e.baseBorder?e.baseBorder:"none"}},[e.setCardList.length?e._l(e.setCardList,function(t,a){return i("div",{key:a,staticClass:"cardView",staticStyle:{float:"left","box-sizing":"border-box"},style:{padding:e.setCardViewPadding+"px",width:100/e.rowNum+"%"}},[i("el-card",{style:{"font-size":e.setCardFontSize},attrs:{"body-style":{padding:"0px"},shadow:e.inDialog?"always":e.setCardShadow(a)}},[i("div",{staticStyle:{"box-sizing":"border-box",padding:"8px"},style:{height:e.setCardHeight,cursor:e.inDialog?"":"pointer"},attrs:{title:e.inDialog?"":"点击查看设备数据"},on:{click:function(i){e.cardClick(t,a)}}},[t.photo?[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:""+e.$baseUrl+t.photo}})]:[i("div",{staticStyle:{height:"100%","padding-top":"20%","text-align":"center"}},[e._v("设备照片缺失")])]],2),e._v(" "),i("div",{staticClass:"clearfix",staticStyle:{position:"relative",padding:"5px"},style:e.setEquipmentStateColor(t.equipmentState)},[i("div",{staticStyle:{float:"left",width:"60%"},style:{"font-size":e.setTextFontSize},attrs:{id:"textView"}},[i("text-tooltip",{attrs:{str:"设备编码："+(t.code||""),parentWidth:e.textParentWidth,txtSize:e.setTextFontSize,parentSize:e.setCardFontSize}}),e._v(" "),i("text-tooltip",{attrs:{str:"设备名称："+(t.name||""),parentWidth:e.textParentWidth,txtSize:e.setTextFontSize,parentSize:e.setCardFontSize}}),e._v(" "),i("text-tooltip",{attrs:{str:"设备型号："+(t.spec||""),parentWidth:e.textParentWidth,txtSize:e.setTextFontSize,parentSize:e.setCardFontSize}}),e._v(" "),i("text-tooltip",{attrs:{str:"所属部门："+(t.deptName||""),parentWidth:e.textParentWidth,txtSize:e.setTextFontSize,parentSize:e.setCardFontSize}}),e._v(" "),i("text-tooltip",{attrs:{str:"状态："+(t.equipmentStateName||""),parentWidth:e.textParentWidth,txtSize:e.setTextFontSize,parentSize:e.setCardFontSize}})],1),e._v(" "),i("div",{staticStyle:{float:"left",width:"40%",position:"relative"},style:{height:e.textParentHeight+"px"}},[i("el-tag",{staticStyle:{color:"#009900",width:"100%","text-align":"center",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{color:"#F2F2F2",size:e.size}},[e._v("\n                "+e._s(e.setSensorText(t.isBindSensor))+"\n              ")]),e._v(" "),"联网设备"===e.setSensorText(t.isBindSensor)?i("div",[i("el-tag",{staticStyle:{width:"100%","text-align":"center"},style:{color:"1"===t.equipmentActivity?"#009900":"#AEAEAE"},attrs:{color:"#F2F2F2",size:e.size}},[e._v(e._s(e.setSensorOnline(t.equipmentActivity)))])],1):e._e(),e._v(" "),e.inDialog||1===e.rowNum?e._e():i("div",{staticStyle:{position:"absolute",right:"0",bottom:"-3px",width:"45%",height:"40%",padding:"2%"}},[i("div",{staticStyle:{height:"100%",position:"relative"}},[i("base-button",{staticClass:"cardBtn",attrs:{name:"",icon:"xiuli",size:e.size,type:"",state:e.setBtnState(t)},on:{myclick:function(i){e.setFault(t)}}}),e._v(" "),"1"===t.alarmState?i("div",{staticStyle:{position:"absolute",bottom:"0",left:"-150%"}},[i("el-tag",{staticStyle:{color:"#ff0000","text-align":"center"},attrs:{color:"#F2F2F2",size:e.size}},[e._v("故障")])],1):e._e()],1)])],1)])])],1)}):[i("div",{staticStyle:{"padding-top":"20%","text-align":"center"}},[e._v("暂无数据")])],e._v(" "),i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"},{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],attrs:{title:"故障报修",visible:e.isVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":"",width:"350px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[i("div",{staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{model:e.submitForm,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"设为故障设备:",rules:[{required:!0,message:"故障描述不能为空"}]}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"故障描述",type:"textarea",rows:"3"},model:{value:e.submitForm.faultDescribe,callback:function(t){e.$set(e.submitForm,"faultDescribe",t)},expression:"submitForm.faultDescribe"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])],2)},[],!1,null,null,null));s.options.__file="index.vue";t.a=s.exports},Lu7v:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("63W0");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{maintainDateStr:[{required:!0,trigger:"change",message:"请填写计划保养时间"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",modeId:"",code:"",name:"",maintainDateStr:""}}},created:function(){this.formData.id=this.initData.rowData.id,this.formData.modeId=this.initData.rowData.modeId,this.formData.code=this.initData.rowData.code,this.formData.name=this.initData.rowData.name,this.formData.maintainDateStr=this.initData.rowData.maintainDateStr},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.updateMaintainPlanByCustom)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"设备编码:",prop:"code"}},[i("el-input",{staticStyle:{width:"250px"},attrs:{readonly:!0},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"设备名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"250px"},attrs:{readonly:!0},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"计划保养时间:",prop:"maintainDateStr"}},[i("el-date-picker",{staticStyle:{width:"250px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.formData.maintainDateStr,callback:function(t){e.$set(e.formData,"maintainDateStr",t)},expression:"formData.maintainDateStr"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="editCustom.vue";t.default=s.exports},M994:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("6wnd");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{outExecuteId:"",productId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){this.outExecuteId=this.initData.outExecuteId,this.productId=this.initData.productId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.rebackWarehouseOutExecuteBySimple)({outExecuteId:e.outExecuteId,productId:e.productId,remark:e.temp.remark}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退单原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogRebackWarehouseOut.vue";t.default=s.exports},"MR/n":function(e,t,i){"use strict";i.r(t);i("f3/d"),i("Oyvg");var a=i("9I58"),o=i("WIyV"),n=i("sanI"),l=i("8Vv6"),s=i("aZSg"),r=(i("rwyD"),i("a0Xs")),c=i("K77I"),d={components:{customBaseTable:o.a,dialogAddCustomer:n.default,selectProductBySaleOrder:a.default},mixins:[c.a],props:["initData","visible"],data:function(){var e=this;return{productUnit:{},rowData:{},rules:{customerName:[{required:!0,message:"请选择客户名称",trigger:"change"}],receiptTypeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.temp.receiptType.length<=0?a(new Error("请选择发票类型")):a()}}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}],orderDate:[{required:!0,message:"请填写下单日期",trigger:"change"}],expectDate:[{required:!0,message:"请填写约定交期",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null,isNeedCustomerPrice:!1,customerId:""},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{priceType:"1",customerId:"",customerName:"",receiptType:"",receiptTypeName:"",orderDate:new Date,expectDate:new Date,makeId:"",makeName:"",remark:"",dtlJsonStr:"",isAutoCommit:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择客户名称",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"df7cb67fca4148bc9632c908e4a7fdea",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}},apiObj:{apiName:"listPageSaleOrderDetail",params:{fieldCode:"prodInfo,orderUnitName,orderCount,productPrice,productSum,stockCountByPrice,productStockCountByPrice,deliverDate,remark",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",type:"add"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"orderUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"orderCount",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"productPrice",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,4})?$"}],message:["请输入大于零的正整数或(1,4)位小数！"]}},{columnIndex:"productSum",width:"120",componentName:"input",_cellConfig:{hideTitle:!0,compute:"self@orderCount(*)self@productPrice"}},{columnIndex:"deliverDate",width:"180",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",lessThan:["tempData@maxExpectDate",!0]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>{{data.total.toFixed(2)}}</span></li>\n                    </ul>'},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},data:{total:"0.00"},computes:{total:"table@productSum"}},tempData:{maxExpectDate:""},isValidate:!1}},beforeCreate:function(){},created:function(){var e=this.$storage.get("userInfo");null!=e.userId&&e.userId.trim().length>0&&(this.temp.makeId=e.userId.trim()),null!=e.userName&&e.userName.trim().length>0&&(this.temp.makeName=e.userName.trim())},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData),this.setProductSum(this.rowData))},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveSaleOrder(e.orderDtlList))})},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},checkColumn:function(e){for(var t="",i=this.temp.expectDate,a=0;a<e.length;a++){var o=e[a],n=o.productPrice;null!=n&&0!=n.trim().length||(t=t+"第 "+(a+1)+" 行: 单价为空或空字符串！");var l=o.deliverDate;null==l&&(t=t+"第 "+(a+1)+" 行: 约定交期为空或空字符串！"),null!=i&&null!=l&&i<l&&(t=t+"第 "+(a+1)+" 行: 约定交期不可大于("+i+")！")}return t},saveSaleOrder:function(e){var t=this;if(null!=e&&0!=e.length){var i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{for(var a=[],o=0;o<e.length;o++){var n=e[o],s={productId:"",productPrice:"",p2nFormula:"",n2pFormula:"",n2pIsScale:"",n2pDecimalCount:"",p2nIsScale:"",p2nDecimalCount:"",orderCount:"",orderUnit:"",productUnit:"",priceUnit:"",productSum:"",deliverDate:"",remark:""};s.productId=n.productId,s.productPrice=n.productPrice,s.p2nFormula=n.p2nFormula,s.n2pFormula=n.n2pFormula,s.n2pIsScale=n.n2pIsScale,s.n2pDecimalCount=n.n2pDecimalCount,s.p2nIsScale=n.p2nIsScale,s.p2nDecimalCount=n.p2nDecimalCount,s.orderCount=n.orderCount,s.orderUnit=n.orderUnit,s.productUnit=n.productUnit,s.priceUnit=n.priceUnit,s.productSum=n.productSum,s.deliverDate=n.deliverDate,s.remark=n.remark,a.push(s)}this.temp.dtlJsonStr="",null!=a&&a.length>0&&(this.temp.dtlJsonStr=JSON.stringify(a)),this.$confirm("添加订单后，是否将该订单提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.temp.isAutoCommit="true",Object(l.addSaleOrder)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.temp.isAutoCommit="false",Object(l.addSaleOrder)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},customerSelect:function(e){e[0]&&(this.temp.customerId=e[0].id,this.temp.customerName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},checkNumber:function(e,t){null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t+"("+e+") 输入错误，请输入大于零的正整数或(1,2)位小数！"})},changeAdvanceSum:function(e){null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&this.checkNumber(e,"预付款")},addProduct:function(){this.$refs.orderAddDialog.getData(),this.dialogData.data=this.orderDtlList,this.dialogData.isNeedRepeat=!1,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedCustomerPrice=!0,this.dialogData.customerId=this.temp.customerId,this.dialogData.title="选择货品",this.openDialogName="selectProductBySaleOrder",this.showDialog=!0,this.inLinVisible=!0},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id,t.orderUnit=e.id),this.temp.customerId?this.findProductPrice(t,this.temp.customerId,t.productId,e.id):null!=e.productPrice&&(t.productPrice=e.productPrice),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim());var a="";null!=t.productStockCount&&t.productStockCount.trim().length>0&&(a=t.productStockCount.trim()),Object(r.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i,productStockCount:a}).then(function(e){0===e.code&&(i-0!=0&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p),a-0!=0&&null!=e.productStockCount_n2p&&e.productStockCount_n2p.trim().length>0&&(t.productStockCountByPrice=e.productStockCount_n2p))}).catch(function(e){})}},setProductSum:function(e){if(null!=e){e.productSum="";var t=e.orderCount,i=e.productPrice;null!=t&&t.trim().length>0&&null!=i&&i.trim().length>0&&(e.productSum=(t.trim()*i.trim()).toFixed(2))}},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelected(t),e.customerId&&(this.temp.customerId=e.customerId),e.customerName&&(this.temp.customerName=e.customerName)},tableSelected:function(e){if(null!=e&&e.length>0)for(var t=this.temp.expectDate,i=0;i<e.length;i++){var a=e[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productPrice:"",n2pFormula:"",p2nFormula:"",prodInfo:"",orderUnit:"",orderCount:"",productUnit:"",productUnitName:"",productCount:"",stockCount:"",productStockCount:"",priceUnit:"",priceCount:"",stockCountByPrice:"",productStockCountByPrice:"",productSum:"",deliverDate:"",stateName:"",remark:""};null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),null!=a.unitName&&a.unitName.trim().length>0&&(o.productUnitName=a.unitName.trim()),null!=a.prodInfo&&a.prodInfo.trim().length>0&&(o.prodInfo=a.prodInfo.trim()),o.orderUnit=a.unit,o.orderUnitName=a.unitName,o.productPrice=a.price,o.p2nFormula=a.p2nFormula,o.n2pFormula=a.n2pFormula,o.stockCountByPrice=a.stockCount,o.productStockCountByPrice=a.productStockCount,o.productId=a.id.trim(),o.productUnit=a.unit.trim(),o.stockCount=a.stockCount.trim(),o.productStockCount=a.productStockCount.trim(),null!=t&&(o.deliverDate=t,o.maxExpectDate=t,this.tempData.maxExpectDate=t),this.tableData.push(o)}},findProductPrice:function(e,t,i,a){return Object(s.findSaleUnitPrice)({customerId:t,productId:i,unit:a}).then(function(t){0===t.code&&null!=t.productPrice&&t.productPrice.trim().length>0&&(e.productPrice=t.productPrice)}).catch(function(e){}),""}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size},formItemWidth:function(){var e={};switch(this.size){case"mini":e.width="180px";break;case"small":e.width="200px";break;default:e.width="220px"}return e}},watch:{"temp.expectDate":function(){this.tempData.maxExpectDate=this.temp.expectDate}}},u=i("KHd+"),p=Object(u.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"85%"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px",size:e.size}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"客户名称:",prop:"customerName"}},[i("base-input-option",{staticStyle:{display:"inline-block"},style:e.formItemWidth,attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.customerName,callback:function(t){e.$set(e.temp,"customerName",t)},expression:"temp.customerName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发票类型:",prop:"receiptTypeName"}},[i("el-select",{style:e.formItemWidth,attrs:{placeholder:"发票类型"},model:{value:e.temp.receiptType,callback:function(t){e.$set(e.temp,"receiptType",t)},expression:"temp.receiptType"}},[i("el-option",{attrs:{label:"不开票",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"增值税普通发票",value:"2"}}),e._v(" "),i("el-option",{attrs:{label:"增值税专用发票",value:"3"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{style:e.formItemWidth,attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"下单日期:",prop:"orderDate"}},[i("el-date-picker",{style:e.formItemWidth,attrs:{type:"date",placeholder:"下单日期","value-format":"yyyy-MM-dd"},model:{value:e.temp.orderDate,callback:function(t){e.$set(e.temp,"orderDate",t)},expression:"temp.orderDate"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"约定交期:",prop:"expectDate"}},[i("el-date-picker",{style:e.formItemWidth,attrs:{type:"date",placeholder:"约定交期","value-format":"yyyy-MM-dd"},model:{value:e.temp.expectDate,callback:function(t){e.$set(e.temp,"expectDate",t)},expression:"temp.expectDate"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{style:e.formItemWidth,model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_sale_order_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"orderAddDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);p.options.__file="dialogAdd.vue";t.default=p.exports},MXGa:function(e,t,i){"use strict";var a=i("lire");i.n(a).a},MYqs:function(e,t,i){},Mi1z:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},isShowDept:!1,isShowCust:!1,rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,DepartmentDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择部门",treeUrl:"/system/department/treeDepartments",treeParm:{},tableUrl:"/system/department/listPageDepartments",tableParm:{isdisable:"1",fieldCode:"code,name,deptTypeName,layer,parentName,remark"},temp:{}},dialogName:"dialogTreeOption"}},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择客户",treeUrl:"/system/dictionary/treeDictionarys",treeParm:{dictionaryKey:"customerSupplierGenre"},tableUrl:"/base/customer/listPageCustomers",tableParm:{},temp:{}},dialogName:"dialogTreeOption"}},formTemp:[]}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{changeVirtualGenre:function(){"1"==this.temp.virtualGenre?(this.isShowDept=!0,this.isShowCust=!1):"2"==this.temp.virtualGenre&&(this.isShowCust=!0,this.isShowDept=!1)},departmentSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualDeptId=e[0].id,this.temp.virtualDeptName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},customerSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualCustomerId=e[0].id,this.temp.virtualCustomerName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},dialogOpen:function(){var e=this;this.changeVirtualGenre(),"1"==this.temp.virtualGenre&&null!=this.temp.virtualDeptName&&this.temp.virtualDeptName.trim().length>0?this.temp.virtualDepartmentName=this.temp.virtualDeptName:"2"==this.temp.virtualGenre&&null!=this.temp.virtualCustomerName&&this.temp.virtualCustomerName.trim().length>0&&(this.temp.virtualDepartmentName=this.temp.virtualCustomerName),this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateWarehouseByVirtual)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"仓库性质:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{value:"虚拟库",readonly:!0}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.virtualGenreName+":",prop:"virtualGenreName"}},[i("el-select",{attrs:{placeholder:e.tempLable.virtualGenreName,disabled:!0},on:{change:e.changeVirtualGenre},model:{value:e.temp.virtualGenre,callback:function(t){e.$set(e.temp,"virtualGenre",t)},expression:"temp.virtualGenre"}},[i("el-option",{attrs:{label:"内部单位",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"外部单位",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowDept,expression:"isShowDept"}],attrs:{label:"部门名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DepartmentDialog.dialog},on:{callback:e.departmentSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowCust,expression:"isShowCust"}],attrs:{label:"客户名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseVirtualEdit.vue";t.default=s.exports},MngD:function(e,t,i){"use strict";i("rGqo"),i("yt8O"),i("RW0V"),i("KKXr");function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){o(e,t,i[t])})}return e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var n={name:"EditShape",props:{active:{type:Boolean,default:!1},defaultStyle:{require:!0,type:Object},data:{type:Object,default:function(){return null}},uuid:String,showOnly:{type:Boolean,default:!1},isCustom:{type:Boolean,default:!1}},data:function(){return{pointList:["lt","rt","lb","rb","l","r","t","b"],directionKey:{t:"n",b:"s",l:"w",r:"e"}}},created:function(){},mounted:function(){},methods:{getPointStyle:function(e){var t=this;if(!this.showOnly&&!this.isCustom){var i=this.defaultStyle,a=i.height,o=i.width,n=/t/.test(e),l=/b/.test(e),s=/l/.test(e),r=/r/.test(e),c=0,d=0;return 2===e.length?(c=s?0:o,d=n?0:a):((n||l)&&(c=o/2-("t"===e||"b"===e?5:0),d=n?0:a),(s||r)&&(c=s?0:o,d=a/2-("l"===e||"r"===e?5:0))),{marginLeft:s||r?"-5px":0,marginTop:n||l?"-5px":0,left:"".concat(c,"px"),top:"".concat(d,"px"),cursor:e.split("").reverse().map(function(e){return t.directionKey[e]}).join("")+"-resize"}}},handleTopWrapperClick:function(e){this.$store.commit("SET_ACTIVEID",this.uuid),e.stopPropagation(),e.preventDefault()},handleMouseDownOnElement:function(e){var t=this;if(this.$store.commit("SET_ACTIVEID",this.uuid),!this.showOnly&&!this.isCustom){var i,o=a({},this.defaultStyle),n=e.clientY,l=e.clientX,s=o.top,r=o.left;i=(new Date).getTime();var c=function(e){e.stopPropagation(),e.preventDefault();var i=e.clientX,a=e.clientY;o.top=a-n+s,o.left=i-l+r,t.$emit("resize",o)};return document.addEventListener("mousemove",c,!0),document.addEventListener("mouseup",function e(){(new Date).getTime()-i>200&&t.$emit("resize"),document.removeEventListener("mousemove",c,!0),document.removeEventListener("mouseup",e,!0)},!0),!0}},handleMouseDownOnPoint:function(e){var t=this,i=event;if(this.$store.commit("SET_ACTIVEID",this.uuid),!this.showOnly&&!this.isCustom){i.stopPropagation(),i.preventDefault();var o=a({},this.defaultStyle),n=o.height,l=o.width,s=o.top,r=o.left,c=i.clientX,d=i.clientY,u=function(i){var a=i.clientX,u=i.clientY-d,p=a-c,m=/t/.test(e),h=/b/.test(e),g=/l/.test(e),f=/r/.test(e),b=+n+(m?-u:h?u:0),v=+l+(g?-p:f?p:0);o.height=b>0?b:0,o.width=v>0?v:0,o.left=+r+(g?p:0),o.top=+s+(m?u:0),t.$emit("resize",o)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",function e(){t.$emit("resize"),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",e)})}},escUserSelectComponents:function(){this.active&&this.$emit("reset-active",{uuid:this.uuid,type:this.data.type})},deleteUserSelectComponents:function(){this.active&&this.$emit("delete-active",this.uuid)}}},l=(i("RC9q"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"components-edit-shape",class:{active:e.active,isCustom:e.isCustom&&e.showOnly},style:{height:e.showOnly?"100%":""},attrs:{tabindex:"0"},on:{click:e.handleTopWrapperClick,mousedown:e.handleMouseDownOnElement,keyup:[function(t){return"button"in t||!e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?e.escUserSelectComponents(t):null},function(t){return"button"in t||46===t.keyCode?e.deleteUserSelectComponents(t):null}]}},["custom"!==e.data.type?e._l(e.active?e.pointList:[],function(t){return i("div",{key:t,staticClass:"edit-shape-point",style:e.getPointStyle(t),on:{mousedown:function(i){e.handleMouseDownOnPoint(t)}}})}):e._e(),e._v(" "),e._t("default")],2)},[],!1,null,"84f470b2",null);s.options.__file="editShape.vue";t.a=s.exports},MsbH:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("txn6");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{parentId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){this.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.auditDisagreeWarehouseOutScrapBySimple)({id:e.parentId,remark:e.temp.remark}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAuditDisagree.vue";t.default=s.exports},MtNS:function(e,t,i){"use strict";var a=i("zfQg");i.n(a).a},"Mub/":function(e,t,i){"use strict";var a=i("YXsa");i.n(a).a},"N+mj":function(e,t,i){},"N0+h":function(e,t,i){},N2df:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("yt8O"),i("XfO3"),i("9AAn");var a=i("2+ib"),o=i("zj4a"),n={components:{multilevelTable:a.a},props:["initData","visible"],data:function(){return{signDtlId:"",qualityTypeSelect:{},rowData:{},qualityTypeNameMap:new Map([["全检","1"],["抽检","2"]]),tableData:[],tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"qualityTypeName",width:"100",componentName:"select",_cellConfig:{outputData:!0,hideTitle:!0,options:[{id:"全检",label:"全检"},{id:"抽检",label:"抽检"}]}},{columnIndex:"qualityCount",width:"120",componentName:"input",_cellConfig:{disabledState:{key:"qualityTypeValue",value:"1"},rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"},{greaterThan:["0",!1]}],message:["不可为空！","请输入大于零的整数或小数","不可等于零！"]}},{columnIndex:"badCount",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["不可为空！","请输入大于零的整数或小数"]}},{columnIndex:"retreatCount",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["不可为空！","请输入大于零的整数或小数"]}},{columnIndex:"discardCount",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["不可为空！","请输入大于零的整数或小数"]}},{columnIndex:"receiveCount",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["不可为空！","请输入大于零的整数或小数"]}}],apiObj:{apiName:"listPageAssistSignDetailByQualityExecute",params:{fieldCode:"assistProductName,craftName,orderUnitName,qualityTypeName,arriveCount,qualityCount,badCount,retreatCount,discardCount,receiveCount",signDtlId:""}},tempData:{},showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"badCount",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["不可为空！","请输入大于零的整数或小数"]}}],apiObj:{apiName:"findQualityByAssist",params:{fieldCode:"qualityName,qualityCriterion,badCount",business:"purchase",isNeedPage:"false",orderStr:"cdate asc"}},dynamicValue:{productId:"self@productId"},tempData:{},showIndex:!1,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!1,isVisible:!1,inDialog:!0}},beforeCreate:function(){},created:function(){this.signDtlId=this.initData.rowData.id,this.tableConfigList[0].apiObj.params.signDtlId=this.initData.rowData.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},getData:function(){this.$refs.customBaseTable.getData()},databridge:function(e){Array.isArray(e)?(this.tableData=[],this.tableData=e):(null!=e.item&&(this.qualityTypeSelect=e.item),null!=e.item&&null!=e.row&&(this.rowData=e.row),this.setQualityTypeValue(this.qualityTypeSelect,this.rowData),this.setQualityCountDefault(this.qualityTypeSelect,this.rowData))},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},closeDialog:function(){},deleteRow:function(e){this.deleteData(e)},setQualityTypeValue:function(e,t){var i=e.id,a=this.qualityTypeNameMap.get(i);t.qualityTypeValue=a},setQualityCountDefault:function(e,t){var i=e.id,a=this.qualityTypeNameMap.get(i);"1"==a?t.qualityCount=t.arriveCount:"2"==a&&(t.qualityCount="0.00")},findSumBadCount:function(e){var t=0;if(null!=e&&e.length>0)for(var i=0;i<e.length;i++){t+=e[i].badCount/1}return t},findMinimumBadCount:function(e){var t=0;if(null!=e&&e.length>0)for(var i=0;i<e.length;i++){var a=e[i].badCount/1;a>0&&0==t?t=a:a>0&&a<t&&(t=a)}return t},checkColumnByFirst:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.qualityTypeValue,n=a.arriveCount,l=a.qualityCount;"1"==o&&l/1-n/1!=0?t+="检验方式(全检) 实检数必须与签收数相等！":"2"==o&&l/1-n/1>0&&(t+="检验方式(抽检) 实检数不可大于签收数！");var s=a.badCount/1;a.retreatCount/1+a.discardCount/1+a.receiveCount/1-s!=0&&(t+="不合格数必须等于(退货数 + 报废数 + 让步接收)！")}return t},checkColumnBySecond_1:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.qualityCount,n=a.children;if(null!=n&&n.length>0)for(var l=0;l<n.length;l++){n[l].badCount/1>o&&(t+="检验不合格不可大于实检数！")}}return t},checkColumnBySecond_2:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.badCount/1,n=a.children;if(null!=n&&n.length>0)for(var l=0;l<n.length;l++){n[l].badCount/1>o&&(t+="检验不合格不可大于不合格数！")}if(null!=n&&n.length>0){var s=this.findSumBadCount(n);if(s>0){var r=this.findMinimumBadCount(n);o<r&&(t=t+"不合格数不可小于"+r+"！")}o>s&&(t+="不合格数不可大于检验不合格总和！")}}return t},findJsonStringByTable:function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i],o="全检";null!=a.qualityTypeName&&null!=a.qualityTypeName.item&&null!=a.qualityTypeName.item.id?o=a.qualityTypeName.item.id:null!=a.qualityTypeName&&a.qualityTypeName.trim().length>0&&(o=a.qualityTypeName.trim());for(var n=this.qualityTypeNameMap.get(o),l={id:a.id,qualityType:n,arriveCount:a.arriveCount,qualityCount:a.qualityCount,badCount:a.badCount,retreatCount:a.retreatCount,discardCount:a.discardCount,receiveCount:a.receiveCount,parentId:a.parentId,assistProductId:a.assistProductId,productId:a.productId,signCode:a.signCode,orderId:a.orderId,orderDtlId:a.orderDetailId,price:a.price,orderUnit:a.orderUnit,supplierId:a.supplierId,supplierName:a.supplierName,children:""},s=[],r=a.children,c=0;c<r.length;c++){var d=r[c],u={signDetailId:a.id,assistProductId:a.assistProductId,productId:a.productId,orderUnit:a.orderUnit,qualityId:d.id,badCount:d.badCount};s.push(u)}l.children=s,t.push(l)}return JSON.stringify(t)},save:function(){this.getData(),null!=this.tableData&&this.tableData.length>0&&this.addWarehouseInExecute(this.tableData)},addWarehouseInExecute:function(e){var t=this,i=this.checkColumnByFirst(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else if(null!=(i=this.checkColumnBySecond_1(e))&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else if(null!=(i=this.checkColumnBySecond_2(e))&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{var a=this.findJsonStringByTable(e);this.dialogLoading=!0,Object(o.assistSignDetailByQualityExecute)({roleId:this.$storage.get("userInfo").roleIds,jsonStr:a}).then(function(e){0===e.code&&(t.dialogLoading=!1,t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_quality_assistQuality_assistSignByQuality_dialogExecute0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogExecute.vue";t.default=s.exports},N5q0:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rGqo"),i("f3/d");var a=i("mSNy"),o=i("t3Un"),n=i("z0WU");function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var r={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" @change="colConfig.changeState(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},c={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" width="300" align="center">\n\t\t\t      <div slot-scope="scope">\n    \t\t\t\t\t\t{{scope.row.prodInfo}}\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},d={name:"dialog-tree-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},filterText:"",enterTime:0,showDisable:!1,treeNodes:[],userInfo:null,topBarBtnList:[{name:"查询",icon:"search",method:this.queryTable},{name:"重置",icon:"refresh",plain:!0,method:this.resetQueryTemp}],configs:{tableConfigs:[],showCheckBox:!0,showIndex:!1,isSingle:!1},tableData:[],selectList:[],tempQuery:{},tempLable:{},pageData:null,pageNo:1,isCancel:!1}},components:{},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.configs.isSingle=this.initData.isSingle,this.userInfo=this.$storage.get("userInfo"),this.initTree()},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",this.selectList,this.initData.temp,this.isCancel)},handleClose:function(e){this.isCancel=!0,e()},initTree:function(){var e=this;e.dialogTopLoading=!0,Object(o.a)({url:e.initData.treeUrl,method:"post",data:l({},e.initData.treeParm)}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogTopLoading=!1})},loadTree:function(e){var t=this,i=[],a=e.result.treeList;t.selectTree={pid:a.pid,id:a.id,layer:a.layer,name:a.name},i.push(a),t.treeData=i,t.treeNodes=[],Object(n.c)(t.treeData,t.showDisable,t.filterText,t.treeNodes),t.$nextTick(function(){if(t.treeNodes.length>0){var e=t.treeNodes[0];t.selectTree={pid:e.pid,id:e.id,layer:e.layer,name:e.name}}t.initTable(t.selectTree.id,t.selectTree.layer,!0)})},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.pageNo=1,this.initTable(this.selectTree.id,this.selectTree.layer)},queryTable:function(){this.pageNo=1,this.initTable(this.selectTree.id,this.selectTree.layer)},initTable:function(e,t,i){var a=this;Object(o.a)({url:a.initData.tableUrl,method:"post",data:l({},a.initData.tableParm,a.tempQuery,{pid:e,layer:t,pageNo:a.pageNo})}).then(function(e){i&&(a.dialogTopLoading=!1),a.getListPage(e)}).catch(function(e){a.dialogTopLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var o=e[i];o.indexOf("_")>0&&("en"==a.a.locale?o=o.substring(o.indexOf("_")+1):"zh"==a.a.locale&&(o=o.substring(0,o.indexOf("_")))),t.tempLable[i]=o}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==a.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==a.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"是否启用"!==e.label&&"是否在职"!==e.label||(e.component=r,e.changeState=t.changeState),"货品"===e.label&&(e.component=c)}),e},dataBridge:function(e){this.selectList=e},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.pageNo=1,this.initTable(this.selectTree.id,this.selectTree.layer)},searchByName:function(){var e=this;e.treeNodes=[],Object(n.c)(e.treeData,e.showDisable,e.filterText,e.treeNodes),e.enterTime=e.enterTime+1,e.$nextTick(function(){if(e.treeNodes.length>0){var t=e.treeNodes[e.enterTime%e.treeNodes.length];e.selectTree={pid:t.pid,id:t.id,layer:t.layer,name:t.name}}e.initTable(e.selectTree.id,e.selectTree.layer)})}},computed:{dialogWidth:function(){var e="80%";return null!=this.initData.width&&(e=this.initData.width),e}},watch:{pageNo:function(){this.initTable(this.selectTree.id,this.selectTree.layer)},showDisable:function(){this.initTree()}}},u=i("KHd+"),p=Object(u.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"before-close":e.handleClose,"append-to-body":"",width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:6}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:18}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"900px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"70px"}},[i("el-col",{staticStyle:{"max-width":"260px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:e.tempLable.name}},[i("el-input",{attrs:{placeholder:e.tempLable.name},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:e.topBarBtnList[0].name,icon:e.topBarBtnList[0].icon,plain:e.topBarBtnList[0].plain,state:e.topBarBtnList[0].state},on:{myclick:e.topBarBtnList[0].method}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:e.topBarBtnList[1].name,icon:e.topBarBtnList[1].icon,plain:e.topBarBtnList[1].plain,state:e.topBarBtnList[1].state},on:{myclick:e.topBarBtnList[1].method}})],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticStyle:{position:"relative",height:"60px","text-align":"center","box-sizing":"border-box",padding:"10px 0 0 0"}},[i("el-button",{attrs:{type:"primary",disabled:!e.selectList.length},on:{click:function(t){e.isVisible=!1}}},[e._v("确认")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"30px"},on:{click:function(t){e.isVisible=!1,e.isCancel=!0}}},[e._v("关闭")])],1)])],1)],1)},[],!1,null,null,null);p.options.__file="dialogTreeOption.vue";t.default=p.exports},NCVf:function(e,t,i){},NIKH:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("WIyV"),o=i("uupt"),n=i("G5My"),l=i("nqR1"),s=i("MPAK"),r=i("8UwL"),c={components:{customBaseTable:a.a,dialogAddSupplier:o.default,selectAssistProductBySupplier:n.default,selectAssistPlanByOrder:l.default},props:["initData","visible"],data:function(){return{rules:{supplierName:[{required:!0,message:"请选择供应商",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{supplierId:"",supplierName:"",makeId:"",makeName:"",isAutoCommit:"",dtlJsonStr:""},tableData:[],editData:[],configs:{topBarBtnList:[{name:"选择外协件",nameEn:"add",isShow:!0,method:this.selectAssistProduct},{name:"从计划导入",nameEn:"add",isShow:!0,method:this.selectAssistPlan}],tableConfigs:[],showCheckBox:!1,showIndex:!1},SupplierDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择供应商",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"49c0a7ebcb4c4175bd5195837a6a9a13",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}},apiObj:{apiName:"listPageAssistOrderDetail",params:{fieldCode:"assistProductName,craftName,orderUnitName,orderCount,price,expectDate,lossRatio,planCode",parentId:"null"}},customColumn:[{columnIndex:"assistProductName",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"orderCount",width:"120",componentName:"input",_cellConfig:{}},{columnIndex:"price",width:"120",componentName:"input",_cellConfig:{}},{columnIndex:"expectDate",width:"175",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd"}},{columnIndex:"lossRatio",width:"120",componentName:"input",_cellConfig:{}},{columnIndex:"planCode",_cellConfig:{hideTitle:!0},width:"110"}]}},beforeCreate:function(){},created:function(){var e=this.$storage.get("userInfo");null!=e.userId&&e.userId.trim().length>0&&(this.formData.makeId=e.userId.trim()),null!=e.userName&&e.userName.trim().length>0&&(this.formData.makeName=e.userName.trim())},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.editData=[],this.editData=e)},getData:function(){this.$refs.customBaseTable.getData()},supplierSelect:function(e){e[0]&&(this.formData.supplierId=e[0].id,this.formData.supplierName=e[0].name)},makeSelect:function(e){e[0]&&(this.formData.makeId=e[0].id,this.formData.makeName=e[0].name)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},selectAssistProduct:function(){null!=this.formData.supplierName&&0!=this.formData.supplierName.trim().length?(this.getData(),this.dialogData.tableData=this.editData,this.dialogData.isNeedRepeat=!1,this.dialogData.supplierId=this.formData.supplierId,this.dialogData.width="900px",this.dialogData.title="选择外协件",this.openDialogName="selectAssistProductBySupplier",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择供应商！"})},selectAssistPlan:function(){null!=this.formData.supplierName&&0!=this.formData.supplierName.trim().length?(this.getData(),this.dialogData.tableData=this.editData,this.dialogData.isNeedRepeat=!1,this.dialogData.supplierId=this.formData.supplierId,this.dialogData.width="1000px",this.dialogData.title="选择外协计划",this.openDialogName="selectAssistPlanByOrder",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择供应商！"})},checkColumnByTable:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o="";null!=a.orderCount&&(o=a.orderCount+""),null==o||0==o.trim().length?t=t+"第 "+(i+1)+" 行: 外协数量为空或空字符串！":null!=o&&o.trim().length>0&&!Object(s.isNumberByValueSystem)(o)?t=t+"第 "+(i+1)+" 行: 外协数量("+o+") 输入错误，请输入大于零的正数支持2位小数！":null!=o&&o.trim().length>0&&Object(s.isNumberByValueSystem)(o)&&o/1<=0&&(t=t+"第 "+(i+1)+" 行: 外协数量("+o+") 输入错误，请输入大于零的正数支持2位小数！");var n="";null!=a.price&&(n=a.price+""),null==n||0==n.trim().length?t=t+"第 "+(i+1)+" 行: 单价为空或空字符串！":null!=n&&n.trim().length>0&&!Object(s.isPriceByValueSystem)(n)?t=t+"第 "+(i+1)+" 行: 单价("+n+") 输入错误，请输入大于零的正数支持4位小数！":null!=n&&n.trim().length>0&&Object(s.isPriceByValueSystem)(n)&&n/1<=0&&(t=t+"第 "+(i+1)+" 行: 单价("+n+") 输入错误，请输入大于零的正数支持4位小数！");var l="";null!=a.lossRatio&&(l=a.lossRatio+""),null!=l&&l.trim().length>0&&!Object(s.isNumberByValueSystem)(l)?t=t+"第 "+(i+1)+" 行: 损耗率("+l+") 输入错误，请输入大于零的正数支持2位小数！":null!=l&&l.trim().length>0&&Object(s.isNumberByValueSystem)(l)&&l/1<=0&&(t=t+"第 "+(i+1)+" 行: 损耗率("+l+") 输入错误，请输入大于零的正数支持2位小数！"),null==a.expectDate&&(t=t+"第 "+(i+1)+" 行: 约定交期为空，请选择约定交期！")}return t},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){if(e.editData=[],e.getData(),null==e.editData||0==e.editData.length)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一行数据！"});var i=e.checkColumnByTable(e.editData);if(null!=i&&i.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:i});e.saveSaleOrder(e.editData)}})},saveSaleOrder:function(e){for(var t=this,i=[],a=0;a<e.length;a++){var o=e[a],n={planDetailId:o.planDetailId,assistProductId:o.assistProductId,orderUnit:o.orderUnit,orderCount:o.orderCount,price:o.price,lossRatio:o.lossRatio,expectDate:o.expectDate};i.push(n)}this.formData.dtlJsonStr="",null!=i&&i.length>0&&(this.formData.dtlJsonStr=JSON.stringify(i)),this.$confirm("是否将该订单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.formData.isAutoCommit="true",Object(r.addAssistOrder)(t.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.formData.isAutoCommit="false",Object(r.addAssistOrder)(t.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"selectAssistProductBySupplier"==e.pageName){var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByAssistProduct(t)}else if(null!=e&&"selectAssistPlanByOrder"==e.pageName){var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelectedByAssistPlan(i)}},tableSelectedByAssistProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={assistProductName:i.assistProductName,craftName:i.craftName,orderUnitName:i.productUnitName,price:i.price,lossRatio:i.lossRatio,assistProductId:i.assistProductId,orderUnit:i.productUnit};this.tableData.push(a)}},tableSelectedByAssistPlan:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={assistProductName:i.assistProductName,craftName:i.craftName,orderUnitName:i.orderUnitName,expectDate:i.planDate,planCode:i.planCode,planDetailId:i.planDtlId,price:i.price,lossRatio:i.lossRatio,orderCount:i.count,assistProductId:i.assistProductId,orderUnit:i.orderUnit};this.tableData.push(a)}}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,inline:!0,model:e.formData}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"供应商:",prop:"supplierName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"220px"},attrs:{dialog:e.SupplierDialog.dialog},on:{callback:e.supplierSelect},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"0px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.formData.makeName,callback:function(t){e.$set(e.formData,"makeName",t)},expression:"formData.makeName"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{margin:"0px 0px 10px 0px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistOrde_assistOrdeList_dialogAdd0",varList:e.tableData,showIndex:!1,showTableSet:!1,showCheckBox:!1,useDefaultBtn:!0,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogAdd.vue";t.default=u.exports},NY76:function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=(i("z0WU"),{components:{multilevelTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tableData:[],selectList:[],configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:this.initData.temp.id}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseOutExecutes",params:{isNeedPage:"false",fieldCode:"name,actualCount,executorName,endDate"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},databridge:function(e){this.selectList=e},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;null!=e.selectList&&e.selectList}},watch:{}}),n=(i("gqes"),i("C3qa"),i("KHd+")),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"90px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_produce_materialRequisitionWC_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogView.vue";t.default=l.exports},NaOS:function(e,t,i){"use strict";i("rGqo");function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o={components:{},name:"dyna-form",props:{config:{type:Object,default:function(){return{}}},formTemp:{type:Array,default:function(){return[]}},props:{type:Object,default:function(){return{key:"key",value:"value"}}}},data:function(){var e=this;return{btnsBoxHeight:0,addFormData:[],isVisible:!1,saveBtnState:!0,tempFormList:[{key:"",value:""}],itemRule:[{validator:function(t,i,a){""===i?(e.saveBtnState=!0,a(new Error("请定义属性名称"))):e.deDuplication(i)?(e.saveBtnState=!0,a(new Error("有重复的属性名称"))):a()},trigger:"blur"}],formData:[]}},created:function(){this.formData=this.renameAttr(this.formTemp,!0)},mounted:function(){this.$nextTick(function(){this.btnsBoxHeight=this.hideBtn?this.$refs.btnsBox.clientHeight:0})},computed:{hideBtn:function(){return!this.config.hideBtn},formList:function(){return this.formData.concat(this.addFormData)},onModal:function(){return!1},onEscape:function(){return!1}},methods:{renameAttr:function(e,t){if("key"===this.props.key&&"value"===this.props.value)return e;var i=this.props,o=i.key,n=i.value,l=[];return t?(e.forEach(function(e,t){l.push({key:e[o||"key"],value:e[n||"value"]})}),l):(this.formList.forEach(function(e,t){var i;l.push((a(i={},o||"key",e.key),a(i,n||"value",e.value),i))}),l)},addAttr:function(){this.tempFormList=[{key:"",value:""}],this.isVisible=!0},removeDomain:function(e,t){var i=this,a=!0;this.formData.forEach(function(t,o){t.key===e.key&&(a=!1,i.formData.splice(o,1))}),a&&this.addFormData.forEach(function(t,a){t.key===e.key&&i.addFormData.splice(a,1)})},dialogOpen:function(){var e=this;this.saveBtnState=!0,this.$nextTick(function(){e.tempFormList.forEach(function(t,i){e.$refs["tempForm"+i][0].clearValidate()})})},getFormList:function(){this.$emit("sent-list",this.renameAttr(this.formList))},save:function(){this.addFormData=this.addFormData.concat(this.tempFormList),this.isVisible=!1},addContent:function(){this.tempFormList.push({key:"",value:""}),this.saveBtnState=!0},deleteContent:function(e,t){this.tempFormList.splice(t,1),this.switchSaveBtnState()},deDuplication:function(e){var t=0;return this.tempFormList.forEach(function(i){i.key===e&&t++}),this.formList.forEach(function(i){i.key===e&&t++}),1!==t},checkInput:function(){this.switchSaveBtnState()},switchSaveBtnState:function(){var e=this;this.$nextTick(function(){var t=0,i=!0;e.tempFormList.forEach(function(a,o){i?e.$refs["tempForm"+o][0].validate(function(e){e||(t++,i=!1)}):e.$refs["tempForm"+o][0].validate(function(e){})}),e.saveBtnState=!e.tempFormList.length||!!t})}}},n=(i("9O1b"),i("KHd+")),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dynaForm",staticStyle:{height:"100%",position:"relative","box-sizing":"border-box"},style:{paddingTop:e.btnsBoxHeight+"px"}},[e.hideBtn?i("div",{ref:"btnsBox",staticClass:"dynaFormBtn",staticStyle:{position:"absolute",top:"0",right:"0"}},[i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-plus"},on:{click:e.addAttr}},[e._v("自定义属性")])],1):e._e(),e._v(" "),i("div",{staticClass:"formBox",staticStyle:{height:"100%","overflow-y":"auto"}},[i("el-form",{ref:"resultForm",staticStyle:{padding:"5px"},attrs:{"label-position":"left","label-width":"75px"}},e._l(e.formList,function(t,a){return i("el-form-item",{key:t.key,attrs:{label:t.key}},[i("el-input",{staticStyle:{width:"calc(100% - 27px)"},attrs:{placeholder:"请输入",clearable:""},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}}),i("el-button",{staticStyle:{padding:"5px"},attrs:{type:"text",icon:"el-icon-remove",title:"删除该项"},on:{click:function(i){i.preventDefault(),e.removeDomain(t,a)}}})],1)}),1)],1),e._v(" "),i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"自定义属性",visible:e.isVisible,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,width:"400px","append-to-body":""},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen}},[i("div",{staticClass:"addContent",staticStyle:{"box-sizing":"border-box",padding:"5px 10px"}},[i("div",[e._l(e.tempFormList,function(t,a){return[i("el-row",{staticStyle:{position:"relative",border:"1px solid #E4E4E4","border-radius":"4px","margin-bottom":"10px"}},[i("el-form",{ref:"tempForm"+a,refInFor:!0,staticStyle:{width:"90%",padding:"5px"},attrs:{model:t,"label-position":"left","label-width":"75px"}},[i("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{label:"属性名称:",prop:"key",rules:e.itemRule}},[i("el-input",{attrs:{placeholder:"请输入属性名",clearable:""},on:{blur:function(i){e.checkInput(t,a)}},model:{value:t.key,callback:function(i){e.$set(t,"key",i)},expression:"item.key"}})],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"属性值:"}},[i("el-input",{attrs:{placeholder:"请输入属性值",clearable:""},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1)],1),e._v(" "),i("div",{staticStyle:{position:"absolute",right:"8px",top:"50%",transform:"translate(0,-50%)"}},[i("el-button",{staticStyle:{padding:"5px"},attrs:{type:"text",icon:"el-icon-remove",title:"删除该项"},on:{click:function(i){e.deleteContent(t,a)}}})],1)],1)]})],2),e._v(" "),i("div",{ref:"dialogBtn",staticStyle:{"text-align":"center"}},[i("el-button",{staticStyle:{padding:"5px",width:"100%",border:"1px dashed #E4E4E4"},attrs:{type:"text",size:"medium",icon:"el-icon-plus"},on:{click:e.addContent}},[e._v("新增属性")])],1)]),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",disabled:e.saveBtnState},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);l.options.__file="index.vue";t.a=l.exports},Nao0:function(e,t,i){},"Nma/":function(e,t,i){"use strict";i.r(t);i("Oyvg");var a=i("9wPf"),o={components:{},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{amount:[{required:!0,trigger:"change",validator:function(t,i,a){e.isNumberByValue(i)?(0==i&&a(new Error("请输入大于零的正整数或(1,2)位小数！")),a()):a(new Error("请输入大于零的正整数或(1,2)位小数！"))}}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.formData=this.initData.rowData},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){e.$confirm("是否提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.formData.isAutoCommit="true",Object(a.updateFinanceBillByPurchase)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"设定成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.formData.isAutoCommit="false",Object(a.updateFinanceBillByPurchase)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"设定成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})})},closeDialog:function(e){}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"供应商编码:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.customerCode,callback:function(t){e.$set(e.formData,"customerCode",t)},expression:"formData.customerCode"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"供应商名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.customerName,callback:function(t){e.$set(e.formData,"customerName",t)},expression:"formData.customerName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"金额:",prop:"amount"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogEdit.vue";t.default=l.exports},O2Sz:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg"),i("f3/d");var a=i("hdRB");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{repairUserName:[{required:!0,trigger:"change",message:"请选择维修人"}],isStop:[{required:!0,trigger:"change",message:"请选择是否停机"}],timeLength:[{required:!0,trigger:"change",message:"请填写预估维修时间"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{repairId:"",repairUser:"",repairUserName:"",isStop:"",timeLength:"",teimType:"",faultDescribe:""},UserDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.formData.isStop="1";var e=this.$storage.get("userInfo");this.formData.repairUser=e.userId,this.formData.repairUserName=e.userName,this.formData.teimType="M",this.formData.repairId=this.initData.repairId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},userSelect:function(e){e[0]&&(this.formData.repairUser=e[0].id,this.formData.repairUserName=e[0].name)},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[1-9][0-9]*$").test(e.trim())},checkColumnNumberValue:function(e,t){var i="";return null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&(i=t+"("+e+")输入错误，请输入大于零的整数数！"),i},checkTimeLength:function(e){var t=this.checkColumnNumberValue(e,"预估维修时间");null!=t&&t.trim().length>0&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){var i="",o=e.formData.timeLength,n=e.checkColumnNumberValue(o,"预估维修时间");if(null!=n&&n.trim().length>0&&(i+=n),null!=i&&i.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:i});e.dialogLoading=!0,Object(a.equipmentRepairReceive)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto",width:"100%"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"维修人:",prop:"repairUserName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.UserDialog.dialog},on:{callback:e.userSelect},model:{value:e.formData.repairUserName,callback:function(t){e.$set(e.formData,"repairUserName",t)},expression:"formData.repairUserName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"是否停机:",prop:"isStop"}},[i("el-select",{staticStyle:{width:"200px"},model:{value:e.formData.isStop,callback:function(t){e.$set(e.formData,"isStop",t)},expression:"formData.isStop"}},[i("el-option",{attrs:{label:"停机维修",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"非停机维修",value:"0"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"预估维修时间:",prop:"timeLength"}},[i("el-input",{staticStyle:{width:"120px"},on:{change:e.checkTimeLength},model:{value:e.formData.timeLength,callback:function(t){e.$set(e.formData,"timeLength",t)},expression:"formData.timeLength"}}),e._v(" "),i("el-select",{staticStyle:{width:"75px"},model:{value:e.formData.teimType,callback:function(t){e.$set(e.formData,"teimType",t)},expression:"formData.teimType"}},[i("el-option",{attrs:{label:"分钟",value:"M"}}),e._v(" "),i("el-option",{attrs:{label:"小时",value:"H"}}),e._v(" "),i("el-option",{attrs:{label:"天",value:"D"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"故障描述:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.faultDescribe,callback:function(t){e.$set(e.formData,"faultDescribe",t)},expression:"formData.faultDescribe"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogRepairReceive.vue";t.default=s.exports},OCF4:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("DlwF");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{repairTask:{id:"",taskResult:"",remark:""},repairTaskId:"",tableData:[],retreatType:"1",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",table_style:"",title:"",fullscreen:!1}}},created:function(){this.repairTask=this.initData.formData,this.repairTaskId=this.initData.repairTaskId,this.tableData=this.initData.tableData},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},radioChange:function(){},tableData2EditList:function(e){var t=[];if(null==e||0==e.length)return t;for(var i=0;i<e.length;i++){var a=e[i],o={id:a.id,productId:a.productId,productGenre:a.productGenre,receiveCount:a.receiveCount,applyCount:a.applyCount};"edit"==a.operateType&&t.push(o)}return t},tableData2AddList:function(e){var t=[];if(null==e||0==e.length)return t;for(var i=0;i<e.length;i++){var a=e[i],o={productId:a.productId,productGenre:a.productGenre,receiveCount:a.applyCount,applyCount:a.applyCount,warehouseGenre:a.warehouseGenre};"add"==a.operateType&&t.push(o)}return t},save:function(){var e=this,t="",i=this.tableData2AddList(this.tableData);null!=i&&i.length>0&&(t=JSON.stringify(i));var o="",n=this.tableData2EditList(this.tableData);null!=n&&n.length>0&&(o=JSON.stringify(n)),Object(a.updateRepairTaskDetail)({roleId:this.$storage.get("userInfo").roleIds,deptId:this.$storage.get("userInfo").deptId,repairTaskId:this.repairTaskId,retreatType:this.retreatType,repairTaskJson:JSON.stringify(this.repairTask),detailAddJson:t,detailEditJson:o}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.dialogClose({pageName:"dialogSelect",resState:"ok"}))}).catch(function(e){})},closeDialog:function(e){this.showDialog=!1,this.isVisible=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",attrs:{model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{margin:"10px 20px"}},[e._v("\n        剩余物料是否生成退库单？"),i("br"),i("br"),e._v(" "),i("el-radio-group",{on:{change:e.radioChange},model:{value:e.retreatType,callback:function(t){e.retreatType=t},expression:"retreatType"}},[i("el-radio",{attrs:{label:"1"}},[e._v("生成退库单")]),i("br"),e._v(" "),i("el-radio",{attrs:{label:"2"}},[e._v("退回虚拟库")]),i("br")],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogSelect.vue";t.default=s.exports},OGen:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("pIFo"),i("Oyvg"),i("xfY5");var a=i("NaOS"),o=i("6Q0v"),n=i("xMja");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{DynaForm:a.a,dialogAddProductUnit:o.default},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写货品名称",trigger:"change"}],spec:[{required:!0,message:"请填写规格型号",trigger:"change"}],unitName:[{required:!0,trigger:"change",validator:function(t,i,a){e.unitData.defaultSelected.length<=0?a(new Error("请选择计量单位")):a()}}]},actionUrl:"",imageUrl:"",fileData:{photoDir:"product/"},unitData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"productUnit",isglobal:"0"}},defaultSelected:[]},lastUnitData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"productUnit",isglobal:"0"}},defaultSelected:[]},productTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"productType",isglobal:"0"}},defaultSelected:[]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},formTemp:[]}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.validityDays&&(this.temp.validityDays=Number(this.temp.validityDays)),this.temp.validityDays=0),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{unitSelect:function(e){e[0]?(this.temp.unit=e[0],this.unitData.defaultSelected=[e[0]]):(this.temp.unit=[],this.unitData.defaultSelected=[])},lastUnitSelect:function(e){e[0]?(this.temp.lastUnit=e[0],this.lastUnitData.defaultSelected=[e[0]]):(this.temp.lastUnit=[],this.lastUnitData.defaultSelected=[])},productTypeSelect:function(e){e[0]?(this.temp.type=e[0],this.productTypeData.defaultSelected=[e[0]]):(this.temp.type=[],this.productTypeData.defaultSelected=[])},addProductUnit:function(){this.dialogData.pid="0ae6e79890db490585e13f34bf00ea4b",this.dialogData.parentName="计量单位",this.dialogData.title="新增计量单位",this.openDialogName="dialogAddProductUnit",this.showDialog=!0,this.inLinVisible=!0},checkPrice:function(e){new RegExp("^[0-9]+\\.{0,1}[0-9]{0,2}$").test(e)||this.$message({message:"单价:"+e+" 输入错误，请输入大于零的正整数或(1,2)位小数！",type:"warning",duration:5e3})},dialogOpen:function(){var e=this;this.imageUrl="",this.actionUrl="/api//fileIO/file/uploadPhoto",this.temp.unit=this.unitData.defaultSelected[0],this.temp.lastUnit=this.lastUnitData.defaultSelected[0],this.temp.type=this.productTypeData.defaultSelected[0],this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},formListResult:function(e){var t="";null!=e&&e.length>0&&(t=JSON.stringify(e)),this.temp.prodPropertyJsonStr=t},save:function(){var e=this;this.$refs.dynaForm.getFormList(),this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(n.addProduct)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},handleAvatarSuccess:function(e){if(0==e.code){var t=e.photo;null!=t&&t.trim().length>0&&(this.temp.photo=t,this.imageUrl="/api/"+t),this.$message({message:"图片上传成功！",type:"success",duration:5e3})}else 0!=e.code&&null!=e.msg&&e.msg.trim().length>0&&this.$message.error(e.msg.trim())},beforeAvatarUpload:function(e){var t=e.type;if(t=t.replace("image/",""),-1!="jpg,jpeg,png".indexOf(t)){e.size>5242880&&this.$message({message:"上传员工照片大小不能超过 5MB!",type:"error",duration:5e3})}else this.$message({message:"上传员工照片只能是(jpg,jpeg,png)格式文件!",type:"error",duration:5e3})},closeDialog:function(e){this.showDialog=!1}}},r=(i("nmHX"),i("KHd+")),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticStyle:{height:"90vh"},attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"620px",top:"10vh","custom-class":"listDeliverClass"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{height:"100%",overflow:"auto"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{staticStyle:{"padding-left":"150px"},attrs:{span:12}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{name:"fileName",action:e.actionUrl,data:e.fileData,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?i("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"货品属性:",prop:"genreName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.genreName,callback:function(t){e.$set(e.temp,"genreName",t)},expression:"temp.genreName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"货品名称:",prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"企业货品编码:",prop:"sourceCode"}},[i("el-input",{model:{value:e.temp.sourceCode,callback:function(t){e.$set(e.temp,"sourceCode",t)},expression:"temp.sourceCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"图号:",prop:"pictureCode"}},[i("el-input",{model:{value:e.temp.pictureCode,callback:function(t){e.$set(e.temp,"pictureCode",e._n(t))},expression:"temp.pictureCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"规格型号:",prop:"spec"}},[i("el-input",{model:{value:e.temp.spec,callback:function(t){e.$set(e.temp,"spec",t)},expression:"temp.spec"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"计量单位:",prop:"unitName"}},[i("base-input-select",{staticStyle:{display:"inline-block",width:"140px"},attrs:{data:e.unitData.data},on:{callback:e.unitSelect},model:{value:e.unitData.defaultSelected,callback:function(t){e.$set(e.unitData,"defaultSelected",t)},expression:"unitData.defaultSelected"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"0px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addProductUnit}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"保质期(天):",prop:"validityDays"}},[i("el-input",{model:{value:e.temp.validityDays,callback:function(t){e.$set(e.temp,"validityDays",e._n(t))},expression:"temp.validityDays"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"货品类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.productTypeData.data},on:{callback:e.productTypeSelect},model:{value:e.productTypeData.defaultSelected,callback:function(t){e.$set(e.productTypeData,"defaultSelected",t)},expression:"productTypeData.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1),e._v(" "),i("el-row",[i("div",{staticStyle:{height:"200px"}},[i("dyna-form",{ref:"dynaForm",attrs:{formTemp:e.formTemp,props:{key:"name",value:"value"}},on:{"sent-list":e.formListResult}})],1)])],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAdd.vue";t.default=c.exports},OICn:function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=(i("z0WU"),{components:{multilevelTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tableData:[],selectList:[],configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:this.initData.temp.id}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseOutExecutes",params:{isNeedPage:"false",fieldCode:"name,actualCount,executorName,endDate"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},databridge:function(e){this.selectList=e},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;null!=e.selectList&&e.selectList}},watch:{}}),n=(i("KInz"),i("Rd41"),i("KHd+")),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"90px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_sale_saleOut_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogView.vue";t.default=l.exports},"OK+T":function(e,t,i){},OMP0:function(e,t,i){},OVhc:function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},props:["initData","visible"],data:function(){return{parentId:"",tableData:[],tableConfigList:[{customColumn:[{columnIndex:"sysCode",width:"200"},{columnIndex:"customerName"},{columnIndex:"orderDate"},{columnIndex:"makeName"},{columnIndex:"changeStateName"}],apiObj:{apiName:"listPageSaleOrderChange",params:{fieldCode:"sysCode,customerName,orderDate,beforeReceiptTypeName,afterReceiptTypeName,makeName,changeStateName,remark",orderId:"",orderStr:"ordeChange.cdate asc"}},mergeTitle:[{index:4,alias:"合并后的列",columns:["beforeReceiptTypeName","afterReceiptTypeName"]}],tempData:{},showHeader:!1,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"orderCountBefore",width:"110",_cellConfig:{hideTitle:!0}},{columnIndex:"orderCountAfter",width:"110",_cellConfig:{hideTitle:!0}},{columnIndex:"productPriceBefore",width:"100",_cellConfig:{hideTitle:!0}},{columnIndex:"productPriceAfter",width:"100",_cellConfig:{hideTitle:!0}},{columnIndex:"priceSumBefore",width:"100",_cellConfig:{hideTitle:!0}},{columnIndex:"priceSumAfter",width:"100",_cellConfig:{hideTitle:!0}},{columnIndex:"deliverDateBefore",width:"110",_cellConfig:{hideTitle:!0}},{columnIndex:"deliverDateAfter",width:"110",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageSaleOrderDetailChange",params:{fieldCode:"productCode,productName,productSpec,orderUnitName,orderCountBefore,orderCountAfter,productPriceBefore,productPriceAfter,priceSumBefore,priceSumAfter,deliverDateBefore,deliverDateAfter",isNeedPage:"false"}},dynamicValue:{parentId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:3,rightFixed:0}],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!1,isVisible:!1,inDialog:!0}},beforeCreate:function(){},created:function(){this.tableConfigList[0].apiObj.params.orderId=this.initData.orderId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},getData:function(){this.$refs.customBaseTable.getData()},databridge:function(e){this.tableData=e},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},closeDialog:function(){},save:function(){}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_sale_orderChangeAudit_orderChangeView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="orderChangeView.vue";t.default=n.exports},OZyy:function(e,t,i){"use strict";var a=i("PnOn");i.n(a).a},"Oa/l":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("uTIz"),o=i("2+ib");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{searchBar:a.a,multilevelTable:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{repairId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{equipmentId:"",rowData:{}},dataList:[],tableConfigList:[{apiObj:{apiName:"findListRepairTaskDetailByInfo",params:{taskId:"",fieldCode:"productCode,productName,productSpec,productUnitName,outCode,receiveCount,warehouseGenreName,outDtlStateName,applyCount,retreatCount,retreatTypeName,inDtlStateName",orderStr:"taskDtl.cdate asc"}},tempData:{},showHeader:!0,showIndex:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable"}]}},created:function(){this.tableConfigList[0].apiObj.params.taskId=this.initData.taskId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.dataList=e},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.updateData(this.searchObj)},closeDialogPage:function(){this.isVisible=!1,this.dialogClose()}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("el-row",{style:e.initData.table_style},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_equipment_equipmentRepair_repairTask_dialogRepairTaskDetailInfo0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDialogPage}},[e._v("关闭")])],1),e._v(" "),e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);r.options.__file="dialogRepairTaskDetailInfo.vue";t.default=r.exports},OaOy:function(e,t,i){"use strict";var a=i("VDvt");i.n(a).a},OafY:function(e,t,i){"use strict";i.r(t);i("rGqo");var a=i("WIyV"),o=i("+bMf"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{parentId:"",customerId:"",customerName:"",openDialogName:"",dialogLoading:!0,isVisible:!1,inDialog:!0,showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",orderDetail_style:"",title:"",temp:null,tempLable:null},tableData:[],rowTableList:[],apiObj:{apiName:"listPageRetreatDetailByEdit",params:{parentId:"",isRetreatByInfo:"true",fieldCode:"sysOrderCode,deliverCode,productCode,productName,productSpec,orderUnitName,deliverOrderCount,orderCount,productPrice,orderSum,remark"}},customColumn:[],mergeTitle:[],mergeColumn:[],mergeRow:[]}},beforeCreate:function(){},created:function(){this.parentId=this.initData.data.parentId,this.customerId=this.initData.data.customerId,this.customerName=this.initData.data.customerName,this.apiObj.params.parentId=this.parentId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},save:function(){this.$refs.moneyRetreatDialog.getData(),null!=this.rowTableList&&this.rowTableList.length>0&&this.saveSaleRetreat(this.rowTableList)},saveSaleRetreat:function(e){var t=this;if(null!=e&&0!=e.length){var i=[];e.forEach(function(e){var t={orderId:e.orderId,sysOrderCode:e.sysOrderCode,receiveAmount:e.receiveAmount,orderTotalSum:e.orderTotalSum,id:e.id,parentId:e.parentId,productId:e.productId,productCount:e.productCount,orderDetailId:e.orderDetailId,retreatDtlSum:e.retreatDtlSum,orderSum:e.orderSum};i.push(t)});var a="";null!=i&&i.length>0&&(a=JSON.stringify(i)),null!=a&&0!=a?this.$confirm("是否审核通过?","提示",{confirmButtonText:"通过",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.auditPassSaleRetreat)({roleId:t.$storage.get("userInfo").roleIds,parentId:t.parentId,customerId:t.customerId,customerName:t.customerName,dtlJsonStr:a}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消操作"})}):this.$message({type:"warning",duration:5e3,showClose:!0,message:"暂无发货单明细！"})}},dialogOpen:function(){},dialogClose:function(e){this.rowTableList=[],this.customerId="",this.deliverDtlIds="",this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{style:e.initData.orderDetail_style},[i("custom-base-table",{ref:"moneyRetreatDialog",attrs:{"data-custom-table-id":"views_sale_retreat_auditRetreat_dialogAuditPass0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"moneyRetreatDialog",useDefaultBtn:!1,showAll:!1},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("通过")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAuditPass.vue";t.default=s.exports},"Oi+5":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("uTIz"),o=i("2+ib"),n=i("ylDV"),l=i("9rbG"),s=i("WZUi");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{searchBar:a.a,multilevelTable:o.a,dialogAdd:n.default,dialogEdit:l.default},name:"dialog-add",props:["initData","visible"],data:function(){return{companyId:"",equipmentId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{equipmentId:"",rowData:{}},dataList:[],tableConfigList:[{customColumn:[{columnIndex:"isdisable",componentName:"switch",_cellConfig:{methodName:"switchEvent",hideTitle:!0}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"编辑",nameEn:"editByParent",editBtns_isShow:!0,rowState:"#self@targetTypeName#==='传感器指标'||#self@targetTypeName#==='分析指标'",method:this.editByParent},{name:"删除",nameEn:"deleteByParent",editBtns_isShow:!0,rowState:"#self@targetTypeName#==='传感器指标'||#self@targetTypeName#==='分析指标'",method:this.deleteByParent}]}],apiObj:{apiName:"listPageEquipmentSensor",params:{equipmentId:"",fieldCode:"targetTypeName,targetCode,targetName,targetFormulaDisplay,isdisable,remark",orderStr:"target_code asc"}},tempData:{},showHeader:!0,showIndex:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable"}],configs:{topBarBtnList:[{name:"新增",nameEn:"add",isShow:!0,icon:"add",method:this.dialogAdd}]}}},created:function(){this.companyId=this.$storage.get("userInfo").companyId,this.equipmentId=this.initData.equipmentId,this.tableConfigList[0].apiObj.params.equipmentId=this.equipmentId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.dataList=e},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.updateData(this.searchObj)},closeDialogPage:function(){this.isVisible=!1,this.dialogClose({resState:"ok"})},dialogAdd:function(){this.dialogData.equipmentId=this.equipmentId,this.openDialogName="dialogAdd",this.dialogData.title="新增传感器指标",this.showDialog=!0,this.inLinVisible=!0},editByParent:function(e){this.dialogData.rowData=JSON.parse(JSON.stringify(e)),this.openDialogName="dialogEdit",this.dialogData.title="修改传感器指标",this.showDialog=!0,this.inLinVisible=!0},deleteByParent:function(e){var t=this;this.$confirm("此操作将删除设备传感器指标，请谨慎操作！ 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.deleteEquipmentSensor)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.updateData(t.searchObj))}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},switchEvent:function(e){var t=this;Object(s.updateDisableEquipmentSensor)({id:e.row.id,isdisable:e.row.isdisable}).then(function(i){if(0===i.code){var a="";"1"==e.row.isdisable?a="该传感器指标已启用":"0"==e.row.isdisable&&(a="该传感器指标已禁用"),t.$notify({title:"操作成功",message:a,type:"success",duration:5e3})}}).catch(function(e){})}}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",[i("el-row",{staticStyle:{"text-align":"center","margin-top":"20px"}},[i("a",[e._v("企业ID：")]),e._v(e._s(e.companyId)+"             \n      "),i("a",[e._v("设备ID：")]),e._v(e._s(e.equipmentId)+"\n    ")]),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{style:e.initData.table_style},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_equipment_equipmentSensor_dialogEquipmentSensor0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDialogPage}},[e._v("关闭")])],1)],1),e._v(" "),e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);u.options.__file="dialogEquipmentSensor.vue";t.default=u.exports},Ojdt:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("BUpD");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{initialPeriodDate:null,paymentPeriodDate:null,rules:{recevieType:[{required:!0,message:"请选择收款类型",trigger:"change"}],amount:[{required:!0,trigger:"change",validator:function(t,i,a){e.isNumberByValue(i)?(0==i&&a(new Error("请输入大于零的正整数或(1,2)位小数！")),a()):a(new Error("请输入大于零的正整数或(1,2)位小数！"))}}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.initData.rowData&&(this.formData=this.initData.rowData,this.initialPeriodDate=new Date(this.initData.rowData.initialPeriodDate),null!=this.initData.rowData.paymentPeriodDate&&(this.paymentPeriodDate=new Date(this.initData.rowData.paymentPeriodDate)))},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){e.dialogLoading=!0,Object(a.eidtFinanceBase)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"设定成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})})},closeDialog:function(e){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"客户名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.customerName,callback:function(t){e.$set(e.formData,"customerName",t)},expression:"formData.customerName"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"收款类型:",prop:"recevieType"}},[i("el-select",{model:{value:e.formData.recevieType,callback:function(t){e.$set(e.formData,"recevieType",t)},expression:"formData.recevieType"}},[i("el-option",{attrs:{label:"应收款",value:"plus"}}),e._v(" "),i("el-option",{attrs:{label:"预收款",value:"minus"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"期初金额:",prop:"amount"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},OkRj:function(e,t,i){"use strict";var a=i("zUD+");i.n(a).a},Onmc:function(e,t,i){},OyKK:function(e,t,i){"use strict";i.r(t);i("f3/d"),i("rGqo"),i("yt8O"),i("XfO3"),i("9AAn");var a=i("vR9m"),o={components:{},name:"dialog-add",props:["initData","visible"],mixins:[i("K77I").a],data:function(){return{deliverId:"",customerId:"",deliverCode:"",deliverType:"send",deliverTypeNameKeyMap:new Map([["send","1"],["deliver","2"],["self","3"]]),isShowSend:!0,isShowDeliver:!1,isShowSelf:!1,dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{orderId:"",deliverId:"",type:"",deliverDate:new Date,makeId:"",makeName:"",waybillCompany:"",waybillCode:"",supplierAddress:"",supplierName:"",supplierMobile:"",carCode:"",remark:""},rules:{makeName:[{required:!0,message:"请选择经办人",trigger:"change"}],deliverDate:[{required:!0,message:"请填写发货日期",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",fullscreen:!1,tempLable:null},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择经办人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"}},dialogName:"dialogOption"}},CustAddressDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择收货地址",tableUrl:"/base/customeAddress/listPageCustomeAddress",tableParm:{customerId:"",fieldCode:"name,mobile,address"}},dialogName:"dialogOption"}}}},created:function(){var e=this.initData.rowData;this.formData.deliverId=e.parentId,this.formData.orderId=e.orderId;var t=this.$storage.get("userInfo");null!=t.userId&&t.userId.trim().length>0&&(this.formData.makeId=t.userId.trim()),null!=t.userName&&t.userName.trim().length>0&&(this.formData.makeName=t.userName.trim()),this.CustAddressDialog.dialog.data.tableParm.customerId=e.supplierId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},radioChange:function(){this.isShowSend=!1,this.isShowDeliver=!1,this.isShowSelf=!1,"send"==this.deliverType?this.isShowSend=!0:"deliver"==this.deliverType?this.isShowDeliver=!0:"self"==this.deliverType&&(this.isShowSelf=!0)},makeSelect:function(e){e[0]&&(this.formData.makeId=e[0].id,this.formData.makeName=e[0].name)},custAddressSelect:function(e){e[0]&&(this.formData.supplierName=e[0].name,this.formData.supplierMobile=e[0].mobile,this.formData.supplierAddress=e[0].address)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){e.formData.type=e.deliverTypeNameKeyMap.get(e.deliverType);var i=JSON.stringify(e.formData);e.dialogLoading=!0,Object(a.updateAssistDeliverType)({orderId:e.formData.orderId,deliverId:e.formData.deliverId,deliverJsonStr:i}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}})},closeDialog:function(e){this.showDialog=!1}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"600px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 0px 0px 20px"}},[i("el-form",{ref:"submitForm",attrs:{inline:!0,rules:e.rules,model:e.formData,"label-position":"right","label-width":"90px"}},[i("el-row",{staticStyle:{"text-align":"center",margin:"0px 0px 20px 0px"}},[i("el-radio-group",{on:{change:e.radioChange},model:{value:e.deliverType,callback:function(t){e.deliverType=t},expression:"deliverType"}},[i("el-radio",{attrs:{label:"send"}},[e._v("发货")]),e._v(" "),i("el-radio",{attrs:{label:"deliver"}},[e._v("送货")]),e._v(" "),i("el-radio",{attrs:{label:"self"}},[e._v("供应商自提")])],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"经办人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"170px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.formData.makeName,callback:function(t){e.$set(e.formData,"makeName",t)},expression:"formData.makeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"发货日期:",prop:"deliverDate"}},[i("el-date-picker",{staticStyle:{width:"170px"},attrs:{type:"date",placeholder:"发货日期","value-format":"yyyy-MM-dd"},model:{value:e.formData.deliverDate,callback:function(t){e.$set(e.formData,"deliverDate",t)},expression:"formData.deliverDate"}})],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSend,expression:"isShowSend"}]},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"物流公司:",prop:"waybillCompany"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.formData.waybillCompany,callback:function(t){e.$set(e.formData,"waybillCompany",t)},expression:"formData.waybillCompany"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"物流单号:",prop:"waybillCode"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.formData.waybillCode,callback:function(t){e.$set(e.formData,"waybillCode",t)},expression:"formData.waybillCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"收货地址:",prop:"supplierAddress"}},[i("base-input-option",{staticStyle:{width:"170px"},attrs:{dialog:e.CustAddressDialog.dialog},on:{callback:e.custAddressSelect},model:{value:e.formData.supplierAddress,callback:function(t){e.$set(e.formData,"supplierAddress",t)},expression:"formData.supplierAddress"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"联系人:",prop:"supplierName"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"手机号:",prop:"supplierMobile"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.formData.supplierMobile,callback:function(t){e.$set(e.formData,"supplierMobile",t)},expression:"formData.supplierMobile"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}})],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowDeliver,expression:"isShowDeliver"}]},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"车牌号:",prop:"carCode"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.formData.carCode,callback:function(t){e.$set(e.formData,"carCode",t)},expression:"formData.carCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"收货地址:",prop:"supplierAddress"}},[i("base-input-option",{staticStyle:{width:"170px"},attrs:{dialog:e.CustAddressDialog.dialog},on:{callback:e.custAddressSelect},model:{value:e.formData.supplierAddress,callback:function(t){e.$set(e.formData,"supplierAddress",t)},expression:"formData.supplierAddress"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"联系人:",prop:"supplierName"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"手机号:",prop:"supplierMobile"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.formData.supplierMobile,callback:function(t){e.$set(e.formData,"supplierMobile",t)},expression:"formData.supplierMobile"}})],1)],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSelf,expression:"isShowSelf"}]},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"车牌号:",prop:"carCode"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.formData.carCode,callback:function(t){e.$set(e.formData,"carCode",t)},expression:"formData.carCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[i("el-input",{staticStyle:{width:"460px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogAdd.vue";t.default=l.exports},P1D2:function(e,t,i){"use strict";var a=i("4P6j");i.n(a).a},"P3+s":function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("rGqo");var a=i("IfZh"),o=i("zF5t"),n=i("oC0i"),l=i("WnSj"),s=i("z0WU"),r=i("mSNy");function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n    \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n    \t\t\t\t\t\t\t<el-button v-show="colConfig.changeWarehouse_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.changeWarehouse(scope.row,scope.$index)">更改/增加货位</el-button>\n    \t\t\t\t\t\t\t\x3c!--<el-button  v-show="colConfig.qrcodeBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.qrcodeBtns(scope.row,scope.$index)">二维码</el-button>--\x3e\n    \t\t\t\t\t</div>\n  \t\t\t\t</el-table-column>'},p={components:{dialogRoleUser:n.default,dialogChangeWarehouseByIn:l.default},name:"dialog-add",props:["initData","visible"],data:function(){return{roleId:"",roleName:"",type:"",userData:[],userId:[],isSingle:!0,rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",temp:{},tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],selectList:null,tableIndex:null,initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:u,changeWarehouse:this.changeWarehouse,changeWarehouse_isShow:!0}},configs:{tableConfigs:[],showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1,selectDataUser:{data:{selectUrl:"/system/role/findListUserByRole",selectParm:{queryStr:"role.id = '"+this.initData.temp.roleId+"'",userIsdisable:"1"}},defaultSelected:[]}}},created:function(){this.tableIndex=null,this.roleId=this.initData.temp.roleId,this.roleName=this.initData.temp.roleName,this.type=this.initData.temp.type,this.initUserData(),this.initTable()},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=d(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!1},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{userSelect:function(e,t){e[0]?(this.selectDataUser.defaultSelected=[e[0]],this.userId=[e[0]]):(this.selectDataUser.defaultSelected=[],this.userId=[])},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(s.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==r.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==r.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==r.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==r.a.locale&&(e.label=t.substring(0,t.indexOf("_"))))}),this.internationalConfig(),e.push(this.initConfigs.tableOperates),e},internationalConfig:function(){"en"==r.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==r.a.locale&&(this.initConfigs.tableOperates.label="操作")},initTable:function(){var e=this,t="",i=this.initData.temp;null!=i&&i.length>0&&i.forEach(function(e){null!=e.id&&e.id.trim().length>0&&(t=0==t.length?"'"+e.id.trim()+"'":t+",'"+e.id.trim()+"'")});var o="";null!=t&&t.trim().length>0&&(o="a.id in ("+t+")"),this.dialogLoading=!0,Object(a.listPageWarehouseInDetailByDispatch)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){c(e,t,i[t])})}return e}({},this.tempQuery,{queryStr:o,fieldCode:"parentCode,productCode,productName,productSpec,productGenreName,productUnitName,count,code,warehouseName",pageNo:this.pageNo})).then(function(t){e.getListPage(t),e.dialogLoading=!1}).catch(function(t){e.dialogLoading=!1})},initUserData:function(){var e=this;this.userData=[],Object(o.findListUserByRole)({userIsdisable:"1",queryStr:"role.id = '"+this.roleId+"'"}).then(function(t){var i=t.result.options;null!=i&&i.length>0&&i.forEach(function(t){var i=t.id,a=t.userName;null!=i&&i.trim().length>0&&null!=a&&a.trim().length>0&&e.userData.push({key:i,label:a,disabled:!1})})}).catch(function(e){})},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},leftCheckChange:function(e){this.isSingle&&this.singleUserData(e)},singleUserData:function(e){var t=this.userData;if(null!=t&&0!=t.length)if(0==e.length)t.forEach(function(e){e.disabled=!1});else if(e.length>0){var i="";e.forEach(function(e){i=i+e+","}),t.forEach(function(e){var t=e.key;-1==i.indexOf(t)&&(e.disabled=!0)})}},addAdmin:function(){var e=this.roleId,t=this.roleName;this.dialogData.temp.roleId=e,this.dialogData.title=t+"-分配用户",this.openDialogName="dialogRoleUser",this.showDialog=!0,this.inLinVisible=!0},saveDispatch:function(){var e=this,t=this.roleId,i=this.roleName;this.type;if(null!=t&&0!=t){if(null==this.userData||0==this.userData.length)return this.dialogData.temp.roleId=t,this.dialogData.title=i+"-分配用户",this.openDialogName="dialogRoleUser",this.showDialog=!0,void(this.inLinVisible=!0);if(null!=this.userId&&0!=this.userId.length){var o=this.tableData,n="";if(null!=o&&0!=o.length){for(var l=[],s=0;s<o.length;s++){var r=o[s],c={id:"",warehouseId:"",taskName:""};c.id=r.id,c.warehouseId=r.warehouseId,c.taskName=r.parentCode+"_"+r.productName,l.push(c)}if(n=JSON.stringify(l),this.temp.dtlJsonStr=n,this.isSingle&&this.userId.length>1)this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择一位执行人，执行人只允许单选！"});else{this.temp.executeId="";for(var d=0;d<this.userId.length;d++){var u=this.userId[d];null!=u&&u.trim().length>0&&(this.temp.executeId=this.temp.executeId+u+",")}Object(a.updateWarehouseInDispatch)(this.temp).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择执行人！"})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"仓库管理员角色ID为空或空字符串！"})},changeWarehouse:function(e,t){this.temp=JSON.parse(JSON.stringify(e)),this.tableIndex=t,this.dialogData.temp=this.temp,this.dialogData.title="更改/增加货位",this.openDialogName="dialogChangeWarehouseByIn",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){if(null!=e&&"dialogChangeWarehouseByIn"==e.pageName&&null!=this.tableIndex){var t=e.id,i=e.pathName;null!=this.tableData&&null!=this.tableData[this.tableIndex]&&(this.tableData[this.tableIndex].warehouseId=t,this.tableData[this.tableIndex].warehouseName=i)}this.inLinVisible=!1,this.showDialog=!1,this.initUserData()}},watch:{pageNo:function(){this.initTable()}}},m=(i("mVLt"),i("KHd+")),h=Object(m.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{width:"300px","margin-left":"2%","margin-top":"10px"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择执行人",disabled:!1,data:e.selectDataUser.data},on:{callback:e.userSelect},model:{value:e.selectDataUser.defaultSelected,callback:function(t){e.$set(e.selectDataUser,"defaultSelected",t)},expression:"selectDataUser.defaultSelected"}}),e._v(" "),i("span",{staticStyle:{"font-size":"12px",color:"#1482f0",cursor:"pointer"},on:{click:e.addAdmin}},[e._v("+添加仓库管理员")])],1),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-top":"10px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveDispatch}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);h.options.__file="dialogDispatch.vue";t.default=h.exports},PHWx:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}],entityTypeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.entityTypeData.defaultSelected.length<=0?a(new Error("请选择仓库类型")):a()}}]},entityTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseType",isglobal:"1"}},defaultSelected:[]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",fullscreen:!1,tempLable:null},formTemp:[]}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{entityTypeSelect:function(e){e[0]?(this.temp.entityType=e[0],this.entityTypeData.defaultSelected=[e[0]]):(this.temp.entityType=[],this.entityTypeData.defaultSelected=[])},dialogOpen:function(){var e=this;this.entityTypeData.defaultSelected=[],this.entityTypeData.defaultSelected.push(this.temp.entityType),this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateWarehouseByEntity)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"仓库性质:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{value:"实体库",readonly:!0}})],1),e._v(" "),i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.entityTypeName+":",prop:"entityTypeName"}},[i("base-input-select",{attrs:{data:e.entityTypeData.data},on:{callback:e.entityTypeSelect},model:{value:e.entityTypeData.defaultSelected,callback:function(t){e.$set(e.entityTypeData,"defaultSelected",t)},expression:"entityTypeData.defaultSelected"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseEntityEdit.vue";t.default=s.exports},PHiC:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("kAts");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{parentId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写不通过原因！",trigger:"change"}]}}},created:function(){this.parentId=this.initData.parentId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.auditDisagreeSaleReceive)({parentId:e.parentId,remark:e.temp.remark}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"执行成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"不通过原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAuditDisagree.vue";t.default=s.exports},PRW0:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("ywZ6"),l=i("vet8");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddSupplier:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,price,priceSum,remark",isNeedPage:"false",type:"add"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"price",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["单价必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"priceSum",width:"120",componentName:"input",_cellConfig:{compute:"self@priceCount(*)self@price",editable:!1}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>￥ {{data.total.toFixed(2)}}</span></li>\n                    </ul>'},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},data:{total:"0.00"},computes:{total:"table@priceSum"}},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"3"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="采购入库",this.temp.type="d78ceba5beef41f5be16f0ceee775399",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={productId:n.productId,price:n.price,remark:n.remark,p2nFormula:n.p2nFormula,priceUnit:n.priceUnit,priceCount:n.priceCount,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.addWarehouseInByWc)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:"",priceCount:"",remark:"",price:"0.00",priceSum:"0.00"};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{pageNo:function(){this.initTable("add","")}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px",width:"100%"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseInWC_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogAdd.vue";t.default=d.exports},PeKY:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d"),i("Oyvg");var a=i("WIyV"),o=i("1IKD"),n=i("nX/d");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark",parentId:""}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntityVirtual:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"1"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type;var e=this.initData.temp.pid,t=this.initData.temp.pathId;null!=t&&t.trim().length>0&&-1!=t.indexOf("56f5e83dcb9911e884ad00163e105f05")?(this.warehouseData.defaultSelected[0]=e,this.warehouseData.defaultSelected[1]=this.initData.temp.warehouseId):null!=t&&t.trim().length>0&&-1!=t.indexOf("2d75e49bcb9911e884ad00163e105f05")&&(this.warehouseData.defaultSelected[0]=this.initData.temp.warehouseId),this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.temp.warehouseId?(this.dialogData.isNeedWarehouseProduct="true",this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i].priceCount;if(null==a||0==a.trim().length)t=t+"第 "+(i+1)+" 行: 出库数量为空或空字符串！";else new RegExp("^[0-9]+([.]{1}[0-9]+){0,1}$").test(a)||(t=t+"第 "+(i+1)+" 行: 出库数量("+a+")输入错误，请输入大于零的整数或小数！")}return t},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){var a=this.checkColumn(e);if(null!=a&&a.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:a});else{for(var o=[],l=0;l<e.length;l++){var s=e[l],r={id:s.id,productId:s.productId,remark:s.remark,priceCount:s.priceCount,priceUnit:s.priceUnit,p2nFormula:s.p2nFormula,p2nIsScale:s.p2nIsScale,p2nDecimalCount:s.p2nDecimalCount};o.push(r)}null!=o&&o.length>0&&(i=JSON.stringify(o)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.temp.type=this.typeData.defaultSelected[0],this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,Object(n.updateWarehouseOut)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]);var t=this.temp.type;this.temp.deptName="",this.temp.deptId="",-1!="cb0a55d81e754cd3b59715d225dab087".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"1"}):-1!="609fa44c031847569a1d9e2516be4b41".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"2"}):-1!="9459be975cd94ada8443cdf32f52c2be".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}):-1!="4cba5d3815644b26920777512a20474b".indexOf(t)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,this.tableData.push(o)}}},watch:{}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{padding:"10px 10px 0 10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"仓库:",prop:"warehouseName"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{data:e.warehouseData.data},on:{callback:e.warehouseSelect},model:{value:e.warehouseData.defaultSelected,callback:function(t){e.$set(e.warehouseData,"defaultSelected",t)},expression:"warehouseData.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouse_out_manage_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogEdit.vue";t.default=c.exports},PiZM:function(e,t,i){"use strict";var a=i("8h7S");i.n(a).a},"Pk/H":function(e,t,i){"use strict";i.r(t);i("rGqo");var a=i("8Vv6"),o={components:{customBaseTable:i("WIyV").a},name:"dialog-edit",props:["initData","visible"],data:function(){return{orderId:"",orderObject:{},orderCollect:{},rowData:{},orderDtlList:[],rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",tempLable:null,data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tableData_orderDetail:[],apiObj_orderDetail:{apiName:"listPageOrderDetailByLockCount",params:{fieldCode:"productCode,productName,productSpec,orderUnitName,orderCount,deliverCount,allowStockCount,maxLockCount,lockCount,editLockCount",parentId:"",isNeedPage:"false",queryStr:"detail.state in ('3','4')"}},customColumn_orderDetail:[{columnIndex:"editLockCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{lessThan:["self@maxLockCount",!0]}],message:["请输入大于零的正整数或(1,2)位小数！","不可大于可锁数量！"]}}],mergeTitle_orderDetail:[],mergeColumn_orderDetail:[],mergeRow_orderDetail:[],keyMapping_orderDetail:{},tempData_orderDetail:{}}},beforeCreate:function(){},created:function(){this.orderId=this.initData.orderId,this.apiObj_orderDetail.params.parentId=this.orderId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){Array.isArray(e)&&(this.orderDtlList=[],this.orderDtlList=e)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){this.$refs.orderDetailLockStockDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.saveSaleOrder(this.orderDtlList)},saveSaleOrder:function(e){var t=this,i=[];e.forEach(function(e){var t={id:e.id,productId:e.productId,productLockCount:e.productLockCount,lockCount:e.lockCount,editLockCount:e.editLockCount,versionLockCount:e.versionLockCount,p2nFormula:e.p2nFormula,p2nIsScale:e.p2nIsScale,p2nDecimalCount:e.p2nDecimalCount};i.push(t)});var o=JSON.stringify(i);Object(a.updateSaleOrderByLockCount)({dtlJsonStr:o}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{padding:"10px"}},[i("custom-base-table",{ref:"orderDetailLockStockDialog",attrs:{"data-custom-table-id":"views_sale_orderQuery_dialogOrderDetailLockStock0",isSortable:!1,varList:e.tableData_orderDetail,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn_orderDetail,apiObj:e.apiObj_orderDetail,mergeTitle:e.mergeTitle_orderDetail,mergeColumn:e.mergeColumn_orderDetail,mergeRow:e.mergeRow_orderDetail,tempData:e.tempData_orderDetail,componentId:"orderDetailLockStockDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping_orderDetail,hidePages:!0},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);l.options.__file="dialogOrderDetailLockStock.vue";t.default=l.exports},PnOn:function(e,t,i){},Pwi5:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}],entityTypeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.entityTypeData.defaultSelected.length<=0?a(new Error("请选择仓库类型")):a()}}]},entityTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseType",isglobal:"1"}},defaultSelected:[]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",fullscreen:!1,tempLable:null},formTemp:[]}},created:function(){this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{entityTypeSelect:function(e){e[0]?(this.temp.entityType=e[0],this.entityTypeData.defaultSelected=[e[0]]):(this.temp.entityType=[],this.entityTypeData.defaultSelected=[])},dialogOpen:function(){var e=this;this.temp.entityType=this.entityTypeData.defaultSelected[0],this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addWarehouseByEntity)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.entityTypeName+":",prop:"entityTypeName"}},[i("base-input-select",{attrs:{data:e.entityTypeData.data},on:{callback:e.entityTypeSelect},model:{value:e.entityTypeData.defaultSelected,callback:function(t){e.$set(e.entityTypeData,"defaultSelected",t)},expression:"entityTypeData.defaultSelected"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseEntityAdd.vue";t.default=s.exports},Q672:function(e,t,i){"use strict";i.r(t);var a=i("BEur"),o={name:"dialog-edit",props:["initData","visible"],data:function(){return{formData:{id:"",remark:""},dialogLoading:!0,isVisible:!1,inDialog:!0,rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){var e=this.initData.rowData;this.formData.id=e.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.auditDisagreeAssistRetreat)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center","padding-bottom":"10px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);l.options.__file="dialogAuditDisagree.vue";t.default=l.exports},Q6Ii:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("Qe0A"),l=i("a0Xs"),s=i("hZMg");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageForAddFromBOM",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",dtlJsonStr:this.initData.temp}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isOnlyEntity:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{deptType:"6d8a030ba1ce11e884ad00163e105f0a",type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this,t=this.$storage.get("userInfo");this.temp.makeId=t.userId,this.temp.makeName=t.userName,Object(s.findUserDepartmentByUser)({userId:this.temp.makeId,deptType:"6d8a030ba1ce11e884ad00163e105f0a"}).then(function(t){null!=t.deptId&&t.deptId.trim().length>0&&(e.temp.deptId=t.deptId.trim()),null!=t.deptName&&t.deptName.trim().length>0&&(e.temp.deptName=t.deptName.trim())}),this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="生产领料出库",this.temp.type="cb0a55d81e754cd3b59715d225dab087",this.apiObj.params.isreplaceable=this.initData.isreplaceable},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(l.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={productId:l.productId,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount,remark:l.remark};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.addWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,this.temp.deptId="",this.temp.deptName="",Object(s.findUserDepartmentByUser)({userId:this.temp.makeId,deptType:"6d8a030ba1ce11e884ad00163e105f0a"}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_produce_materialRequisitionWC_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogAdd.vue";t.default=u.exports},Q8Fw:function(e,t,i){},Q9PB:function(e,t,i){},QFS0:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("rGqo"),i("f3/d");var a=i("K3g7"),o=i("IfZh"),n=i("z0WU"),l=i("mSNy");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{queryType:null,productId:"",productType:"",warehouseIds:"",dialogLoading:!1,isVisible:!1,inDialog:!0,tempLable:{},tempQuery:{},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{fullscreen:!1,title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1},selectTree:{pid:"",id:"",name:""},BaseTableLoading:!1,tableData:[],selectList:[],configs:{tableConfigs:[],isSingle:!0,showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1,resState:null}},created:function(){var e=this.initData.temp;this.productId=e.productId,this.productType=e.productType,this.warehouseIds=this.initData.warehouseIds,this.initTree()},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,name:e.nodeData.name},this.pageNo=1,this.radioChange()},initTree:function(){var e=this;this.dialogLoading=!0;var t=this;Object(a.treeWarehouse)({notInWarehouseIds:this.warehouseIds}).then(function(e){var i=[],a=e.result.treeList;t.selectTree={pid:a.pid,id:a.id,name:a.name},i.push(a),t.treeData=i,t.initTable(null,null,null,null,null),t.$nextTick(function(){t.$refs.tree.$children[0].setCurrentKey(t.selectTree.id)})}).catch(function(t){e.dialogLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!0,this.configs.showIndex=!0,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==l.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==l.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==l.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==l.a.locale&&(e.label=t.substring(0,t.indexOf("_"))))}),e},initTable:function(e,t,i,a,n){var l=this;null!=t&&0!=t.trim().length||(t=""),null!=i&&0!=i.trim().length||(i=""),null!=a&&0!=a.trim().length||(a=""),null!=n&&0!=n.trim().length||(n=""),e&&(this.BaseTableLoading=!0),Object(o.findWarehouseListByWarehouseIn)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}({},this.tempQuery,{notInWarehouseIds:this.warehouseIds,nodeId:t,productId:i,productType:a,isExistProd:n,pageNo:this.pageNo})).then(function(t){l.getListPage(t),l.dialogLoading=!1,e&&(l.BaseTableLoading=!1)}).catch(function(e){l.dialogLoading=!1,l.BaseTableLoading=!1})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},radioChange:function(){var e="",t="",i="";"productId"==this.queryType?(e=this.productId,i="true"):"productType"==this.queryType?(t=this.productType,i="true"):"warehouseId"==this.queryType&&(i="false");var a="";null!=this.selectTree&&null!=this.selectTree.id&&this.selectTree.id.trim().length>0&&(a=this.selectTree.id.trim()),this.initTable(!0,a,e,t,i)},dataBridge:function(e){if(null!=e&&e.length>0){var t=e[0];t.pageName="dialogChangeWarehouseByIn",this.selectList.push(t)}},save:function(){var e={id:this.selectList[0].id,pathName:this.selectList[0].pathName};this.dialogClose(e),this.isVisible=!1}},watch:{pageNo:function(){this.initTable()}}},d=(i("qIkH"),i("KHd+")),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticClass:"treeStyle",attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{attrs:{span:20}},[i("div",{staticClass:"tableContent",staticStyle:{"margin-left":"10px"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.BaseTableLoading,expression:"BaseTableLoading"}],staticStyle:{height:"400px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1)]),e._v(" "),i("el-row",{staticStyle:{height:"100px","text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogWarehouseBySimple.vue";t.default=u.exports},QJ8N:function(e,t,i){"use strict";i.r(t);i("rGqo");var a=i("2+ib"),o=i("DJRg"),n=i("Ti1M"),l=(i("z0WU"),i("Ppn9"),{name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,topBarBtnList:[{name:"添加产品",nameEn:"addProduct",isShow:!0,icon:"add",method:this.addProduct}],tempCount:{count:0},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"planCount",componentName:"input",_cellConfig:{rules:[{required:!0},{greaterThan:["tempCount@count",!1]}],message:["该项不能为空！","该项输入必须大于零！"]}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,icon:"delete",method:this.delete}]}],apiObj:{apiName:"listPageBoms",params:{fieldCode:"prodInfo,genreName,unitName,planCount",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"prodCode,prodName,prodSpec,productProperty",modelCode:"BomProduct",bomIds:this.initData.temp}},temp:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,dragTable:!0,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a,dialogAddProduct:o.default,dialogProdLackNum:n.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(e){this.$emit("close-dialog",e||{resState:"ok"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},removeArray:function(e,t){for(var i=e.length,a=0;a<i;a++)if(e[a].id==t.id)return 0==a?(e.shift(),e):a==i-1?(e.pop(),e):(e.splice(a,1),e)},delete:function(e,t){var i=this,a=this;a.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.deleteData(e),i.removeArray(i.initData.selectList,e)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},nextStep:function(){this.getData(),0!=this.selectList.length&&(this.dialogData.parent=this.initData.parent,this.dialogData.isreplaceable=this.isreplaceable,this.dialogData.temp=JSON.stringify(this.selectList),this.dialogData.tempLable=this.tempLable,this.dialogData.title="最大可生产量",this.openDialogName="dialogProdLackNum",this.showDialog=!0,this.visibleState=!0)},addProduct:function(){var e="";this.initData.selectList&&this.initData.selectList.forEach(function(t){e+=""==e?"'"+t.id+"'":",'"+t.id+"'"}),this.dialogData.temp=e,this.dialogData.title="添加产品",this.openDialogName="dialogAddProduct",this.showDialog=!0,this.visibleState=!0},closeDialog:function(e){if(this.showDialog=!1,"ok"===e.resState&&"dialogAddProductByBOM"!=e.pageName)if(e.selectList){if(e.selectList.length>0){for(var t=0;t<e.selectList.length;t++)this.initData.selectList.push(e.selectList[t]);this.pushData(e.selectList)}}else this.dialogClose(e);else this.dialogClose(e)},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}}),s=(i("4Rkp"),i("WZeK"),i("KHd+")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[e.topBarBtnList&&e.topBarBtnList.length?i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[e._l(e.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_bundleAnalysis_dialogInputProdNum0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);r.options.__file="dialogInputProdNum.vue";t.default=r.exports},QW4X:function(e,t,i){},QXqY:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("WIyV"),o=i("+h8N"),n=i("vzyZ"),l=i("hZMg"),s=i("QD6Y"),r=i("cTe8"),c={components:{customBaseTable:a.a,selectProductByPurchasePlan:o.default,selectOrderByPurchasePlan:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{sysDateStr:"",reasonId:"372b0432c06e4792b00b03b8fb5be190",reason:"常规补货",rules:{makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,formData:{planId:"",remark:"",makeId:"",makeName:"",dtlJsonStr:"",isAutoCommit:"",deleteIds:""},tempLable:{},tempQuery:{},tableData:[],tableList:[],deleteIds:"",configs:{topBarBtnList:[{name:"货品新增",nameEn:"selectProduct",isShow:!0,method:this.selectProduct},{name:"订单新增",nameEn:"selectOrder",isShow:!0,method:this.selectOrder},{name:"产品合并",nameEn:"mergeProduct",isShow:!0,method:this.mergeProduct}]},apiObj:{apiName:"listPagePurchasePlanDetails",params:{fieldCode:"prodInfo,unitName,count,reason,edate,remark,orderCode",prodColumnKey:"productCode,productName,spec,productProperty",state:"0",pageType:"edit",isNeedChild:"true",parentId:"null"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"}],message:["计划数量必须大于零！","请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"reason",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"getDictionarys",params:{dictionaryKey:"purchaseReason",isglobal:"1"}},rules:[{required:!0}],outputData:!0}},{columnIndex:"edate",width:"150",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",greaterThan:["tempData@minDate",!0],rules:[{required:!0}]}},{columnIndex:"remark",width:"110",componentName:"input",_cellConfig:{}},{columnIndex:"orderCode",width:"110",_cellConfig:{hideTitle:!0}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"deleteBySecond",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteBySecond}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{minDate:new Date},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this,t=this.initData.rowData;this.formData.makeId=t.makeId,this.formData.makeName=t.makeName,this.formData.remark=t.remark,this.formData.planId=t.id,this.apiObj.params.parentId=t.id,Object(l.findSystemDateTime)({dateFormat:"yyyy-MM-dd"}).then(function(t){0==t.code&&null!=t.sysDateTime&&t.sysDateTime.trim().length>0&&(e.sysDateStr=t.sysDateTime.trim())}).catch(function(e){})},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.planAddDialog.getData()},databridge:function(e){Array.isArray(e)&&(this.tableList=[],this.tableList=e)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},selectProduct:function(){this.dialogData.title="选择货品",this.openDialogName="selectProductByPurchasePlan",this.showDialog=!0,this.inLinVisible=!0},selectOrder:function(){this.tableList=[],this.getData(),this.dialogData.title="选择销售订单",this.openDialogName="selectOrderByPurchasePlan",this.dialogData.tableData=this.tableList,this.dialogData.isNeedRepeat=!1,this.showDialog=!0,this.inLinVisible=!0},mergeProduct:function(){var e=this;this.getData();var t=[];if(this.tableList.length>0)for(var i=0;i<this.tableList.length;i++){var a=this.tableList[i],o="";null!=a.reason&&null!=a.reason.item&&null!=a.reason.item.id?o=a.reason.item.id:null!=a.reasonId&&(o=a.reasonId),a.reasonId=o,a.reason="",t.push(a)}var n="";null!=t&&t.length>0&&(n=JSON.stringify(t),Object(s.mergeProductByPurchasePlanDetail)({dtlJsonStr:n}).then(function(t){if(null!=t.mergeProductList&&(e.tableList.length>0&&e.tableList.splice(0,e.tableList.length),null!=t.mergeProductList&&t.mergeProductList.length>0))for(var i=0;i<t.mergeProductList.length;i++){var a=t.mergeProductList[i],o="add";null!=a&&null!=a.operType&&a.operType.trim().length>0&&(o=a.operType.trim());var n={id:a.id,operType:o,count:a.count,orderCode:a.orderCode,edate:a.edate,jsonStr:a.jsonStr,productId:a.productId,productCode:a.productCode,productName:a.productName,productSpec:a.productSpec,productProperty:a.productProperty,prodInfo:a.prodInfo,reasonId:a.reasonId,reason:a.reason,unitId:a.unitId,unitName:a.unitName};e.tableData.push(n)}}).catch(function(e){}))},deleteBySecond:function(e,t){this.getData(),null!=this.tableList&&this.tableList.length>0&&this.tableList.splice(t,1),null!=e.planDtlId&&e.planDtlId.trim().length>0&&(this.deleteIds=this.deleteIds+e.planDtlId.trim()+",")},editPlan:function(){var e=this,t="";if(this.$refs.planAddDialog.getData(),null!=this.tableList&&0!=this.tableList.length){for(var i=[],a=0;a<this.tableList.length;a++){var o=this.tableList[a],n="";n=o.reason.item?o.reason.item.id:o.reasonId;var l={planDtlId:o.planDtlId,operType:o.operType,count:o.count,reason:n,edate:o.edate,remark:o.remark,productId:o.productId,unitId:o.unitId,jsonStr:o.jsonStr};i.push(l)}t=JSON.stringify(i),this.formData.dtlJsonStr=t,this.$refs.submitForm.validate(function(t){t&&e.$confirm("修改计划后，是否将该计划提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.formData.isAutoCommit="true",e.formData.deleteIds=e.deleteIds,Object(r.editPurchasePlan)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.formData.isAutoCommit="false",e.formData.deleteIds=e.deleteIds,Object(r.editPurchasePlan)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})})}},makeSelect:function(e){e[0]&&(this.formData.makeId=e[0].id,this.formData.makeName=e[0].name)},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"selectProductByPurchasePlan"==e.pageName){var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByProduct(t)}else if(null!=e&&"selectOrderByPurchasePlan"==e.pageName){var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelectedBySaleOrder(i)}},tableSelectedByProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={id:"",productId:"",productCode:"",productName:"",spec:"",productProperty:"",unitId:"",unitName:"",reasonId:"",reason:"",count:"0.00",operType:""};a.operType="add",a.productId=i.id.trim(),null!=i.code&&i.code.trim().length>0&&(a.productCode=i.code.trim()),null!=i.name&&i.name.trim().length>0&&(a.productName=i.name.trim()),null!=i.spec&&i.spec.trim().length>0&&(a.spec=i.spec.trim()),null!=i.property&&i.property.trim().length>0&&(a.productProperty=i.property.trim()),null!=i.prodInfo&&i.prodInfo.trim().length>0&&(a.prodInfo=i.prodInfo.trim()),null!=i.count&&i.count.trim().length>0&&(a.count=i.count.trim()),a.unitId=i.unit,a.unitName=i.unitName,a.reasonId=this.reasonId,a.reason=this.reason,a.edate=this.sysDateStr,a.id=i.id.trim()||t,this.tableData.push(a)}},tableSelectedBySaleOrder:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a="0.00";null!=i&&null!=i.purchasePlanCount&&i.purchasePlanCount.trim().length>0&&(a=i.purchasePlanCount.trim());var o={id:i.id,count:a,operType:"add",orderDtlId:i.orderDtlId,orderCode:i.sysCode,productId:i.productId,productCode:i.productCode,productName:i.productName,spec:i.productSpec,productProperty:i.productProperty,prodInfo:i.prodInfo,unitId:i.prodUnitId,unitName:i.prodUnitName,edate:this.sysDateStr,reasonId:this.reasonId,reason:this.reason};this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.formData.makeName,callback:function(t){e.$set(e.formData,"makeName",t)},expression:"formData.makeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"planAddDialog",attrs:{"data-custom-table-id":"views_purchase_planManager_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"planAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.editPlan}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},QYBy:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("WI6C");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{content:[{required:!0,trigger:"change",message:"请填写保养内容"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{equipmentId:"",content:"",remark:""}}},created:function(){this.formData.equipmentId=this.initData.equipmentId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.addMaintainContent)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"保养内容:",prop:"content"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},QhtG:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("EDKZ"),l=i("hZMg");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{pageNo:1,type:"add",fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{deptType:"6d8a030ba1ce11e884ad00163e105f0a",type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this,t=this.$storage.get("userInfo");this.temp.makeId=t.userId,this.temp.makeName=t.userName,Object(l.findUserDepartmentByUser)({userId:this.temp.makeId,deptType:"6d8a030ba1ce11e884ad00163e105f0a"}).then(function(t){null!=t.deptId&&t.deptId.trim().length>0&&(e.temp.deptId=t.deptId.trim()),null!=t.deptName&&t.deptName.trim().length>0&&(e.temp.deptName=t.deptName.trim())}),this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="生产退库",this.temp.type="8e35209f19804e94940f076c8d71b955"},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={productId:l.productId,remark:l.remark,p2nFormula:l.p2nFormula,priceUnit:l.priceUnit,priceCount:l.priceCount,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.addWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,this.temp.deptId="",this.temp.deptName="",Object(l.findUserDepartmentByUser)({userId:this.temp.makeId,deptType:"6d8a030ba1ce11e884ad00163e105f0a"}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:"",count:"",remark:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{pageNo:function(){this.initTable("add","")}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px",width:"100%"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_produce_materialReback_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogAdd.vue";t.default=d.exports},QjqE:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("Oyvg");var a=i("WIyV"),o=i("91ra"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{parentId:"",customerId:"",openDialogName:"",dialogLoading:!0,isVisible:!1,inDialog:!0,showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",orderDetail_style:"",title:"",temp:null,tempLable:null},tableData:[],rowTableList:[],apiObj:{apiName:"listPageRetreatDetailByEdit",params:{pageNo:1,parentId:"",isRetreatByInfo:"true",fieldCode:"sysOrderCode,deliverCode,productCode,productName,productSpec,orderUnitName,receiveAmount,deliverOrderCount,orderCount,productPrice,orderSum,remark"}},customColumn:[{columnIndex:"orderSum",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"}],message:["请输入大于零的正整数或(1,2)位小数！"],editable:!0}}],mergeTitle:[],mergeColumn:[],mergeRow:[]}},beforeCreate:function(){},created:function(){this.parentId=this.initData.data.parentId,this.customerId=this.initData.data.customerId,this.apiObj.params.parentId=this.parentId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.receiveAmount,n=a.orderSum;o-0==0&&n-o>0?t=t+"第 "+(i+1)+" 行: 退货金额("+n+") 输入错误，退货金额必须等于零！":o-0!=0&&n-o>0&&(t=t+"第 "+(i+1)+" 行: 退货金额("+n+") 输入错误，退货金额不可大于实收金额！")}return t},save:function(){this.$refs.moneyRetreatDialog.getData(),this.saveSaleRetreat(this.rowTableList)},saveSaleRetreat:function(e){var t=this;if(null!=e&&0!=e.length){var i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{var a=[];e.forEach(function(e){var t={id:e.id,orderSum:e.orderSum,sysOrderCode:e.sysOrderCode,orderId:e.orderId,receiveAmount:e.receiveAmount,notRetreatSum:e.notRetreatSum};a.push(t)});var n="";null!=a&&a.length>0&&(n=JSON.stringify(a)),null!=n&&0!=n?Object(o.updateRetreatByMoney)({parentId:this.parentId,customerId:this.customerId,dtlJsonStr:n}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}):this.$message({type:"warning",duration:5e3,showClose:!0,message:"暂无发货单明细！"})}}},dialogOpen:function(){},dialogClose:function(e){this.rowTableList=[],this.customerId="",this.deliverDtlIds="",this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{style:e.initData.orderDetail_style},[i("custom-base-table",{ref:"moneyRetreatDialog",attrs:{"data-custom-table-id":"views_sale_retreat_moneyRetreat_dialogMoneyRetreat0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"moneyRetreatDialog",useDefaultBtn:!1,showAll:!1},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogMoneyRetreat.vue";t.default=s.exports},Qqum:function(e,t,i){"use strict";i.r(t);i("91GP");var a=i("varj"),o=i("uTIz"),n=i("MPAK"),l=i("We3Z"),s={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"保存",isShow:!0,state:!0,method:this.save},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageCustomers",params:{fieldCode:"name",genre:"df7cb67fca4148bc9632c908e4a7fdea"}},customColumn:[],tempData:{},showIndex:!1,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"name",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[{columnIndex:3,prop:"amount",label:"金额",componentName:"input",_cellConfig:{rules:[{required:!0},{greaterThan:["0",!1]}],message:["必填","必须大于零！"]}},{columnIndex:4,prop:"remark",label:"备注",componentName:"input",_cellConfig:{}}],hideColumns:["typeName","provinceName","remark"],tableSelectList:[]}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{tableSelectList:this.tableSelectList})},closeDialog:function(e){this.showDialog=!1},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},tableSelected:function(e){this.tableSelectList=e},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},checkColumnByAmount:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o="";null!=a.amount&&(o=a.amount+""),null==o||0==o.trim().length?t=t+"第 "+(i+1)+" 行: 金额为空或空字符串！":null!=o&&o.trim().length>0&&!Object(n.isNumberByValueSystem)(o)?t=t+"第 "+(i+1)+" 行: 金额("+o+") 输入错误，请输入大于零的正整数或(1,2)位小数！":null!=o&&o.trim().length>0&&Object(n.isNumberByValueSystem)(o)&&o/1<=0&&(t=t+"第 "+(i+1)+" 行: 金额("+o+") 输入错误，请输入大于零的正整数或(1,2)位小数！")}return t},save:function(){var e=this;if(this.$refs.trabsferTables.getTableSelected(),null!=this.tableSelectList&&0!=this.tableSelectList.length){var t=this.checkColumnByAmount(this.tableSelectList);null!=t&&t.trim().length>0?this.$message({type:"warning",duration:5e3,showClose:!0,message:t}):(this.temp.dtlJsonStr=JSON.stringify(this.tableSelectList),this.temp.type=this.initData.type,this.$confirm("是否提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.temp.isAutoCommit="true",Object(l.batchAddFinanceBill)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.temp.isAutoCommit="false",Object(l.batchAddFinanceBill)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))}))}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"600px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{height:"50px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"90%",margin:"10px auto","padding-top":"10px"},attrs:{inline:!0,model:e.tempQuery}},[i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"名称："}},[i("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:10}},[i("div",{attrs:{align:"right"}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1),e._v(" "),i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)])],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{callmethod:e.callMethod,"table-selected":e.tableSelected}})],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAdd.vue";t.default=c.exports},Qww7:function(e,t,i){},"R+4s":function(e,t,i){"use strict";var a=i("VlDU");i.n(a).a},R19T:function(e,t,i){"use strict";i.r(t);i("Oyvg");var a=i("2+ib"),o=i("+Dad"),n={components:{multilevelTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){return{planId:"",planDtlId:"",rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,tableList:[],tableConfigList:[{customColumn:[{columnIndex:"sysCode"},{columnIndex:"produceTypeName"},{columnIndex:"makeName"},{columnIndex:"planStateName"}],mergeTitle:[{index:2,alias:"",columns:["beginDate","endDate"]}],apiObj:{apiName:"listPageProducePlan",params:{fieldCode:"sysCode,beginDate,endDate,produceTypeName,makeName,planStateName",planId:"",orderStr:"plan.cdate desc"}},tempData:{},showHeader:!1,showIndex:!1,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"fineCount",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"}],message:["合格数必须大于零！","请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"badCount",componentName:"input",_cellConfig:{}}],apiObj:{apiName:"listPageProducePlanDetailByQuality",params:{fieldCode:"code,prodInfo,unitName,count,fineCount,badCount,stateName",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",ids:"",inStates:"0,1",isNeedPage:"false"}},dynamicValue:{parentId:"self@id"},tempData:{},showIndex:!1,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable"}]}},created:function(){this.planId=this.initData.planId,this.planDtlId=this.initData.planDtlId,this.tableConfigList[0].apiObj.params.planId=this.planId,this.tableConfigList[1].apiObj.params.ids=this.planDtlId},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.tableList=[],this.tableList=e)},getData:function(){this.$refs.producePlanQuality.getData()},deleteData:function(e){this.$refs.producePlanQuality.deleteData(e)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},checkByTable:function(e){var t="";if(null!=e&&e.length>0)for(var i=0;i<e.length;i++){var a=e[i].badCount+"";null!=a&&a.trim().length>0&&!this.isNumberByValue(a.trim())&&(t=t+"第 "+(i+1)+" 行: 不合格数("+a+") 输入错误，请输入大于零的正整数或(1,2)位小数！")}return t},save:function(){var e=this;this.getData();var t=[];null!=this.tableList&&this.tableList.length>0&&null!=this.tableList[0]&&null!=this.tableList[0].children&&(t=this.tableList[0].children);var i=this.checkByTable(t);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{var a=[];if(0!=t.length){for(var n=0;n<t.length;n++){var l=t[n],s={planId:l.parentId,planDtlId:l.id,productId:l.productId,unitId:l.unitId,fineCount:l.fineCount,badCount:l.badCount};a.push(s)}var r=JSON.stringify(a);this.dialogLoading=!0,Object(o.addProducePlanDetailByQuality)({planId:this.planId,deptId:this.$storage.get("userInfo").deptId,roleId:this.$storage.get("userInfo").roleIds,jsonStr:r}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"报工成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}}},closeDialog:function(e){}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"producePlanQuality",attrs:{"data-custom-table-id":"views_produce_producePlanQuality_dialogAdd0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},R9Ya:function(e,t,i){},RC9q:function(e,t,i){"use strict";var a=i("+S2+");i.n(a).a},RJED:function(e,t,i){},RJys:function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=(i("z0WU"),{components:{multilevelTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tableData:[],selectList:[],configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:this.initData.temp.id}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseOutExecutes",params:{isNeedPage:"false",fieldCode:"name,actualCount,executorName,endDate"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},databridge:function(e){this.selectList=e},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;null!=e.selectList&&e.selectList}},watch:{}}),n=(i("pb7s"),i("y2WM"),i("KHd+")),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"90px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_sale_saleOutWC_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogView.vue";t.default=l.exports},"RM+A":function(e,t,i){"use strict";var a=i("qcDQ");i.n(a).a},RYa6:function(e,t,i){"use strict";i("91GP");var a=i("uTIz"),o=i("WIyV"),n=(i("rGqo"),i("Zni2")),l=i.n(n),s=i("XXtD"),r=(i("wDdD"),i("AH3D"),i("Ynxi"),i("zixQ"),{name:"product-sale-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}}},components:{chart:l.a,ChartMask:s.a},data:function(){return{chartTitles:["应收款分布"],chartKeys:["productVolume"],baseOption:{},chartData:null,loading:!0}},computed:{hasData:function(){return!!this.chartData},setSeriesData:function(){return this.chartData||{}},defaultOption:function(){var e=this;return this.chartKeys.map(function(t,i){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+e.chartTitles[i]+": {c} ({d}%)"},series:[{name:"产品",type:"pie",data:e.setSeriesData[t],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})}},methods:{httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.chartData=e.tempCreateData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.chartData=t.result||[],e.loading=!1}).catch(function(t){e.loading=!1})},tempCreateData:function(){var e=this,t={};return this.chartKeys.forEach(function(i){t[i]=e.genData(6)}),t},genData:function(e){for(var t=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],i=[],a=[],o={},n=0;n<e;n++)name=Math.random()>.65?l(4,1)+"·"+l(3,0):l(2,1),i.push(name),a.push({name:name,value:Math.round(1e5*Math.random())}),o[name]=n<6;return a;function l(e,i){for(var a=Math.ceil(Math.random()*e+i),o=[],n=0;n<a;n++)o.push(t[Math.round(Math.random()*t.length-1)]);return o.join("")}}},created:function(){this.httpRequest()},render:function(e){var t=this;return e("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.chartTitles.map(function(i,a){return e("el-col",{attrs:{span:24},class:"chartViews"},[e("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:t.loading}]},[e("div",{style:"text-align:center;"},[i]),e("div",{style:{height:"".concat(parseInt(t.height)-120,"px"),position:"relative"}},[t.hasData?e("chart",{style:{height:"100%",width:"100%"},attrs:{options:t.defaultOption[a]}}):e("chart-Mask",{attrs:{loading:t.loading}})])])])})])}}),c=(i("XfO3"),i("HEwt"),i("a1Th"),i("rE2o"),i("ioFf"),i("KKXr"),i("xfY5"),i("75ce"),i("lLGD"),i("0o9m"),i("4Cjf"));function d(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u={name:"chart-sales-report-trend",components:{chart:l.a,ChartMask:s.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(e){var t=e.split("-");return t[1]=t[1]-0+"月",t.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,d(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var e=Math.max.apply(Math,d(this.salesNumber))-0,t=(Math.floor(e+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,d(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var e=Math.max.apply(Math,d(this.salesVolume))-0,t=(Math.floor(e+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"客户分析（单选）",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["销售额","已收款","应收款"],left:5},xAxis:[{type:"category",data:this.setMonths,axisPointer:{type:"shadow"},axisTick:{show:!1}}],yAxis:[{type:"value",name:"应收款",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisTick:{show:!1},splitLine:{show:!1},axisLabel:{formatter:"{value}"},nameTextStyle:{color:"transparent"}},{show:!1,type:"value",name:"销售额",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisLabel:{formatter:"{value}"}},{show:!1,type:"value",name:"已收款",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisLabel:{formatter:"{value}"}}],series:[{name:"销售额",type:"bar",data:this.salesVolume},{name:"已收款",type:"bar",data:this.salesVolume.map(function(e){return 1.1*e})},{name:"应收款",type:"line",yAxisIndex:1,itemStyle:{normal:{barBorderRadius:0,label:{show:!0,position:"top",formatter:function(e){return e.value||0}}}},data:this.salesNumber}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(e,t){return!!(e&&e.length&&t&&t.length)&&(e[0]>=t[0]&&t[1]>=e[1])},resetResult:function(e){var t=JSON.parse(this.resultData);this.chartData=t.filter(function(t){if(t.month>=e[0]&&e[1]>=t.month)return!0}),this.formatChartData()},formatChartData:function(){var e=this.chartData;e.length&&(this.salesVolume=e.map(function(e){return e.salesVolume-0}),this.salesNumber=e.map(function(e){return e.salesNumber-0}),this.months=e.map(function(e){return e.month}))},httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.resultData=JSON.stringify(c.a.trend.result||[]),e.chartData=c.a.trend.result||[],e.formatChartData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.resultData=JSON.stringify(t.result||[]),e.chartData=t.result||[],e.formatChartData(),e.loading=!1}).catch(function(t){e.loading=!1})}},created:function(){this.httpRequest()},render:function(e){return e("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?e("div",[e("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):e("chart-Mask",{attrs:{loading:this.loading}})])}};function p(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var m={name:"chart-sales-report-trend",components:{chart:l.a,ChartMask:s.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(e){var t=e.split("-");return t[1]=t[1]-0+"月",t.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,p(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var e=Math.max.apply(Math,p(this.salesNumber))-0,t=(Math.floor(e+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,p(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var e=Math.max.apply(Math,p(this.salesVolume))-0,t=(Math.floor(e+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"月度趋势",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["销售额","应收款"],left:5},xAxis:[{type:"category",data:this.setMonths,axisPointer:{type:"shadow"},axisTick:{show:!1}}],yAxis:[{type:"value",name:"应收款",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisTick:{show:!1},splitLine:{show:!1},axisLabel:{formatter:"{value}"},nameTextStyle:{color:"transparent"}},{show:!1,type:"value",name:"销售额",min:this.setYAxisMin>0?0:this.setYAxisMin,max:this.setYAxisMax,interval:this.setYAxisMax/this.node,axisLabel:{formatter:"{value}"}}],series:[{name:"销售额",type:"bar",data:this.salesVolume},{name:"应收款",type:"line",yAxisIndex:1,itemStyle:{normal:{barBorderRadius:0,label:{show:!0,position:"top",formatter:function(e){return e.value||0}}}},data:this.salesNumber}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(e,t){return!!(e&&e.length&&t&&t.length)&&(e[0]>=t[0]&&t[1]>=e[1])},resetResult:function(e){var t=JSON.parse(this.resultData);this.chartData=t.filter(function(t){if(t.month>=e[0]&&e[1]>=t.month)return!0}),this.formatChartData()},formatChartData:function(){var e=this.chartData;e.length&&(this.salesVolume=e.map(function(e){return e.salesVolume-0}),this.salesNumber=e.map(function(e){return e.salesNumber-0}),this.months=e.map(function(e){return e.month}))},httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.resultData=JSON.stringify(c.a.trend.result||[]),e.chartData=c.a.trend.result||[],e.formatChartData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.resultData=JSON.stringify(t.result||[]),e.chartData=t.result||[],e.formatChartData(),e.loading=!1}).catch(function(t){e.loading=!1})}},created:function(){this.httpRequest()},render:function(e){return e("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?e("div",[e("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):e("chart-Mask",{attrs:{loading:this.loading}})])}};function h(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var g={name:"chart-sales-report-volume-line",components:{chart:l.a,ChartMask:s.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(e){var t=e.split("-");return t[1]=t[1]-0+"月",t.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,h(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var e=Math.max.apply(Math,h(this.salesNumber))-0,t=(Math.floor(e+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,h(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var e=Math.max.apply(Math,h(this.salesVolume))-0,t=(Math.floor(e+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"应收款曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"],left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"邮件营销",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",areaStyle:{},data:[-220,182,191,234,290,330,3100]},{name:"视频广告",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",areaStyle:{},data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(e,t){return!!(e&&e.length&&t&&t.length)&&(e[0]>=t[0]&&t[1]>=e[1])},resetResult:function(e){var t=JSON.parse(this.resultData);this.chartData=t.filter(function(t){if(t.month>=e[0]&&e[1]>=t.month)return!0}),this.formatChartData()},formatChartData:function(){var e=this.chartData;e.length&&(this.salesVolume=e.map(function(e){return e.salesVolume-0}),this.salesNumber=e.map(function(e){return e.salesNumber-0}),this.months=e.map(function(e){return e.month}))},httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.resultData=JSON.stringify(c.a.trend.result||[]),e.chartData=c.a.trend.result||[],e.formatChartData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.resultData=JSON.stringify(t.result||[]),e.chartData=t.result||[],e.formatChartData(),e.loading=!1}).catch(function(t){e.loading=!1})}},created:function(){this.httpRequest()},render:function(e){return e("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?e("div",[e("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):e("chart-Mask",{attrs:{loading:this.loading}})])}};function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var b={name:"charts-sale-receivables",components:{baseTable:o.a,searchBar:a.a,receivablesPie:r,singleAnalysis:u,multipleAnalysis:g,receivablesTrend:m},data:function(){var e;return f(e={guid:"",searchList:[{label:"客户名称",type:"input",mapKey:"customerName",configs:{},placeholder:"请输入客户名称"}],searchObj:{},tableConfigList:[{apiObj:{apiName:"getBomTreeProduct",params:{}},showCheckBox:!0,useSummary:!0}],userSelectedList:[],dialogVisible:[!1,!1,!1],dialogWidth:["800px","".concat("mini"===this.size?"800px":"1200px"),"".concat("mini"===this.size?"800px":"1200px")],dialogIndex:0,chartTitle:["应收款分布","月度趋势","客户分析"]},"dialogVisible",!1),f(e,"trendApiObj",{apiName:"",params:{}}),f(e,"analysisObj",{apiName:"",params:{}}),e},computed:{systemInfo:function(){return this.$store.getters.systemInfo},size:function(){return this.$store.getters.size},tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0)-36+"px":"100%"}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.searchObj),this.trendApiObj.params=Object.assign({},this.trendApiObj.params,this.searchObj),this.analysisObj.params=Object.assign({},this.analysisObj.params,this.searchObj)},databridge:function(e){this.userSelectedList=e},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},showSaleReceivables:function(e){if(this.resetSaleReceivablesData(),1===e&&this.userSelectedList.length>1)return this.$message({showClose:!0,message:"请不要选择多条数据进行展示",type:"warning"}),!1;this.dialogIndex=e,this.dialogVisible[this.dialogIndex]=!0},resetSaleReceivablesData:function(){this.dialogVisible=[!1,!1,!1]}},created:function(){}},v=(i("fzaQ"),i("KHd+")),D=Object(v.a)(b,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sale-receivables"},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,inChart:!0},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",[i("el-button",{attrs:{type:"primary",size:e.size},on:{click:function(t){e.showSaleReceivables(0)}}},[e._v("应收款分布")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:e.size,disabled:!e.userSelectedList.length},on:{click:function(t){e.showSaleReceivables(1)}}},[e._v("月度趋势")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:e.size,disabled:!e.userSelectedList.length},on:{click:function(t){e.showSaleReceivables(2)}}},[e._v("客户分析")])],1),e._v(" "),i("el-row",{staticStyle:{"border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.tableHeight,"margin-top":e.searchList.length?"10px":"0"}},[i("base-table",{ref:"customBaseTable",attrs:{tableConfigList:e.tableConfigList},on:{databridge:e.databridge,callmethod:e.callMethod}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.chartTitle[e.dialogIndex],"close-on-click-modal":!1,visible:e.dialogVisible[e.dialogIndex],width:e.dialogWidth[e.dialogIndex]},on:{"update:visible":function(t){e.$set(e.dialogVisible,e.dialogIndex,t)}}},[e.dialogVisible[0]?[i("receivables-pie",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.trendApiObj}})]:e.dialogVisible[1]?[i("receivables-trend",{attrs:{height:e.systemInfo.clientHeight?.7*e.systemInfo.clientHeight+"px":"400px",apiObj:e.analysisObj}})]:e.dialogVisible[2]?[1===e.userSelectedList.length?[i("single-analysis",{attrs:{height:e.systemInfo.clientHeight?.7*e.systemInfo.clientHeight+"px":"400px",apiObj:e.analysisObj}})]:[i("multiple-analysis",{attrs:{height:e.systemInfo.clientHeight?.7*e.systemInfo.clientHeight+"px":"400px",apiObj:e.analysisObj}})]]:e._e(),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.resetSaleReceivablesData}},[e._v("关 闭")])],1)],2)],1)},[],!1,null,"5ed2264f",null);D.options.__file="index.vue";t.a=D.exports},Rd41:function(e,t,i){"use strict";var a=i("gamf");i.n(a).a},Ri2b:function(e,t,i){"use strict";var a=i("uas5");i.n(a).a},Ro9C:function(e,t,i){},S5Lt:function(e,t,i){},SAfV:function(e,t,i){"use strict";var a=i("G3ET");i.n(a).a},SFdl:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("7cmB"),o=i("vleD"),n=i("oC0i"),l=(i("zF5t"),i("PuDp"));i("z0WU");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" :disabled=true></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},c={components:{treeFormTable:a.a,dialogOption:o.default,dialogRoleUser:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rootData:{},tableSets:{1:{showCheckBox:!1,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},currentpage:1,customColumn:{1:[{columnIndex:"isdisable",component:r,changeState:this.changeState}]},editable:{suggestCount:{}},apiObj:{apiName:"listPageWarehouseMoveDetailsRecords",params:{}},addedData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"选择员工",data:null,temp:{},tempLable:null,isSingle:!0,tableUrl:"/warehouse/warehouseProduct/listPageWarehouseProductsDispatchOption",tableParm:{}},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{}}},created:function(){this.temp=this.initData.temp,this.initData.temp.id&&(this.apiObj.params={queryStr:"detail.parent_id in ('"+this.initData.temp.id+"')   ",pageNo:1,fieldCode:"productCode,productName,productSpec,productUnitName,stockCount,count,executeCount,stateName"})},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},addChild:function(e,t){this.dialogCallBackData=e,this.showDialog=!0,this.dialogVisible=!0},addChildRow:function(){this.dialogVisible=!1,this.showDialog=!1,this.addedData={rowData:this.testData,parentData:this.dialogCallBackData}},sendChildrenRow:function(e){},change:function(e,t){this.dialogData.temp=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑出库单",this.dialogData.isSingle=!1,this.dialogData.tableUrl="/warehouseProduct/listPageWarehouseProductsDispatchOption",this.dialogData.tableParm={productId:e.productId},this.openDialogName="dialogOption",this.showDialog=!0,this.inLinVisible=!0},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){this.$refs.treeFormTable.getData()},formData:function(e){this.realSave(e)},realSave:function(e){var t=this;if(null!=e.tableData&&0!=e.tableData.length){var i="";e.tableData&&e.tableData.length>0&&(i=JSON.stringify(e.tableData)),Object(l.executeWarehouseOutDetail)({jsonDataStr:i}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择出库明细信息！"})},closeDialog:function(e,t){this.addedData={rowData:e[0],parentData:t},this.showDialog=!1}},watch:{pageNo:function(){this.initTable()}}},d=(i("9Uvm"),i("KHd+")),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px",top:"50px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{padding:"0 20px","font-size":"16px","font-weight":"600"}},[i("el-col",{attrs:{span:8}},[i("span",[e._v("移库单号 : "+e._s(e.temp.code))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("出库类型 : "+e._s(e.temp.typeName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("目标库位 : "+e._s(e.temp.warehouseName))])])],1),e._v(" "),i("el-row",{staticStyle:{padding:"0 20px",margin:"10px 0","font-size":"16px","font-weight":"600"}},[i("el-col",{attrs:{span:8}},[i("span",[e._v("制单人 : "+e._s(e.temp.makeName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("制单时间 : "+e._s(e.temp.cdate))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("状态 : "+e._s(e.temp.stateName))])])],1),e._v(" "),i("el-row",{staticStyle:{border:"1px solid #E4E4E4","border-bottom":"none",width:"96%","margin-left":"2%",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("tree-form-table",{ref:"treeFormTable",attrs:{"expand-all":!0,initData:e.rootData,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:e.editable,apiObj:e.apiObj,addedData:e.addedData},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,"send-children-row":e.sendChildrenRow,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogAllRecords.vue";t.default=u.exports},SINu:function(e,t,i){"use strict";i.r(t);i("rGqo");var a=i("WIyV"),o=(i("MPAK"),i("AUoE")),n=(i("a0Xs"),{components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{priceType:"2",productUnit:{},rowData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},isVisible:!1,inDialog:!0,tableData:[],orderDtlList:[],apiObj:{apiName:"listPageOrderDetailQueryByDeliver",params:{ids:"",fieldCode:"prodInfo,orderUnitName,orderCount,needDeliverCount,notDeliverCount,orderDtlDeliverCount",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"orderDtlDeliverCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"},{greaterThan:["0",!1]},{lessThan:["self@notDeliverCount",!0]}],message:["请输入数字！","必须大于零！","必须小于未发货数量！"]}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{maxExpectDate:""}}},beforeCreate:function(){},created:function(){var e=this.initData.orderDtlIds;this.apiObj.params.ids=e},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row))},save:function(){this.$refs.addDeliverByPriceDialog.getData(),this.saveSaleDeliver(this.orderDtlList)},saveSaleDeliver:function(e){var t=this;if(null!=e&&e.length>0){var i=[];e.forEach(function(e){i.push(e)});var a=JSON.stringify(i);this.dialogLoading=!0,Object(o.addSaleDeliver)({roleId:this.$storage.get("userInfo").roleIds,priceType:this.priceType,dtlJsonStr:a}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}}}),l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{padding:"10px"}},[i("custom-base-table",{ref:"addDeliverByPriceDialog",attrs:{"data-custom-table-id":"views_sale_deliver_createDeliver_dialogAddDeliverDetailByPrice0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"addDeliverByPriceDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("el-row",{staticStyle:{height:"100px","text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAddDeliverDetailByPrice.vue";t.default=s.exports},SlmE:function(e,t,i){"use strict";var a=i("G/y+");i.n(a).a},Sr1L:function(e,t,i){"use strict";var a={name:"custom-steps",render:function(e){var t=this;return e("ul",{class:"customStepView clearfix"},[this.titleList.map(function(i,a){return e("li",{class:"customStepBox",key:a,style:t.createStepStyle(a)},[i,e("i",{class:"stepArrow",style:t.createStepArrowStyle(a)})])})])},props:{scope:{type:Object,default:function(){return{}}},childColconfig:{type:Object,default:function(){return{}}}},computed:{titleList:function(){return this.childColconfig._cellConfig.componentConfig.titleList||[]},titleBackgroundColor:function(){return this.childColconfig._cellConfig.componentConfig.titleBackgroundColor||[]}},methods:{createStepStyle:function(e){var t=parseInt(this.scope.row[this.childColconfig.prop||this.childColconfig.columnIndex])||0;return e<t?{"background-color":this.titleBackgroundColor[0]||"rgb(0,176,240)",color:"#ffffff","flex-basis":"auto",width:"".concat(100/this.titleList.length,"%")}:e===t?{"background-color":this.titleBackgroundColor[1]||"rgb(255,192,0)","flex-basis":"auto",width:"".concat(100/this.titleList.length,"%")}:{"background-color":this.titleBackgroundColor[2]||"rgb(191,191,191)",color:"#ffffff","flex-basis":"auto",width:"".concat(100/this.titleList.length,"%")}},createStepArrowStyle:function(e){var t=parseInt(this.scope.row[this.childColconfig.prop||this.childColconfig.columnIndex])||0;return e<t?{"border-left":"10px solid ".concat(this.titleBackgroundColor[0]||"rgb(0,176,240)")}:e===t?{"border-left":"10px solid ".concat(this.titleBackgroundColor[1]||"rgb(255,192,0)")}:{"border-left":"10px solid ".concat(this.titleBackgroundColor[2]||"rgb(191,191,191)")}}}},o=(i("1lsz"),i("KHd+")),n=Object(o.a)(a,void 0,void 0,!1,null,"25644993",null);n.options.__file="customSteps.vue";t.a=n.exports},SuPW:function(e,t,i){"use strict";var a=i("tmqG");i.n(a).a},SwnK:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("rmg0");i("QmdA");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{dialogAdd:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{customerId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{companyName:"",invoiceNumber:"",address:"",bankName:"",bankCode:"",mobile:"",remark:"",customerId:""},tempLable:{},tempNotEditable:{},rules:{companyName:[{required:!0,message:"请填写公司名称",trigger:"change"}]},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{temp:{},title:""}}},created:function(){this.customerId=this.initData.customerId,this.temp.customerId=this.initData.customerId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogData.temp=JSON.parse(JSON.stringify(e.temp)),e.dialogData.title="选择订单",e.openDialogName="dialogAdd",e.showDialog=!0,e.inLinVisible=!0)})},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"450px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"75%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"75px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"companyName"}},[i("el-input",{model:{value:e.temp.companyName,callback:function(t){e.$set(e.temp,"companyName",t)},expression:"temp.companyName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"税号:",prop:"invoiceNumber"}},[i("el-input",{model:{value:e.temp.invoiceNumber,callback:function(t){e.$set(e.temp,"invoiceNumber",t)},expression:"temp.invoiceNumber"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地址:",prop:"address"}},[i("el-input",{model:{value:e.temp.address,callback:function(t){e.$set(e.temp,"address",t)},expression:"temp.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电话:",prop:"mobile"}},[i("el-input",{model:{value:e.temp.mobile,callback:function(t){e.$set(e.temp,"mobile",t)},expression:"temp.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开户银行:",prop:"bankName"}},[i("el-input",{model:{value:e.temp.bankName,callback:function(t){e.$set(e.temp,"bankName",t)},expression:"temp.bankName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"账号:",prop:"bankCode"}},[i("el-input",{model:{value:e.temp.bankCode,callback:function(t){e.$set(e.temp,"bankCode",t)},expression:"temp.bankCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAddCustomerInvoice.vue";t.default=s.exports},T0ib:function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseInDetail",params:{fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,remark",parentId:""}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseInExecute",params:{fieldCode:"pathName,count,executeUserName,executeTimeStr",isNeedPage:"false"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){this.tableConfigList[0].apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},databridge:function(e){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_purchaseIn_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogView.vue";t.default=n.exports},T31V:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("uTIz"),o=i("2+ib"),n=i("QFS0"),l=i("b5Ov");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{searchBar:a.a,multilevelTable:o.a,dialogWarehouseBySimple:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{sourceWarehouseId:"",warehouse:{name:null,id:null},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{warehouseIds:"",title:"",dialog_width:"",table_style:"",temp:{}},rowTableList:[],tableConfigList:[{customColumn:[{columnIndex:"moveCount",componentName:"input",_cellConfig:{rules:[{required:!0},{greaterThan:["0",!1]},{lessThan:["self@stockCount",!0]}],message:["此项不能为空！","移库数量必须大于零！","移库数量必须小于等于库存数量！"]}}],apiObj:{apiName:"listPageWCWarehouseProductView",params:{ids:this.initData.ids,isNeedEntity:"true",isNotNeedSpare:"true",fieldCode:"warehouseName,code,name,spec,unitName,genreName,stockCount,moveCount"}},tempData:{},showHeader:!0,showIndex:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable"}],warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{notInWarehouseIds:this.initData.warehouseIds,isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]}}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){"{}"!=JSON.stringify(e)&&(this.warehouse.id=e.id,this.warehouse.name=e.pathName),this.inLinVisible=!1,this.showDialog=!1},warehouseSelect:function(e){null!=e&&e.length>0?(this.warehouse.id=e[e.length-1],this.warehouse.name=e[e.length-1]):(this.warehouse.id="",this.warehouse.name="")},save:function(){var e=this;if(this.warehouse.name){if(this.$refs.customBaseTable.getData(),null!=this.rowTableList&&this.rowTableList.length>0){var t=JSON.stringify(this.rowTableList);Object(l.addWarehouseMoveBySimple)({targetWarehouseId:this.warehouse.id,dtlJsonStr:t}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择目标仓库，目标仓库为必填项不可为空！"})}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"300px","margin-top":"15px","margin-left":"2%"}},[i("b",[e._v("目标仓库:")]),e._v(" "),i("base-input-select",{staticStyle:{width:"200px"},attrs:{data:e.warehouseData.data},on:{callback:e.warehouseSelect},model:{value:e.warehouseData.defaultSelected,callback:function(t){e.$set(e.warehouseData,"defaultSelected",t)},expression:"warehouseData.defaultSelected"}})],1),e._v(" "),i("el-row",{style:e.initData.table_style},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseByWC_moveByWC_dialogAdd0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);d.options.__file="dialogAdd.vue";t.default=d.exports},TB3a:function(e,t,i){"use strict";i("a1Th"),i("SRfc"),i("KKXr");t.a={timeStamp:function(e){if("string"==typeof e){var t=e.split(" ");if(1===t.length){var i=t[0].match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);return null===i?(new Date).getTime():new Date(i[1],i[3]-1,i[4]).getTime()}var a=t[0].match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/),o=t[1].match(/^(\d{1,2})(-|\:)(\d{1,2})\2(\d{1,2})$/);return a&&o?new Date(a[1],a[3]-1,a[4],o[1],o[3],o[4]).getTime():(new Date).getTime()}return"number"==typeof e?864e5*e:(new Date).getTime()},formatDate:function(e,t){var i=e?new Date(e):new Date,a=i.getFullYear(),o=i.getMonth()+1,n=i.getDate(),l=i.getHours(),s=i.getMinutes(),r=i.getSeconds(),c=function(e){return(e=e.toString())[1]?e:"0"+e};return[a,o,n].map(c).join(t||"-")+" "+[l,s,r].map(c).join(":")},getMonth:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=e?new Date(e):new Date,n=o.getFullYear(),l=o.getMonth()+1;i&&(i/12>1?(n-=Math.floor(i/12)+1,l=l-i%12<0?l-i%12+12:l-i%12):i/12==1?(n-=1,l+=1):i>=l?(n-=1,l=l-i%12<0?l-i%12+12:l-i%12):l-=i);if(a)if(a+l===12)n+=1;else if(a+l>12){n+=Math.floor((a+l)/12),l+=(a+l)%12}else l+=a;return[n,l].map(function(e){return(e=e.toString())[1]?e:"0"+e}).join(t||"-")}}},TDqz:function(e,t,i){"use strict";i.r(t);var a=i("KHd+"),o=Object(a.a)({},void 0,void 0,!1,null,null,null);o.options.__file="editFinanceBillByPurchase.vue",t.default=o.exports},TFY4:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("WIyV"),o=i("63W0"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{modeId:"",eqptTableData:[],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],dataList:[],apiObj:{apiName:"listPageEquipmentMaintainPlan",params:{type:"add",fieldCode:"code,name,spec,maintainContent,maintainDateStr"}},customColumn:[{columnIndex:"maintainDateStr",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd"}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{maxExpectDate:""},isValidate:!1}},beforeCreate:function(){},created:function(){this.modeId=this.initData.modeId},beforeMount:function(){},mounted:function(){var e=this;this.dialogLoading=!1,this.isVisible=this.visible,this.$nextTick(function(t){e.eqptTableData=e.initData.eqptTableData,e.addTableDataByEquipment(e.eqptTableData)})},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){Array.isArray(e)&&(this.dataList=[],this.dataList=e)},save:function(){this.$refs.orderAddDialog.getData(),this.saveMaintainPlan(this.dataList)},saveMaintainPlan:function(e){var t=this;if(null!=e&&0!=e.length){for(var i=[],a=0;a<e.length;a++){var n=e[a],l={equipmentId:n.equipmentId,maintainContentId:n.maintainContentId,isStop:n.isStop,maintainDateStr:n.maintainDateStr};i.push(l)}var s="";null!=i&&i.length>0&&(s=JSON.stringify(i)),this.dialogLoading=!0,Object(o.addMaintainPlanByCustom)({modeId:this.modeId,eqptJsonStr:s}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样设备！"})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){},addTableDataByEquipment:function(e){for(var t=0;t<e.length;t++){var i=e[t],a={equipmentId:i.id,code:i.code,name:i.name,spec:i.spec,maintainContentId:i.maintainContentId,maintainContent:i.maintainContent,isStop:i.isStop};this.tableData.push(a)}}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size},formItemWidth:function(){var e={};switch(this.size){case"mini":e.width="180px";break;case"small":e.width="200px";break;default:e.width="220px"}return e}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_equipment_equipmentMaintain_maintainPlan_addCustom0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"orderAddDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="addCustom.vue";t.default=s.exports},TPql:function(e,t,i){"use strict";var a=i("NCVf");i.n(a).a},TgIW:function(e,t,i){},Ti1M:function(e,t,i){"use strict";i.r(t);i("91GP"),i("rGqo");var a=i("2+ib"),o=i("BESt"),n=i("qdxk"),l=(i("z0WU"),i("Ppn9"),{name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,topBarBtnList:[],tempCount:{count:0},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listProdLackNum",params:{dtlJsonStr:this.initData.temp,addColumn:{columnKey:"prodInfo",columnName:"货品"},fieldCode:"prodInfo,unit,planCount,stockCount,assembledCount,maxCount,lackCount",isreplaceable:this.initData.isreplaceable}},temp:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a,dialogReport:o.default,dialogAddPlan:n.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(e){this.$emit("close-dialog",e||{resState:"ok"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},delete:function(e,t){var i=this,a=this;a.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.deleteData(e)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},backStep:function(){this.$emit("close-dialog",{})},nextStep:function(){var e=this,t=this;if(t.getData(),0!=t.selectList.length){var i=0;t.selectList.forEach(function(a){i+=a.lackCount,a.lackCount>0&&(t.isLoading=!0,t.$api.getLackProductNew(Object.assign({},{fieldCode:"prodInfo,unitName,count,reason,edate,remark,orderCode",prodColumnKey:"productCode,productName,spec,productProperty",dtlJsonStr:JSON.stringify(t.selectList),parentId:"null"})).then(function(i){e.dialogClose({resState:"ok",selectList:i.result.varList,pageName:"dialogAddProductByBOM"}),e.isVisible=!1,t.isLoading=!1}).catch(function(e){t.isLoading=!1}))}),0!=i||t.$message({type:"warning",duration:5e3,showClose:!0,message:"物料充足，无需采购！"})}},addPlan:function(){var e=this;if(this.getData(),0!=this.selectList.length){var t=0;this.selectList.forEach(function(i){if(t+=i.lackCount,i.lackCount>0)return e.dialogData.temp=JSON.stringify(e.selectList),e.dialogData.tempLable=e.tempLable,e.dialogData.title="新增采购计划",e.openDialogName="dialogAddPlan",e.showDialog=!0,void(e.visibleState=!0)}),0!=t||this.$message({type:"warning",duration:5e3,showClose:!0,message:"物料充足，无需采购！"})}},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.dialogClose()},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}}),s=(i("zNZ+"),i("yyEd"),i("KHd+")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1024px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_bundleAnalysis_dialogProdLackNum0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:"dialogAddProductByBOM"!=this.initData.parent,expression:"this.initData.parent != 'dialogAddProductByBOM' "}],attrs:{type:"primary"},on:{click:e.addPlan}},[e._v("新增采购计划")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.backStep}},[e._v("上一步")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"dialogAddProductByBOM"==this.initData.parent,expression:"this.initData.parent == 'dialogAddProductByBOM' "}],attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);r.options.__file="dialogProdLackNum.vue";t.default=r.exports},Tk9G:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("73Xj");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{newContractDate:[{required:!0,trigger:"change",message:"请选择日期"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{employeeId:"",code:"",name:"",contractDate:"",newContractDate:"",remark:""}}},created:function(){var e=this.initData.rowData;this.formData.employeeId=e.employeeId,this.formData.code=e.code,this.formData.name=e.name,this.formData.contractDate=e.contractDate,this.formData.newContractDate=e.contractDate,this.formData.remark=e.remark},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.updateEmployeeByContractDate)({employeeId:e.formData.employeeId,remark:e.formData.remark,contractDateStr:e.formData.contractDate,newContractDateStr:e.formData.newContractDate}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"员工编号:",prop:"code"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"员工姓名:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"合同到期日期:",prop:"newContractDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.formData.newContractDate,callback:function(t){e.$set(e.formData,"newContractDate",t)},expression:"formData.newContractDate"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="employeeContractEdit.vue";t.default=s.exports},Tnlm:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("xfY5");var a=i("UHWX");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{afterCount:[{required:!0,message:"请填写调整后出库数量！",trigger:"change"},{type:"number",message:"数量必须为数字值"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;e.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateWarehouseInExecute)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok",afterCount:new Number(e.temp.afterCount).toFixed(2)}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"150px"}},[i("el-form-item",{attrs:{label:"调整前入库数量:",prop:"beforeCount"}},[i("el-input",{staticStyle:{width:"140px"},attrs:{disabled:!0},model:{value:e.temp.beforeCount,callback:function(t){e.$set(e.temp,"beforeCount",t)},expression:"temp.beforeCount"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"调整后入库数量:",prop:"afterCount"}},[i("el-input",{staticStyle:{width:"140px"},model:{value:e.temp.afterCount,callback:function(t){e.$set(e.temp,"afterCount",e._n(t))},expression:"temp.afterCount"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogInRecordsEdit.vue";t.default=s.exports},To5H:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("f3/d"),i("Oyvg"),i("rGqo");var a=i("1xh3"),o=i("QFMg"),n=i("z0WU"),l=i("mSNy");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.deleteBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteBtns(scope.row,scope.$index)">删除</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.receiveCount" ></el-input>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.remark" ></el-input>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},p={components:{selectProductByEntity:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{maintainTaskId:"",rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tempQuery:{},tableData:[],selectList:null,initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:c,deleteBtns:this.deleteBtns,deleteBtns_isShow:!0}},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1}},created:function(){this.maintainTaskId=this.initData.maintainTaskId,this.initTable("add")},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){e.forEach(function(e){for(var t in e){var i=e[t];i.indexOf("_")>0&&("en"==l.a.locale?i=i.substring(i.indexOf("_")+1):"zh"==l.a.locale&&(i=i.substring(0,i.indexOf("_"))))}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==l.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==l.a.locale&&(e.label=t.substring(0,t.indexOf("_")))),"receiveCount"===e.prop&&(e.component=d),"remark"===e.prop&&(e.component=u)}),this.internationalConfig(),e.push(this.initConfigs.tableOperates),e},internationalConfig:function(){"en"==l.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==l.a.locale&&(this.initConfigs.tableOperates.label="操作")},initTable:function(e){var t=this;this.$loading({spinner:"preloader",text:""}),Object(o.listPageMaintainTaskDetail)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}({},this.tempQuery,{fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,productStockCount,receiveCount,remark",type:e,pageNo:this.pageNo})).then(function(e){t.getListPage(e),t.$loading().close()}).catch(function(e){t.$loading().close()})},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="selectProductByEntity",this.showDialog=!0,this.inLinVisible=!0},deleteBtns:function(e,t){this.tableData.splice(t,1)},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.productStockCount,n=a.receiveCount;if(null==n||0==n.trim().length)t=t+"第 "+(i+1)+" 行: 领取数量为空或空字符串！";else{var l=new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$");l.test(n)?l.test(n)&&n-0==0?t=t+"第 "+(i+1)+" 行: 领取数量("+n+")输入错误，请输入大于零的正整数或(1,2)位小数！":o-n<0&&(t=t+"第 "+(i+1)+" 行: 领取数量("+n+")输入错误，领取数量不可大于库存可用数量！"):t=t+"第 "+(i+1)+" 行: 领取数量("+n+")输入错误，请输入大于零的正整数或(1,2)位小数！"}}return t},saveWarehouseIn:function(){var e=this,t="";if(null!=this.tableData&&0!=this.tableData.length){var i=this.checkColumn(this.tableData);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{for(var a=[],n=0;n<this.tableData.length;n++){var l=this.tableData[n],s={warehouseGenre:l.warehouseGenre,taskId:this.maintainTaskId,productId:l.productId,productGenre:l.productGenre,receiveCount:l.receiveCount,remark:l.remark};a.push(s)}t=JSON.stringify(a),this.dialogLoading=!0,Object(o.addMaintainTaskDetail)({maintainTaskId:this.maintainTaskId,roleId:this.$storage.get("userInfo").roleIds,deptId:this.$storage.get("userInfo").deptId,dtlJsonStr:t}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenre:"",productGenreName:"",productUnitName:"",productStockCount:"",receiveCount:"",remark:"",warehouseGenre:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genre&&a.genre.trim().length>0&&(o.productGenre=a.genre.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),null!=a.unitName&&a.unitName.trim().length>0&&(o.productUnitName=a.unitName.trim()),null!=a.productStockCount&&a.productStockCount.trim().length>0&&(o.productStockCount=a.productStockCount.trim()),o.warehouseGenre="entity",this.tableData.push(o)}}},watch:{pageNo:function(){this.initTable("add")}}},m=i("KHd+"),h=Object(m.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px","margin-top":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{height:"300px",width:"96%","margin-left":"2%"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveWarehouseIn}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);h.options.__file="dialogProductReceive.vue";t.default=h.exports},TslA:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("V/0Z");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-add",props:["initData","visible"],components:{},data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{deptName:!0},tempShow:{deptName:!0},rules:{name:[{required:!0,message:"请填写BOM名称",trigger:"change"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateBom)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"500px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"400px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:e.tempLable.name+":",prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.remark+":",prop:"remark"}},[i("el-input",{model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},"U/mz":function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=(i("z0WU"),{components:{multilevelTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tableData:[],selectList:[],configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:this.initData.temp.id}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseOutExecutes",params:{isNeedPage:"false",fieldCode:"name,actualCount,executorName,endDate"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},databridge:function(e){this.selectList=e},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;null!=e.selectList&&e.selectList}},watch:{}}),n=(i("P1D2"),i("cNy2"),i("KHd+")),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"90px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_purchaseOutWC_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogView.vue";t.default=l.exports},U41g:function(e,t,i){"use strict";i.r(t);i("f3/d"),i("Oyvg");var a=i("9I58"),o=i("WIyV"),n=i("sanI"),l=i("8Vv6"),s=(i("rwyD"),i("aZSg")),r=i("a0Xs"),c={components:{customBaseTable:o.a,dialogAddCustomer:n.default,selectProductBySaleOrder:a.default},props:["initData","visible"],data:function(){var e=this;return{productUnit:{},rowData:{},rules:{customerName:[{required:!0,message:"请选择客户名称",trigger:"change"}],receiptTypeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.temp.receiptType.length<=0?a(new Error("请选择发票类型")):a()}}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}],orderDate:[{required:!0,message:"请填写下单日期",trigger:"change"}],expectDate:[{required:!0,message:"请填写约定交期",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{customerId:"",customerName:"",receiptType:"",receiptTypeName:"",orderDate:new Date,expectDate:new Date,makeId:"",makeName:"",remark:"",dtlJsonStr:"",isAutoCommit:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择客户名称",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"df7cb67fca4148bc9632c908e4a7fdea",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}},apiObj:{apiName:"listPageSaleOrderDetail",params:{fieldCode:"prodInfo,orderUnitName,orderCount,stockCountByPrice,productStockCountByPrice,deliverDate,remark",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:""}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"orderUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"orderCount",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"deliverDate",width:"180",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",lessThan:["tempData@maxExpectDate",!0]}},{columnIndex:"remark",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{maxExpectDate:""}}},beforeCreate:function(){},created:function(){var e=this.$storage.get("userInfo");null!=e.userId&&e.userId.trim().length>0&&(this.temp.makeId=e.userId.trim()),null!=e.userName&&e.userName.trim().length>0&&(this.temp.makeName=e.userName.trim()),this.temp=this.initData.temp,this.apiObj.params.parentId=this.initData.temp.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData),this.setProductSum(this.rowData))},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&e.$refs.orderEditDialog.getData()}),this.saveSaleOrder(this.orderDtlList)},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+\\.{0,1}[0-9]{0,2}$").test(e.trim())},checkColumn:function(e){for(var t="",i=this.temp.expectDate,a=0;a<e.length;a++){var o=e[a],n=o.orderCount;null!=n&&0!=n.trim().length||(t=t+"第 "+(a+1)+" 行: 订购数量为空或空字符串！");var l=o.deliverDate;null==l&&(t=t+"第 "+(a+1)+" 行: 约定交期为空或空字符串！"),null!=i&&null!=l&&i<l&&(t=t+"第 "+(a+1)+" 行: 约定交期不可大于("+i+")！")}return t},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},saveSaleOrder:function(e){var t=this;if(null!=e&&0!=e.length){var i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{for(var a=[],o=0;o<e.length;o++){var n=e[o],s={id:"",productId:"",productPrice:"",p2nFormula:"",n2pFormula:"",orderCount:"",orderUnit:"",productUnit:"",priceUnit:"",productSum:"",deliverDate:"",remark:""};s.id=n.id,s.productId=n.productId,s.productPrice=n.productPrice,s.p2nFormula=n.p2nFormula,s.n2pFormula=n.n2pFormula,s.orderCount=n.orderCount,s.orderUnit=n.orderUnit,s.productUnit=n.productUnit,s.priceUnit=n.priceUnit,s.productSum=n.productSum,s.deliverDate=n.deliverDate,s.remark=n.remark,a.push(s)}this.temp.dtlJsonStr="",null!=a&&a.length>0&&(this.temp.dtlJsonStr=JSON.stringify(a)),this.$confirm("修改订单后，是否将该订单提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.temp.isAutoCommit="true",Object(l.updateSaleOrder)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.temp.isAutoCommit="false",Object(l.updateSaleOrder)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},customerSelect:function(e){e[0]&&(this.temp.customerId=e[0].id,this.temp.customerName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},checkNumber:function(e,t){null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t+"("+e+") 输入错误，请输入大于零的正整数或(1,2)位小数！"})},changeAdvanceSum:function(e){null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&this.checkNumber(e,"预付款")},addProduct:function(){this.$refs.orderEditDialog.getData(),this.dialogData.data=this.orderDtlList,this.dialogData.isNeedRepeat=!1,this.dialogData.querySpare="isSpareAll",this.dialogData.title="选择货品",this.openDialogName="selectProductBySaleOrder",this.showDialog=!0,this.inLinVisible=!0},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id,t.orderUnit=e.id),null!=e.productPrice&&(t.productPrice=e.productPrice),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula))},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim());var a="";null!=t.productStockCount&&t.productStockCount.trim().length>0&&(a=t.productStockCount.trim()),Object(r.formulaReckonByProductCount)({parmKey:"N",stockCount:i,productStockCount:a,formula:e}).then(function(e){0===e.code&&(i-0!=0&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p),a-0!=0&&null!=e.productStockCount_n2p&&e.productStockCount_n2p.trim().length>0&&(t.productStockCountByPrice=e.productStockCount_n2p))}).catch(function(e){})}},setProductSum:function(e){if(null!=e){e.productSum="";var t=e.orderCount,i=e.productPrice;null!=t&&t.trim().length>0&&null!=i&&i.trim().length>0&&(e.productSum=(t.trim()*i.trim()).toFixed(2))}},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelected(t)},tableSelected:function(e){if(null!=e&&e.length>0)for(var t=this.temp.expectDate,i=0;i<e.length;i++){var a=e[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productPrice:"",n2pFormula:"",p2nFormula:"",prodInfo:"",productUnit:"",productUnitName:"",productCount:"",stockCount:"",productStockCount:"",priceUnit:"",stockCountByPrice:"",productStockCountByPrice:"",count:"",productSum:"",deliverDate:"",stateName:"",remark:""};null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),null!=a.unitName&&a.unitName.trim().length>0&&(o.productUnitName=a.unitName.trim()),null!=a.prodInfo&&a.prodInfo.trim().length>0&&(o.prodInfo=a.prodInfo.trim()),o.orderUnit=a.unit,o.orderUnitName=a.unitName,o.productPrice=a.price,o.p2nFormula=a.p2nFormula,o.n2pFormula=a.n2pFormula,o.productId=a.id.trim(),o.productUnit=a.unit.trim(),o.stockCount=a.stockCount.trim(),o.productStockCount=a.productStockCount.trim(),null!=t&&(o.deliverDate=t,o.maxExpectDate=t,this.tempData.maxExpectDate=t),o.stockCountByPrice=a.stockCount.trim(),o.productStockCountByPrice=a.productStockCount.trim(),this.tableData.push(o)}},findProductPrice:function(e,t,i,a){return Object(s.findSaleUnitPrice)({customerId:t,productId:i,unit:a}).then(function(t){0===t.code&&null!=t.productPrice&&t.productPrice.trim().length>0&&(e.productPrice=t.productPrice)}).catch(function(e){}),""}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size},formItemWidth:function(){var e={};switch(this.size){case"mini":e.width="180px";break;case"small":e.width="200px";break;default:e.width="220px"}return e}},watch:{"temp.expectDate":function(){this.tempData.maxExpectDate=this.temp.expectDate}}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"80%"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px",size:e.size}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"客户名称:",prop:"customerName"}},[i("base-input-option",{staticStyle:{display:"inline-block"},style:e.formItemWidth,attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.customerName,callback:function(t){e.$set(e.temp,"customerName",t)},expression:"temp.customerName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发票类型:",prop:"receiptTypeName"}},[i("el-select",{style:e.formItemWidth,attrs:{placeholder:"发票类型"},model:{value:e.temp.receiptType,callback:function(t){e.$set(e.temp,"receiptType",t)},expression:"temp.receiptType"}},[i("el-option",{attrs:{label:"不开票",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"增值税普通发票",value:"2"}}),e._v(" "),i("el-option",{attrs:{label:"增值税专用发票",value:"3"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{style:e.formItemWidth,attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"下单日期:",prop:"orderDate"}},[i("el-date-picker",{style:e.formItemWidth,attrs:{type:"date",placeholder:"下单日期","value-format":"yyyy-MM-dd"},model:{value:e.temp.orderDate,callback:function(t){e.$set(e.temp,"orderDate",t)},expression:"temp.orderDate"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"约定交期:",prop:"expectDate"}},[i("el-date-picker",{style:e.formItemWidth,attrs:{type:"date",placeholder:"约定交期","value-format":"yyyy-MM-dd"},model:{value:e.temp.expectDate,callback:function(t){e.$set(e.temp,"expectDate",t)},expression:"temp.expectDate"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{style:e.formItemWidth,model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderEditDialog",attrs:{"data-custom-table-id":"views_sale_orderByPrice_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"orderEditDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},U4yN:function(e,t,i){"use strict";i.r(t);i("91GP");var a=i("WIyV"),o=i("01lf"),n=i("9wPf"),l={components:{customBaseTable:a.a,editFinanceBillByPurchase:o.default},props:["initData","visible"],data:function(){return{signDtlId:"",rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPagePurchaseByFinanceBill",params:{fieldCode:"code,customerName,typeName,amount,stateName,cuserName,cdate",businessId:"",billType:"7",orderStr:"bill.cdate asc"}},customColumn:[{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",width:"160",component:[{name:"提交",nameEn:"submitByParent",rowState:"#self@state#===0",editBtns_isShow:!0,method:this.submitByParent},{name:"撤回",nameEn:"rebackSubmitByParent",rowState:"#self@state#===1",editBtns_isShow:!0,method:this.rebackSubmitByParent},{name:"编辑",nameEn:"editByParent",rowState:"#self@state#===0",editBtns_isShow:!0,method:this.editByParent},{name:"删除",nameEn:"deleteByParent",rowState:"#self@state#===-1",editBtns_isShow:!0,method:this.deleteByParent},{name:"取消",nameEn:"cancelByParent",rowState:"#self@state#===0",editBtns_isShow:!0,method:this.cancelByParent},{name:"恢复",nameEn:"rebackCancelByParent",rowState:"#self@state#===-1",editBtns_isShow:!0,method:this.rebackCancelByParent}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.apiObj.params.businessId=this.initData.rowData.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},refreshPage:function(){this.apiObj.params=Object.assign({},this.apiObj.params)},closeDialog:function(e){this.showDialog=!1,this.inLinVisible=!1,"ok"===e.resState&&this.refreshPage()},editByParent:function(e){this.dialogData.rowData=JSON.parse(JSON.stringify(e)),this.dialogData.title="编辑",this.openDialogName="editFinanceBillByPurchase",this.showDialog=!0,this.inLinVisible=!0},submitByParent:function(e){var t=this;this.$confirm("此操作将此记录提交审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.submitFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消提交"})})},rebackSubmitByParent:function(e){var t=this;this.$confirm("此操作将此记录状态变更为待提交, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.rebackSubmitFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消撤回"})})},deleteByParent:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.deleteFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},cancelByParent:function(e){var t=this;this.$confirm("此操作将将此记录取消, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.cancelFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},rebackCancelByParent:function(e){var t=this;this.$confirm("此操作将此记录状态变更为待提交, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,Object(n.rebackCancelFinanceBillByPurchase)({id:e.id}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.refreshPage(),t.dialogLoading=!1)}).catch(function(e){t.dialogLoading=!1})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size}},watch:{}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"purchaseSignDtlQualityByInfo",attrs:{"data-custom-table-id":"views_quality_purchaseSignByQuality_dialogListFinanceBill0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!1,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"purchaseSignDtlQualityByInfo",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogListFinanceBill.vue";t.default=r.exports},U9kq:function(e,t,i){"use strict";i.r(t);var a=i("mbVW"),o={name:"dialog-edit",props:["initData","visible"],data:function(){return{formData:{id:"",remark:""},dialogLoading:!0,isVisible:!1,inDialog:!0,rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){var e=this.initData.rowData;this.formData.id=e.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.auditDisagreeAssistDiscard)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center","padding-bottom":"10px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);l.options.__file="dialogAuditDisagree.vue";t.default=l.exports},UDs2:function(e,t,i){"use strict";var a=i("Ro9C");i.n(a).a},URPc:function(e,t,i){},UmAM:function(e,t,i){"use strict";var a=i("RJED");i.n(a).a},Upn7:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("VJB8"),o=i("WIyV"),n=i("5cBD"),l=(i("MPAK"),i("fHEr")),s={components:{customBaseTable:o.a,selectAssistProductBySupplier:n.default,selectProductCustomTransferTable:a.a},props:["initData","visible"],data:function(){return{rules:{assistProductName:[{required:!0,message:"请选择外协件",trigger:"change"}],craftName:[{required:!0,message:"请选择工艺名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{dtlJsonStr:"",makeUserName:"",makeId:"",remark:""},tableData:[],editData:[],configs:{topBarBtnList:[{name:"选择外协件",nameEn:"add",isShow:!0,method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},ApplyDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择申请人",tableUrl:"/system/user/listPageUsers",tableParm:{isdisable:"1",fieldCode:"name,deptName"},temp:{}},dialogName:"dialogOptionNotCode"}},AssistProductDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"800px",title:"选择外协件"},dialogName:"dialogProductOption"}},AssistAraftDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择工艺名称"},dialogName:"dialogAssistCraftOption"}},apiObj:{apiName:"listPageAssistPlanDetails",params:{fieldCode:"assistProductName,craftName,orderUnitName,count,planDate,remark",parentId:"null"}},customColumn:[{columnIndex:"assistProductName",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"count",width:"140",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"planDate",width:"175",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",greaterThan:["tempData@minDate",!0]}},{columnIndex:"remark",width:"120",componentName:"input",_cellConfig:{}}],tempData:{minDate:new Date}}},beforeCreate:function(){},created:function(){var e=this.$storage.get("userInfo");this.formData.makeId=e.userId,this.formData.makeUserName=e.userName},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.editData=[],this.editData=e)},getData:function(){this.$refs.customBaseTable.getData()},assistProductSelect:function(e){e[0]&&(this.formData.assistProductId=e[0].id,this.formData.assistProductName=e[0].name,this.formData.assistProductInfo=e[0].prodInfo)},assistAraftSelect:function(e){e[0]&&(this.formData.craftId=e[0].id,this.formData.craftName=e[0].name)},addCraft:function(){this.dialogData.isNeedShowResult="true",this.dialogData.title="新增工艺名称",this.openDialogName="dialogAddCraft",this.showDialog=!0,this.inLinVisible=!0},applySelect:function(e){e[0]&&(this.formData.makeId=e[0].id,this.formData.makeUserName=e[0].name)},addProduct:function(){this.getData(),this.dialogData.data=this.editData,this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择外协件",this.openDialogName="selectAssistProductBySupplier",this.showDialog=!0,this.inLinVisible=!0},checkColumnByTable:function(e){for(var t="",i=0;i<e.length;i++){null==e[i].planDate&&(t=t+"第 "+(i+1)+" 行: 期望到货日期为空，请选择期望到货日期！")}return t},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){if(e.editData=[],e.getData(),null==e.editData||0==e.editData.length)return;var i=e.checkColumnByTable(e.editData);if(null!=i&&i.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:i});setTimeout(function(){e.savePlan(e.editData)},1e3)}})},savePlan:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],l={assistProductId:n.assistProductId,count:n.count,planDate:n.planDate,remark:n.remark,orderUnit:n.orderUnit};a.push(l)}i=JSON.stringify(a),this.formData.dtlJsonStr=i,this.$confirm("添加计划后，是否将该计划提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.formData.isAutoCommit="true",t.addAssistPlan()}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.formData.isAutoCommit="false",t.addAssistPlan())})}},addAssistPlan:function(){var e=this;Object(l.addAssistPlan)(this.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"selectProductCustomTransferTable"==e.pageName){var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelected(t)}else null!=e&&"dialogAdd"==e.pageName&&"true"==e.isNeedShowResult&&null!=e.Craft&&(this.formData.craftId=e.Craft.id,this.formData.craftName=e.Craft.name)},tableSelected:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={assistProductId:i.id,assistProductName:i.productName,craftName:i.craftName,orderUnitName:i.unitName,orderUnit:i.unitId,planDate:new Date};this.tableData.push(a)}}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,inline:!0,model:e.formData}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"经办人:",prop:"makeUserName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.ApplyDialog.dialog},on:{callback:e.applySelect},model:{value:e.formData.makeUserName,callback:function(t){e.$set(e.formData,"makeUserName",t)},expression:"formData.makeUserName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{margin:"10px 0px 10px 0px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistPlan_assistPlanList_dialogAdd0",varList:e.tableData,showIndex:!1,showTableSet:!1,showCheckBox:!1,useDefaultBtn:!0,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAdd.vue";t.default=c.exports},"Uu/a":function(e,t,i){"use strict";var a=i("R9Ya");i.n(a).a},Uv1H:function(e,t,i){"use strict";i.r(t);i("91GP"),i("f3/d");var a=i("WIyV"),o=i("qQoz"),n={components:{searchBar:i("uTIz").a,customBaseTable:a.a,dialogDeliver:o.default},props:["initData","visible"],data:function(){return{searchList:[{label:"客户名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"客户名称"}],guid:"",searchMethod:{},searchConfig:{},searchObj:{},rules:{},resState:"",openDialogName:"",dialogLoading:!0,isVisible:!1,inDialog:!0,showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",orderDetail_style:"",customerId:"",customerName:"",title:"",temp:null,tempLable:null},tableData:[],rowTableList:[],apiObj:{apiName:"listPageCustomers",params:{genre:"df7cb67fca4148bc9632c908e4a7fdea",fieldCode:"name"}},customColumn:[],mergeTitle:[],mergeColumn:[],mergeRow:[]}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e},databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},save:function(){var e="";if(null==this.rowTableList||0==this.rowTableList.length?e="请选择一行数据！":this.rowTableList.length>1&&(e="请选择一行数据，只允许单选！"),e.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:e});else{var t=this.rowTableList[0].id;this.dialogData.customerId=t,this.dialogData.customerName=this.rowTableList[0].name;var i=document.body.clientWidth,a=(document.body.clientHeight,.7*i);this.dialogData.dialog_width=a+"px";var o=.666*(.618*a)+"px";this.dialogData.orderDetail_style="height:"+o+";width: 96%;margin-left: 2%;",this.dialogData.title="发货单列表",this.openDialogName="dialogDeliver",this.showDialog=!0,this.inLinVisible=!0}},dialogOpen:function(){},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},setApiObj:function(){return this.apiObj.params=Object.assign({},this.apiObj.params,this.searchObj),this.apiObj}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"450px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"customerDialog",attrs:{"data-custom-table-id":"views_sale_retreat_createRetreat_dialogCustomer0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!1,showTableSet:!1,showCheckBox:!0,isSingle:!0,customColumn:e.customColumn,apiObj:e.setApiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"customerDialog",useDefaultBtn:!1,showAll:!1},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogCustomer.vue";t.default=s.exports},UvZD:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("ywZ6"),l=i("EDKZ");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddSupplier:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:"",deleteIds:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark",parentId:"",type:"edit"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"4"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="采购入库",this.temp.type="d78ceba5beef41f5be16f0ceee775399",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"},this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={id:n.id,productId:n.productId,remark:n.remark,priceCount:n.priceCount,priceUnit:n.priceUnit,p2nFormula:n.p2nFormula,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.updateWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,this.tableData.push(o)}}},watch:{}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseIn_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogEdit.vue";t.default=d.exports},V0vU:function(e,t,i){"use strict";var a=i("Nao0");i.n(a).a},V1mQ:function(e,t,i){"use strict";var a=i("LnwY");i.n(a).a},V5zP:function(e,t,i){},VDvt:function(e,t,i){},VJB8:function(e,t,i){"use strict";i("KKXr"),i("f3/d"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("t3Un")),l={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{fieldCode_default:"prodInfo,unitName,stockCount,safetyCount,lockCount,productStockCount",tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!1,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",state:!0,isShow:!0,plain:!0,icon:"refresh",method:this.resetQuery}],aboveTableConfig:{apiObj:{apiName:"listPageProducts",params:{fieldCode:"",prodColumnKey:"code,name,spec,property"}},customColumn:[{columnIndex:"prodInfo",width:"450",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!0,showTableSet:!1,showAll:!1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"prodInfo",width:"450",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:[],tableSelectList:[]}},created:function(){var e="";e=null!=this.initData.orderStr?this.initData.orderStr:"prod.stock_count desc";var t="";if(null!=this.initData.tableData&&this.initData.tableData.length>0)for(var i=0;i<this.initData.tableData.length;i++){var a=this.initData.tableData[i];null!=a.productId&&a.productId.trim().length>0&&(t=t+a.productId+",")}var o="",n=!0;null!=this.initData.isNeedRepeat&&(n=this.initData.isNeedRepeat),n||null!=t&&t.trim().length>0&&(t=t.substring(0,t.lastIndexOf(",")),o="prod.id not in ("+(t=this.findQueryProductIds(t))+")");var l=this.fieldCode_default;null!=this.initData.fieldCode&&this.initData.fieldCode.trim().length>0&&(l=this.initData.fieldCode.trim()),this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,{fieldCode:l,queryStr:o,orderStr:e,isdisable:"1"}),this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){var e="1200px";return null!=this.initData.width&&(e=this.initData.width),e},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{selectList:this.tableSelectList,pageName:"selectProductCustomTransferTable"})},closeDialog:function(e){},tableSelected:function(e){this.tableSelectList=e},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.tempQuery.pid=this.selectTree.id,this.tempQuery.layer=this.selectTree.layer,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name},t.push(i),this.treeData=t,this.dialogLoading=!1},initTree:function(){var e=this;this.dialogLoading=!0,Object(n.a)({url:"/system/dictionary/treeDictionarys",method:"post",data:{dictionaryKey:"productGenre"}}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},findQueryProductIds:function(e){var t="";if(null==e||0==e.trim().length)return t;var i=e.split(",");if(null!=i&&i.length>0)for(var a=i.length,o=0;o<i.length;o++){var n="'"+i[o]+"'";o<a-1?t=t+n+",":o==a-1&&(t+=n)}return t},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},confrim:function(){this.$refs.trabsferTables.getTableSelected(),this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"选择货品",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:5}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:19}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"名称或编码"},model:{value:e.tempQuery.productValue,callback:function(t){e.$set(e.tempQuery,"productValue",t)},expression:"tempQuery.productValue"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:e.queryTable}})],1),e._v(" "),i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:e.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="selectProductCustomTransferTable.vue";t.a=r.exports},VcxO:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo"),i("91GP"),i("f3/d");var a=i("f/WR"),o=i("uTIz"),n=i("K3g7"),l=i("uXxI");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{transferTable:a.a,searchBar:o.a},name:"dialogAddByProduct",props:["initData","visible"],data:function(){return{temp:{productIds:""},tempLable:{},rules:{},guid:"",tempQuery:{},searchList:[{label:"货品编码",type:"input",ruleType:"string",mapKey:"code",configs:{},placeholder:"货品编码"},{label:"货品名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"货品名称"}],searchConfig:{hideSearchSwitch:!1},dialogLoading:!1,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},pageData:null,pageNo:1,treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1},selectTree:{pid:"",id:"",name:""},btnList:[{name:"生成盘点任务",isShow:!0,state:!0,method:this.addWarehouseCheck},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],apiData:{apiName:"listPageWarehouse",params:{fieldCode:"",isLeaf:"1",nodeId:"",orderStr:"",isNeedWarehouseProduct:"true",isNotNeedSpare:"true",queryStr:""}},tableSelectList:[],stateBtnData:{},tableConfigs:{showIndex:!0},tempList:[],searchObj:{}}},created:function(){this.initTree()},mounted:function(){this.isVisible=this.visible},computed:{tableHeight:function(){},dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,name:e.nodeData.name,layer:e.layer,virtualGenre:e.virtualGenre},this.pageNo=1,this.apiData.params=Object.assign({},this.searchObj,this.apiData.params,{nodeId:this.selectTree.id})},initTree:function(){var e=this;this.dialogLoading=!0,Object(n.treeWarehouse)({isNotNeedSpare:"true"}).then(function(t){var i=[],a=t.result.treeList;e.selectTree={pid:a.pid,id:a.id,layer:a.layer,name:a.name,virtualGenre:a.virtualGenre},i.push(a),e.treeData=i,e.apiData.params=Object.assign({},e.searchObj,e.apiData.params,{nodeId:e.selectTree.id}),e.$nextTick(function(){this.$refs.tree.$children[0].setCurrentKey(this.selectTree.id)}),e.dialogLoading=!1}).catch(function(t){e.dialogLoading=!1})},sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.apiData.params=Object.assign({},this.searchObj,this.apiData.params)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{selectList:this.tempList})},addWarehouseCheck:function(){var e=this,t=this.tempList,i=[];null!=t&&t.length>0&&t.forEach(function(e){var t=e.id;if(null!=t&&t.trim().length>0){var a={businessId:""};a.businessId=t,i.push(a)}}),0!=i.length?Object(l.addWarehouseCheck)({type:"1",dtlJsonStr:JSON.stringify(i)}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){}):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条库位数据！！"})},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},tableSelected:function(e){this.tempList=e},closeDialog:function(e){this.showDialog=!1}}},c=(i("abxq"),i("KHd+")),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px",layoutType:1},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{attrs:{span:6}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{attrs:{span:18}},[i("el-row",[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,searchConfig:e.searchConfig},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e()],1),e._v(" "),i("el-row",[i("div",[i("transfer-table",{ref:"trabsferTables",attrs:{tableConfigs:e.tableConfigs,btnList:e.btnList,stateBtn:e.stateBtnData,apiData:e.apiData},on:{"table-selected":e.tableSelected}})],1)])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogAddByWarehouse.vue";t.default=d.exports},Vhgy:function(e,t,i){"use strict";var a=i("jw2b");i.n(a).a},VlDU:function(e,t,i){},W11Z:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("AV4t");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{name:[{required:!0,trigger:"change",message:"请填写质检项"}],criterion:[{required:!0,trigger:"change",message:"请填写检验标准"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{productId:"",name:"",criterion:"",business:""}}},created:function(){this.formData.productId=this.initData.productId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,e.formData.business="purchase",Object(a.addQuality)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"质检项:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"检验标准:",prop:"criterion"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.criterion,callback:function(t){e.$set(e.formData,"criterion",t)},expression:"formData.criterion"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="addQuality.vue";t.default=s.exports},"W2P+":function(e,t,i){},W3AZ:function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=i("vR9m"),n={components:{multilevelTable:a.a},props:["initData","visible"],data:function(){return{addDeliverData:{orderId:"",supplierId:"",supplierName:"",roleId:"",deliverDetail:"",deliverDetailChild:""},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],tableConfigList:[{customColumn:[{columnIndex:"assistProductName",width:"300",_cellConfig:{hideTitle:!0}},{columnIndex:"supplierName",width:"300",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageAssistOrderDetail",params:{fieldCode:"assistProductName,supplierName,craftName,orderUnitName,orderCount",orderDtlId:""}},tempData:{},showHeader:!0,showIndex:!1,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"prodInfo",width:"250",_cellConfig:{hideTitle:!0}},{columnIndex:"editDeliverCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{lessThan:["self@maxDeliverCount",!0]}],message:["请输入大于零的正整数或(1,2)位小数！","不可大于最大发货数量！"]}}],apiObj:{apiName:"listPageAssistOrderDetailChildByDeliver",params:{fieldCode:"prodInfo,unitName,ratio,count,deliverCount,maxDeliverCount,editDeliverCount",addColumn:{columnKey:"prodInfo,editDeliverCount",columnName:"货品,本次发货"},prodColumnKey:"productCode,productName,productSpec,productProperty",orderDtlId:"",isNeedPage:"false"}},dynamicValue:{parentId:"self@id"},tempData:{},showIndex:!1,showCheckBox:!1,isSingle:!1,rightFixed:0,componentId:"twoLevelTable"}]}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.tableConfigList[0].apiObj.params.orderDtlId=e.id,this.tableConfigList[1].apiObj.params.orderDtlId=e.id,this.addDeliverData.orderId=e.parentId,this.addDeliverData.supplierId=e.supplierId,this.addDeliverData.supplierName=e.supplierName},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.tableData=[],this.tableData=e)},getData:function(){this.$refs.customBaseTable.getData()},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){},findJsonStringByTable:function(e){var t=e[0],i={orderId:t.parentId,orderDetailId:t.id,assistProductId:t.assistProductId,orderUnit:t.orderUnit};this.addDeliverData.deliverDetail=JSON.stringify(i);for(var a=[],o=t.children,n=0;n<o.length;n++){var l=o[n],s="";if(null!=l.editDeliverCount&&(s=l.editDeliverCount+""),null!=s&&s.trim().length>0&&s/1>0){var r={orderDtlChildId:l.orderDtlChildId,productId:l.productId,unitId:l.unitId,ratio:l.ratio,count:l.editDeliverCount};a.push(r)}}this.addDeliverData.deliverDetailChild=JSON.stringify(a)},save:function(){var e=this;this.getData(),null!=this.tableData&&this.tableData.length>0&&(this.findJsonStringByTable(this.tableData,this.addDeliverData),this.dialogLoading=!0,this.addDeliverData.roleId=this.$storage.get("userInfo").roleIds,Object(o.addAssistDeliver)(this.addDeliverData).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.dialogLoading=!1,e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-row",[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistDeliver_createAssistDeliver_dialogAdd0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},W8KX:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("uTIz"),o=i("2+ib");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{searchBar:a.a,multilevelTable:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{searchList:[],guid:"",searchObj:{},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",table_style:"",orderId:"",supplierId:"",supplierName:"",title:""},rowTableList:[],tableConfigList:[{customColumn:[{columnIndex:"state",width:"140",componentName:"tag",_cellConfig:{success:{state:"3",text:"已完成"},info:{state:"-1",text:"已取消"},warning:{state:"1",text:"待审核"},danger:{state:"2",text:"采购中"},default:{state:"0",text:"待提交"}}}],apiObj:{apiName:"getFinanceBillDetail",params:{queryStr:"",customerId:this.initData.temp.customerId,period:this.initData.temp.currentPeriod,fieldCode:"cdate,typeName,code,receiveAmount,occurAmount,remark",orderStr:"bill.cdate desc"}},tempData:{},showHeader:!0,showIndex:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,isSingle:!0,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0}]}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.updateData(e)},databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},dialogOpen:function(){},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"本期明细",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_sale_receivables_receiveQuery_dialogDetail0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogDetail.vue";t.default=r.exports},WBFp:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("9rC1");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写名称",trigger:"change"}]},typeData:{},customerTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"customerType",isglobal:"0",isNeetOneLayer:"true"}},defaultSelected:[]},supplierTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"supplierType",isglobal:"0",isNeetOneLayer:"true"}},defaultSelected:[]},provinceData:{data:{selectUrl:"/system/dictionary/treeDictionarys",selectParm:{dictionaryKey:"area",cascade:"true"}},defaultSelected:[]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[])},provinceSelect:function(e){e&&e.length>0?(this.temp.province=e[e.length-1],this.provinceData.defaultSelected=e):(this.temp.province=[],this.provinceData.defaultSelected=[])},dialogOpen:function(){var e=this,t=this.temp.genre;"df7cb67fca4148bc9632c908e4a7fdea"==t?this.typeData=this.customerTypeData:"49c0a7ebcb4c4175bd5195837a6a9a13"==t&&(this.typeData=this.supplierTypeData),this.typeData.defaultSelected=[],this.typeData.defaultSelected.push(this.temp.type),this.provinceData.defaultSelected=[],this.temp.id1&&this.provinceData.defaultSelected.push(this.temp.id1),this.temp.id2&&this.provinceData.defaultSelected.push(this.temp.id2),this.temp.id3&&this.provinceData.defaultSelected.push(this.temp.id3),this.temp.id4&&this.provinceData.defaultSelected.push(this.temp.id4),this.temp.id5&&this.provinceData.defaultSelected.push(this.temp.id5),this.temp.id6&&this.provinceData.defaultSelected.push(this.temp.id6),this.temp.province&&this.provinceData.defaultSelected.push(this.temp.province),this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;e.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateCustomer)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"80%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"80px"}},[i("el-form-item",{attrs:{label:"属性:",prop:"genreName"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{disabled:!0},model:{value:e.temp.genreName,callback:function(t){e.$set(e.temp,"genreName",t)},expression:"temp.genreName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"160px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类型:",prop:"typeName"}},[i("base-input-select",{staticStyle:{width:"160px"},attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地区:",prop:"provinceName"}},[i("base-input-select",{staticStyle:{width:"160px"},attrs:{data:e.provinceData.data},on:{callback:e.provinceSelect},model:{value:e.provinceData.defaultSelected,callback:function(t){e.$set(e.provinceData,"defaultSelected",t)},expression:"provinceData.defaultSelected"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},WEiI:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("/c4c");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{cancelReason:[{required:!0,trigger:"change",message:"请填写取消原因"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{maintainId:"",maintainTaskId:"",cancelReason:"",planId:""}}},created:function(){this.formData.maintainId=this.initData.maintainId,this.formData.maintainTaskId=this.initData.maintainTaskId,this.formData.planId=this.initData.planId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.cancelMaintainTask)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"取消原因:",prop:"cancelReason"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.cancelReason,callback:function(t){e.$set(e.formData,"cancelReason",t)},expression:"formData.cancelReason"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogCancel.vue";t.default=s.exports},WHaS:function(e,t,i){"use strict";i.r(t);var a={components:{customBaseTable:i("WIyV").a},props:["initData","visible"],data:function(){return{businessId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageRetreatDetailByOut",params:{fieldCode:"sysCode,supplierName,prodInfo,productGenreName,orderUnitName,stateName,count,amount",prodColumnKey:"productCode,productName,productSpec,productProperty",outId:"",queryStr:""}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.businessId=this.initData.businessId,this.apiObj.params.outId=this.initData.businessId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("el-row",{staticStyle:{"padding-top":"10px"},style:e.initData.table_style},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseRetreat_dialogRetreatDetailByOut0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);n.options.__file="dialogRetreatDetailByOut.vue";t.default=n.exports},WIyV:function(e,t,i){"use strict";i("91GP"),i("dRSK"),i("rGqo"),i("INYr"),i("xfY5");var a=i("8WZi"),o=i("z0WU"),n=i("DKCI"),l=i("50Ol"),s=(i("F9dT"),i("Yfch"),i("YP4+")),r=i("WwWg"),c=i("AZ8z"),d=i("mwzG"),u={name:"single-table",mixins:[a.a],provide:function(){return{rootVm:this}},props:{varList:{type:Array,default:function(){return[]}},isFixed:{type:Number,default:1},isSortable:{type:Boolean,default:!1},useDefaultBtn:{type:Boolean,default:!1},rowKey:{type:String,default:"id"},isStripe:{type:Boolean,default:!0},isBorder:{type:Boolean,default:!0}},data:function(){return{componentName:"singleTable",data:null,fixedList:[],scrollTimer:"",checkedViewHeight:0,pageId:"",initLoading:!0,headerWidthList:[],headerWidthTimerList:[],listLength:-1,selectOptionList:[],selectLoading:!1,tempVarList:[],guid:"",pageNo:1,defaultOperation:{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",method:this.defaultDeleteRow}]},constantWidth:s.a.tableComponentWidth,autoWidthTimer:{},autoWidthList:[],setScrollWidthTimer:-2,autoWidthSwitch:!1,autoWidths:[],columnWidth:{},isLoading:!0,fileList:[],removalVarListTimer:null}},components:{tableFilter:n.a,customSummaryOption:l.a},directives:{"auto-width":{inserted:function(e,t,i){var a=i.context,o=t.value.component?t.value.component.length:0;o>1&&e.clientHeight>60&&a.$set(a.columnWidth,t.value.prop,60*Math.ceil(o/2)+25+"px")}},"merga-width":{bind:function(e,t,i){!i.context.autoWidthTimer[t.value.id]&&(i.context.autoWidthTimer[t.value.id]=-1)},inserted:function(e,t,i){!i.context.autoWidthList.length&&(i.context.autoWidthList=i.context.setTitleList.map(function(e){return[]})),i.context.$nextTick(function(a){-1===i.context.autoWidthTimer[t.value.id]&&(i.context.autoWidthTimer[t.value.id]=setTimeout(function(a){var o=e.offsetWidth,n=t.value,l=i.context.autoWidthList;if(l[n.parentLayer].length)if(l[n.parentLayer][n.selfLayer]>-1){var s=l[n.parentLayer][n.selfLayer];l[n.parentLayer].splice(n.selfLayer,1,o+s)}else l[n.parentLayer][n.selfLayer]=o;else{var r=[];r[n.selfLayer]=o,l.splice(n.parentLayer,1,r)}},20))})}}},computed:{setColumnGlobalStyle:function(){return this.columnGlobalStyle},setVarList:function(){return this.varList.concat([])},removalVarList:function(){return this.removalVarLists(this.setVarList)},setInitLoading:function(){return this.mergeTitle.length?this.initLoading||this.isLoading:this.initLoading},setTableLoading:function(){return this.showTableSet?this.showTableSet&&this.setInitLoading:this.setInitLoading},tableData:function(){return this.$store.getters[this.guid+"/tableData"]||{}},resetPageDataHeight:function(){var e=0;return"boolean"==typeof this.hidePages?!this.hidePages&&this.hasPageData&&(e=this.setSmallPageHeight):void 0===this.hidePages&&(e=this.setSmallPageHeight),e},resetHeight:function(){return this.checkedViewHeight+this.customSummaryOptionHeight+this.resetPageDataHeight},tempCustomColumn:function(){return this.customColumn.concat([])},setCustomColumn:function(){if(this.useDefaultBtn){var e=this.tempCustomColumn.findIndex(function(e){return"last"===e.columnIndex});return e>-1?this.tempCustomColumn.splice(e,1,this.defaultOperation):this.tempCustomColumn.push(this.defaultOperation),this.tempCustomColumn}return this.tempCustomColumn}},created:function(){var e=this;this.guid=Object(o.a)(),Object(r.d)(this),this.setApiObj.apiName&&("0"===this.userInfo.userId?setTimeout(function(){e.data=d.a,e.data.result.varList&&e.data.result.varList.length>0&&e.data.result.varList.forEach(function(e){e.rowState="1"}),e.$store.commit(e.guid+"/SET_TABLEDATA",{res:e.data,vm:e}),e.pageId=e.$storage.get("menuId"),e.setDragTable&&e.setSort(),e.$store.commit(e.guid+"/SET_TABLERULELIST",{cb:e.tableRuleForm,ruleId:"root",vm:e}),e.initLoading=!1},1e3):this.httpRequests())},mounted:function(){this.setFixed(),this.setTableCheckBoxDisplay()},beforeDestroy:function(){!this.layer&&Object(r.h)(this.$store,this.guid)},updated:function(){},watch:{"tableData.tableData":function(){this.setFixed(),this.setTableCheckBoxDisplay()},"setApiObj.params":function(){this.httpRequests()},autoWidthList:{deep:!0,handler:function(e,t){var i=this;clearTimeout(this.setScrollWidthTimer),this.setScrollWidthTimer=setTimeout(function(t){i.autoWidths=e.map(function(e){var t=Math.max.apply(null,e);return t>-9999&&t<9999?t+20:0});var a=0;i.autoWidths.forEach(function(e){a+=e}),i.setShowCheckBox&&(a+=55),i.setShowIndex&&(a+=50),i.setDragTable&&(a+=50);var o=i.$el.clientWidth>a?(i.$el.clientWidth-a)/i.autoWidthList.length:0;i.autoWidths=i.autoWidths.map(function(e){return e?e+o:null}),i.setFixed(),i.autoWidthSwitch=!0,i.isLoading=!1},100)}},removalVarList:function(){var e=this;clearInterval(this.removalVarListTimer),this.removalVarListTimer=setInterval(function(t){e.tableData.titleList&&e.tableData.titleList.length&&(clearInterval(e.removalVarListTimer),e.pushData(e.removalVarList))},200)},initData:function(){var e=this;this.$store.commit(this.guid+"/SET_TABLERULELIST",{cb:null,ruleId:"root"});var t=JSON.parse(JSON.stringify(this.initData));this.$store.commit(this.setGuid+"/SET_TABLEDATA",{res:t,vm:this}),this.pageId=this.$storage.get("menuId"),this.setDragTable&&this.setSort(),this.pageNo=this.tableData.pageData&&this.tableData.pageData.current||1,this.initLoading=!1,this.$nextTick(function(t){e.scrollTable()}),this.$store.commit(this.guid+"/SET_TABLERULELIST",{cb:this.tableRuleForm,ruleId:"root",vm:this})}},methods:{defaultDeleteRow:function(e,t,i){this.deleteData(e)},removalVarLists:function(e){var t=this;if("transferTable"===this.useScenarios)return Object(c.a)(e);var i=[];return e.forEach(function(e,a){!e._internalId&&(e._internalId=Object(o.q)());var n=JSON.parse(JSON.stringify(e));!t.tempVarList.find(function(e){return e._internalId===n._internalId})&&i.push(n)}),i.length&&(this.tempVarList=this.tempVarList.concat(i)),i},httpRequests:function(e){var t=this;this.initLoading=!0,this.$store.commit(this.guid+"/SET_TABLERULELIST",{cb:null,ruleId:"root"}),this.$api[this.setApiObj.apiName](Object.assign({},this.setApiObj.params,{pageNo:e||1})).then(function(i){t.data=i,t.pageNo=i.result.pageData&&i.result.pageData.current||1,t.data.result.varList&&t.data.result.varList.length&&t.data.result.varList.forEach(function(e){e.rowState="1",e._internalId=Object(o.q)()}),t.$store.commit(t.guid+"/SET_TABLEDATA",{res:t.data,vm:t}),t.pageId=t.$storage.get("menuId"),t.setDragTable&&t.setSort(),t.initLoading=!1,e&&t.$nextTick(function(e){t.scrollTable()}),t.$store.commit(t.guid+"/SET_TABLERULELIST",{cb:t.tableRuleForm,ruleId:"root",vm:t})}).catch(function(e){t.initLoading=!1})},setStyle:function(e){},selectItem:function(e,t){this.$emit("databridge",e,t),this.setIsSingle&&(e.length?(this.tableData[this.dataName].forEach(function(e){e.rowState="0"}),e[0].rowState="1"):this.tableData[this.dataName].forEach(function(e){e.rowState="1"}))},selectAllItem:function(e){if(this.setIsSingle){if(e.length)for(var t=e.length-1;t>=0;t--)e.splice(t,1)}else this.$emit("databridge",e)},handleCurrentChange:function(e){e!==this.pageNo&&(this.setApiObj.apiName?this.httpRequests(e)&&(this.tempVarList=[]):this.$emit("current-change",e))},updateTable:function(){this.setApiObj&&this.setApiObj.apiName&&this.httpRequests()},updateData:function(){this.setApiObj&&this.setApiObj.apiName&&this.httpRequests()}}},p=(i("Vhgy"),i("bBzQ"),i("KHd+")),m=Object(p.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.disableLoading&&e.setTableLoading,expression:"!disableLoading && setTableLoading"}],ref:"tableWrapper",staticClass:"columnBaseTable myCoustomTable resetCoustomTableStyle",staticStyle:{height:"100%",position:"relative"}},[e.showTableSet&&"outside"===e.tableSetMode?i("table-filter",{attrs:{headerList:e.setColConfigs,tableSwitchState:e.setTableSwitch,storeId:e.pageId,componentId:e.componentId},on:{"checked-list":e.checkedList,"checked-height":e.checkedHeight}}):e._e(),e._v(" "),i("div",{style:{height:e.setTableHeight}},[i("el-form",{ref:"ruleForm",style:{height:"100%"},attrs:{model:e.ruleForm,"status-icon":""},nativeOn:{submit:function(e){e.preventDefault()}}},[i("el-table",{ref:"baseTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.tableData,stripe:e.isStripe,border:e.isBorder,"current-row-key":e.rowKey,"tooltip-effect":"dark",height:"100%",fit:"","header-cell-class-name":e.setStyle,"row-key":"_internalId","default-sort":e.setSortableConfig["default-sort"],"show-summary":e.setSysSummary,"summary-method":e.getSummaries,"cell-style":e.setCellStyle,"header-cell-style":e.setHeaderCellStyle},on:{select:e.selectItem,"select-all":e.selectAllItem,"selection-change":e.selectionChange,"sort-change":e.sortChange,"row-click":e.rowClick,"row-dblclick":e.rowDblclick}},[e.setShowCheckBox?[i("el-table-column",{attrs:{type:"selection",fixed:e.fixedState,selectable:e.selectable,width:"55",align:"center"}})]:e._e(),e._v(" "),e.setShowIndex?[i("el-table-column",{attrs:{type:"index",index:e.indexMethod,fixed:e.fixedState,label:"序号",width:"50",align:"center"}})]:e._e(),e._v(" "),e._l(e.setTitleList,function(t,a){return[t.slot?i("tempalte",[e._t(t.slot,null,{fixed:e.setFixedList[a]})],2):Array.isArray(t.component)?[i("el-table-column",e._b({key:a,attrs:{"show-overflow-tooltip":"",fixed:e.setFixedList[a],"min-width":t.width||e.setColumnWidth[t.prop],align:"center"},scopedSlots:e._u([{key:"header",fn:function(o){return[i("span",{directives:[{name:"auto-tran",rawName:"v-auto-tran",value:{state:t._isShow,index:a,isComponent:!0,label:t.label,prop:t.prop},expression:"{state:colConfig._isShow,index:infoIndex,isComponent: true,label:colConfig.label,prop:colConfig.prop}"}],staticStyle:{display:"inline-flex","white-space":"nowrap"},domProps:{textContent:e._s(t.label)}})]}},{key:"default",fn:function(a){return[i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:t,expression:"colConfig"}],staticClass:"btnBox",staticStyle:{display:"flex","white-space":"normal","flex-wrap":"wrap"},style:{"justify-content":e.setColumnWidth[t.prop]?"space-between":"center"},on:{click:function(t){e.clickStop(t)},dblclick:function(t){e.clickStop(t)}}},e._l(t.component,function(t,o){return void 0!==t.editBtns_isShow&&!t.editBtns_isShow||!t.rowState||e.setButtonState(a.$index,a.row,t)?i("el-button",{key:o,style:e.setButtonStyle||{height:"24px",padding:"0 5px",margin:0,"font-size":"12px"},attrs:{type:"text"},on:{click:function(e){t.method(a.row,a.$index,a)}}},[e._v(e._s(t.name))]):e._e()}),1)]}}])},"el-table-column",t,!1))]:"object"!=typeof t.component||Array.isArray(t.component)?[t._isShow||"outside"!==e.tableSetMode?i("el-table-column",{key:a,attrs:{"show-overflow-tooltip":"",prop:t.prop,width:t._isShow?t.width||e.constantWidth[t.componentName]||"auto":e.setTableColumnState?"20":"","min-width":t._isShow?t.width||e.constantWidth[t.componentName]||e.autoWidths[a]||null:"",sortable:void 0===t.sortable?e.isSortable:t.sortable,fixed:e.setFixedList[a],align:"center"},scopedSlots:e._u([{key:"header",fn:function(o){return[i("span",{directives:[{name:"auto-tran",rawName:"v-auto-tran",value:{state:t._isShow,index:a,label:t.label,prop:t.prop},expression:"{state:colConfig._isShow,index:infoIndex,label:colConfig.label,prop:colConfig.prop}"},{name:"custom-table-switch",rawName:"v-custom-table-switch",value:{config:t,index:a,showSwitch:e.setTableColumnState},expression:"{config:colConfig,index:infoIndex,showSwitch:setTableColumnState}"}],style:{display:t._isShow?"inline-flex":"none","white-space":"nowrap"},domProps:{textContent:e._s(t.label)}})]}},{key:"default",fn:function(o){return[i("core-index",{directives:[{name:"show",rawName:"v-show",value:!!t._isShow||"outside"===e.tableSetMode,expression:"colConfig._isShow?true:tableSetMode === 'outside'"}],attrs:{scope:o,"info-index":a,"col-config":t,runTime:"base"}})]}}])}):e._e()]:[i(t.component,{key:a,tag:"component",attrs:{"col-config":t,fixed:e.setFixedList[a]}})]]}),e._v(" "),e.setDragTable?[i("el-table-column",{attrs:{label:"拖拽",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("el-tooltip",{attrs:{effect:"dark",content:"拖拽当前行",placement:"bottom","open-delay":1500,"hide-after":3e3,enterable:!1}},[i("svg-icon",{staticClass:"drag-handler theDragHandle",attrs:{"icon-class":"drag"}})],1)]}}])})]:e._e()],2)],1),e._v(" "),e.setUseSummary&&e.setCustomSummary.component?[i("custom-summary-option",{attrs:{customSummary:e.setCustomSummary,tempData:e.setTempData,tableData:e.tableData.tableData},on:{"send-height":e.customSummaryHeight,"custom-summary-value":e.customSummaryValue}})]:e._e()],2),e._v(" "),!e.hidePages&&e.hasPageData?i("div",{staticStyle:{"text-align":"center"},style:{"margin-top":(e.customSummaryOptionHeight||5)+"px",height:this.setSmallPageHeight+"px"}},[i("el-pagination",{attrs:{background:!e.smallPage,small:e.smallPage,"current-page":e.tableData.pageData.current,"page-size":e.tableData.pageData.size,layout:"prev, pager, next, jumper",total:e.tableData.pageData.total-0},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.tableData.pageData,"current",t)}}})],1):e._e()],1)},[],!1,null,"4f61156c",null);m.options.__file="index.vue";t.a=m.exports},"WLa+":function(e,t,i){"use strict";var a=i("z3xQ");i.n(a).a},WNFT:function(e,t,i){},WZeK:function(e,t,i){"use strict";var a=i("G9ua");i.n(a).a},"Wd+R":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("2SRW");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{rebackJsonStr:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写退单原因！",trigger:"change"}]}}},created:function(){this.rebackJsonStr=this.initData.temp.rebackJsonStr},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,t.temp.rebackDetailJsonStr=e.rebackJsonStr,Object(a.rebackWarehouseCheckByDetail)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退单原因:",prop:"rebackBill"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogRebackBill.vue";t.default=s.exports},WhPK:function(e,t,i){"use strict";var a=i("JDYd");i.n(a).a},WnSj:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("rGqo"),i("f3/d");var a=i("K3g7"),o=i("IfZh"),n=i("z0WU"),l=i("mSNy");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{queryType:null,productId:"",productType:"",dialogLoading:!1,isVisible:!1,inDialog:!0,tempLable:{},tempQuery:{},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{fullscreen:!1,title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1},selectTree:{pid:"",id:"",name:""},BaseTableLoading:!1,tableData:[],selectList:[],configs:{tableConfigs:[],isSingle:!0,showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1,resState:null}},created:function(){var e=this.initData.temp;this.productId=e.productId,this.productType=e.productType,this.initTree()},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,name:e.nodeData.name},this.pageNo=1,this.radioChange()},initTree:function(){var e=this;this.dialogLoading=!0;var t=this;Object(a.treeWarehouse)({isNotNeedSpare:"true"}).then(function(e){var i=[],a=e.result.treeList;t.selectTree={pid:a.pid,id:a.id,name:a.name},i.push(a),t.treeData=i,t.initTable(null,null,null,null,null),t.$nextTick(function(){t.$refs.tree.$children[0].setCurrentKey(t.selectTree.id)})}).catch(function(t){e.dialogLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!0,this.configs.showIndex=!0,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==l.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==l.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==l.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==l.a.locale&&(e.label=t.substring(0,t.indexOf("_"))))}),e},initTable:function(e,t,i,a,n){var l=this;null!=t&&0!=t.trim().length||(t=""),null!=i&&0!=i.trim().length||(i=""),null!=a&&0!=a.trim().length||(a=""),null!=n&&0!=n.trim().length||(n=""),e&&(this.BaseTableLoading=!0),Object(o.findWarehouseListByWarehouseIn)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}({},this.tempQuery,{nodeId:t,productId:i,productType:a,isExistProd:n,isNotNeedSpare:"true",pageNo:this.pageNo})).then(function(t){l.getListPage(t),l.dialogLoading=!1,e&&(l.BaseTableLoading=!1)}).catch(function(e){l.dialogLoading=!1,l.BaseTableLoading=!1})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},radioChange:function(){var e="",t="",i="";"productId"==this.queryType?(e=this.productId,i="true"):"productType"==this.queryType?(t=this.productType,i="true"):"warehouseId"==this.queryType&&(i="false");var a="";null!=this.selectTree&&null!=this.selectTree.id&&this.selectTree.id.trim().length>0&&(a=this.selectTree.id.trim()),this.initTable(!0,a,e,t,i)},dataBridge:function(e){if(null!=e&&e.length>0){var t=e[0];t.pageName="dialogChangeWarehouseByIn",this.selectList.push(t)}},save:function(){this.isVisible=!1,this.dialogClose(this.selectList[0])}},watch:{pageNo:function(){this.initTable()}}},d=(i("2WVR"),i("KHd+")),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px",layoutType:1},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticClass:"treeStyle",attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{attrs:{span:20}},[i("el-row",[i("el-radio-group",{staticStyle:{padding:"10px 10px"},on:{change:e.radioChange},model:{value:e.queryType,callback:function(t){e.queryType=t},expression:"queryType"}},[i("el-radio",{attrs:{label:"productId"}},[e._v("相同货品")]),e._v(" "),i("el-radio",{attrs:{label:"productType"}},[e._v("相同货品分类")]),e._v(" "),i("el-radio",{attrs:{label:"warehouseId"}},[e._v("空货位")])],1)],1),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.BaseTableLoading,expression:"BaseTableLoading"}],staticClass:"tableContent",staticStyle:{margin:"0 10px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("el-row",{staticStyle:{height:"100px","text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogChangeWarehouseByIn.vue";t.default=u.exports},WqLC:function(e,t,i){"use strict";var a=i("0VPC");i.n(a).a},WrZY:function(e,t,i){},WtXw:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("xfY5");var a=i("6wnd");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{afterCount:[{required:!0,message:"请填写调整后出库数量！",trigger:"change"},{type:"number",message:"数量必须为数字值"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.beforeCount=this.temp.actualCount),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;e.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateWarehouseOutExecute)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.initData.temp.actualCount=new Number(e.temp.afterCount).toFixed(2),e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"500px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"150px"}},[i("el-form-item",{attrs:{label:"调整前出库数量:",prop:"beforeCount"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{disabled:!0},model:{value:e.temp.beforeCount,callback:function(t){e.$set(e.temp,"beforeCount",t)},expression:"temp.beforeCount"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"调整后出库数量:",prop:"afterCount"}},[i("el-input",{staticStyle:{width:"240px"},model:{value:e.temp.afterCount,callback:function(t){e.$set(e.temp,"afterCount",e._n(t))},expression:"temp.afterCount"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogOutRecordsEdit.vue";t.default=s.exports},WwWg:function(e,t,i){"use strict";i.d(t,"g",function(){return s}),i.d(t,"a",function(){return c}),i.d(t,"h",function(){return u}),i.d(t,"e",function(){return p}),i.d(t,"f",function(){return m}),i.d(t,"c",function(){return h}),i.d(t,"d",function(){return g}),i.d(t,"b",function(){return f});i("rE2o"),i("ioFf"),i("91GP"),i("dRSK"),i("INYr"),i("a1Th"),i("rGqo");var a=i("YP4+"),o=(i("Yfch"),i("evdt")),n=i("z0WU");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){var t=[];return e.hideTitles&&e.hideTitles.length?e.titles.forEach(function(i){var a=function(a){if(!e.hideTitles.some(function(e){return a===e})){var o={prop:a,label:i[a],enLabel:a};t.push(o)}};for(var o in i)a(o)}):e.titles.forEach(function(e){for(var i in e){var a={prop:i,label:e[i],enLabel:i};t.push(a)}}),e.varList&&e.varList.length>0&&e.varList.forEach(function(e){e.rowState="1"}),t}function r(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function c(){return"tempstore"+r()+r()+r()+r()}function d(e,t,i){e.commit("SET_TEMPSTORE",t),e.registerModule(t,i)}function u(e,t){e.commit("CLEAR_TEMPSTORE",t),e.unregisterModule(t)}function p(e){var t={namespaced:!0,state:{clientData:{clientHeight:e.$el?e.$el.parentNode.clientHeight:0,clientWidth:e.$el?e.$el.parentNode.clientWidth:0,rootWidth:e.$root.$el.clientWidth,rootHeight:e.$root.$el.clientHeight},arrowBtn:0,searchBoxHeight:0,dynaHeightState:"1"},getters:{clientData:function(e){return e.clientData},arrowBtn:function(e){return e.arrowBtn},searchBoxHeight:function(e){return e.searchBoxHeight},dynaHeight:function(e){return"1"===e.dynaHeightState?e.searchBoxHeight:0},dynaHeightState:function(e){return e.dynaHeightState}},mutations:{SET_CLIENTDATA:function(e,t){e.clientData=t},SET_ARROWBTN:function(e,t){e.arrowBtn=t},SET_SEARCHHEIGHT:function(e,t){e.searchBoxHeight=t},SET_DYNAHEIGHTSTATE:function(e,t){e.dynaHeightState=t}}};d(e.$store,e.guid,t)}function m(e,t){t.apiName&&t.params&&(e.$store.getters[t.apiName+"/dataList"]?e.$store.getters[t.apiName+"/timeStamp"]<(new Date).getTime()-a.a.dynaSearchTimeStep&&e.$store.dispatch(t.apiName+"/resetDictionarys"):(!function(e,t){var i={namespaced:!0,state:{dataList:[],timeStamp:(new Date).getTime()},getters:{dataList:function(e){return e.dataList},timeStamp:function(e){return e.timeStamp}},mutations:{SET_CASCADERDATA:function(e,t){e.dataList=t},SET_TIMESTAMP:function(e,t){e.timeStamp=t}},actions:{resetDictionarys:function(i){var a=i.commit;e.$api[t.apiName](t.params).then(function(e){a("SET_CASCADERDATA",e.result.options||[]),a("SET_TIMESTAMP",(new Date).getTime())}).catch(function(e){})}}};d(e.$store,t.apiName,i)}(e,t),e.$store.dispatch(t.apiName+"/resetDictionarys")))}function h(e){var t={namespaced:!0,state:{dataTree:{},deleteKey:e.deleteKey,mergedDataTree:{},mergeColumns:[]},getters:{dataTree:function(e){return e.dataTree},deleteKey:function(e){return e.deleteKey},mergedDataTree:function(e){return e.mergedDataTree},mergeColumns:function(e){return e.mergeColumns}},mutations:{SET_MERGECOLUMNS:function(e,t){e.mergeColumns=t},SET_DELETEKEY:function(e,t){e.deleteKey=t},SET_DATATREE:function(e,t){e.dataTree=t},SET_MERGEDDATATREE:function(e,t){e.mergedDataTree=t},DELETE_ROW:function(e,t){var i=t._pid;e.dataTree.tableData.find(function(a){if(a.id===i&&a.children&&a.children.length){var o=a.children.findIndex(function(i){return i[e.deleteKey]===t[e.deleteKey]});o>-1&&a.children.splice(o,1)}})},ADD_ROW:function(e,t){var i=t.parentData.id||t.rowData.pid;e.dataTree.tableData.find(function(e){return e.id===i&&e.children.push(t.rowData),e.id===i})}}};d(e.$store,e.guid,t)}function g(e){var t=!1,i={namespaced:!0,state:{tableData:{},checkedList:[],tableRuleList:[],tableRuleStr:[]},getters:{tableData:function(e){return e.tableData},checkedList:function(e){return e.checkedList},tableRuleList:function(e){return e.tableRuleList},tableRuleStr:function(e){return e.tableRuleStr}},mutations:{SET_TABLERULELIST:function(e,t){t.cb?e.tableRuleList.push(t):e.tableRuleList=e.tableRuleList.filter(function(e){return e.ruleId!==t.ruleId})},SET_TABLERULESTR:function(e,t){t?e.tableRuleStr.push(t):e.tableRuleStr=[]},SET_TABLEDATA:function(e,t){var i=Object(o.b)(t.res,t.vm);e.tableData=i,e.checkedList=[]},UPDATE_CHILDRENTABLEDATA:function(t,i){var a=Object(o.b)(i.res,i.vm);!i.row.titleList&&e.$set(i.row,"titleList",[]),!i.row.children&&e.$set(i.row,"children",[]),!i.row.pageData&&e.$set(i.row,"pageData",{}),i.row.children=a.tableData,i.row.titleList=a.titleList,i.row.pageData=a.pageData},DELETE_TABLEROW:function(e,t){var i=t._internalId||"";i&&function e(t,i){(i.tableData||i.children).find(function(a,o){a&&a.children&&a.children.length&&e(t,a),a&&a._internalId===t&&(i.tableData||i.children).splice(o,1)})}(i,e.tableData)},ADD_TABLEROW:function(e,t){var i=JSON.parse(JSON.stringify(t.data));Array.isArray(i)?(i.forEach(function(e){!e._internalId&&(e._internalId=Object(n.q)()),t.target&&(e._pInternalId=t.target._internalId||"")}),t.target?(i._pInternalId=t.target._internalId,t.target.children=t.target.children.concat(i)):e.tableData.tableData=e.tableData.tableData.concat(i)):"object"===l(i)&&(!i._internalId&&(i._internalId=Object(n.q)()),t.target?(i._pInternalId=t.target._internalId,t.target.children.push(i)):e.tableData.tableData.push(i))},REVISE_DATA:function(e,t){e.tableData.tableData.find(function(e){if(e._internalId===t._internalId)return e=t,!0;e.children&&e.children.length&&function e(t,i){t.find(function(t){if(t._internalId===i._internalId)return t=i,!0;t.children&&t.children.length&&e(t.children,i)})}(e.children,t)})},ADD_CHECKED:function(e,t){t.forEach(function(t){e.checkedList.push(t)})},DELETE_CHECKED:function(e,t){t.forEach(function(t){e.checkedList=e.checkedList.filter(function(e){return e._internalId!==t._internalId})})},REMOVE_CHECKED:function(e){e.checkedList=[]},SET_ROWSTATE:function(e,t){!function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"global"===t.model?i.forEach(function(i){i.rowState=t.state,i.children&&i.children.length&&e(t,i.children)}):t.layer>a?i.forEach(function(i){i.children&&i.children.length&&e(t,i.children,a+1)}):t.layer==a&&i.forEach(function(e){e.rowState=t.state})}(t,e.tableData.tableData,0)},SORE_CHANGE:function(e,i){var a=i.evt,o=i.layer;i.dataName&&"tableData"===i.dataName?e.tableData[i.dataName].splice(a.newIndex,0,e.tableData[i.dataName].splice(a.oldIndex,1)[0]):(t=!1,e.tableData.tableData.forEach(function(e){!t&&e[i.dataName]&&e[i.dataName].length&&function e(i,a,o,n,l){if(a===n){var s=l.find(function(e){if(e._internalId===i[0]._internalId)return t=!0,!0});if(s)return void i.splice(o.newIndex,0,i.splice(o.oldIndex,1)[0])}else n>a&&i.forEach(function(i){!t&&i.children&&i.children.length&&e(i.children,a+1,o,n,l)})}(e[i.dataName],1,a,o,i.dataCopy)}))},UPDATA_TABLEROW:function(e,t){var i=[],a=[];t.forEach(function(t,o){e.tableData.tableData.findIndex(function(e,i){return t.id===e.id})>-1?a.push(t):i.push(t)}),e.tableData.tableData=e.tableData.tableData.filter(function(e){return a.findIndex(function(t){return t.id===e.id})>-1}),i.forEach(function(t){e.tableData.tableData.push(t)})}}};d(e.$store,e.guid,i)}function f(e){var t={namespaced:!0,state:{size:{}},getters:{size:function(e){return e.size}},mutations:{SET_SIZE:function(e,t){e.size=Object.assign({},e.size,t)}}};d(e.$store,e.guid,t)}},X3nM:function(e,t,i){"use strict";i.r(t);i("Oyvg"),i("f3/d");var a=i("2+ib"),o=i("GYtu"),n=i("UHWX"),l={components:{multilevelTable:a.a,dialogOption:o.default},props:["initData","visible"],data:function(){return{parentId:"",tableData:[],tableConfigList:[{customColumn:[{columnIndex:"code",_cellConfig:{hideTitle:!0},width:"150"},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"选择库位",nameEn:"changeWarehouse",method:this.changeWarehouse}]}],apiObj:{apiName:"listPageWarehouseInDetail",params:{fieldCode:"parentCode,productCode,productName,productSpec,productGenreName,productUnitName,count,remark,code",parentId:""}},tempData:{},showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"},{greaterThan:["0",!1]}],message:["不能为空！","请输入大于零的整数或小数","不可等于零！"]}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],apiObj:{apiName:"findWarehouseInExecuteByBySimple",params:{fieldCode:"name,stockCount,count"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!1,isVisible:!1,inDialog:!0}},beforeCreate:function(){},created:function(){this.parentId=this.initData.temp.id,this.tableConfigList[0].apiObj.params.parentId=this.initData.temp.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},getData:function(){this.$refs.customBaseTable.getData()},databridge:function(e){this.tableData=e},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},closeDialog:function(e,t,i){var a=this.findExecuteCountByParentData(t);if("close"!=i){var o={id:"",detailId:"",executorId:"",executorName:"",warehouseId:"",pathName:"",stockCount:null,count:null};if(null!=e&&e.length>0){o.executorId=this.$storage.get("userInfo").userId,o.executorName=this.$storage.get("userInfo").userName,o.detailId=t.id;var n=e[0];o.id=n.id,o.warehouseId=n.warehouseId,o.name=n.name,o.stockCount=n.stockCount,o.count=t.count/1-a+"",this.pushData(o,t)}}this.showDialog=!1},findExecuteCountByParentData:function(e){var t=0;if(null==e||null==e.children||0==e.children.length)return t;for(var i=e.children,a=0;a<i.length;a++){var o=i[a].count+"";null!=o&&o.trim().length>0&&this.isNumberByValue(o.trim())&&(t+=o.trim()/1)}return t},deleteRow:function(e){this.deleteData(e)},findWarehouseByRowData:function(e){var t="";if(null!=e&&null!=e.children&&e.children.length>0)for(var i=e.children,a=0;a<i.length;a++){var o=i[a].warehouseId;null!=o&&o.trim().length>0&&(t=t+o.trim()+",")}return t},changeWarehouse:function(e){var t=this.findWarehouseByRowData(e);this.dialogData.temp=e,this.dialogData.title="选择库位",this.dialogData.isSingle=!0,this.dialogData.tableUrl="/warehouse/warehouseProduct/listPageWarehouseToWarehouseProductBySimple",this.dialogData.tableParm={fieldCode:"name,stockCount",notInWarehouseIds:t,warehouseIsdisable:"1",isNeedAll_productId:e.productId,isNotNeedSpare:"true",isNeedEntity:"true",orderStr:"wp.stock_count desc"},this.openDialogName="dialogOption",this.showDialog=!0,this.inLinVisible=!0},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},checkColumnExecuteBySmall:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.productCode,n=a.productName,l=0;if(null!=a.count)l=a.count+""-0;var s="("+o+","+n+")货品 ",r=a.children;if(null==r||0==r.length)t=s+"无货位执行数据，请至少选择一个库位！";else{for(var c=0,d=0;d<r.length;d++){c+=r[d].count-0}c<l&&(t=s+"执行数量总和必须大于等于入库数量！")}}return t},checkColumnExecuteByBig:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.productCode,n=a.productName,l=0;if(null!=a.count)l=a.count+""-0;for(var s="("+o+","+n+")货品 ",r=0,c=a.children,d=0;d<c.length;d++){r+=c[d].count-0}r>l&&(t=s+"执行数量总和大于入库数量")}return t},save:function(){this.getData(),null!=this.tableData&&this.tableData.length>0&&this.addWarehouseInExecute(this.tableData)},addWarehouseInExecute:function(e){var t=this,i=this.checkColumnExecuteBySmall(e);null!=i&&i.trim().length>0?this.$message({type:"warning",duration:5e3,showClose:!0,message:i}):null!=(i=this.checkColumnExecuteByBig(e))&&i.trim().length>0?this.$confirm(i+"，是否执行入库?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.submitWarehouseInExecute(e)}).catch(function(){t.$message({type:"info",message:"已取消操作"})}):this.submitWarehouseInExecute(e)},submitWarehouseInExecute:function(e){var t=this,i=JSON.stringify(e);Object(n.addWarehouseInExecuteByWc)({parentId:this.parentId,jsonDataStr:i}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}},watch:{}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseByWC_inByWC_dialogExecute0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogExecute.vue";t.default=r.exports},XAWQ:function(e,t,i){"use strict";var a=i("XTNa");i.n(a).a},"XD+e":function(e,t,i){"use strict";i.r(t);i("rGqo"),i("91GP");var a=i("2+ib"),o=(i("z0WU"),i("Ppn9")),n=i("icrm"),l={name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,tempQuery:{},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageBoms",params:{modelCode:"BomProduct",fieldCode:"prodInfo,unitName,code,name",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"prodCode,prodName,prodSpec,productProperty",isdefault:"1",isdisable:"1",isNullAlarm:"true"}},temp:{},showIndex:!0,isSingle:!0,showHeader:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a,dialogAddFromBom:n.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{queryTable:function(){this.tableConfigList[0].apiObj.params.isNullAlarm="false",this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.tempQuery),this.updateData()},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.tableConfigList[0].apiObj.params.isNullAlarm="false",this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.tempQuery),this.updateData()},dialogClose:function(){this.$emit("close-dialog",{resState:"ok",selectList:[]})},nextStep:function(){var e="";this.selectList.forEach(function(t){e+=""==e?"'"+t.id+"'":",'"+t.id+"'"}),""!=e?(this.dialogData.temp=JSON.stringify(this.selectList),this.dialogData.tempLable=this.tempLable,this.dialogData.title="按产品BOM领料",this.openDialogName="dialogAddFromBom",this.showDialog=!0,this.visibleState=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条记录！"})},addProduct:function(){this.selectList.length>0?this.$emit("close-dialog",{resState:"ok",selectList:this.selectList}):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条记录！"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},delete:function(e,t){var i=this;i.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.deleteAttachment)(e).then(function(e){0===e.code&&(i.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),i.updateData())}).catch(function(e){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.dialogClose()},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}},s=(i("FPYt"),i("kvK+"),i("KHd+")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1500px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-row",[i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{model:{value:e.tempQuery.prodCode,callback:function(t){e.$set(e.tempQuery,"prodCode",t)},expression:"tempQuery.prodCode"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{model:{value:e.tempQuery.prodName,callback:function(t){e.$set(e.tempQuery,"prodName",t)},expression:"tempQuery.prodName"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"BOM编码："}},[i("el-input",{model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"BOM名称："}},[i("el-input",{model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:2}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:2}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_produce_materialRequisitionWC_dialogAddProduct10",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:"index"!=this.initData.parent,expression:"this.initData.parent != 'index' "}],attrs:{type:"primary"},on:{click:e.addProduct}},[e._v("确定")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"index"==this.initData.parent,expression:"this.initData.parent == 'index' "}],attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);r.options.__file="dialogAddProduct1.vue";t.default=r.exports},XTNa:function(e,t,i){},XXtD:function(e,t,i){"use strict";t.a={name:"sale-chart-mask",props:{loading:{type:Boolean,default:!1}},render:function(e){return e("div",{style:"position: absolute;top:28px;left:0;right:0;bottom:0"},[e("div",{style:"height:100%;position: relative;"},[e("div",{style:"position: absolute;top: 50%;left: 50%;transform: translate(-50%,-50%);font-size: 16px;"},[this.loading?"":"暂无数据"])])])}}},Xkzr:function(e,t,i){"use strict";i.r(t);i("rGqo");var a=i("WIyV"),o=i("OsNz"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{deliverId:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},isVisible:!1,inDialog:!0,tableData:[],orderDtlList:[],productUnit:{},rowData:{},apiObj:{apiName:"listPageSaleDeliverDetailByPrice",params:{fieldCode:"prodInfo,orderUnitName,orderCount,priceUnitName,priceCount,productPrice,sum",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:this.initData.deliverId,isNeedPage:"false"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"priceUnitName",width:100,componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],message:["此项不能为空！"],outputData:!0}},{columnIndex:"priceCount",width:100,componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"},{greaterThan:["0",!1]}],message:["此项不能为空！","请输入大于零的正整数或(1,2)位小数！","必须大于零！"]}},{columnIndex:"productPrice",width:100,componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+\\.{0,1}[0-9]{0,4}$"},{greaterThan:["0",!1]}],message:["此项不能为空！","请输入大于零的正整数或(1,4)位小数！","必须大于零！"]}},{columnIndex:"sum",width:100,componentName:"input",_cellConfig:{hideTitle:!0,compute:"self@priceCount(*)self@productPrice"}},{columnIndex:"remark",width:120,componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{maxExpectDate:""}}},beforeCreate:function(){},created:function(){this.deliverId=this.initData.deliverId,this.apiObj.params.parentId=this.deliverId},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.setProductSum(this.rowData))},save:function(){this.$refs.editDeliverDtlByPriceDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.saveSaleDeliver(this.orderDtlList)},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o="";null!=a.orderUnit&&(o=a.orderUnit);var n="";null!=a.priceUnit&&(n=a.priceUnit);var l=0;null!=a.priceCount&&(l=a.priceCount/1);var s=0;null!=a.orderCount&&(s=a.orderCount/1),o==n&&l!=s&&(t=t+"第 "+(i+1)+" 行: 结算单位与单位相同，结算数量必须与发货数量相同")}return t},saveSaleDeliver:function(e){var t=this;if(null!=e&&0!=e.length){var i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{var a=[];e.forEach(function(e){var t={id:"",priceUnit:"",priceCount:"",productPrice:"",orderId:"",orderDetaiId:""};t.id=e.id,t.priceUnit=e.priceUnit,t.priceCount=e.priceCount,t.productPrice=e.productPrice,t.orderId=e.orderId,t.orderDetaiId=e.orderDetaiId,a.push(t)});var n=JSON.stringify(a);Object(o.updateSaleDeliverDetailByPrice)({deliverId:this.deliverId,dtlJsonStr:n}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条明细！"})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.productPrice&&(t.productPrice=e.productPrice))},setProductSum:function(e){if(null!=e){e.sum="";var t=e.priceCount,i=e.productPrice;null!=t&&t.trim().length>0&&null!=i&&i.trim().length>0&&(e.sum=(t.trim()*i.trim()).toFixed(2))}},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",[i("el-row",{staticStyle:{padding:"10px"}},[i("custom-base-table",{ref:"editDeliverDtlByPriceDialog",attrs:{"data-custom-table-id":"views_sale_deliver_listDeliverAfterByPrice_dialogDetailEditByPrice0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"editDeliverDtlByPriceDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("el-row",{staticStyle:{height:"100px","text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogDetailEditByPrice.vue";t.default=s.exports},Xxid:function(e,t,i){"use strict";var a=i("8jQw");i.n(a).a},"Y/E/":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("pIFo");var a=i("9WTv");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-add",props:["initData","visible"],components:{},data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{deptName:!0},tempShow:{deptName:!0},rules:{name:[{required:!0,message:"请填写设备名称",trigger:"change"}],typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.selectDataType.defaultSelected.length<=0?a(new Error("请选择设备类型")):a()}}]},selectDataType:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"equipmentType"}},defaultSelected:[]},fileData:{photoDir:"equipment/"},uploadUrl:"/api//fileIO/file/uploadPhoto",imageUrl:""}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.initData.temp.photo&&(this.imageUrl="/api/"+this.initData.temp.photo)),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},typeSelect:function(e,t){e[0]?(this.temp.type=e[0],this.selectDataType.defaultSelected=[e[0]]):(this.temp.type=[],this.selectDataType.defaultSelected=[])},handleAvatarSuccess:function(e){if(0==e.code){var t=e.photo;null!=t&&t.trim().length>0&&(this.temp.photo=t,this.imageUrl="/api/"+t),this.$message({message:"图片上传成功！",type:"success",duration:5e3})}else 0!=e.code&&null!=e.msg&&e.msg.trim().length>0&&this.$message.error(e.msg.trim())},beforeAvatarUpload:function(e){var t=e.type;if(t=t.replace("image/",""),-1!="jpg,jpeg,png".indexOf(t)){e.size>5242880&&this.$message({message:"上传员工照片大小不能超过 5MB!",type:"error",duration:5e3})}else this.$message({message:"上传员工照片只能是(jpg,jpeg,png)格式文件!",type:"error",duration:5e3})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addEquipment)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=(i("/NOw"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticStyle:{height:"90vh"},attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"700px",top:"10vh","custom-class":"listDeliverClass"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{height:"100%",overflow:"auto"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"400px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{staticStyle:{"text-align":"center","padding-bottom":"20px"},attrs:{span:24}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{name:"fileName",action:e.uploadUrl,data:e.fileData,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?i("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.tempShow.deptName,expression:"tempShow.deptName"}],attrs:{label:e.tempLable.deptName+":",prop:"code"}},[i("el-input",{attrs:{disabled:e.tempNotEditable.deptName},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.name+":",prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.spec+":",prop:"spec"}},[i("el-input",{model:{value:e.temp.spec,callback:function(t){e.$set(e.temp,"spec",t)},expression:"temp.spec"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.typeName+":",prop:"typeName"}},[i("base-input-select",{staticStyle:{width:"280px"},attrs:{placeholder:e.tempLable.typeName,data:e.selectDataType.data},on:{callback:e.typeSelect},model:{value:e.selectDataType.defaultSelected,callback:function(t){e.$set(e.selectDataType,"defaultSelected",t)},expression:"selectDataType.defaultSelected"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.supplier+":",prop:"supplier"}},[i("el-input",{model:{value:e.temp.supplier,callback:function(t){e.$set(e.temp,"supplier",t)},expression:"temp.supplier"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.buyDate+":",prop:"buyDate"}},[i("el-date-picker",{staticStyle:{width:"280px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.temp.buyDate,callback:function(t){e.$set(e.temp,"buyDate",t)},expression:"temp.buyDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.remark+":",prop:"remark"}},[i("el-input",{model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},Y29c:function(e,t,i){"use strict";var a=i("9Edw");i.n(a).a},Y893:function(e,t,i){"use strict";var a=i("nSPG");i.n(a).a},YA9F:function(e,t,i){"use strict";i.r(t);i("f3/d");var a={name:"dialog-import-excel",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"文件导入",importUrl:"",exportUrl:"",userInfo:null,excelFileList:[],excelData:{},fieldCode:""}},components:{},beforeCreate:function(){},created:function(){this.initData.title&&(this.title=this.initData.title),this.importUrl="/api/"+this.initData.importUrl,this.initData.excelData&&(this.excelData=this.initData.excelData),this.$storage.get("userInfo")&&(this.excelData.companyId=this.$storage.get("userInfo").companyId,this.excelData.userId=this.$storage.get("userInfo").userId)},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(e){this.$emit("close-dialog",e||{})},importExcelChangeFile:function(e,t){this.excelFileList=[t[t.length-1]]},importExcelBeforeUpload:function(e){null!=this.excelFileList&&this.excelFileList.length>1&&this.$message({showClose:!0,message:"只能选择一个导入文件，请删除多余的导入列表！",type:"warning",duration:5e3});var t=e.name,i="";-1!=t.indexOf(".")&&(i=t.substr(t.indexOf(".")+1,t.length)),-1!="xls,xlsx".indexOf(i)?e.size>10485760&&this.$message({showClose:!0,message:"Excel导入文件大小不能超过 5MB!",type:"error",duration:5e3}):this.$message({showClose:!0,message:"Excel导入文件只能支持(xls,xlsx)格式!",type:"error",duration:5e3})},importExcelSuccess:function(e){this.dialogTopLoading=!1;var t="";null!=e.msg&&e.msg.trim().length>0&&(t=e.msg.trim()),0==e.code?(this.isVisible=!1,this.$message({showClose:!0,message:t,type:"success",duration:5e3}),this.dialogClose({resState:"ok"})):0!=e.code&&this.$message({showClose:!0,message:t,type:"error",duration:0}),this.$refs.upload.clearFiles()},importExcelSubmit:function(){null==this.excelFileList||0!=this.excelFileList.length?(this.dialogTopLoading=!0,this.$refs.upload.submit()):this.$message({showClose:!0,message:"请选择导入文件！",type:"warning",duration:5e3})}},computed:{},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,width:"500px",top:"40px","append-to-body":""},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}],staticStyle:{"text-align":"left","padding-left":"50px","padding-top":"20px","line-height":"20px"}},[i("span",{staticStyle:{"font-size":"16px","padding-bottom":"5px"}},[e._v("操作步骤：")]),i("br"),e._v("\n    1.按示例填写需要导入的数据信息"),i("br"),e._v("\n    2.请将Excel模板中示例信息删除"),i("br"),e._v("\n    3.上传过程中不要多次提交或刷新页面"),i("br"),e._v("\n    4.Excel导入文件只能支持(xls,xlsx)格式，且文件大小不能超过10M"),i("br"),e._v("\n    5.单价列如果是零或者空不变更原单价"),i("br"),e._v(" "),i("div",{staticStyle:{color:"red"}},[e._v("\n      注意：该导入文件必须是(财务-库存查询-导出按钮)执行后的Excel文件并且不可添加行\n    ")]),i("br"),i("br"),e._v(" "),i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"excelFile",action:e.importUrl,"on-change":e.importExcelChangeFile,"before-upload":e.importExcelBeforeUpload,"on-success":e.importExcelSuccess,data:e.excelData,"file-list":e.excelFileList,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"success"},on:{click:e.importExcelSubmit}},[e._v("导入")])],1),e._v(" "),i("br"),i("br")],1)])},[],!1,null,null,null);n.options.__file="dialogImportExcel.vue";t.default=n.exports},YIaj:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("1FtD"),o=i("z0WU"),n={name:"dialog-import-excel",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"文件导入",importUrl:"",exportUrl:"",userInfo:null,excelFileList:[],excelData:{},fieldCode:"warehouseCode,pathName,productCode,productName,productSpec,productGenreName,productUnitName,stockCount"}},components:{},beforeCreate:function(){},created:function(){this.initData.title&&(this.title=this.initData.title),this.importUrl="/api/"+this.initData.importUrl,this.initData.excelData&&(this.excelData=this.initData.excelData),this.$storage.get("userInfo")&&(this.excelData.companyId=this.$storage.get("userInfo").companyId,this.excelData.userId=this.$storage.get("userInfo").userId,this.excelData.warehouseGenre="warehouse")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(e){this.$emit("close-dialog",e||{})},importExcelChangeFile:function(e,t){this.excelFileList=[t[t.length-1]]},importExcelBeforeUpload:function(e){null!=this.excelFileList&&this.excelFileList.length>1&&this.$message({showClose:!0,message:"只能选择一个导入文件，请删除多余的导入列表！",type:"warning",duration:5e3});var t=e.name,i="";if(-1!=t.indexOf(".")&&(i=t.substr(t.indexOf(".")+1,t.length)),-1!="xls,xlsx".indexOf(i)){e.size>10485760&&this.$message({showClose:!0,message:"Excel导入文件大小不能超过 5MB!",type:"error",duration:5e3})}else this.$message({showClose:!0,message:"Excel导入文件只能支持(xls,xlsx)格式!",type:"error",duration:5e3})},importExcelSuccess:function(e){this.dialogTopLoading=!1;var t="";null!=e.msg&&e.msg.trim().length>0&&(t=e.msg.trim()),0==e.code?(this.isVisible=!1,this.$message({showClose:!0,message:t,type:"success",duration:5e3}),this.dialogClose({resState:"ok"})):0!=e.code&&this.$message({showClose:!0,message:t,type:"error",duration:0}),this.$refs.upload.clearFiles()},importExcelSubmit:function(){null==this.excelFileList||0!=this.excelFileList.length?(this.dialogTopLoading=!0,this.$refs.upload.submit()):this.$message({showClose:!0,message:"请选择导入文件！",type:"warning",duration:5e3})},exportExcelFunction:function(){var e=this;Object(a.exportExcelTemplateWarehouseInitial)({fieldCode:this.fieldCode}).then(function(t){Object(o.j)(t,"仓库货品导入.xls"),e.$message({title:"成功",message:"Excel仓库货品导入模板下载成功",type:"success",duration:2e3})}).catch(function(e){})}},computed:{},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,width:"500px",top:"40px","append-to-body":""},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}],staticStyle:{"text-align":"left","padding-left":"50px","padding-top":"20px","line-height":"20px"}},[i("span",{staticStyle:{"font-size":"16px","padding-bottom":"5px"}},[e._v("操作步骤：")]),i("br"),e._v("\n    1."),i("a",{staticStyle:{color:"#169BD5"},on:{click:e.exportExcelFunction}},[e._v("点击此处下载模板")]),i("br"),e._v("\n    2.按示例填写需要导入的数据信息"),i("br"),e._v("\n    3.请将Excel模板中示例信息删除"),i("br"),e._v("\n    4.上传过程中不要多次提交或刷新页面"),i("br"),e._v("\n    5.Excel导入文件只能支持(xls,xlsx)格式，且文件大小不能超过10M"),i("br"),i("br"),e._v(" "),i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"excelFile",action:e.importUrl,"on-change":e.importExcelChangeFile,"before-upload":e.importExcelBeforeUpload,"on-success":e.importExcelSuccess,data:e.excelData,"file-list":e.excelFileList,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"success"},on:{click:e.importExcelSubmit}},[e._v("导入")])],1),e._v(" "),i("br"),i("br")],1)])},[],!1,null,null,null);s.options.__file="dialogImportExcel.vue";t.default=s.exports},YOPT:function(e,t,i){"use strict";var a=i("3HQu");i.n(a).a},YPdf:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},isShowDept:!1,isShowCust:!1,rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,DepartmentDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择部门",treeUrl:"/system/department/treeDepartments",treeParm:{},tableUrl:"/system/department/listPageDepartments",tableParm:{isdisable:"1",fieldCode:"code,name,deptTypeName,layer,parentName,remark"},temp:{}},dialogName:"dialogTreeOption"}},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择客户",treeUrl:"/system/dictionary/treeDictionarys",treeParm:{dictionaryKey:"customerSupplierGenre"},tableUrl:"/base/customer/listPageCustomers",tableParm:{},temp:{}},dialogName:"dialogTreeOption"}},formTemp:[]}},created:function(){this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{changeVirtualGenre:function(){"1"==this.temp.virtualGenre?(this.isShowDept=!0,this.isShowCust=!1):"2"==this.temp.virtualGenre&&(this.isShowCust=!0,this.isShowDept=!1)},departmentSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualDeptId=e[0].id,this.temp.virtualDeptName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},customerSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualCustomerId=e[0].id,this.temp.virtualCustomerName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},dialogOpen:function(){var e=this;this.temp.virtualGenre="1",this.isShowDept=!0,this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addWarehouseByVirtual)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:e.tempLable.virtualGenreName+":",prop:"virtualGenreName"}},[i("el-select",{attrs:{placeholder:e.tempLable.virtualGenreName},on:{change:e.changeVirtualGenre},model:{value:e.temp.virtualGenre,callback:function(t){e.$set(e.temp,"virtualGenre",t)},expression:"temp.virtualGenre"}},[i("el-option",{attrs:{label:"内部单位",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"外部单位",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowDept,expression:"isShowDept"}],attrs:{label:"部门名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DepartmentDialog.dialog},on:{callback:e.departmentSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowCust,expression:"isShowCust"}],attrs:{label:"客户名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseVirtualAdd.vue";t.default=s.exports},YVgj:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("We3Z");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{initialPeriodDate:null,paymentPeriodDate:null,rules:{amount:[{required:!0,trigger:"change",validator:function(t,i,a){e.isNumberByValue(i)?(0==i&&a(new Error("请输入大于零的正整数或(1,2)位小数！")),a()):a(new Error("请输入大于零的正整数或(1,2)位小数！"))}}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.initData.rowData&&(this.formData=this.initData.rowData,this.initialPeriodDate=new Date(this.initData.rowData.initialPeriodDate),null!=this.initData.rowData.paymentPeriodDate&&(this.paymentPeriodDate=new Date(this.initData.rowData.paymentPeriodDate)))},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){e.$confirm("是否提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.formData.isAutoCommit="true",Object(a.eidtFinanceBill)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"设定成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.formData.isAutoCommit="false",Object(a.eidtFinanceBill)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"设定成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})})},closeDialog:function(e){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"客户编码:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.customerCode,callback:function(t){e.$set(e.formData,"customerCode",t)},expression:"formData.customerCode"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"客户名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.customerName,callback:function(t){e.$set(e.formData,"customerName",t)},expression:"formData.customerName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"金额:",prop:"amount"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},YXsa:function(e,t,i){},YfE7:function(e,t,i){"use strict";var a=i("EFeR");i.n(a).a},YfbJ:function(e,t,i){"use strict";var a=i("AvBW");i.n(a).a},Yo6V:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("pIFo"),i("Oyvg");var a=i("xMja");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-edit",props:["initData","visible"],data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写货品名称",trigger:"change"}],spec:[{required:!0,message:"请填写规格型号",trigger:"change"}],unitName:[{required:!0,trigger:"change",validator:function(t,i,a){e.unitData.defaultSelected.length<=0?a(new Error("请选择计量单位")):a()}}],validityDays:[{type:"number",trigger:"change",validator:function(e,t,i){t<0?i(new Error("保质期必须大于零")):i()}}]},actionUrl:"",imageUrl:"",fileData:{photoDir:"product/"},unitData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"productUnit",isglobal:"0"}},defaultSelected:[]},lastUnitData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"productUnit",isglobal:"0"}},defaultSelected:[]},productTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"productType",isglobal:"0"}},defaultSelected:[]},productGenreData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"productGenre",isglobal:"1"}},defaultSelected:[]},formTemp:[]}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.validityDays||(this.temp.validityDays=0)),this.initData.tempLable&&(this.tempLable=this.initData.tempLable),this.temp.photo?this.imageUrl="/api/"+this.temp.photo:this.imageUrl="",this.temp.genre=this.initData.temp.genre,this.temp.genreName=this.initData.temp.genreName},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{unitSelect:function(e){this.temp.unit=e[0]},lastUnitSelect:function(e){this.temp.lastUnit=e[0]},productTypeSelect:function(e){this.temp.type=e[0]},productGenreSelect:function(e){this.temp.genre=e[0]},checkPrice:function(e){new RegExp("^[0-9]+\\.{0,1}[0-9]{0,2}$").test(e)||this.$message({message:"单价:"+e+" 输入错误，请输入大于零的正整数或(1,2)位小数！",type:"warning",duration:5e3})},dialogOpen:function(){var e=this;this.actionUrl="/api//fileIO/file/uploadPhoto",this.unitData.defaultSelected=[],this.unitData.defaultSelected.push(this.temp.unit),this.lastUnitData.defaultSelected=[],this.lastUnitData.defaultSelected.push(this.temp.lastUnit),this.productTypeData.defaultSelected=[],this.productTypeData.defaultSelected.push(this.temp.type),this.productGenreData.defaultSelected=[],this.productGenreData.defaultSelected.push(this.temp.genre);var t=this.temp.prodPropertyJsonStr;null!=t&&t.trim().length>0&&(this.formTemp=JSON.parse(t)),this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},formListResult:function(e){var t="";null!=e&&e.length>0&&(t=JSON.stringify(e)),this.temp.prodProperty=t},save:function(){var e=this;this.$refs.dynaForm.getFormList(),e.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateProduct)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},handleAvatarSuccess:function(e){if(0==e.code){var t=e.photo;null!=t&&t.trim().length>0&&(this.temp.photo=t,this.imageUrl="/api/"+t),this.$message({message:"图片上传成功！",type:"success",duration:5e3})}else 0!=e.code&&null!=e.msg&&e.msg.trim().length>0&&this.$message.error(e.msg.trim())},beforeAvatarUpload:function(e){var t=e.type;if(t=t.replace("image/",""),-1!="jpg,jpeg,png".indexOf(t)){e.size>5242880&&this.$message({message:"上传员工照片大小不能超过 5MB!",type:"error",duration:5e3})}else this.$message({message:"上传员工照片只能是(jpg,jpeg,png)格式文件!",type:"error",duration:5e3})}}},l=(i("apiY"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticStyle:{height:"90vh"},attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"620px",top:"10vh","custom-class":"listDeliverClass"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{height:"100%",overflow:"auto"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{staticStyle:{"padding-left":"150px"},attrs:{span:12}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{name:"fileName",action:e.actionUrl,data:e.fileData,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?i("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"货品编码:",prop:"code"}},[i("el-input",{staticStyle:{width:"165px"},attrs:{disabled:!0},model:{value:e.temp.sysCode,callback:function(t){e.$set(e.temp,"sysCode",t)},expression:"temp.sysCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"货品名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"165px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"货品属性:",prop:"genreName"}},[i("base-input-select",{staticStyle:{width:"165px"},attrs:{data:e.productGenreData.data},on:{callback:e.productGenreSelect},model:{value:e.productGenreData.defaultSelected,callback:function(t){e.$set(e.productGenreData,"defaultSelected",t)},expression:"productGenreData.defaultSelected"}})],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"企业货品编码:",prop:"sourceCode"}},[i("el-input",{model:{value:e.temp.sourceCode,callback:function(t){e.$set(e.temp,"sourceCode",t)},expression:"temp.sourceCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"图号:",prop:"pictureCode"}},[i("el-input",{model:{value:e.temp.pictureCode,callback:function(t){e.$set(e.temp,"pictureCode",e._n(t))},expression:"temp.pictureCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"规格型号:",prop:"spec"}},[i("el-input",{model:{value:e.temp.spec,callback:function(t){e.$set(e.temp,"spec",t)},expression:"temp.spec"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"货品类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.productTypeData.data},on:{callback:e.productTypeSelect},model:{value:e.productTypeData.defaultSelected,callback:function(t){e.$set(e.productTypeData,"defaultSelected",t)},expression:"productTypeData.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"库存数量:",prop:"stockCount"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.stockCount,callback:function(t){e.$set(e.temp,"stockCount",t)},expression:"temp.stockCount"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"保质期(天):",prop:"validityDays"}},[i("el-input",{model:{value:e.temp.validityDays,callback:function(t){e.$set(e.temp,"validityDays",e._n(t))},expression:"temp.validityDays"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1),e._v(" "),i("el-row",[i("div",{staticStyle:{height:"200px"}},[i("dyna-form",{ref:"dynaForm",attrs:{formTemp:e.formTemp,props:{key:"name",value:"value"}},on:{"sent-list":e.formListResult}})],1)])],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},Yt3B:function(e,t,i){"use strict";i.r(t);i("f3/d"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("t3Un")),l=i("HhAy"),s={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageProducts",params:{fieldCode:"prodInfo,unitName,genreName,remark",prodColumnKey:"code,name,spec,property",isNeedNotInGenreSpare:"true",notInProductIds:"'"+this.initData.temp.prodId+"'"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[{columnIndex:5,prop:"ratio",label:"用料比例",componentName:"input",width:120,_cellConfig:{rules:[{regexp:/\d/g},{greaterThan:["0",!1]}],message:["必须为数字！","必须大于零！"]}}],hideColumns:["remark"],tableSelectList:[]}},created:function(){this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{tableSelectList:this.tableSelectList})},closeDialog:function(e){this.showDialog=!1},tableSelected:function(e){this.tableSelectList=e,this.save(e)},save:function(e){var t=this,i=[];if(e&&e.length>0){for(var a=0;a<e.length;a++){var o={prodId:"",ratio:"",bomId:"",parentProdId:"",pathId:"",bomTreeId:"",layer:""};if(o.prodId=e[a].id,!e[a].ratio)return void this.$message({type:"error",message:"请输入用料比例！"});o.ratio=e[a].ratio,o.bomId=this.initData.temp.bomId,o.parentProdId=this.initData.temp.prodId,o.pathId=this.initData.temp.pathId,o.bomTreeId=this.initData.temp.id,o.layer=this.initData.temp.layer,o.isreplaceable="1",i.push(o)}var n=JSON.stringify(i);t.dialogLoading=!0,Object(l.addBomTrees)({dtlJsonStr:n}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}},confrim:function(){this.$refs.trabsferTables.getTableSelected()},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},initTree:function(){var e=this;e.dialogLoading=!0,Object(n.a)({url:"/system/dictionary/treeDictionarys",method:"post",data:{dictionaryKey:"productGenre",isNotNeedName:"true",nameValue:"备件"}}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name},t.push(i),this.treeData=t,this.dialogLoading=!1},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.tempQuery.pid=this.selectTree.id,this.tempQuery.layer=this.selectTree.layer,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogReplaceableAdd.vue";t.default=c.exports},YwKm:function(e,t,i){"use strict";var a=i("5Gme");i.n(a).a},Z1wF:function(e,t,i){"use strict";var a=i("6aE2");i.n(a).a},Z3I7:function(e,t,i){"use strict";var a=i("URPc");i.n(a).a},ZItt:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("pIFo");var a=i("9WTv");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-add",props:["initData","visible"],components:{},data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{deptName:!0,code:!0},tempShow:{deptName:!0},rules:{name:[{required:!0,message:"请填写设备名称",trigger:"change"}],typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.selectDataType.defaultSelected.length<=0?a(new Error("请选择设备类型")):a()}}]},selectDataType:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"equipmentType"}},defaultSelected:[]},fileData:{photoDir:"equipment/"},uploadUrl:"/api//fileIO/file/uploadPhoto",imageUrl:""}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.initData.temp.photo&&(this.imageUrl="/api/"+this.initData.temp.photo),this.initData.temp.type&&(this.selectDataType.defaultSelected=[this.initData.temp.type])),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},typeSelect:function(e,t){e[0]?(this.temp.type=e[0],this.selectDataType.defaultSelected=[e[0]]):(this.temp.type=[],this.selectDataType.defaultSelected=[])},handleAvatarSuccess:function(e){if(0==e.code){var t=e.photo;null!=t&&t.trim().length>0&&(this.temp.photo=t,this.imageUrl="/api/"+t),this.$message({message:"图片上传成功！",type:"success",duration:5e3})}else 0!=e.code&&null!=e.msg&&e.msg.trim().length>0&&this.$message.error(e.msg.trim())},beforeAvatarUpload:function(e){var t=e.type;if(t=t.replace("image/",""),-1!="jpg,jpeg,png".indexOf(t)){e.size>5242880&&this.$message({message:"上传员工照片大小不能超过 5MB!",type:"error",duration:5e3})}else this.$message({message:"上传员工照片只能是(jpg,jpeg,png)格式文件!",type:"error",duration:5e3})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateEquipment)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=(i("oBi7"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticStyle:{height:"90vh"},attrs:{title:e.initData.title?e.initData.title:"修改",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"700px",top:"10vh","custom-class":"listDeliverClass"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{height:"100%",overflow:"auto"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"400px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{staticStyle:{"text-align":"center","padding-bottom":"20px"},attrs:{span:24}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{name:"fileName",action:e.uploadUrl,data:e.fileData,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?i("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.tempShow.deptName,expression:"tempShow.deptName"}],attrs:{label:e.tempLable.deptName+":",prop:"code"}},[i("el-input",{attrs:{disabled:e.tempNotEditable.deptName},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.code+":",prop:"code"}},[i("el-input",{attrs:{disabled:e.tempNotEditable.code},model:{value:e.temp.code,callback:function(t){e.$set(e.temp,"code",t)},expression:"temp.code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.name+":",prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.spec+":",prop:"spec"}},[i("el-input",{model:{value:e.temp.spec,callback:function(t){e.$set(e.temp,"spec",t)},expression:"temp.spec"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.typeName+":",prop:"typeName"}},[i("base-input-select",{staticStyle:{width:"280px"},attrs:{placeholder:e.tempLable.typeName,data:e.selectDataType.data},on:{callback:e.typeSelect},model:{value:e.selectDataType.defaultSelected,callback:function(t){e.$set(e.selectDataType,"defaultSelected",t)},expression:"selectDataType.defaultSelected"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.supplier+":",prop:"supplier"}},[i("el-input",{model:{value:e.temp.supplier,callback:function(t){e.$set(e.temp,"supplier",t)},expression:"temp.supplier"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.buyDate+":",prop:"buyDate"}},[i("el-date-picker",{staticStyle:{width:"280px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.temp.buyDate,callback:function(t){e.$set(e.temp,"buyDate",t)},expression:"temp.buyDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.remark+":",prop:"remark"}},[i("el-input",{model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},ZKrj:function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=i("vleD"),n=i("Qe0A"),l={components:{multilevelTable:a.a,dialogOption:o.default},props:["initData","visible"],data:function(){return{parentId:"",tableData:[],tableConfigList:[{customColumn:[{columnIndex:"code",_cellConfig:{hideTitle:!0},width:"150"},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"选择库位",nameEn:"changeWarehouse",method:this.changeWarehouse}]}],apiObj:{apiName:"listPageWarehouseOutDetailsExecuteBySimple",params:{secondFieldCode:"warehouseName,stockCount,suggestCount",parentId:"",detailState:"1"}},tempData:{},showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"suggestCount",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"},{lessThan:["self@stockCount",!0]}],message:["不能为空！","请输入大于零的整数或小数","必须小于库存数量！"]}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}]}],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!1,isVisible:!1,inDialog:!0}},beforeCreate:function(){},created:function(){this.parentId=this.initData.temp.id,this.tableConfigList[0].apiObj.params.parentId=this.initData.temp.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},getData:function(){this.$refs.customBaseTable.getData()},databridge:function(e){this.tableData=e},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},closeDialog:function(e,t,i){if("close"!=i){var a={id:"",warehouseName:"",code:"",stockCount:"",suggestCount:"0.00"};if(null!=e&&e.length>0){var o=e[0];a.id=o.id,a.code=o.code,a.warehouseName=o.warehouseName,a.stockCount=o.stockCount,this.pushData(a,t)}}this.showDialog=!1},deleteRow:function(e){this.deleteData(e)},findWarehouseByRowData:function(e){var t="";if(null!=e&&null!=e.children&&e.children.length>0)for(var i=e.children,a=0;a<i.length;a++){var o=i[a].warehouseId;null!=o&&o.trim().length>0&&(t=t+o.trim()+",")}return t},changeWarehouse:function(e){var t=this.findWarehouseByRowData(e);this.dialogData.temp=e,this.dialogData.title="选择库位",this.dialogData.isSingle=!1,this.dialogData.tableUrl="/warehouse/warehouseProduct/listPageWarehouseProductsDispatchOptionBySimple",this.dialogData.tableParm={fieldCode:"warehouseName,stockCount",notInWarehouseIds:t,productId:e.productId,stockCountQuery:"stockCountGreaterThanZero",isNotNeedSpare:"true",isNeedEntity:"true"},this.openDialogName="dialogOption",this.showDialog=!0,this.inLinVisible=!0},checkColumnExecuteByBig:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.productCode,n=a.productName,l=0;if(null!=a.count)l=(a.count+"")/1;for(var s="("+o+","+n+")货品 ",r=0,c=a.children,d=0;d<c.length;d++){r+=c[d].suggestCount/1}r>l&&(t=s+"建议取货数量总和不可大于出库数量")}return t},save:function(){if(this.getData(),null!=this.tableData&&this.tableData.length>0){var e=this.checkColumnExecuteByBig(this.tableData);if(null!=e&&e.trim().length>0)return void this.$message({type:"warning",duration:5e3,showClose:!0,message:e});this.submitWarehouseOutExecute(this.tableData)}},submitWarehouseOutExecute:function(e){var t=this,i=JSON.stringify(e);Object(n.executeWarehouseOutExecuteBySimple)({jsonDataStr:i}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}},watch:{}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseBySimple_outBySimple_dialogExecute0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogExecute.vue";t.default=r.exports},ZPH7:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("BUpD");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{initialPeriodDate:null,paymentPeriodDate:null,rules:{recevieType:[{required:!0,message:"请选择收款类型",trigger:"change"}],amount:[{required:!0,trigger:"change",validator:function(t,i,a){e.isNumberByValue(i)?(0==i&&a(new Error("请输入大于零的正整数或(1,2)位小数！")),a()):a(new Error("请输入大于零的正整数或(1,2)位小数！"))}}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.initData.rowData&&(this.formData=this.initData.rowData,this.initialPeriodDate=new Date(this.initData.rowData.initialPeriodDate),null!=this.initData.rowData.paymentPeriodDate&&(this.paymentPeriodDate=new Date(this.initData.rowData.paymentPeriodDate)))},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},save:function(){var e=this;this.$refs.submitForm.validate(function(t){e.formData.type="1",e.dialogLoading=!0,Object(a.addFinanceBase)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"设定成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})})},closeDialog:function(e){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"供应商名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.customerName,callback:function(t){e.$set(e.formData,"customerName",t)},expression:"formData.customerName"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"收款类型:",prop:"recevieType"}},[i("el-select",{model:{value:e.formData.recevieType,callback:function(t){e.$set(e.formData,"recevieType",t)},expression:"formData.recevieType"}},[i("el-option",{attrs:{label:"应付款",value:"plus"}}),e._v(" "),i("el-option",{attrs:{label:"预付款",value:"minus"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"期初金额:",prop:"amount"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},ZYLg:function(e,t,i){},ZaSj:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}],entityTypeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.entityTypeData.defaultSelected.length<=0?a(new Error("请选择仓库类型")):a()}}]},entityTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseType",isglobal:"1"}},defaultSelected:[]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",fullscreen:!1,tempLable:null},formTemp:[]}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{entityTypeSelect:function(e){e[0]?(this.temp.entityType=e[0],this.entityTypeData.defaultSelected=[e[0]]):(this.temp.entityType=[],this.entityTypeData.defaultSelected=[])},dialogOpen:function(){var e=this;this.entityTypeData.defaultSelected=[],this.entityTypeData.defaultSelected.push(this.temp.entityType),this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateWarehouseByEntity)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"仓库性质:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{value:"实体库",readonly:!0}})],1),e._v(" "),i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.entityTypeName+":",prop:"entityTypeName"}},[i("base-input-select",{attrs:{data:e.entityTypeData.data},on:{callback:e.entityTypeSelect},model:{value:e.entityTypeData.defaultSelected,callback:function(t){e.$set(e.entityTypeData,"defaultSelected",t)},expression:"entityTypeData.defaultSelected"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseEntityEdit.vue";t.default=s.exports},Zg8z:function(e,t,i){"use strict";i.r(t);i("91GP");var a=i("asQK"),o=i("/S0c"),n={name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null},activeName:0,tabs:[{label:"明细表",btns:[],componentName:"multilevelTable",tableConfigList:[{customColumn:[{columnIndex:"warehouseOutCode",width:"150",_cellConfig:{hideTitle:!0}},{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",width:"160",component:[{name:"调整套数",nameEn:"editSetCount",editBtns_isShow:!0,method:this.editSetCount}]}],apiObj:{apiName:"listPageMaterialRequisition",params:{fieldCode:"warehouseOutCode,prodInfo,unitName,deptName,makeName,cdate,setCount",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",ids:"'"+this.initData.temp.id+"'",orderStr:" warehouseOut.cdate desc "}},tempData:{},showHeader:!0,showIndex:!1,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",showExpandBtn:!1,rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"prodInfo,productUnitName,count,executeCount,remark",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",typeName:"领料明细",isNeedPage:"false"}},dynamicValue:{parentId:"self@warehouseOutId"},tempData:{},showIndex:!0,componentId:"twoLevelTable",dragTable:!1}]},{label:"汇总表",btns:[],componentName:"multilevelTable",tableConfigList:[{customColumn:[{columnIndex:"code",width:"150",_cellConfig:{hideTitle:!0}},{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageMaterialRequisitionGroup",params:{fieldCode:"code,prodInfo,unitName,setCount",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",ids:"'"+this.initData.temp.id+"'"}},tempData:{},showHeader:!0,showIndex:!1,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",showExpandBtn:!1,rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageMaterialRequisitionGroupDetail",params:{fieldCode:"prodInfo,productUnitName,count,executeCount,remark",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",typeName:"领料明细",isNeedPage:"false"}},dynamicValue:{businessCode:"self@code"},tempData:{},showIndex:!0,componentId:"twoLevelTable",dragTable:!1}]}]}},components:{multiLabelTable:a.a,dialogEditSetCount:o.default},created:function(){this.title=this.initData.title},beforeCreate:function(){},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},sendTabsKey:function(e){this.activeName=e},refresh:function(){this.activeName>-1&&(this.tabs[this.activeName].tableConfigList[0].apiObj.params=Object.assign({},this.tabs[this.activeName].tableConfigList[0].apiObj.params,this.searchObj))},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&(e.selectList?e.selectList.length>0&&this.pushData(e.selectList):this.dialogClose())},databridge:function(e){this.selectList=e},editSetCount:function(e){this.dialogData.temp=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="调整套数",this.openDialogName="dialogEditSetCount",this.showDialog=!0,this.visibleState=!0}},computed:{dialogName:function(){return this.openDialogName}},watch:{}},l=(i("RM+A"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("el-row",{staticStyle:{"margin-left":"5%","margin-top":"10px"},style:{width:"90%"}},[i("multi-label-table",{attrs:{tabs:e.tabs},on:{tabsKey:e.sendTabsKey,databridge:e.databridge,callmethod:e.callMethod}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogMaterialRequisitionRecord.vue";t.default=s.exports},Zp4M:function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseInDetail",params:{fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,remark",parentId:""}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseInExecute",params:{fieldCode:"pathName,count,executeUserName,executeTimeStr",isNeedPage:"false"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){this.tableConfigList[0].apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},databridge:function(e){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_purchaseInWC_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogView.vue";t.default=n.exports},ZpXq:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("xfY5");var a=i("wW0j");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{afterCount:[{required:!0,message:"请填写调整后出库数量！",trigger:"change"},{type:"number",message:"数量必须为数字值"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.beforeCount=this.temp.actualCount),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;e.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateWarehouseMoveExecute)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.initData.temp.actualCount=new Number(e.temp.afterCount).toFixed(2),e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"500px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"150px"}},[i("el-form-item",{attrs:{label:"调整前出库数量:",prop:"beforeCount"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{disabled:!0},model:{value:e.temp.beforeCount,callback:function(t){e.$set(e.temp,"beforeCount",t)},expression:"temp.beforeCount"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"调整后出库数量:",prop:"afterCount"}},[i("el-input",{staticStyle:{width:"240px"},model:{value:e.temp.afterCount,callback:function(t){e.$set(e.temp,"afterCount",e._n(t))},expression:"temp.afterCount"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogMoveRecordsEdit.vue";t.default=s.exports},ZtFv:function(e,t,i){},ZxeC:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("Qe0A"),l=i("a0Xs"),s=i("wk8/");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",parentId:""}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1",notInids:"'def4b13175dc44b08d7a0315b811700e'"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(l.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={id:l.id,productId:l.productId,remark:l.remark,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.temp.type=this.typeData.defaultSelected[0],this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.updateWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){var t=this;e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]),this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"5"},-1!="9459be975cd94ada8443cdf32f52c2be".indexOf(type)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}):-1!="4cba5d3815644b26920777512a20474b".indexOf(type)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}),"f2b0aaceff914acd8636700a111ca8f0"==type&&Object(s.findUserDepartmentBySystemUser)({userId:this.temp.makeId}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,"f2b0aaceff914acd8636700a111ca8f0"==type&&Object(s.findUserDepartmentBySystemUser)({userId:this.temp.makeId}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouseBySimple_outBySimple_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},ZzlB:function(e,t,i){"use strict";i.r(t);var a=i("WIyV"),o=i("BEur"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",supplierId:"",isAutoCommit:"",dtlJsonStr:""},tableData:[],editData:[],apiObj:{apiName:"listPageAssistRetreatDetailEditByProduct",params:{fieldCode:"prodInfo,orderUnitName,deliverCount,retreatCount,discardCount,maxRetreatCount,orderCount",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:""}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"orderCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{lessThan:["self@maxRetreatCount",!0]}],message:["请输入大于零的正整数或(1,2)位小数！","不可大于最大退料数！"]}}]}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.formData.id=e.id,this.formData.supplierId=e.supplierId,this.apiObj.params.parentId=e.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.editData=[],this.editData=e)},getData:function(){this.$refs.customBaseTable.getData()},save:function(){this.editData=[],this.getData(),this.saveSaleOrder(this.editData)},saveSaleOrder:function(e){for(var t=this,i=[],a=0;a<e.length;a++){var n=e[a],l={orderId:n.orderId,orderDtlId:n.orderDtlId,deliverDtlChildId:n.deliverDtlChildId,deliverDtlId:n.deliverDtlId,deliverId:n.deliverId,productId:n.productId,orderUnit:n.orderUnit,orderCount:n.orderCount};i.push(l)}this.formData.dtlJsonStr="",null!=i&&i.length>0&&(this.formData.dtlJsonStr=JSON.stringify(i)),this.$confirm("是否将该退料单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.formData.isAutoCommit="true",Object(o.updateAssistRetreat)(t.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.formData.isAutoCommit="false",Object(o.updateAssistRetreat)(t.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"selectAssistProductBySupplier"==e.pageName){var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByAssistProduct(t)}else if(null!=e&&"selectAssistPlanByOrder"==e.pageName){var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelectedByAssistPlan(i)}},tableSelectedByAssistProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={assistProductName:i.assistProductName,craftName:i.craftName,orderUnitName:i.productUnitName,price:i.price,lossRatio:i.lossRatio,assistProductId:i.assistProductId,orderUnit:i.productUnit};this.tableData.push(a)}},tableSelectedByAssistPlan:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={assistProductName:i.assistProductName,craftName:i.craftName,orderUnitName:i.orderUnitName,expectDate:i.planDate,planCode:i.planCode,planDetailId:i.planDtlId,price:i.price,lossRatio:i.lossRatio,assistProductId:i.assistProductId,orderUnit:i.orderUnit};this.tableData.push(a)}}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistRetreat_listAssistRetreat_dialogEdit0",varList:e.tableData,showIndex:!1,showTableSet:!1,showCheckBox:!1,useDefaultBtn:!0,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},a4AW:function(e,t,i){},a5Lk:function(e,t,i){"use strict";i.r(t);var a=i("8UwL"),o={name:"dialog-edit",props:["initData","visible"],data:function(){return{formData:{id:"",remark:""},dialogLoading:!0,isVisible:!1,inDialog:!0,rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){var e=this.initData.rowData;this.formData.id=e.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.auditDisagreeAssistOrder)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center","padding-bottom":"10px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);l.options.__file="dialogAuditDisagree.vue";t.default=l.exports},aAJ4:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("/Z8G");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{maintainUserName:[{required:!0,trigger:"change",message:"请选择保养人"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{maintainId:"",maintainUser:"",maintainUserName:"",maintainDescribe:""},UserDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.formData.maintainUser=e.userId,this.formData.maintainUserName=e.userName,this.formData.maintainId=this.initData.maintainId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},userSelect:function(e){e[0]&&(this.formData.maintainUser=e[0].id,this.formData.maintainUserName=e[0].name)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.maintainReceive)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){}))})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto",width:"100%"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"保养人:",prop:"maintainUserName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.UserDialog.dialog},on:{callback:e.userSelect},model:{value:e.formData.maintainUserName,callback:function(t){e.$set(e.formData,"maintainUserName",t)},expression:"formData.maintainUserName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"保养描述:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.maintainDescribe,callback:function(t){e.$set(e.formData,"maintainDescribe",t)},expression:"formData.maintainDescribe"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogMaintainReceive.vue";t.default=s.exports},aCQO:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("xfY5");var a=i("R1DK");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{afterCount:[{required:!0,message:"请填写调整后数量！",trigger:"change"},{type:"number",message:"数量必须为数字值"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.beforeCount=this.initData.temp.stockCount)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,Object(a.updateWarehouseProduct)(t.temp).then(function(i){t.dialogLoading=!1,0===i.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,e.initData.temp.stockCount=new Number(t.temp.afterCount).toFixed(2),t.dialogClose({resState:"ok",afterCount:new Number(t.temp.afterCount).toFixed(2)}))}).catch(function(e){t.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"安全库存调整",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"150px"}},[i("el-form-item",{attrs:{label:"调整前库存数量:",prop:"beforeCount"}},[i("el-input",{staticStyle:{width:"140px"},attrs:{disabled:!0},model:{value:e.temp.beforeCount,callback:function(t){e.$set(e.temp,"beforeCount",t)},expression:"temp.beforeCount"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"调整后库存数量:",prop:"afterCount"}},[i("el-input",{staticStyle:{width:"140px"},model:{value:e.temp.afterCount,callback:function(t){e.$set(e.temp,"afterCount",e._n(t))},expression:"temp.afterCount"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogStock.vue";t.default=s.exports},aUBR:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("91GP"),i("pIFo");var a=i("f/WR"),o=i("uTIz");i("R1DK");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{transferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{isConfirm:!1,tempLable:{},rules:{},guid:"",tempQuery:{},searchList:[{label:"货品编码",type:"input",ruleType:"string",mapKey:"code",configs:{},placeholder:"请输入货品编码"},{label:"货品名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"请输入货品名称"},{label:"规格型号",type:"input",ruleType:"string",mapKey:"spec",configs:{},placeholder:"请输入规格型号"},{label:"计量单位",type:"input",ruleType:"string",mapKey:"unitName",configs:{},placeholder:"请输入计量单位"}],searchConfig:{hideSearchSwitch:!1},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},pageData:null,pageNo:1,btnList:[{name:"确定",isShow:!0,state:!0,method:this.toAddWarehouseIn},{name:"取消",state:!1,method:this.closeWin,isShow:!0}],apiData:{apiName:"findListProductByWarehouseVirtual",params:{fieldCode:"productCode,productName,productSpec,productUnitName,productGenreName,stockCount",notInProductIds:"",deptId:"",deptPlaceKey:""}},tableSelectList:[],stateBtnData:{},tableConfigs:{showIndex:!0},tempList:[]}},created:function(){var e="";if(null!=this.initData.data&&this.initData.data.length>0)for(var t=0;t<this.initData.data.length;t++){var i=this.initData.data[t];null!=i.productId&&i.productId.trim().length>0&&(e=e+i.productId+",")}var a=!0;null!=this.initData.isNeedRepeat&&(a=this.initData.isNeedRepeat),a||null!=e&&e.trim().length>0&&(e="'"+(e=e.substring(0,e.lastIndexOf(","))).replace(",","','")+"'",this.apiData.params.notInProductIds=e),this.apiData.params.deptId=this.$storage.get("userInfo").deptId,this.apiData.params.deptPlaceKey="a42f32ef9d39476e932e1e30b77fefbb"},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{tableHeight:function(){},dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.apiData.params=Object.assign({},e),this.apiData.params.fieldCode=this.fieldCode},dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{pageName:"selectProductByVirtual",isConfirm:this.isConfirm,selectList:this.tempList})},toAddWarehouseIn:function(){this.isConfirm=!0,this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},tableSelected:function(e){this.tempList=e},closeDialog:function(e){this.showDialog=!1}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{width:"100%"}},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,searchConfig:e.searchConfig},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{staticStyle:{height:"500px"},style:{"margin-top":e.searchList.length?"10px":"0"}},[i("transfer-table",{ref:"trabsferTables",attrs:{tableConfigs:e.tableConfigs,btnList:e.btnList,stateBtn:e.stateBtnData,apiData:e.apiData},on:{"table-selected":e.tableSelected}})],1)],1)],1)},[],!1,null,null,null);r.options.__file="selectProductByVirtual.vue";t.default=r.exports},abxq:function(e,t,i){"use strict";var a=i("FrX8");i.n(a).a},acQw:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("7cmB"),o=i("vleD"),n=i("oC0i"),l=(i("zF5t"),i("PuDp"));i("z0WU");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" :disabled=true></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},c={components:{treeFormTable:a.a,dialogOption:o.default,dialogRoleUser:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rootData:{},tableSets:{1:{showCheckBox:!1,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},currentpage:1,customColumn:{1:[{columnIndex:"isdisable",component:r,changeState:this.changeState}]},editable:{suggestCount:{}},apiObj:{apiName:"listPageWarehouseOutDetailsOutRecords",params:{}},addedData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"选择员工",data:null,temp:{},tempLable:null,isSingle:!0,tableUrl:"/warehouse/warehouseProduct/listPageWarehouseProductsDispatchOption",tableParm:{}},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{}}},created:function(){this.temp=this.initData.temp,this.initData.temp.id&&(this.apiObj.params={queryStr:"detail.parent_id in ('"+this.initData.temp.id+"')   ",pageNo:1,firstFieldCode:"productCode,productName,productSpec,productUnitName,count,executeCount,stateName"})},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},addChild:function(e,t){this.dialogCallBackData=e,this.showDialog=!0,this.dialogVisible=!0},addChildRow:function(){this.dialogVisible=!1,this.showDialog=!1,this.addedData={rowData:this.testData,parentData:this.dialogCallBackData}},sendChildrenRow:function(e){},change:function(e,t){this.dialogData.temp=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑出库单",this.dialogData.isSingle=!1,this.dialogData.tableUrl="/warehouseProduct/listPageWarehouseProductsDispatchOption",this.dialogData.tableParm={productId:e.productId},this.openDialogName="dialogOption",this.showDialog=!0,this.inLinVisible=!0},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){this.$refs.treeFormTable.getData()},formData:function(e){this.realSave(e)},realSave:function(e){var t=this;if(null!=e.tableData&&0!=e.tableData.length){var i="";e.tableData&&e.tableData.length>0&&(i=JSON.stringify(e.tableData)),Object(l.executeWarehouseOutDetail)({jsonDataStr:i}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择出库明细信息！"})},closeDialog:function(e,t){this.addedData={rowData:e[0],parentData:t},this.showDialog=!1}},watch:{pageNo:function(){this.initTable()}}},d=(i("vJiH"),i("KHd+")),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px",top:"50px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{padding:"0 20px","font-size":"16px","font-weight":"600"}},[i("el-col",{attrs:{span:8}},[i("span",[e._v("出库单号 : "+e._s(e.temp.code))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("接收单位 : "+e._s(e.temp.deptName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("出库类型 : "+e._s(e.temp.typeName))])])],1),e._v(" "),i("el-row",{staticStyle:{padding:"0 20px",margin:"10px 0","font-size":"16px","font-weight":"600"}},[i("el-col",{attrs:{span:8}},[i("span",[e._v("仓库 : "+e._s(e.temp.warehouseName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("制单人 : "+e._s(e.temp.makeName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("制单时间 : "+e._s(e.temp.cdate))])])],1),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("tree-form-table",{ref:"treeFormTable",attrs:{"expand-all":!0,initData:e.rootData,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:e.editable,apiObj:e.apiObj,addedData:e.addedData},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,"send-children-row":e.sendChildrenRow,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogAllRecords.vue";t.default=u.exports},apiY:function(e,t,i){"use strict";var a=i("fqBP");i.n(a).a},asQK:function(e,t,i){"use strict";var a=i("WIyV"),o=i("2+ib"),n=i("Lt5i"),l=i("Isb9"),s=i("QWlu"),r={name:"tabs-table",components:{equipmentCard:n.a,equipmentData:l.a,multilevelTable:o.a,baseTable:a.a},props:{tabs:{type:Array,default:function(){return[]}},defaultKey:{type:String,default:""}},data:function(){return{activeName:"",tabpaneHeight:0,inDialog:!1}},directives:{"set-height":{inserted:function(e,t,i){var a=i.context;!a.inDialog&&a.checkDialog(e),a.inDialog&&setTimeout(function(t){var i=e.offsetHeight;i>a.tabpaneHeight&&(a.tabpaneHeight=i),e.style.height=a.tabpaneHeight+"px"},100)}}},computed:{formatConfig:function(){return this.tabs.map(function(e){return e.tableConfigList})}},watch:{},methods:{checkDialog:function(e){e&&(s.a.hasClass(e,"el-dialog")?this.inDialog=!0:this.checkDialog(e.parentNode))},databridge:function(e){this.$emit("databridge",e)},handleClick:function(e,t){this.$emit("tabsKey",this.activeName)},callmethod:function(e){this.$emit("callmethod",e)}},created:function(){this.defaultKey?this.activeName=this.defaultKey:this.activeName="0"}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-tabs",{staticClass:"multiLabelTableComponent",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e._l(e.tabs,function(t,a){return[i("el-tab-pane",{directives:[{name:"set-height",rawName:"v-set-height"}],key:a,attrs:{label:t.label,name:a+""}},[t.btns&&t.btns.length?e._l(t.btns,function(a,o){return i("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"mini",disabled:a.disabled},domProps:{textContent:e._s(a.btnName)},on:{click:function(e){a.method(t)}}})}):e._e(),e._v(" "),e.activeName===a+""?i(t.componentName,{tag:"component",attrs:{tableConfigList:e.formatConfig[a]},on:{databridge:e.databridge,callmethod:e.callmethod}}):e._e()],2)]})],2)},[],!1,null,null,null);d.options.__file="index.vue";t.a=d.exports},aukK:function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=i("BESt"),n=(i("z0WU"),i("Ppn9"),{name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,topBarBtnList:[],tempCount:{count:0},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listProdLackNum",params:{dtlJsonStr:this.initData.temp,addColumn:{columnKey:"prodInfo",columnName:"货品"},fieldCode:"prodInfo,unit,stockCount,assembledCount,maxCount",isreplaceable:this.initData.isreplaceable}},temp:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a,dialogReport:o.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},delete:function(e,t){var i=this,a=this;a.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.deleteData(e)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},backStep:function(){this.$emit("close-dialog",{})},nextStep:function(){this.getData(),0!=this.selectList.length&&(this.dialogData.temp=JSON.stringify(this.selectList),this.dialogData.tempLable=this.tempLable,this.dialogData.title="分析结果",this.openDialogName="dialogReport",this.showDialog=!0,this.visibleState=!0)},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&e.selectList.length>0&&this.pushData(e.selectList)},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}}),l=(i("wFTP"),i("evI9"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1024px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_bundleAnalysis_dialogProdMaxNum0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.backStep}},[e._v("上一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);s.options.__file="dialogProdMaxNum.vue";t.default=s.exports},b2Y8:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("sanI"),l=i("EDKZ");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddCustomer:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{pageNo:1,type:"add",fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"3"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="销售退货入库",this.temp.type="81907167d5c8498692e6c4f3694c5cfa",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={productId:n.productId,remark:n.remark,p2nFormula:n.p2nFormula,priceUnit:n.priceUnit,priceCount:n.priceCount,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.addWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{pageNo:function(){this.initTable("add","")}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px",width:"100%"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_sale_saleInWC_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogAdd.vue";t.default=d.exports},b3I8:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("1IKD"),o=i("uupt"),n=i("WIyV"),l=i("spKr"),s={components:{customBaseTable:n.a,productTableDialog:a.a,dialogAddSupplier:o.default},props:["initData","visible"],data:function(){return{rules:{supplierName:[{required:!0,message:"请选择供应商",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,SupplierDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择供应商",width:"500px",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"49c0a7ebcb4c4175bd5195837a6a9a13",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}},formData:{supplierId:"",supplierName:"",type:"",remark:"",dtlJsonStr:""},tableData:[],tableList:[],configs:{topBarBtnList:[{name:"选择货品",nameEn:"selectProduct",isShow:!0,method:this.selectProduct}]},apiObj:{apiName:"listPageRetreatDetail",params:{fieldCode:"prodInfo,unitName,count",prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:"null",isNeedPage:"false"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.formData.type="c90c2081328c427e8d65014d98335601"},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.retreatAddDialog.getData()},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},databridge:function(e){Array.isArray(e)&&(this.tableList=[],this.tableList=e)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},supplierSelect:function(e){e[0]&&(this.formData.supplierId=e[0].id,this.formData.supplierName=e[0].name)},selectProduct:function(){this.getData(),this.dialogData.data=this.tableList,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t&&(e.getData(),null!=e.tableList&&e.tableList.length>0)){for(var i=[],a=0;a<e.tableList.length;a++){var o=e.tableList[a],n={productId:o.productId,unit:o.unit,count:o.count,price:o.price};i.push(n)}null!=i&&i.length>0&&(e.formData.dtlJsonStr=JSON.stringify(i)),e.$confirm("添加采购退货单后，是否将该退货单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.formData.isAutoCommit="true",Object(l.addPurchaseRetreat)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.formData.isAutoCommit="false",Object(l.addPurchaseRetreat)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}})},saveSaleOrder:function(e){},closeDialog:function(e){this.showDialog=!1;var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByProduct(t)},tableSelectedByProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={id:"",productId:"",productCode:"",productName:"",productSpec:"",productProperty:"",unit:"",unitName:"",count:"0.00",amount:"0.00"};a.productId=i.id.trim(),null!=i.code&&i.code.trim().length>0&&(a.productCode=i.code.trim()),null!=i.name&&i.name.trim().length>0&&(a.productName=i.name.trim()),null!=i.spec&&i.spec.trim().length>0&&(a.productSpec=i.spec.trim()),null!=i.property&&i.property.trim().length>0&&(a.productProperty=i.property.trim()),null!=i.prodInfo&&i.prodInfo.trim().length>0&&(a.prodInfo=i.prodInfo.trim()),a.unit=i.unit,a.unitName=i.unitName,a.id=i.id.trim()||t,this.tableData.push(a)}}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"800px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px",width:"96%","margin-left":"2%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right"}},[i("el-row",[i("el-col",{attrs:{span:14}},[i("el-form-item",{attrs:{label:"供应商:",prop:"supplierName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"250px"},attrs:{dialog:e.SupplierDialog.dialog},on:{callback:e.supplierSelect},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"padding-top":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticStyle:{"padding-top":"10px"}},[i("custom-base-table",{ref:"retreatAddDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseRetreat_createRetreatByPurchase_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"retreatAddDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAdd.vue";t.default=c.exports},b8JI:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={components:{treeFormTable:i("7cmB").a},name:"dialog-add",props:["initData","visible"],data:function(){return{rootData:{},tableSets:{1:{showCheckBox:!1,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},currentpage:1,customColumn:{},editable:{suggestCount:{}},apiObj:{apiName:"findListWarehouseInExecuteByEdit",params:{firstFieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,executeCount,surplusCount,code,warehouseName",secondFieldCode:"",queryStr:"",pageNo:1}},addedData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",temp:{},tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{}}},created:function(){this.temp=this.initData.temp,this.initData.temp.id&&(this.apiObj.params.queryStr="a.parent_id = '"+this.initData.temp.id+"'")},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=a(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},sendChildrenRow:function(e){},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},formData:function(e){},closeDialog:function(e,t){}},watch:{pageNo:function(){this.initTable()}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{padding:"0 20px","font-size":"16px","font-weight":"600"}},[i("el-col",{attrs:{span:8}},[i("span",[e._v("入库单号: "+e._s(e.temp.code))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("来源单位: "+e._s(e.temp.deptName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("入库类型: "+e._s(e.temp.typeName))])])],1),e._v(" "),i("el-row",{staticStyle:{padding:"0 20px",margin:"10px 0","font-size":"16px","font-weight":"600"}},[i("el-col",{attrs:{span:8}},[i("span",[e._v("仓库 : "+e._s(e.temp.warehouseName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("制单人 : "+e._s(e.temp.makeName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("制单时间 : "+e._s(e.temp.cdate))])])],1),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("tree-form-table",{ref:"treeFormTable",attrs:{"expand-all":!0,initData:e.rootData,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:e.editable,apiObj:e.apiObj,addedData:e.addedData},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,"send-children-row":e.sendChildrenRow,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogAllRecords.vue";t.default=l.exports},bBzQ:function(e,t,i){"use strict";var a=i("DlF3");i.n(a).a},bI86:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rGqo");var a=i("mSNy"),o=i("TslA"),n=i("/nWt"),l=i("V/0Z"),s=i("z0WU");function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){c(e,t,i[t])})}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" @change="colConfig.changeState(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdefault" :disabled="scope.row.isdefault==\'1\'" @change="colConfig.changeIsDefault(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},p={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button  v-show="colConfig.editBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.editBtns(scope.row,scope.$index)">更换名称</el-button>\n      \t\t\t\t\t\t\t<el-button  v-show="colConfig.deleteBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteBtns(scope.row,scope.$index)">删除</el-button>\n      \t\t\t\t\t\t\t<el-button  v-show="colConfig.viewBomBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.viewBomBtns(scope.row,scope.$index)">查看/编辑</el-button>\n      \t\t\t\t\t\t\t<el-button  v-show="colConfig.exportExcel_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.exportExcel(scope.row,scope.$index)">Bom导出</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},m={name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,topBarBtnList:[{name:"查询",icon:"search",method:this.queryTable},{name:"重置",icon:"refresh",plain:!0,method:this.resetQueryTemp}],initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",btnName:"编辑",isPropName:!0,component:p,editBtns:this.editBtns,editBtns_isShow:!0,viewBomBtns:this.viewBomBtns,viewBomBtns_isShow:!0,deleteBtns:this.deleteBtns,deleteBtns_isShow:!0,exportExcel:this.exportExcel,exportExcel_isShow:!0}},configs:{topBarBtnList:[{name:"新增",nameEn:"add",isShow:!0,icon:"add",method:this.addNew},{name:"导出",nameEn:"export",isShow:!0,icon:"export",method:this.exportExcel}],tableConfigs:[],showCheckBox:!1,showIndex:!1,isSingle:!1},tableData:[],selectList:[],queryParms:[{name:"code"},{name:"name"}],tempQuery:{},tempLable:{},pageData:null,pageNo:1,openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{dialogEdit:o.default,dialogView:n.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.configs.isSingle=this.initData.isSingle,this.userInfo=this.$storage.get("userInfo"),this.initTable(!0)},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},queryTable:function(){this.pageNo=1,this.initTable()},initTable:function(e){var t=this;t.dialogTopLoading=!0,Object(l.listPageBoms)(r({},t.tempQuery,{addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"prodCode,prodName,prodSpec,productProperty",fieldCode:"prodInfo,code,name,isdefault,remark",modelCode:"BomList",prodId:this.initData.temp.prodId,pageNo:t.pageNo,queryStr:" bom.id is not null ",orderStr:"bom.code asc"})).then(function(i){t.getListPage(i),e&&(t.dialogTopLoading=!1)}).catch(function(e){t.dialogTopLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(s.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var o=e[i];o.indexOf("_")>0&&("en"==a.a.locale?o=o.substring(o.indexOf("_")+1):"zh"==a.a.locale&&(o=o.substring(0,o.indexOf("_")))),t.tempLable[i]=o}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==a.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==a.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"是否启用"===e.label&&(e.component=d,e.changeState=t.changeState),"是否默认"===e.label&&(e.component=u,e.changeIsDefault=t.changeIsDefault)}),e.push(t.initConfigs.tableOperates),e},viewBomBtns:function(e,t){this.resetTemp(),this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.temp=this.temp,this.dialogData.tempLable=this.tempLable,this.dialogData.title="查看/编辑",this.openDialogName="dialogView",this.showDialog=!0,this.visibleState=!0},editBtns:function(e,t){this.resetTemp(),this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.temp=this.temp,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑",this.openDialogName="dialogEdit",this.showDialog=!0,this.visibleState=!0},deleteBtns:function(e,t){var i=this;i.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.id;Object(l.deleteBoms)(t).then(function(e){0===e.code&&(i.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),i.refreshTable())}).catch(function(e){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},exportExcel:function(e){var t=e.id;Object(l.exportExcelBoms)({fieldCode:"pathIndexCode,productCode,productName,productSpec,productGenreName,pictureCode,pathRatio,remark",isreplaceable:"0",bomId:t,orderStr:"bomTree.cdate asc"}).then(function(e){e&&Object(s.j)(e,"BOM管理导出.xls")}).catch(function(e){})},resetTemp:function(){for(var e in this.temp)this.temp[e]=""},changeIsDefault:function(e,t){var i=this;Object(l.updateIsDefaultBom)(e.id,e.isdefault,this.initData.temp.prodId).then(function(e){i.refreshTable()}).catch(function(e){})},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.refreshTable()},refreshTable:function(){var e=this;e.$axios.all([Object(l.listPageBoms)(r({},e.tempQuery,{addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"prodCode,prodName,prodSpec,productProperty",fieldCode:"prodInfo,code,name,isdefault,remark",modelCode:"BomList",prodId:this.initData.temp.prodId,pageNo:e.pageNo,queryStr:" bom.id is not null ",orderStr:"bom.code asc"}))]).then(e.$axios.spread(function(t){e.getListPage(t)})).catch(function(e){})},dataBridge:function(e){this.selectList=e},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]=""}},computed:{dialogName:function(){return this.openDialogName}},watch:{pageNo:function(){this.initTable()}}},h=i("KHd+"),g=Object(h.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{padding:"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);g.options.__file="dialogList.vue";t.default=g.exports},bK7G:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d"),i("rGqo"),i("yt8O"),i("XfO3"),i("9AAn");var a=i("AUoE");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],mixins:[i("K77I").a],data:function(){return{deliverId:"",customerId:"",deliverType:"send",deliverTypeNameKeyMap:new Map([["send","1"],["deliver","2"],["self","3"]]),isShowSend:!0,isShowDeliver:!1,isShowSelf:!1,dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{deliverId:"",type:"",makeId:"",makeName:"",deliverDate:new Date,waybillCompany:"",waybillCode:"",customeAddressId:"",custAddress:"",custAddressName:"",custMobile:"",carCode:"",remark:""},tempLable:{},tempNotEditable:{},rules:{makeName:[{required:!0,message:"请选择经办人",trigger:"change"}],deliverDate:[{required:!0,message:"请填写发货日期",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",fullscreen:!1,tempLable:null},formTemp:[],MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择经办人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}},CustAddressDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择收货地址",tableUrl:"/base/customeAddress/listPageCustomeAddress",tableParm:{customerId:this.initData.temp.customerId,fieldCode:"name,mobile,address"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.deliverId=this.initData.temp.id,this.customerId=this.initData.temp.customerId,this.isShowSend=!1,this.isShowDeliver=!1,this.isShowSelf=!1,this.initData.temp&&("1"==this.initData.temp.type&&(this.isShowSend=!0,this.deliverType="send"),"2"==this.initData.temp.type&&(this.isShowDeliver=!0,this.deliverType="deliver"),"3"==this.initData.temp.type&&(this.isShowSelf=!0,this.deliverType="self"));var e=this.$storage.get("userInfo");null!=e.userId&&e.userId.trim().length>0&&(this.temp.makeId=e.userId.trim()),null!=e.userName&&e.userName.trim().length>0&&(this.temp.makeName=e.userName.trim())},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},radioChange:function(){this.isShowSend=!1,this.isShowDeliver=!1,this.isShowSelf=!1,"send"==this.deliverType?this.isShowSend=!0:"deliver"==this.deliverType?this.isShowDeliver=!0:"self"==this.deliverType&&(this.isShowSelf=!0)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},custAddressSelect:function(e){e[0]&&(this.temp.customeAddressId=e[0].id,this.temp.custAddressName=e[0].name,this.temp.custMobile=e[0].mobile,this.temp.custAddress=e[0].address)},save:function(){var e=this;this.dialogLoading=!0,this.temp.deliverId=this.deliverId,this.temp.customerId=this.customerId,this.temp.type=this.deliverTypeNameKeyMap.get(this.deliverType),Object(a.updateSaleDeliverByDeliverType)(this.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticStyle:{height:"90vh"},attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px",top:"10vh","custom-class":"listDeliverClass"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{height:"100%"}},[i("el-form",{ref:"submitForm",staticStyle:{height:"calc(100% - 61px)",overflow:"hidden"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{padding:"20px 50px"},style:{"box-shadow":e.showBoxShadow?"0px 5px 10px -10px black":""}},[i("el-radio-group",{on:{change:e.radioChange},model:{value:e.deliverType,callback:function(t){e.deliverType=t},expression:"deliverType"}},[i("el-radio",{attrs:{label:"send"}},[e._v("发货")]),e._v(" "),i("el-radio",{attrs:{label:"deliver"}},[e._v("送货")]),e._v(" "),i("el-radio",{attrs:{label:"self"}},[e._v("客户自提")])],1)],1),e._v(" "),i("div",{directives:[{name:"switchshadow",rawName:"v-switchshadow"}],staticStyle:{height:"calc(100% - 58px)","overflow-y":"auto"}},[i("el-form-item",{attrs:{label:"经办人：",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"发货日期：",prop:"deliverDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"发货日期","value-format":"yyyy-MM-dd"},model:{value:e.temp.deliverDate,callback:function(t){e.$set(e.temp,"deliverDate",t)},expression:"temp.deliverDate"}})],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowSend,expression:"isShowSend"}]},[i("el-form-item",{attrs:{label:"物流公司：",prop:"waybillCompany"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.waybillCompany,callback:function(t){e.$set(e.temp,"waybillCompany",t)},expression:"temp.waybillCompany"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"物流单号：",prop:"waybillCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.waybillCode,callback:function(t){e.$set(e.temp,"waybillCode",t)},expression:"temp.waybillCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"收货地址：",prop:"custAddress"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.CustAddressDialog.dialog},on:{callback:e.custAddressSelect},model:{value:e.temp.custAddress,callback:function(t){e.$set(e.temp,"custAddress",t)},expression:"temp.custAddress"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"联系人：",prop:"custAddressName"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.custAddressName,callback:function(t){e.$set(e.temp,"custAddressName",t)},expression:"temp.custAddressName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"手机号：",prop:"custMobile"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.custMobile,callback:function(t){e.$set(e.temp,"custMobile",t)},expression:"temp.custMobile"}})],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowDeliver,expression:"isShowDeliver"}]},[i("el-form-item",{attrs:{label:"车牌号：",prop:"carCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.carCode,callback:function(t){e.$set(e.temp,"carCode",t)},expression:"temp.carCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"收货地址：",prop:"custAddress"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.CustAddressDialog.dialog},on:{callback:e.custAddressSelect},model:{value:e.temp.custAddress,callback:function(t){e.$set(e.temp,"custAddress",t)},expression:"temp.custAddress"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"联系人：",prop:"custAddressName"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.custAddressName,callback:function(t){e.$set(e.temp,"custAddressName",t)},expression:"temp.custAddressName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"手机号：",prop:"custMobile"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.custMobile,callback:function(t){e.$set(e.temp,"custMobile",t)},expression:"temp.custMobile"}})],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowSelf,expression:"isShowSelf"}]},[i("el-form-item",{attrs:{label:"车牌号：",prop:"carCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.carCode,callback:function(t){e.$set(e.temp,"carCode",t)},expression:"temp.carCode"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},style:{"box-shadow":e.showBoxShadow?"0px -5px 10px -10px black":""},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},bR9l:function(e,t,i){"use strict";i.r(t);var a={components:{customBaseTable:i("WIyV").a},props:["initData","visible"],data:function(){return{businessId:"",showDialog:!1,dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPagePurchaseSignDetailByIn",params:{fieldCode:"orderCode,supplierName,signName,signDateTiemStr,prodInfo,productGenreName,productUnitName,arriveCount",prodColumnKey:"productCode,productName,productSpec,productProperty",inId:"",orderStr:""}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.businessId=this.initData.businessId,this.apiObj.params.inId=this.initData.businessId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},closeDialog:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("el-row",{staticStyle:{"padding-top":"10px"},style:e.initData.table_style},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_purchase_orderSign_dialogSignDetailByIn0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);n.options.__file="dialogSignDetailByIn.vue";t.default=n.exports},bUBY:function(e,t,i){},bYfd:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("QmdA");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1}},created:function(){this.initData.temp&&(this.temp=this.initData.temp)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isBankCodeNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[1-9][0-9]*$").test(e.trim())},checkBankCodeValue:function(e,t){var i="";return null!=e&&e.trim().length>0&&!this.isBankCodeNumberByValue(e.trim())&&(i=t+"("+e+")输入错误，请输入正确的账号！"),i},checkBankCode:function(e){var t=this.checkBankCodeValue(e,"账号");null!=t&&t.trim().length>0&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t})},save:function(){var e=this,t=this;this.$refs.submitForm.validate(function(i){if(i){var o="",n=e.temp.bankCode,l=e.checkBankCodeValue(n,"账号");if(null!=l&&l.trim().length>0&&(o=o+" "+l),null!=o&&o.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:o});t.dialogLoading=!0,Object(a.addCustomerInvoice)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"companyName"}},[i("el-input",{model:{value:e.temp.companyName,callback:function(t){e.$set(e.temp,"companyName",t)},expression:"temp.companyName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"税号:",prop:"invoiceNumber"}},[i("el-input",{model:{value:e.temp.invoiceNumber,callback:function(t){e.$set(e.temp,"invoiceNumber",t)},expression:"temp.invoiceNumber"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地址:",prop:"address"}},[i("el-input",{model:{value:e.temp.address,callback:function(t){e.$set(e.temp,"address",t)},expression:"temp.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电话:",prop:"mobile"}},[i("el-input",{model:{value:e.temp.mobile,callback:function(t){e.$set(e.temp,"mobile",t)},expression:"temp.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开户银行:",prop:"bankName"}},[i("el-input",{model:{value:e.temp.bankName,callback:function(t){e.$set(e.temp,"bankName",t)},expression:"temp.bankName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"账号:",prop:"bankCode"}},[i("el-input",{on:{change:e.checkBankCode},model:{value:e.temp.bankCode,callback:function(t){e.$set(e.temp,"bankCode",t)},expression:"temp.bankCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="invoiceAdd.vue";t.default=s.exports},behg:function(e,t,i){},bupS:function(e,t,i){},bvAX:function(e,t,i){},"c+Jk":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("a0Xs");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{formulaDialog:i("Ck00").a},name:"dialog-edit",props:["initData","visible"],data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{punitName:[{required:!0,trigger:"change",validator:function(t,i,a){e.unitData.defaultSelected.length<=0?a(new Error("请选择计价单位")):a()}}]},unitData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"productUnit",isglobal:"0"}},defaultSelected:[]},formTemp:[],showDialog:!1,visibleState:!1,dialogName:"",formulaState:""}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{closeDialog:function(e){this.visibleState=!1,this.showDialog=!1,e&&("n"===this.formulaState?this.temp.npFormula=e:this.temp.pnFormula=e)},openFormulaEdit:function(e){this.dialogName="formulaDialog",this.showDialog=!0,this.formulaState=e,this.visibleState=!0},dialogOpen:function(){this.unitData.defaultSelected=[this.initData.temp.unit],this.temp.punit=this.initData.temp.unit},unitSelect:function(e){e[0]?(this.temp.punit=e[0],this.unitData.defaultSelected=[e[0]]):(this.temp.punit=[],this.unitData.defaultSelected=[])},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;e.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.saveProductUnit)({productId:e.temp.id,unit:e.temp.punit,npFormula:e.temp.npFormula,pnFormula:e.temp.pnFormula,remark:e.temp.remark}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=(i("tweV"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"620px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.code+":",prop:"code"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.code,callback:function(t){e.$set(e.temp,"code",t)},expression:"temp.code"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.name+":",prop:"name"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.unitName+":",prop:"unitName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.unitName,callback:function(t){e.$set(e.temp,"unitName",t)},expression:"temp.unitName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"计价单位:",prop:"punitName"}},[i("base-input-select",{attrs:{data:e.unitData.data},on:{callback:e.unitSelect},model:{value:e.unitData.defaultSelected,callback:function(t){e.$set(e.unitData,"defaultSelected",t)},expression:"unitData.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"计量单位转换计价单位(公式):",prop:"npFormula"}},[i("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",rows:"3"},model:{value:e.temp.npFormula,callback:function(t){e.$set(e.temp,"npFormula",t)},expression:"temp.npFormula"}}),e._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){e.openFormulaEdit("n")}}},[e._v("公式编辑器")])],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"计价单位转换计量单位(公式):",prop:"pnFormula"}},[i("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",rows:"3"},model:{value:e.temp.pnFormula,callback:function(t){e.$set(e.temp,"pnFormula",t)},expression:"temp.pnFormula"}}),e._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){e.openFormulaEdit("p")}}},[e._v("公式编辑器")])],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1),e._v(" "),e.showDialog?i(e.dialogName,{tag:"component",attrs:{state:e.formulaState,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);s.options.__file="dialogUnitAdd.vue";t.default=s.exports},"c9E/":function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("WIyV"),o=i("57Me"),n=i("DV56"),l=i("MPAK"),s=i("hZMg"),r=i("+Dad"),c=i("6tE/"),d={components:{customBaseTable:a.a,selectProductByProducePlan:o.default,selectOrderByProducePlan:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{sysDateStr:"",formData:{produceType:"",makeName:"",makeId:"",dtlJsonStr:"",isAutoCommit:""},rules:{makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,tableData:[],tableList:[],configs:{topBarBtnList:[{name:"货品新增",nameEn:"selectProduct",isShow:!0,method:this.selectProduct},{name:"订单新增",nameEn:"selectOrder",isShow:!0,method:this.selectOrder},{name:"产品合并",nameEn:"mergeProduct",isShow:!0,method:this.mergeProduct}]},apiObj:{apiName:"listPageProducePlanDetail",params:{fieldCode:"prodInfo,unitName,count,beginDate,endDate,orderCode,expectDate",prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:"null"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{}},{columnIndex:"beginDate",width:"150",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",greaterThan:["self@sysDate",!0],message:["此项不能为空！"]}},{columnIndex:"endDate",width:"150",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd"}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{minDate:new Date},produceType:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"produceType",isglobal:"1",isNeetOneLayer:"true"}},defaultSelected:["bc562e2269814984a4769a7f89cc9b60"]},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this,t=this.$storage.get("userInfo");this.formData.makeId=t.userId,this.formData.makeName=t.userName,this.formData.produceType="bc562e2269814984a4769a7f89cc9b60",Object(s.findSystemDateTime)({dateFormat:"yyyy-MM-dd"}).then(function(t){0==t.code&&null!=t.sysDateTime&&t.sysDateTime.trim().length>0&&(e.sysDateStr=t.sysDateTime.trim())}).catch(function(e){})},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.AddProducePlan.getData()},deleteData:function(e){this.$refs.AddProducePlan.deleteData(e)},databridge:function(e){Array.isArray(e)&&(this.tableList=[],this.tableList=e)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},produceTypeSelect:function(e){e[0]?(this.formData.produceType=e[0],this.produceType.defaultSelected=[e[0]]):(this.formData.produceType=[],this.produceType.defaultSelected=[])},makeSelect:function(e){e[0]&&(this.formData.makeId=e[0].id,this.formData.makeName=e[0].name)},selectProduct:function(){this.tableList=[],this.getData(),this.dialogData.title="选择货品",this.openDialogName="selectProductByProducePlan",this.dialogData.tableData=this.tableList,this.dialogData.isNeedRepeat=!1,this.showDialog=!0,this.inLinVisible=!0},selectOrder:function(){this.tableList=[],this.getData(),this.dialogData.title="选择销售订单",this.openDialogName="selectOrderByProducePlan",this.dialogData.tableData=this.tableList,this.dialogData.isNeedRepeat=!1,this.showDialog=!0,this.inLinVisible=!0},mergeProduct:function(){var e=this;this.getData();var t=[];if(this.tableList.length>0)for(var i=0;i<this.tableList.length;i++){var a=this.tableList[i];t.push(a)}var o="";null!=t&&t.length>0&&(o=JSON.stringify(t)),Object(r.mergeProductByProducePlanDetail)({dtlJsonStr:o}).then(function(t){if(null!=t.mergeProductList&&(e.tableList.length>0&&e.tableList.splice(0,e.tableList.length),null!=t.mergeProductList&&t.mergeProductList.length>0))for(var i=0;i<t.mergeProductList.length;i++){var a=t.mergeProductList[i],o={id:a.id,count:a.count,orderCode:a.orderCode,expectDate:a.expectDate,jsonStr:a.jsonStr,productId:a.productId,productCode:a.productCode,productName:a.productName,productSpec:a.productSpec,productProperty:a.productProperty,prodInfo:a.prodInfo,unitId:a.unitId,unitName:a.unitName};e.tableData.push(o)}}).catch(function(e){})},checkColumnByTable:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o="";null!=a.count&&(o=a.count+""),null==o||0==o.trim().length?t=t+"第 "+(i+1)+" 行: 计划数量为空或空字符串！":null!=o&&o.trim().length>0&&!Object(l.isNumberByValueSystem)(o)?t=t+"第 "+(i+1)+" 行: 计划数量("+o+") 输入错误，请输入大于零的正数支持(1,2)位小数！":null!=o&&o.trim().length>0&&Object(l.isNumberByValueSystem)(o)&&o/1<=0&&(t=t+"第 "+(i+1)+" 行: 计划数量("+o+") 输入错误，请输入大于零的正数支持(1,2)位小数！");var n=a.beginDate;null==n&&(t=t+"第 "+(i+1)+" 行: 开始日期为空，请选择开始日期！");var s=a.endDate;null==s&&(t=t+"第 "+(i+1)+" 行: 结束日期为空，请选择结束日期！"),null!=n&&null!=s&&n>s&&(t=t+"第 "+(i+1)+" 行: 开始日期大于结束日期！")}return t},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){e.tableList=[],e.getData();var i=e.checkColumnByTable(e.tableList);if(null!=i&&i.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:i});e.savePlan()}})},savePlan:function(){var e=this,t="";if(null!=this.tableList&&0!=this.tableList.length){for(var i=[],a=0;a<this.tableList.length;a++){var o=this.tableList[a],n={orderDtlId:o.orderDtlId,count:o.count,beginDate:o.beginDate,endDate:o.endDate,productId:o.productId,unitId:o.unitId,jsonStr:o.jsonStr};i.push(n)}t=JSON.stringify(i),this.formData.dtlJsonStr=t,this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(c.addProducePlan)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"selectProductByProducePlan"==e.pageName){o.default;var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByProduct(t)}else if(null!=e&&"selectOrderByProducePlan"==e.pageName){var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelectedBySaleOrder(i)}},tableSelectedByProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={id:"",productId:"",productCode:"",productName:"",productSpec:"",productProperty:"",unitId:"",unitName:"",count:"0.00",beginDate:""};a.productId=i.id.trim(),null!=i.code&&i.code.trim().length>0&&(a.productCode=i.code.trim()),null!=i.name&&i.name.trim().length>0&&(a.productName=i.name.trim()),null!=i.spec&&i.spec.trim().length>0&&(a.productSpec=i.spec.trim()),null!=i.property&&i.property.trim().length>0&&(a.productProperty=i.property.trim()),null!=i.prodInfo&&i.prodInfo.trim().length>0&&(a.prodInfo=i.prodInfo.trim()),null!=i.count&&i.count.trim().length>0&&(a.count=i.count.trim()),a.beginDate=this.sysDateStr,a.unitId=i.unit,a.unitName=i.unitName,a.id=i.id.trim()||t,this.tableData.push(a)}},tableSelectedBySaleOrder:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a="0.00";null!=i&&null!=i.producePlanCount&&i.producePlanCount.trim().length>0&&(a=i.producePlanCount.trim());var o={id:i.id,count:a,beginDate:this.sysDateStr,expectDate:i.expectDate,orderCode:i.sysCode,orderDtlId:i.orderDtlId,productId:i.productId,productCode:i.productCode,productName:i.productName,productSpec:i.productSpec,productProperty:i.productProperty,prodInfo:i.prodInfo,unitId:i.prodUnitId,unitName:i.prodUnitName};this.tableData.push(o)}}},watch:{}},u=i("KHd+"),p=Object(u.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"生产类型:",prop:"remark"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{data:e.produceType.data},on:{callback:e.produceTypeSelect},model:{value:e.produceType.defaultSelected,callback:function(t){e.$set(e.produceType,"defaultSelected",t)},expression:"produceType.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.formData.makeName,callback:function(t){e.$set(e.formData,"makeName",t)},expression:"formData.makeName"}})],1)],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"AddProducePlan",attrs:{"data-custom-table-id":"views_produce_producePlan_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"AddProducePlan",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);p.options.__file="dialogAdd.vue";t.default=p.exports},cAgj:function(e,t,i){"use strict";i.r(t);var a=i("WIyV"),o=i("BEur"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{addRetreatData:{supplierId:"",type:"",isAutoCommit:"",dtlJsonStr:""},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageAssistOrderDetailChildByRetreat",params:{fieldCode:"prodInfo,unitName,deliverCount,signCount,retreatUserCount,retreatCount,discardCount,maxRetreatCount,editRetreatCount",addColumn:{columnKey:"prodInfo,maxRetreatCount,editRetreatCount",columnName:"货品,最大退料,本次退料"},prodColumnKey:"productCode,productName,productSpec,productProperty",businessType:"retreat",orderDtlId:"",isNeedPage:"false"}},customColumn:[{columnIndex:"prodInfo",width:"250",_cellConfig:{hideTitle:!0}},{columnIndex:"editRetreatCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{lessThan:["self@maxRetreatCount",!0]}],message:["请输入大于零的正整数或(1,2)位小数！","不可大于最大退料数！"]}}]}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.apiObj.params.orderDtlId=e.id,this.addRetreatData.type="2",this.addRetreatData.supplierId=e.supplierId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.tableData=[],this.tableData=e)},getData:function(){this.$refs.customBaseTable.getData()},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){},findJsonStringByTable:function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i],o={orderId:a.orderId,orderDtlId:a.orderDtlId,orderDtlChildId:a.orderDtlChildId,productId:a.productId,orderUnit:a.unitId,orderCount:a.editRetreatCount};t.push(o)}this.addRetreatData.dtlJsonStr=JSON.stringify(t)},save:function(){var e=this;this.getData(),null!=this.tableData&&this.tableData.length>0&&(this.findJsonStringByTable(this.tableData),this.$confirm("是否将该退料单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.addRetreatData.isAutoCommit="true",Object(o.addAssistRetreat)(e.addRetreatData).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.dialogLoading=!1,e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.addRetreatData.isAutoCommit="false",Object(o.addAssistRetreat)(e.addRetreatData).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.dialogLoading=!1,e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))}))}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistRetreat_createAssistRetreat_selectAssistDelive0",showIndex:!1,showTableSet:!1,showCheckBox:!1,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="selectAssistDelive.vue";t.default=s.exports},cE6r:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg"),i("rGqo");var a=i("uTIz"),o=i("2+ib"),n=i("spKr");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{searchBar:a.a,multilevelTable:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{retreatId:"",supplierId:"",supplierName:"",totalSum:"",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",table_style:"",orderId:"",orderDtlIds:"",supplierId:"",supplierName:""},rowTableList:[],tableConfigList:[{customColumn:[{columnIndex:"state",width:"140",componentName:"tag",_cellConfig:{success:{state:"3",text:"已完成"},default:{state:"1",text:"待审核"},info2:{state:"2",text:"待退货"},info3:{state:"3",text:"已完成"},info:{state:"-1",text:"已取消"}}}],apiObj:{apiName:"listPageRetreat",params:{id:"",fieldCode:"sysCode,supplierName,typeName,cdate,remark,state"}},tempData:{},showHeader:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"state",width:"140",componentName:"tag",_cellConfig:{success:{state:"3",text:"已完成"},default:{state:"1",text:"待审核"},info2:{state:"2",text:"待退货"},info3:{state:"3",text:"已完成"},info:{state:"-1",text:"已取消"}}}],apiObj:{apiName:"listPageRetreatDetail",params:{fieldCode:"prodInfo,unitName,count,price,amount,remark",prodColumnKey:"productCode,productName,productSpec,productProperty",isNeedPage:"false"}},dynamicValue:{parentId:"self@id"},tempData:{},isSingle:!1,componentId:"twoLevelTable"}]}},created:function(){this.retreatId=this.initData.retreatId,this.supplierId=this.initData.supplierId,this.supplierName=this.initData.supplierName,null!=this.initData.totalSum&&(this.totalSum=this.initData.totalSum+""),this.tableConfigList[0].apiObj.params.id=this.retreatId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){},findChildrenList:function(e){var t=[];return null!=e&&null!=e[0].children&&e[0].children.length>0&&e[0].children.forEach(function(e){t.push(e)}),t},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+\\.{0,1}[0-9]{0,2}$").test(e.trim())},checkNumber:function(e,t){var i="";return null==e||0==e.trim().length?i=t+"输入为空或空字符串！":null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&(i=t+"("+e+") 输入错误，请输入大于零的正整数或(1,2)位小数！"),i},save:function(){if(this.$refs.AuditPassDialog.getData(),null!=this.rowTableList&&this.rowTableList.length>0){var e=this.findChildrenList(this.rowTableList);this.auditPass(e)}},auditPass:function(e){var t=this;if(null!=e&&0!=e.length){var i=[];e.forEach(function(e){var t={id:e.id,orderDetailId:e.orderDetailId,count:e.count,price:e.price,productId:e.productId,productGenre:e.productGenre,planDtlId:e.planDtlId,planId:e.planParentId,unitName:e.unitName,p2nFormula:e.p2nFormula};i.push(t)});var a="";null!=i&&i.length>0&&(a=JSON.stringify(i)),Object(n.auditPassPurchaseRetreat)({retreatId:this.retreatId,supplierId:this.supplierId,supplierName:this.supplierName,roleId:this.$storage.get("userInfo").roleIds,dtlJsonStr:a}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"无退货单明细数据！"})}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"AuditPassDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseRetreat_auditRetreatByPurchase_dialogAuditPass0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("通过")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAuditPass.vue";t.default=c.exports},cNy2:function(e,t,i){"use strict";var a=i("S5Lt");i.n(a).a},cS4a:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("f3/d"),i("Oyvg"),i("rGqo");var a=i("G9HT"),o=i("DlwF"),n=i("z0WU"),l=i("mSNy");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.deleteBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteBtns(scope.row,scope.$index)">删除</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.receiveCount" ></el-input>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.remark" ></el-input>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},p={components:{selectProductByEntity:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{repairTaskId:"",rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tempQuery:{},tableData:[],selectList:null,initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:c,deleteBtns:this.deleteBtns,deleteBtns_isShow:!0}},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1}},created:function(){this.repairTaskId=this.initData.repairTaskId,this.initTable("add")},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){e.forEach(function(e){for(var t in e){var i=e[t];i.indexOf("_")>0&&("en"==l.a.locale?i=i.substring(i.indexOf("_")+1):"zh"==l.a.locale&&(i=i.substring(0,i.indexOf("_"))))}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==l.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==l.a.locale&&(e.label=t.substring(0,t.indexOf("_")))),"receiveCount"===e.prop&&(e.component=d),"remark"===e.prop&&(e.component=u)}),this.internationalConfig(),e.push(this.initConfigs.tableOperates),e},internationalConfig:function(){"en"==l.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==l.a.locale&&(this.initConfigs.tableOperates.label="操作")},initTable:function(e){var t=this;this.$loading({spinner:"preloader",text:""}),Object(o.listPageRepairTaskDetail)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}({},this.tempQuery,{fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,productStockCount,receiveCount,remark",type:e,pageNo:this.pageNo})).then(function(e){t.getListPage(e),t.$loading().close()}).catch(function(e){t.$loading().close()})},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="selectProductByEntity",this.showDialog=!0,this.inLinVisible=!0},deleteBtns:function(e,t){this.tableData.splice(t,1)},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.productStockCount,n=a.receiveCount;if(null==n||0==n.trim().length)t=t+"第 "+(i+1)+" 行: 领取数量为空或空字符串！";else{var l=new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$");l.test(n)?l.test(n)&&n-0==0?t=t+"第 "+(i+1)+" 行: 领取数量("+n+")输入错误，请输入大于零的正整数或(1,2)位小数！":o-n<0&&(t=t+"第 "+(i+1)+" 行: 领取数量("+n+")输入错误，领取数量不可大于库存可用数量！"):t=t+"第 "+(i+1)+" 行: 领取数量("+n+")输入错误，请输入大于零的正整数或(1,2)位小数！"}}return t},saveWarehouseIn:function(){var e=this,t="";if(null!=this.tableData&&0!=this.tableData.length){var i=this.checkColumn(this.tableData);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{for(var a=[],n=0;n<this.tableData.length;n++){var l=this.tableData[n],s={warehouseGenre:l.warehouseGenre,taskId:this.repairTaskId,productId:l.productId,productGenre:l.productGenre,receiveCount:l.receiveCount,remark:l.remark};a.push(s)}t=JSON.stringify(a),this.dialogLoading=!0,Object(o.addRepairTaskDetail)({repairTaskId:this.repairTaskId,roleId:this.$storage.get("userInfo").roleIds,deptId:this.$storage.get("userInfo").deptId,dtlJsonStr:t}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenre:"",productGenreName:"",productUnitName:"",productStockCount:"",receiveCount:"",remark:"",warehouseGenre:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genre&&a.genre.trim().length>0&&(o.productGenre=a.genre.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),null!=a.unitName&&a.unitName.trim().length>0&&(o.productUnitName=a.unitName.trim()),null!=a.productStockCount&&a.productStockCount.trim().length>0&&(o.productStockCount=a.productStockCount.trim()),o.warehouseGenre="entity",this.tableData.push(o)}}},watch:{pageNo:function(){this.initTable("add")}}},m=i("KHd+"),h=Object(m.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{height:"300px",width:"96%","margin-left":"2%"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveWarehouseIn}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);h.options.__file="dialogProductReceive.vue";t.default=h.exports},cSYJ:function(e,t,i){},cSvC:function(e,t,i){"use strict";var a=i("W2P+");i.n(a).a},cc5z:function(e,t,i){"use strict";var a=i("ihO8");i.n(a).a},ccOI:function(e,t,i){},cgUz:function(e,t,i){"use strict";i.r(t);var a=i("WIyV"),o=i("fFEi"),n=i("MPAK"),l={components:{customBaseTable:a.a,dialogAdd:o.default},props:["initData","visible"],data:function(){return{rowData:[],rules:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageSaleDeliverDetail",params:{fieldCode:"prodInfo,orderUnitName,orderCount,pieceCountPage",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:"",isNeedPage:"false"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"pieceCountPage",width:"120",componentName:"input",_cellConfig:{}}]}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.rowData=this.initData.rowData,this.apiObj.params.parentId=e.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.tableData=[],this.tableData=e)},getData:function(){this.$refs.customBaseTable.getData()},checkColumnByTable:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o="";null!=a.pieceCountPage&&(o=a.pieceCountPage+""),null!=o&&o.trim().length>0&&!Object(n.isCountByValueSystem)(o)?t=t+"第 "+(i+1)+" 行: 件数("+o+") 输入错误，请输入大于零的正整数！":null!=o&&o.trim().length>0&&Object(n.isCountByValueSystem)(o)&&o/1<=0&&(t=t+"第 "+(i+1)+" 行: 件数("+o+") 输入错误，请输入大于零的正整数！")}return t},findPieceCount:function(e){for(var t=0,i=0;i<e.length;i++){var a=e[i],o="";null!=a.pieceCountPage&&(o=a.pieceCountPage+""),null!=o&&o.trim().length>0&&o.trim()/1>0&&(t+=o.trim()/1)}return t},findJsonStringByTable:function(e){for(var t="",i=[],a=0;a<e.length;a++){var o=e[a],n={id:o.id,pieceCount:o.pieceCountPage};i.push(n)}return i.length>0&&(t=JSON.stringify(i)),t},toNextPage:function(){if(this.tableData=[],this.getData(),null!=this.tableData&&this.tableData.length>0){var e=this.checkColumnByTable(this.tableData);if(null!=e&&e.trim().length>0)return void this.$message({type:"warning",duration:5e3,showClose:!0,message:e});var t=this.findPieceCount(this.tableData),i=this.findJsonStringByTable(this.tableData);this.dialogData.deliverId=this.rowData.id,this.dialogData.customerId=this.rowData.customerId,this.dialogData.deliverCode=this.rowData.deliverCode,this.dialogData.pieceCount=t+"",this.dialogData.deliverDtlJsonStr=i,this.dialogData.title="发货方式",this.openDialogName="dialogAdd",this.showDialog=!0,this.inLinVisible=!0}},dialogOpen:function(){},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},closeDialog:function(e){this.tableData=[],this.showDialog=!1,this.isVisible=!1,e.resState&&(this.resState=e.resState)}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"800px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_sale_deliver_listDeliver_dialogDeliverDtl0",showIndex:!1,showTableSet:!1,showCheckBox:!1,useDefaultBtn:!1,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.toNextPage}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogDeliverDtl.vue";t.default=r.exports},coZU:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("1FtD"),o=i("z0WU"),n={name:"dialog-import-excel",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"文件导入",importUrl:"",exportUrl:"",userInfo:null,excelFileList:[],excelData:{},fieldCode:"pathName,warehouseTypeName,productName,productSpec,productPictureCode,productGenreName,productUnitName,stockCount"}},components:{},beforeCreate:function(){},created:function(){this.initData.title&&(this.title=this.initData.title),this.importUrl="/api/"+this.initData.importUrl,this.initData.excelData&&(this.excelData=this.initData.excelData),this.$storage.get("userInfo")&&(this.excelData.companyId=this.$storage.get("userInfo").companyId,this.excelData.userId=this.$storage.get("userInfo").userId,this.excelData.warehouseGenre="warehouse")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(e){this.$emit("close-dialog",e||{})},importExcelChangeFile:function(e,t){this.excelFileList=[t[t.length-1]]},importExcelBeforeUpload:function(e){null!=this.excelFileList&&this.excelFileList.length>1&&this.$message({showClose:!0,message:"只能选择一个导入文件，请删除多余的导入列表！",type:"warning",duration:5e3});var t=e.name,i="";if(-1!=t.indexOf(".")&&(i=t.substr(t.indexOf(".")+1,t.length)),-1!="xls,xlsx".indexOf(i)){e.size>10485760&&this.$message({showClose:!0,message:"Excel导入文件大小不能超过 5MB!",type:"error",duration:5e3})}else this.$message({showClose:!0,message:"Excel导入文件只能支持(xls,xlsx)格式!",type:"error",duration:5e3})},importExcelSuccess:function(e){this.dialogTopLoading=!1;var t="";null!=e.msg&&e.msg.trim().length>0&&(t=e.msg.trim()),0==e.code?(this.isVisible=!1,this.$message({showClose:!0,message:t,type:"success",duration:5e3}),this.dialogClose({resState:"ok"})):0!=e.code&&this.$message({showClose:!0,message:t,type:"error",duration:0}),this.$refs.upload.clearFiles()},importExcelSubmit:function(){null==this.excelFileList||0!=this.excelFileList.length?(this.dialogTopLoading=!0,this.$refs.upload.submit()):this.$message({showClose:!0,message:"请选择导入文件！",type:"warning",duration:5e3})},exportExcelFunction:function(){var e=this;Object(a.exportExcelTemplateWarehouseInitial)({fieldCode:this.fieldCode}).then(function(t){Object(o.j)(t,"仓库货品导入.xls"),e.$message({title:"成功",message:"Excel仓库货品导入模板下载成功",type:"success",duration:2e3})}).catch(function(e){})}},computed:{},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,width:"500px",top:"40px","append-to-body":""},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}],staticStyle:{"text-align":"left","padding-left":"50px","padding-top":"20px","line-height":"20px"}},[i("span",{staticStyle:{"font-size":"16px","padding-bottom":"5px"}},[e._v("操作步骤：")]),i("br"),e._v("\n    1."),i("a",{staticStyle:{color:"#169BD5"},on:{click:e.exportExcelFunction}},[e._v("点击此处下载模板")]),i("br"),e._v("\n    2.按示例填写需要导入的数据信息"),i("br"),e._v("\n    3.请将Excel模板中示例信息删除"),i("br"),e._v("\n    4.上传过程中不要多次提交或刷新页面"),i("br"),e._v("\n    5.Excel导入文件只能支持(xls,xlsx)格式，且文件大小不能超过10M"),i("br"),i("br"),e._v(" "),i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"excelFile",action:e.importUrl,"on-change":e.importExcelChangeFile,"before-upload":e.importExcelBeforeUpload,"on-success":e.importExcelSuccess,data:e.excelData,"file-list":e.excelFileList,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"success"},on:{click:e.importExcelSubmit}},[e._v("导入")])],1),e._v(" "),i("br"),i("br")],1)])},[],!1,null,null,null);s.options.__file="dialogImportExcel.vue";t.default=s.exports},"cpQ/":function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rGqo");var a=i("mSNy"),o=i("LRel"),n=i("/nWt"),l=i("HhAy"),s=i("z0WU");function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){c(e,t,i[t])})}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" @change="colConfig.changeState(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button  v-show="colConfig.editBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.editBtns(scope.row,scope.$index)">编辑</el-button>\n      \t\t\t\t\t\t\t<el-button  v-show="colConfig.deleteBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteBtns(scope.row,scope.$index)">删除</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},p={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" width="250" align="center">\n\t\t\t      <div slot-scope="scope">\n    \t\t\t\t\t\t{{scope.row.prodInfo}}\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},m={name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,topBarBtnList:[{name:"查询",icon:"search",method:this.queryTable},{name:"重置",icon:"refresh",plain:!0,method:this.resetQueryTemp}],initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",btnName:"编辑",isPropName:!0,component:u,editBtns:this.editBtns,editBtns_isShow:!0,deleteBtns:this.deleteBtns,deleteBtns_isShow:!0}},configs:{topBarBtnList:[{name:"新增",nameEn:"add",isShow:!0,icon:"add",method:this.addNew},{name:"导出",nameEn:"export",isShow:!0,icon:"export",method:this.exportExcel}],tableConfigs:[],showCheckBox:!1,showIndex:!1,isSingle:!1},tableData:[],selectList:[],queryParms:[{name:"code"},{name:"name"}],tempQuery:{},parent:{},temp:{},tempLable:{},pageData:null,pageNo:1,openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{dialogTreeEdit:o.default,dialogView:n.default},beforeCreate:function(){},created:function(){this.parent=this.initData.temp,this.title=this.initData.title,this.configs.isSingle=this.initData.isSingle,this.userInfo=this.$storage.get("userInfo"),this.initTable(!0)},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},queryTable:function(){this.pageNo=1,this.initTable()},initTable:function(e){var t=this;t.dialogTopLoading=!0,Object(l.listPageBomTrees)(r({},t.tempQuery,{isreplaceable:"1",bomId:t.initData.temp.bomId,prodId:t.initData.temp.prodId,pageNo:t.pageNo,prodColumnKey:"code,name,spec,property",orderStr:"tree.layer asc,product.code asc"})).then(function(i){t.getListPage(i),e&&(t.dialogTopLoading=!1)}).catch(function(e){t.dialogTopLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(s.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!1,this.configs.showIndex=!0,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var o=e[i];o.indexOf("_")>0&&("en"==a.a.locale?o=o.substring(o.indexOf("_")+1):"zh"==a.a.locale&&(o=o.substring(0,o.indexOf("_")))),t.tempLable[i]=o}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==a.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==a.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"是否启用"===e.label&&(e.component=d,e.changeState=t.changeState),"货品名称"===e.label&&(e.component=p)}),e.push(t.initConfigs.tableOperates),e},editBtns:function(e,t){this.resetTemp(),this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.selectTree=this.parent,this.dialogData.temp=this.temp,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑",this.openDialogName="dialogTreeEdit",this.showDialog=!0,this.visibleState=!0},deleteBtns:function(e,t){var i=this;i.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.deleteBomTree)(e.id).then(function(e){0===e.code&&(i.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),i.refreshTable())}).catch(function(e){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},resetTemp:function(){for(var e in this.temp)this.temp[e]=""},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.refreshTable()},refreshTable:function(){var e=this;e.$axios.all([Object(l.listPageBomTrees)(r({},e.tempQuery,{isreplaceable:"1",bomId:e.initData.temp.bomId,prodId:e.initData.temp.prodId,pageNo:e.pageNo,prodColumnKey:"code,name,spec,property",orderStr:"tree.layer asc,product.code asc"}))]).then(e.$axios.spread(function(t){e.getListPage(t)})).catch(function(e){})},dataBridge:function(e){this.selectList=e},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]=""}},computed:{dialogName:function(){return this.openDialogName}},watch:{pageNo:function(){this.initTable()}}},h=i("KHd+"),g=Object(h.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{padding:"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);g.options.__file="dialogReplaceableView.vue";t.default=g.exports},d6kd:function(e,t,i){},"dB+U":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("Qe0A"),l=i("a0Xs"),s=i("wk8/");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:"null",fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1",notInids:"'def4b13175dc44b08d7a0315b811700e'"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isOnlyEntity:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05"},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(l.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={productId:l.productId,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount,remark:l.remark};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.type=this.typeData.defaultSelected[0],this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.addWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){var t=this;this.temp.deptId="",this.temp.deptName="",e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]);var i=this.temp.type;this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"5"},-1!="9459be975cd94ada8443cdf32f52c2be".indexOf(i)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}):-1!="4cba5d3815644b26920777512a20474b".indexOf(i)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}),"f2b0aaceff914acd8636700a111ca8f0"==i&&Object(s.findUserDepartmentBySystemUser)({userId:this.temp.makeId}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,"f2b0aaceff914acd8636700a111ca8f0"==type&&Object(s.findUserDepartmentBySystemUser)({userId:this.temp.makeId}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouseBySimple_outBySimple_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogAdd.vue";t.default=u.exports},dIPm:function(e,t,i){"use strict";var a=i("Aug8");i.n(a).a},dnMx:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("/a8v");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{initialPeriodDate:null,paymentPeriodDate:null,rules:{initialPeriodDate:[{required:!0,message:"请填写初始付款期间",trigger:"change"}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.initData.rowData&&(this.formData=this.initData.rowData,this.initialPeriodDate=new Date(this.initData.rowData.initialPeriodDate),null!=this.initData.rowData.paymentPeriodDate&&(this.paymentPeriodDate=new Date(this.initData.rowData.paymentPeriodDate)))},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},changeInitialPeriodDate:function(e){null!=e&&(this.initialPeriodDate=new Date(e),this.formData.initialPeriodDate=e)},changePaymentPeriodDate:function(e){this.paymentPeriodDate=new Date(e),this.formData.paymentPeriodDate=e},isErrorByPeriodDate:function(){var e=this.initialPeriodDate.getTime();if(null!=this.paymentPeriodDate&&this.paymentPeriodDate.getTime()-e<0)return this.$message({message:"当前付款期间不可小于初始付款期间！",type:"warning",duration:5e3}),!0;return!1},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&!e.isErrorByPeriodDate()&&Object(a.updateCompanyPeriod)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})},closeDialog:function(e){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"企业编码:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.companyCode,callback:function(t){e.$set(e.formData,"companyCode",t)},expression:"formData.companyCode"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"企业名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.companyName,callback:function(t){e.$set(e.formData,"companyName",t)},expression:"formData.companyName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"初始付款期间:",prop:"initialPeriodDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"month","value-format":"yyyy-MM-dd",placeholder:"选择月"},on:{change:e.changeInitialPeriodDate},model:{value:e.formData.initialPeriodDate,callback:function(t){e.$set(e.formData,"initialPeriodDate",t)},expression:"formData.initialPeriodDate"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"当前付款期间:",prop:"paymentPeriodDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"month","value-format":"yyyy-MM-dd",placeholder:"选择月",readonly:!0},on:{change:e.changePaymentPeriodDate},model:{value:e.formData.paymentPeriodDate,callback:function(t){e.$set(e.formData,"paymentPeriodDate",t)},expression:"formData.paymentPeriodDate"}})],1)],1)],1),e._v(" "),i("div",{staticStyle:{"padding-left":"6%"}},[e._v("\n    备注："),i("br"),e._v("\n    1) 初始付款期间：当前企业首次采购付款结转初始期间"),i("br"),e._v("\n    2) 当前付款期间：供应商在当前付款期间内发生的所有"),i("br"),e._v("\n            \n            \n            \n    (采购金额，付款金额)"),i("br"),e._v("\n    3) 当前付款期间：为空不填保存后默认等于初始付款期间"),i("br"),e._v("\n    例如：201903 表示2019年03月份"),i("br"),i("br")]),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},dpNl:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("a0Xs");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{formulaDialog:i("Ck00").a},name:"dialog-edit",props:["initData","visible"],data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{pnFormula:[{required:!0,trigger:"change",validator:function(t,i,a){e.temp.pnFormula?a():a(new Error("请填写计量单位转计价单位公式！"))}}],npFormula:[{required:!0,trigger:"change",validator:function(t,i,a){e.temp.npFormula?a():a(new Error("请填写计价单位转计量单位公式！"))}}],punitName:[{required:!0,trigger:"change",validator:function(t,i,a){e.unitData.defaultSelected.length<=0?a(new Error("请选择计价单位")):a()}}]},unitData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"productUnit",isglobal:"0"}},defaultSelected:[]},formTemp:[],showDialog:!1,visibleState:!1,dialogName:"",formulaState:"",Poption:"",Noption:"",Pprecision:0,Nprecision:0}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.remark=""),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},n2pIsScale:function(){return 1===this.Poption},p2nIsScale:function(){return 1===this.Noption},n2pDecimalCount:function(){return this.Pprecision},p2nDecimalCount:function(){return this.Nprecision}},methods:{closeDialog:function(e){this.visibleState=!1,this.showDialog=!1,e&&("n"===this.formulaState?this.temp.npFormula=e:this.temp.pnFormula=e)},openFormulaEdit:function(e){this.dialogName="formulaDialog",this.showDialog=!0,this.formulaState=e,this.visibleState=!0},dialogOpen:function(){this.unitData.defaultSelected=[this.initData.temp.unit],this.temp.punit=this.initData.temp.unit},unitSelect:function(e){e[0]?(this.temp.punit=e[0],this.unitData.defaultSelected=[e[0]]):(this.temp.punit=[],this.unitData.defaultSelected=[])},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){if(i){t.dialogLoading=!0;var o=t.temp.npFormula,n=t.temp.pnFormula,l="N",s=e.n2pIsScale;null!=s&&s&&(l="Y");var r="N",c=e.p2nIsScale;null!=c&&c&&(r="Y");var d={productId:t.temp.id,unit:t.temp.punit,remark:t.temp.remark,npFormula:n,n2pIsScale:l,n2pDecimalCount:e.n2pDecimalCount,pnFormula:o,p2nIsScale:r,p2nDecimalCount:e.p2nDecimalCount};Object(a.saveProductUnit)(d).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}})}}},l=(i("XAWQ"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"620px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"货品编码:",prop:"code"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.code,callback:function(t){e.$set(e.temp,"code",t)},expression:"temp.code"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"货品名称:",prop:"name"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"计量单位:"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.unitName,callback:function(t){e.$set(e.temp,"unitName",t)},expression:"temp.unitName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"计价单位:",prop:"punitName"}},[i("base-input-select",{attrs:{data:e.unitData.data},on:{callback:e.unitSelect},model:{value:e.unitData.defaultSelected,callback:function(t){e.$set(e.unitData,"defaultSelected",t)},expression:"unitData.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"计量单位转换计价单位(公式):",prop:"pnFormula"}},[i("el-input",{attrs:{type:"textarea",rows:"3",disabled:!0},model:{value:e.temp.pnFormula,callback:function(t){e.$set(e.temp,"pnFormula",t)},expression:"temp.pnFormula"}}),e._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){e.openFormulaEdit("p")}}},[e._v("公式编辑器")])],1)],1),e._v(" "),i("el-col",{staticStyle:{"padding-top":"3px"},attrs:{span:8}},[i("el-radio-group",{staticClass:"resetFormulaRadioStyle",staticStyle:{width:"100%"},model:{value:e.Poption,callback:function(t){e.Poption=t},expression:"Poption"}},[i("el-radio",{staticStyle:{display:"block",width:"100%","margin-left":"0","padding-left":"5px"},attrs:{label:1}},[e._v("需要四舍五入")]),e._v(" "),i("el-radio",{staticStyle:{display:"block",width:"100%","margin-left":"0",height:"28px","line-height":"30px","padding-left":"5px"},attrs:{label:2}},[e._v("无需四舍五入")])],1),e._v(" "),i("div",{staticClass:"resetFormulaRadioInputStyle",staticStyle:{display:"block",width:"100%","margin-left":"0","padding-left":"5px"}},[e._v("\n            保留小数"),i("el-input-number",{attrs:{size:"mini",max:4,min:0},model:{value:e.Pprecision,callback:function(t){e.Pprecision=t},expression:"Pprecision"}}),e._v("位\n          ")],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"计价单位转换计量单位(公式):",prop:"npFormula"}},[i("el-input",{attrs:{type:"textarea",rows:"3",disabled:!0},model:{value:e.temp.npFormula,callback:function(t){e.$set(e.temp,"npFormula",t)},expression:"temp.npFormula"}}),e._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){e.openFormulaEdit("n")}}},[e._v("公式编辑器")])],1)],1),e._v(" "),i("el-col",{staticStyle:{"padding-top":"3px"},attrs:{span:8}},[i("el-radio-group",{staticClass:"resetFormulaRadioStyle",staticStyle:{width:"100%"},model:{value:e.Noption,callback:function(t){e.Noption=t},expression:"Noption"}},[i("el-radio",{staticStyle:{display:"block",width:"100%","margin-left":"0","padding-left":"5px"},attrs:{label:1}},[e._v("需要四舍五入")]),e._v(" "),i("el-radio",{staticStyle:{display:"block",width:"100%","margin-left":"0",height:"28px","line-height":"30px","padding-left":"5px"},attrs:{label:2}},[e._v("无需四舍五入")])],1),e._v(" "),i("div",{staticClass:"resetFormulaRadioInputStyle",staticStyle:{display:"block",width:"100%","margin-left":"0","padding-left":"5px"}},[e._v("\n            保留小数"),i("el-input-number",{attrs:{size:"mini",max:4,min:0},model:{value:e.Nprecision,callback:function(t){e.Nprecision=t},expression:"Nprecision"}}),e._v("位\n          ")],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1),e._v(" "),e.showDialog?i(e.dialogName,{tag:"component",attrs:{state:e.formulaState,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);s.options.__file="dialogUnitAdd.vue";t.default=s.exports},eIWk:function(e,t,i){"use strict";i("rGqo"),i("dRSK"),i("SRfc"),i("xfY5"),i("7h0T"),i("KKXr"),i("pIFo");var a={name:"keyboard",components:{},props:{config:{type:Array,default:function(){return[]}},lockVar:{type:Boolean,default:!1}},data:function(){return{}},computed:{setConfig:function(){return this.config},setLockVar:function(){return this.lockVar}},watch:{},methods:{closeKeyboard:function(){this.$emit("update:popovervisible",!1)}},created:function(){},mounted:function(){}},o=(i("nXfM"),i("KHd+")),n=Object(o.a)(a,function(){var e=this.$createElement,t=this._self._c||e;return t("el-col",{staticClass:"keyboard",staticStyle:{width:"180px",height:"270px"}},[t("div",{staticClass:"buttonView clearfix"},[this._l(this.setConfig,function(e,i){return[t("div",{staticClass:"buttonBox"},[t("el-button",{staticClass:"resetIcon",attrs:{disabled:"undefined"!==e.disabled&&e.disabled,type:e.type?e.type:"primary"},on:{click:function(t){e.method(e.targetKey,e.key)}}},[t("svg-icon",{attrs:{"icon-class":e.icon}})],1)],1)]})],2),this._v(" "),t("div",{staticClass:"btns",staticStyle:{"text-align":"center",height:"50px","padding-top":"12px"}},[t("el-button",{attrs:{size:"mini"},on:{click:this.closeKeyboard}},[this._v("关闭")])],1)])},[],!1,null,null,null);n.options.__file="keyboard.vue";var l=n.exports,s=i("z0WU"),r={name:"formula-edit",props:{options:{type:Array,default:function(){return[{id:"metering",label:"N",remark:"计量单位"},{id:"valuation",label:"P",remark:"计价单位"}]}},state:[String]},data:function(){return{formData:{result:""},result:"",value:"",metering:"N",valuation:"P",userShortcuts:!1,resultRules:[{validator:function(e,t,i){if(!t)return i(new Error("请输入公式"));var a=function(e,t){if(e=e.replace(/\s/g,""),/^[\+\-\*\/]/.test(e))return"错误情况，运算符开头";if(/[\+\-\*\/]$/.test(e))return"错误情况，运算符结尾";if(""===e)return"错误情况，输入为空";if(/[\+\-\*\/]{2,}/.test(e))return"错误情况，运算符连续";if(/\(\)/.test(e))return"错误情况，空括号";if(/\.\D+/.test(e))return"错误情况，小数点后面不是数字";for(var i=[],a=0;a<e.length;a++)if("("===(o=e.charAt(a)))i.push("(");else if(")"===o){if(!(i.length>0))return!1;i.pop()}if(0!==i.length)return"错误情况，括号不配对";if(/\([\+\-\*\/]/.test(e))return"错误情况，(后面是运算符 ";if(/[\+\-\*\/]\)/.test(e))return"错误情况，)前面是运算符";if(t)for(var o,n=e.replace(/[\(\)\+\-\*\/]{1,}/g,"`"),l=n.split("`"),a=0;a<l.length;a++)if(o=l[a],/[A-Z]/i.test(o)&&void 0===t[o])return"错误情况，变量没有来自“待选公式变量”";return 1}(t),o=function(e){var t,i=e.replace(/N|P/g,1);try{t=Number.isNaN(Object(s.l)(i))}catch(e){t=!0}return t}(t);1!==a||o?i(new Error(a)):i()},trigger:"change"}],popovervisible:!1,leftStr:"",rightStr:"",lockVar:!1,keyboardConfig:[{type:"primary",method:this.inputKey,key:"(",targetKey:"rightStr",icon:"leftbracket"},{type:"primary",method:this.inputKey,key:")",targetKey:"rightStr",icon:"rightbracket"},{type:"danger",method:this.deleteKey,key:"",targetKey:"rightStr",icon:"backspace"},{type:"primary",method:this.inputKey,key:"+",targetKey:"rightStr",icon:"formulaAdd"},{type:"primary",method:this.inputKey,key:7,targetKey:"rightStr",icon:"number7"},{type:"primary",method:this.inputKey,key:8,targetKey:"rightStr",icon:"number8"},{type:"primary",method:this.inputKey,key:9,targetKey:"rightStr",icon:"number9"},{type:"primary",method:this.inputKey,key:"/",targetKey:"rightStr",icon:"formulaDivide"},{type:"primary",method:this.inputKey,key:4,targetKey:"rightStr",icon:"number4"},{type:"primary",method:this.inputKey,key:5,targetKey:"rightStr",icon:"number5"},{type:"primary",method:this.inputKey,key:6,targetKey:"rightStr",icon:"number6"},{type:"primary",method:this.inputKey,key:"*",targetKey:"rightStr",icon:"formulaMultiply"},{type:"primary",method:this.inputKey,key:1,targetKey:"rightStr",icon:"number1"},{type:"primary",method:this.inputKey,key:2,targetKey:"rightStr",icon:"number2"},{type:"primary",method:this.inputKey,key:3,targetKey:"rightStr",icon:"number3"},{type:"primary",method:this.inputKey,key:"-",targetKey:"rightStr",icon:"formulaSubtract"},{type:"primary",method:this.inputKey,key:"",targetKey:"rightStr",disabled:!0,icon:"AC"},{type:"primary",method:this.inputKey,key:0,targetKey:"rightStr",icon:"number0"},{type:"primary",method:this.inputKey,key:".",targetKey:"rightStr",icon:"spot"},{type:"warning",method:this.inputKey,key:"N",disabled:!1,targetKey:"rightStr",icon:"N"}],isParams:!1,messageStr:"N为计量单位，P为计价单位"}},components:{"key-board":l},computed:{setKey:function(){return this.value?this[this.value]:"N"},formatOptions:function(){return this.options.map(function(e){return e.isdisable=!1,e})},refreshState:function(){return!(!this.isParams&&(this.result||this.value||this.leftStr||this.rightStr))},formulaResult:function(){return this.rightStr},formulaTitle:function(){return this.result?this[this.result]+" =":""}},watch:{formulaResult:function(e){this.formData.result=e},value:function(e){var t=this.value?this[this.value]:"N";this.keyboardConfig[this.keyboardConfig.length-1].key=t,this.keyboardConfig[this.keyboardConfig.length-1].icon=t},rightStr:function(){this.rightStr.match(/[N|P]/)?(this.lockVar=!0,this.keyboardConfig[this.keyboardConfig.length-1].disabled=!0):(this.lockVar=!1,this.keyboardConfig[this.keyboardConfig.length-1].disabled=!1)}},methods:{sendFormula:function(){var e=this;this.$refs.formulaForm.validate(function(t){t&&e.result&&e.value&&e.$emit("send-formula",e.formulaTitle.replace(/\s/g,"")+e.formData.result)})},clearReslut:function(){this.rightStr=""},closeFormula:function(){this.$emit("send-formula","")},changeState:function(){"metering"===this.result?this.keyboardConfig.state="2":this.keyboardConfig.state="1"},closePopover:function(e){this["popoverVisible"+e]=!1},deleteKey:function(e){this[e].length&&(this[e]=this[e].substr(0,this[e].length-1))},inputKey:function(e,t){this[e]+=t},endInput:function(e){this["popoverVisible"+e]=!1},setSelect:function(e){this.userShortcuts=!0,this.result=e,"valuation"===e&&(this.value="metering"),"metering"===e&&(this.value="valuation")},selected:function(e){return this.value?this.result?void 0:(this.result="valuation"===e?"metering":"valuation",void(this.userShortcuts=!0)):(this.value="valuation"===e?"metering":"valuation",void(this.userShortcuts=!0))},inverseFn:function(e){if(!e)return"";var t=e.match(/N+/g),i=e.match(/P+/g);if(t&&i)return"";if(t){var a=e.match(/\((.+?)\)/g);a&&a&&a.find(function(t,i){if(t.indexOf("N")>-1){var a=e.split(t),o=a.map(function(e){return""});a.forEach(function(e,t){if(e){var i=e.charAt(0),a=e.charAt(e.length-1),n={};if(i&&/[\+\-\*\/]/.test(i)){switch(i){case"+":n.symbol="-";break;case"-":n.symbol="+";break;case"*":n.symbol="/";break;case"/":n.symbol="*"}n.position="left",n.str=e.substring(1)}else if(a&&/[\+\-\*\/]/.test(a)){switch(a){case"+":n.symbol="-";break;case"-":n.symbol="+";break;case"*":n.symbol="/";break;case"/":n.symbol="*"}n.position="right",n.str=e.substring(0,e.length-1)}o.splice(t,1,n)}}),o.forEach(function(e,t){e&&("left"===e.position?e.str=e.symbol+e.str:"right"===e.position&&("*"===e.symbol?e.str=e.str+"/":"+"===e.symbol?e.str=e.str+"-":e.str=e.symbol+e.str))})}})}}},created:function(){this.state&&(this.isParams=!0,this.userShortcuts=!0,"n"===this.state&&(this.result="metering")&&(this.value="valuation"),"p"===this.state&&(this.result="valuation")&&(this.value="metering"))},mounted:function(){},beforeDestroy:function(){}},c=(i("Y29c"),Object(o.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"formulaEdit"},[i("el-form",{ref:"formulaForm",attrs:{"label-position":"right",model:e.formData,"label-width":"85px"}},[i("el-form-item",{attrs:{label:"变量说明："}},[i("el-input",{staticStyle:{"text-align":"left"},attrs:{disabled:!0},domProps:{textContent:e._s(e.messageStr)}})],1),e._v(" "),i("el-form-item",{attrs:{label:"公式预览：",prop:"result",rules:e.resultRules}},[i("el-input",{staticClass:"resetSpan",attrs:{disabled:!0},model:{value:e.formData.result,callback:function(t){e.$set(e.formData,"result",t)},expression:"formData.result"}},[i("span",{staticStyle:{width:"100%"},attrs:{slot:"prefix"},slot:"prefix"},[i("span",{domProps:{textContent:e._s(e.formulaTitle)}})])])],1),e._v(" "),i("el-form-item",{attrs:{label:"公式输入："}},[i("el-row",{staticStyle:{"text-align":"center"}},[i("el-col",{attrs:{span:5}},[i("el-select",{attrs:{disabled:!!e.result&&e.userShortcuts,"popper-class":"popperClass",placeholder:"设置变量"},on:{change:e.selected},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.formatOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.label,value:t.id}},[i("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),e._v(" "),t.remark?i("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.remark))]):e._e()])}),1)],1),e._v(" "),i("el-col",{staticStyle:{color:"#000","padding-top":"5px"},attrs:{span:2}},[i("el-button",{staticClass:"resetIcon onesIcon",attrs:{disabled:!0}},[i("svg-icon",{attrs:{"icon-class":"equal"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:15}},[i("el-popover",{attrs:{title:"公式键盘"},model:{value:e.popovervisible,callback:function(t){e.popovervisible=t},expression:"popovervisible"}},[i("key-board",{attrs:{config:e.keyboardConfig,lockVar:e.lockVar,popovervisible:e.popovervisible},on:{"update:popovervisible":function(t){e.popovervisible=t}}}),e._v(" "),i("el-input",{ref:"popoverInput1",attrs:{slot:"reference",readonly:!0,placeholder:"点击输入常量"},on:{focus:e.changeState},slot:"reference",model:{value:e.rightStr,callback:function(t){e.rightStr=t},expression:"rightStr"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{color:"#000","padding-top":"5px"},attrs:{span:2}},[i("el-button",{staticClass:"resetIcon onesIcon",attrs:{title:"重置公式",type:"primary",disabled:e.refreshState},on:{click:e.clearReslut}},[i("svg-icon",{attrs:{"icon-class":"refresh"}})],1)],1)],1)],1)],1),e._v(" "),i("el-row",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary"},on:{click:e.sendFormula}},[e._v("保 存")]),e._v(" "),i("el-button",{on:{click:e.closeFormula}},[e._v("关 闭")])],1)],1)},[],!1,null,null,null));c.options.__file="index.vue";t.a=c.exports},eujW:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("uvxH");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{rebackBillReason:[{required:!0,message:"请填写退单原因！",trigger:"change"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;e.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.rebackWarehouseMoveDetail)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退单原因:",prop:"rebackBillReason"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.rebackBillReason,callback:function(t){e.$set(e.temp,"rebackBillReason",t)},expression:"temp.rebackBillReason"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogRebackBill.vue";t.default=s.exports},evI9:function(e,t,i){"use strict";var a=i("MYqs");i.n(a).a},evdt:function(e,t,i){"use strict";i.d(t,"b",function(){return s}),i.d(t,"a",function(){return r});i("91GP"),i("Z2Ku"),i("INYr"),i("rGqo");var a=i("z0WU"),o=i("Yfch"),n=i("F9dT"),l=i("YP4+");function s(e,t){return function e(t,i,s,r){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var d=r.tableConfigList[i]?r.tableConfigList[i].customColumn||[]:r.setCustomColumn||r.customColumn;var u=d.filter(function(e){if(e._cellConfig&&e._cellConfig.compute)return e});var p=r.tableConfigList[i]?r.tableConfigList[i].tempData||{}:r.tempData||{};var m=r.tableConfigList[i]?r.tableConfigList[i].precision||l.a.precision:r.precision||l.a.precision;var h=(g=["cascader","select"],f=[],d.forEach(function(e){e.componentName&&"dynaContent"===e.componentName&&e._cellConfig&&e._cellConfig.contentConfigs&&e._cellConfig.contentConfigs.findIndex(function(e){return e.componentName&&g.includes(e.componentName)})&&f.push(e)}),f);var g,f;if(t&&t.result){t.result.titles="string"==typeof t.result.titles?JSON.parse(t.result.titles):t.result.titles,t.result.varList="string"==typeof t.result.varList?JSON.parse(t.result.varList):t.result.varList,t.result.pageData="string"==typeof t.result.pageData?JSON.parse(t.result.pageData):t.result.pageData;var b=Object(a.o)(t.result),v=function(e,t,i){return(t[i]&&Array.isArray(t[i])?t[i]:t).forEach(function(t){Object(o.b)(t.columnIndex)?e.splice(t.columnIndex,0,t):"first"===t.columnIndex?e.unshift(t):"last"===t.columnIndex?e.push(t):e.some(function(e){if(e.prop===t.columnIndex)return Object.assign(e,t),!0})}),e}(b,d,i);t.result.varList.forEach(function(o,l){if(o._internalId=Object(a.q)(),o._pInternalId=s,o.rowState="1",u.forEach(function(e){var i=Object(n.c)([e._cellConfig.compute],o,c.concat([o]),t.result.varList,"",p,e._cellConfig.precision||m);o[e.columnIndex]=i[0]}),h.forEach(function(e){o["_".concat(e.prop||e.columnIndex)]=[]}),o.titles&&o.hideTitles&&o.children&&o.children.length){var d={result:{titles:o.titles,hideTitles:o.hideTitles,varList:o.children,pageData:o.pageData||{}}},g=e(d,i+1,o._internalId,r,c.concat([o]));o.titleList=g.titleList,o.pageData=g.pageData}});var D={titleList:v,pageData:t.result.pageData,tableData:t.result.varList};return function(e,t,i){var a=i.tableConfigList[t]?i.tableConfigList[t].mergeTitle||[]:i.mergeTitle||[],o=i.tableConfigList[t]?i.tableConfigList[t].postfix||null:i.postfix||null;o&&(e.titleList=e.titleList.map(function(e){return e.postfix=o[e.prop]||null,e})),a.forEach(function(t,i){var a="",o=[],n=t.width||"",l=[];t.columns.forEach(function(t){if("string"==typeof t){var i=e.titleList.findIndex(function(e){if(e.prop===t)return l.push(e),!0});i>-1&&(o=o.concat(e.titleList.splice(i,1)))}else{var a=e.titleList.findIndex(function(e){if(e.prop===t.keyName)return l.push(Object.assign({},e,t)),!0});a>-1&&(o=o.concat(e.titleList.splice(a,1)))}}),a=t.alias?t.alias:"mergeKey"+i,e.titleList.splice(t.index-1,0,{prop:a,label:a,mergeTitles:o,width:n}),e.tableData.forEach(function(e){e[a]=l.map(function(t){var i=Object.assign({},t);return i._mergeValue=e[i.prop]||"",i})})}),e.titleList.forEach(function(e){!e.mergeTitles&&!e.component&&e.columnIndex&&(e.mergeTitles=[JSON.parse(JSON.stringify(e))])})}(D,i,r),D}return{}}(e,t.layer,"",t)}function r(e,t,i){return e.map(function(e){var a;switch(e){case"yesterday":a={text:"昨天",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-864e5<t?t:i.getTime()-864e5),e.$emit("pick",i)}};break;case"today":a={text:"今天",onClick:function(e){e.$emit("pick",new Date)}};break;case"tomorrow":a={text:"明天",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+864e5>i?i:t.getTime()+864e5),e.$emit("pick",t)}};break;case"lastWeek":a={text:"上周",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-6048e5<t?t:i.getTime()-6048e5),e.$emit("pick",i)}};break;case"nextWeek":a={text:"下周",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+6048e5>i?i:t.getTime()+6048e5),e.$emit("pick",t)}};break;case"lastMonth":a={text:"上月",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-2592e6<t?t:i.getTime()-2592e6),e.$emit("pick",i)}};break;case"nextMonth":a={text:"下月",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+2592e6>i?i:t.getTime()+2592e6),e.$emit("pick",t)}};break;case"lastYear":a={text:"去年",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-31536e6<t?t:i.getTime()-31536e6),e.$emit("pick",i)}};break;case"nextYear":a={text:"明年",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+31536e6>i?i:t.getTime()+31536e6),e.$emit("pick",t)}}}return a})}},exoO:function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=(i("z0WU"),{components:{multilevelTable:a.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tableData:[],selectList:[],configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:this.initData.temp.id}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseOutExecutes",params:{isNeedPage:"false",fieldCode:"name,actualCount,executorName,endDate"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},databridge:function(e){this.selectList=e},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1;null!=e.selectList&&e.selectList}},watch:{}}),n=(i("/Axa"),i("Xxid"),i("KHd+")),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"90px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_officeSupplies_officeSuppliesOut_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogView.vue";t.default=l.exports},"f/WR":function(e,t,i){"use strict";i("XfO3"),i("HEwt"),i("a1Th"),i("rE2o"),i("ioFf"),i("dRSK"),i("rGqo"),i("91GP");var a=i("z0WU"),o=i("Yfch");function n(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l={props:["colConfig","fixed"],template:'<el-table-column :label="colConfig.label" :fixed="fixed" :sortable="colConfig.sortable" align="center">\n    \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n    \t\t\t\t\t  <template v-for="(item, index) in colConfig.rowMethods">\n    \t\t\t\t\t    <el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="item.method(scope.row,scope.$index)" v-text="item.name"></el-button>\n                </template>\n    \t\t\t\t\t</div>\n  \t\t\t\t</el-table-column>'},s={components:{},name:"transfer-table",props:{tableConfigs:{type:Object,default:function(){return{}}},btnList:{type:Array,default:function(){return[]}},upTableBtnTemplate:{type:Array,default:function(){return[]}},downTableBtnTemplate:{type:Array,default:function(){return[]}},apiData:{type:Object,default:function(){return{}}},stateBtn:{type:Object,default:function(){return{}}}},data:function(){return{btnsBoxHeight:0,currentpage:1,tableLoading:!1,tableData:[],resultTableData:[],titleList:[],pageData:{},tableBtns:{columnIndex:"last",prop:"operate",label:"操作",component:l,rowMethods:[{name:"删除",method:this.deleteRow}]},rowKey:"",tempSelectList:[],stateBtnChecked:!1}},computed:{setTablesHeight:function(){return this.stateBtn.title?{height:"calc(50% - 15px)"}:{height:"calc(50% - 6px)"}},setResultBtnState:function(){var e=this;return function(t){return!e.resultTableData.length&&t.state}},setTableConfigs:function(){var e=n(this.titleList).slice(0);return{titleList:this.addTableTitle(e,this.upTableBtnTemplate),showIndex:void 0!==this.tableConfigs.showIndex&&this.tableConfigs.showIndex,isSingle:void 0!==this.tableConfigs.isSingle&&this.tableConfigs.isSingle,isSortable:void 0!==this.tableConfigs.isSortable&&this.tableConfigs.isSortable}},setResultTableConfigs:function(){var e=n(this.titleList).slice(0);return this.downTableBtnTemplate.length?this.addTableTitle(e,this.downTableBtnTemplate):this.addTableTitle(e,[this.tableBtns])},setResultTableData:function(){return[].concat(this.resultTableData)}},watch:{currentpage:function(){var e=Object.assign({},this.apiData.params);e.pageNo=this.currentpage,this.httpTableMethod(this.apiData.apiName,e)},setResultTableData:function(){this.$emit("table-selected",this.setResultTableData)},stateBtnChecked:function(){var e={};e[this.stateBtn.keyName?this.stateBtn.keyName:"isShow"]=this.stateBtnChecked,this.httpTableMethod(this.apiData.apiName,this.apiData.params,e)},"apiData.params":function(){this.httpTableMethod(this.apiData.apiName,this.apiData.params)}},created:function(){this.apiData.apiName?(this.httpTableMethod(this.apiData.apiName,this.apiData.params),this.rowKey=this.tableConfigs.rowKey||"id"):this.$message({message:"没有设置接口名",type:"error",duration:1e4})},mounted:function(){this.$nextTick(function(){this.btnsBoxHeight=this.$refs.btnsBox.clientHeight+5})},methods:{clearTableSelected:function(){var e=this;this.resultTableData=[],this.tempSelectList=[],this.tableData.forEach(function(t){e.$refs.selectTable.$refs.baseTable.clearSelection()})},httpTableMethod:function(e,t,i){var a=this;this.tableLoading=!0,this.$api[e](Object.assign({},t,i)).then(function(e){a.getListPage(e),a.tableLoading=!1}).catch(function(e){a.tableLoading=!1})},getListPage:function(e){var t=this;e&&(e.result.titles="string"==typeof e.result.titles?JSON.parse(e.result.titles):e.result.titles,e.result.varList="string"==typeof e.result.varList?JSON.parse(e.result.varList):e.result.varList,e.result.pageData="string"==typeof e.result.pageData?JSON.parse(e.result.pageData):e.result.pageData,this.titleList=Object(a.o)(e.result),this.pageData=e.result.pageData,this.tableData=e.result.varList||[],this.tempSelectList=[],this.$nextTick(function(e){t.toggleRowSelected()}))},toggleRowSelected:function(){var e=this;this.tableData.forEach(function(t){e.resultTableData.some(function(i){return t[e.rowKey]===i[e.rowKey]})?(e.$refs.selectTable.$refs.baseTable.toggleRowSelection(t,!0),!e.tempSelectList.some(function(i){return i[e.rowKey]===t[e.rowKey]})&&e.tempSelectList.push(t)):e.$refs.selectTable&&e.$refs.selectTable.$refs.baseTable.toggleRowSelection(t,!1)})},addTableTitle:function(e,t){return t&&t.length&&t.forEach(function(t){Object(o.b)(t.columnIndex)?e.splice(t.columnIndex,0,t):"first"===t.columnIndex?e.unshift(t):"last"===t.columnIndex?e.push(t):e.some(function(e){if(e.prop===t.columnIndex)return Object.assign(e,t),!0})}),e},dataBridge:function(e,t){this.getChecked(t,e)?this.addRowData(t):this.removeRowData(t)},resultDataBridge:function(e,t){},deleteRow:function(e,t){var i=this;this.resultTableData.find(function(t,a){if(e[i.rowKey]===t[i.rowKey])return i.resultTableData.splice(a,1),t}),this.toggleRowSelected()},updateView:function(e,t){this.resultTableData.splice(t-1,1,e)},getChecked:function(e,t){var i=this;return e?t.some(function(t){return e[i.rowKey]===t[i.rowKey]}):(t.length&&(this.tempSelectList=t),!!t.length)},addRowData:function(e){var t=this;e?!this.resultTableData.some(function(i){return e[t.rowKey]===i[t.rowKey]})&&this.resultTableData.push(e):this.addAllRowData()},addAllRowData:function(){var e=this;this.resultTableData.length?this.tempSelectList.forEach(function(t){e.addRowData(t)}):this.resultTableData=this.tempSelectList},removeRowData:function(e){var t=this;e?this.resultTableData.some(function(i,a){if(e[t.rowKey]===i[t.rowKey])return t.resultTableData.splice(a,1),!0}):this.tableData.forEach(function(e){t.removeRowData(e)})}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"myCoustomTable resetTransferTableStyle",staticStyle:{height:"100%",padding:"10px"}},[e.stateBtn.title?i("div",{staticStyle:{"text-align":"right"}},[i("el-checkbox",{model:{value:e.stateBtnChecked,callback:function(t){e.stateBtnChecked=t},expression:"stateBtnChecked"}},[e._v(e._s(e.stateBtn.title))])],1):e._e(),e._v(" "),i("div",{style:e.setTablesHeight},[i("base-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"selectTable",attrs:{data:e.tableData,colConfigs:e.setTableConfigs.titleList,showCheckBox:!0,showIndex:e.setTableConfigs.showIndex,pageData:e.pageData,currentpage:e.currentpage,isSingle:e.setTableConfigs.isSingle,isSortable:e.setTableConfigs.isSortable,isFixed:1},on:{"update:currentpage":function(t){e.currentpage=t},databridge:e.dataBridge}})],1),e._v(" "),i("div",{staticStyle:{height:"11px"}}),e._v(" "),i("div",{ref:"resultBox",staticStyle:{position:"relative"},style:e.setTablesHeight},[i("div",{staticStyle:{height:"100%"},style:{paddingBottom:e.btnsBoxHeight+"px"}},[i("base-table",{ref:"resultTable",attrs:{data:e.setResultTableData,colConfigs:e.setResultTableConfigs,showCheckBox:!1,showIndex:e.setTableConfigs.showIndex,isSingle:e.setTableConfigs.isSingle,isSortable:e.setTableConfigs.isSortable,isFixed:1},on:{databridge:e.resultDataBridge}})],1),e._v(" "),i("div",{ref:"btnsBox",staticStyle:{position:"absolute",bottom:"0",right:"0"}},[e.btnList.length?[e._l(e.btnList,function(t,a){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:a,attrs:{name:t.name,icon:t.icon,plain:t.plain,state:e.setResultBtnState(t)},on:{myclick:t.method}})]})]:e._e()],2)])])},[],!1,null,null,null);c.options.__file="index.vue";t.a=c.exports},f3NL:function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=i("/Zso"),n={components:{multilevelTable:a.a,dialogRebackWarehouseOut:o.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tableData:[],selectList:[],configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:this.initData.temp.id}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseOutExecutes",params:{fieldCode:"warehouseName,actualCount,executorName,endDate",executeIsdisable:"1",isNeedPage:"false"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},databridge:function(e){this.selectList=e},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.showDialog=!1,this.isVisible=!1}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"90px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseBySimple_outBySimple_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogView.vue";t.default=s.exports},fFEi:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d"),i("rGqo"),i("yt8O"),i("XfO3"),i("9AAn");var a=i("MPAK"),o=i("AUoE");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{},name:"dialog-add",props:["initData","visible"],mixins:[i("K77I").a],data:function(){return{deliverId:"",customerId:"",deliverCode:"",deliverType:"send",deliverTypeNameKeyMap:new Map([["send","1"],["deliver","2"],["self","3"]]),isShowSend:!0,isShowDeliver:!1,isShowSelf:!1,dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{deliverId:"",type:"",makeId:"",makeName:"",deliverDate:new Date,waybillCompany:"",waybillCode:"",customeAddressId:"",custAddress:"",custAddressName:"",custMobile:"",carCode:"",remark:"",pieceCount:"",deliverDtlJsonStr:""},tempLable:{},tempNotEditable:{},rules:{makeName:[{required:!0,message:"请选择经办人",trigger:"change"}],deliverDate:[{required:!0,message:"请填写发货日期",trigger:"change"}],pieceCount:[{required:!0,message:"请填写件数",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",fullscreen:!1,tempLable:null},formTemp:[],MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择经办人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}},CustAddressDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择收货地址",tableUrl:"/base/customeAddress/listPageCustomeAddress",tableParm:{customerId:"",fieldCode:"name,mobile,address"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.deliverId=this.initData.deliverId,this.customerId=this.initData.customerId,this.deliverCode=this.initData.deliverCode,this.temp.pieceCount=this.initData.pieceCount,this.temp.deliverDtlJsonStr=this.initData.deliverDtlJsonStr,this.CustAddressDialog.dialog.data.tableParm.customerId=this.initData.customerId;var e=this.$storage.get("userInfo");null!=e.userId&&e.userId.trim().length>0&&(this.temp.makeId=e.userId.trim()),null!=e.userName&&e.userName.trim().length>0&&(this.temp.makeName=e.userName.trim())},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},radioChange:function(){this.isShowSend=!1,this.isShowDeliver=!1,this.isShowSelf=!1,"send"==this.deliverType?this.isShowSend=!0:"deliver"==this.deliverType?this.isShowDeliver=!0:"self"==this.deliverType&&(this.isShowSelf=!0)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},custAddressSelect:function(e){e[0]&&(this.temp.customeAddressId=e[0].id,this.temp.custAddressName=e[0].name,this.temp.custMobile=e[0].mobile,this.temp.custAddress=e[0].address)},changePieceCount:function(e){var t=this.checkValueNumber(e,"件数");null!=t&&t.trim().length>0&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t})},checkValueNumber:function(e,t){var i="";return null==e||0==e.trim().length?i=t+"为空或空字符串！":null!=e&&e.trim().length>0&&!Object(a.isCountByValueSystem)(e.trim())&&(i=t+"("+e+")输入错误，请输入大于零的正整数！"),i},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){var i=e.temp.pieceCount,a=e.checkValueNumber(i,"件数");if(null!=a&&a.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:a});e.dialogLoading=!0,e.temp.deliverId=e.deliverId,e.temp.customerId=e.customerId,e.temp.deliverCode=e.deliverCode,e.temp.type=e.deliverTypeNameKeyMap.get(e.deliverType),Object(o.updateSaleDeliverByDeliverType)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}})},closeDialog:function(e){}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"600px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 0px 0px 20px"}},[i("el-form",{ref:"submitForm",attrs:{inline:!0,rules:e.rules,model:e.temp,"label-position":"right","label-width":"95px"}},[i("el-row",{staticStyle:{"text-align":"center",margin:"0px 0px 20px 0px"}},[i("el-radio-group",{on:{change:e.radioChange},model:{value:e.deliverType,callback:function(t){e.deliverType=t},expression:"deliverType"}},[i("el-radio",{attrs:{label:"send"}},[e._v("发货")]),e._v(" "),i("el-radio",{attrs:{label:"deliver"}},[e._v("送货")]),e._v(" "),i("el-radio",{attrs:{label:"self"}},[e._v("客户自提")])],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"经办人：",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"170px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"发货日期：",prop:"deliverDate"}},[i("el-date-picker",{staticStyle:{width:"170px"},attrs:{type:"date",placeholder:"发货日期","value-format":"yyyy-MM-dd"},model:{value:e.temp.deliverDate,callback:function(t){e.$set(e.temp,"deliverDate",t)},expression:"temp.deliverDate"}})],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSend,expression:"isShowSend"}]},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"物流公司：",prop:"waybillCompany"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.waybillCompany,callback:function(t){e.$set(e.temp,"waybillCompany",t)},expression:"temp.waybillCompany"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"物流单号：",prop:"waybillCode"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.waybillCode,callback:function(t){e.$set(e.temp,"waybillCode",t)},expression:"temp.waybillCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"收货地址：",prop:"custAddress"}},[i("base-input-option",{staticStyle:{width:"170px"},attrs:{dialog:e.CustAddressDialog.dialog},on:{callback:e.custAddressSelect},model:{value:e.temp.custAddress,callback:function(t){e.$set(e.temp,"custAddress",t)},expression:"temp.custAddress"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"联系人：",prop:"custAddressName"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.custAddressName,callback:function(t){e.$set(e.temp,"custAddressName",t)},expression:"temp.custAddressName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"手机号：",prop:"custMobile"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.custMobile,callback:function(t){e.$set(e.temp,"custMobile",t)},expression:"temp.custMobile"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"件数：",prop:"pieceCount"}},[i("el-input",{staticStyle:{width:"170px"},on:{change:e.changePieceCount},model:{value:e.temp.pieceCount,callback:function(t){e.$set(e.temp,"pieceCount",t)},expression:"temp.pieceCount"}})],1)],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowDeliver,expression:"isShowDeliver"}]},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"车牌号：",prop:"carCode"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.carCode,callback:function(t){e.$set(e.temp,"carCode",t)},expression:"temp.carCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"收货地址：",prop:"custAddress"}},[i("base-input-option",{staticStyle:{width:"170px"},attrs:{dialog:e.CustAddressDialog.dialog},on:{callback:e.custAddressSelect},model:{value:e.temp.custAddress,callback:function(t){e.$set(e.temp,"custAddress",t)},expression:"temp.custAddress"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"联系人：",prop:"custAddressName"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.custAddressName,callback:function(t){e.$set(e.temp,"custAddressName",t)},expression:"temp.custAddressName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"手机号：",prop:"custMobile"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.custMobile,callback:function(t){e.$set(e.temp,"custMobile",t)},expression:"temp.custMobile"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"件数：",prop:"pieceCount"}},[i("el-input",{staticStyle:{width:"170px"},on:{change:e.changePieceCount},model:{value:e.temp.pieceCount,callback:function(t){e.$set(e.temp,"pieceCount",t)},expression:"temp.pieceCount"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}})],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSelf,expression:"isShowSelf"}]},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"车牌号：",prop:"carCode"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.carCode,callback:function(t){e.$set(e.temp,"carCode",t)},expression:"temp.carCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"件数：",prop:"pieceCount"}},[i("el-input",{staticStyle:{width:"170px"},on:{change:e.changePieceCount},model:{value:e.temp.pieceCount,callback:function(t){e.$set(e.temp,"pieceCount",t)},expression:"temp.pieceCount"}})],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[i("el-input",{staticStyle:{width:"460px"},attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogAdd.vue";t.default=r.exports},fFUy:function(e,t,i){"use strict";i("rE2o"),i("ioFf"),i("yt8O"),i("RW0V"),i("INYr"),i("rGqo"),i("91GP"),i("pIFo"),i("Oyvg"),i("xfY5"),i("XfO3"),i("HEwt"),i("a1Th"),i("dRSK"),i("KKXr");var a=i("yO6P"),o=i("F9dT"),n=i("TB3a"),l=i("z0WU");function s(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{},name:"custom-header-children-table",props:{mergeColumn:{type:Object,default:function(){return{}}},configs:{type:Object,default:function(){return{}}},layer:{type:Number,default:1},apiObj:{type:Object,default:function(){return{}}},customColumn:{type:Object,default:function(){return{}}},editable:[Object,Array],precision:{type:Number,default:2},data:{type:Array,default:function(){return[]}},titleList:{type:Array,default:function(){return[]}},guid:{type:String,default:""},parent:{type:Array,default:function(){return[]}},rowChain:{type:Array,default:function(){return[]}}},data:function(){return{wrapperWidth:0,tableWidth:0,fixedList:[],getRowKey:function(e){return e.id},tableObj:{},parentId:"",tempType:[],setRowChain:[],baseRules:null,ruleForm:{tableData:[]},restaurants:[],debounce:300,selectOptionList:[],selectLoading:!1,removalList:[],selectOptionObj:{}}},directives:{"auto-width":{},"content-set":{inserted:function(e,t,i){var a=t.value.config._cellConfig&&t.value.config._cellConfig.contentSet||"";if(a){var n=a.state||{},s=i.context,r=a.style||{};for(var c in n)if(n.hasOwnProperty(c))for(var d in r)r.hasOwnProperty(d)&&(e.style[d]=Object(l.l)(r[d].replace(c,Object(o.c)([n[c]],t.value.row,[],s.setTableData,!1,null)[0])))}}}},computed:{setTableHeight:function(){return this.showPageData?"calc(100% - 40px)":"100%"},setShowCheckBox:function(){return!(!this.configs[this.layer]||!this.configs[this.layer].showCheckBox)},setShowIndex:function(){return!(!this.configs[this.layer]||!this.configs[this.layer].showIndex)},setTitleList:function(){return this.titleList},setTableData:function(){var e=this;return this.data.forEach(function(t,i){t._pid=e.parentId,t.index=i}),this.data},computedKeys:function(){var e=[];if(this.data[0]&&this.data[0]._editConfig)for(var t in this.data[0]._editConfig)this.data[0]._editConfig.hasOwnProperty(t)&&this.data[0]._editConfig[t].compute&&e.push(t);return e},createSelectOptions:function(){var e=[];return this.setTableData.forEach(function(t,i){var a={};if(t._editConfig&&"object"===r(t._editConfig))for(var o in t._editConfig)t._editConfig.hasOwnProperty(o)&&"select"===t._editConfig[o].type&&(t._editConfig[o].asyn&&t._editConfig[o].asyn.apiName?a[o]=[]:t._editConfig[o].options&&(a[o]=t._editConfig[o].options.length?t._editConfig[o].options:[]));e[i]=a}),e}},created:function(){this.parentId=this.parent[0].id,this.setRowChain=this.rowChain.concat(this.parent),this.baseRules=this.createRult(),this.ruleForm.tableData=this.setTableData,this.selectOptionList=this.createSelectOptions},mounted:function(){},updated:function(){var e=this;this.$nextTick(function(t){e.$refs.baseTable.doLayout(),e.$emit("do-layout")})},watch:{},methods:{createStepStyle:function(e,t,i){var a=parseInt(t.row[i.keyName])||0;return e<a?{"background-color":"rgb(0,176,240)",color:"#ffffff","flex-basis":"".concat(100/i.componentConfig.titleList.length,"%")}:e===a?{"background-color":"rgb(255,192,0)","flex-basis":"".concat(100/i.componentConfig.titleList.length,"%")}:{"background-color":"rgb(191,191,191)",color:"#ffffff","flex-basis":"".concat(100/i.componentConfig.titleList.length,"%")}},createStepArrowStyle:function(e,t,i){var a=parseInt(t.row[i.keyName])||0;return e<a?{"border-left":"10px solid rgb(0,176,240)"}:e===a?{"border-left":"10px solid rgb(255,192,0)"}:{"border-left":"10px solid rgb(191,191,191)"}},mergeColumnEvents:function(e,t){"navigation"===e.events.type&&this.$router.push({path:"/"+e.events.path})},httpRemoval:function(e,t,i){if(this.removalList.length){var a=this.setParams(e,t),o=this.removalList.some(function(i){if(i.apiName===e._editConfig[t].asyn.apiName){if((new Date).getTime()-i.timeStamp>3e4)return i.timeStamp=(new Date).getTime(),i.params=a,!0;for(var o in i.params)if(i.params.hasOwnProperty(o)&&i.params[o]!==a[o])return i.timeStamp=(new Date).getTime(),i.params=a,!0}});return this.removalList.some(function(i){return i.apiName!==e._editConfig[t].asyn.apiName})?(this.removalList.push({apiName:e._editConfig[t].asyn.apiName,params:this.setParams(e,t),timeStamp:(new Date).getTime()}),!0):o}var n={apiName:e._editConfig[t].asyn.apiName,params:this.setParams(e,t),timeStamp:(new Date).getTime()};return this.removalList.push(n),!0},getSelectOptions:function(e,t,i){var a=this;e._editConfig[t]&&e._editConfig[t].asyn&&(this.httpRemoval(e,t,i)?(this.selectLoading=!0,this.$api[e._editConfig[t].asyn.apiName](this.setParams(e,t)).then(function(o){a.selectLoading=!1,a.selectOptionList[i][t]=o.result.options,a.selectOptionObj[e._editConfig[t].asyn.apiName]=o.result.options}).catch(function(e){})):this.selectOptionList[i][t]=this.selectOptionObj[e._editConfig[t].asyn.apiName])},setParams:function(e,t){var i=Object.assign({},e._editConfig[t].asyn.params);for(var a in i)i.hasOwnProperty(a)&&!i[a]&&(i[a]=e[a]||"");return Object.assign({},i)},defaultValue:function(e,t,i){var a=Object(o.c)(e?[e]:[],t,this.setRowChain,this.data);1===a.length&&t._editConfig[i].compute&&(t[i]=this.computeVal(t._editConfig[i].compute,t,i)),a.length>1&&(t[i]=a[0])},computeVal:function(e,t,i){var a=e.split(/\([\\+|\-|\\*|\\/]\)/);if(a.length>1){var l=Object(o.b)(a,t,this.setRowChain,this.data,e);return n.a.formatDate(l)}return t[i]},setCloWidth:function(e){var t="";if(!Array.isArray(this.editable)){var i=this.editable[e.prop]?this.editable[e.prop].type:"";switch(i){case"date":t="180";break;case"cascader":case"select":case"inputNumber":break;case"time":t="140";break;case"dateTime":t="220"}}return t},pickerOptions:function(e,t){var i,a,o=e._editConfig[t];o.greaterThan&&(i=this.formatDates(e,t,o.greaterThan,!1)),o.lessThan&&(a=this.formatDates(e,t,o.lessThan,!0));var n,l,s={};return s.disabledDate=function(e){return i&&a?!(e.getTime()>i&&e.getTime()<a-864e5):i&&!a?e.getTime()<i:!(i||!a)&&e.getTime()>a+864e5},i&&o.greaterThan[o.greaterThan.length-1]&&(n=i+864e5),a&&o.lessThan[o.lessThan.length-1]&&(l=a-864e5),o.shortcuts&&(s.shortcuts=this.createShortcuts(o.shortcuts,n,l)),s},formatDates:function(e,t,i,a){var l,r,c=Object(o.c)(i,e,this.setRowChain,this.data);return"boolean"==typeof c[c.length-1]&&(l=c.pop()),a?(r=Math.min.apply(Math,s(c.map(function(e){return n.a.timeStamp(e)}))),l&&(r+=864e5)):(r=Math.max.apply(Math,s(c.map(function(e){return n.a.timeStamp(e)}))),l&&(r-=864e5)),r},createShortcuts:function(e,t,i){return e.map(function(e){var a;switch(e){case"yesterday":a={text:"昨天",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-864e5<t?t:i.getTime()-864e5),e.$emit("pick",i)}};break;case"today":a={text:"今天",onClick:function(e){e.$emit("pick",new Date)}};break;case"tomorrow":a={text:"明天",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+864e5>i?i:t.getTime()+864e5),e.$emit("pick",t)}};break;case"lastWeek":a={text:"上周",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-6048e5<t?t:i.getTime()-6048e5),e.$emit("pick",i)}};break;case"nextWeek":a={text:"下周",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+6048e5>i?i:t.getTime()+6048e5),e.$emit("pick",t)}};break;case"lastMonth":a={text:"上月",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-2592e6<t?t:i.getTime()-2592e6),e.$emit("pick",i)}};break;case"nextMonth":a={text:"下月",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+2592e6>i?i:t.getTime()+2592e6),e.$emit("pick",t)}};break;case"lastYear":a={text:"去年",onClick:function(e){var i=new Date;i.setTime(t&&i.getTime()-31536e6<t?t:i.getTime()-31536e6),e.$emit("pick",i)}};break;case"nextYear":a={text:"明年",onClick:function(e){var t=new Date;t.setTime(i&&t.getTime()+31536e6>i?i:t.getTime()+31536e6),e.$emit("pick",t)}}}return a})},querySearchAsync:function(e,t){var i=this;return function(a,o){var n=e._editConfig[t].asyn||null;n&&i.$api[n.apiName](n.params).then(function(n){i.restaurants=n.result.options||[];var l=a?i.restaurants.filter(i.createStateFilter(a,e,t)):i.restaurants;o(l)}).catch(function(e){})}},createStateFilter:function(e,t,i){return function(a){return 0===a[t._editConfig[i].valueKey?t._editConfig[i].valueKey:"name"].toLowerCase().indexOf(e.toLowerCase())}},computedCell:function(e,t){var i=this;if(!this.computedKeys.length)return!1;this.computedKeys.forEach(function(t){var a=e._editConfig[t].compute.split(/\([\\+|\-|\\*|\\/]\)/);a.length>1&&(e[t]=Object(o.b)(a,e,i.setRowChain,i.data,e._editConfig[t].compute).toFixed(i.precision))})},createRult:function(){var e={};if(!Array.isArray(this.editable))for(var t in this.editable)this.editable.hasOwnProperty(t)&&this.editable[t].rules&&this.editable[t].rules.length&&(e[t]=this.initRowRules(this.editable[t]));return e},initRowRules:function(e){var t=[];return e.rules.forEach(function(i,o){0===o&&t.push({required:!0,message:"请输入内容",trigger:"blur"}),!1===i.required&&(t[0].required=i.required),i.type&&t.push({pattern:new RegExp(a.a[i.type].replace(/placeholder/g,"0,"),"g"),message:e.message[o]||"",trigger:"blur"}),(i.min||i.max)&&t.push({min:i.min||0,max:i.max||"",message:e.message[o]||"",trigger:"blur"})}),t},createItemRules:function(e,t,i){var a,n=null;if(a=this.baseRules[t]?[].concat(this.baseRules[t]):[],this.editable[t]&&this.editable[t].rules&&this.editable[t].rules.length){var l=this.editable[t].rules.find(function(e){return e.greaterThan}),s=this.editable[t].rules.find(function(e){return e.lessThan}),r=this.editable[t].rules.find(function(e){return e.type});(l||s)&&(n=Object(o.a)(l,s,r,t,i,this.setRowChain,this.editable[t].message,this.editable[t].rules,this.setTableData)),n&&n.forEach(function(e){a.push(e)})}return a},setShowHeader:function(){return!this.layer||0!==this.setTableData.length},selectable:function(e,t){return"1"===e.rowState},indexMethod:function(e){return e+1},selectItem:function(e,t){this.$emit("databridge",e)},selectAll:function(e){this.$emit("databridge",e)}}},d=(i("cc5z"),i("KHd+")),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"childrens"},[i("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"status-icon":""}},[i("el-table",{ref:"baseTable",staticStyle:{width:"100%"},attrs:{data:e.setTableData,stripe:"",height:"100%",fit:"","highlight-current-row":"","tooltip-effect":"dark",border:0!=e.layer,"show-header":e.setShowHeader(),"row-key":e.getRowKey},on:{select:e.selectItem,"select-all":e.selectAll}},[e.setShowCheckBox?[i("el-table-column",{attrs:{type:"selection",selectable:e.selectable,width:"55",align:"center"}})]:e._e(),e._v(" "),e.setShowIndex?[i("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"60",align:"center"}})]:e._e(),e._v(" "),e._l(e.setTitleList,function(t,a){return[i("el-table-column",e._b({key:a,attrs:{"show-overflow-tooltip":"",label:t.label,width:t.width||null,align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return[Array.isArray(o.row[t.prop])&&o.row[t.prop].length&&o.row[t.prop][0].hasOwnProperty("_mergeValue")?[e._l(o.row[t.prop],function(t,n){return[t.hasOwnProperty("_mergeValue")&&!t.keyName?[i("div",{staticClass:"resetElStepStyle",style:{"text-align":t.hideTitle?"center":"left"}},[t.hideTitle?e._e():i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_0"+t.prop},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_0'+cItem.prop}"}]},[e._v(e._s(t.label+":")+" ")]),e._v(" "),i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_1"+t.prop},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_1'+cItem.prop}"}],domProps:{textContent:e._s(t._mergeValue)}})])]:[t.componentName?["el-steps"===t.componentName||"el-step"===t.componentName?i("div",{staticClass:"resetElStepStyle"},[t.hideTitle?e._e():i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_0"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_0'+cItem.keyName}"}],style:t.titleStyle||{}},[e._v(e._s(t.label+":")+" ")]),e._v(" "),i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_1"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_1'+cItem.keyName}"}]},[i("ul",{staticClass:"customStepView clearfix"},e._l(t.componentConfig.titleList,function(a,n){return i("li",{key:n,staticClass:"customStepBox",style:e.createStepStyle(n,o,t)},[e._v("\n                          "+e._s(a)+"\n                          "),i("i",{staticClass:"stepArrow",style:e.createStepArrowStyle(n,o,t)})])}))])]):"el-progress"===t.componentName?i("div",{staticClass:"clearfix"},[t.hideTitle?e._e():i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_0"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_0'+cItem.keyName}"}],staticStyle:{float:"left"},style:[{"line-height":t.componentConfig["stroke-width"]>23?2:""},t.titleStyle]},[e._v(e._s(t.label+":"+(t.componentConfig.showInitValue?o.row[t.keyName]:""))+" ")]),e._v(" "),i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_1"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_1'+cItem.keyName}"}],staticStyle:{overflow:"hidden"},style:{"padding-top":(t.componentConfig["stroke-width"]?t.componentConfig["stroke-width"]<24?(24-t.componentConfig["stroke-width"])/2:t.componentConfig["stroke-width"]:0)+"px"}},[i("el-progress",{attrs:{percentage:(t.componentConfig.baseValue?((o.row[t.keyName]-0)/(t.componentConfig.baseValue-0)*100).toFixed(2)-0:o.row[t.keyName]-0)||0,"text-inside":!!t.componentConfig["text-inside"],"stroke-width":t.componentConfig["stroke-width"]||16,"show-text":!!t.componentConfig["show-text"],color:t.componentConfig.color||""}})],1)]):"el-input"===t.componentName?i("div",{staticClass:"clearfix"},[t.hideTitle?e._e():i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_0"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_0'+cItem.keyName}"}],staticStyle:{float:"left"},style:t.titleStyle||{}},[e._v(e._s(t.label+":")+" ")]),e._v(" "),i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_1"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_1'+cItem.keyName}"}],staticStyle:{overflow:"hidden"},style:t.bodyStyle||{}},[i("el-input",{directives:[{name:"merga-rult",rawName:"v-merga-rult",value:{rule:t.componentConfig.rule,value:o.row[t.keyName]},expression:"{rule:cItem.componentConfig.rule,value:scope.row[cItem.keyName]}"}],attrs:{placeholder:t.componentConfig.placeholder||"请输入内容",type:t.componentConfig.type||"text",maxlength:t.componentConfig.maxlength,minlength:t.componentConfig.minlength,clearable:t.componentConfig.clearable,disabled:void 0!==t.componentConfig.disabled&&("string"==typeof t.componentConfig.disabled?"1"===o.row[t.componentConfig.disabled]:t.componentConfig.disabled),size:t.componentConfig.size||"small"},model:{value:o.row[t.keyName],callback:function(i){e.$set(o.row,t.keyName,i)},expression:"scope.row[cItem.keyName]"}})],1)]):e._e()]:[i("div",{staticClass:"resetElStepStyle",staticStyle:{"text-align":"left"}},[t.hideTitle?e._e():i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_0"+t.prop},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_0'+cItem.prop}"}],style:t.titleStyle||{}},[e._v(e._s(t.label+":")+" ")]),e._v(" "),t.events?[i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_1"+t.prop},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_1'+cItem.prop}"}],style:t.bodyStyle||{}},[i("a",{domProps:{textContent:e._s(t._mergeValue)},on:{click:function(i){e.mergeColumnEvents(t,o)}}})])]:[i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_1"+t.prop},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_1'+cItem.prop}"},{name:"content-set",rawName:"v-content-set",value:{config:t,row:o.row},expression:"{config: cItem,row: scope.row}"}],style:t.bodyStyle||{},domProps:{textContent:e._s(t._mergeValue)}})]],2)]]]})]:o.row._editConfig&&o.row._editConfig[t.prop]?["input"===o.row._editConfig[t.prop].type?[o.row._editConfig[t.prop].asyn?[i("el-form-item",{attrs:{prop:"tableData."+o.$index+"."+t.prop,rules:e.createItemRules(t,t.prop,o.row),"inline-message":!0}},[i("el-autocomplete",{attrs:{size:"small",placeholder:"请输入内容",clearable:"","value-key":o.row._editConfig[t.prop].valueKey?o.row._editConfig[t.prop].valueKey:"name",debounce:e.debounce,"fetch-suggestions":e.querySearchAsync(o.row,t.prop),disabled:"0"===o.row.isdisable},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[colConfig.prop]"}},[o.row._editConfig[t.prop].icon?i("i",{staticClass:"treeFormTableIcon",attrs:{slot:"suffix"},slot:"suffix"},[i("svg-icon",{attrs:{"icon-class":o.row._editConfig[t.prop].icon}})],1):e._e()])],1)]:[i("el-form-item",{attrs:{prop:"tableData."+o.$index+"."+t.prop,rules:e.createItemRules(t,t.prop,o.row),"inline-message":!0}},[i("el-input",{attrs:{size:"small",placeholder:"请输入内容",clearable:"",align:"center",type:o.row._editConfig[t.prop].textarea?"textarea":"text",disabled:!!o.row._editConfig[t.prop].compute||"0"===o.row.isdisable},on:{blur:function(i){e.computedCell(o.row,t.prop)}},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[colConfig.prop]"}},[o.row._editConfig[t.prop].icon?i("i",{staticClass:"treeFormTableIcon",attrs:{slot:"suffix"},slot:"suffix"},[i("svg-icon",{attrs:{"icon-class":o.row._editConfig[t.prop].icon}})],1):e._e()])],1)]]:"date"===o.row._editConfig[t.prop].type?[i("el-date-picker",{attrs:{size:"small",format:o.row._editConfig[t.prop].format||"yyyy 年 MM 月 dd 日","value-format":o.row._editConfig[t.prop].format||"yyyy-MM-dd","default-value":e.defaultValue(o.row._editConfig[t.prop].defaultValue,o.row,t.prop),editable:void 0===o.row._editConfig[t.prop].editable||o.row._editConfig[t.prop].editable,disabled:"0"===o.row.isdisable,type:o.row._editConfig[t.prop].valueType||"date",placeholder:o.row._editConfig[t.prop].placeholder||"选择日期","picker-options":e.pickerOptions(o.row,t.prop)},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[colConfig.prop]"}})]:"time"===o.row._editConfig[t.prop].type?[i("el-time-picker",{attrs:{clearable:"",size:"small",align:"center",disabled:"0"===o.row.isdisable,editable:!1,placeholder:"任意时间点"},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[colConfig.prop]"}})]:"select"===o.row._editConfig[t.prop].type?[i("el-select",{attrs:{size:"small",clearable:"",filterable:"",disabled:"0"===o.row.isdisable,multiple:o.row._editConfig[t.prop].multiple||!1,loading:e.selectLoading,placeholder:"请选择"},on:{focus:function(i){e.getSelectOptions(o.row,t.prop,o.$index)}},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[colConfig.prop]"}},e._l(e.selectOptionList[o.$index][t.prop],function(e){return i("el-option",{key:e.id,attrs:{label:e.label,value:e.id,disabled:"0"===e.isdisable}})}),1)]:"cascader"===o.row._editConfig[t.prop].type?void 0:"switch"===o.row._editConfig[t.prop].type?void 0:"dateTime"===o.row._editConfig[t.prop].type?[i("el-date-picker",{attrs:{size:"small",clearable:"",type:"datetime",align:"center",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss",disabled:"0"===o.row.isdisable,editable:!1},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[colConfig.prop]"}})]:"inputNumber"===o.row._editConfig[t.prop].type?void 0:[i("span",{directives:[{name:"content-set",rawName:"v-content-set",value:{config:t,row:o.row},expression:"{config: colConfig,row: scope.row}"}],staticStyle:{"margin-left":"10px"}},[e._v(e._s(o.row[t.prop]))])]]:t.component?[i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:0,id:t.prop},expression:"{parentLayer:infoIndex,selfLayer:0,id:colConfig.prop}"}]},[i(t.component,{key:a,tag:"component",attrs:{"col-config":t,scope:o}})],1)]:[i("span",{directives:[{name:"content-set",rawName:"v-content-set",value:{config:t,row:o.row},expression:"{config: colConfig,row: scope.row}"}],staticStyle:{"margin-left":"10px"}},[e._v(e._s(o.row[t.prop]))])]]}}])},"el-table-column",t,!1))]})],2)],1)],1)},[],!1,null,null,null);u.options.__file="childrenTable.vue";var p,m=u.exports,h=i("WwWg"),g=i("Yfch"),f=i("QWlu"),b={code:0,msg:"执行成功!",result:{hideTitles:["id","productGenre","productUnit","warehouseId","state","cuser","cdate","uuser","udate","remark","isdisable","qrcode","businessId"],pageData:{current:1,pages:"1",records:[],size:10,total:"1"},titles:[{progress:"进度"},{warehouseOutCode:"出库单编码"},{productCode:"货品编码"},{productName:"货品名称"},{productSpec:" 规格/型号"},{productGenreName:"货品属性"},{productUnitName:"计量单位"},{count:"出库数量"},{id:"id"},{productGenre:"货品属性ID"},{productUnit:"计量单位ID"},{parentId:"出库单ID"},{warehouseId:" (推荐)货位ID"},{productId:"产品ID"},{code:"批次号"},{executeCount:"已出库数量"},{state:"状态"},{cuser:"创建用户id"},{cdate:"创建时间"},{uuser:"修改用户id"},{udate:"修改时间"},{remark:"备注"},{isdisable:"是否启用"},{qrcode:"二维码"},{businessId:"业务id"}],varList:[{businessId:"",cdate:"2018-10-30 10:44:18",children:[{code:"11111111111",companyId:"02b02026270d4b6582b7bfc576e81971",id:"11",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"5.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"}],code:"",count:"10.00",cuser:"bf3b8b63be1b4f1f96984b33ccd77784",executeCount:"10.00",hideTitles:["id","warehouseId","productId","isdisable","companyId"],id:"219967d2f6704d868b11002caef9885c",isdisable:"1",parentId:"08e06e2e63804a9f81781a540307fa8f",pid:null,productCode:"P000008",productGenre:"7e2cad38438e40ba974cd00099e5ed71",productGenreName:"原材料",productId:"01de8e2c87074f06b32567d7c1275808",productName:"333",productSpec:"2",productUnit:"3ab6399760da48049bc76705fa797217",productUnitName:"克",progress:"55",qrcode:"",remark:"122",state:"已完成",titles:[{name:"货位名称"},{code:"批次号"},{stockCount:"库存数量"},{suggestCount:"建议取货数量"},{id:"id"},{warehouseId:"仓库货位ID"},{productId:"产品ID"},{isdisable:"是否启用"},{companyId:"公司ID"}],udate:"2018-11-08 17:30:33",uuser:"",warehouseId:"",warehouseOutCode:"O000007"},{businessId:"",cdate:"2018-10-30 10:44:18",children:[{code:"11111111111",companyId:"02b02026270d4b6582b7bfc576e81971",id:"11",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"5.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"}],code:"",count:"10.00",cuser:"bf3b8b63be1b4f1f96984b33ccd77784",executeCount:"10.00",hideTitles:["id","warehouseId","productId","isdisable","companyId"],id:"885c219967d2f6704d868b11002caef9",isdisable:"1",parentId:"08e06e2e63804a9f81781a540307fa8f",pid:null,productCode:"P000008",productGenre:"7e2cad38438e40ba974cd00099e5ed71",productGenreName:"原材料",productId:"01de8e2c87074f06b32567d7c1275808",productName:"333",productSpec:"2",productUnit:"3ab6399760da48049bc76705fa797217",productUnitName:"克",progress:"20",qrcode:"",remark:"122",state:"已完成",titles:[{name:"货位名称"},{code:"批次号"},{stockCount:"库存数量"},{suggestCount:"建议取货数量"},{id:"id"},{warehouseId:"仓库货位ID"},{productId:"产品ID"},{isdisable:"是否启用"},{companyId:"公司ID"}],udate:"2018-11-08 17:30:33",uuser:"",warehouseId:"",warehouseOutCode:"O000008"},{businessId:"",cdate:"2018-10-30 10:44:18",children:[{code:"11111111111",companyId:"02b02026270d4b6582b7bfc576e81971",id:"11",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"5.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"}],code:"",count:"10.00",cuser:"bf3b8b63be1b4f1f96984b33ccd77784",executeCount:"10.00",hideTitles:["id","warehouseId","productId","isdisable","companyId"],id:"ddac219967d2f6704d868b11002caef9",isdisable:"1",parentId:"08e06e2e63804a9f81781a540307fa8f",pid:null,productCode:"P000008",productGenre:"7e2cad38438e40ba974cd00099e5ed71",productGenreName:"原材料",productId:"01de8e2c87074f06b32567d7c1275808",productName:"333",productSpec:"2",productUnit:"3ab6399760da48049bc76705fa797217",productUnitName:"克",progress:"20",qrcode:"",remark:"122",state:"已完成",titles:[{name:"货位名称"},{code:"批次号"},{stockCount:"库存数量"},{suggestCount:"建议取货数量"},{id:"id"},{warehouseId:"仓库货位ID"},{productId:"产品ID"},{isdisable:"是否启用"},{companyId:"公司ID"}],udate:"2018-11-08 17:30:33",uuser:"",warehouseId:"",warehouseOutCode:"O000006"}]}};function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=(v(p={name:"custom-row-table",components:{customSteps:i("Sr1L").a},props:{mergeColumn:{type:Object,default:function(){return{}}},keyValue:{type:Boolean,default:!1},baseHeight:{type:String,default:""},baseBorder:{type:String,default:""},columnGlobalStyle:{type:Object,default:function(){return{}}},configs:{type:Object,default:function(){return{}}},apiObj:{type:Object,default:function(){return{}}},"expand-all":{type:Boolean,default:!0},customColumn:{type:Object,default:function(){return{}}},editable:[Object,Array],precision:{type:Number,default:2},data:{type:Array,default:function(){return[]}},titleList:{type:Array,default:function(){return[]}}},data:function(){return{wrapperWidth:0,tableWidth:0,fixedList:[],expandRowKeys:[],getRowKey:function(e){return e.id},tableObj:{},guid:"",editTableLayer:-1,autoWidthList:[],autoWidthTimer:{},setScrollWidth:null,setScrollWidthTimer:-2,autoWidthSwitch:!1,autoWidths:[],columnWidth:{},layer:0,isLoading:!0,userInfo:null}},directives:{"reset-width":{inserted:function(e,t,i){var a=i.context,o=t.value.component?t.value.component.length:0;o>1&&a.$set(a.columnWidth,t.value.prop,60*Math.ceil(o/2)+25+"px")}},"auto-width":{bind:function(e,t,i){!i.context.autoWidthTimer[t.value.id]&&(i.context.autoWidthTimer[t.value.id]=-1)},inserted:function(e,t,i){!i.context.autoWidthList.length&&(i.context.autoWidthList=i.context.setTitleList.map(function(e){return[]})),i.context.$nextTick(function(a){-1===i.context.autoWidthTimer[t.value.id]&&(i.context.autoWidthTimer[t.value.id]=setTimeout(function(a){var o=e.clientWidth,n=t.value,l=i.context.autoWidthList;if(l[n.parentLayer].length)if(l[n.parentLayer][n.selfLayer]>-1){var s=l[n.parentLayer][n.selfLayer];l[n.parentLayer].splice(n.selfLayer,1,o+s)}else l[n.parentLayer][n.selfLayer]=o;else{var r=[];r[n.selfLayer]=o,l.splice(n.parentLayer,1,r)}},20))})}},"merga-rult":{bind:function(e,t,i){},componentUpdated:function(e,t,i){t.value.rule&&"string"==typeof t.value.rule&&(new RegExp(a.a[t.value.rule].replace(/placeholder/g,"0,"),"g").test(t.value.value)?(f.a.removeClass(e,"el-form-item"),f.a.removeClass(e,"is-error")):(f.a.addClass(e,"el-form-item"),f.a.addClass(e,"is-error")))}},"content-set":{inserted:function(e,t,i){var a=t.value.config._cellConfig&&t.value.config._cellConfig.contentSet||"";if(a){var n=a.state||{},s=i.context,r=a.style||{};for(var c in n)if(n.hasOwnProperty(c))for(var d in r)r.hasOwnProperty(d)&&(e.style[d]=Object(l.l)(r[d].replace(c,Object(o.c)([n[c]],t.value.row,[],s.setTableData,!1,null)[0])))}}}}},"components",{childrenTable:m}),v(p,"computed",{setColumnWidth:function(){return this.columnWidth},useKeyValue:function(){return this.keyValue},setShowCheckBox:function(){return!!(this.configs[this.layer]&&this.configs[this.layer].showCheckBox&&this.setTableData&&this.setTableData.length)},setShowIndex:function(){return!!(this.configs[this.layer]&&this.configs[this.layer].showIndex&&this.setTableData&&this.setTableData.length)},showPageData:function(){return!!(this.configs[this.layer]&&this.configs[this.layer].showPageData&&this.setPageData)},setTableHeight:function(){return this.showPageData?"calc(100% - 40px)":"100%"},expandOne:function(){return!(!this.configs[this.layer]||!this.configs[this.layer].expandOne)},setMergeColumns:function(){return this.mergeColumn},tableData:function(){return this.$store.getters[this.guid+"/mergedDataTree"]},setTitleList:function(){return this.tableData.titleList||[]},setTableData:function(){return this.tableData.tableData||[]},setPageData:function(){return this.tableData.pageData||{}},setExpand:function(){return this.expandAll},setExpandColumnWidth:function(){return this.setExpand?"1":"50"},setLoading:function(){return!(!this.mergeColumn[this.layer]||!this.isLoading)}}),v(p,"created",function(){var e=this;this.userInfo=this.$storage.get("userInfo"),0===this.layer&&(this.guid=Object(h.a)(),Object(h.c)(this),this.apiObj.apiName&&("0"===this.userInfo.userId?setTimeout(function(){e.$store.commit(e.guid+"/SET_MERGEDDATATREE",e.formatedTable({res:b}))},1e3):this.$api[this.apiObj.apiName](Object.assign({},this.apiObj.params)).then(function(t){e.$store.commit(e.guid+"/SET_MERGEDDATATREE",e.formatedTable({res:t}))}).catch(function(e){})))}),v(p,"mounted",function(){}),v(p,"beforeDestroy",function(){Object(h.h)(this.$store,this.guid)}),v(p,"watch",{"apiObj.params":function(){var e=this;this.isLoading=!0,this.$api[this.apiObj.apiName](Object.assign({},this.apiObj.params)).then(function(t){e.editTableLayer=-1,e.$store.commit(e.guid+"/SET_MERGEDDATATREE",e.formatedTable({res:t})),e.isLoading=!1}).catch(function(t){e.isLoading=!1})},autoWidthList:{deep:!0,handler:function(e,t){var i=this;clearTimeout(this.setScrollWidthTimer),this.setScrollWidthTimer=setTimeout(function(t){i.autoWidths=e.map(function(e){var t=Math.max.apply(null,e);return t>-9999&&t<9999?t+20:0});var a=0;i.autoWidths.forEach(function(e){a+=e}),i.setShowCheckBox&&(a+=50),i.setShowIndex&&(a+=50),a+=i.setExpandColumnWidth-0;var o=i.$el.clientWidth>a?(i.$el.clientWidth-a)/i.autoWidthList.length:0;i.autoWidths=i.autoWidths.map(function(e){return e?e+o:null}),i.autoWidths[i.autoWidths.length-1]&&(i.autoWidthSwitch=!0)&&i.$refs.baseTable.$nextTick(function(e){i.isLoading=!1})},10)}}}),v(p,"methods",{createStepStyle:function(e,t,i){var a=parseInt(t.row[i.keyName])||0;return e<a?{"background-color":"rgb(0,176,240)",color:"#ffffff","flex-basis":"".concat(100/i.componentConfig.titleList.length,"%")}:e===a?{"background-color":"rgb(255,192,0)","flex-basis":"".concat(100/i.componentConfig.titleList.length,"%")}:{"background-color":"rgb(191,191,191)",color:"#ffffff","flex-basis":"".concat(100/i.componentConfig.titleList.length,"%")}},createStepArrowStyle:function(e,t,i){var a=parseInt(t.row[i.keyName])||0;return e<a?{"border-left":"10px solid rgb(0,176,240)"}:e===a?{"border-left":"10px solid rgb(255,192,0)"}:{"border-left":"10px solid rgb(191,191,191)"}},setColumnClass:function(e){var t="";return this.useKeyValue&&(t+="autoWidthClass"),e.component&&(t+=" resetBtnLayout"),t},upDateView:function(e){var t=this;this.$api[this.apiObj.apiName](Object.assign({},this.apiObj.params,e||void 0)).then(function(e){t.$store.commit(t.guid+"/SET_MERGEDDATATREE",t.formatedTable({res:e}))}).catch(function(e){})},getData:function(){!this.layer&&this.$emit("get-data",this.tableData)},mergeColumnEvents:function(e,t){var i=e.events.type;"navigation"===i&&this.$router.push({path:"/"+e.events.path}),"click"===i&&this.componentMethod(t.row,t.$index,e)},mergeColumnsFn:function(e,t){var i="",a=t?"children":"tableData";this.setMergeColumns[t].forEach(function(t,o){var n=[];t.columns.forEach(function(t){if("string"==typeof t){var i=e.titleList.findIndex(function(e){if(e.prop===t)return n.push(e),!0});i>-1&&e.titleList.splice(i,1)}else{var a=e.titleList.findIndex(function(e){if(e.prop===t.keyName)return n.push(Object.assign({},e,t)),!0});a>-1&&e.titleList.splice(a,1)}}),i=t.alias?t.alias:"mergeKey"+o,e.titleList.splice(t.index-1,0,{prop:i,label:i,width:t.width}),e[a].forEach(function(e){e[i]=n.map(function(t){var i=Object.assign({},t);return i._mergeValue=e[i.prop]||"",i})})})},formatedTable:function(e){if(this.layer)return{};var t=JSON.parse(JSON.stringify(e)),i=this.getListPage(t.res,this.customColumn,this.layer);return i.tableData&&i.tableData.length&&this.formatEditTable(i.tableData),this.setMergeColumns[this.layer]&&this.setMergeColumns[this.layer].length&&this.mergeColumnsFn(i,this.layer),!this.setTableData.length&&(this.isLoading=!1),i},formatEditTable:function(e){var t=this;this.editTableLayer++,e.forEach(function(e,i){if(e.children&&e.children.length&&t.formatEditTable(e.children),t.editTableLayer>0)if(Array.isArray(t.editable)){var a={};t.editable.forEach(function(i){a[i]={type:t.automaticInference(i,e)}}),e._editConfig=a}else"object"===D(t.editable)&&Object.keys(t.editable).forEach(function(i){Object.keys(e).indexOf(i)>-1&&(e._editConfig=Object.assign({},t.editable))})})},automaticInference:function(e,t){var i=t[e];return"1"!==i&&"0"!==i||"isdisable"!==e?new RegExp(a.a.date.replace(/placeholder/g,"0,"),"g").test(i)?"date":new RegExp(a.a.time.replace(/placeholder/g,"0,"),"g").test(i)?"time":"input":"switch"},deleteRow:function(e,t){var i=this;this.$store.commit(this.guid+"/DELETE_ROW",e),this.$nextTick(function(e){i.$refs.baseTable.doLayout()})},setShowHeader:function(){return!this.keyValue&&(!this.layer||0!==this.setTableData.length)},setRowClass:function(){if(this.setExpand)return"row-expand-cover"},setCellStyle:function(){if(!this.layer)return{"border-bottom":"none"}},setHeaderRowClass:function(){if(this.setExpand)return"header-expand-cover"},selectable:function(e,t){return"1"===e.rowState},expandChange:function(e,t){var i=this;t.some(function(t){return t.id===e.id})&&this.expandOne&&this.toggleRowExpands(t,e),this.$refs.baseTable.setCurrentRow(e),this.$refs.baseTable.$nextTick(function(e){i.$refs.baseTable.doLayout()})},toggleRowExpands:function(e,t){var i=this;e.forEach(function(e){i.$refs.baseTable.toggleRowExpansion(e,e.id===t.id)})},getListPage:function(e,t,i){var a=this;if(e){e.result.titles="string"==typeof e.result.titles?JSON.parse(e.result.titles):e.result.titles,e.result.varList="string"==typeof e.result.varList?JSON.parse(e.result.varList):e.result.varList,e.result.pageData="string"==typeof e.result.pageData?JSON.parse(e.result.pageData):e.result.pageData;var o=Object(h.g)(e.result),n=this.addTableTitle(o,t,i);return e.result.varList.forEach(function(e,o){if(e.titles&&e.hideTitles&&e.children){var n={result:{titles:e.titles,hideTitles:e.hideTitles,varList:e.children,pageData:{}}},l=a.getListPage(n,t,i+1);e.titleList=l.titleList,e.pageData=l.pageData,a.setMergeColumns[1]&&a.setMergeColumns[1].length&&a.mergeColumnsFn(e,1)}}),{titleList:n,pageData:e.result.pageData,tableData:e.result.varList}}return{}},addTableTitle:function(e,t,i){return t[i]&&Array.isArray(t[i])&&t[i].forEach(function(t){Object(g.b)(t.columnIndex)?e.splice(t.columnIndex,0,t):"first"===t.columnIndex?e.unshift(t):"last"===t.columnIndex?e.push(t):e.some(function(e){if(e.prop===t.columnIndex)return Object.assign(e,t),!0})}),e},indexMethod:function(e){return e+1},selectItem:function(e,t){this.$emit("databridge",e)},selectAll:function(e){this.$emit("databridge",e)},databridge:function(e){this.$emit("databridge",e)},handleCurrentChange:function(e){this.$emit("update:currentpage",e)},doLayout:function(){var e=this;this.$refs.baseTable.$nextTick(function(t){e.$refs.baseTable.doLayout()})},componentMethod:function(e,t,i){i&&i._cellConfig&&i._cellConfig.methodName&&this.$emit("callmethod",{methodName:i._cellConfig.methodName,params:{row:e,index:t}})}}),p),w=(i("TPql"),Object(d.a)(y,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.setLoading,expression:"setLoading"}],staticClass:"myCoustomTable resetCustomRowTableStyle",style:{height:e.baseHeight?e.baseHeight:"100%",border:e.baseBorder?e.baseBorder:"none"}},[i("div",{staticStyle:{position:"relative",overflow:"hidden"},style:{height:e.setTableHeight}},[i("div",{staticClass:"resetTableStyle baseTableStyle"},[i("el-table",{ref:"baseTable",staticStyle:{width:"100%"},attrs:{data:e.setTableData,stripe:"",height:"100%",fit:"","highlight-current-row":"","tooltip-effect":"dark",border:0!=e.layer,"show-header":e.setShowHeader(),"default-expand-all":e.setExpand,"row-key":e.getRowKey,"expand-row-keys":e.expandRowKeys,"row-class-name":e.setRowClass,"cell-style":e.setCellStyle,"header-row-class-name":e.setHeaderRowClass},on:{"expand-change":e.expandChange,"do-layout":e.doLayout,select:e.selectItem,"select-all":e.selectAll}},[e.setTableData&&e.setTableData.length?i("el-table-column",{attrs:{type:"expand",width:e.setExpandColumnWidth,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.children&&t.row.children?[i("children-table",{key:t.row.id,attrs:{layer:e.layer+1,"expand-all":e.setExpand,data:t.row.children,titleList:t.row.titleList,configs:e.configs,customColumn:e.customColumn,editable:e.editable,precision:e.precision,guid:e.guid,parent:[t.row],rowChain:[],mergeColumn:e.mergeColumn},on:{"do-layout":e.doLayout,databridge:e.databridge}})]:[i("div",{staticStyle:{"text-align":"center"}},[e._v("暂无数据")])]]}}])}):e._e(),e._v(" "),e.setShowCheckBox?[i("el-table-column",{attrs:{type:"selection",selectable:e.selectable,width:"50",align:"center"}})]:e._e(),e._v(" "),e.setShowIndex?[i("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50",align:"center"}})]:e._e(),e._v(" "),e._l(e.setTitleList,function(t,a){return[i("el-table-column",e._b({key:a,attrs:{"show-overflow-tooltip":"",label:t.label,"min-width":t.width||e.autoWidths[a]||null,"class-name":e.setColumnClass(t),align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return[Array.isArray(o.row[t.prop])&&o.row[t.prop].length&&o.row[t.prop][0].hasOwnProperty("_mergeValue")?i("div",[e._l(o.row[t.prop],function(t,n){return[t.component?[i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:t.prop},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:cItem.prop}"}]},[i(t.component,{key:n,tag:"component",attrs:{"col-config":t,scope:o}})],1)]:t.hasOwnProperty("_mergeValue")&&!t.keyName?[i("div",{staticClass:"resetElStepStyle",staticStyle:{"text-align":"left"}},[t.hideTitle?e._e():i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_0"+t.prop},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_0'+cItem.prop}"}],style:t.titleStyle||(e.columnGlobalStyle[e.layer]?e.columnGlobalStyle[e.layer].titleStyle:{})||{}},[e._v(e._s(t.label+":")+" ")]),e._v(" "),i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_1"+t.prop},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_1'+cItem.prop}"}],style:t.bodyStyle||(e.columnGlobalStyle[e.layer]?e.columnGlobalStyle[e.layer].bodyStyle:{})||{},domProps:{textContent:e._s(o.row[t.prop])}})])]:[t.componentName?["el-steps"===t.componentName||"el-step"===t.componentName?i("div",{staticClass:"resetElStepStyle"},[t.hideTitle?e._e():i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_0"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_0'+cItem.keyName}"}],style:t.titleStyle||(e.columnGlobalStyle[e.layer]?e.columnGlobalStyle[e.layer].titleStyle:{})||{}},[e._v(e._s(t.label+":")+" ")]),e._v(" "),i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_1"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_1'+cItem.keyName}"}]},[i("ul",{staticClass:"customStepView clearfix"},e._l(t.componentConfig.titleList,function(a,n){return i("li",{key:n,staticClass:"customStepBox",style:e.createStepStyle(n,o,t)},[e._v("\n                              "+e._s(a)+"\n                              "),i("i",{staticClass:"stepArrow",style:e.createStepArrowStyle(n,o,t)})])}))])]):"el-progress"===t.componentName?i("div",{staticClass:"clearfix"},[t.hideTitle?e._e():i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_0"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_0'+cItem.keyName}"}],staticStyle:{float:"left"},style:[{"line-height":t.componentConfig["stroke-width"]>23?2:""},t.titleStyle||(e.columnGlobalStyle[e.layer]?e.columnGlobalStyle[e.layer].titleStyle:{})||{}]},[e._v(e._s(t.label+":"+(t.componentConfig.showInitValue?o.row[t.keyName]:""))+" ")]),e._v(" "),i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_1"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_1'+cItem.keyName}"}],staticStyle:{overflow:"hidden"},style:{"padding-top":(t.componentConfig["stroke-width"]?t.componentConfig["stroke-width"]<24?(24-t.componentConfig["stroke-width"])/2:t.componentConfig["stroke-width"]:0)+"px"}},[i("el-progress",{attrs:{percentage:o.row[t.keyName]-0||0,status:"success","text-inside":!!t.componentConfig["text-inside"],"stroke-width":t.componentConfig["stroke-width"]||16,"show-text":!!t.componentConfig["show-text"],color:t.componentConfig.color||""}})],1)]):"el-input"===t.componentName?i("div",{staticClass:"clearfix"},[t.hideTitle?e._e():i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_0"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_0'+cItem.keyName}"}],staticStyle:{float:"left"},style:t.titleStyle||(e.columnGlobalStyle[e.layer]?e.columnGlobalStyle[e.layer].titleStyle:{})||{}},[e._v(e._s(t.label+":")+" ")]),e._v(" "),i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_1"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_1'+cItem.keyName}"}],staticStyle:{overflow:"hidden"},style:t.bodyStyle||(e.columnGlobalStyle[e.layer]?e.columnGlobalStyle[e.layer].bodyStyle:{})||{}},[i("el-input",{directives:[{name:"merga-rult",rawName:"v-merga-rult",value:{rule:t.componentConfig.rule,value:o.row[t.keyName]},expression:"{rule:cItem.componentConfig.rule,value:scope.row[cItem.keyName]}"}],attrs:{placeholder:t.componentConfig.placeholder||"请输入内容",type:t.componentConfig.type||"text",maxlength:t.componentConfig.maxlength,minlength:t.componentConfig.minlength,clearable:t.componentConfig.clearable,disabled:void 0!==t.componentConfig.disabled&&("string"==typeof t.componentConfig.disabled?"1"===o.row[t.componentConfig.disabled]:t.componentConfig.disabled),size:t.componentConfig.size||"small"},model:{value:o.row[t.keyName],callback:function(i){e.$set(o.row,t.keyName,i)},expression:"scope.row[cItem.keyName]"}})],1)]):"el-button"===t.componentName?i("div",{staticStyle:{"text-align":"left"}},[t.hideTitle?e._e():i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_0"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_0'+cItem.keyName}"}],staticStyle:{display:"inline-block"},style:t.titleStyle||(e.columnGlobalStyle[e.layer]?e.columnGlobalStyle[e.layer].titleStyle:{})||{}},[e._v(e._s(t.label+":")+" ")]),e._v(" "),i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_1"+t.keyName},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_1'+cItem.keyName}"}],staticStyle:{display:"inline-block"},style:t.bodyStyle||(e.columnGlobalStyle[e.layer]?e.columnGlobalStyle[e.layer].bodyStyle:{})||{}},[i("el-button",{style:{"padding-left":t.hideTitle?"":"0"},attrs:{type:"text",size:"small",disabled:!!t._cellConfig.disabled&&o.row[t._cellConfig.disabled]},on:{click:function(i){e.componentMethod(o.row,o.$index,t)}}},[e._v(e._s(t._cellConfig.name||o.row[t.keyName]))])],1)]):e._e()]:[i("div",{staticClass:"resetElStepStyle",staticStyle:{"text-align":"left"}},[t.hideTitle?e._e():i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_0"+t.prop},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_0'+cItem.prop}"}],style:t.titleStyle||(e.columnGlobalStyle[e.layer]?e.columnGlobalStyle[e.layer].titleStyle:{})||{}},[e._v(e._s(t.label+":")+" ")]),e._v(" "),t.events?[i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_1"+t.prop},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_1'+cItem.prop}"}],style:t.bodyStyle||(e.columnGlobalStyle[e.layer]?e.columnGlobalStyle[e.layer].bodyStyle:{})||{}},[i("a",{domProps:{textContent:e._s(t._mergeValue)},on:{click:function(i){e.mergeColumnEvents(t,o)}}})])]:[i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:n,id:"_1"+t.prop},expression:"{parentLayer:infoIndex,selfLayer:cIndex,id:'_1'+cItem.prop}"},{name:"content-set",rawName:"v-content-set",value:{config:t,row:o.row},expression:"{config: cItem,row: scope.row}"}],style:t.bodyStyle||(e.columnGlobalStyle[e.layer]?e.columnGlobalStyle[e.layer].bodyStyle:{})||{},domProps:{textContent:e._s(o.row[t.prop])}})]],2)]]]})],2):t.component?[Array.isArray(t.component)?["button"===t.componentName?i("div",{directives:[{name:"reset-width",rawName:"v-reset-width",value:t,expression:"colConfig"},{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:0,id:t.prop},expression:"{parentLayer:infoIndex,selfLayer:0,id:colConfig.prop}"}],staticClass:"btnBox",staticStyle:{display:"flex","white-space":"normal","flex-wrap":"wrap"},style:{"justify-content":e.setColumnWidth[t.prop]?"space-between":"center"}},e._l(t.component,function(t){return i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.editBtns_isShow,expression:"item.editBtns_isShow"}],staticStyle:{height:"30px",width:"60px",padding:"0",margin:"0","font-size":"12px","max-width":"60px"},attrs:{type:"text"},on:{click:function(e){t.method(o.row,o.$index,o)}}},[e._v(e._s(t.name))])}),1):e._e()]:[i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:0,id:t.prop},expression:"{parentLayer:infoIndex,selfLayer:0,id:colConfig.prop}"}]},[i(t.component,{key:a,tag:"component",attrs:{"col-config":t,scope:o}})],1)]]:i("div",[e.useKeyValue?i("div",{staticClass:"resetElStepStyle"},[i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:0,id:"_0"+t.prop},expression:"{parentLayer:infoIndex,selfLayer:0,id:'_0'+colConfig.prop}"}]},[e._v(e._s(t.label+":")+" ")]),e._v(" "),i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:0,id:"_1"+t.prop},expression:"{parentLayer:infoIndex,selfLayer:0,id:'_1'+colConfig.prop}"}],domProps:{textContent:e._s(o.row[t.prop])}})]):i("div",{directives:[{name:"auto-width",rawName:"v-auto-width",value:{parentLayer:a,selfLayer:0,id:t.prop},expression:"{parentLayer:infoIndex,selfLayer:0,id:colConfig.prop}"}],domProps:{textContent:e._s(o.row[t.prop])}})])]}}])},"el-table-column",t,!1))]})],2)],1)]),e._v(" "),e.showPageData?i("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"5px"}},[i("el-pagination",{attrs:{background:"","current-page":e.setPageData.current,"page-size":e.setPageData.size,layout:"prev, pager, next, jumper",total:e.setPageData.total-0},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.setPageData,"current",t)}}})],1):e._e()])},[],!1,null,null,null));w.options.__file="index.vue";t.a=w.exports},fHm6:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo");var a=i("7cmB"),o=i("vleD"),n=i("oC0i"),l=(i("zF5t"),i("6wnd"));i("z0WU");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={props:["colConfig"],template:'<el-table-column :label="colConfig.label" align="center">\n    \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n    \t\t\t\t\t\t\t<el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.change(scope.row,scope.$index)">更改库位</el-button>\n    \t\t\t\t\t</div>\n  \t\t\t\t</el-table-column>'},c={components:{treeFormTable:a.a,dialogOption:o.default,dialogRoleUser:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rootData:{},tableSets:{1:{showCheckBox:!1,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},currentpage:1,customColumn:{0:[{columnIndex:"last",prop:"operate",label:"操作",component:r,change:this.change}]},editable:{suggestCount:{type:"input"}},apiObj:{apiName:"listPageWarehouseOutDetailsExecute",params:{}},addedData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"选择员工",data:null,temp:{},tempLable:null,isSingle:!0,tableUrl:"/warehouse/warehouseProduct/listPageWarehouseProductsDispatchOption",tableParm:{}},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{}}},created:function(){var e="",t=this.initData.temp;null!=t&&t.length>0&&t.forEach(function(t){null!=t.id&&t.id.trim().length>0&&(e=0==e.length?"'"+t.id.trim()+"'":e+",'"+t.id.trim()+"'")});var i="";null!=e&&e.trim().length>0&&(i="detail.id in ("+e+")"),this.apiObj.params={queryStr:i,pageNo:1}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},addChild:function(e,t){this.dialogCallBackData=e,this.showDialog=!0,this.dialogVisible=!0},addChildRow:function(){this.dialogVisible=!1,this.showDialog=!1,this.addedData={rowData:this.testData,parentData:this.dialogCallBackData}},sendChildrenRow:function(e){},change:function(e,t){this.dialogData.temp=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="选择库位",this.dialogData.isSingle=!1,this.dialogData.tableUrl="/warehouse/warehouseProduct/listPageWarehouseProductsDispatchOption",this.dialogData.tableParm={productId:e.productId,isNotNeedSpare:"true"},this.openDialogName="dialogOption",this.showDialog=!0,this.inLinVisible=!0},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){this.$refs.treeFormTable.getData()},formData:function(e){this.realSave(e)},realSave:function(e){var t=this;if(null!=e.tableData[0].children&&0!=e.tableData[0].children.length){var i="";e.tableData[0]&&e.tableData[0].children.length>0&&(e.tableData[0].children.forEach(function(e){e.suggestCount<=0&&t.$message({type:"warning",duration:5e3,showClose:!0,message:"请在出库明细信息中填写出库数量！"})}),i=JSON.stringify(e.tableData)),Object(l.executeWarehouseOutExecute)({jsonDataStr:i}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择出库明细信息！"})},closeDialog:function(e,t){this.addedData={rowData:e[0],parentData:t},this.showDialog=!1}},watch:{pageNo:function(){this.initTable()}}},d=(i("Mub/"),i("KHd+")),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none"}},[i("tree-form-table",{ref:"treeFormTable",attrs:{"expand-all":!0,initData:e.rootData,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:e.editable,apiObj:e.apiObj,addedData:e.addedData},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,"send-children-row":e.sendChildrenRow,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogExecute.vue";t.default=u.exports},fQ6i:function(e,t,i){},fRsp:function(e,t,i){},fWTv:function(e,t,i){"use strict";var a=i("m7mt");i.n(a).a},fXSm:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("W8KX"),o=i("uTIz"),n=i("2+ib");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{searchBar:o.a,dialogDetail:a.default,multilevelTable:n.a},name:"dialog-add",props:["initData","visible"],data:function(){return{searchList:[],guid:"",searchObj:{},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",table_style:"",orderId:"",supplierId:"",supplierName:"",title:""},rowTableList:[],tableConfigList:[{customColumn:[{columnIndex:"state",width:"140",componentName:"tag",_cellConfig:{success:{state:"3",text:"已完成"},info:{state:"-1",text:"已取消"},warning:{state:"1",text:"待审核"},danger:{state:"2",text:"采购中"},default:{state:"0",text:"待提交"}}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",width:"150",component:[{name:"查看明细",nameEn:"viewDetail",editBtns_isShow:!0,method:this.viewDetail}]}],apiObj:{apiName:"listPageFinanceHistorys",params:{queryStr:"",customerId:this.initData.temp.id,fieldCode:"period,beginPlus,beginMinus,nowPlus,nowMinus,endPlus,endMinus",orderStr:"period desc"}},temp:{},tempData:{},showHeader:!0,showIndex:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,isSingle:!0,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!1,rowStyle:{"background-color":"#dfe6ec"}}]}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.updateData(e)},databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},resetTemp:function(){for(var e in this.temp)this.temp[e]=""},viewDetail:function(e,t){this.resetTemp(),this.temp=JSON.parse(JSON.stringify(e)),this.temp.currentPeriod=e.period,this.dialogData.temp=this.temp,this.dialogData.tempLable=this.tempLable,this.dialogData.title="本期明细",this.openDialogName="dialogDetail",this.showDialog=!0,this.inLinVisible=!0},dialogOpen:function(){},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"历史账单",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_sale_receivables_receiveQuery_dialogHistory0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogHistory.vue";t.default=c.exports},fYoi:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("uTIz"),o=i("2+ib"),n=i("jVbl");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{searchBar:a.a,multilevelTable:o.a,dialogMaintainTaskDetailInfo:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{maintainId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{equipmentId:"",rowData:{}},dataList:[],tableConfigList:[{customColumn:[{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"货品详情",nameEn:"taskDetailInfo",editBtns_isShow:!0,method:this.taskDetailInfo}]}],apiObj:{apiName:"listPageEquipmentMaintainTask",params:{maintainId:"",fieldCode:"maintainUserName,maintainDescribe,beginTimeStr,endTimeStr,taskResultName",orderStr:"task.cdate asc"}},tempData:{},showHeader:!0,showIndex:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable"}]}},created:function(){this.maintainId=this.initData.maintainId,this.tableConfigList[0].apiObj.params.maintainId=this.maintainId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.dataList=e},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.updateData(this.searchObj)},closeDialogPage:function(){this.isVisible=!1,this.dialogClose()},taskDetailInfo:function(e){var t=.6*document.body.clientWidth;this.dialogData.dialog_width=t+"px";var i=.75*(.618*t)+"px";this.dialogData.table_style="height:"+i+";width: 96%;margin-left: 2%;",this.dialogData.taskId=e.id,this.openDialogName="dialogMaintainTaskDetailInfo",this.dialogData.title="货品详情",this.showDialog=!0,this.inLinVisible=!0}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("el-row",{style:e.initData.table_style},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_equipment_equipmentMaintain_maintain_dialogMaintainTask0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDialogPage}},[e._v("关闭")])],1),e._v(" "),e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);c.options.__file="dialogMaintainTask.vue";t.default=c.exports},fZDY:function(e,t,i){"use strict";var a=i("y/8p");i.n(a).a},fqBP:function(e,t,i){},fsTK:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rGqo");var a=i("mSNy"),o=i("a0Xs"),n=i("dpNl"),l=i("L4vu"),s=i("z0WU");function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){c(e,t,i[t])})}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" :disabled="scope.row.type===\'计量单位\'" @change="colConfig.changeState(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0"  v-model="scope.row.isdefault" :disabled="scope.row.isdefault===\'1\'" @change="colConfig.changeIsdefault(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},p={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button  v-show="colConfig.editBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.editBtns(scope.row,scope.$index)">编辑</el-button>\n      \t\t\t\t\t\t\t<el-button  v-show="colConfig.deleteBtns_isShow&&scope.row.isdisable==\'0\'" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteBtns(scope.row,scope.$index)">删除</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},m={name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,topBarBtnList:[{name:"查询",icon:"search",method:this.queryTable},{name:"重置",icon:"refresh",plain:!0,method:this.resetQueryTemp}],initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",btnName:"编辑",isPropName:!0,component:p,editBtns:this.editBtns,editBtns_isShow:!0,deleteBtns:this.deleteBtns,deleteBtns_isShow:!0}},configs:{topBarBtnList:[{name:"新增",nameEn:"add",isShow:!0,icon:"add",method:this.addNew}],tableConfigs:[],showCheckBox:!1,showIndex:!1,isSingle:!1},tableData:[],selectList:[],queryParms:[{name:"code"},{name:"name"}],temp:{},tempQuery:{},tempLable:{},pageData:null,pageNo:1,openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{dialogUnitAdd:n.default,dialogUnitEdit:l.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.configs.isSingle=this.initData.isSingle,this.userInfo=this.$storage.get("userInfo"),this.initTable(!0)},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{editBtns:function(e,t){var i=JSON.parse(JSON.stringify(e)),a=i.npFormula,o=i.pnFormula;i.pnFormula=a,i.npFormula=o,this.dialogData.temp=i,this.dialogData.temp.unitName=this.initData.temp.unitName,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑",this.openDialogName="dialogUnitEdit",this.showDialog=!0,this.visibleState=!0},changeState:function(e,t){Object(o.updateDisableProductUnit)(e.id,e.isdisable).then(function(e){}).catch(function(e){})},deleteBtns:function(e,t){var i=this;i.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.deleteProductUnit)(e.id).then(function(e){0===e.code&&(i.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),i.initTable(!0))}).catch(function(e){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},queryTable:function(){this.pageNo=1,this.initTable(!0)},initTable:function(e){var t=this;t.dialogTopLoading=!0,Object(o.listPageProductUnits)(r({},t.tempQuery,{productId:this.initData.temp.id,pageNo:t.pageNo})).then(function(i){t.getListPage(i),e&&(t.dialogTopLoading=!1)}).catch(function(e){t.dialogTopLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(s.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!0,this.configs.showIndex=!0,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var o=e[i];o.indexOf("_")>0&&("en"==a.a.locale?o=o.substring(o.indexOf("_")+1):"zh"==a.a.locale&&(o=o.substring(0,o.indexOf("_")))),t.tempLable[i]=o}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==a.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==a.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"是否启用"===e.label&&(e.component=d,e.changeState=t.changeState),"是否默认"===e.label&&(e.component=u,e.changeIsdefault=t.changeIsdefault)}),e.push(t.initConfigs.tableOperates),e},addNew:function(){this.dialogData.temp=this.initData.temp,this.dialogData.tempLable=this.initData.tempLable,this.dialogData.title="新增计价单位",this.openDialogName="dialogUnitAdd",this.showDialog=!0,this.visibleState=!0},resetTemp:function(){for(var e in this.temp)this.temp[e]=""},changeIsdefault:function(e,t){var i=this;Object(o.updateIsDefaultProductUnit)(e.id,e.isdefault,e.productId).then(function(e){i.refreshTable()}).catch(function(e){})},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.refreshTable()},refreshTable:function(){var e=this;e.$axios.all([Object(o.listPageProductUnits)(r({},e.tempQuery,{productId:this.initData.temp.id,pageNo:e.pageNo}))]).then(e.$axios.spread(function(t){e.getListPage(t)})).catch(function(e){})},dataBridge:function(e){this.selectList=e},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]=""}},computed:{dialogName:function(){return this.openDialogName}},watch:{pageNo:function(){this.initTable()}}},h=i("KHd+"),g=Object(h.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,isSortable:!1,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);g.options.__file="dialogUnit.vue";t.default=g.exports},fydv:function(e,t,i){"use strict";i("rE2o"),i("ioFf"),i("f3/d"),i("xfY5");var a=i("z0WU"),o=(i("91GP"),i("jUE0"),i("QWlu")),n="@@wavesContext";function l(e,t){function i(i){var a=Object.assign({},t.value),o=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),n=o.ele;if(n){n.style.position="relative",n.style.overflow="hidden";var l=n.getBoundingClientRect(),s=n.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":((s=document.createElement("span")).className="waves-ripple",s.style.height=s.style.width=Math.max(l.width,l.height)+"px",n.appendChild(s)),o.type){case"center":s.style.top=l.height/2-s.offsetHeight/2+"px",s.style.left=l.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(i.pageY-l.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(i.pageX-l.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=o.color,s.className="waves-ripple z-active",!1}}return e[n]?e[n].removeHandle=i:e[n]={removeHandle:i},i}var s={bind:function(e,t){o.a.on(e,"click",l(e,t))},update:function(e,t){o.a.off(e,"click",e[n].removeHandle),o.a.on(e,"click",l(e,t))},unbind:function(e){o.a.off(e,"click",e[n].removeHandle),e[n]=null,delete e[n]}},r=function(e){e.directive("waves",s)};function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.Vue&&(window.waves=s,Vue.use(r)),s.install=r;var d={name:"equipment-formula",props:{width:[String,Number],customSign:{type:Array,default:function(){return[]}},renameKey:{type:Object,default:function(){return null}},apiObj:{type:Object,default:function(){return null}},paramName:{type:String,default:""}},directives:{waves:s},data:function(){return{testList:[],baseSign:["7","8","9","+","4","5","6","-","1","2","3","*","(","0",".","/",")","退格","清空","="],boldContent:["7","8","9","4","5","6","1","2","3","0","."],boldSign:["+","-","*","/","=","(",")"],resultStr:[],leftBtnsBoxHeight:0,showLeftArrow:!1,leftScrollTop:0,maxLeftScrollTop:0,scrollSwitch:!0,animateTimer:"",arrowState:!0,isClick:!0,clickTimer:"",resultObj:[],lastInput:"",equipmentFormulaLoading:!0,userInputStr:"",isUserInput:!0,rightBoxHeight:0,customUserInput:"",customUserInputObjs:[]}},components:{},computed:{setWidth:function(){return this.width?"number"==typeof this.width?"".concat(this.width,"px"):this.width:"600px"},setCustomSign:function(){return this.customSign||[]},leftViewHeight:function(){return this.testList.length?45*this.testList.length>this.leftBtnsBoxHeight-45?(this.showLeftArrow=!0,this.maxLeftScrollTop=45*this.testList.length-(this.leftBtnsBoxHeight-45),this.leftBtnsBoxHeight-45+"px"):(this.showLeftArrow=!1,"100%"):"100%"},setIcon:function(){return this.arrowState?"arrowdown":"arrowup"},adapted:function(){return this.renameKey||{name:"targetName",id:"id",code:"targetCode",formula:"targetFormula"}},resetresultStr:function(){var e=this;return this.resultStr.map(function(t){return"object"===c(t)?t[e.adapted.name]:t})},setResultStr:function(){return"".concat(this.paramName," = ").concat(this.resetresultStr.join(""))},scrollBarWidth:function(){return this.showLeftArrow?Object(a.p)():0}},watch:{leftScrollTop:function(){var e=this;if(this.scrollSwitch&&this.isClick){var t;this.scrollSwitch=!1,"arrowdown"===this.setIcon?this.animateTimer=setInterval(function(i){t=e.$refs.leftView.scrollTop,e.leftScrollTop>t+10?e.$refs.leftView.scrollTop=t+10:(e.$refs.leftView.scrollTop=e.leftScrollTop,clearInterval(e.animateTimer),e.scrollSwitch=!0,e.$refs.leftView.scrollTop>=e.maxLeftScrollTop&&(e.arrowState=!1))},16.667):this.animateTimer=setInterval(function(i){t=e.$refs.leftView.scrollTop,e.leftScrollTop<t-10?e.$refs.leftView.scrollTop=t-10:(e.$refs.leftView.scrollTop=e.leftScrollTop,clearInterval(e.animateTimer),e.scrollSwitch=!0,e.arrowState=!0)},16.667)}},resetresultStr:function(){this.userInputStr=this.resetresultStr.join("")}},methods:{removeUserInput:function(e,t){var i=this;this.resultStr.splice(t,1),"object"===c(e)&&(this.resultObj=this.resultObj.filter(function(t){return t[i.adapted.id]!==e[i.adapted.id]}))},addUserInput:function(e){this.resultStr.splice(e,0,"")},addUserInputToLast:function(){this.resultStr.push("")},changeVal:function(e){e||(this.customUserInputObjs=[])},setContentStyle:function(e){return this.boldContent.indexOf(e)>-1},setSignStyle:function(e){return this.boldSign.indexOf(e)>-1},setTextStyle:function(e){return"清空"===e||"退格"===e},selectVal:function(e){e&&("清空"===e?this.resultStr=[]:"退格"===e?this.resultStr.length&&this.removeUserSelect(this.resultStr.pop()):(this.resultStr.push(e),this.lastInput=e))},removeUserSelect:function(e){"object"===c(e)&&this.resultObj[this.resultObj.length-1][this.adapted.id]===e[this.adapted.id]&&this.resultObj.pop()},selectObj:function(e){var t=this;this.isUserInput?(this.resultStr.push(e),this.lastInput=e,this.resultObj.push(e)):(this.customUserInputObjs=this.customUserInputObjs.filter(function(i){return i[t.adapted.id]!==e[t.adapted.id]}),this.customUserInputObjs.push(e),this.customUserInput+=e[this.adapted.name])},changeScroll:function(){if(this.isClick=!0,this.scrollSwitch){var e=this.maxLeftScrollTop-this.$refs.leftView.scrollTop;e>0?this.leftScrollTop+=e>180?180:e:this.leftScrollTop=0}},leftViewScroll:function(e){var t=this;this.scrollSwitch&&(this.isClick=!1,this.leftScrollTop=e.target.scrollTop,e.target.scrollTop>=this.maxLeftScrollTop?this.arrowState=!1:this.arrowState=!0,clearTimeout(this.clickTimer),this.clickTimer=setTimeout(function(e){t.isClick=!0},100))},getData:function(){this.isUserInput?this.resultStr.length?this.$emit("databridge",{formulaStr:this.setResultStr,resultObj:this.resultObj}):this.$message.error("请先录入公式"):this.customUserInput?this.$emit("databridge",{formulaStr:"".concat(this.paramName," = ").concat(this.customUserInput),resultObj:this.customUserInputObjs}):this.$message.error("请先录入公式")},httpRequests:function(){var e=this;this.$api[this.apiObj.apiName](this.apiObj.params).then(function(t){e.testList=t.EquipmentSensor||[],e.equipmentFormulaLoading=!1}).catch(function(t){e.equipmentFormulaLoading=!1})},edit:function(){this.isUserInput=!this.isUserInput,this.isUserInput||(this.customUserInput="",this.customUserInputObjs=[])}},created:function(){this.apiObj&&this.httpRequests()},mounted:function(){this.leftScrollTop=0,this.leftBtnsBoxHeight=this.$el.querySelector("#leftBtnsBox").offsetHeight,this.rightBoxHeight=this.$refs.equipmentFormula.offsetHeight},beforeDestroy:function(){}},u=(i("Ri2b"),i("KHd+")),p=Object(u.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.equipmentFormulaLoading,expression:"equipmentFormulaLoading"}],ref:"equipmentFormula",staticClass:"equipmentFormula",style:{width:this.setWidth}},[i("div",{staticClass:"leftView"},[i("div",{staticStyle:{position:"absolute",top:"0",left:"0",bottom:"0"},style:{right:"-"+e.scrollBarWidth+"px"}},[i("div",{staticStyle:{height:"100%",position:"relative"},attrs:{id:"leftBtnsBox"}},[i("div",{ref:"leftView",staticStyle:{overflow:"auto"},style:{height:e.leftViewHeight},on:{scroll:function(t){e.leftViewScroll(t)}}},[i("div",e._l(e.testList,function(t,a){return i("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"leftBtnViews leftBtns",on:{click:function(i){e.selectObj(t)}}},[i("div",{staticClass:"leftBtnBoxs",domProps:{textContent:e._s(t[e.adapted.name])}})])}))]),e._v(" "),e.showLeftArrow?i("div",{staticClass:"leftArrowBox"},[i("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"leftArrowView leftBtns",style:{width:"calc(100% - "+e.scrollBarWidth+"px)"},on:{click:e.changeScroll}},[i("svg-icon",{attrs:{"icon-class":e.setIcon}})],1)]):e._e()])])]),e._v(" "),i("div",{staticClass:"rightView"},[e.setCustomSign.length?i("div",{staticClass:"customSignView"}):e._e(),e._v(" "),e.isUserInput?i("div",{staticClass:"baseSignView"},e._l(e.baseSign,function(t,a){return i("div",{staticClass:"signView"},[t&&"="!==t?[i("div",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"signBox isDrop",class:{boldContent:e.setContentStyle(t),boldSign:e.setSignStyle(t),textBtn:e.setTextStyle(t)},on:{click:function(i){e.selectVal(t)}}},[i("div",{staticStyle:{cursor:"default"},domProps:{textContent:e._s(t)}})])]:[i("div",{staticClass:"signBox noDrop",domProps:{textContent:e._s(t)}})]],2)})):e._e(),e._v(" "),i("div",{staticClass:"resultView",style:{height:e.isUserInput?"80px":e.rightBoxHeight+"px"}},[e.isUserInput?i("el-input",{attrs:{placeholder:"请输入内容",disabled:e.isUserInput},model:{value:e.userInputStr,callback:function(t){e.userInputStr=t},expression:"userInputStr"}},[i("template",{slot:"prepend"},[e._v(e._s(e.paramName+" = "))]),e._v(" "),i("el-button",{attrs:{slot:"append",icon:"el-icon-edit",title:"手动编辑公式"},on:{click:e.edit},slot:"append"})],2):i("div",{staticClass:"userInputView"},[i("div",{staticClass:"userInputViewCenter"},[i("el-input",{attrs:{placeholder:"请输入内容"},on:{change:e.changeVal},model:{value:e.customUserInput,callback:function(t){e.customUserInput=t},expression:"customUserInput"}},[i("template",{slot:"prepend"},[e._v(e._s(e.paramName+" = "))]),e._v(" "),i("el-button",{attrs:{slot:"append",icon:"el-icon-edit",title:"关闭手动编辑"},on:{click:e.edit},slot:"append"})],2)],1)])],1)])])},[],!1,null,"9e39096a",null);p.options.__file="index.vue";t.a=p.exports},fzaQ:function(e,t,i){"use strict";var a=i("ZYLg");i.n(a).a},"g/PJ":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("7cmB"),o=i("zDZ1"),n=i("Tnlm"),l=i("UHWX");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={props:["colConfig"],template:'<el-table-column :label="colConfig.label" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n\n      \t\t\t\t\t\t\t\x3c!--<el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.edit(scope.row,scope.$index)">编辑</el-button>--\x3e\n      \t\t\t\t\t\t\t\x3c!--<el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.delete(scope.row,scope.$index,scope)">删除</el-button>--\x3e\n      \t\t\t\t\t\t\t<el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.qrcode(scope.row,scope.$index,scope)">二维码</el-button>\n      \t\t\t\t\t</div>\n    \t\t\t\t</el-table-column>'},c={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" :disabled=true></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},d={components:{treeFormTable:a.a,dialogQrcode:o.a,dialogInRecordsEdit:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rootData:{},tableSets:{1:{showCheckBox:!1,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},currentpage:1,customColumn:{1:[{columnIndex:"last",prop:"operate",label:"操作",component:r,qrcode:this.qrcode},{columnIndex:"isdisable",component:c,changeState:this.changeState}]},editable:{suggestCount:{}},apiObj:{apiName:"findListWarehouseInExecuteByEdit",params:{firstFieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,executeCount,surplusCount,code,warehouseName",secondFieldCode:"",queryStr:"",pageNo:1}},addedData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",temp:{},tempLable:[],tableParm:{}},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},resState:""}},created:function(){this.initData.temp.id&&(this.apiObj.params.queryStr="a.id = '"+this.initData.temp.id+"'")},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{edit:function(e,t){this.dialogData.temp=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="修改入库数量",this.openDialogName="dialogInRecordsEdit",this.showDialog=!0,this.inLinVisible=!0},delete:function(e,t){var i=this;Object(l.deleteWarehouseInExecute)({id:e.id}).then(function(t){0===t.code&&(i.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.isdisable="0",i.resState="ok")}).catch(function(e){})},qrcode:function(e,t){this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.temp=this.temp,this.dialogData.temp.code=this.temp.code,this.dialogData.temp.name=this.temp.productName,this.dialogData.tempLable.code="批次号",this.dialogData.tempLable.name="货品名称",this.dialogData.title="二维码",this.openDialogName="dialogQrcode",this.showDialog=!0,this.inLinVisible=!0},databridge:function(e){},sendChildrenRow:function(e){},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},formData:function(e){},closeDialog:function(e){e.resState&&(this.resState=e.resState),e.afterCount&&(this.dialogData.temp.count=e.afterCount,this.dialogData.temp.beforeCount=e.afterCount),this.$refs.treeFormTable.upDateView(),this.showDialog=!1}},watch:{}},u=i("KHd+"),p=Object(u.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("tree-form-table",{ref:"treeFormTable",attrs:{"expand-all":!0,initData:e.rootData,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:e.editable,apiObj:e.apiObj,addedData:e.addedData},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,"send-children-row":e.sendChildrenRow,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);p.options.__file="dialogInRecords.vue";t.default=p.exports},g2Wg:function(e,t,i){},g8mI:function(e,t,i){},"gCl+":function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=i("ubz/"),n=(i("z0WU"),i("Ppn9"),{name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,isreplaceable:null,topBarBtnList:[],tempCount:{count:0},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"planCount",componentName:"input",_cellConfig:{rules:[{required:!0},{greaterThan:["0",!1]},{lessThan:["self@assembledCount",!0]}],message:["该项不能为空！","该项输入必须大于零！","必须小于等于最大可生产数量！"]}}],apiObj:{apiName:"listProdLackNum",params:{dtlJsonStr:this.initData.temp,count:this.initData.count,setCount:this.initData.setCount,addColumn:{columnKey:"prodInfo",columnName:"货品"},fieldCode:"prodInfo,unit,count,setCount,planCount,assembledCount",modelCode:"BomTreeProductPlan"}},temp:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,dragTable:!1,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a,dialogAdd:o.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},delete:function(e,t){var i=this,a=this;a.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.deleteData(e)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},useReplaceable:function(e){e?(this.isreplaceable="1",this.tableConfigList[0].apiObj.params={dtlJsonStr:this.initData.temp,count:this.initData.count,setCount:this.initData.setCount,fieldCode:"code,name,spec,genre,unit,count,setCount,planCount,assembledCount",isreplaceable:"1",modelCode:"BomTreeProductPlan"}):(this.isreplaceable="0",this.tableConfigList[0].apiObj.params={dtlJsonStr:this.initData.temp,count:this.initData.count,setCount:this.initData.setCount,fieldCode:"code,name,spec,genre,unit,count,setCount,planCount,assembledCount",modelCode:"BomTreeProductPlan"}),this.updateData()},backStep:function(){this.$emit("close-dialog",{})},nextStep:function(){var e=this;(this.getData(),0!=this.selectList.length)&&(this.selectList[0].planCount>this.selectList[0].count-this.selectList[0].setCount?this.$confirm("本次领料数量>计划数量-已领料数量, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.dialogData.isreplaceable=e.isreplaceable,e.dialogData.setCount=e.selectList[0].planCount,e.dialogData.businessCode=e.initData.businessCode,e.dialogData.temp=JSON.stringify(e.selectList),e.dialogData.tempLable=e.tempLable,e.dialogData.title="新增物料",e.openDialogName="dialogAdd",e.showDialog=!0,e.visibleState=!0}).catch(function(){e.$message({type:"info",message:"已取消"})}):(this.dialogData.isreplaceable=this.isreplaceable,this.dialogData.setCount=this.selectList[0].planCount,this.dialogData.businessCode=this.initData.businessCode,this.dialogData.temp=JSON.stringify(this.selectList),this.dialogData.tempLable=this.tempLable,this.dialogData.title="新增物料",this.openDialogName="dialogAdd",this.showDialog=!0,this.visibleState=!0))},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&(e.selectList?e.selectList.length>0&&this.pushData(e.selectList):this.dialogClose())},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}}),l=(i("ICOL"),i("dIPm"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[e._l(e.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]}),e._v(" "),i("el-checkbox",{staticStyle:{"padding-top":"15px",float:"right"},on:{change:e.useReplaceable}},[e._v("是否使用替代物")])],2),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_produce_producePlan_dialogInputFromBom0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.backStep}},[e._v("上一步")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);s.options.__file="dialogInputFromBom.vue";t.default=s.exports},gJvL:function(e,t,i){},gUyI:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo");var a=i("zF5t"),o=i("SOZt"),n=i("WIyV");i("z0WU");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:n.a},name:"dialog-add",props:["initData","visible"],data:function(){return{userData:[],executorIds:[],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"选择员工",data:null,temp:{},tempLable:null,isSingle:!0,tableUrl:"/warehouse/warehouseProduct/listPageWarehouseProductsDispatchOption",tableParm:{}},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tableData:[],rowTableList:[],apiObj:{apiName:"listUserByRole",params:{pageNo:1,userIsdisable:"1",queryStr:"role.name like '%仓库管理员%'",fieldCode:"userCode,userName,roleName"}},customColumn:[],mergeTitle:[],mergeColumn:[],mergeRow:[],pageData:null,pageNo:1}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initUserData()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{initUserData:function(){var e=this;Object(a.findListUserByRole)({userIsdisable:"1",queryStr:"role.name like '%仓库管理员%'"}).then(function(t){var i=t.result.options;null!=i&&i.length>0&&i.forEach(function(t){var i=t.id,a=t.userName;null!=i&&i.trim().length>0&&null!=a&&a.trim().length>0&&e.userData.push({key:i,label:a,disabled:!1})})}).catch(function(e){})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},leftCheckChange:function(e){var t=this.userData;if(null!=t&&0!=t.length)if(0==e.length)t.forEach(function(e){e.disabled=!1});else if(e.length>0){var i="";e.forEach(function(e){i=i+e+","}),t.forEach(function(e){var t=e.key;-1==i.indexOf(t)&&(e.disabled=!0)})}},databridge:function(e){e.length&&(this.executorIds=[e[0].id])},save:function(){var e=this;if(null!=this.executorIds&&0!=this.executorIds.length){var t="";this.executorIds.forEach(function(e){t=t+e+","}),this.dialogLoading=!0,Object(o.updateExecutor)({detailId:this.temp.detailId,executorIds:t}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择执行人！"})},closeDialog:function(e){this.showDialog=!1}},watch:{pageNo:function(){this.initTable()}}},r=(i("SuPW"),i("+3R6"),i("KHd+")),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"800px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{padding:"10px"}},[i("custom-base-table",{ref:"editExecutorDialog",attrs:{"data-custom-table-id":"views_warehouse_out_manage_dialogEditExecutor0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,showCheckBox:!0,isSingle:!0,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"editExecutorDialog",useDefaultBtn:!1,showAll:!1},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogEditExecutor.vue";t.default=c.exports},gZnM:function(e,t,i){"use strict";i.r(t);var a={components:{customBaseTable:i("WIyV").a},props:["initData","visible"],data:function(){return{businessId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageSaleRetreatDetailByIn",params:{fieldCode:"sysCode,retreatTypeName,customerName,productCode,productName,productSpec,productGenreName,orderUnitName,orderCount,orderSum,stateName",inId:"",queryStr:""}},customColumn:[{}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.businessId=this.initData.businessId,this.apiObj.params.inId=this.initData.businessId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("el-row",{staticStyle:{"padding-top":"10px"},style:e.initData.table_style},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_sale_retreat_dialogRetreatDetailByIn0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);n.options.__file="dialogRetreatDetailByIn.vue";t.default=n.exports},gaaE:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("sanI"),l=i("FGWf");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddCustomer:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,price,priceSum,remark",parentId:"",isNeedPage:"false"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"price",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["单价必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"priceSum",width:"120",componentName:"input",_cellConfig:{compute:"self@priceCount(*)self@price",editable:!1}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>￥ {{data.total.toFixed(2)}}</span></li>\n                    </ul>'},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},data:{total:"0.00"},computes:{total:"table@priceSum"}},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"3"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="销售发货出库",this.temp.type="9459be975cd94ada8443cdf32f52c2be",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"},this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={id:n.id,productId:n.productId,price:n.price,remark:n.remark,priceCount:n.priceCount,priceUnit:n.priceUnit,p2nFormula:n.p2nFormula,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.updateWarehouseOutByWc)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:"",priceCount:"",remark:"",price:"0.00",priceSum:"0.00"};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_sale_saleOutWC_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogEdit.vue";t.default=d.exports},gamf:function(e,t,i){},gbju:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("yt8O"),i("XfO3"),i("9AAn");var a=i("2+ib"),o=i("+NOJ"),n={components:{multilevelTable:a.a},props:["initData","visible"],data:function(){return{retreatDtlId:"",qualityTypeSelect:{},rowData:{},qualityTypeNameMap:new Map([["全检","1"],["抽检","2"]]),tableData:[],tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"qualityTypeName",width:"100",componentName:"select",_cellConfig:{outputData:!0,hideTitle:!0,options:[{id:"全检",label:"全检"},{id:"抽检",label:"抽检"}]}},{columnIndex:"qualityCount",width:"120",componentName:"input",_cellConfig:{disabledState:{key:"qualityTypeValue",value:"1"},rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"},{greaterThan:["0",!1]}],message:["不可为空！","请输入大于零的整数或小数","不可等于零！"]}},{columnIndex:"badCount",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["不可为空！","请输入大于零的整数或小数"]}},{columnIndex:"discardCount",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["不可为空！","请输入大于零的整数或小数"]}},{columnIndex:"receiveCount",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["不可为空！","请输入大于零的整数或小数"]}}],apiObj:{apiName:"listPageAssistRetreatDetailByQualityExecute",params:{fieldCode:"prodInfo,orderUnitName,qualityTypeName,orderCount,qualityCount,badCount,discardCount,receiveCount",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",retreatDtlId:""}},tempData:{},showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"badCount",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["不可为空！","请输入大于零的整数或小数"]}}],apiObj:{apiName:"findQualityByAssist",params:{fieldCode:"qualityName,qualityCriterion,badCount",business:"purchase",isNeedPage:"false",orderStr:"cdate asc"}},dynamicValue:{productId:"self@productId"},tempData:{},showIndex:!1,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!1,isVisible:!1,inDialog:!0}},beforeCreate:function(){},created:function(){this.retreatDtlId=this.initData.rowData.id,this.tableConfigList[0].apiObj.params.retreatDtlId=this.initData.rowData.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},getData:function(){this.$refs.customBaseTable.getData()},databridge:function(e){Array.isArray(e)?(this.tableData=[],this.tableData=e):(null!=e.item&&(this.qualityTypeSelect=e.item),null!=e.item&&null!=e.row&&(this.rowData=e.row),this.setQualityTypeValue(this.qualityTypeSelect,this.rowData),this.setQualityCountDefault(this.qualityTypeSelect,this.rowData))},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},closeDialog:function(){},deleteRow:function(e){this.deleteData(e)},setQualityTypeValue:function(e,t){var i=e.id,a=this.qualityTypeNameMap.get(i);t.qualityTypeValue=a},setQualityCountDefault:function(e,t){var i=e.id,a=this.qualityTypeNameMap.get(i);"1"==a?t.qualityCount=t.orderCount:"2"==a&&(t.qualityCount="0.00")},findSumBadCount:function(e){var t=0;if(null!=e&&e.length>0)for(var i=0;i<e.length;i++){t+=e[i].badCount/1}return t},findMinimumBadCount:function(e){var t=0;if(null!=e&&e.length>0)for(var i=0;i<e.length;i++){var a=e[i].badCount/1;a>0&&0==t?t=a:a>0&&a<t&&(t=a)}return t},checkColumnByFirst:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.qualityTypeValue,n=a.orderCount,l=a.qualityCount;"1"==o&&l/1-n/1!=0?t+="检验方式(全检) 实检数必须与退货数相等！":"2"==o&&l/1-n/1>0&&(t+="检验方式(抽检) 实检数不可大于退货数！");var s=a.badCount/1;a.discardCount/1+a.receiveCount/1-s!=0&&(t+="不合格数必须等于(报废数+让步接收)！")}return t},checkColumnBySecond_1:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.qualityCount,n=a.children;if(null!=n&&n.length>0)for(var l=0;l<n.length;l++){n[l].badCount/1>o&&(t+="检验不合格不可大于实检数！")}}return t},checkColumnBySecond_2:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.badCount/1,n=a.children;if(null!=n&&n.length>0)for(var l=0;l<n.length;l++){n[l].badCount/1>o&&(t+="检验不合格不可大于不合格数！")}if(null!=n&&n.length>0){var s=this.findSumBadCount(n);if(s>0){var r=this.findMinimumBadCount(n);o<r&&(t=t+"不合格数不可小于"+r+"！")}o>s&&(t+="不合格数不可大于检验不合格总和！")}}return t},findJsonStringByTable:function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i],o="全检";null!=a.qualityTypeName&&null!=a.qualityTypeName.item&&null!=a.qualityTypeName.item.id?o=a.qualityTypeName.item.id:null!=a.qualityTypeName&&a.qualityTypeName.trim().length>0&&(o=a.qualityTypeName.trim());for(var n=this.qualityTypeNameMap.get(o),l={id:a.id,qualityType:n,orderCount:a.orderCount,retreatCode:a.retreatCode,qualityCount:a.qualityCount,badCount:a.badCount,discardCount:a.discardCount,receiveCount:a.receiveCount,parentId:a.parentId,productId:a.productId,orderId:a.orderId,orderDtlId:a.orderDtlId,orderUnit:a.orderUnit,deliverDtlChildId:a.deliverDtlChildId,deliverDtlId:a.deliverDtlId,deliverId:a.deliverId,supplierId:a.supplierId,supplierName:a.supplierName,children:""},s=[],r=a.children,c=0;c<r.length;c++){var d=r[c],u={signDetailId:a.id,assistProductId:a.assistProductId,productId:a.productId,orderUnit:a.orderUnit,qualityId:d.id,badCount:d.badCount};s.push(u)}l.children=s,t.push(l)}return JSON.stringify(t)},save:function(){this.getData(),null!=this.tableData&&this.tableData.length>0&&this.addWarehouseInExecute(this.tableData)},addWarehouseInExecute:function(e){var t=this,i=this.checkColumnByFirst(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else if(null!=(i=this.checkColumnBySecond_1(e))&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else if(null!=(i=this.checkColumnBySecond_2(e))&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{var a=this.findJsonStringByTable(e);this.dialogLoading=!0,Object(o.updateAssistRetreatDetailByProductQualityExecute)({roleId:this.$storage.get("userInfo").roleIds,jsonStr:a}).then(function(e){0===e.code&&(t.dialogLoading=!1,t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-row",[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_quality_assistQuality_assistRetreatProductByQuality_dialogExecute0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogExecute.vue";t.default=s.exports},gepB:function(e,t,i){"use strict";i("yt8O"),i("RW0V"),i("Z2Ku"),i("91GP"),i("dRSK"),i("rGqo");var a=i("k7+O"),o=i.n(a),n=i("e+jF"),l=i("MngD"),s=i("z1Gy"),r=i("k9rF");function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d={name:"visualization-preview",props:{visualizationConfig:{type:Object,default:function(){return null}},showModel:{type:String,default:""}},components:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){c(e,t,i[t])})}return e}({GridLayout:n.GridLayout,GridItem:n.GridItem,editShape:l.a},s.a),data:function(){return{layoutBoxHeight:0,layoutBoxHeightTimer:"",opacityState:!0,viewMessageDisplay:!0,screenfullAddEventd:!1,screenfullState:!1,viewMouseTimer:"",viewMouseState:!0,viewWidths:[]}},directives:{"set-view-width":{inserted:function(e,t,i){setTimeout(function(a){i.context.$set(i.context.viewWidths,t.value.index,e.offsetWidth)})}}},computed:{setVisualizationConfig:function(){if(this.visualizationConfig){var e=JSON.parse(JSON.stringify(this.visualizationConfig));return e.layout.forEach(function(e){e.userComponents=e.userComponents.map(function(e){if(e.componentId){var t=r.a[1].components.find(function(t){return t.componentId===e.componentId});return Object.assign({},t||{},e)}return e})}),e}return null},tempLayout:function(){return this.setVisualizationConfig?this.setVisualizationConfig.layout:[]},setRowHeight:function(){return this.layoutBoxHeight/24},setCommonStyle:function(){var e=this,t={};return this.tempLayout.forEach(function(i,a){(i.userComponents||[]).forEach(function(o){t[o.uuid]=e.getCommonStyle(o.defaultStyle,i.baseWidth,i.baseHeight,e.viewWidths[a])})}),t}},methods:{goHome:function(){this.$router.push({path:"/"})},setLayoutItemStyle:function(e){return{backgroundColor:e.backgroundColor}},viewMousemove:function(){var e=this;this.viewMouseState=!0,clearTimeout(this.viewMouseTimer),this.viewMouseTimer=setTimeout(function(t){e.viewMouseState=!1},5e3)},noScreenfull:function(){this.screenfullClick(!0)},screenfullClick:function(e){if(!o.a.enabled)return this.$message({message:"当前浏览器不支持此功能",type:"warning"}),!1;this.screenfullAddEventd||(this.screenfullAddEventd=!0,o.a.onchange(this.resetClientHeight)),o.a.toggle(),e&&this.closeKanban()},resetClientHeight:function(){var e=this;clearTimeout(this.layoutBoxHeightTimer),this.layoutBoxHeightTimer=setTimeout(function(t){e.layoutBoxHeight=e.$el.clientHeight,e.screenfullState=o.a.isFullscreen})},closeKanban:function(){this.$emit("closeview")},scalingRatio:function(e,t){return e&&t?Math.round(this.$el.querySelector("#".concat(t)).offsetWidth/e):1},getCommonStyle:function(e,t,i,a){var o=["width","left"],n=["height","top"],l=["fontSize"],s=JSON.parse(JSON.stringify(e)),r={};for(var c in s)o.includes(c)?r[c]="".concat(s[c]/t*100,"%"):n.includes(c)?r[c]="".concat(s[c]/i*100,"%"):l.includes(c)?r[c]="".concat(s[c]*((a||t)/t),"px"):r[c]=s[c];return r.transform="rotate(".concat(r.rotate,"deg)"),r.backgroundImage=r.backgroundImage?"url(".concat(r.backgroundImage,")"):"",r}},watch:{screenfullState:function(){var e=this;this.screenfullState?(clearTimeout(this.viewMouseTimer),this.$el.addEventListener("mousemove",this.viewMousemove,!0),this.viewMouseTimer=setTimeout(function(t){e.viewMouseState=!1},5e3)):(clearTimeout(this.viewMouseTimer),this.$el.removeEventListener("mousemove",this.viewMousemove,!0),this.viewMouseState=!0,this.closeKanban())}},mounted:function(){var e=this;this.layoutBoxHeight=this.$el.clientHeight,this.$nextTick(function(t){e.opacityState=!1,setTimeout(function(t){e.screenfullClick(!1)})})},beforeDestroy:function(){clearTimeout(this.layoutBoxHeightTimer),this.screenfullAddEventd&&o.a.off("change",this.resetClientHeight),clearTimeout(this.viewMouseTimer)}},u=(i("HScr"),i("KHd+")),p=Object(u.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"visualizationPreview",style:{cursor:e.viewMouseState?"default":"none"}},[e.setVisualizationConfig?i("div",{staticClass:"visualizationPreviewView"},[i("grid-layout",{attrs:{layout:e.tempLayout,"col-num":24,"row-height":e.setRowHeight,"max-rows":24,"vertical-compact":!0,margin:[0,0],"use-css-transforms":!0},on:{"update:layout":function(t){e.tempLayout=t}}},e._l(e.tempLayout,function(t,a){return i("grid-item",{key:t.i,style:e.setLayoutItemStyle(t),attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i,"is-resizable":!1,"is-draggable":!1}},[i("div",{staticStyle:{position:"relative",height:"100%"},style:{padding:(t.padding||0)+"px"}},[i("div",{directives:[{name:"set-view-width",rawName:"v-set-view-width",value:{index:a},expression:"{index}"}],staticStyle:{position:"relative",height:"100%"},style:{backgroundColor:t.childBackgroundColor}},e._l(t.userComponents||[],function(t){return i("edit-shape",{key:t.uuid,style:e.setCommonStyle[t.uuid],attrs:{uuid:t.uuid,showOnly:!0,isCustom:"custom"===t.type,defaultStyle:t.defaultStyle,active:!1,data:t}},[i(t.elName,e._b({tag:"component",staticClass:"element-on-edit-pane",attrs:{id:t.uuid},on:{unscreenfull:e.noScreenfull}},"component",{value:t.value,item:t,readonly:!0},!1))],1)}),1)])])}),1),e._v(" "),e.viewMessageDisplay?[i("div",{staticClass:"viewMessage",style:{opacity:e.opacityState?1:0},on:{transitionend:function(t){e.viewMessageDisplay=!e.viewMessageDisplay}}},[e._v("\n        按esc可关闭看板\n      ")])]:[i("div",{staticClass:"screenfullBtn"},[i("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.viewMouseState,expression:"viewMouseState"}],attrs:{content:"关闭看板",placement:"left",effect:"light"}},[i("svg-icon",{staticStyle:{"margin-left":"5px"},attrs:{"icon-class":"close","class-name":"screenfull-svg"},on:{click:function(t){e.screenfullClick(!0)}}})],1)],1)]],2):i("div",{staticStyle:{height:"100%","text-align":"center","padding-top":"200px","font-size":"30px"}},[i("div",[e._v("没有可用的配置")]),e._v(" "),i("div",[i("el-button",{on:{click:e.goHome}},[e._v("返回首页")])],1)])])},[],!1,null,"7529c7b8",null);p.options.__file="index.vue";t.a=p.exports},ghff:function(e,t,i){"use strict";var a=i("LTGG");i.n(a).a},gqes:function(e,t,i){"use strict";var a=i("N+mj");i.n(a).a},h5Ym:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("4IJs");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写联系姓名",trigger:"change"}],mobile:[{required:!0,message:"请填写手机号",trigger:"change"}],address:[{required:!0,message:"请填写详细地址",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isMobileNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^1[\\d]{10}").test(e.trim())},checkMobileValue:function(e,t){var i="";return null!=e&&e.trim().length>0&&11!=e.trim().length?i=t+"("+e+")输入错误，请输入11位正确的手机号！":null==e||11!=e.trim().length||this.isMobileNumberByValue(e.trim())||(i=t+"("+e+")输入错误，请输入11位正确的手机号！"),i},checkMobile:function(e){var t=this.checkMobileValue(e,"手机号");null!=t&&t.trim().length>0&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t})},save:function(){var e=this,t=this;JSON.stringify(t.temp);this.$refs.submitForm.validate(function(i){if(i){var o=e.temp.mobile,n=e.checkMobileValue(o,"手机号");if(null!=n&&n.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:n});t.dialogLoading=!0,Object(a.addCustomerAddress)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:e.tempLable.name+":",prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.mobile+":",prop:"mobile"}},[i("el-input",{on:{change:e.checkMobile},model:{value:e.temp.mobile,callback:function(t){e.$set(e.temp,"mobile",t)},expression:"temp.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.phone+":",prop:"phone"}},[i("el-input",{model:{value:e.temp.phone,callback:function(t){e.$set(e.temp,"phone",t)},expression:"temp.phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.email+":",prop:"email"}},[i("el-input",{model:{value:e.temp.email,callback:function(t){e.$set(e.temp,"email",t)},expression:"temp.email"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.address+":",prop:"address"}},[i("el-input",{model:{value:e.temp.address,callback:function(t){e.$set(e.temp,"address",t)},expression:"temp.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.remark+":",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="addressAdd.vue";t.default=s.exports},h9vb:function(e,t,i){"use strict";i("91GP");var a=i("uTIz"),o=i("WIyV"),n=(i("XfO3"),i("HEwt"),i("a1Th"),i("rE2o"),i("ioFf"),i("rGqo"),i("KKXr"),i("xfY5"),i("Zni2")),l=i.n(n),s=i("XXtD"),r=(i("75ce"),i("lLGD"),i("0o9m"),i("AH3D"),i("Ynxi"),i("zixQ"),i("4Cjf"));function c(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var d={name:"chart-sales-report-volume-line",components:{chart:l.a,ChartMask:s.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(e){var t=e.split("-");return t[1]=t[1]-0+"月",t.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,c(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var e=Math.max.apply(Math,c(this.salesNumber))-0,t=(Math.floor(e+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,c(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var e=Math.max.apply(Math,c(this.salesVolume))-0,t=(Math.floor(e+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销售额曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"],left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"邮件营销",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",areaStyle:{},data:[-220,182,191,234,290,330,3100]},{name:"视频广告",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",areaStyle:{},data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(e,t){return!!(e&&e.length&&t&&t.length)&&(e[0]>=t[0]&&t[1]>=e[1])},resetResult:function(e){var t=JSON.parse(this.resultData);this.chartData=t.filter(function(t){if(t.month>=e[0]&&e[1]>=t.month)return!0}),this.formatChartData()},formatChartData:function(){var e=this.chartData;e.length&&(this.salesVolume=e.map(function(e){return e.salesVolume-0}),this.salesNumber=e.map(function(e){return e.salesNumber-0}),this.months=e.map(function(e){return e.month}))},httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.resultData=JSON.stringify(r.a.trend.result||[]),e.chartData=r.a.trend.result||[],e.formatChartData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.resultData=JSON.stringify(t.result||[]),e.chartData=t.result||[],e.formatChartData(),e.loading=!1}).catch(function(t){e.loading=!1})}},created:function(){this.httpRequest()},render:function(e){return e("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?e("div",[e("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):e("chart-Mask",{attrs:{loading:this.loading}})])}};function u(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p={name:"chart-sales-report-number-line",components:{chart:l.a,ChartMask:s.a},props:{height:{type:String,default:"300px"},width:{type:String,default:"100%"},node:{type:Number,default:5},apiObj:{type:Object,default:function(){return{}}},sequence:{type:Boolean,default:!0}},data:function(){return{loading:!0,chartData:null,salesVolume:[],salesNumber:[],months:[],resultData:null}},computed:{hasData:function(){return this.chartData},setMonths:function(){return this.months.map(function(e){var t=e.split("-");return t[1]=t[1]-0+"月",t.join("年")})},setSalesNumberMin:function(){return this.salesNumber.length?Math.min.apply(Math,u(this.salesNumber))-0:0},setSalesNumberMax:function(){if(!this.salesNumber.length)return 5;var e=Math.max.apply(Math,u(this.salesNumber))-0,t=(Math.floor(e+(this.setSalesNumberMin>0?0:this.setSalesNumberMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setSalesVolumeMin:function(){return this.salesVolume.length?Math.min.apply(Math,u(this.salesVolume))-0:0},setSalesVolumeMax:function(){if(!this.salesVolume.length)return 5;var e=Math.max.apply(Math,u(this.salesVolume))-0,t=(Math.floor(e+(this.setSalesVolumeMin>0?0:this.setSalesVolumeMin))+"").split("");return t[0]=t[0]-0+1,t.map(function(e,t){return t?"0":e+""}).join("")-0},setYAxisMin:function(){return Math.min(this.setSalesNumberMin,this.setSalesVolumeMin)},setYAxisMax:function(){return Math.max(this.setSalesNumberMax,this.setSalesVolumeMax)},defaultOption:function(){return{title:{text:"销量曲线"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"],left:"right"},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"邮件营销",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",areaStyle:{},data:[-220,182,191,234,290,330,3100]},{name:"视频广告",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",areaStyle:{},data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]}},userInfo:function(){return this.$store.getters.userInfo},setParams:function(){return Object.assign({},this.apiObj.params)}},watch:{},methods:{useStorage:function(e,t){return!!(e&&e.length&&t&&t.length)&&(e[0]>=t[0]&&t[1]>=e[1])},resetResult:function(e){var t=JSON.parse(this.resultData);this.chartData=t.filter(function(t){if(t.month>=e[0]&&e[1]>=t.month)return!0}),this.formatChartData()},formatChartData:function(){var e=this.chartData;e.length&&(this.salesVolume=e.map(function(e){return e.salesVolume-0}),this.salesNumber=e.map(function(e){return e.salesNumber-0}),this.months=e.map(function(e){return e.month}))},httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.resultData=JSON.stringify(r.a.trend.result||[]),e.chartData=r.a.trend.result||[],e.formatChartData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.resultData=JSON.stringify(t.result||[]),e.chartData=t.result||[],e.formatChartData(),e.loading=!1}).catch(function(t){e.loading=!1})}},created:function(){this.httpRequest()},render:function(e){return e("div",{directives:[{name:"loading",value:this.loading}],class:"resetChartViewStyle",attrs:{"element-loading-text":"数据加载中...","element-loading-spinner":"none"},style:{height:this.height}},[this.hasData?e("div",[e("chart",{style:{height:"".concat(parseInt(this.height),"px"),width:this.width},attrs:{options:this.defaultOption}})]):e("chart-Mask",{attrs:{loading:this.loading}})])}},m=(i("wDdD"),{name:"product-sale-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}}},components:{chart:l.a,ChartMask:s.a},data:function(){return{chartTitles:["销售额占比","销量占比"],chartKeys:["productVolume","productNumber"],baseOption:{},chartData:null,loading:!0}},computed:{hasData:function(){return!!this.chartData},setSeriesData:function(){return this.chartData||{}},defaultOption:function(){var e=this;return this.chartKeys.map(function(t,i){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+e.chartTitles[i]+": {c} ({d}%)"},series:[{name:"产品",type:"pie",data:e.setSeriesData[t],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})}},methods:{httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.chartData=e.tempCreateData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.chartData=t.result||[],e.loading=!1}).catch(function(t){e.loading=!1})},tempCreateData:function(){var e=this,t={};return this.chartKeys.forEach(function(i){t[i]=e.genData(6)}),t},genData:function(e){for(var t=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],i=[],a=[],o={},n=0;n<e;n++)name=Math.random()>.65?l(4,1)+"·"+l(3,0):l(2,1),i.push(name),a.push({name:name,value:Math.round(1e5*Math.random())}),o[name]=n<6;return a;function l(e,i){for(var a=Math.ceil(Math.random()*e+i),o=[],n=0;n<a;n++)o.push(t[Math.round(Math.random()*t.length-1)]);return o.join("")}}},created:function(){this.httpRequest()},render:function(e){var t=this;return e("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.chartTitles.map(function(i,a){return e("el-col",{attrs:{span:12},class:"chartViews"},[e("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:t.loading}]},[e("div",{style:"text-align:center;"},[i]),e("div",{style:{height:"".concat(parseInt(t.height)-120,"px"),position:"relative"}},[t.hasData?e("chart",{style:{height:"100%",width:"100%"},attrs:{options:t.defaultOption[a]}}):e("chart-Mask",{attrs:{loading:t.loading}})])])])})])}}),h={name:"product-customer-pie",props:{height:{type:String,default:"400px"},apiObj:{type:Object,default:function(){return{}}},list:{type:Array,default:function(){return[]}}},components:{chart:l.a,ChartMask:s.a},data:function(){return{chartTitles:["销售额占比","销量占比"],chartKeys:["productVolume","productNumber"],baseOption:{},chartData:null,loading:!0}},computed:{initLayout:function(){var e=this.list.length;return e<4?{height:"".concat(parseInt(this.height)-120,"px"),span:24/e}:{height:"200px",span:8}},hasData:function(){return!!this.chartData},setSeriesData:function(){return this.chartData||{}},defaultOption:function(){var e=this;return this.chartKeys.map(function(t,i){return{tooltip:{trigger:"item",formatter:"{a}: {b}<br/>"+e.chartTitles[i]+": {c} ({d}%)"},series:[{name:"产品",type:"pie",data:e.setSeriesData[t],label:{show:!1},labelLine:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})}},methods:{httpRequest:function(){var e=this;this.loading=!0,this.apiObj.apiName?this.requestBody(this):setTimeout(function(t){e.chartData=e.tempCreateData(),e.loading=!1},3e3)},requestBody:function(e){e.$api[e.apiObj.apiName](e.setParams).then(function(t){e.chartData=t.result||[],e.loading=!1}).catch(function(t){e.loading=!1})},tempCreateData:function(){var e=this,t={};return this.chartKeys.forEach(function(i){t[i]=e.genData(6)}),t},genData:function(e){for(var t=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜","戚","谢","邹","喻","柏","水","窦","章","云","苏","潘","葛","奚","范","彭","郎","鲁","韦","昌","马","苗","凤","花","方","俞","任","袁","柳","酆","鲍","史","唐","费","廉","岑","薛","雷","贺","倪","汤","滕","殷","罗","毕","郝","邬","安","常","乐","于","时","傅","皮","卞","齐","康","伍","余","元","卜","顾","孟","平","黄","和","穆","萧","尹","姚","邵","湛","汪","祁","毛","禹","狄","米","贝","明","臧","计","伏","成","戴","谈","宋","茅","庞","熊","纪","舒","屈","项","祝","董","梁","杜","阮","蓝","闵","席","季","麻","强","贾","路","娄","危"],i=[],a=[],o={},n=0;n<e;n++)name=Math.random()>.65?l(4,1)+"·"+l(3,0):l(2,1),i.push(name),a.push({name:name,value:Math.round(1e5*Math.random())}),o[name]=n<6;return a;function l(e,i){for(var a=Math.ceil(Math.random()*e+i),o=[],n=0;n<a;n++)o.push(t[Math.round(Math.random()*t.length-1)]);return o.join("")}}},created:function(){this.httpRequest()},render:function(e){var t=this;return e("el-row",{attrs:{gutter:12},class:"comprehensive-sale-analysis",style:{height:this.height}},[this.list.map(function(i,a){return e("el-col",{attrs:{span:t.initLayout.span},class:"chartViews"},[e("el-card",{attrs:{shadow:"hover"},style:{overflow:"visible"},directives:[{name:"loading",value:t.loading}]},[e("div",{style:"text-align:center;"},[a]),e("div",{style:{height:t.initLayout.height,position:"relative"}},[t.hasData?e("chart",{style:{height:"100%",width:"100%"},attrs:{options:t.defaultOption[a]}}):e("chart-Mask",{attrs:{loading:t.loading}})])])])})])}},g={name:"charts-sale-staff",components:{baseTable:o.a,searchBar:a.a,volumeLine:d,numberLine:p,salePie:m,customerPie:h},data:function(){return{guid:"",searchList:[{label:"货品编码",type:"input",mapKey:"productCode",configs:{},placeholder:"请输入编码"},{label:"货品名称",type:"input",mapKey:"productName",configs:{},placeholder:"请输入名称"},{label:"型号规格",type:"input",mapKey:"productNuit",configs:{},placeholder:"请输入规格"},{label:"属性",type:"input",mapKey:"productAttr",configs:{},placeholder:"请输入属性"},{label:"员工姓名",type:"input",mapKey:"staffName",configs:{},placeholder:"请输入属性"},{label:"统计周期",type:"radio",mapKey:"cycle",configs:{options:["日","月","年"],defaultValue:0}},{label:"日期范围",type:"date",mapKey:"date",configs:{clearable:!0,name:"",type:"daterange",pickerOptions:{hidePicker:!0}},placeholder:"请选择"}],searchObj:{},tableConfigList:[{apiObj:{apiName:"getBomTreeProduct",params:{}},showCheckBox:!0,useSummary:!0}],userSelectedList:[],dialogVisible:[!1,!1,!1,!1],dialogIndex:0,dialogTitle:["销售额曲线","销量曲线","销量占比","员工产品"],volumeLineApiObj:{apiName:"",params:{}},numberLineApiObj:{apiName:"",params:{}}}},computed:{systemInfo:function(){return this.$store.getters.systemInfo},size:function(){return this.$store.getters.size},tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0)-36+"px":"100%"},setVolumeLineApiObj:function(){var e=Object.assign({},this.searchObj,{productIds:this.userSelectedList.map(function(e){return e.id||""})||[]});return this.volumeLineApiObj.params=Object.assign({},this.volumeLineApiObj.params,e),this.volumeLineApiObj},setNumberLineApiObj:function(){var e=Object.assign({},this.searchObj,{productIds:this.userSelectedList.map(function(e){return e.id||""})||[]});return this.numberLineApiObj.params=Object.assign({},this.numberLineApiObj.params,e),this.numberLineApiObj}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.searchObj),this.volumeLineApiObj.params=Object.assign({},this.volumeLineApiObj.params,this.searchObj),this.numberLineApiObj.params=Object.assign({},this.numberLineApiObj.params,this.searchObj)},databridge:function(e){this.userSelectedList=e},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},showSaleStaffDialog:function(e){this.resetSaleStaffDialog(),this.dialogIndex=e,this.dialogVisible[this.dialogIndex]=!0},resetSaleStaffDialog:function(){this.dialogVisible=[!1,!1,!1,!1]}},created:function(){}},f=(i("1VmT"),i("KHd+")),b=Object(f.a)(g,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sale-staff"},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList,inChart:!0},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",[i("el-button",{attrs:{type:"primary",size:e.size},on:{click:function(t){e.showSaleStaffDialog(0)}}},[e._v("销售额曲线")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:e.size},on:{click:function(t){e.showSaleStaffDialog(1)}}},[e._v("销量曲线")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:e.size},on:{click:function(t){e.showSaleStaffDialog(2)}}},[e._v("销量占比")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:e.size,disabled:!e.userSelectedList.length},on:{click:function(t){e.showSaleStaffDialog(3)}}},[e._v("员工产品")])],1),e._v(" "),i("el-row",{staticStyle:{"border-bottom":"none","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.tableHeight,"margin-top":e.searchList.length?"10px":"0"}},[i("base-table",{ref:"customBaseTable",attrs:{tableConfigList:e.tableConfigList},on:{databridge:e.databridge,callmethod:e.callMethod}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.dialogTitle[e.dialogIndex],"close-on-click-modal":!1,visible:e.dialogVisible[e.dialogIndex],width:"mini"===e.size?"800px":"1200px"},on:{"update:visible":function(t){e.$set(e.dialogVisible,e.dialogIndex,t)}}},[e.dialogVisible[0]?[i("volume-line",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.setVolumeLineApiObj}})]:e.dialogVisible[1]?[i("number-line",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.setNumberLineApiObj}})]:e.dialogVisible[2]?[i("sale-pie",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.setNumberLineApiObj}})]:e.dialogVisible[3]?[i("customer-pie",{attrs:{height:e.systemInfo.clientHeight?.65*e.systemInfo.clientHeight+"px":"400px",apiObj:e.setNumberLineApiObj,list:e.userSelectedList}})]:e._e(),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.resetSaleStaffDialog}},[e._v("关 闭")])],1)],2)],1)},[],!1,null,"aebe0d3c",null);b.options.__file="index.vue";t.a=b.exports},hHmD:function(e,t,i){"use strict";var a=i("C4Dn");i.n(a).a},"hI+3":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("6tA9");i("QmdA");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{dialogAdd:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{customerId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{companyName:"",invoiceNumber:"",address:"",bankName:"",bankCode:"",mobile:"",remark:"",customerId:""},tempLable:{},tempNotEditable:{},rules:{companyName:[{required:!0,message:"请填写公司名称",trigger:"change"}]},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{temp:{},title:""}}},created:function(){this.customerId=this.initData.customerId,this.temp.customerId=this.initData.customerId,this.temp.companyName=this.initData.customerName},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogData.temp=JSON.parse(JSON.stringify(e.temp)),e.dialogData.title="选择订单",e.openDialogName="dialogAdd",e.showDialog=!0,e.inLinVisible=!0)})},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"450px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"75%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"75px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"companyName"}},[i("el-input",{model:{value:e.temp.companyName,callback:function(t){e.$set(e.temp,"companyName",t)},expression:"temp.companyName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"税号:",prop:"invoiceNumber"}},[i("el-input",{model:{value:e.temp.invoiceNumber,callback:function(t){e.$set(e.temp,"invoiceNumber",t)},expression:"temp.invoiceNumber"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地址:",prop:"address"}},[i("el-input",{model:{value:e.temp.address,callback:function(t){e.$set(e.temp,"address",t)},expression:"temp.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电话:",prop:"mobile"}},[i("el-input",{model:{value:e.temp.mobile,callback:function(t){e.$set(e.temp,"mobile",t)},expression:"temp.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开户银行:",prop:"bankName"}},[i("el-input",{model:{value:e.temp.bankName,callback:function(t){e.$set(e.temp,"bankName",t)},expression:"temp.bankName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"账号:",prop:"bankCode"}},[i("el-input",{model:{value:e.temp.bankCode,callback:function(t){e.$set(e.temp,"bankCode",t)},expression:"temp.bankCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAddCustomerInvoice.vue";t.default=s.exports},hIUk:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("rmg0");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{dialogAddCustomerInvoice:i("SwnK").default,dialogAdd:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{customerId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{companyName:"",invoiceNumber:"",address:"",bankName:"",bankCode:"",mobile:"",remark:"",customerId:"",customerInvoiceId:""},tempLable:{},tempNotEditable:{},rules:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{temp:{},title:""},CustomerInvoiceDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择开票信息",tableUrl:"/base/customerInvoice/listPageCustomerInvoices",tableParm:{fieldCode:"companyName,invoiceNumber,address,bankName,mobile,remark,isdefaultStr",customerId:this.initData.customerId},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.customerInvoiceId=this.temp.id)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},customerInvoiceSelect:function(e){e[0]&&(this.temp.customerInvoiceId=e[0].id,this.temp.customerId=this.initData.customerId,this.temp.companyName=e[0].companyName,this.temp.invoiceNumber=e[0].invoiceNumber,this.temp.address=e[0].address,this.temp.bankName=e[0].bankName,this.temp.bankCode=e[0].bankCode,this.temp.mobile=e[0].mobile,this.temp.remark=e[0].remark)},addCustomerInvoice:function(){this.temp={},this.temp.customerId=this.initData.customerId,this.dialogData.customerId=this.initData.customerId,this.dialogData.temp=JSON.parse(JSON.stringify(this.temp)),this.dialogData.title="新增开票信息",this.openDialogName="dialogAddCustomerInvoice",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"450px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"75%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"75px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"companyName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.companyName,callback:function(t){e.$set(e.temp,"companyName",t)},expression:"temp.companyName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"税号:",prop:"invoiceNumber"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.invoiceNumber,callback:function(t){e.$set(e.temp,"invoiceNumber",t)},expression:"temp.invoiceNumber"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地址:",prop:"address"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.address,callback:function(t){e.$set(e.temp,"address",t)},expression:"temp.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电话:",prop:"mobile"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.mobile,callback:function(t){e.$set(e.temp,"mobile",t)},expression:"temp.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开户银行:",prop:"bankName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.bankName,callback:function(t){e.$set(e.temp,"bankName",t)},expression:"temp.bankName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"账号:",prop:"bankCode"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.bankCode,callback:function(t){e.$set(e.temp,"bankCode",t)},expression:"temp.bankCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"发票号码:",prop:"invoiceCode"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.invoiceCode,callback:function(t){e.$set(e.temp,"invoiceCode",t)},expression:"temp.invoiceCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:"2",disabled:!0},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogViewCustomerInvoice.vue";t.default=s.exports},hcIl:function(e,t,i){},hcRW:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("EDKZ"),l=i("hZMg");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:"",deleteIds:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark",parentId:"",type:"edit"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{deptType:"6d8a030ba1ce11e884ad00163e105f0a",type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="生产退库",this.temp.type="8e35209f19804e94940f076c8d71b955",this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={id:l.id,productId:l.productId,remark:l.remark,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.updateWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,this.temp.deptId="",this.temp.deptName="",Object(l.findUserDepartmentByUser)({userId:this.temp.makeId,deptType:"6d8a030ba1ce11e884ad00163e105f0a"}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,this.tableData.push(o)}}},watch:{}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_produce_materialRebackWC_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogEdit.vue";t.default=d.exports},hgz3:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("mkwT"),o=i("TFY4");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{addPeriod:a.default,addCustom:o.default},name:"dialog-add",props:["initData","visible"],data:function(){return{eqptTableData:[],modeId:"ee66976e1b3d453bae8839e6e9458b2f",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",table_style:"",equipmentId:"",title:"",fullscreen:!1}}},created:function(){this.eqptTableData=this.initData.eqptTableData},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},radioChange:function(){},toNextPage:function(){"ee66976e1b3d453bae8839e6e9458b2f"==this.modeId?(this.dialogData.modeId=this.modeId,this.dialogData.eqptTableData=this.eqptTableData,this.dialogData.title="设定保养日期",this.openDialogName="addCustom",this.showDialog=!0,this.inLinVisible=!0):"9a05a30aa81e4637b498703b14cde8b1"==this.modeId&&(this.dialogData.modeId=this.modeId,this.dialogData.eqptTableData=this.eqptTableData,this.dialogData.title="设定周期",this.openDialogName="addPeriod",this.showDialog=!0,this.inLinVisible=!0)},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.showDialog=!1,this.isVisible=!1}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",attrs:{model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{margin:"10px 100px"}},[i("el-radio-group",{on:{change:e.radioChange},model:{value:e.modeId,callback:function(t){e.modeId=t},expression:"modeId"}},[e._v("\n          //设备保养方式: 7ef6384e92a343ccb839112a5d59b2fe (vmes_dictionary.id)\n          //ee66976e1b3d453bae8839e6e9458b2f 自定义\n          //9a05a30aa81e4637b498703b14cde8b1 按周期\n          "),i("el-radio",{attrs:{label:"ee66976e1b3d453bae8839e6e9458b2f"}},[e._v("自定义")]),i("br"),e._v(" "),i("el-radio",{attrs:{label:"9a05a30aa81e4637b498703b14cde8b1"}},[e._v("按周期")]),i("br")],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.toNextPage}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="selectMode.vue";t.default=r.exports},hmHw:function(e,t,i){"use strict";i.r(t);i("rGqo");var a=i("WIyV"),o=i("OsNz"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{deliverId:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},isVisible:!1,inDialog:!0,tableData:[],orderDtlList:[],productUnit:{},rowData:{},apiObj:{apiName:"listPageSaleDeliverDetailByPrice",params:{fieldCode:"prodInfo,orderUnitName,orderCount,priceUnitName,priceCount,productPrice,sum",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:this.initData.deliverId,isNeedPage:"false"}},customColumn:[{columnIndex:"priceUnitName",width:100,componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],message:["此项不能为空！"],outputData:!0}},{columnIndex:"priceCount",width:100,componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"},{greaterThan:["0",!1]}],message:["此项不能为空！","请输入大于零的正整数或(1,2)位小数！","必须大于零！"]}},{columnIndex:"productPrice",width:100,componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+\\.{0,1}[0-9]{0,4}$"},{greaterThan:["0",!1]}],message:["此项不能为空！","请输入大于零的正整数或(1,4)位小数！","必须大于零！"]}},{columnIndex:"sum",width:100,componentName:"input",_cellConfig:{hideTitle:!0,compute:"self@priceCount(*)self@productPrice"}},{columnIndex:"remark",width:120,componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{maxExpectDate:""}}},beforeCreate:function(){},created:function(){this.deliverId=this.initData.deliverId,this.apiObj.params.parentId=this.deliverId},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.setProductSum(this.rowData))},save:function(){this.$refs.editDeliverDtlByPriceDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.saveSaleDeliver(this.orderDtlList)},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o="";null!=a.orderUnit&&(o=a.orderUnit);var n="";null!=a.priceUnit&&(n=a.priceUnit);var l=0;null!=a.priceCount&&(l=a.priceCount/1);var s=0;null!=a.orderCount&&(s=a.orderCount/1),o==n&&l!=s&&(t=t+"第 "+(i+1)+" 行: 结算单位与单位相同，结算数量必须与发货数量相同")}return t},saveSaleDeliver:function(e){var t=this;if(null!=e&&0!=e.length){var i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{var a=[];e.forEach(function(e){var t={id:"",priceUnit:"",priceCount:"",productPrice:"",orderId:"",orderDetaiId:""};t.id=e.id,t.priceUnit=e.priceUnit,t.priceCount=e.priceCount,t.productPrice=e.productPrice,t.orderId=e.orderId,t.orderDetaiId=e.orderDetaiId,a.push(t)});var n=JSON.stringify(a);Object(o.updateSaleDeliverDetailByPrice)({deliverId:this.deliverId,dtlJsonStr:n}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条明细！"})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.productPrice&&(t.productPrice=e.productPrice))},setProductSum:function(e){if(null!=e){e.sum="";var t=e.priceCount,i=e.productPrice;null!=t&&t.trim().length>0&&null!=i&&i.trim().length>0&&(e.sum=(t.trim()*i.trim()).toFixed(2))}},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",[i("el-row",{staticStyle:{padding:"10px"}},[i("custom-base-table",{ref:"editDeliverDtlByPriceDialog",attrs:{"data-custom-table-id":"views_sale_deliver_listDeliverByPrice_dialogDetailEditByPrice0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"editDeliverDtlByPriceDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("el-row",{staticStyle:{height:"100px","text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogDetailEditByPrice.vue";t.default=s.exports},huqj:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("R1DK");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{newProductPrice:[{required:!0,trigger:"change",validator:function(t,i,a){null==i||0==i.trim().length?a(new Error("请填写变更单价！")):e.isNumberByValue(i+"")?0==i?a(new Error("请输入大于零的整数或2位小数！")):a():a(new Error("请输入大于零的整数或2位小数！"))}}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",oldProductPrice:"",newProductPrice:"",remark:""}}},created:function(){this.formData.id=this.initData.rowData.id,this.formData.oldProductPrice=this.initData.rowData.price},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.updateWarehouseProductOnPriceByWc)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"原单价:",prop:"oldProductPrice"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.oldProductPrice,callback:function(t){e.$set(e.formData,"oldProductPrice",t)},expression:"formData.oldProductPrice"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"变更单价:",prop:"newProductPrice"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.newProductPrice,callback:function(t){e.$set(e.formData,"newProductPrice",t)},expression:"formData.newProductPrice"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},hwAF:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("rGqo");var a=i("gUyI"),o=(i("nX/d"),i("SOZt")),n=i("z0WU"),l=i("mSNy");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.editBtns_isShow && scope.row.isdisable==\'1\'" type="text" class="btns" style="font-size: 12px;" @click="colConfig.editBtns(scope.row,scope.$index)">修改执行人</el-button>\n      \t\t\t\t\t</div>\n    \t\t\t\t</el-table-column>'},d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable"  :disabled=true></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={components:{dialogEditExecutor:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],selectList:null,initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:c,editBtns:this.editBtns,editBtns_isShow:!1}},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},pageData:null,pageNo:1}},created:function(){"1"==this.initData.temp.state&&(this.initConfigs.tableOperates.editBtns_isShow=!0),this.initTable(this.initData.temp.id)},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{initTable:function(e){var t=this;this.dialogLoading=!0,Object(o.listPageWarehouseOutExecutors)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}({},this.tempQuery,{detailId:e,pageNo:1,pageSize:1e4})).then(function(e){t.getListPage(e),t.dialogLoading=!1}).catch(function(e){t.dialogLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==l.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==l.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==l.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==l.a.locale&&(e.label=t.substring(0,t.indexOf("_")))),"isdisable"===e.prop&&(e.component=d)}),this.internationalConfig(),e.push(this.initConfigs.tableOperates),e},internationalConfig:function(){"en"==l.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==l.a.locale&&(this.initConfigs.tableOperates.label="操作")},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},editBtns:function(e,t){this.dialogData.temp=e,this.dialogData.title="修改执行人",this.openDialogName="dialogEditExecutor",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){"ok"==e.resState&&this.initTable(this.initData.temp.id),this.showDialog=!1,e.resState=this.resState}},watch:{}},p=i("KHd+"),m=Object(p.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"800px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo,isSortable:!0},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);m.options.__file="dialogViewExecutor.vue";t.default=m.exports},i32U:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("V/0Z");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-add",props:["initData","visible"],components:{dialogView:i("/nWt").default},data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{deptName:!0},tempShow:{deptName:!0},rules:{name:[{required:!0,message:"请填写BOM名称",trigger:"change"}],prodName:[(e={required:!0,trigger:"change",message:"请选择货品"},t="trigger",i="change",t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e)]},openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}};var e,t,i},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.name=null,this.temp.remark=null),this.temp.isdefault="1",this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&(this.isVisible=!1,this.dialogClose({resState:"ok"}))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;this.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,Object(a.addBom)(t.temp).then(function(i){t.dialogLoading=!1,0===i.code&&(e.dialogData.temp=e.initData.temp,e.dialogData.temp.id=i.id,e.dialogData.title="编辑",e.openDialogName="dialogView",e.showDialog=!0,e.visibleState=!0)}).catch(function(e){t.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"500px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"400px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:e.tempLable.name+":",prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.prodName+":",prop:"prodName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.prodName,callback:function(t){e.$set(e.temp,"prodName",t)},expression:"temp.prodName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.isdefault+":",prop:"isdefault"}},[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.temp.isdefault,callback:function(t){e.$set(e.temp,"isdefault",t)},expression:"temp.isdefault"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.remark+":",prop:"remark"}},[i("el-input",{model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("取消")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAddNew.vue";t.default=s.exports},i6nb:function(e,t,i){"use strict";var a=i("jEHv");i.n(a).a},iA1r:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("/Z8G");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{maintainDateStr:[{required:!0,trigger:"change",message:"请填写计划保养时间"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{maintainPlanId:"",maintainPlanDateStr:""}}},created:function(){this.formData=this.initData.rowData},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.addEquipmentMaintain)({maintainPlanId:e.formData.id,maintainPlanDateStr:e.formData.maintainPlanDateStr}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"设备编码:",prop:"code"}},[i("el-input",{staticStyle:{width:"250px"},attrs:{readonly:!0},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"设备名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"250px"},attrs:{readonly:!0},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"保养内容:",prop:"name"}},[i("el-input",{staticStyle:{width:"250px"},attrs:{readonly:!0},model:{value:e.formData.maintainContent,callback:function(t){e.$set(e.formData,"maintainContent",t)},expression:"formData.maintainContent"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"保养方式:",prop:"name"}},[i("el-input",{staticStyle:{width:"250px"},attrs:{readonly:!0},model:{value:e.formData.modeName,callback:function(t){e.$set(e.formData,"modeName",t)},expression:"formData.modeName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"计划执行日期:",prop:"maintainPlanDateStr"}},[i("el-date-picker",{staticStyle:{width:"250px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.formData.maintainPlanDateStr,callback:function(t){e.$set(e.formData,"maintainPlanDateStr",t)},expression:"formData.maintainPlanDateStr"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("执行")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="createMaintain.vue";t.default=s.exports},iA4u:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("a0Xs");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{formulaDialog:i("Ck00").a},name:"dialog-edit",props:["initData","visible"],data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{punitName:[{required:!0,trigger:"change",validator:function(t,i,a){e.unitData.defaultSelected.length<=0?a(new Error("请选择计价单位")):a()}}]},unitData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"productUnit",isglobal:"0"}},defaultSelected:[]},formTemp:[],showDialog:!1,visibleState:!1,dialogName:"",formulaState:""}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{openFormulaEdit:function(e){this.dialogName="formulaDialog",this.showDialog=!0,this.formulaState=e,this.visibleState=!0},dialogOpen:function(){this.unitData.defaultSelected=[this.initData.temp.punit],this.temp.unit=this.initData.temp.punit},unitSelect:function(e){e[0]?(this.temp.unit=e[0],this.unitData.defaultSelected=[e[0]]):(this.temp.unit=[],this.unitData.defaultSelected=[])},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;e.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateProductUnit)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"620px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"单位类型:",prop:"type"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.type,callback:function(t){e.$set(e.temp,"type",t)},expression:"temp.type"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"单位:",prop:"punitName"}},[i("base-input-select",{attrs:{data:e.unitData.data},on:{callback:e.unitSelect},model:{value:e.unitData.defaultSelected,callback:function(t){e.$set(e.unitData,"defaultSelected",t)},expression:"unitData.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"计价单位"==e.temp.type,expression:"temp.type=='计价单位'"}],attrs:{label:"计量单位转换计价单位(公式):",prop:"npFormula"}},[i("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",rows:"3",disabled:!0},model:{value:e.temp.npFormula,callback:function(t){e.$set(e.temp,"npFormula",t)},expression:"temp.npFormula"}}),e._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){e.openFormulaEdit("n")}}},[e._v("公式编辑器")])],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"计价单位"==e.temp.type,expression:"temp.type=='计价单位'"}],attrs:{label:"计价单位转换计量单位(公式):",prop:"pnFormula"}},[i("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",rows:"3",disabled:!0},model:{value:e.temp.pnFormula,callback:function(t){e.$set(e.temp,"pnFormula",t)},expression:"temp.pnFormula"}}),e._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){e.openFormulaEdit("p")}}},[e._v("公式编辑器")])],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1),e._v(" "),e.showDialog?i(e.dialogName,{tag:"component",attrs:{state:e.formulaState,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);s.options.__file="dialogUnitEdit.vue";t.default=s.exports},"iF/k":function(e,t,i){"use strict";i("0mN4");var a={name:"table-button",props:{colConfig:{type:Object,default:function(){return{}}},fixed:{type:[Boolean,String],default:!1}},created:function(){},computed:{setFixed:function(){return this.fixed}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-table-column",{attrs:{label:e.colConfig.label,fixed:e.setFixed,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return i("div",{staticClass:"btnBox"},[e.colConfig.btns?e._l(e.colConfig.btns,function(a){return i("el-button",{directives:[{name:"show",rawName:"v-show",value:a.editBtns_isShow,expression:"item.editBtns_isShow"}],staticClass:"btns",staticStyle:{"font-size":"12px"},attrs:{type:"text"},on:{click:function(e){a.method(t.row,t.$index)}}},[e._v(e._s(a.btnName))])}):[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.colConfig.editBtns_isShow,expression:"colConfig.editBtns_isShow"}],staticClass:"btns",staticStyle:{"font-size":"12px"},attrs:{type:"text"},on:{click:function(i){e.colConfig.method(t.row,t.$index)}}},[e._v(e._s(e.colConfig.btnName))])]],2)}}])})},[],!1,null,null,null);n.options.__file="tableButton.vue";t.a=n.exports},iNRT:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d"),i("Oyvg");var a=i("WIyV"),o=i("1IKD"),n=i("nX/d");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{parentId:"null",fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntityVirtual:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"1"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},addProduct:function(){this.temp.warehouseId?(this.dialogData.isNeedWarehouseProduct="true",this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i].priceCount;if(null==a||0==a.trim().length||a<=0)t=t+"第 "+(i+1)+" 行: 出库数量不能为空且必须大于零！";else new RegExp("^[0-9]+([.]{1}[0-9]+){0,1}$").test(a)||(t=t+"第 "+(i+1)+" 行: 出库数量("+a+")输入错误，请输入大于零的整数或小数！")}return t},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){var a=this.checkColumn(e);if(null!=a&&a.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:a});else{for(var o=[],l=0;l<e.length;l++){var s=e[l],r={productId:"",remark:"",priceUnit:"",priceCount:"",p2nIsScale:"",p2nDecimalCount:""};r.productId=s.productId,r.priceCount=s.priceCount,r.priceUnit=s.priceUnit,r.p2nFormula=s.p2nFormula,r.p2nIsScale=s.p2nIsScale,r.p2nDecimalCount=s.p2nDecimalCount,r.remark=s.remark,o.push(r)}null!=o&&o.length>0&&(i=JSON.stringify(o)),this.temp.dtlJsonStr=i,this.temp.type=this.typeData.defaultSelected[0],this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,Object(n.addWarehouseOut)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]);var t=this.temp.type;-1!="cb0a55d81e754cd3b59715d225dab087".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"1"}):-1!="609fa44c031847569a1d9e2516be4b41".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"2"}):-1!="9459be975cd94ada8443cdf32f52c2be".indexOf(t)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}):-1!="4cba5d3815644b26920777512a20474b".indexOf(t)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}),this.temp.deptId=null,this.temp.deptName=null},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},r=(i("/57g"),i("UDs2"),i("KHd+")),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"仓库:",prop:"warehouseName"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{data:e.warehouseData.data},on:{callback:e.warehouseSelect},model:{value:e.warehouseData.defaultSelected,callback:function(t){e.$set(e.warehouseData,"defaultSelected",t)},expression:"warehouseData.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouse_out_manage_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAdd.vue";t.default=c.exports},iW6I:function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseInDetail",params:{fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,remark",parentId:""}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseInExecute",params:{fieldCode:"warehouseName,count,executeUserName,executeTimeStr",isNeedPage:"false"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){this.tableConfigList[0].apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},databridge:function(e){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseBySimple_inBySimple_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogView.vue";t.default=n.exports},icrm:function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=i("FIN3"),n=i("Q6Ii"),l=(i("z0WU"),i("Ppn9"),{name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,isreplaceable:null,topBarBtnList:[],tempCount:{count:0},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"planCount",componentName:"input",_cellConfig:{rules:[{required:!0},{greaterThan:["0",!1]},{lessThan:["self@assembledCount",!0]}],message:["该项不能为空！","该项输入必须大于零！","必须小于等于最大可生产数量！"]}}],apiObj:{apiName:"listProdLackNum",params:{dtlJsonStr:this.initData.temp,addColumn:{columnKey:"prodInfo",columnName:"货品"},fieldCode:"prodInfo,unit,planCount,assembledCount"}},temp:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,dragTable:!1,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a,dialogAddProduct2:o.default,dialogAdd:n.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},delete:function(e,t){var i=this,a=this;a.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.deleteData(e)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},useReplaceable:function(e){e?(this.isreplaceable="1",this.tableConfigList[0].apiObj.params={dtlJsonStr:this.initData.temp,fieldCode:"code,name,spec,genre,unit,planCount,assembledCount",isreplaceable:"1"}):(this.isreplaceable="0",this.tableConfigList[0].apiObj.params={dtlJsonStr:this.initData.temp,fieldCode:"code,name,spec,genre,unit,planCount,assembledCount"}),this.updateData()},backStep:function(){this.$emit("close-dialog",{})},nextStep:function(){this.getData(),0!=this.selectList.length&&(this.dialogData.isreplaceable=this.isreplaceable,this.dialogData.temp=JSON.stringify(this.selectList),this.dialogData.tempLable=this.tempLable,this.dialogData.title="新增物料",this.openDialogName="dialogAdd",this.showDialog=!0,this.visibleState=!0)},addProduct:function(){this.dialogData.temp=this.initData.temp,this.dialogData.title="添加产品",this.openDialogName="dialogAddProduct2",this.showDialog=!0,this.visibleState=!0},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&(e.selectList?e.selectList.length>0&&this.pushData(e.selectList):this.dialogClose())},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}}),s=(i("9L0e"),i("fZDY"),i("KHd+")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[e._l(e.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]}),e._v(" "),i("el-checkbox",{staticStyle:{"padding-top":"15px",float:"right"},on:{change:e.useReplaceable}},[e._v("是否使用替代物")])],2),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_produce_materialRequisitionWC_dialogAddFromBom0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.backStep}},[e._v("上一步")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);r.options.__file="dialogAddFromBom.vue";t.default=r.exports},iePn:function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseInDetail",params:{fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,remark",parentId:""}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseInExecute",params:{fieldCode:"pathName,count,executeUserName,executeTimeStr",isNeedPage:"false"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){this.tableConfigList[0].apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},databridge:function(e){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_produce_materialReback_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogView.vue";t.default=n.exports},ihO8:function(e,t,i){},ihj5:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("1FtD"),o=i("z0WU"),n={name:"dialog-import-excel",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"文件导入",importUrl:"",exportUrl:"",userInfo:null,excelFileList:[],excelData:{},fieldCode:"pathName,warehouseTypeName,productName,productSpec,productPictureCode,productGenreName,productUnitName,stockCount"}},components:{},beforeCreate:function(){},created:function(){this.initData.title&&(this.title=this.initData.title),this.importUrl="/api/"+this.initData.importUrl,this.initData.excelData&&(this.excelData=this.initData.excelData),this.$storage.get("userInfo")&&(this.excelData.companyId=this.$storage.get("userInfo").companyId,this.excelData.userId=this.$storage.get("userInfo").userId,this.excelData.warehouseGenre="warehouse")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(e){this.$emit("close-dialog",e||{})},importExcelChangeFile:function(e,t){this.excelFileList=[t[t.length-1]]},importExcelBeforeUpload:function(e){null!=this.excelFileList&&this.excelFileList.length>1&&this.$message({showClose:!0,message:"只能选择一个导入文件，请删除多余的导入列表！",type:"warning",duration:5e3});var t=e.name,i="";if(-1!=t.indexOf(".")&&(i=t.substr(t.indexOf(".")+1,t.length)),-1!="xls,xlsx".indexOf(i)){e.size>10485760&&this.$message({showClose:!0,message:"Excel导入文件大小不能超过 5MB!",type:"error",duration:5e3})}else this.$message({showClose:!0,message:"Excel导入文件只能支持(xls,xlsx)格式!",type:"error",duration:5e3})},importExcelSuccess:function(e){this.dialogTopLoading=!1;var t="";null!=e.msg&&e.msg.trim().length>0&&(t=e.msg.trim()),0==e.code?(this.isVisible=!1,this.$message({showClose:!0,message:t,type:"success",duration:5e3}),this.dialogClose({resState:"ok"})):0!=e.code&&this.$message({showClose:!0,message:t,type:"error",duration:0}),this.$refs.upload.clearFiles()},importExcelSubmit:function(){null==this.excelFileList||0!=this.excelFileList.length?(this.dialogTopLoading=!0,this.$refs.upload.submit()):this.$message({showClose:!0,message:"请选择导入文件！",type:"warning",duration:5e3})},exportExcelFunction:function(){var e=this;Object(a.exportExcelTemplateWarehouseInitial)({fieldCode:this.fieldCode}).then(function(t){Object(o.j)(t,"仓库货品导入.xls"),e.$message({title:"成功",message:"Excel仓库货品导入模板下载成功",type:"success",duration:2e3})}).catch(function(e){})}},computed:{},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,width:"500px",top:"40px","append-to-body":""},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}],staticStyle:{"text-align":"left","padding-left":"50px","padding-top":"20px","line-height":"20px"}},[i("span",{staticStyle:{"font-size":"16px","padding-bottom":"5px"}},[e._v("操作步骤：")]),i("br"),e._v("\n    1."),i("a",{staticStyle:{color:"#169BD5"},on:{click:e.exportExcelFunction}},[e._v("点击此处下载模板")]),i("br"),e._v("\n    2.按示例填写需要导入的数据信息"),i("br"),e._v("\n    3.请将Excel模板中示例信息删除"),i("br"),e._v("\n    4.上传过程中不要多次提交或刷新页面"),i("br"),e._v("\n    5.Excel导入文件只能支持(xls,xlsx)格式，且文件大小不能超过10M"),i("br"),i("br"),e._v(" "),i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"excelFile",action:e.importUrl,"on-change":e.importExcelChangeFile,"before-upload":e.importExcelBeforeUpload,"on-success":e.importExcelSuccess,data:e.excelData,"file-list":e.excelFileList,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"success"},on:{click:e.importExcelSubmit}},[e._v("导入")])],1),e._v(" "),i("br"),i("br")],1)])},[],!1,null,null,null);s.options.__file="dialogImportExcel.vue";t.default=s.exports},imq8:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("yt8O"),i("XfO3"),i("9AAn");var a=i("WIyV"),o=i("vR9m"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{formData:{sysCode:"",supplier:"",stateName:"",typeName:"",makeUserName:"",deliverDate:"",waybillCompany:"",waybillCode:"",carCode:"",supplierName:"",supplierMobile:"",supplierAddress:"",remark:""},rowData:{},isShowSend:!1,isShowDeliver:!1,isShowSelf:!1,deliverTypeKeyNameMap:new Map([["1","send"],["2","deliver"],["3","self"]]),rules:{},dialogLoading:!1,isVisible:!1,inDialog:!0,customColumn:[],apiObj:{apiName:"listPageAssistDeliverDetailChild",params:{fieldCode:"prodInfo,unitName,count",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",deliverDtlId:"",isNeedPage:"false"}}}},created:function(){var e=this;this.rowData=this.initData.rowData;var t=this.rowData.parentId,i=this.rowData.id;Object(o.findAssistDeliver)({deliverId:t}).then(function(t){null!=t.deliverMap&&(e.formData.sysCode=t.deliverMap.sysCode,e.formData.supplier=t.deliverMap.supplier,e.formData.stateName=t.deliverMap.stateName,e.formData.typeName=t.deliverMap.typeName,e.formData.makeUserName=t.deliverMap.makeUserName,e.formData.deliverDate=t.deliverMap.deliverDate,e.formData.waybillCompany=t.deliverMap.waybillCompany,e.formData.waybillCode=t.deliverMap.waybillCode,e.formData.carCode=t.deliverMap.carCode,e.formData.supplierName=t.deliverMap.supplierName,e.formData.supplierMobile=t.deliverMap.supplierMobile,e.formData.supplierAddress=t.deliverMap.supplierAddress,e.formData.remark=t.deliverMap.remark)}).catch(function(e){});var a=this.deliverTypeKeyNameMap.get(this.rowData.deliverType);"send"==a?this.isShowSend=!0:"deliver"==a?this.isShowDeliver=!0:"self"==a&&(this.isShowSelf=!0),this.apiObj.params.deliverDtlId=i},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"800px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-form",{ref:"submitForm",attrs:{model:e.formData,"label-position":"right","label-width":"80px"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发货单号:",prop:"sysCode"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.sysCode,callback:function(t){e.$set(e.formData,"sysCode",t)},expression:"formData.sysCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"供应商:",prop:"supplier"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.supplier,callback:function(t){e.$set(e.formData,"supplier",t)},expression:"formData.supplier"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"状态:",prop:"stateName"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.stateName,callback:function(t){e.$set(e.formData,"stateName",t)},expression:"formData.stateName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发货类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.typeName,callback:function(t){e.$set(e.formData,"typeName",t)},expression:"formData.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"经办人:",prop:"makeUserName"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.makeUserName,callback:function(t){e.$set(e.formData,"makeUserName",t)},expression:"formData.makeUserName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发货日期:",prop:"deliverDate"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.deliverDate,callback:function(t){e.$set(e.formData,"deliverDate",t)},expression:"formData.deliverDate"}})],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSend,expression:"isShowSend"}]},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"物流公司:",prop:"waybillCompany"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.waybillCompany,callback:function(t){e.$set(e.formData,"waybillCompany",t)},expression:"formData.waybillCompany"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"物流单号:",prop:"waybillCode"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.waybillCode,callback:function(t){e.$set(e.formData,"waybillCode",t)},expression:"formData.waybillCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"收货地址:",prop:"supplierAddress"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.supplierAddress,callback:function(t){e.$set(e.formData,"supplierAddress",t)},expression:"formData.supplierAddress"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"联系人:",prop:"supplierName"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"手机号:",prop:"supplierMobile"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.supplierMobile,callback:function(t){e.$set(e.formData,"supplierMobile",t)},expression:"formData.supplierMobile"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowDeliver,expression:"isShowDeliver"}]},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"车牌号:",prop:"carCode"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.carCode,callback:function(t){e.$set(e.formData,"carCode",t)},expression:"formData.carCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"收货地址:",prop:"supplierAddress"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.supplierAddress,callback:function(t){e.$set(e.formData,"supplierAddress",t)},expression:"formData.supplierAddress"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"联系人:",prop:"supplierName"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"手机号:",prop:"supplierMobile"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.supplierMobile,callback:function(t){e.$set(e.formData,"supplierMobile",t)},expression:"formData.supplierMobile"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}})],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSelf,expression:"isShowSelf"}]},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"车牌号:",prop:"carCode"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.carCode,callback:function(t){e.$set(e.formData,"carCode",t)},expression:"formData.carCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{readonly:!0},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{margin:"0px 0px 0px 0px"}},[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistDeliver_dialogDeliverInfo0",showIndex:!1,showTableSet:!1,showCheckBox:!1,customColumn:e.customColumn,apiObj:e.apiObj}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogDeliverInfo.vue";t.default=s.exports},ipZt:function(e,t,i){"use strict";i.r(t);var a={components:{customBaseTable:i("WIyV").a},props:["initData","visible"],data:function(){return{businessId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageMaintainTaskDetailByOut",params:{fieldCode:"sysCode,maintainUserName,beginTimeStr,endTimeStr,taskResultName,productCode,productName,productSpec,productGenreName,productUnitName,receiveCount,outCount",outId:"",orderStr:"task.cdate,taskDtl.cdate asc"}},customColumn:[{}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.businessId=this.initData.businessId,this.apiObj.params.outId=this.initData.businessId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("el-row",{staticStyle:{"padding-top":"10px"},style:e.initData.table_style},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_equipment_equipmentMaintain_dialogMaintainTaskDetailByOut0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);n.options.__file="dialogMaintainTaskDetailByOut.vue";t.default=n.exports},isnl:function(e,t,i){},iuCq:function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},name:"dialog-add",props:["initData","visible"],data:function(){return{planId:"",rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,tableList:[],tableConfigList:[{customColumn:[{columnIndex:"sysCode"},{columnIndex:"produceTypeName"},{columnIndex:"makeName"},{columnIndex:"planStateName"}],mergeTitle:[{index:2,alias:"",columns:["beginDate","endDate"]}],apiObj:{apiName:"listPageProducePlan",params:{fieldCode:"sysCode,beginDate,endDate,produceTypeName,makeName,planStateName",planId:"",orderStr:"plan.cdate desc"}},tempData:{},showHeader:!1,showIndex:!1,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageProducePlanQualityDetail",params:{fieldCode:"code,prodInfo,unitName,count,fineCount,badCount,cdate",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",orderStr:"qualityDtl.cdate desc",isNeedPage:"false"}},dynamicValue:{planId:"self@id"},tempData:{},showIndex:!1,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable"}]}},created:function(){this.planId=this.initData.planId,this.tableConfigList[0].apiObj.params.planId=this.planId},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.tableList=[],this.tableList=e)},getData:function(){this.$refs.producePlanQuality.getData()},deleteData:function(e){this.$refs.producePlanQuality.deleteData(e)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"producePlanQuality",attrs:{"data-custom-table-id":"views_produce_producePlanQuality_producePlanQualityByInfo0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="producePlanQualityByInfo.vue";t.default=n.exports},izV1:function(e,t,i){"use strict";i.r(t);i("Oyvg");var a=i("9wPf"),o={components:{},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{amount:[{required:!0,trigger:"change",validator:function(t,i,a){e.isNumberByValue(i)?(0==i&&a(new Error("请输入大于零的正整数或(1,2)位小数！")),a()):a(new Error("请输入大于零的正整数或(1,2)位小数！"))}}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{signId:"",sysCode:"",supplierId:"",supplierCode:"",supplierName:"",amount:"",remark:""},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.formData.signId=this.initData.rowData.id,this.formData.supplierId=this.initData.rowData.supplierId,this.formData.supplierCode=this.initData.rowData.supplierCode,this.formData.supplierName=this.initData.rowData.supplierName,this.formData.sysCode=this.initData.rowData.sysCode},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addFinanceBillByAssist)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"供应商名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"金额:",prop:"amount"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="addFinanceBillByPurchase.vue";t.default=l.exports},"jB/s":function(e,t,i){"use strict";var a=i("rXsy");i.n(a).a},jCec:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo");var a=i("zF5t"),o=i("we3T");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{customBaseTable:i("WIyV").a},name:"dialog-add",props:["initData","visible"],data:function(){return{userData:[],executorIds:[],isSingle:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,temp:{}},dialogLoading:!1,isVisible:!1,inDialog:!0,tableData:[],rowTableList:[],apiObj:{apiName:"listUserByRole",params:{pageNo:1,userIsdisable:"1",queryStr:"role.name like '%仓库管理员%'",fieldCode:"userCode,userName,roleName"}},customColumn:[],mergeTitle:[],mergeColumn:[],mergeRow:[],temp:{},tempLable:{}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{initUserData:function(){var e=this;Object(a.findListUserByRole)({userIsdisable:"1",queryStr:"role.name like '%仓库管理员%'"}).then(function(t){var i=t.result.options;null!=i&&i.length>0&&i.forEach(function(t){var i=t.id,a=t.userName;null!=i&&i.trim().length>0&&null!=a&&a.trim().length>0&&e.userData.push({key:i,label:a,disabled:!1})})}).catch(function(e){})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},leftCheckChange:function(e){this.isSingle&&this.singleUserData(e)},singleUserData:function(e){var t=this.userData;if(null!=t&&0!=t.length)if(0==e.length)t.forEach(function(e){e.disabled=!1});else if(e.length>0){var i="";e.forEach(function(e){i=i+e+","}),t.forEach(function(e){var t=e.key;-1==i.indexOf(t)&&(e.disabled=!0)})}},databridge:function(e){e.length&&(this.executorIds=[e[0].id])},save:function(){var e=this;if(null!=this.executorIds&&0!=this.executorIds.length){var t="";this.executorIds.forEach(function(e){t=t+e+","}),this.dialogLoading=!0,Object(o.updateExecutor)({detailId:this.temp.detailId,executorIds:t}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择执行人！"})},closeDialog:function(e){this.showDialog=!1}},watch:{}},s=(i("kNQ0"),i("vzCX"),i("KHd+")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"700px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{padding:"10px"}},[i("custom-base-table",{ref:"editExecutorDialog",attrs:{"data-custom-table-id":"views_warehouse_check_manage_dialogEditExecutor0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,showCheckBox:!0,isSingle:!0,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"editExecutorDialog",useDefaultBtn:!1,showAll:!1},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogEditExecutor.vue";t.default=r.exports},jCwD:function(e,t,i){},jD6l:function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,configs:{topBarBtnList:[]},tableConfigList:[{customColumn:[],apiObj:{apiName:"listPageWarehouseInDetail",params:{fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,remark",parentId:""}},tempData:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[],apiObj:{apiName:"listPageWarehouseInExecute",params:{fieldCode:"pathName,count,executeUserName,executeTimeStr",isNeedPage:"false"}},dynamicValue:{detailId:"self@id"},tempData:{},showIndex:!0,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable",leftFixed:1,rightFixed:1}]}},created:function(){this.tableConfigList[0].apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},databridge:function(e){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_produce_materialRebackWC_dialogView0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogView.vue";t.default=n.exports},jEHv:function(e,t,i){},jLjb:function(e,t,i){"use strict";var a=i("Gyk6");i.n(a).a},jUE0:function(e,t,i){},jVbl:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("uTIz"),o=i("2+ib");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{searchBar:a.a,multilevelTable:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{equipmentId:"",rowData:{}},dataList:[],tableConfigList:[{apiObj:{apiName:"findListMaintainTaskDetailByInfo",params:{taskId:"",fieldCode:"productCode,productName,productSpec,productUnitName,outCode,receiveCount,warehouseGenreName,outDtlStateName,applyCount,retreatCount,retreatTypeName,inDtlStateName",orderStr:"taskDtl.cdate asc"}},tempData:{},showHeader:!0,showIndex:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable"}]}},created:function(){this.tableConfigList[0].apiObj.params.taskId=this.initData.taskId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.dataList=e},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.updateData(this.searchObj)},closeDialogPage:function(){this.isVisible=!1,this.dialogClose()}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("el-row",{style:e.initData.table_style},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_equipment_equipmentMaintain_maintain_dialogMaintainTaskDetailInfo0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDialogPage}},[e._v("关闭")])],1),e._v(" "),e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);r.options.__file="dialogMaintainTaskDetailInfo.vue";t.default=r.exports},jnmy:function(e,t,i){"use strict";i.r(t);var a={components:{customBaseTable:i("WIyV").a},props:["initData","visible"],data:function(){return{businessId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageDeliverDetailByOut",params:{fieldCode:"deliverCode,sysOrderCode,customerName,productCode,productName,productSpec,productGenreName,orderUnitName,stateName,orderCount,productPrice,sum",outId:"",queryStr:""}},customColumn:[{}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.businessId=this.initData.businessId,this.apiObj.params.outId=this.initData.businessId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("el-row",{staticStyle:{"padding-top":"10px"},style:e.initData.table_style},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_sale_deliver_dialogDeliverDetailByOut0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);n.options.__file="dialogDeliverDetailByOut.vue";t.default=n.exports},jq09:function(e,t,i){"use strict";i.d(t,"a",function(){return p});i("rGqo"),i("yt8O"),i("RW0V"),i("NO8f"),i("SRfc"),i("KKXr"),i("Z2Ku");var a=i("z0WU"),o=i("LvDl");function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){l(e,t,i[t])})}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s={elName:"",animations:[],commonStyle:{position:"absolute",width:300,height:30,top:200,left:0,rotate:0,paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:0,marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,borderWidth:0,borderColor:"",borderStyle:"solid",borderRadius:0,boxShadow:"",fontSize:16,fontWeight:500,lineHeight:1.4,letterSpacing:0,textAlign:"center",color:"#000000",backgroundColor:"",backgroundImage:"",backgroundSize:"cover",opacity:1,zIndex:1},events:[],propsValue:{},value:"",valueType:"String"},r={name:"",elements:[],commonStyle:{backgroundColor:"",backgroundImage:"",backgroundSize:"cover"},config:{}},c={name:"",title:"未命名场景",description:"我用夸克可视化编辑器做了一个超酷炫的H5，快来看看吧。",coverImage:"",auther:"",script:"",width:300,height:300,pages:[]},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e=Object(o.cloneDeep)(e)).uuid=Object(a.g)(),e.commonStyle=Object(o.merge)(e.commonStyle,t),e.commonStyle.top=e.commonStyle.top+10,e.commonStyle.left=e.commonStyle.left+10,e},u=function(){return n({uuid:Object(a.g)()},Object(o.cloneDeep)(r))},p=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file",i=e.split(","),a=i[0].match(/:(.*?);/)[1],o=a.split("/")[1],n=atob(i[1]),l=n.length,s=new Uint8Array(l);l--;)s[l]=n.charCodeAt(l);return new File([s],"".concat(t,".").concat(o),{type:a})};t.b={elementConfig:s,pageConfig:r,projectConfig:c,getElementConfig:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object(o.cloneDeep)(e),l=i.valueType||"String",r=Object(o.cloneDeep)(s),c=n({uuid:Object(a.g)()},r,{elName:i.elName,propsValue:Object(a.i)(i.needProps||{})});return c.commonStyle=Object(o.merge)(c.commonStyle,i.defaultStyle),c.commonStyle=Object(o.merge)(c.commonStyle,t),c.value=e.defaultValue||{Sting:"",Array:[],Object:{},Boolean:!1,Number:0}[l],c.valueType=l,c.isForm=!!e.isForm,c},getPageConfig:u,getProjectConfig:function(){var e=Object(o.cloneDeep)(c),t=u();return e.pages.push(n({},t)),n({},e)},copyPage:function(e){var t=Object(o.cloneDeep)(e);return t.uuid=Object(a.g)(),t.elements=t.elements.map(function(e){return d(e)}),t},copyElement:d,getCommonStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=["width","height","top","left","paddingTop","paddingLeft","paddingRight","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","borderWidth","fontSize","borderRadius","letterSpacing"],a={};for(var o in e)i.includes(o)?a[o]=e[o]*t+"px":a[o]=e[o];return a.transform="rotate(".concat(a.rotate,"deg)"),a.backgroundImage=a.backgroundImage?"url(".concat(a.backgroundImage,")"):"",a}}},jw2b:function(e,t,i){},k4rH:function(e,t,i){},k9rF:function(e,t,i){"use strict";var a=i("kjO3"),o=i.n(a),n=i("CL6Q"),l=i.n(n);t.a=[{title:"基础组件",components:[{elName:"QkInput",type:"input",title:"文字",icon:"txt",value:"",defaultStyle:{height:40,width:150}},{elName:"QkImage",type:"image",title:"图片",icon:"img",value:"",defaultStyle:{height:60,width:150},hidden:!0},{elName:"QkTextarea",type:"textarea",title:"多行文本",icon:"textarea",value:"",defaultStyle:{height:60,width:150}},{elName:"QkDate",title:"日期",type:"date",icon:"date",value:"",defaultStyle:{height:20,width:150}},{elName:"QkTime",title:"时间",type:"time",icon:"time",value:"",defaultStyle:{height:20,width:150}},{elName:"QkDatetime",title:"日期时间",type:"datetime",icon:"datetime",value:"",defaultStyle:{height:20,width:250}}]},{title:"业务组件",components:[{elName:"QkCustom",type:"custom",title:"仓库任务列表",componentId:"warehouseTaskList",componentName:"warehouseTaskList",img:o.a,config:{apiObj:{apiName:"listWarehouseDetailKanban",params:{}},showIndex:!1,mixViewWidth:320,minViewHeight:150,headers:[{label:"时间",prop:"cdate"},{label:"类型",prop:"type"},{label:"对象",prop:"object"},{label:"数量",prop:"count"},{label:"状态",prop:"state"}],columnScale:[2.4,2,3,1.5,1.8],titleFontSize:16,bodyFontSize:14}},{elName:"QkCustom",type:"custom",title:"仓库任务统计",componentId:"warehouseTaskStatistics",componentName:"warehouseTaskStatistics",img:l.a,config:{apiObj:{apiName:"getWarehouseTotalKanban",params:{}},showIndex:!1,mixViewWidth:220,minViewHeight:220}}]}]},kCjF:function(e,t,i){"use strict";var a=i("vCsH");i.n(a).a},kF7m:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("ywZ6"),l=i("EDKZ");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddSupplier:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{pageNo:1,type:"add",fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"4"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="采购入库",this.temp.type="d78ceba5beef41f5be16f0ceee775399",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={productId:n.productId,remark:n.remark,p2nFormula:n.p2nFormula,priceUnit:n.priceUnit,priceCount:n.priceCount,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.addWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:"",count:"",remark:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{pageNo:function(){this.initTable("add","")}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px",width:"100%"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseIn_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogAdd.vue";t.default=d.exports},kKEA:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("uTIz"),o=i("2+ib");i("s2cx");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{searchBar:a.a,multilevelTable:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{searchList:[{label:"供应商编号",type:"input",ruleType:"string",mapKey:"supplierCode",configs:{},placeholder:"供应商编号"},{label:"供应商名称",type:"input",ruleType:"string",mapKey:"supplierName",configs:{},placeholder:"供应商名称"}],dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{},dataList:[],tableConfigList:[{customColumn:[{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"设定",nameEn:"reback",editBtns_isShow:!0,icon:"reback",method:this.editPaymentBuild}]}],apiObj:{apiName:"listPagePurchasePaymentBuild",params:{fieldCode:"supplierCode,supplierName,paymentPeriod,beginPlus,beginMinus,isBuildName,cdateStr",isNotBuild:"true"}},tempData:{},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}]}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.updateData(e)},databridge:function(e){this.dataList=e},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},editPaymentBuild:function(e,t){var i="",a="",o=e.beginValue;o-0>=0?(a="plus",i=o):o-0<0&&(a="minus",i=-1*(o-0)),this.dialogData.rowData={id:e.id,supplierId:e.supplierId,paymentPeriodDate:e.paymentPeriodDate,beginPlus:e.beginPlus,beginMinus:e.beginMinus,beginValue:e.beginValue,paymentType:a,paymentSum:i,supplierCode:e.supplierCode,supplierName:e.supplierName},this.dialogData.title="供应商付款期间设定初期值",this.openDialogName="dialogEdit",this.showDialog=!0,this.visible=!0},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.updateData(this.searchObj)}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{style:e.initData.table_style},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_paymentManager_listSupplierPaymentBuild0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);r.options.__file="listSupplierPaymentBuild.vue";t.default=r.exports},kN93:function(e,t,i){},kNQ0:function(e,t,i){"use strict";var a=i("jCwD");i.n(a).a},kZdb:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("f3/d"),i("Oyvg"),i("rGqo");var a=i("0CID"),o=i("EDKZ"),n=i("Q4qC"),l=i("z0WU"),s=i("mSNy");function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.deleteBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteBtns(scope.row,scope.$index)">删除</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.count" ></el-input>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},p={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.remark" ></el-input>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},m={components:{selectProduct:a.default},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择入库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:"",deleteIds:""},tempLable:{},tempQuery:{},tableData:[],selectList:null,deleteIds:"",initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:d,deleteBtns:this.deleteBtns,deleteBtns_isShow:!0}},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1,typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{isNeedName:"true",nameValue:"备件入库",dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntityVirtual:"true",isNeedSpare:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"1"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.warehouseData.defaultSelected[0]=this.initData.temp.warehouseId,this.initTable("edit",this.initData.temp.id)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=c(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(l.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!0,this.configs.showIndex=!0,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==s.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==s.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==s.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==s.a.locale&&(e.label=t.substring(0,t.indexOf("_")))),"count"===e.prop&&(e.component=u),"remark"===e.prop&&(e.component=p)}),this.internationalConfig(),e.push(this.initConfigs.tableOperates),e},internationalConfig:function(){"en"==s.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==s.a.locale&&(this.initConfigs.tableOperates.label="操作")},initTable:function(e,t){var i=this;this.$loading({spinner:"preloader",text:""}),Object(n.listPageDetailProduct)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){r(e,t,i[t])})}return e}({},this.tempQuery,{type:e,parentId:t,pageNo:this.pageNo})).then(function(e){i.getListPage(e),i.$loading().close()}).catch(function(e){i.$loading().close()})},dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="selectProduct",this.showDialog=!0,this.inLinVisible=!0},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i].count;if(null==a||0==a.trim().length)t=t+"第 "+(i+1)+" 行: 入库数量为空或空字符串！";else new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(a)||(t=t+"第 "+(i+1)+" 行: 入库数量("+a+")输入错误，请输入大于零的正整数或(1,2)位小数！")}return t},saveWarehouseIn:function(){var e=this,t="";if(null!=this.tableData&&0!=this.tableData.length){var i=this.checkColumn(this.tableData);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{for(var a=[],n=0;n<this.tableData.length;n++){var l=this.tableData[n],s={productId:"",count:"",remark:"",id:""};s.productId=l.productId,s.count=l.count,s.remark=l.remark,s.id=l.id,a.push(s)}t=JSON.stringify(a),this.temp.dtlJsonStr=t,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,e.temp.warehouseDeptId=e.temp.deptId,Object(o.updateWarehouseInBySimple)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){}))})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deleteBtns:function(e,t){this.tableData.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[])},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:"",count:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),null!=a.unitName&&a.unitName.trim().length>0&&(o.productUnitName=a.unitName.trim()),this.tableData.push(o)}}},watch:{}},h=i("KHd+"),g=Object(h.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{"margin-top":"10px"}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"仓库:",prop:"warehouseName"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{data:e.warehouseData.data},on:{callback:e.warehouseSelect},model:{value:e.warehouseData.defaultSelected,callback:function(t){e.$set(e.warehouseData,"defaultSelected",t)},expression:"warehouseData.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{height:"300px",width:"96%","margin-left":"2%"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveWarehouseIn}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);g.options.__file="dialogEdit.vue";t.default=g.exports},kbPa:function(e,t,i){"use strict";i.r(t);var a=i("fHEr"),o={name:"dialog-edit",props:["initData","visible"],data:function(){return{formData:{id:"",remark:""},dialogLoading:!0,isVisible:!1,inDialog:!0,rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){var e=this.initData.rowData;this.formData.id=e.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.auditDisagreeAssistPlan)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center","padding-bottom":"10px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);l.options.__file="dialogAuditDisagree.vue";t.default=l.exports},kjO3:function(e,t,i){e.exports=i.p+"static/img/warehouseTaskList.ce818b9.png"},kmMk:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("JcIl");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{parentId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){this.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.auditDisagreeSaleWaresRetreat)({parentId:e.parentId,remark:e.temp.remark}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAuditDisagree.vue";t.default=s.exports},kpaI:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("AV4t");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{name:[{required:!0,trigger:"change",message:"请填写质检项"}],criterion:[{required:!0,trigger:"change",message:"请填写检验标准"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",productId:"",name:"",criterion:"",business:""}}},created:function(){this.formData.id=this.initData.rowData.id,this.formData.productId=this.initData.rowData.productId,this.formData.name=this.initData.rowData.name,this.formData.criterion=this.initData.rowData.criterion},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,e.formData.business="purchase",Object(a.updateQuality)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"质检项:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"检验标准:",prop:"criterion"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.criterion,callback:function(t){e.$set(e.formData,"criterion",t)},expression:"formData.criterion"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="editQuality.vue";t.default=s.exports},"kvK+":function(e,t,i){"use strict";var a=i("kN93");i.n(a).a},kyJt:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("Oyvg"),i("rGqo");var a=i("ddId"),o=i("z0WU"),n=i("mSNy");function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.needDeliverCount" @change="colConfig.needDeliverCountChange(scope.row,scope.$index)"/>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},c={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{orderId:"",needLockStockOrderDtlIds:"",rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],selectList:null,initConfigs:{tableOperates:{}},configs:{topBarBtnList:[],tableConfigs:[],showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1}},created:function(){var e="";null!=this.initData.detailIds&&this.initData.detailIds.trim().length>0&&(e=this.initData.detailIds.trim()),this.initTable(e)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(o.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==n.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==n.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==n.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==n.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"needDeliverCount"===e.prop&&(e.component=r,e.needDeliverCountChange=t.needDeliverCountChange)}),this.internationalConfig(),e},internationalConfig:function(){"en"==n.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==n.a.locale&&(this.initConfigs.tableOperates.label="操作")},initTable:function(e){var t=this;this.$loading({spinner:"preloader",text:""}),Object(a.listPageSaleOrderDetailByLockStock)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){l(e,t,i[t])})}return e}({},this.tempQuery,{detailIds:e,pageNo:this.pageNo})).then(function(e){t.getListPage(e),t.$loading().close()}).catch(function(e){t.$loading().close()})},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},isNumberByValue:function(e){return null!=e&&new RegExp("^[0-9]+\\.{0,1}[0-9]{0,2}$").test(e)},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.orderCount,n=a.allowStockCount;null!=n&&(n=(n+="").trim(),this.isNumberByValue(n));var l=a.needDeliverCount;null==l||0==(l+"").trim().length?t=t+"第 "+(i+1)+" 行: 锁定货品数量("+l+")为空或空字符串！":null!=(l+="")&&l.trim().length>0&&!this.isNumberByValue(l.trim())?t=t+"第 "+(i+1)+" 行: 锁定货品数量("+l+") 输入错误，请输入大于零的正整数或(1,2)位小数！":(l=(l+"").trim(),o-n>0&&l-n>0?t=t+"第 "+(i+1)+" 行: 锁定货品数量("+l+") 输入错误，必须输入小于或等于库存可用数量！":o-n<=0&&l-o>0&&(t=t+"第 "+(i+1)+" 行: 锁定货品数量("+l+") 输入错误，必须输入小于或等于订购数量！"))}return t},saveSaleOrder:function(){var e=this;if(null!=this.tableData&&0!=this.tableData.length){var t=this.checkColumn(this.tableData);if(null!=t&&t.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:t});else{var i="",o=[];this.tableData.forEach(function(e){var t=e.productId;null!=t&&t.trim().length>0&&(i=i+t.trim()+","),o.push({id:e.id,productId:e.productId,versionLockCount:e.versionLockCount,needDeliverCount:e.needDeliverCount,prodUnitFormulaP2N:e.prodUnitFormulaP2N})});var n=JSON.stringify(o);Object(a.updateSaleOrderDetailByLockStock)({productIds:i,dtlJsonStr:n}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.isVisible=!1,e.dialogClose({resState:"ok",pageName:"dialogLockStock"}))}).catch(function(e){})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"当前订单明细中的货品在系统中无可用库存，无需锁定库存！"})},needDeliverCountChange:function(e,t){var i=e.needDeliverCount+"";null!=i&&i.trim().length>0&&!this.isNumberByValue(i.trim())&&this.$message({showClose:!0,message:"第 "+(t+1)+" 行: 锁定货品数量("+i.trim()+") 输入错误，请输入大于零的正整数或(1,2)位小数！",type:"warning",duration:5e3})},closeDialog:function(e){}}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{height:"450px",width:"96%","margin-left":"2%"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveSaleOrder}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogLockStock.vue";t.default=u.exports},"l/VW":function(e,t,i){"use strict";var a=i("hcIl");i.n(a).a},lDFo:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("9rC1");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberCodeByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]*$").test(e.trim())},checkValueNumber:function(e,t){var i="";return null==e||0==e.trim().length?i=t+"为空或空字符串！":null!=e&&e.trim().length>0&&!this.isNumberCodeByValue(e.trim())&&(i=t+"("+e+")输入错误，请输入大于零或等于零的整数！"),i},changeAccountDays:function(e){var t=this.checkValueNumber(e,"账期");null!=t&&t.trim().length>0&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){var i=e.temp.accountDays,o=e.checkValueNumber(i,"账期");if(null!=o&&o.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:o});e.dialogLoading=!0,Object(a.updateCustomer)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:e.tempLable.accountType+":",prop:"accountType"}},[i("el-radio",{attrs:{label:"0"},model:{value:e.temp.accountType,callback:function(t){e.$set(e.temp,"accountType",t)},expression:"temp.accountType"}},[e._v("从发货日期开始计算")])],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.accountDays+":",prop:"accountDays"}},[i("el-input",{on:{change:e.changeAccountDays},model:{value:e.temp.accountDays,callback:function(t){e.$set(e.temp,"accountDays",t)},expression:"temp.accountDays"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAccountDays.vue";t.default=s.exports},lF30:function(e,t,i){"use strict";var a=i("D7Gk");i.n(a).a},lGFq:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("VJB8"),o=i("WIyV"),n=i("5cBD"),l=(i("MPAK"),i("fHEr")),s={components:{customBaseTable:o.a,selectAssistProductBySupplier:n.default,selectProductCustomTransferTable:a.a},props:["initData","visible"],data:function(){return{rules:{assistProductName:[{required:!0,message:"请选择外协件",trigger:"change"}],craftName:[{required:!0,message:"请选择工艺名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{dtlJsonStr:"",makeUserName:"",makeId:"",remark:"",id:""},tableData:[],editData:[],configs:{topBarBtnList:[{name:"选择外协件",nameEn:"add",isShow:!0,method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},ApplyDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择申请人",tableUrl:"/system/user/listPageUsers",tableParm:{isdisable:"1",fieldCode:"name,deptName"},temp:{}},dialogName:"dialogOptionNotCode"}},AssistProductDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"800px",title:"选择外协件"},dialogName:"dialogProductOption"}},AssistAraftDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择工艺名称"},dialogName:"dialogAssistCraftOption"}},apiObj:{apiName:"listPageAssistPlanDetails",params:{fieldCode:"assistProductName,craftName,orderUnitName,count,planDate,remark",parentId:this.initData.rowData.id}},customColumn:[{columnIndex:"assistProductName",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"count",width:"140",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"planDate",width:"175",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",greaterThan:["tempData@minDate",!0]}},{columnIndex:"remark",width:"120",componentName:"input",_cellConfig:{}}],tempData:{minDate:new Date}}},beforeCreate:function(){},created:function(){var e=this.$storage.get("userInfo");this.formData.id=this.initData.rowData.id,this.formData.makeId=e.userId,this.formData.makeUserName=e.userName},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.editData=[],this.editData=e)},getData:function(){this.$refs.customBaseTable.getData()},assistProductSelect:function(e){e[0]&&(this.formData.assistProductId=e[0].id,this.formData.assistProductName=e[0].name,this.formData.assistProductInfo=e[0].prodInfo)},assistAraftSelect:function(e){e[0]&&(this.formData.craftId=e[0].id,this.formData.craftName=e[0].name)},addCraft:function(){this.dialogData.isNeedShowResult="true",this.dialogData.title="新增工艺名称",this.openDialogName="dialogAddCraft",this.showDialog=!0,this.inLinVisible=!0},applySelect:function(e){e[0]&&(this.formData.makeId=e[0].id,this.formData.makeUserName=e[0].name)},addProduct:function(){this.getData(),this.dialogData.data=this.editData,this.dialogData.isNeedRepeat=!1,this.dialogData.width="900px",this.dialogData.title="选择外协件",this.openDialogName="selectAssistProductBySupplier",this.showDialog=!0,this.inLinVisible=!0},checkColumnByTable:function(e){for(var t="",i=0;i<e.length;i++){null==e[i].planDate&&(t=t+"第 "+(i+1)+" 行: 期望到货日期为空，请选择期望到货日期！")}return t},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){if(e.editData=[],e.getData(),null==e.editData||0==e.editData.length)return;var i=e.checkColumnByTable(e.editData);if(null!=i&&i.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:i});setTimeout(function(){e.savePlan(e.editData)},1e3)}})},savePlan:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],l={assistProductId:n.assistProductId,count:n.count,planDate:n.planDate,remark:n.remark,orderUnit:n.orderUnit};a.push(l)}i=JSON.stringify(a),this.formData.dtlJsonStr=i,this.$confirm("修改计划后，是否将该计划提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.formData.isAutoCommit="true",t.updateAssistPlan()}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.formData.isAutoCommit="false",t.updateAssistPlan())})}},updateAssistPlan:function(){var e=this;Object(l.updateAssistPlan)(this.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"selectProductCustomTransferTable"==e.pageName){var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelected(t)}else null!=e&&"dialogAdd"==e.pageName&&"true"==e.isNeedShowResult&&null!=e.Craft&&(this.formData.craftId=e.Craft.id,this.formData.craftName=e.Craft.name)},tableSelected:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={assistProductId:i.id,assistProductName:i.productName,craftName:i.craftName,orderUnitName:i.unitName,orderUnit:i.unitId,planDate:new Date};this.tableData.push(a)}}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,inline:!0,model:e.formData}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"经办人:",prop:"makeUserName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.ApplyDialog.dialog},on:{callback:e.applySelect},model:{value:e.formData.makeUserName,callback:function(t){e.$set(e.formData,"makeUserName",t)},expression:"formData.makeUserName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{margin:"10px 0px 10px 0px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistPlan_assistPlanList_dialogEdit0",varList:e.tableData,showIndex:!1,showTableSet:!1,showCheckBox:!1,useDefaultBtn:!0,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogEdit.vue";t.default=c.exports},lHCj:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("7cmB"),o=i("vleD"),n=i("zDZ1"),l=i("WtXw"),s=(i("zF5t"),i("6wnd"));i("z0WU");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={props:["colConfig"],template:'<el-table-column :label="colConfig.label" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n\n      \t\t\t\t\t\t\t\x3c!--<el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.edit(scope.row,scope.$index)">编辑</el-button>--\x3e\n      \t\t\t\t\t\t\t\x3c!--<el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.delete(scope.row,scope.$index,scope)">删除</el-button>--\x3e\n      \t\t\t\t\t\t\t<el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.qrcode(scope.row,scope.$index,scope)">二维码</el-button>\n      \t\t\t\t\t</div>\n    \t\t\t\t</el-table-column>'},d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" :disabled=true></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={components:{treeFormTable:a.a,dialogOption:o.default,dialogQrcode:n.a,dialogOutRecordsEdit:l.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rootData:{},tableSets:{1:{showCheckBox:!1,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},currentpage:1,customColumn:{1:[{columnIndex:"last",prop:"operate",label:"操作",component:c,edit:this.edit,edit_isShow:!0,delete:this.delete,delete_isShow:!0,qrcode:this.qrcode,qrcode_isShow:!0},{columnIndex:"isdisable",component:d,changeState:this.changeState}]},editable:{suggestCount:{}},apiObj:{apiName:"listPageWarehouseOutDetailsOutRecords",params:{}},addedData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"选择员工",data:null,temp:{},tempLable:[],isSingle:!0,tableUrl:"/warehouse/warehouseProduct/listPageWarehouseProductsDispatchOption",tableParm:{}},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},resState:""}},created:function(){this.initData.temp.id&&(this.apiObj.params={queryStr:"detail.id in ('"+this.initData.temp.id+"')",pageNo:1,firstFieldCode:"productCode,productName,productSpec,productUnitName,count,executeCount,stateName"})},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{edit:function(e,t){this.dialogData.temp=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑出库数量",this.openDialogName="dialogOutRecordsEdit",this.showDialog=!0,this.inLinVisible=!0},delete:function(e,t){var i=this;this.$confirm("确认删除该记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.deleteWarehouseOutExecute)({id:e.id}).then(function(t){0===t.code&&(i.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.isdisable="0",i.resState="ok")}).catch(function(e){})})},qrcode:function(e,t){this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.temp=this.temp,this.dialogData.temp.code=this.temp.code,this.dialogData.temp.name=this.temp.productName,this.dialogData.tempLable.code="批次号",this.dialogData.tempLable.name="货品名称",this.dialogData.title="二维码",this.openDialogName="dialogQrcode",this.showDialog=!0,this.inLinVisible=!0},databridge:function(e){},addChild:function(e,t){this.dialogCallBackData=e,this.showDialog=!0,this.dialogVisible=!0},addChildRow:function(){this.dialogVisible=!1,this.showDialog=!1,this.addedData={rowData:this.testData,parentData:this.dialogCallBackData}},sendChildrenRow:function(e){},change:function(e,t){this.dialogData.temp=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑出库单",this.dialogData.isSingle=!1,this.dialogData.tableUrl="/warehouseProduct/listPageWarehouseProductsDispatchOption",this.dialogData.tableParm={productId:e.productId},this.openDialogName="dialogOption",this.showDialog=!0,this.inLinVisible=!0},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},save:function(){this.$refs.treeFormTable.getData()},formData:function(e){this.realSave(e)},realSave:function(e){},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.showDialog=!1}},watch:{pageNo:function(){this.initTable()}}},p=(i("V0vU"),i("KHd+")),m=Object(p.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none"}},[i("tree-form-table",{ref:"treeFormTable",attrs:{"expand-all":!0,initData:e.rootData,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:e.editable,apiObj:e.apiObj,addedData:e.addedData},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,"send-children-row":e.sendChildrenRow,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);m.options.__file="dialogOutRecords.vue";t.default=m.exports},lNSx:function(e,t,i){"use strict";i("rE2o"),i("ioFf"),i("Oyvg"),i("pIFo"),i("f3/d");var a=i("yO6P"),o=i("Yfch");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={},s=function(e){a.a.hasOwnProperty(e)&&(l[e]=function(t){return[{validator:(i=e,l=a.a[i]||"",function(e,t,i){var a,s,r;e.ops&&"object"===n(e.ops)?(e.ops.len?a=s=e.ops.len-0:(a=Object(o.b)(e.ops.min)?e.ops.min:0,s=Object(o.b)(e.ops.max)?e.ops.max:0),r=s>=a?a+","+(s||""):"0,",l=e.ops.customReg&&"string"==typeof e.ops.customReg?e.ops.customReg:l.replace(/placeholder/g,r)):l=l.replace(/placeholder/g,"0,"),t?new RegExp(l,"g").test(t)?i():i(" "):i()}),trigger:"change",ops:t}];var i,l})};for(var r in a.a)s(r);t.a=l},lNhn:function(e,t,i){},lX1r:function(e,t,i){"use strict";i("INYr"),i("91GP"),i("rGqo"),i("xfY5");var a,o=i("z0WU"),n=i("Yfch");function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s={name:"children-table",components:{childrenTable:d},props:{data:{type:Array,default:function(){return[]}},colConfigs:{type:Array,default:function(){return[]}},layer:{type:Number,default:2},maxLayer:{type:Number,default:2},sets:{type:Object,default:function(){return{}}},parentData:{type:Array,default:function(){return[]}},childrenData:{type:Object,default:function(){return{}}},pageData:{type:Object,default:function(){return{}}},guid:{type:String,default:""},rowChain:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!0},defaultExpandAll:[Boolean]},data:function(){return{fixedState:!1,fixedList:[],expandRowKeys:[],childrenConfigs:{},getRowKey:function(e){return e.id},selectable:function(e,t){return"1"===e.rowState},setRowChain:[],currentpage:1,elTimer:""}},computed:(a={setConfigs:function(){return this.sets},configs:function(){return this.setConfigs[this.layer]||{}},childrenLayer:function(){return this.layer+1},setTableRef:function(){return"childTable"+this.layer},formatedData:function(){return this.$emit("do-layout"),this.data},setLoadings:function(){var e=[];return this.formatedData.forEach(function(t){e.push(!1)}),e},setLoading:function(){return this.isLoading},setMaxLayer:function(){return this.maxLayer}},l(a,"setLoadings",function(){var e=[];return this.data.forEach(function(t){e.push(!1)}),e}),l(a,"setPageData",function(){return this.pageData}),l(a,"showPageData",function(){return parseInt(this.setPageData.total)/parseInt(this.setPageData.size)>1}),l(a,"setGuid",function(){return this.guid}),l(a,"childrenKey",function(){return this.$store.getters[this.setGuid+"/keyList"][this.layer-1].childrenKey||"children"}),l(a,"configKey",function(){return this.$store.getters[this.setGuid+"/keyList"][this.layer-1].configKey||"colConfig"}),l(a,"layerKey",function(){return this.$store.getters[this.setGuid+"/keyList"][this.layer-1].layerKey||"layer"}),l(a,"selectionLayer",function(){return this.$store.getters[this.guid+"/selectionLayer"]}),l(a,"selectionList",function(){return this.$store.getters[this.guid+"/selectionList"]}),a),created:function(){var e=this;this.setRowChain=this.rowChain.concat(this.parentData),this.selectionList.length&&(this.selectionLayer!=this.layer?this.formatedData.forEach(function(e){e.rowState="0"}):this.configs.isSingle?this.selectionList.forEach(function(t){e.formatedData.forEach(function(e){t.id!=e.id&&(e.rowState="0")})}):this.formatedData.forEach(function(e){e.rowState="1"}))},mounted:function(){},watch:{configs:function(){},childrenData:function(){},formatedData:function(){var e=this;this.configs.isSingle&&(clearTimeout(this.elTimer),this.elTimer=setTimeout(function(t){e.$refs[e.setTableRef].$el.querySelector(".el-table__header-wrapper .el-checkbox").style.display="none"},10))},selectionLayer:function(){var e=this;this.selectionLayer!=this.layer?this.selectionList.length?this.formatedData.forEach(function(e){e.rowState="0"}):this.formatedData.forEach(function(e){e.rowState="1"}):this.configs.isSingle&&this.selectionList.length?this.selectionList.forEach(function(t){e.formatedData.forEach(function(e){t.id!=e.id&&(e.rowState="0")})}):this.formatedData.forEach(function(e){e.rowState="1"})}},methods:{indexMethod:function(e){return e+1},expandChange:function(e,t){var i=this;t.some(function(t){return t.id===e.id})&&(this.configs.expandOne&&this.toggleRowExpands(t,e),e[this.childrenKey].length||this.sendChildrenRow(e,this.childrenLayer,this.setRowChain,this.layerKey,1),this.setLoadings[this.getRowIndex(e)]=!0),this.$refs[this.setTableRef].setCurrentRow(e),this.$refs[this.setTableRef].$nextTick(function(e){i.$refs[i.setTableRef].doLayout()})},getRowIndex:function(e){return this.formatedData.findIndex(function(t){return e.id===t.id})},toggleRowExpands:function(e,t){var i=this;e.forEach(function(e){i.$refs[i.setTableRef].toggleRowExpansion(e,e.id===t.id)})},getListPage:function(e,t,i){if(e){e.result.titles="string"==typeof e.result.titles?JSON.parse(e.result.titles):e.result.titles,e.result.varList="string"==typeof e.result.varList?JSON.parse(e.result.varList):e.result.varList,e.result.pageData="string"==typeof e.result.pageData?JSON.parse(e.result.pageData):e.result.pageData;var a=Object(o.o)(e.result);return{titleList:this.addTableTitle(a,t,i),pageData:e.result.pageData,tableData:e.result.varList}}return{}},addTableTitle:function(e,t,i){return t[i]&&Array.isArray(t[i])&&t[i].forEach(function(t){Object(n.b)(t.columnIndex)?e.splice(t.columnIndex,0,t):"first"===t.columnIndex?e.unshift(t):"last"===t.columnIndex?e.push(t):e.some(function(e){if(e.prop===t.columnIndex)return Object.assign(e,t),!0})}),e},selectItem:function(e,t){var i=this;this.$emit("databridge",{selection:e,layer:this.layer,baseList:this.formatedData}),setTimeout(function(){i.configs.isSingle&&(e.length?(i.data.forEach(function(e){e.rowState="0"}),e[0].rowState="1"):i.data.forEach(function(e){e.rowState="1"}))},20)},selectAllItem:function(e){if(this.configs.isSingle){if(e.length)for(var t=e.length-1;t>=0;t--)e.splice(t,1)}else this.$emit("databridge",{selection:e,layer:this.layer,baseList:this.formatedData})},sendChildrenRow:function(e,t,i,a,o){this.$emit("send-children-row",e,t,i,a,o)},handleCurrentChange:function(e){this.currentpage=e,this.changePage({currentpage:this.currentpage,rowChain:this.setRowChain})},doLayout:function(){this.$emit("do-layout")},databridge:function(e){this.$emit("databridge",e)},changePage:function(e){this.$emit("change-page",e)}}},r=(i("v0Ex"),i("KHd+")),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"childrens"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.setLoading,expression:"setLoading"}],ref:e.setTableRef,attrs:{data:e.formatedData,stripe:"",border:"",fit:"","highlight-current-row":"","tooltip-effect":"dark","row-key":e.getRowKey,"expand-row-keys":e.expandRowKeys},on:{"expand-change":e.expandChange,select:e.selectItem,"select-all":e.selectAllItem}},[e.layer<e.setMaxLayer?[e.formatedData.length?i("el-table-column",{attrs:{type:"expand",width:"55",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("children-table",{attrs:{data:t.row[e.childrenKey],layer:e.childrenLayer,isLoading:t.row._loading&&!e.defaultExpandAll,colConfigs:t.row[e.configKey],pageData:t.row.pageData,sets:e.setConfigs,guid:e.setGuid,parentData:[t.row],rowChain:e.setRowChain,maxLayer:e.setMaxLayer,"default-expand-all":e.defaultExpandAll},on:{"send-children-row":e.sendChildrenRow,"do-layout":e.doLayout,databridge:e.databridge,"change-page":e.changePage}})]}}])}):e._e()]:e._e(),e._v(" "),e.configs.showCheckBox&&e.formatedData.length?[i("el-table-column",{attrs:{type:"selection",fixed:e.fixedState,selectable:e.selectable,width:"55",align:"center"}})]:e._e(),e._v(" "),e.configs.showIndex&&e.formatedData.length?[i("el-table-column",{attrs:{type:"index",index:e.indexMethod,fixed:e.fixedState,label:"序号",width:"60",align:"center"}})]:e._e(),e._v(" "),e._l(e.colConfigs,function(t,a){return[t.component?i(t.component,{key:a,tag:"component",attrs:{"col-config":t}}):i("el-table-column",e._b({key:a,attrs:{"show-overflow-tooltip":"",sortable:e.configs.isSortable,label:t.label,align:"center"}},"el-table-column",t,!1))]})],2),e._v(" "),e.showPageData?i("div",{staticClass:"resetPagination",staticStyle:{height:"30px","text-align":"center","margin-top":"5px"}},[i("el-pagination",{staticStyle:{height:"30px"},attrs:{small:"","current-page":e.setPageData.current,"page-size":e.setPageData.size,layout:"prev, pager, next, jumper",total:e.setPageData.total-0},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.setPageData,"current",t)}}})],1):e._e()],1)},[],!1,null,null,null);c.options.__file="childrenTable.vue";var d=c.exports,u={name:"expand-table",props:{initData:{type:Object,default:function(){return{}}},childrenData:{type:Object,default:function(){return{}}},configs:{type:Object,default:function(){return{}}},maxLayer:{type:Number,default:2},apiObj:{type:Object,default:function(){return{}}},updateViewData:{type:Object,default:function(){return{}}},defaultExpandAll:[Boolean]},data:function(){return{wrapperWidth:0,tableWidth:0,fixedList:[],expandRowKeys:[],getRowKey:function(e){return e.id},guid:"",layer:1,tableData:[]}},components:{childrenTable:d},computed:{setTableHeight:function(){return this.showPageData?"calc(100% - 40px)":"100%"},setShowCheckBox:function(){return!!(this.configs[1]&&this.configs[1].showCheckBox&&this.formatedData.length)},setShowIndex:function(){return!!(this.configs[1]&&this.configs[1].showIndex&&this.formatedData.length)},expandOne:function(){return!(!this.configs[1]||!this.configs[1].expandOne)},setLoadings:function(){var e=[];return this.tableData.forEach(function(t){e.push(!1)}),e},formatedData:function(){return this.$store.getters[this.guid+"/dataTree"]||[]},setMaxLayer:function(){return this.maxLayer},childrenKey:function(){return this.$store.getters[this.guid+"/keyList"][this.layer-1].childrenKey||"children"},configKey:function(){return this.$store.getters[this.guid+"/keyList"][this.layer-1].configKey||"colConfig"},layerKey:function(){return this.$store.getters[this.guid+"/keyList"][this.layer-1].layerKey||"layer"},setTitleLists:function(){return this.$store.getters[this.guid+"/baseTitleList"]},setPageData:function(){return this.$store.getters[this.guid+"/basePageData"]},showPageData:function(){return parseInt(this.setPageData.total)/parseInt(this.setPageData.size)>1},selectionLayer:function(){return this.$store.getters[this.guid+"/selectionLayer"]},selectionList:function(){return this.$store.getters[this.guid+"/selectionList"]}},created:function(){this.guid=Object(o.a)(),Object(o.m)(this,this.guid,this.maxLayer)},mounted:function(){},beforeDestroy:function(){Object(o.z)(this.$store,this.guid)},watch:{initData:function(){var e=this;this.formatedData.length&&this.formatedData.forEach(function(t){e.$refs.baseTable.toggleRowExpansion(t,!1)});var t=Object.assign({},this.initData),i=this.getListPage(JSON.parse(JSON.stringify(t.res)),t.customColumn,1);this.$store.commit(this.guid+"/SET_DATATREE",[i,this.layer]),this.$store.commit(this.guid+"/SET_CUSTOMCOL",t.customColumn)},childrenData:function(){var e=Object.assign({},this.childrenData);this.$store.commit(this.guid+"/UPDATA_DATATREE",e)},updateViewData:function(){Object(o.A)(this.updateViewData)}},methods:{selectable:function(e,t){return"1"===e.rowState},expandChange:function(e,t){var i=this;t.some(function(t){return t.id===e.id})&&(this.expandOne&&this.toggleRowExpands(t,e),e[this.childrenKey].length||this.sendChildrenRow(e,this.layer+1,[],this.layerKey,1),this.setLoadings[this.getRowIndex(e)]=!0),this.$refs.baseTable.setCurrentRow(e),this.$refs.baseTable.$nextTick(function(e){i.$refs.baseTable.doLayout()})},getRowIndex:function(e){return this.formatedData.findIndex(function(t){return e.id===t.id})},toggleRowExpands:function(e,t){var i=this;e.forEach(function(e){i.$refs.baseTable.toggleRowExpansion(e,e.id===t.id)})},getListPage:function(e,t,i){if(e){e.result.titles="string"==typeof e.result.titles?JSON.parse(e.result.titles):e.result.titles,e.result.varList="string"==typeof e.result.varList?JSON.parse(e.result.varList):e.result.varList,e.result.pageData="string"==typeof e.result.pageData?JSON.parse(e.result.pageData):e.result.pageData;var a=Object(o.o)(e.result);return{titleList:this.addTableTitle(a,t,i),pageData:e.result.pageData,tableData:e.result.varList}}return{}},addTableTitle:function(e,t,i){return t[i]&&Array.isArray(t[i])&&t[i].forEach(function(t){Object(n.b)(t.columnIndex)?e.splice(t.columnIndex,0,t):"first"===t.columnIndex?e.unshift(t):"last"===t.columnIndex?e.push(t):e.some(function(e){if(e.prop===t.columnIndex)return Object.assign(e,t),!0})}),e},setStyle:function(e){},indexMethod:function(e){return e+1},tableRowClassName:function(e,t){e.index=t},selectItem:function(e,t){this.$emit("databridge",e)},selectAll:function(e){this.$emit("databridge",e)},databridge:function(e){this.$store.commit(this.guid+"/CHANGE_CHECKEDBOXSTATE",e),this.$emit("databridge",this.selectionList)},handleCurrentChange:function(e){this.$emit("update:currentpage",e)},sendChildrenRow:function(e,t,i,a,o){this.$emit("send-children-row",e,t,i,a,o)},doLayout:function(){var e=this;this.$refs.baseTable.$nextTick(function(t){e.$refs.baseTable.doLayout()})},changePage:function(e){Object(o.A)({_that:this,currentpage:e.currentpage,rowChain:e.rowChain})}}},p=(i("pK8k"),Object(r.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"myCoustomTable resetExpandTableStyle",staticStyle:{height:"100%"}},[i("div",{staticClass:"boxStyle",style:{height:e.setTableHeight}},[i("div",{staticClass:"resetTableStyle",staticStyle:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",overflow:"auto"}},[i("el-table",{ref:"baseTable",staticStyle:{width:"100%"},attrs:{data:e.formatedData,stripe:"",height:"100%",fit:"","highlight-current-row":"","tooltip-effect":"dark","header-cell-class-name":e.setStyle,"row-key":e.getRowKey,"expand-row-keys":e.expandRowKeys,"default-expand-all":e.defaultExpandAll},on:{"expand-change":e.expandChange,select:e.selectItem,"select-all":e.selectAll}},[e.formatedData.length?i("el-table-column",{attrs:{type:"expand",width:"55",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("children-table",{attrs:{data:t.row[e.childrenKey],layer:e.layer+1,isLoading:t.row._loading&&!e.defaultExpandAll,colConfigs:t.row[e.configKey],pageData:t.row.pageData,sets:e.configs,guid:e.guid,parentData:[t.row],rowChain:[],maxLayer:e.setMaxLayer,"default-expand-all":e.defaultExpandAll},on:{"send-children-row":e.sendChildrenRow,"do-layout":e.doLayout,databridge:e.databridge,"change-page":e.changePage}})]}}])}):e._e(),e._v(" "),e.setShowCheckBox?[i("el-table-column",{attrs:{type:"selection",selectable:e.selectable,width:"55",align:"center"}})]:e._e(),e._v(" "),e.setShowIndex?[i("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"60",align:"center"}})]:e._e(),e._v(" "),e._l(e.setTitleLists,function(t,a){return[t.component?i(t.component,{key:a,tag:"component",attrs:{"col-config":t}}):i("el-table-column",e._b({key:a,attrs:{"show-overflow-tooltip":"",align:"center"}},"el-table-column",t,!1))]})],2)],1)]),e._v(" "),e.showPageData?i("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"5px"}},[i("el-pagination",{attrs:{background:"","current-page":e.setPageData.current,"page-size":e.setPageData.size,layout:"prev, pager, next, jumper",total:e.setPageData.total-0},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.setPageData,"current",t)}}})],1):e._e()])},[],!1,null,null,null));p.options.__file="index.vue";t.a=p.exports},lZYi:function(e,t,i){"use strict";var a=i("qBBH");i.n(a).a},lire:function(e,t,i){},ljdZ:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("BUpD");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{initialPeriodDate:null,paymentPeriodDate:null,rules:{recevieType:[{required:!0,message:"请选择收款类型",trigger:"change"}],amount:[{required:!0,trigger:"change",validator:function(t,i,a){e.isNumberByValue(i)?(0==i&&a(new Error("请输入大于零的正整数或(1,2)位小数！")),a()):a(new Error("请输入大于零的正整数或(1,2)位小数！"))}}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.initData.rowData&&(this.formData=this.initData.rowData,this.initialPeriodDate=new Date(this.initData.rowData.initialPeriodDate),null!=this.initData.rowData.paymentPeriodDate&&(this.paymentPeriodDate=new Date(this.initData.rowData.paymentPeriodDate)))},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},save:function(){var e=this;this.$refs.submitForm.validate(function(t){e.formData.type="0",e.dialogLoading=!0,Object(a.addFinanceBase)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"设定成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})})},closeDialog:function(e){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"客户名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.customerName,callback:function(t){e.$set(e.formData,"customerName",t)},expression:"formData.customerName"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"收款类型:",prop:"recevieType"}},[i("el-select",{model:{value:e.formData.recevieType,callback:function(t){e.$set(e.formData,"recevieType",t)},expression:"formData.recevieType"}},[i("el-option",{attrs:{label:"应收款",value:"plus"}}),e._v(" "),i("el-option",{attrs:{label:"预收款",value:"minus"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"期初金额:",prop:"amount"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},llst:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("7cmB"),o=i("vleD"),n=i("zDZ1"),l=i("ZpXq"),s=(i("zF5t"),i("wW0j"));i("z0WU");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={props:["colConfig"],template:'<el-table-column :label="colConfig.label" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n\n      \t\t\t\t\t\t\t\x3c!--<el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.edit(scope.row,scope.$index)">编辑</el-button>--\x3e\n      \t\t\t\t\t\t\t\x3c!--<el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.delete(scope.row,scope.$index,scope)">删除</el-button>--\x3e\n      \t\t\t\t\t\t\t<el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.qrcode(scope.row,scope.$index,scope)">二维码</el-button>\n      \t\t\t\t\t</div>\n    \t\t\t\t</el-table-column>'},d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" :disabled=true></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={components:{treeFormTable:a.a,dialogOption:o.default,dialogQrcode:n.a,dialogMoveRecordsEdit:l.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rootData:{},tableSets:{1:{showCheckBox:!1,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},currentpage:1,customColumn:{1:[{columnIndex:"last",prop:"operate",label:"操作",component:c,edit:this.edit,delete:this.delete,qrcode:this.qrcode},{columnIndex:"isdisable",component:d,changeState:this.changeState}]},editable:{suggestCount:{}},apiObj:{apiName:"listPageWarehouseMoveDetailsRecords",params:{}},addedData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"选择员工",data:null,temp:{},tempLable:[],isSingle:!0,tableUrl:"/warehouse/warehouseProduct/listPageWarehouseProductsDispatchOption",tableParm:{}},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},resState:""}},created:function(){this.initData.temp.id&&(this.apiObj.params={queryStr:"detail.id in ('"+this.initData.temp.id+"')",pageNo:1,fieldCode:"productCode,productName,productSpec,productUnitName,stockCount,count,executeCount,stateName"})},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{edit:function(e,t){this.dialogData.temp=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑移库数量",this.openDialogName="dialogMoveRecordsEdit",this.showDialog=!0,this.inLinVisible=!0},delete:function(e,t){var i=this;this.$confirm("确认删除该记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.deleteWarehouseMoveExecute)({id:e.id}).then(function(t){0===t.code&&(i.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.isdisable="0",i.resState="ok")}).catch(function(e){})})},qrcode:function(e,t){this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.temp=this.temp,this.dialogData.temp.code=this.temp.code,this.dialogData.temp.name=this.temp.productName,this.dialogData.tempLable.code="批次号",this.dialogData.tempLable.name="货品名称",this.dialogData.title="二维码",this.openDialogName="dialogQrcode",this.showDialog=!0,this.inLinVisible=!0},databridge:function(e){},addChild:function(e,t){this.dialogCallBackData=e,this.showDialog=!0,this.dialogVisible=!0},addChildRow:function(){this.dialogVisible=!1,this.showDialog=!1,this.addedData={rowData:this.testData,parentData:this.dialogCallBackData}},sendChildrenRow:function(e){},change:function(e,t){this.dialogData.temp=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑出库单",this.dialogData.isSingle=!1,this.dialogData.tableUrl="/warehouseProduct/listPageWarehouseProductsDispatchOption",this.dialogData.tableParm={productId:e.productId},this.openDialogName="dialogOption",this.showDialog=!0,this.inLinVisible=!0},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},save:function(){this.$refs.treeFormTable.getData()},formData:function(e){this.realSave(e)},realSave:function(e){},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.showDialog=!1}},watch:{pageNo:function(){this.initTable()}}},p=(i("+JIN"),i("KHd+")),m=Object(p.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("tree-form-table",{ref:"treeFormTable",attrs:{"expand-all":!0,initData:e.rootData,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:e.editable,apiObj:e.apiObj,addedData:e.addedData},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,"send-children-row":e.sendChildrenRow,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);m.options.__file="dialogMoveRecords.vue";t.default=m.exports},lzly:function(e,t,i){},m3FM:function(e,t,i){"use strict";i.r(t);i("Oyvg");var a=i("WIyV"),o=i("D7Ds"),n=i("Hgzq"),l=i("QFMg"),s={components:{customBaseTable:a.a,dialogSelect:o.default,selectProductByVirtual:n.default},props:["initData","visible"],data:function(){return{repairTaskId:"",rules:{taskResult:[{required:!0,message:"请选择报工结果",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{repairTaskId:"",tableData:[],title:"",data:null,isNeedRepeat:!1},resState:"",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",taskResult:"",remark:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],configs:{topBarBtnList:[{name:"原有货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"findListTaskDetailByOutDetail",params:{type:"edit",fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,receiveCount,applyCount",taskId:"",outDtlState:"2"}},customColumn:[{columnIndex:"applyCount",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},isValidate:!1}},beforeCreate:function(){},created:function(){this.maintainTaskId=this.initData.maintainTaskId,this.formData.id=this.initData.maintainTaskId,this.apiObj.params.taskId=this.initData.maintainTaskId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)&&(this.orderDtlList=[],this.orderDtlList=e)},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.receiveCount,n=a.applyCount;null!=n&&n.trim().length>0&&!this.isNumberByValue(n.trim())&&(t=t+"第 "+(i+1)+" 行: 使用数量("+n+")输入错误，请输入大于零的正整数或(1,2)位小数！！"),null!=o&&o.trim().length>0&&null!=n&&n.trim().length>0&&n-0-(o-0)>0&&(t=t+"第 "+(i+1)+" 行: 使用数量不可大于领取数量！")}return t},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveSaleOrder(e.orderDtlList))})},saveSaleOrder:function(e){var t=this,i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else if(this.isShowRetreatWarehouse(e))this.dialogData.maintainTaskId=this.formData.id,this.dialogData.formData=this.formData,this.dialogData.tableData=e,this.dialogData.title="选择退库方式",this.openDialogName="dialogSelect",this.showDialog=!0,this.inLinVisible=!0;else{var a="",o=this.tableData2AddList(e);null!=o&&o.length>0&&(a=JSON.stringify(o));var n="",s=this.tableData2EditList(e);null!=s&&s.length>0&&(n=JSON.stringify(s)),Object(l.updateMaintainTaskDetail)({roleId:this.$storage.get("userInfo").roleIds,deptId:this.$storage.get("userInfo").deptId,maintainTaskId:this.maintainTaskId,retreatType:"1",maintainTaskJson:JSON.stringify(this.formData),detailAddJson:a,detailEditJson:n}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.resState="ok",t.dialogClose())}).catch(function(e){})}},isShowRetreatWarehouse:function(e){for(var t=0;t<e.length;t++){var i=e[t];if(-1!=i.operateType.indexOf("edit")){var a=i.receiveCount,o="0";if(null!=i.applyCount&&i.applyCount.trim().length>0&&(o=i.applyCount.trim()),a-0-(o-0)!=0)return!0}}return!1},tableData2EditList:function(e){var t=[];if(null==e||0==e.length)return t;for(var i=0;i<e.length;i++){var a=e[i],o={id:a.id,productId:a.productId,productGenre:a.productGenre,receiveCount:a.receiveCount,applyCount:a.applyCount};"edit"==a.operateType&&t.push(o)}return t},tableData2AddList:function(e){var t=[];if(null==e||0==e.length)return t;for(var i=0;i<e.length;i++){var a=e[i],o={productId:a.productId,productGenre:a.productGenre,receiveCount:a.applyCount,applyCount:a.applyCount,warehouseGenre:a.warehouseGenre};"add"==a.operateType&&t.push(o)}return t},addProduct:function(){this.$refs.orderAddDialog.getData();var e=this.tableData2AddList(this.orderDtlList);this.dialogData.data=e,this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="selectProductByVirtual",this.showDialog=!0,this.inLinVisible=!0},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1,"selectProductByVirtual"===e.pageName?null!=e.selectList&&e.selectList.length>0&&this.tableSelected(e.selectList):(e.resState&&(this.resState=e.resState),this.isVisible=!1)},tableSelected:function(e){for(var t=0;t<e.length;t++){var i=e[t],a={productId:"",productCode:"",productName:"",productSpec:"",productGenre:"",productGenreName:"",productUnitName:"",receiveCount:"",operateType:"",warehouseGenre:""};a.operateType="add",a.warehouseGenre="virtual",a.productId=i.productId.trim(),null!=i.productCode&&i.productCode.trim().length>0&&(a.productCode=i.productCode.trim()),null!=i.productName&&i.productName.trim().length>0&&(a.productName=i.productName.trim()),null!=i.productSpec&&i.productSpec.trim().length>0&&(a.productSpec=i.productSpec.trim()),null!=i.genre&&i.genre.trim().length>0&&(a.productGenre=i.genre.trim()),null!=i.productGenreName&&i.productGenreName.trim().length>0&&(a.productGenreName=i.productGenreName.trim()),null!=i.productUnitName&&i.productUnitName.trim().length>0&&(a.productUnitName=i.productUnitName.trim()),null!=i.stockCount&&i.stockCount.trim().length>0&&(a.receiveCount=i.stockCount.trim()),this.tableData.push(a)}}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"报工结果:",prop:"taskResult"}},[i("el-select",{model:{value:e.formData.taskResult,callback:function(t){e.$set(e.formData,"taskResult",t)},expression:"formData.taskResult"}},[i("el-option",{attrs:{label:"故障已解决",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"故障未解决",value:"0"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}})],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{height:"450px",width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_equipment_equipmentMaintain_maintain_dialogProductConfirm0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogProductConfirm.vue";t.default=c.exports},m7mt:function(e,t,i){},m8Ov:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("91GP");var a=i("2+ib"),o=(i("z0WU"),i("Ppn9")),n=i("QJ8N"),l={name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,tempQuery:{},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageBoms",params:{modelCode:"BomProduct",fieldCode:"prodInfo,unitName,code,name",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"prodCode,prodName,prodSpec,productProperty",isdefault:"1",isdisable:"1",isNullAlarm:"true"}},temp:{},showIndex:!0,isSingle:!1,showHeader:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a,dialogInputProdNum:n.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{queryTable:function(){this.tableConfigList[0].apiObj.params.isNullAlarm="false",this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.tempQuery),this.updateData()},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.tableConfigList[0].apiObj.params.isNullAlarm="false",this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.tempQuery),this.updateData()},dialogClose:function(e){this.$emit("close-dialog",e||{resState:"ok"})},nextStep:function(){var e="";this.selectList.forEach(function(t){e+=""==e?"'"+t.id+"'":",'"+t.id+"'"}),""!=e?(this.dialogData.temp=e,this.dialogData.selectList=this.selectList,this.dialogData.tempLable=this.tempLable,this.dialogData.title="输入需求量",this.dialogData.parent="dialogAddProductByBOM",this.openDialogName="dialogInputProdNum",this.showDialog=!0,this.visibleState=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条记录！"})},addProduct:function(){this.selectList.length>0?this.$emit("close-dialog",{resState:"ok",selectList:this.selectList}):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条记录！"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},delete:function(e,t){var i=this;i.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.deleteAttachment)(e).then(function(e){0===e.code&&(i.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),i.updateData())}).catch(function(e){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.dialogClose(e)},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}},s=(i("V1mQ"),i("Uu/a"),i("KHd+")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1500px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-row",[i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{model:{value:e.tempQuery.prodCode,callback:function(t){e.$set(e.tempQuery,"prodCode",t)},expression:"tempQuery.prodCode"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{model:{value:e.tempQuery.prodName,callback:function(t){e.$set(e.tempQuery,"prodName",t)},expression:"tempQuery.prodName"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"BOM编码："}},[i("el-input",{model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"BOM名称："}},[i("el-input",{model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:2}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:2}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_planManager_dialogAddProductByBOM0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);r.options.__file="dialogAddProductByBOM.vue";t.default=r.exports},m8lL:function(e,t,i){},mGFp:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("EDKZ"),l=i("hZMg");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{pageNo:1,type:"add",fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{deptType:"6d8a030ba1ce11e884ad00163e105f0a",type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this,t=this.$storage.get("userInfo");this.temp.makeId=t.userId,this.temp.makeName=t.userName,Object(l.findUserDepartmentByUser)({userId:this.temp.makeId,deptType:"6d8a030ba1ce11e884ad00163e105f0a"}).then(function(t){null!=t.deptId&&t.deptId.trim().length>0&&(e.temp.deptId=t.deptId.trim()),null!=t.deptName&&t.deptName.trim().length>0&&(e.temp.deptName=t.deptName.trim())}),this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="生产退库",this.temp.type="8e35209f19804e94940f076c8d71b955"},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={productId:l.productId,remark:l.remark,p2nFormula:l.p2nFormula,priceUnit:l.priceUnit,priceCount:l.priceCount,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.addWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,this.temp.deptId="",this.temp.deptName="",Object(l.findUserDepartmentByUser)({userId:this.temp.makeId,deptType:"6d8a030ba1ce11e884ad00163e105f0a"}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:"",count:"",remark:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{pageNo:function(){this.initTable("add","")}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px",width:"100%"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_produce_materialRebackWC_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogAdd.vue";t.default=d.exports},mVLt:function(e,t,i){"use strict";var a=i("tc2v");i.n(a).a},mWOU:function(e,t,i){"use strict";var a=i("5IAh");i.n(a).a},mkwT:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("63W0");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{eqptTableData:[],dateArray:[],sysPeriodTypeOption:[],sysPeriodTypeOptionDefault:[{label:"每天",value:"everDay"},{label:"每周星期几",value:"dayOfWeek"},{label:"每月第几个星期几",value:"weekOfMonth"},{label:"每年某月某日",value:"dayOfYear"},{label:"工作日[周1-周5]",value:"workDay"},{label:"自定义周期",value:"customPeriod"}],dayOfWeekOption:[],dayOfMonthOption:[],isShowCustomPeriod:!1,isShowDayOfWeek:!1,isShowDayOfMonth:!1,rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",modeId:"",beginPlan:"",endPlan:"",sysPeriodType:"",periodCount:"",periodType:"",periodDayofweek:"",periodDayofmonth:"",eqptJsonStr:""}}},created:function(){this.formData.modeId=this.initData.modeId,this.eqptTableData=this.initData.eqptTableData,this.initialDayOfWeekOption(),this.initialDayOfMonthOption(),this.sysPeriodTypeOption=this.sysPeriodTypeOptionDefault},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},hideDefaultDiv:function(){this.isShowCustomPeriod=!1,this.isShowDayOfWeek=!1,this.isShowDayOfMonth=!1},cleanColumnByBeginEndPlanChange:function(){this.formData.sysPeriodType="",this.sysPeriodTypeOption=this.sysPeriodTypeOptionDefault,this.formData.periodCount="",this.formData.periodType="",this.formData.periodDayofweek="",this.formData.periodDayofmonth=""},initialDayOfWeekOption:function(){for(var e=1;e<=7;e++)if(1==e){this.dayOfWeekOption.push({label:"星期一",value:"MONDAY"})}else if(2==e){this.dayOfWeekOption.push({label:"星期二",value:"TUESDAY"})}else if(3==e){this.dayOfWeekOption.push({label:"星期三",value:"WEDNESDAY"})}else if(4==e){this.dayOfWeekOption.push({label:"星期四",value:"THURSDAY"})}else if(5==e){this.dayOfWeekOption.push({label:"星期五",value:"FRIDAY"})}else if(6==e){this.dayOfWeekOption.push({label:"星期六",value:"SATURDAY"})}else if(7==e){this.dayOfWeekOption.push({label:"星期日",value:"SUNDAY"})}},initialDayOfMonthOption:function(){for(var e=1;e<=31;e++){var t=e+"";1==t.trim().length&&(t="0"+t);var i={label:t,value:t};this.dayOfMonthOption.push(i)}},beginEndPlanChange:function(){var e=this;null!=this.dateArray&&2==this.dateArray.length&&(this.cleanColumnByBeginEndPlanChange(),this.hideDefaultDiv(),Object(a.findSysPeriodTypeOption)({beginPlan:this.dateArray[0]}).then(function(t){if(null!=t.options&&t.options.length>0){e.sysPeriodTypeOption=[];for(var i=0;i<t.options.length;i++){var a={label:t.options[i].label,value:t.options[i].value};e.sysPeriodTypeOption.push(a)}}}))},sysPeriodTypeChange:function(e){this.formData.periodCount="",this.formData.periodType="",this.formData.periodDayofweek="",this.formData.periodDayofmonth="",this.hideDefaultDiv(),"customPeriod"==e&&(this.isShowCustomPeriod=!0)},sysPeriodTypeFocus:function(e){null!=this.dateArray&&2==this.dateArray.length||this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择完整的计划起止日期"})},periodTypeChange:function(e){this.formData.periodDayofweek="",this.formData.periodDayofmonth="",this.isShowDayOfWeek=!1,this.isShowDayOfMonth=!1,"week"==e?this.isShowDayOfWeek=!0:"month"==e&&(this.isShowDayOfMonth=!0)},save:function(){var e=this;null!=this.dateArray&&2==this.dateArray.length||this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择完整的计划起止日期"}),this.formData.beginPlan=this.dateArray[0],this.formData.endPlan=this.dateArray[1];var t=[];if(null!=this.eqptTableData&&this.eqptTableData.length>0)for(var i=0;i<this.eqptTableData.length;i++){var o=this.eqptTableData[i],n={equipmentId:o.id,maintainContentId:o.maintainContentId,isStop:o.isStop};t.push(n)}var l="";null!=t&&t.length>0&&(l=JSON.stringify(t)),this.formData.eqptJsonStr=l,this.$refs.submitForm.validate(function(t){t&&Object(a.addMaintainPlan)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"500px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"计划起止日期:"}},[i("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.beginEndPlanChange},model:{value:e.dateArray,callback:function(t){e.dateArray=t},expression:"dateArray"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"系统匹配周期:"}},[i("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:""},on:{change:e.sysPeriodTypeChange,focus:e.sysPeriodTypeFocus},model:{value:e.formData.sysPeriodType,callback:function(t){e.$set(e.formData,"sysPeriodType",t)},expression:"formData.sysPeriodType"}},e._l(e.sysPeriodTypeOption,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowCustomPeriod,expression:"isShowCustomPeriod"}]},[i("el-row",[i("el-form-item",{attrs:{label:"重复频率:"}},[e._v("\n            每 "),i("el-input-number",{staticStyle:{width:"130px"},attrs:{min:1,max:99999},model:{value:e.formData.periodCount,callback:function(t){e.$set(e.formData,"periodCount",t)},expression:"formData.periodCount"}}),e._v(" "),i("el-select",{attrs:{placeholder:""},on:{change:e.periodTypeChange},model:{value:e.formData.periodType,callback:function(t){e.$set(e.formData,"periodType",t)},expression:"formData.periodType"}},[i("el-option",{attrs:{label:"周",value:"week"}}),e._v(" "),i("el-option",{attrs:{label:"月",value:"month"}})],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowDayOfWeek,expression:"isShowDayOfWeek"}]},[i("el-row",[i("el-form-item",{attrs:{label:"重复时间(周):"}},[i("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:""},model:{value:e.formData.periodDayofweek,callback:function(t){e.$set(e.formData,"periodDayofweek",t)},expression:"formData.periodDayofweek"}},e._l(e.dayOfWeekOption,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowDayOfMonth,expression:"isShowDayOfMonth"}]},[i("el-row",[i("el-form-item",{attrs:{label:"重复时间(月):"}},[i("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:""},model:{value:e.formData.periodDayofmonth,callback:function(t){e.$set(e.formData,"periodDayofmonth",t)},expression:"formData.periodDayofmonth"}},e._l(e.dayOfMonthOption,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="addPeriod.vue";t.default=s.exports},mqp0:function(e,t,i){"use strict";var a=i("EUUs");i.n(a).a},muIo:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("yt8O"),i("XfO3"),i("9AAn");var a=i("WIyV"),o=i("MPAK"),n=i("V9Vj"),l={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{qualityNameMap:new Map([["免检","1"],["检验","2"]]),parentData:{},showDialog:!1,dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],rowTableList:[],apiObj:{apiName:"listPageAssistOrderDetaiQueryBySign",params:{fieldCode:"assistProductName,craftName,orderUnitName,orderCount,deliverCount,signCount,maxAarriveCount,arriveCount,quality",orderId:""}},customColumn:[{columnIndex:"assistProductName",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"arriveCount",width:"120",componentName:"input",_cellConfig:{}},{columnIndex:"quality",width:"100",componentName:"select",_cellConfig:{hideTitle:!0,options:[{id:"免检",label:"免检"},{id:"检验",label:"检验"}]}}]}},beforeCreate:function(){},created:function(){this.apiObj.params.orderId=this.initData.parentData.id,this.parentData=this.initData.parentData},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},getData:function(){this.$refs.assistOrderDetailBySignDialog.getData()},databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},closeDialog:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},checkColumnByArriveCount:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],n="";null!=a.arriveCount&&(n=a.arriveCount+"");var l="";null!=a.maxAarriveCount&&(l=a.maxAarriveCount+""),null!=n&&n.trim().length>0&&!Object(o.isNumberByValueSystem)(n)?t=t+"第 "+(i+1)+" 行: 签收数量("+n+") 输入错误，请输入大于或等于零的整数(支持2位小数)！":null!=n&&n.trim().length>0&&Object(o.isNumberByValueSystem)(n)&&n/1<0?t=t+"第 "+(i+1)+" 行: 签收数量("+n+") 输入错误，请输入大于或等于零的整数(支持2位小数)！":null!=n&&n.trim().length>0&&Object(o.isNumberByValueSystem)(n)&&n/1-l/1>0&&(t=t+"第 "+(i+1)+" 行: 签收数量("+n+") 输入错误，签收数不可大于允许签收数！")}return t},save:function(){this.rowTableList=[],this.getData();var e=this.checkColumnByArriveCount(this.rowTableList);if(null!=e&&e.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:e});else{var t=[];if(this.rowTableList.length>0)for(var i=0;i<this.rowTableList.length;i++){var a=this.rowTableList[i],o="";null!=a.arriveCount&&(o=a.arriveCount+""),o.trim().length>0&&o.trim()/1>0&&t.push(a)}0!=t.length?t.length>0&&this.saveOrderSign(t):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少签收一行数据"})}},saveOrderSign:function(e){for(var t=this,i=[],a=0;a<e.length;a++){var o=e[a],l="免检";null!=o.quality&&null!=o.quality.item&&null!=o.quality.item.id?l=o.quality.item.id:null!=o.quality&&o.quality.trim().length>0&&(l=o.quality.trim());var s=this.qualityNameMap.get(l),r={orderId:o.parentId,orderDetailId:o.id,orderUnit:o.orderUnit,assistProductId:o.assistProductId,arriveCount:o.arriveCount,price:o.price,quality:s,qualityType:o.purchaseQualityType};i.push(r)}var c="";null!=i&&i.length>0&&(c=JSON.stringify(i)),this.dialogLoading=!0,Object(n.addAssistSign)({orderId:this.parentData.id,roleId:this.$storage.get("userInfo").roleIds,supplierId:this.parentData.supplierId,supplierName:this.parentData.supplierName,dtlJsonStr:c}).then(function(e){0===e.code&&(t.dialogLoading=!1,t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-row",[i("custom-base-table",{ref:"assistOrderDetailBySignDialog",attrs:{"data-custom-table-id":"views_assist_assistSign_createAssistSign_selectOrderDetail0",showIndex:!1,showTableSet:!1,showCheckBox:!1,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);r.options.__file="selectOrderDetail.vue";t.default=r.exports},muUK:function(e,t,i){"use strict";i.r(t);var a=i("WIyV"),o=i("BEur"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",supplierId:"",isAutoCommit:"",dtlJsonStr:""},tableData:[],editData:[],apiObj:{apiName:"listPageAssistRetreatDetailEdit",params:{fieldCode:"assistProductName,craftName,orderUnitName,price,orderDtlCount,retreatCount,discardCount,maxRetreatCount,orderCount",parentId:""}},customColumn:[{columnIndex:"assistProductName",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"orderCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{lessThan:["self@maxRetreatCount",!0]}],message:["请输入大于零的正整数或(1,2)位小数！","不可大于最大退货数！"]}}]}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.formData.id=e.id,this.formData.supplierId=e.supplierId,this.apiObj.params.parentId=e.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.editData=[],this.editData=e)},getData:function(){this.$refs.customBaseTable.getData()},save:function(){this.editData=[],this.getData(),this.saveSaleOrder(this.editData)},saveSaleOrder:function(e){for(var t=this,i=[],a=0;a<e.length;a++){var n=e[a],l={orderId:n.orderId,orderDtlId:n.orderDtlId,price:n.price,assistProductId:n.assistProductId,productId:n.productId,orderUnit:n.orderUnit,orderCount:n.orderCount};i.push(l)}this.formData.dtlJsonStr="",null!=i&&i.length>0&&(this.formData.dtlJsonStr=JSON.stringify(i)),this.$confirm("是否将该退料单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.formData.isAutoCommit="true",Object(o.updateAssistRetreat)(t.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.formData.isAutoCommit="false",Object(o.updateAssistRetreat)(t.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistProductRetreat_listAssistProductRetreat_dialogEdit0",showIndex:!1,showTableSet:!1,showCheckBox:!1,useDefaultBtn:!0,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},mwzG:function(e,t,i){"use strict";t.a={code:0,msg:"执行成功!",result:{hideTitles:["id","productGenre","productUnit","parentId","warehouseId","productId","code","executeCount","state","cuser","uuser","remark","isdisable","qrcode","businessId"],pageData:{current:1,pages:"1",records:[],size:10,total:"1"},titles:[{progress:"进度"},{warehouseOutCode:"出库单编码"},{productCode:"货品编码"},{productName:"货品名称"},{productSpec:" 规格/型号"},{productGenreName:"货品属性"},{productUnitName:"计量单位"},{count:"出库数量"},{id:"id"},{productGenre:"货品属性ID"},{productUnit:"计量单位ID"},{parentId:"出库单ID"},{warehouseId:" (推荐)货位ID"},{productId:"产品ID"},{code:"批次号"},{executeCount:"已出库数量"},{state:"状态"},{cuser:"创建用户id"},{cdate:"创建时间"},{uuser:"修改用户id"},{udate:"修改时间"},{remark:"备注"},{isdisable:"是否启用"},{qrcode:"二维码"},{businessId:"业务id"}],varList:[{businessId:"",cdate:"3",children:[{code:"11111111111",companyId:"02b02026270d4b6582b7bfc576e81971",id:"11",isdisable:"1",isdisable1:"1",isdisable2:"0",isdisable3:"1",isdisable4:"1",name:"12\n11\n13",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"5.00",suggestCount:"5.jpg",imgPath:"fileUpload/QRCode/product/1539142716704586.png",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",isdisable2:"1",isdisable3:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"}],code:"",count:"10.00",cuser:"bf3b8b63be1b4f1f96984b33ccd77784",executeCount:"10.00",hideTitles:["id","warehouseId","productId","isdisable","companyId"],id:"219967d2f6704d868b11002caef9885c",isdisable:"1",parentId:"08e06e2e63804a9f81781a540307fa8f",pid:null,productCode:"2",productGenre:"7e2cad38438e40ba974cd00099e5ed71",productGenreName:[],productId:"01de8e2c87074f06b32567d7c1275808",productName:"1",productSpec:"22222222222222222222",productUnit:"3ab6399760da48049bc76705fa797217",productUnitName:"克",progress:"55",qrcode:"",remark:"122",state:"已完成",titles:[{name:"货位名称"},{code:"批次号"},{stockCount:"库存数量"},{suggestCount:"建议取货数量"},{id:"id"},{warehouseId:"仓库货位ID"},{productId:"产品ID"},{isdisable:"是否启用"},{companyId:"公司ID"}],udate:"2019-03-08 17:30:33",uuser:"",warehouseId:"",warehouseOutCode:"3"},{businessId:"",cdate:"1",children:[{code:"11111111111",companyId:"02b02026270d4b6582b7bfc576e81971",id:"11",isdisable:"1",name:"12\n11\n13",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"5.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"},{code:"222222222222",companyId:"02b02026270d4b6582b7bfc576e81971",id:"22",isdisable:"1",name:"11",pid:"219967d2f6704d868b11002caef9885c",productId:"01de8e2c87074f06b32567d7c1275808",stockCount:"6.00",suggestCount:"5.00",warehouseId:"51c314b13c58421085beb3e280cbc122"}],code:"",count:"11.00",cuser:"bf3b8b63be1b4f1f96984b33ccd77784",executeCount:"10.00",hideTitles:["id","warehouseId","productId","isdisable","companyId"],id:"885c219967d2f6704d868b11002caef9",isdisable:"1",parentId:"08e06e2e63804a9f81781a540307fa8f",pid:null,productCode:"3",productGenre:"7e2cad38438e40ba974cd00099e5ed71",productGenreName:[],productId:"01de8e2c87074f06b32567d7c1275808",productName:"2",productSpec:"2111111111111111111",productUnit:"3ab6399760da48049bc76705fa797217",productUnitName:"克",progress:"20",qrcode:"",remark:"122",state:"已完成",titles:[{name:"货位名称"},{code:"批次号"},{stockCount:"库存数量"},{suggestCount:"建议取货数量"},{id:"id"},{warehouseId:"仓库货位ID"},{productId:"产品ID"},{isdisable:"是否启用"},{companyId:"公司ID"}],udate:"2018-11-08 17:30:33",uuser:"",warehouseId:"",warehouseOutCode:"2"}]}}},n2LI:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("xEMq");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{title:[{required:!0,message:"请填写标题",trigger:"change"}],content:[{required:!0,message:"请填写内容",trigger:"change"}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.initData.rowData&&(this.formData=this.initData.rowData)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateMessage)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"标题:",prop:"title"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"内容:",prop:"content"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},n4yU:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("Oyvg");var a=i("WIyV"),o=i("KC3E"),n=i("91ra"),l={components:{customBaseTable:a.a,dialogAdd:o.default},props:["initData","visible"],data:function(){var e=this;return{parentId:"",formData:{cuserName:"",customerName:"",type:"",typeName:""},rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择退货类型")):a()}}]},openDialogName:"",dialogLoading:!0,isVisible:!1,inDialog:!0,showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",orderDetail_style:"",title:"",temp:null,tempLable:null},typeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"retreatType",isglobal:"1"}},defaultSelected:[]},tableData:[],rowTableList:[],apiObj:{apiName:"listPageRetreatDetailByEdit",params:{pageNo:1,parentId:"",isRetreatByEdit:"true",fieldCode:"sysOrderCode,deliverCode,productCode,productName,productSpec,orderUnitName,notRetreatCount,orderCount,productPrice,orderSum,remark"}},customColumn:[{columnIndex:"orderCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"},{lessThan:["self@notRetreatCount",!0]},{greaterThan:["0",!1]}],message:["请输入大于零的正整数或(1,2)位小数！","必须小于等于可退货数量！","必须大于零！"]}},{columnIndex:"orderSum",componentName:"input",_cellConfig:{compute:"self@orderCount(*)self@productPrice",editable:!1}},{columnIndex:"remark",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>{{data.total.toFixed(2)}}</span></li>\n                    </ul>'},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},data:{total:"0.00"},computes:{total:"table@orderSum"}}}},beforeCreate:function(){},created:function(){this.parentId=this.initData.data.parentId,this.apiObj.params.parentId=this.parentId,this.formData.remark=this.initData.remark,this.formData.type=this.initData.type,this.typeData.defaultSelected[0]=this.initData.type;var e=this.$storage.get("userInfo");this.formData.cuserName=e.userName,this.formData.customerName=this.initData.customerName},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.orderCount;o-a.notRetreatCount>0&&(t=t+"第 "+(i+1)+" 行: 退货数量("+o+") 输入错误，退货数量不可大于可退货数量！")}return t},typeSelect:function(e){e[0]?(this.formData.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.formData.type=[],this.typeData.defaultSelected=[])},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.$refs.retreatEditDialog.getData(),null!=e.rowTableList&&e.rowTableList.length>0&&e.saveSaleRetreat(e.rowTableList))})},saveSaleRetreat:function(e){var t=this;if(null!=e&&0!=e.length){var i=this.checkColumn(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{var a=[];e.forEach(function(e){var t={deliverDetailId:e.deliverDetailId,orderDetailId:e.orderDetailId,productId:e.productId,orderSum:e.orderSum,orderUnit:e.orderUnit,orderCount:e.orderCount,productUnit:e.productUnit,remark:e.remark,sysOrderCode:e.sysOrderCode,orderId:e.orderId,receiveAmount:e.receiveAmount,notRetreatSum:e.notRetreatSum,n2pFormula:e.n2pFormula,p2nFormula:e.p2nFormula};a.push(t)});var o="";null!=a&&a.length>0&&(o=JSON.stringify(a)),null!=o&&0!=o?this.$confirm("修改退货单后，是否将该退货单提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){Object(n.updateSaleRetreat)({type:t.formData.type,remark:t.formData.remark,parentId:t.parentId,dtlJsonStr:o,isAutoCommit:"true"}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&Object(n.updateSaleRetreat)({type:t.formData.type,remark:t.formData.remark,parentId:t.parentId,dtlJsonStr:o,isAutoCommit:"false"}).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}):this.$message({type:"warning",duration:5e3,showClose:!0,message:"暂无发货单明细！"})}}},dialogOpen:function(){},dialogClose:function(e){this.rowTableList=[],this.customerId="",this.deliverDtlIds="",this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px","padding-right":"20px","padding-left":"20px"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"90px"}},[i("el-row",[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"退货类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"客户名称:",prop:"customerName"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.formData.customerName,callback:function(t){e.$set(e.formData,"customerName",t)},expression:"formData.customerName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("el-input",{attrs:{readonly:!0},model:{value:e.formData.cuserName,callback:function(t){e.$set(e.formData,"cuserName",t)},expression:"formData.cuserName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("el-row",{style:e.initData.orderDetail_style},[i("custom-base-table",{ref:"retreatEditDialog",attrs:{"data-custom-table-id":"views_sale_retreat_createRetreat_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"retreatEditDialog",useDefaultBtn:!0,showAll:!1,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogEdit.vue";t.default=r.exports},nG85:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("6tA9");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{dialogAddCustomerInvoice:i("hI+3").default,dialogAdd:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{customerId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{companyName:"",invoiceNumber:"",address:"",bankName:"",bankCode:"",mobile:"",remark:"",customerId:"",customerInvoiceId:""},tempLable:{},tempNotEditable:{},rules:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{temp:{},title:""},CustomerInvoiceDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择开票信息",tableUrl:"/base/customerInvoice/listPageCustomerInvoices",tableParm:{fieldCode:"companyName,invoiceNumber,address,bankName,mobile,remark,isdefaultStr",customerId:this.initData.customerId},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.customerInvoiceId=this.temp.id)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},customerInvoiceSelect:function(e){e[0]&&(this.temp.customerInvoiceId=e[0].id,this.temp.customerId=this.initData.customerId,this.temp.companyName=e[0].companyName,this.temp.invoiceNumber=e[0].invoiceNumber,this.temp.address=e[0].address,this.temp.bankName=e[0].bankName,this.temp.bankCode=e[0].bankCode,this.temp.mobile=e[0].mobile,this.temp.remark=e[0].remark)},addCustomerInvoice:function(){this.temp={},this.temp.customerId=this.initData.customerId,this.dialogData.customerId=this.initData.customerId,this.dialogData.temp=JSON.parse(JSON.stringify(this.temp)),this.dialogData.title="新增开票信息",this.openDialogName="dialogAddCustomerInvoice",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"450px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"75%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"75px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"companyName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.companyName,callback:function(t){e.$set(e.temp,"companyName",t)},expression:"temp.companyName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"税号:",prop:"invoiceNumber"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.invoiceNumber,callback:function(t){e.$set(e.temp,"invoiceNumber",t)},expression:"temp.invoiceNumber"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地址:",prop:"address"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.address,callback:function(t){e.$set(e.temp,"address",t)},expression:"temp.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电话:",prop:"mobile"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.mobile,callback:function(t){e.$set(e.temp,"mobile",t)},expression:"temp.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开户银行:",prop:"bankName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.bankName,callback:function(t){e.$set(e.temp,"bankName",t)},expression:"temp.bankName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"账号:",prop:"bankCode"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.bankCode,callback:function(t){e.$set(e.temp,"bankCode",t)},expression:"temp.bankCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"发票号码:",prop:"invoiceCode"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.invoiceCode,callback:function(t){e.$set(e.temp,"invoiceCode",t)},expression:"temp.invoiceCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:"2",disabled:!0},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogViewCustomerInvoice.vue";t.default=s.exports},nSPG:function(e,t,i){},nXfM:function(e,t,i){"use strict";var a=i("bUBY");i.n(a).a},na5B:function(e,t,i){"use strict";i("KKXr"),i("f3/d"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("K3g7")),l={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},isConfirm:!1,dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageSimpleWarehouseProductView",params:{fieldCode:"warehouseName,code,name,spec,unitName,genreName,stockCount,safetyCount",productNotIn:"",isNeedEntity:"true",isNotNeedSpare:"true"}},customColumn:[],tempData:{},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[],tempData:{},showIndex:!1,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:["remark"],tableSelectList:[]}},created:function(){this.initTree();var e="";if(null!=this.initData.data&&this.initData.data.length>0)for(var t=0;t<this.initData.data.length;t++){var i=this.initData.data[t];null!=i.productId&&i.productId.trim().length>0&&(e=e+i.productId+",")}var a=!0;null!=this.initData.isNeedRepeat&&(a=this.initData.isNeedRepeat),a||null!=e&&e.trim().length>0&&(e=e.substring(0,e.lastIndexOf(",")),e=this.findQueryProductIds(e),this.aboveTableConfig.apiObj.params.productNotIn=e)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{isConfirm:this.isConfirm,selectList:this.tableSelectList})},closeDialog:function(e){this.showDialog=!1},tableSelected:function(e){this.tableSelectList=e},confrim:function(){this.$refs.trabsferTables.getTableSelected(),this.isConfirm=!0,this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},queryTable:function(){this.tempQuery.warehouseId=this.selectTree.id,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.tempQuery.warehouseId=this.selectTree.id,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},initTree:function(){var e=this;e.dialogLoading=!0,Object(n.treeWarehouse)({id:"2d75e49bcb9911e884ad00163e105f05",isNeedEntity:"true",isNotNeedSpare:"true"}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name,virtualGenre:i.virtualGenre},t.push(i),this.treeData=t,this.dialogLoading=!1},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name,pathId:e.pathId},this.tempQuery.warehouseId=this.selectTree.id,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},findQueryProductIds:function(e){var t="";if(null==e||0==e.trim().length)return t;var i=e.split(",");if(null!=i&&i.length>0)for(var a=i.length,o=0;o<i.length;o++){var n="'"+i[o]+"'";o<a-1?t=t+n+",":o==a-1&&(t+=n)}return t}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="productStockTreeTableDialog.vue";t.a=r.exports},nies:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg"),i("f3/d"),i("rGqo"),i("yt8O"),i("XfO3"),i("9AAn");var a=i("AUoE");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],mixins:[i("K77I").a],data:function(){return{deliverId:"",customerId:"",priceType:"",deliverType:"send",deliverTypeNameKeyMap:new Map([["send","1"],["deliver","2"],["self","3"]]),isShowSend:!0,isShowDeliver:!1,isShowSelf:!1,dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{deliverId:"",type:"",makeId:"",makeName:"",deliverDate:new Date,waybillCompany:"",waybillCode:"",customeAddressId:"",custAddress:"",custAddressName:"",custMobile:"",carCode:"",remark:"",pieceCount:"",deliverDtlJsonStr:""},tempLable:{},tempNotEditable:{},rules:{makeName:[{required:!0,message:"请选择经办人",trigger:"change"}],deliverDate:[{required:!0,message:"请填写发货日期",trigger:"change"}],pieceCount:[{required:!0,message:"请填写件数",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",fullscreen:!1,tempLable:null},formTemp:[],MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择经办人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}},CustAddressDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择收货地址",tableUrl:"/base/customeAddress/listPageCustomeAddress",tableParm:{customerId:"",fieldCode:"name,mobile,address"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.deliverId=this.initData.deliverId,this.customerId=this.initData.customerId,this.temp.pieceCount=this.initData.pieceCount,this.temp.deliverDtlJsonStr=this.initData.deliverDtlJsonStr,this.CustAddressDialog.dialog.data.tableParm.customerId=this.initData.customerId;var e=this.$storage.get("userInfo");null!=e.userId&&e.userId.trim().length>0&&(this.temp.makeId=e.userId.trim()),null!=e.userName&&e.userName.trim().length>0&&(this.temp.makeName=e.userName.trim())},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},radioChange:function(){this.isShowSend=!1,this.isShowDeliver=!1,this.isShowSelf=!1,"send"==this.deliverType?this.isShowSend=!0:"deliver"==this.deliverType?this.isShowDeliver=!0:"self"==this.deliverType&&(this.isShowSelf=!0)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},custAddressSelect:function(e){e[0]&&(this.temp.customeAddressId=e[0].id,this.temp.custAddressName=e[0].name,this.temp.custMobile=e[0].mobile,this.temp.custAddress=e[0].address)},changePieceCount:function(e){var t=this.checkValueNumber(e,"件数");null!=t&&t.trim().length>0&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t})},isNumberCodeByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[1-9][0-9]*$").test(e.trim())},checkValueNumber:function(e,t){var i="";return null==e||0==e.trim().length?i=t+"为空或空字符串！":null!=e&&e.trim().length>0&&!this.isNumberCodeByValue(e.trim())&&(i=t+"("+e+")输入错误，请输入大于零的正整数！"),i},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){var i=e.temp.pieceCount,o=e.checkValueNumber(i,"件数");if(null!=o&&o.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:o});e.dialogLoading=!0,e.temp.deliverId=e.deliverId,e.temp.customerId=e.customerId,e.temp.type=e.deliverTypeNameKeyMap.get(e.deliverType),Object(a.updateSaleDeliverByDeliverType)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"600px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 0px 0px 20px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"95px"}},[i("el-row",{staticStyle:{"text-align":"center",margin:"0px 0px 20px 0px"}},[i("el-radio-group",{on:{change:e.radioChange},model:{value:e.deliverType,callback:function(t){e.deliverType=t},expression:"deliverType"}},[i("el-radio",{attrs:{label:"send"}},[e._v("发货")]),e._v(" "),i("el-radio",{attrs:{label:"deliver"}},[e._v("送货")]),e._v(" "),i("el-radio",{attrs:{label:"self"}},[e._v("客户自提")])],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"经办人：",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"170px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"发货日期：",prop:"deliverDate"}},[i("el-date-picker",{staticStyle:{width:"170px"},attrs:{type:"date",placeholder:"发货日期","value-format":"yyyy-MM-dd"},model:{value:e.temp.deliverDate,callback:function(t){e.$set(e.temp,"deliverDate",t)},expression:"temp.deliverDate"}})],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSend,expression:"isShowSend"}]},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"物流公司：",prop:"waybillCompany"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.waybillCompany,callback:function(t){e.$set(e.temp,"waybillCompany",t)},expression:"temp.waybillCompany"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"物流单号：",prop:"waybillCode"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.waybillCode,callback:function(t){e.$set(e.temp,"waybillCode",t)},expression:"temp.waybillCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"收货地址：",prop:"custAddress"}},[i("base-input-option",{staticStyle:{width:"170px"},attrs:{dialog:e.CustAddressDialog.dialog},on:{callback:e.custAddressSelect},model:{value:e.temp.custAddress,callback:function(t){e.$set(e.temp,"custAddress",t)},expression:"temp.custAddress"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"联系人：",prop:"custAddressName"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.custAddressName,callback:function(t){e.$set(e.temp,"custAddressName",t)},expression:"temp.custAddressName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"手机号：",prop:"custMobile"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.custMobile,callback:function(t){e.$set(e.temp,"custMobile",t)},expression:"temp.custMobile"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"件数：",prop:"pieceCount"}},[i("el-input",{staticStyle:{width:"170px"},on:{change:e.changePieceCount},model:{value:e.temp.pieceCount,callback:function(t){e.$set(e.temp,"pieceCount",t)},expression:"temp.pieceCount"}})],1)],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowDeliver,expression:"isShowDeliver"}]},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"车牌号：",prop:"carCode"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.carCode,callback:function(t){e.$set(e.temp,"carCode",t)},expression:"temp.carCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"收货地址：",prop:"custAddress"}},[i("base-input-option",{staticStyle:{width:"170px"},attrs:{dialog:e.CustAddressDialog.dialog},on:{callback:e.custAddressSelect},model:{value:e.temp.custAddress,callback:function(t){e.$set(e.temp,"custAddress",t)},expression:"temp.custAddress"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"联系人：",prop:"custAddressName"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.custAddressName,callback:function(t){e.$set(e.temp,"custAddressName",t)},expression:"temp.custAddressName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"手机号：",prop:"custMobile"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.custMobile,callback:function(t){e.$set(e.temp,"custMobile",t)},expression:"temp.custMobile"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"件数：",prop:"pieceCount"}},[i("el-input",{staticStyle:{width:"170px"},on:{change:e.changePieceCount},model:{value:e.temp.pieceCount,callback:function(t){e.$set(e.temp,"pieceCount",t)},expression:"temp.pieceCount"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}})],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSelf,expression:"isShowSelf"}]},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"车牌号：",prop:"carCode"}},[i("el-input",{staticStyle:{width:"170px"},model:{value:e.temp.carCode,callback:function(t){e.$set(e.temp,"carCode",t)},expression:"temp.carCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"件数：",prop:"pieceCount"}},[i("el-input",{staticStyle:{width:"170px"},on:{change:e.changePieceCount},model:{value:e.temp.pieceCount,callback:function(t){e.$set(e.temp,"pieceCount",t)},expression:"temp.pieceCount"}})],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[i("el-input",{staticStyle:{width:"460px"},attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},nmHX:function(e,t,i){"use strict";var a=i("+HYo");i.n(a).a},npTz:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("f3/d"),i("Oyvg"),i("rGqo");var a=i("0CID"),o=i("SAHf"),n=i("Q4qC"),l=i("z0WU"),s=i("mSNy");function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.deleteBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteBtns(scope.row,scope.$index)">删除</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.count" ></el-input>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},p={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.remark" ></el-input>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},m={components:{selectProduct:a.default},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.data.defaultSelected.length<=0?a(new Error("请选择入库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",validator:function(t,i,a){e.warehouseData.data.defaultSelected.length<=0?a(new Error("请选择仓库")):a()}}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,isNeedGenreSpare:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],selectList:null,initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:d,deleteBtns:this.deleteBtns,deleteBtns_isShow:!0}},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1,typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{isNeedName:"true",nameValue:"备件入库",dictionaryKey:"warehouseInType",isglobal:"1"},isDefaultSelected:!0,defaultSelected:[]}},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntityVirtual:"true",isNeedSpare:"true",orderStr:"a.serial_number asc"},isDefaultSelected:!0,defaultSelected:[]}},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"1"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.initTable("add","")},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=c(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(l.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==s.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==s.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==s.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==s.a.locale&&(e.label=t.substring(0,t.indexOf("_")))),"count"===e.prop&&(e.component=u),"remark"===e.prop&&(e.component=p)}),this.internationalConfig(),e.push(this.initConfigs.tableOperates),e},internationalConfig:function(){"en"==s.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==s.a.locale&&(this.initConfigs.tableOperates.label="操作")},initTable:function(e,t){var i=this;this.$loading({spinner:"preloader",text:""}),Object(n.listPageDetailProduct)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){r(e,t,i[t])})}return e}({},this.tempQuery,{fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,remark",type:e,parentId:t,pageNo:this.pageNo})).then(function(e){i.getListPage(e),i.$loading().close()}).catch(function(e){i.$loading().close()})},dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.isNeedRepeat=!1,this.dialogData.isNeedGenreSpare=!0,this.dialogData.title="选择货品",this.openDialogName="selectProduct",this.showDialog=!0,this.inLinVisible=!0},deleteBtns:function(e,t){this.tableData.splice(t,1)},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i].count;if(null==a||0==a.trim().length)t=t+"第 "+(i+1)+" 行: 入库数量为空或空字符串！";else new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(a)||(t=t+"第 "+(i+1)+" 行: 入库数量("+a+")输入错误，请输入大于零的正整数或(1,2)位小数！")}return t},saveWarehouseIn:function(){var e=this,t="";if(null!=this.tableData&&0!=this.tableData.length){var i=this.checkColumn(this.tableData);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{for(var a=[],n=0;n<this.tableData.length;n++){var l=this.tableData[n],s={productId:l.productId,count:l.count,remark:l.remark};a.push(s)}t=JSON.stringify(a),this.temp.dtlJsonStr=t,this.temp.type=this.typeData.data.defaultSelected[0],this.temp.warehouseId=this.warehouseData.data.defaultSelected[0],this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(o.addWarehouseInBySpare)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){}))})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.data.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.data.defaultSelected=[])},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1],this.warehouseData.data.defaultSelected=[e[e.length-1]])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:"",count:"",remark:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),null!=a.unitName&&a.unitName.trim().length>0&&(o.productUnitName=a.unitName.trim()),this.tableData.push(o)}}},watch:{pageNo:function(){this.initTable("add","")}}},h=i("KHd+"),g=Object(h.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{"margin-top":"10px"}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.data.defaultSelected,callback:function(t){e.$set(e.typeData.data,"defaultSelected",t)},expression:"typeData.data.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"仓库:",prop:"warehouseName"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{data:e.warehouseData.data},on:{callback:e.warehouseSelect},model:{value:e.warehouseData.data.defaultSelected,callback:function(t){e.$set(e.warehouseData.data,"defaultSelected",t)},expression:"warehouseData.data.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{height:"300px",width:"96%","margin-left":"2%"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveWarehouseIn}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);g.options.__file="dialogAdd.vue";t.default=g.exports},nqR1:function(e,t,i){"use strict";i.r(t);i("KKXr"),i("91GP");var a=i("varj"),o=i("uTIz"),n={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{fieldCode_default:"prodInfo,unitName,stockCount,safetyCount,lockCount,productStockCount",tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",state:!0,isShow:!0,plain:!0,icon:"refresh",method:this.resetQuery}],aboveTableConfig:{apiObj:{apiName:"listPageAssistPlanDetailByAssistOrder",params:{fieldCode:"planCode,assistProductName,craftName,orderUnitName,planDate,price,count,lossRatio",supplierId:"null"}},customColumn:[{columnIndex:"planCode",width:"110",_cellConfig:{hideTitle:!0}},{columnIndex:"assistProductName",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!0,showTableSet:!1,showAll:!1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"planCode",width:"110",_cellConfig:{hideTitle:!0}},{columnIndex:"assistProductName",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:[],tableSelectList:[]}},created:function(){var e="";if(null!=this.initData.tableData&&this.initData.tableData.length>0)for(var t=0;t<this.initData.tableData.length;t++){var i=this.initData.tableData[t];null!=i.planDetailId&&i.planDetailId.trim().length>0&&(e=e+i.planDetailId+",")}var a="",o=!0;null!=this.initData.isNeedRepeat&&(o=this.initData.isNeedRepeat),o||null!=e&&e.trim().length>0&&(e=e.substring(0,e.lastIndexOf(",")),a=e=this.findQueryIds(e));var n="null";null!=this.initData.supplierId&&this.initData.supplierId.trim().length>0&&(n=this.initData.supplierId.trim()),this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,{notInPlanDtlIds:a,supplierId:n,orderStr:"plan.cdate asc,planDtl.cdate asc"})},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){var e="1200px";return null!=this.initData.width&&(e=this.initData.width),e},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{selectList:this.tableSelectList,pageName:"selectAssistPlanByOrder"})},closeDialog:function(e){},tableSelected:function(e){this.tableSelectList=e},findQueryIds:function(e){var t="";if(null==e||0==e.trim().length)return t;var i=e.split(",");if(null!=i&&i.length>0)for(var a=i.length,o=0;o<i.length;o++){var n="'"+i[o]+"'";o<a-1?t=t+n+",":o==a-1&&(t+=n)}return t},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},confrim:function(){this.$refs.trabsferTables.getTableSelected(),this.isVisible=!1},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"选择货品",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{height:"100%"}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"外协件："}},[i("el-input",{attrs:{placeholder:"名称或编码"},model:{value:e.tempQuery.assistProductName,callback:function(t){e.$set(e.tempQuery,"assistProductName",t)},expression:"tempQuery.assistProductName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"工艺名称："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.craftName,callback:function(t){e.$set(e.tempQuery,"craftName",t)},expression:"tempQuery.craftName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:e.queryTable}})],1),e._v(" "),i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:e.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);s.options.__file="selectAssistPlanByOrder.vue";t.default=s.exports},"o+TG":function(e,t,i){"use strict";i.r(t);i("f3/d"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("T31V")),l=i("K3g7"),s={components:{customTransferTable:a.a,dialogAdd:n.default,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageWCWarehouseProductView",params:{fieldCode:"warehouseName,wpCode,code,name,spec,unitName,genreName,stockCount",stockCountQuery:"stockCountNotZero",isNeedEntity:"true",isNotNeedSpare:"true",productNotIn:""}},customColumn:[],tempData:{},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[],tempData:{},showIndex:!1,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:["remark"],tableSelectList:[]}},created:function(){this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},closeDialog:function(e){e.resState&&(this.resState=e.resState,"ok"===e.resState&&this.dialogClose()),this.showDialog=!1},tableSelected:function(e){this.tableSelectList=e,this.toAddWarehouseMove()},confrim:function(){this.$refs.trabsferTables.getTableSelected()},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},queryTable:function(){this.tempQuery.warehouseId=this.selectTree.id,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.tempQuery.warehouseId=this.selectTree.id,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},initTree:function(){var e=this;e.dialogLoading=!0,Object(l.treeWarehouse)({id:"2d75e49bcb9911e884ad00163e105f05",isNeedEntity:"true",isNotNeedSpare:"true"}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name,virtualGenre:i.virtualGenre},t.push(i),this.treeData=t,this.dialogLoading=!1},toAddWarehouseMove:function(){var e="";if(null!=this.tableSelectList&&0!=this.tableSelectList.length||(e="请至少选择一行数据！"),e.length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:e});else{var t=.6*document.body.clientWidth;this.dialogData.dialog_width=t+"px";var i=.75*(.618*t)+"px";this.dialogData.table_style="height:"+i+";width: 96%;margin-left: 2%;";var a="",o="";if(this.tableSelectList.length>0)for(var n=0;n<this.tableSelectList.length;n++){var l=this.tableSelectList[n],s=l.id,r=l.warehouseId;a=null==a||""==a?"'"+s+"'":a+",'"+s+"'",o=null==o||""==o?"'"+r+"'":o+",'"+r+"'"}this.dialogData.ids=a,this.dialogData.warehouseIds=o,this.dialogData.title="创建移库单",this.openDialogName="dialogAdd",this.showDialog=!0,this.inLinVisible=!0}},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name,pathId:e.pathId},this.tempQuery.warehouseId=this.selectTree.id,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogProductTree.vue";t.default=c.exports},"o+uy":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("EXX/");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{paymentSum:[{required:!0,message:"请填写付款金额",trigger:"change"}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.initData.rowData&&(this.formData=this.initData.rowData)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+\\.{0,1}[0-9]{0,2}$").test(e.trim())},isErrorByCheckPaymentSum:function(e){return null!=this.formData.endPlus&&this.formData.endPlus.trim().length>0&&this.formData.endPlus.trim(),!this.isNumberByValue(e.trim())&&(this.$message({message:"付款金额:"+e+" 输入错误，请输入大于零的正整数或(1,2)位小数！",type:"warning",duration:5e3}),!0)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){var i=e.formData.paymentSum;e.isErrorByCheckPaymentSum(i)||Object(a.addPaymentRecord)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"付款成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})},closeDialog:function(e){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"供应商编号:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.supplierCode,callback:function(t){e.$set(e.formData,"supplierCode",t)},expression:"formData.supplierCode"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"供应商名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"应付款(期末):"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.endPlus,callback:function(t){e.$set(e.formData,"endPlus",t)},expression:"formData.endPlus"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"付款金额:",prop:"paymentSum"}},[i("el-input",{staticStyle:{width:"200px"},on:{change:e.isErrorByCheckPaymentSum},model:{value:e.formData.paymentSum,callback:function(t){e.$set(e.formData,"paymentSum",t)},expression:"formData.paymentSum"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="addPaymentRecord.vue";t.default=s.exports},o90A:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("CqDg"),n=i("txn6");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:a.a,productStockTreeTableDialog:o.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{typeName:"报废处理",fieldCode:"warehouseName,productCode,productName,productSpec,productGenreName,stockCount,count,remark",parentId:this.initData.temp.id}},customColumn:[{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCount",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["报废数量必须大于零！","报废数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="报废处理",this.temp.type="def4b13175dc44b08d7a0315b811700e"},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.dialogData.title="选择货品",this.openDialogName="productStockTreeTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={id:l.id,productId:l.productId,remark:l.remark,warehouseId:l.warehouseId,pathName:l.pathName,count:l.count,priceCount:l.count,productUnit:l.priceUnit,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,Object(n.updateWarehouseOutScrapBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",pathName:"",warehouseId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCount:""};o.productId=a.productId.trim(),null!=a.warehouseName&&a.warehouseName.trim().length>0&&(o.warehouseName=a.warehouseName.trim()),null!=a.warehouseId&&a.warehouseId.trim().length>0&&(o.warehouseId=a.warehouseId.trim()),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.stockCount=a.stockCount,o.priceUnit=a.unit,o.priceUnitName=a.unitName,this.tableData.push(o)}}},watch:{}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"操作类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouseByWC_scrapByWC_createScrapByWC_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogEdit.vue";t.default=c.exports},oBi7:function(e,t,i){"use strict";var a=i("DKhc");i.n(a).a},oC0i:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo"),i("f3/d");var a=i("i7/w"),o=i.n(a),n=i("Do8I"),l=i("zF5t"),s=i("z0WU");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{roleId:"",rules:{},temp:{},tempLable:{},tempNotEditable:{},dialogLoading:!1,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{fullscreen:!1,title:"",data:null},assignTree:[],assignTreeConfigs:{showSearch:!0},assignCheckedList:[],assignFilterText:"",dialogAssignChecked:!1,clickArrow:!1,defaultProps:{children:"children",label:"url"},treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1},transferData:[],transferSelectedData:[],renderFunc:function(e,t){return e("span",{style:"display: inline-block;width: 100%;"},[" ",e("span",{style:"display: inline-block;width: 20%;text-align: center;"},[" ",t.index]),e("span",{style:"display: inline-block;width: 39%;text-align: center;"},[t.userCode])," ",e("span",{style:"display: inline-block;width: 39%;text-align: center;"},[" ",t.userName])])},transferProps:{key:"id",label:"userName",code:"userCode",disabled:"isdisable",index:"index"},resState:null}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.roleId=this.temp.roleId,this.treeDepartments();var e=this.$storage.get("userInfo").companyId;this.assignTreeDataBridge({id:e})},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){this.$nextTick(function(){if(!document.getElementsByClassName("customTitle").length)for(var e=document.getElementsByClassName("el-transfer-panel__filter"),t=0;t<e.length;t++){var i=(new(o.a.extend({template:'<div class="customTitle" style="box-sizing: border-box;padding: 5px 0 5px 41px;height: 25px;box-shadow:0 3px 5px -3px rgba(0,0,0,0.3);">\n                        <span style="display: inline-block;width: 100%;">\n                        <span style="display: inline-block;width: 20%;text-align: center;">序号</span>\n                        <span style="display: inline-block;width: 37%;text-align: center;">账号</span>\n                        <span style="display: inline-block;width: 38%;text-align: center;">姓名</span>\n                        </span>\n                      </div>'}))).$mount(),a=e[t],n=a.parentNode,l=a.nextSibling;l?n.insertBefore(i.$el,l):n.appendChild(i.$el)}})},dialogClose:function(e){this.$emit("close-dialog",e||{})},assignFilterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},treeDepartments:function(){var e=this;this.dialogLoading=!0,Object(n.treeDepartments)({isdisable:"1"}).then(function(t){e.assignTree=[t.result.treeList],e.$nextTick(function(t){e.$refs.assignTree.setCurrentKey(e.assignTree[0].id)})}).catch(function(t){e.dialogLoading=!1})},assignFilterKey:function(e){var t=[];return e.forEach(function(e){t.push(e.id)}),t},assignTreeDataBridge:function(e){var t=this;this.transferData=[],this.transferSelectedData=[];var i={deptId:e.id,roleId:this.roleId},a={roleId:this.roleId};this.$axios.all([Object(l.listUsersByRole)(a),Object(l.listAllUsersByDeptId)(i)]).then(this.$axios.spread(function(e,i){var a=Object(s.v)(e.result.varList.concat(i.result.varList));a.forEach(function(e,t){e.index=t+1}),t.transferData=a,t.transferSelectedData=t.assignFilterKey(e.result.varList),t.$loading().close(),t.dialogLoading=!1})).catch(function(e){t.$loading().close(),t.dialogLoading=!1})},handleChange:function(e,t,i){},saveUsersByRole:function(){var e=this;Object(l.saveRoleUsers)({roleId:this.roleId,userIds:Object(s.n)(this.transferSelectedData)}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:1e3}),e.isVisible=!1,e.dialogClose({resState:"ok"})),e.$loading().close()}).catch(function(t){e.$loading().close()})},closeDialog:function(e){this.showDialog=!1}}},d=(i("uoYy"),i("KHd+")),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"850px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticClass:"dialogRoleUserStyle",staticStyle:{height:"500px"}},[i("el-col",{staticStyle:{position:"relative",height:"100%",overflow:"hidden"},attrs:{span:6}},[i("div",{staticStyle:{position:"absolute",top:"-10px",bottom:"-10px",left:"0",right:"5px","background-color":"#EBF0F6","box-shadow":"5px 0 10px -5px rgba(0,0,0,0.3)","box-sizing":"border-box",padding:"10px 0"}},[i("div",{staticClass:"leftTree",staticStyle:{height:"100%","padding-top":"10px"}},[i("el-input",{attrs:{placeholder:"",clearable:""},model:{value:e.assignFilterText,callback:function(t){e.assignFilterText=t},expression:"assignFilterText"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),i("div",{staticClass:"treeView",staticStyle:{height:"calc(100% - 85px)",overflow:"auto"}},[i("el-tree",{ref:"assignTree",attrs:{"highlight-current":"","default-expand-all":"","node-key":"id","expand-on-click-node":e.clickArrow,data:e.assignTree,props:e.defaultProps,"filter-node-method":e.assignFilterNode},on:{"node-click":e.assignTreeDataBridge},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,o=t.data;return i("span",{staticClass:"custom-tree-node"},[e.treeConfigs.showIcons?i("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":o.url}}):e._e(),e._v(" "),a.label?i("span",[e._v(e._s(a.label))]):i("span",[e._v(e._s(o.name))])],1)}}])})],1)],1)])]),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:18}},[i("div",{staticStyle:{height:"calc(100% - 60px)","box-sizing":"border-box",padding:"7px 0"}},[i("div",{staticStyle:{"text-align":"center"}},[i("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block"},attrs:{filterable:"",props:e.transferProps,"left-default-checked":[],"right-default-checked":[],"render-content":e.renderFunc,titles:["未分配用户","已分配用户"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:e.transferData},on:{change:e.handleChange},model:{value:e.transferSelectedData,callback:function(t){e.transferSelectedData=t},expression:"transferSelectedData"}})],1)]),e._v(" "),i("div",{staticStyle:{position:"relative",height:"60px","text-align":"center","box-sizing":"border-box",padding:"10px 0 0 0"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveUsersByRole}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)],1)},[],!1,null,null,null);u.options.__file="dialogRoleUser.vue";t.default=u.exports},oRzb:function(e,t,i){},oUXI:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("6Q2N");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{newStockCount:[{required:!0,message:"请填写库存数量",trigger:"change"},{type:"number",message:"库存数量必须为数字"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable),null!=this.initData.temp.stockCount&&(this.temp.newStockCount=this.initData.temp.stockCount)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.updateWarehouseProductBySimple)({warehouseId:e.temp.warehouseId,productId:e.temp.productId,oldStockCount:e.temp.stockCount,newStockCount:e.temp.newStockCount}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"620px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.warehouseCode+":",prop:"warehouseCode"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.warehouseCode,callback:function(t){e.$set(e.temp,"warehouseCode",t)},expression:"temp.warehouseCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.pathName+":",prop:"pathName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.pathName,callback:function(t){e.$set(e.temp,"pathName",t)},expression:"temp.pathName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productCode+":",prop:"productCode"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productCode,callback:function(t){e.$set(e.temp,"productCode",t)},expression:"temp.productCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productName+":",prop:"productName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productName,callback:function(t){e.$set(e.temp,"productName",t)},expression:"temp.productName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productSpec+":",prop:"productSpec"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productSpec,callback:function(t){e.$set(e.temp,"productSpec",t)},expression:"temp.productSpec"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productGenreName+":",prop:"productGenreName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productGenreName,callback:function(t){e.$set(e.temp,"productGenreName",t)},expression:"temp.productGenreName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productUnitName+":",prop:"productUnitName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productUnitName,callback:function(t){e.$set(e.temp,"productUnitName",t)},expression:"temp.productUnitName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.stockCount+":",prop:"newStockCount"}},[i("el-input",{model:{value:e.temp.newStockCount,callback:function(t){e.$set(e.temp,"newStockCount",e._n(t))},expression:"temp.newStockCount"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},odo6:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("V/0Z");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-add",props:["initData","visible"],components:{},data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{deptName:!0},tempShow:{deptName:!0},rules:{name:[{required:!0,message:"请填写BOM名称",trigger:"change"}],prodName:[(e={required:!0,trigger:"change",message:"请选择货品"},t="trigger",i="change",t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e)]},optionData:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择货品",treeUrl:"/system/dictionary/treeDictionarys",treeParm:{dictionaryKey:"productGenre"},tableUrl:"/base/product/listPageProducts",tableParm:{},temp:{}},dialogName:"dialogTreeOption"}}};var e,t,i},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.temp.isdefault="1",this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},optionSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.prodId=e[0].id,this.temp.prodName=e[0].name)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addBom)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"500px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"400px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:e.tempLable.name+":",prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.prodName+":",prop:"prodName"}},[i("base-input-option",{attrs:{dialog:e.optionData.dialog},on:{callback:e.optionSelect},model:{value:e.temp.prodName,callback:function(t){e.$set(e.temp,"prodName",t)},expression:"temp.prodName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.isdefault+":",prop:"isdefault"}},[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.temp.isdefault,callback:function(t){e.$set(e.temp,"isdefault",t)},expression:"temp.isdefault"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.remark+":",prop:"remark"}},[i("el-input",{model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},oeZg:function(e,t,i){},ohqc:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("uTIz"),o=i("2+ib"),n=i("Oa/l");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{searchBar:a.a,multilevelTable:o.a,dialogRepairTaskDetailInfo:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{repairId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{equipmentId:"",rowData:{}},dataList:[],tableConfigList:[{customColumn:[{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"货品详情",nameEn:"repairTaskDetailInfo",editBtns_isShow:!0,method:this.repairTaskDetailInfo}]}],apiObj:{apiName:"listPageEquipmentRepairTask",params:{repairId:"",fieldCode:"repairUserName,faultDescribe,timeLengthStr,beginTimeStr,endTimeStr,taskResultName",orderStr:"task.cdate asc"}},tempData:{},showHeader:!0,showIndex:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable"}]}},created:function(){this.repairId=this.initData.repairId,this.tableConfigList[0].apiObj.params.repairId=this.repairId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.dataList=e},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.updateData(this.searchObj)},closeDialogPage:function(){this.isVisible=!1,this.dialogClose()},repairTaskDetailInfo:function(e){var t=.6*document.body.clientWidth;this.dialogData.dialog_width=t+"px";var i=.75*(.618*t)+"px";this.dialogData.table_style="height:"+i+";width: 96%;margin-left: 2%;",this.dialogData.taskId=e.id,this.openDialogName="dialogRepairTaskDetailInfo",this.dialogData.title="货品详情",this.showDialog=!0,this.inLinVisible=!0}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("el-row",{style:e.initData.table_style},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_equipment_equipmentRepair_repairTask_dialogRepairTask0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeDialogPage}},[e._v("关闭")])],1),e._v(" "),e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e()],1)},[],!1,null,null,null);c.options.__file="dialogRepairTask.vue";t.default=c.exports},ot7r:function(e,t,i){"use strict";i.r(t);i("91GP");var a=i("varj"),o=i("uTIz"),n=i("BUpD"),l={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"保存",isShow:!0,state:!0,method:this.save},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageFinanceBases",params:{fieldCode:"customerCode,customerName,beginPlus,beginMinus,remark",customerGenre:"customer"}},customColumn:[],tempData:{},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"beginPlus",width:200,componentName:"input",_cellConfig:{compute:"self@beginMinus(*)0",editable:!0,rules:[{required:!0},{greaterThan:["0",!1]}],message:["必填","必须大于零！"]}},{columnIndex:"beginMinus",width:200,componentName:"input",_cellConfig:{compute:"self@beginPlus(*)0",editable:!0,rules:[{required:!0},{greaterThan:["0",!1]}],message:["必填","必须大于零！"]}},{columnIndex:"remark",width:200,componentName:"input",_cellConfig:{}}],tempData:{},showIndex:!1,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:["remark"],tableSelectList:[]}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{tableSelectList:this.tableSelectList})},closeDialog:function(e){this.showDialog=!1},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},tableSelected:function(e){this.tableSelectList=e},save:function(){var e=this;this.$refs.trabsferTables.getTableSelected(),null!=this.tableSelectList&&0!=this.tableSelectList.length?(this.temp.dtlJsonStr=JSON.stringify(this.tableSelectList),this.dialogLoading=!0,Object(n.batchAddFinanceBase)(this.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},confrim:function(){this.$refs.trabsferTables.getTableSelected()},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{height:"100%"},attrs:{span:24}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"客户编码："}},[i("el-input",{attrs:{placeholder:"客户编码"},model:{value:e.tempQuery.customerCode,callback:function(t){e.$set(e.tempQuery,"customerCode",t)},expression:"tempQuery.customerCode"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"客户名称："}},[i("el-input",{attrs:{placeholder:"客户名称"},model:{value:e.tempQuery.customerName,callback:function(t){e.$set(e.tempQuery,"customerName",t)},expression:"tempQuery.customerName"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{callmethod:e.callMethod,"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogBatchAdd.vue";t.default=r.exports},otD4:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d"),i("91GP");var a=i("uTIz"),o=i("varj"),n=i("K3g7"),l=i("Qbmm");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customTransferTable:o.a,searchBar:a.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},resState:"",dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.toDialogAdd},{name:"取消",state:!1,method:this.closeWin,isShow:!0}],stateBtnData:{title:"显示全部(台账数量)",keyName:"isAllStockCount"},aboveTableConfig:{apiObj:{apiName:"findWarehouseInitialBySimple",params:{fieldCode:"warehouseName,productCode,productName,productSpec,productGenreName,productUnitName,checkStockCount",warehouseNodeId:"",isNeedEntity:"true",isNotNeedSpare:"true"}},customColumn:[],tempData:{count:100,defaultDate:"2019-01-21"},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[],tempData:{count:100,defaultDate:"2019-01-21"},showIndex:!0,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:["remark"],tableSelectList:[],tempList:[]}},created:function(){this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{tableHeight:function(){},dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){this.showDialog=!1},tableSelected:function(e){this.tempList=e},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},initTree:function(){var e,t=this;this.dialogLoading=!0,Object(n.treeWarehouse)((e={id:"2d75e49bcb9911e884ad00163e105f05",isNeedEntity:"true"},s(e,"isNeedEntity","true"),s(e,"isNotNeedSpare","true"),e)).then(function(e){t.loadTree(e)}).catch(function(e){t.dialogLoading=!1})},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name},t.push(i),this.treeData=t,this.dialogLoading=!1},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery,{warehouseNodeId:this.selectTree.id})},toDialogAdd:function(){var e=this;this.$refs.trabsferTables.getTableSelected();var t=[];if(null!=this.tempList&&this.tempList.length>0)for(var i=0;i<this.tempList.length;i++){var a=this.tempList[i],o={warehouseId:a.warehouseId,productId:a.productId,checkStockCount:a.checkStockCount};t.push(o)}var n="";t.length>0&&(n=JSON.stringify(t)),Object(l.addWarehouseCheckBySimple)({dtlJsonStr:n}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-row",[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.productCode,callback:function(t){e.$set(e.tempQuery,"productCode",t)},expression:"tempQuery.productCode"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.productName,callback:function(t){e.$set(e.tempQuery,"productName",t)},expression:"tempQuery.productName"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.productSpec,callback:function(t){e.$set(e.tempQuery,"productSpec",t)},expression:"tempQuery.productSpec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1)],1),e._v(" "),i("el-row",[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);u.options.__file="selectProductByWarehouse.vue";t.default=u.exports},oyVo:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("We3Z");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{initialPeriodDate:null,paymentPeriodDate:null,rules:{},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.initData.rowData&&(this.formData=this.initData.rowData,this.initialPeriodDate=new Date(this.initData.rowData.initialPeriodDate),null!=this.initData.rowData.paymentPeriodDate&&(this.paymentPeriodDate=new Date(this.initData.rowData.paymentPeriodDate)))},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){e.dialogLoading=!0,Object(a.rebackFinanceBill)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"设定成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})})},closeDialog:function(e){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogReback.vue";t.default=s.exports},p1zC:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("K3g7");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{DynaForm:i("NaOS").a},name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},isShowDept:!1,isShowCust:!1,rules:{name:[{required:!0,message:"请填写仓库名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,DepartmentDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择部门",treeUrl:"/system/department/treeDepartments",treeParm:{},tableUrl:"/system/department/listPageDepartments",tableParm:{isdisable:"1",fieldCode:"code,name,deptTypeName,layer,parentName,remark"},temp:{}},dialogName:"dialogTreeOption"}},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择客户",treeUrl:"/system/dictionary/treeDictionarys",treeParm:{dictionaryKey:"customerSupplierGenre"},tableUrl:"/base/customer/listPageCustomers",tableParm:{},temp:{}},dialogName:"dialogTreeOption"}},formTemp:[]}},created:function(){this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{changeVirtualGenre:function(){"1"==this.temp.virtualGenre?(this.isShowDept=!0,this.isShowCust=!1):"2"==this.temp.virtualGenre&&(this.isShowCust=!0,this.isShowDept=!1)},departmentSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualDeptId=e[0].id,this.temp.virtualDeptName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},customerSelect:function(e){this.temp=JSON.parse(JSON.stringify(this.temp)),e[0]&&(this.temp.virtualCustomerId=e[0].id,this.temp.virtualCustomerName=e[0].name,this.temp.virtualDepartmentName=e[0].name,this.temp.name=e[0].name)},dialogOpen:function(){var e=this;this.temp.virtualGenre="1",this.isShowDept=!0,this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addWarehouseByVirtual)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:e.tempLable.virtualGenreName+":",prop:"virtualGenreName"}},[i("el-select",{attrs:{placeholder:e.tempLable.virtualGenreName},on:{change:e.changeVirtualGenre},model:{value:e.temp.virtualGenre,callback:function(t){e.$set(e.temp,"virtualGenre",t)},expression:"temp.virtualGenre"}},[i("el-option",{attrs:{label:"内部单位",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"外部单位",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowDept,expression:"isShowDept"}],attrs:{label:"部门名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DepartmentDialog.dialog},on:{callback:e.departmentSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowCust,expression:"isShowCust"}],attrs:{label:"客户名称:"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.virtualDepartmentName,callback:function(t){e.$set(e.temp,"virtualDepartmentName",t)},expression:"temp.virtualDepartmentName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"仓库名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="warehouseVirtualAdd.vue";t.default=s.exports},pFWq:function(e,t,i){},pK8k:function(e,t,i){"use strict";var a=i("pFWq");i.n(a).a},pZdt:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("xEMq");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{title:[{required:!0,message:"请填写标题",trigger:"change"}],content:[{required:!0,message:"请填写内容",trigger:"change"}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.initData.rowData&&(this.formData=this.initData.rowData)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addMessage)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px","padding-top":"10px"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"标题:",prop:"title"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"内容:",prop:"content"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},pb7s:function(e,t,i){"use strict";var a=i("fQ6i");i.n(a).a},pgc3:function(e,t,i){},px1p:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={name:"dialog-search-demo",props:["initData","visible"],components:{searchBar:i("uTIz").a},data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},rules:{},searchList:[{label:"货品编码1",type:"input",mapKey:"goodsCode",configs:{},placeholder:"请输入编码"},{label:"盘点日期",type:"date",ruleType:"date",mapKey:"date",configs:{clearable:!0,name:"",type:"date",pickerOptions:{disabledDate:["2018-09-15","2018-09-20"]}},placeholder:"请选择"},{label:"盘点时间",type:"time",mapKey:"time",configs:{clearable:!0,name:"",pickerOptions:{}},placeholder:"选择时间"}]}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=a(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){this.isVisible=!1},searchMap:function(e){}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap}}),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);l.options.__file="dialogSearchDemo.vue";t.default=l.exports},pxyt:function(e,t,i){},q0T2:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("rGqo");var a=i("DuN6"),o=i("we3T"),n=i("zF5t"),l=i("oC0i"),s=i("z0WU"),r=i("mSNy");function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n    \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n    \t\t\t\t\t\t\t<el-button v-show="colConfig.deleteRow_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteRow(scope.row,scope.$index)">删除</el-button>\n    \t\t\t\t\t</div>\n\n  \t\t\t\t</el-table-column>'},p={components:{dialogRoleUser:l.default},name:"dialog-add",props:["initData","visible"],data:function(){return{roleId:"",roleName:"",type:"",userData:[],userId:[],isSingle:!0,rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",temp:{},tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],selectList:null,tableIndex:null,initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:u,deleteRow:this.deleteRow,deleteRow_isShow:!0}},configs:{tableConfigs:[],showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1,selectDataUser:{data:{selectUrl:"/system/role/findListUserByRole",selectParm:{queryStr:"role.id = '"+this.initData.temp.roleId+"'",userIsdisable:"1"}},defaultSelected:[]}}},created:function(){this.tableIndex=null,this.roleId=this.initData.temp.roleId,this.roleName=this.initData.temp.roleName,this.type=this.initData.temp.type,this.initUserData(),this.initTable()},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=d(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{userSelect:function(e,t){e[0]?(this.selectDataUser.defaultSelected=[e[0]],this.userId=[e[0]]):(this.selectDataUser.defaultSelected=[],this.userId=[])},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(s.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==r.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==r.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==r.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==r.a.locale&&(e.label=t.substring(0,t.indexOf("_"))))}),this.internationalConfig(),e.push(this.initConfigs.tableOperates),e},internationalConfig:function(){"en"==r.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==r.a.locale&&(this.initConfigs.tableOperates.label="操作")},initTable:function(){var e=this,t="",i=this.initData.temp;null!=i&&i.length>0&&i.forEach(function(e){null!=e.id&&e.id.trim().length>0&&(t=0==t.length?"'"+e.id.trim()+"'":t+",'"+e.id.trim()+"'")});var o="";null!=t&&t.trim().length>0&&(o="detail.id in ("+t+")"),this.dialogLoading=!0,Object(a.listPageWarehouseCheckDetails)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){c(e,t,i[t])})}return e}({},this.tempQuery,{state:"0",queryStr:o,fieldCode:"pathName,productCode,productName,productSpec,productGenreName,productUnitName,code,stockCount",pageNo:this.pageNo})).then(function(t){e.getListPage(t),e.dialogLoading=!1}).catch(function(t){e.dialogLoading=!1})},initUserData:function(){var e=this;this.userData=[],Object(n.findListUserByRole)({userIsdisable:"1",queryStr:"role.id = '"+this.roleId+"'"}).then(function(t){var i=t.result.options;null!=i&&i.length>0&&i.forEach(function(t){var i=t.id,a=t.userName;null!=i&&i.trim().length>0&&null!=a&&a.trim().length>0&&e.userData.push({key:i,label:a,disabled:!1})})}).catch(function(e){})},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},leftCheckChange:function(e){this.isSingle&&this.singleUserData(e)},singleUserData:function(e){var t=this.userData;if(null!=t&&0!=t.length)if(0==e.length)t.forEach(function(e){e.disabled=!1});else if(e.length>0){var i="";e.forEach(function(e){i=i+e+","}),t.forEach(function(e){var t=e.key;-1==i.indexOf(t)&&(e.disabled=!0)})}},addAdmin:function(){var e=this.roleId,t=this.roleName;this.dialogData.temp.roleId=e,this.dialogData.title=t+"-分配用户",this.openDialogName="dialogRoleUser",this.showDialog=!0,this.inLinVisible=!0},saveDispatch:function(){var e=this,t=this.roleId,i=this.roleName;this.type;if(null!=t&&0!=t){if(null==this.userData||0==this.userData.length)return this.dialogData.temp.roleId=t,this.dialogData.title=i+"-分配用户",this.openDialogName="dialogRoleUser",this.showDialog=!0,void(this.inLinVisible=!0);if(null!=this.userId&&0!=this.userId.length){var a=this.tableData,n="";if(null!=a&&0!=a.length){for(var l=[],s=0;s<a.length;s++){var r=a[s],c={id:"",parentId:"",taskName:""};c.id=r.id,c.parentId=r.parentId,c.taskName=r.parentCode+"_"+r.productName,l.push(c)}if(n=JSON.stringify(l),this.temp.dtlJsonStr=n,this.isSingle&&this.userId.length>1)this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择一位执行人，执行人只允许单选！"});else{this.temp.executeId="";for(var d=0;d<this.userId.length;d++){var u=this.userId[d];null!=u&&u.trim().length>0&&(this.temp.executeId=this.temp.executeId+u+",")}Object(o.addWarehouseCheckExecutor)(this.temp).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一行数据！"})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择执行人！"})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"仓库管理员角色ID为空或空字符串！"})},deleteRow:function(e,t){},closeDialog:function(e){}},watch:{pageNo:function(){this.initTable()}}},m=i("KHd+"),h=Object(m.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"300px","margin-left":"2%"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择执行人",disabled:!1,data:e.selectDataUser.data},on:{callback:e.userSelect},model:{value:e.selectDataUser.defaultSelected,callback:function(t){e.$set(e.selectDataUser,"defaultSelected",t)},expression:"selectDataUser.defaultSelected"}}),e._v(" "),i("span",{staticStyle:{"font-size":"12px",color:"#1482f0",cursor:"pointer"},on:{click:e.addAdmin}},[e._v("+添加仓库管理员")])],1),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-top":"10px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveDispatch}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);h.options.__file="dialogDispatch.vue";t.default=h.exports},q7oa:function(e,t,i){"use strict";var a=i("9keN");i.n(a).a},qAfM:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg"),i("rGqo");var a=i("7cmB"),o=i("vleD"),n=i("oC0i"),l=(i("zF5t"),i("wW0j"));i("z0WU");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{treeFormTable:a.a,dialogOption:o.default,dialogRoleUser:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rootData:{},tableSets:{1:{showCheckBox:!1,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},currentpage:1,customColumn:{},editable:{suggestCount:{type:"input"}},apiObj:{apiName:"listPageWarehouseMoveDetailsExecute",params:{}},addedData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"选择员工",data:null,temp:{},tempLable:null,isSingle:!0,tableUrl:"/warehouse/warehouseProduct/listPageWarehouseProductsDispatchOption",tableParm:{}},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{}}},created:function(){var e="",t=this.initData.temp;null!=t&&t.length>0&&t.forEach(function(t){null!=t.id&&t.id.trim().length>0&&(e=0==e.length?"'"+t.id.trim()+"'":e+",'"+t.id.trim()+"'")});var i="";null!=e&&e.trim().length>0&&(i="detail.id in ("+e+")"),this.apiObj.params={queryStr:i,pageNo:1,fieldCode:"code,typeName,warehouseName,makeName,cdate,stateName"}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},addChild:function(e,t){this.dialogCallBackData=e,this.showDialog=!0,this.dialogVisible=!0},addChildRow:function(){this.dialogVisible=!1,this.showDialog=!1,this.addedData={rowData:this.testData,parentData:this.dialogCallBackData}},sendChildrenRow:function(e){},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){this.$refs.treeFormTable.getData()},formData:function(e){this.realSave(e)},realSave:function(e){var t=this;if(this.executeDataArray=[],null!=e.tableData&&0!=e.tableData.length){this.executeDataArray=this.findExecuteDataArray(e.tableData);var i=this.checkColumnExecuteArray(this.executeDataArray);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{var a="";e.tableData&&e.tableData.length>0&&(a=JSON.stringify(e.tableData)),Object(l.executeWarehouseMoveExecute)({jsonDataStr:a}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择移库明细信息！"})},findExecuteDataArray:function(e){var t=this;return null==e||0==e.length?this.executeDataArray:(e.forEach(function(e){var i=e.children;null!=i&&i.length>0&&i.forEach(function(e){var i={count:"",executeCount:"",suggestCount:""};i.count=e.count,i.executeCount=e.executeCount,i.suggestCount=e.suggestCount,t.executeDataArray.push(i)})}),this.executeDataArray)},checkColumnExecuteArray:function(e){var t="";null!=e&&0!=e.length||(t="无移库执行信息！");for(var i=0;i<e.length;i++){var a=e[i],o=a.count,n=a.executeCount,l=a.suggestCount;if(null==l||0==l.trim().length)t=t+"第 "+(i+1)+" 行: (待执行数量)为空或空字符串，(待执行数量)为必填项不可为空;";else new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(l)?n/1+l/1-o/1>0&&(t=t+"第 "+(i+1)+" 行: 待执行数量("+l+")输入错误，(已完成数量 + 待执行数量)不可大于移库数量;"):t=t+"第 "+(i+1)+" 行: 待执行数量("+l.trim()+")输入错误，请输入大于零的正整数或(1,2)位小数！"}return t},closeDialog:function(e,t){this.addedData={rowData:e[0],parentData:t},this.showDialog=!1}},watch:{pageNo:function(){}}},c=(i("zwN5"),i("KHd+")),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("tree-form-table",{ref:"treeFormTable",attrs:{"expand-all":!0,initData:e.rootData,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:e.editable,apiObj:e.apiObj,addedData:e.addedData},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,"send-children-row":e.sendChildrenRow,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogExecute.vue";t.default=d.exports},qBBH:function(e,t,i){},qBa6:function(e,t,i){"use strict";i.r(t);var a={components:{customBaseTable:i("WIyV").a},props:["initData","visible"],data:function(){return{signDtlId:"",rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPagePurchaseQualityDetail",params:{signDetailId:"",fieldCode:"qualityName,qualityCriterion,badCount",isNeedPage:"false",orderStr:"quality.cdate asc"}},customColumn:[],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.signDtlId=this.initData.signDtlId,this.apiObj.params.signDetailId=this.initData.signDtlId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size}},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"purchaseSignDtlQualityByInfo",attrs:{"data-custom-table-id":"views_quality_purchaseSignByQuality_purchaseSignDtlQualityByInfo0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!1,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"purchaseSignDtlQualityByInfo",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="purchaseSignDtlQualityByInfo.vue";t.default=n.exports},qEi0:function(e,t,i){},qIkH:function(e,t,i){"use strict";var a=i("bupS");i.n(a).a},qQoz:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("91GP");var a=i("lX1r"),o=i("uTIz"),n=i("KC3E"),l={components:{expandTable:a.a,searchBar:o.a,dialogAdd:n.default},props:["initData","visible"],data:function(){return{customerId:"",customerName:"",deliverDtlState:"1",searchList:[{label:"发货单编号",type:"input",ruleType:"string",mapKey:"deliverCode",configs:{},placeholder:"发货单编号"},{label:"货品名称",type:"input",ruleType:"string",mapKey:"productName",configs:{},placeholder:"货品名称"}],searchObj:{},guid:"",customColumn:{},tableSets:{1:{showCheckBox:!1,showIndex:!1,expandOne:!1},2:{showCheckBox:!0,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},initDataByTable:{},childrenData:{},currentpage:1,maxLayer:2,expandTableApiList:["listPageSaleDeliver","listPageSaleDeliverDetail"],expandTableApiParams:[{customerId:"",detailState:"",fieldCode:"",isCanRetreat:"true"},{isNeedRetreat:"true",parentId:"",state:"",fieldCode:""}],updateViewData:{},rowTableList:[],resState:"",openDialogName:"",dialogLoading:!0,isVisible:!1,inDialog:!0,showDialog:!1,inLinVisible:!1,dialogData:{customerId:"",customerName:"",deliverDtlIds:"",dialog_width:"",orderDetail_style:"",title:"",temp:null,tempLable:null}}},beforeCreate:function(){},created:function(){this.customerId=this.initData.customerId,this.customerName=this.initData.customerName,this.expandTableApiParams[0].isCanRetreat="true",this.expandTableApiParams[0].customerId=this.customerId,this.expandTableApiParams[0].detailState=this.deliverDtlState,this.expandTableApiParams[0].fieldCode="deliverCode,customerCode,customerName,customerTypeName,stateName,deliverDate",this.expandTableApiParams[1].state=this.deliverDtlState,this.expandTableApiParams[1].fieldCode="prodInfo,orderUnitName,nowDeliverCount,nowDeliverSum,remark",this.expandTableApiParams[1].addColumn={columnKey:"prodInfo",columnName:"货品"},this.expandTableApiParams[1].prodColumnKey="productCode,productName,productSpec,productProperty",this.initExpandTable()},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{setParams:function(e,t,i){var a=Object.assign({},this.expandTableApiParams[e-1]);for(var o in a)a.hasOwnProperty(o)&&!a[o]&&(a[o]=t[o]||"");return Object.assign({},a,this.searchObj,{pageNo:i})},initExpandTable:function(){var e=this;this.$api[this.expandTableApiList[0]](this.setParams(1,this.expandTableApiParams[0],this.currentpage)).then(function(t){e.initDataByTable={row:null,layer:1,res:t,customColumn:e.customColumn}}).catch(function(e){})},sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.initExpandTable()},tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0):0},databridge:function(e){this.rowTableList=e},findChildByRow:function(e,t,i,a,o){var n=this;this.$api[this.expandTableApiList[t-1]](this.setParams(t,e,o)).then(function(i){n.childrenData={row:e,layer:t,res:i,customColumn:n.customColumn}}).catch(function(e){})},save:function(){var e="";if(null!=this.rowTableList&&0!=this.rowTableList.length||(e="请选择一行数据！"),e.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:e});else{var t="";this.rowTableList.forEach(function(e){null!=e.id&&e.id.trim().length>0&&(t=t+e.id.trim()+",")}),this.dialogData.deliverDtlIds=t,this.dialogData.customerId=this.customerId,this.dialogData.customerName=this.customerName,this.dialogData.title="退货列表",this.openDialogName="dialogAdd",this.showDialog=!0,this.inLinVisible=!0}},dialogOpen:function(){},dialogClose:function(e){this.customerId="",(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{staticStyle:{border:"1px solid #E4E4E4","border-bottom":"none"},style:e.initData.orderDetail_style},[i("expand-table",{attrs:{initData:e.initDataByTable,childrenData:e.childrenData,configs:e.tableSets,currentpage:e.currentpage,maxLayer:e.maxLayer,apiObj:{apiName:e.expandTableApiList,apiParams:e.expandTableApiParams},updateViewData:e.updateViewData},on:{"update:currentpage":function(t){e.currentpage=t},databridge:e.databridge,"send-children-row":e.findChildByRow}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogDeliver.vue";t.default=r.exports},qcDQ:function(e,t,i){},qdxk:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("+h8N"),n=i("vzyZ"),l=i("QD6Y"),s=i("cTe8");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,selectProductByPurchasePlan:o.default,selectOrderByPurchasePlan:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{reasonId:"372b0432c06e4792b00b03b8fb5be190",reason:"常规补货",rules:{makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{remark:"",makeId:"",makeName:"",dtlJsonStr:"",isAutoCommit:""},tempLable:{},tempQuery:{},tableData:[],tableList:[],configs:{topBarBtnList:[{name:"货品新增",nameEn:"addPlanByProduct",isShow:!0,method:this.addPlanByProduct},{name:"订单新增",nameEn:"addPlanByOrder",isShow:!0,method:this.addPlanByOrder},{name:"产品合并",nameEn:"mergeProduct",isShow:!0,method:this.mergeProduct}]},apiObj:{apiName:"getLackProductNew",params:{fieldCode:"prodInfo,unitName,count,reason,edate,remark,orderCode",prodColumnKey:"productCode,productName,spec,productProperty",dtlJsonStr:this.initData.temp,parentId:"null"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"reason",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"getDictionarys",params:{dictionaryKey:"purchaseReason",isglobal:"1"}},rules:[{required:!0}],outputData:!0}},{columnIndex:"edate",width:"150",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",greaterThan:["tempData@minDate",!0]}},{columnIndex:"remark",width:"110",componentName:"input",_cellConfig:{}},{columnIndex:"orderCode",width:"110",_cellConfig:{hideTitle:!0}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{minDate:new Date},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.apiObj.params.parentId="null"},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.planAddDialog.getData()},databridge:function(e){Array.isArray(e)&&(this.tableList=[],this.tableList=e)},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},addPlanByProduct:function(){this.dialogData.title="选择货品",this.openDialogName="selectProductByPurchasePlan",this.showDialog=!0,this.inLinVisible=!0},addPlanByOrder:function(){this.dialogData.title="选择销售订单",this.openDialogName="selectOrderByPurchasePlan",this.showDialog=!0,this.inLinVisible=!0},mergeProduct:function(){var e=this;this.getData();var t=[];if(this.tableList.length>0)for(var i=0;i<this.tableList.length;i++){var a=this.tableList[i];a.reason="",t.push(a)}var o="";null!=t&&t.length>0&&(o=JSON.stringify(t)),Object(l.mergeProductByPurchasePlanDetail)({dtlJsonStr:o}).then(function(t){if(null!=t.mergeProductList&&(e.tableList.length>0&&e.tableList.splice(0,e.tableList.length),null!=t.mergeProductList&&t.mergeProductList.length>0))for(var i=0;i<t.mergeProductList.length;i++){var a=t.mergeProductList[i],o={id:a.id,count:a.count,orderCode:a.orderCode,jsonStr:a.jsonStr,productId:a.productId,productCode:a.productCode,productName:a.productName,productSpec:a.productSpec,productProperty:a.productProperty,prodInfo:a.prodInfo,unitId:a.unitId,unitName:a.unitName};e.tableData.push(o)}}).catch(function(e){})},save:function(){var e=this;this.tableList=[],this.$refs.planAddDialog.getData(),setTimeout(function(){e.savePlan()},1e3)},savePlan:function(){var e=this,t="";if(null!=this.tableList&&0!=this.tableList.length){for(var i=[],a=0;a<this.tableList.length;a++){var o=this.tableList[a],n="";n=o.reason.item?o.reason.item.id:o.reasonId;var l={orderDtlId:o.orderDtlId,count:o.count,reason:n,edate:o.edate,remark:o.remark,productId:o.productId,unitId:o.unitId,jsonStr:o.jsonStr};i.push(l)}t=JSON.stringify(i),this.temp.dtlJsonStr=t,this.$refs.submitForm.validate(function(t){t&&e.$confirm("添加计划后，是否将该计划提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.temp.isAutoCommit="true",Object(s.addPurchasePlan)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.temp.isAutoCommit="false",Object(s.addPurchasePlan)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})})}},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"selectProductByPurchasePlan"==e.pageName){var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByProduct(t)}else if(null!=e&&"selectOrderByPurchasePlan"==e.pageName){var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelectedBySaleOrder(i)}},tableSelectedByProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={id:"",productId:"",productCode:"",productName:"",spec:"",productProperty:"",unitId:"",unitName:"",reasonId:"",reason:""};a.productId=i.id.trim(),null!=i.code&&i.code.trim().length>0&&(a.productCode=i.code.trim()),null!=i.name&&i.name.trim().length>0&&(a.productName=i.name.trim()),null!=i.spec&&i.spec.trim().length>0&&(a.spec=i.spec.trim()),null!=i.property&&i.property.trim().length>0&&(a.productProperty=i.property.trim()),null!=i.prodInfo&&i.prodInfo.trim().length>0&&(a.prodInfo=i.prodInfo.trim()),null!=i.count&&i.count.trim().length>0&&(a.count=i.count.trim()),a.unitId=i.unit,a.unitName=i.unitName,a.reasonId=this.reasonId,a.reason=this.reason,a.id=i.id.trim()||t,this.tableData.push(a)}},tableSelectedBySaleOrder:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a="0.00";null!=i&&null!=i.purchasePlanCount&&i.purchasePlanCount.trim().length>0&&(a=i.purchasePlanCount.trim());var o={id:i.id,count:a,orderDtlId:i.orderDtlId,orderCode:i.sysCode,productId:i.productId,productCode:i.productCode,productName:i.productName,spec:i.productSpec,productProperty:i.productProperty,prodInfo:i.prodInfo,unitId:i.prodUnitId,unitName:i.prodUnitName,reasonId:this.reasonId,reason:this.reason};this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"planAddDialog",attrs:{"data-custom-table-id":"views_purchase_bundleAnalysis_dialogAddPlan0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"planAddDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogAddPlan.vue";t.default=u.exports},qzdK:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("hdRB");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{equipmentName:[{required:!0,trigger:"change",message:"请选择设备"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{companyId:"",equipmentId:"",equipmentCode:"",equipmentName:"",faultDescribe:""},EquipmentDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择设备",tableUrl:"/equipment/equipmentSensor/findAllEquipmentBySensor",tableParm:{fieldCode:"code,name,spec,typeName,deptName"},temp:{}},dialogName:"dialogOption"}}}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},equipmentSelect:function(e){e[0]&&(this.formData.equipmentId=e[0].id,this.formData.equipmentCode=e[0].code,this.formData.equipmentName=e[0].name)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.formData.companyId=e.$storage.get("userInfo").companyId,e.dialogLoading=!0,Object(a.addEquipmentRepair)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){}))})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"设备:",prop:"equipmentName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.EquipmentDialog.dialog},on:{callback:e.equipmentSelect},model:{value:e.formData.equipmentName,callback:function(t){e.$set(e.formData,"equipmentName",t)},expression:"formData.equipmentName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"故障描述:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.faultDescribe,callback:function(t){e.$set(e.formData,"faultDescribe",t)},expression:"formData.faultDescribe"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},qznp:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("EDKZ");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择入库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:"",deleteIds:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark",parentId:"",type:"edit"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1",notInids:"'def4b13175dc44b08d7a0315b811700e'"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.$refs.orderAddDialog.getData(),this.dialogData.data=this.orderDtlList,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={id:l.id,productId:l.productId,remark:l.remark,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.updateWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]),this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"5"},-1!="d78ceba5beef41f5be16f0ceee775399,064dda15d44d4f8fa6330c5c7e46300e".indexOf(type)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}):-1!="81907167d5c8498692e6c4f3694c5cfa,d1c6dc9aa3b045dbabff2d5e1e253c22".indexOf(type)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouseByWC_inByWC_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogEdit.vue";t.default=c.exports},"r+Qd":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo"),i("yt8O"),i("XfO3"),i("9AAn");var a=i("AV4t");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{purchaseQualityType:new Map([["1","全检"],["2","抽检"]]),rules:{purchaseQualityType:[{required:!0,trigger:"change",message:"请选择质验方式"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{productIds:"",purchaseQualityType:"",business:""}}},created:function(){this.formData.productIds=this.initData.productIds},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&e.$confirm("保存后将勾选货品质验方式变更为("+e.purchaseQualityType.get(e.formData.purchaseQualityType)+")，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.dialogLoading=!0,e.formData.business="purchase",Object(a.updateProductQuality)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(){e.$message({type:"info",message:"已取消保存"})})})}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{margin:"10px auto",width:"100%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"质验方式:",prop:"purchaseQualityType"}},[i("el-select",{model:{value:e.formData.purchaseQualityType,callback:function(t){e.$set(e.formData,"purchaseQualityType",t)},expression:"formData.purchaseQualityType"}},[i("el-option",{attrs:{label:"全检",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"抽检",value:"2"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="editProductQuality.vue";t.default=s.exports},"r/Cm":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("Pf6k");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){var e=this;return{orderId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{receiptAmount:[{required:!0,message:"请填写收票金额！",trigger:"blur"},{type:"number",trigger:["blur","change"],validator:function(t,i,a){i>e.temp.amount?a(new Error("输入的收票金额不能大于采购金额！")):i<=0?a(new Error("输入的收票金额必须大于零！")):a()}}]}}},created:function(){this.temp=this.initData.temp,this.orderId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addPurchaseReceipt)({purchaseId:e.initData.temp.id,amount:e.temp.receiptAmount}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"采购金额:",prop:"amount"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{disabled:!0},model:{value:e.temp.amount,callback:function(t){e.$set(e.temp,"amount",t)},expression:"temp.amount"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"收票金额:",prop:"receiptAmount"}},[i("el-input",{staticStyle:{width:"240px"},model:{value:e.temp.receiptAmount,callback:function(t){e.$set(e.temp,"receiptAmount",e._n(t))},expression:"temp.receiptAmount"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAddReceipt.vue";t.default=s.exports},"r/yE":function(e,t,i){"use strict";i.r(t);i("f3/d"),i("z0WU");var a={name:"dialog-import-excel",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"文件导入",importUrl:"",exportUrl:"",userInfo:null,excelFileList:[],excelData:{},fieldCode:"warehouseCode,pathName,productCode,productName,productSpec,productGenreName,productUnitName,stockCount"}},components:{},beforeCreate:function(){},created:function(){this.initData.title&&(this.title=this.initData.title),this.importUrl="/api/"+this.initData.importUrl,this.exportUrl="/api/"+this.initData.exportUrl,this.initData.excelData&&(this.excelData=this.initData.excelData),this.$storage.get("userInfo")&&(this.excelData.companyId=this.$storage.get("userInfo").companyId,this.excelData.userId=this.$storage.get("userInfo").userId,this.excelData.warehouseGenre="spare")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(e){this.$emit("close-dialog",e||{})},importExcelChangeFile:function(e,t){this.excelFileList=[t[t.length-1]]},importExcelBeforeUpload:function(e){null!=this.excelFileList&&this.excelFileList.length>1&&this.$message({showClose:!0,message:"只能选择一个导入文件，请删除多余的导入列表！",type:"warning",duration:5e3});var t=e.name,i="";-1!=t.indexOf(".")&&(i=t.substr(t.indexOf(".")+1,t.length)),-1!="xls,xlsx".indexOf(i)?e.size>10485760&&this.$message({showClose:!0,message:"Excel导入文件大小不能超过 5MB!",type:"error",duration:5e3}):this.$message({showClose:!0,message:"Excel导入文件只能支持(xls,xlsx)格式!",type:"error",duration:5e3})},importExcelSuccess:function(e){this.dialogTopLoading=!1;var t="";null!=e.msg&&e.msg.trim().length>0&&(t=e.msg.trim()),0==e.code?(this.isVisible=!1,this.$message({showClose:!0,message:t,type:"success",duration:5e3}),this.dialogClose({resState:"ok"})):0!=e.code&&this.$message({showClose:!0,message:t,type:"error",duration:0}),this.$refs.upload.clearFiles()},importExcelSubmit:function(){null==this.excelFileList||0!=this.excelFileList.length?(this.dialogTopLoading=!0,this.$refs.upload.submit()):this.$message({showClose:!0,message:"请选择导入文件！",type:"warning",duration:5e3})}},computed:{},watch:{}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,width:"500px",top:"40px","append-to-body":""},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}],staticStyle:{"text-align":"left","padding-left":"50px","padding-top":"20px","line-height":"20px"}},[i("span",{staticStyle:{"font-size":"16px","padding-bottom":"5px"}},[e._v("操作步骤：")]),i("br"),e._v("\n    1."),i("a",{staticStyle:{color:"#169BD5"},attrs:{href:e.exportUrl}},[e._v("点击此处下载模板")]),i("br"),e._v("\n    2.按示例填写需要导入的数据信息"),i("br"),e._v("\n    3.请将Excel模板中示例信息删除"),i("br"),e._v("\n    4.上传过程中不要多次提交或刷新页面"),i("br"),e._v("\n    5.Excel导入文件只能支持(xls,xlsx)格式，且文件大小不能超过10M"),i("br"),i("br"),e._v(" "),i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"excelFile",action:e.importUrl,"on-change":e.importExcelChangeFile,"before-upload":e.importExcelBeforeUpload,"on-success":e.importExcelSuccess,data:e.excelData,"file-list":e.excelFileList,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"success"},on:{click:e.importExcelSubmit}},[e._v("导入")])],1),e._v(" "),i("br"),i("br")],1)])},[],!1,null,null,null);n.options.__file="dialogImportExcel.vue";t.default=n.exports},rAaN:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("sanI"),l=i("EDKZ");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddCustomer:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,isNeedRepeat:!1,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{pageNo:1,type:"add",fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"3"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="销售退货入库",this.temp.type="81907167d5c8498692e6c4f3694c5cfa",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={productId:n.productId,remark:n.remark,p2nFormula:n.p2nFormula,priceUnit:n.priceUnit,priceCount:n.priceCount,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.addWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:"",count:"",remark:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{pageNo:function(){this.initTable("add","")}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px",width:"100%"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_sale_saleIn_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogAdd.vue";t.default=d.exports},rIO6:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("ddId");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{orderId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){this.orderId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){e.dialogLoading=!0;var i=e.$storage.get("userInfo").userName;Object(a.auditDisagreeSaleOrder)({orderId:e.orderId,remark:e.temp.remark,userName:i}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogRebackBill.vue";t.default=s.exports},rPLT:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("yt8O"),i("RW0V"),i("rGqo");var a=i("uTIz"),o=i("iF/k"),n=i("bYfd"),l=i("t2Xm"),s=i("mSNy"),r=i("QmdA"),c=i("Vobf"),d=i("z0WU");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){m(e,t,i[t])})}return e}function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.editBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.editBtns(scope.row,scope.$index)">编辑</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},g={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdefault" @change="colConfig.changeState(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},f={name:"dialog-add",props:["initData","visible"],data:function(){return{customerId:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{width:400,title:"",temp:null,tempLable:null},isVisible:!1,inDialog:!0,guid:"",searchList:[{label:"编码",type:"input",mapKey:"code",configs:{},placeholder:"请输入编码"},{label:"名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"请输入货物名"}],searchConfig:{hideSearchSwitch:!1},initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:h,editBtns:this.editBtns,editBtns_isShow:!0}},configs:{topBarBtnList:[{name:"新增",nameEn:"add",isShow:!0,icon:"add",method:this.addNew},{name:"删除",nameEn:"delete",isShow:!0,icon:"delete",plain:!0,state:!0,method:this.deleteBatch}],tableConfigs:[],showCheckBox:!1,showIndex:!1},tableData:[],selectList:null,temp:{},tempQuery:{},tempLable:{},pageData:null,pageNo:1}},components:{searchBar:a.a,tableButton:o.a,invoiceAdd:n.default,invoiceEdit:l.default},beforeCreate:function(){},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable),this.initButtons(),this.customerId=this.temp.id,this.initTable(this.customerId,!0)},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{sendGuid:function(e){this.guid=e},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.refreshTable(this.customerId)},initButtons:function(){var e=this,t=e.$storage.get("userInfo").roleIds,i=e.$storage.get("menuId");t&&(e.$loading({spinner:"preloader",text:""}),Object(c.initMenuButtons)({menuId:i,roleId:t}).then(function(t){var i=t.buttonList;i&&i.forEach(function(t){if(e.initConfigs&&e.initConfigs.tableOperates)for(var i in e.initConfigs.tableOperates)i.indexOf(t.nameEn)>=0&&i.indexOf("isShow")>0&&(e.initConfigs.tableOperates[i]=!1);if(e.customColumn)for(var a in e.customColumn)if(a){var o=e.customColumn[a];o.length>0&&o.forEach(function(e){if(e)for(var i in e)i.indexOf(t.nameEn)>=0&&i.indexOf("isShow")>0&&(e[i]=!1)})}e.configs&&(e.configs.queryBarBtnList&&e.configs.queryBarBtnList.forEach(function(e){e.nameEn==t.nameEn&&(e.isShow=!1)}),e.configs.topBarBtnList&&e.configs.topBarBtnList.forEach(function(e){e.nameEn==t.nameEn&&(e.isShow=!1)}))})}).catch(function(t){e.$loading().close()}))},initTable:function(e,t){var i=this;Object(r.listPageCustomerInvoices)(p({},i.tempQuery,{customerId:e,pageNo:i.pageNo})).then(function(e){i.getListPage(e),t&&i.$loading().close()}).catch(function(e){i.$loading().close()})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(d.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!0,this.configs.showIndex=!0,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==s.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==s.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==s.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==s.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"是否默认"===e.label&&(e.component=g,e.changeState=t.changeState)}),t.internationalConfig(),e.push(t.initConfigs.tableOperates),e},internationalConfig:function(){"en"==s.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==s.a.locale&&(this.initConfigs.tableOperates.label="操作")},changeState:function(e,t){var i=this,a=e.id,o=e.customerId;Object(r.updateDefaultCustomerInvoice)({invoiceId:a,customerId:o,isdefault:e.isdefault}).then(function(e){i.refreshTable(o)}).catch(function(t){"0"==e.isdefault&&(e.isdefault="1")})},dataBridge:function(e){this.selectList=e,e.length?this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!1)}):this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})},editBtns:function(e,t){this.resetTemp(),this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.temp=this.temp,this.dialogData.title="编辑客户开票信息",this.openDialogName="invoiceEdit",this.showDialog=!0,this.visible=!0},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},addNew:function(){this.dialogData.temp={companyName:"",invoiceNumber:"",address:"",bankName:"",bankCode:"",mobile:"",remark:"",customerId:""},this.dialogData.temp.customerId=this.temp.id,this.dialogData.title="新增客户开票信息",this.openDialogName="invoiceAdd",this.showDialog=!0,this.visible=!0},resetTemp:function(){for(var e in this.temp)this.temp[e]=""},deleteBatch:function(){var e=this,t=this;t.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i="";t.selectList.forEach(function(e){i+=e.id+","}),Object(r.deleteCustomerInvoice)(i).then(function(i){0===i.code&&(t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),t.refreshTable(e.customerId))}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},refreshTable:function(e){var t=this;t.$axios.all([Object(r.listPageCustomerInvoices)(p({},t.tempQuery,{customerId:e,pageNo:t.pageNo}))]).then(t.$axios.spread(function(e){t.getListPage(e)})).catch(function(e){})}},computed:m({tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0):0},dialogName:function(){return this.openDialogName},dialogWidth:function(){if(this.initData.width){var e=u(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},"dialogName",function(){return this.openDialogName}),watch:{pageNo:function(){var e=this.temp.id;this.initTable(e,null)}}},b=i("KHd+"),v=Object(b.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("div",{staticClass:"tableBtns"},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{"padding-top":"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);v.options.__file="invoiceList.vue";t.default=v.exports},rPmT:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("6tA9");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{dialogAddCustomerInvoice:i("hI+3").default,dialogAdd:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{customerId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{companyName:"",invoiceNumber:"",address:"",bankName:"",bankCode:"",mobile:"",remark:"",customerId:"",customerInvoiceId:""},tempLable:{},tempNotEditable:{},rules:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{temp:{},title:""},CustomerInvoiceDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择开票信息",tableUrl:"/base/customerInvoice/listPageCustomerInvoices",tableParm:{fieldCode:"companyName,invoiceNumber,address,bankName,mobile,remark,isdefaultStr",customerId:this.initData.customerId},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.customerInvoiceId=this.temp.id)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogData.temp=JSON.parse(JSON.stringify(e.temp)),e.dialogData.title="选择订单",e.openDialogName="dialogAdd",e.showDialog=!0,e.inLinVisible=!0)})},customerInvoiceSelect:function(e){e[0]&&(this.temp.customerInvoiceId=e[0].id,this.temp.customerId=this.initData.customerId,this.temp.companyName=e[0].companyName,this.temp.invoiceNumber=e[0].invoiceNumber,this.temp.address=e[0].address,this.temp.bankName=e[0].bankName,this.temp.bankCode=e[0].bankCode,this.temp.mobile=e[0].mobile,this.temp.remark=e[0].remark)},addCustomerInvoice:function(){this.temp={},this.temp.customerId=this.initData.customerId,this.dialogData.customerId=this.initData.customerId,this.dialogData.temp=JSON.parse(JSON.stringify(this.temp)),this.dialogData.title="新增开票信息",this.openDialogName="dialogAddCustomerInvoice",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"450px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"75%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"75px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"companyName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"240px"},attrs:{disabled:!0,dialog:e.CustomerInvoiceDialog.dialog},on:{callback:e.customerInvoiceSelect},model:{value:e.temp.companyName,callback:function(t){e.$set(e.temp,"companyName",t)},expression:"temp.companyName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"0px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomerInvoice}})],1),e._v(" "),i("el-form-item",{attrs:{label:"税号:",prop:"invoiceNumber"}},[i("el-input",{staticStyle:{width:"260px"},attrs:{disabled:!0},model:{value:e.temp.invoiceNumber,callback:function(t){e.$set(e.temp,"invoiceNumber",t)},expression:"temp.invoiceNumber"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地址:",prop:"address"}},[i("el-input",{staticStyle:{width:"260px"},attrs:{disabled:!0},model:{value:e.temp.address,callback:function(t){e.$set(e.temp,"address",t)},expression:"temp.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电话:",prop:"mobile"}},[i("el-input",{staticStyle:{width:"260px"},attrs:{disabled:!0},model:{value:e.temp.mobile,callback:function(t){e.$set(e.temp,"mobile",t)},expression:"temp.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开户银行:",prop:"bankName"}},[i("el-input",{staticStyle:{width:"260px"},attrs:{disabled:!0},model:{value:e.temp.bankName,callback:function(t){e.$set(e.temp,"bankName",t)},expression:"temp.bankName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"账号:",prop:"bankCode"}},[i("el-input",{staticStyle:{width:"260px"},attrs:{disabled:!0},model:{value:e.temp.bankCode,callback:function(t){e.$set(e.temp,"bankCode",t)},expression:"temp.bankCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"260px"},attrs:{type:"textarea",rows:"2",disabled:!0},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEditCustomerInvoice.vue";t.default=s.exports},rSAu:function(e,t,i){"use strict";var a=i("AsBr");i.n(a).a},rSer:function(e,t,i){},rXsy:function(e,t,i){},rdjU:function(e,t,i){"use strict";i.r(t);i("91GP");var a=i("WIyV"),o=i("6tA9"),n=i("hI+3"),l=i("rPmT"),s=i("QmdA");function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c={components:{customBaseTable:a.a,dialogAdd:o.default,dialogEditCustomerInvoice:l.default,dialogAddCustomerInvoice:n.default},name:"dialog-add",props:["initData","visible"],data:function(){var e;return r(e={queryForm:{name:""},rowTableList:[],guid:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",orderDetail_style:"",deliverDetail_style:"",orderId:"",orderObject:{},title:"",temp:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,resState:"",temp:{},tempLable:{},currentpage:1,searchObj:{},tableData:[]},"rowTableList",[]),r(e,"configs",{tableConfigs:[],showCheckBox:!1,showIndex:!1}),r(e,"apiObj",{apiName:"getInvoiceAmount",params:{fieldCode:"customerName"}}),r(e,"customColumn",[]),r(e,"mergeTitle",[]),r(e,"mergeColumn",[]),r(e,"mergeRow",[]),e},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},setApiObj:function(){return this.apiObj.params=Object.assign({},this.apiObj.params,this.searchObj),this.apiObj}},watch:{},methods:{getData:function(){this.$refs.dialogFinanceInvoice.getData()},formData:function(e){},databridge:function(e){Array.isArray(e)&&(this.rowTableList=[],this.rowTableList=e)},dialogOpen:function(){},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},addInvoice:function(){var e=this;if(null!=this.rowTableList&&0!=this.rowTableList.length){var t=this.rowTableList[0].customerId,i=this.rowTableList[0].customerName;Object(s.findIsExistCustomerInvoice)({customerId:t}).then(function(a){"false"==a.isExistCustomerInvoice?(e.dialogData.customerId=t,e.dialogData.customerName=i,e.dialogData.title="客户开票信息",e.openDialogName="dialogAddCustomerInvoice",e.showDialog=!0,e.inLinVisible=!0):(e.dialogData.temp=a.customerInvoice,e.dialogData.customerId=t,e.dialogData.title="客户开票信息",e.openDialogName="dialogEditCustomerInvoice",e.showDialog=!0,e.inLinVisible=!0)})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条数据！"})},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1},queryTable:function(){this.setApiObj()},resetQueryTemp:function(){for(var e in this.queryForm)this.queryForm[e]="";this.setApiObj()}}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"600px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{height:"50px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"90%",margin:"10px auto","padding-top":"10px"},attrs:{inline:!0,model:e.queryForm}},[i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"名称："}},[i("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"名称"},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:10}},[i("div",{attrs:{align:"right"}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:e.queryTable}})],1),e._v(" "),i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:e.resetQueryTemp}})],1)],1)])],1)],1),e._v(" "),i("el-row",{staticStyle:{width:"98%",margin:"0 1%",border:"1px solid #ebeef5"}},[i("custom-base-table",{ref:"dialogFinanceInvoice",attrs:{"data-custom-table-id":"views_sale_saleInvoice_dialogFinanceInvoice0",isSortable:!1,varList:e.tableData,keyValue:!1,isSingle:!0,showCheckBox:!0,showIndex:!1,showTableSet:!1,customColumn:e.customColumn,apiObj:e.setApiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddByInvoiceDialog",useDefaultBtn:!1,showAll:!1},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addInvoice}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogFinanceInvoice.vue";t.default=u.exports},rkQR:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("WIyV"),o=i("uupt"),n=i("G5My"),l=i("nqR1"),s=i("MPAK"),r=i("8UwL"),c={components:{customBaseTable:a.a,dialogAddSupplier:o.default,selectAssistProductBySupplier:n.default,selectAssistPlanByOrder:l.default},props:["initData","visible"],data:function(){return{rules:{supplierName:[{required:!0,message:"请选择供应商",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",supplierId:"",supplierName:"",makeId:"",makeName:"",isAutoCommit:"",dtlJsonStr:""},tableData:[],editData:[],configs:{topBarBtnList:[{name:"选择外协件",nameEn:"add",isShow:!0,method:this.selectAssistProduct},{name:"从计划导入",nameEn:"add",isShow:!0,method:this.selectAssistPlan}],tableConfigs:[],showCheckBox:!1,showIndex:!1},SupplierDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择供应商",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"49c0a7ebcb4c4175bd5195837a6a9a13",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}},apiObj:{apiName:"listPageAssistOrderDetail",params:{fieldCode:"assistProductName,craftName,orderUnitName,orderCount,price,expectDate,lossRatio,planCode",parentId:"null"}},customColumn:[{columnIndex:"assistProductName",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"orderCount",width:"120",componentName:"input",_cellConfig:{}},{columnIndex:"price",width:"120",componentName:"input",_cellConfig:{}},{columnIndex:"expectDate",width:"175",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd"}},{columnIndex:"lossRatio",width:"120",componentName:"input",_cellConfig:{}}]}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.formData.id=e.id,this.formData.supplierId=e.supplierId,this.formData.supplierName=e.supplierName,this.formData.makeId=e.makeId,this.formData.makeName=e.makeUserName,this.apiObj.params.parentId=e.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.editData=[],this.editData=e)},getData:function(){this.$refs.customBaseTable.getData()},supplierSelect:function(e){e[0]&&(this.formData.supplierId=e[0].id,this.formData.supplierName=e[0].name)},makeSelect:function(e){e[0]&&(this.formData.makeId=e[0].id,this.formData.makeName=e[0].name)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},selectAssistProduct:function(){null!=this.formData.supplierName&&0!=this.formData.supplierName.trim().length?(this.getData(),this.dialogData.data=this.editData,this.dialogData.isNeedRepeat=!1,this.dialogData.supplierId=this.formData.supplierId,this.dialogData.width="900px",this.dialogData.title="选择外协件",this.openDialogName="selectAssistProductBySupplier",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择供应商！"})},selectAssistPlan:function(){null!=this.formData.supplierName&&0!=this.formData.supplierName.trim().length?(this.getData(),this.dialogData.tableData=this.editData,this.dialogData.isNeedRepeat=!1,this.dialogData.supplierId=this.formData.supplierId,this.dialogData.width="1000px",this.dialogData.title="选择外协计划",this.openDialogName="selectAssistPlanByOrder",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择供应商！"})},checkColumnByTable:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o="";null!=a.orderCount&&(o=a.orderCount+""),null==o||0==o.trim().length?t=t+"第 "+(i+1)+" 行: 外协数量为空或空字符串！":null!=o&&o.trim().length>0&&!Object(s.isNumberByValueSystem)(o)?t=t+"第 "+(i+1)+" 行: 外协数量("+o+") 输入错误，请输入大于零的正数支持2位小数！":null!=o&&o.trim().length>0&&Object(s.isNumberByValueSystem)(o)&&o/1<=0&&(t=t+"第 "+(i+1)+" 行: 外协数量("+o+") 输入错误，请输入大于零的正数支持2位小数！");var n="";null!=a.price&&(n=a.price+""),null==n||0==n.trim().length?t=t+"第 "+(i+1)+" 行: 单价为空或空字符串！":null!=n&&n.trim().length>0&&!Object(s.isPriceByValueSystem)(n)?t=t+"第 "+(i+1)+" 行: 单价("+n+") 输入错误，请输入大于零的正数支持4位小数！":null!=n&&n.trim().length>0&&Object(s.isPriceByValueSystem)(n)&&n/1<=0&&(t=t+"第 "+(i+1)+" 行: 单价("+n+") 输入错误，请输入大于零的正数支持4位小数！");var l="";null!=a.lossRatio&&(l=a.lossRatio+""),null!=l&&l.trim().length>0&&!Object(s.isNumberByValueSystem)(l)?t=t+"第 "+(i+1)+" 行: 损耗率("+l+") 输入错误，请输入大于零的正数支持2位小数！":null!=l&&l.trim().length>0&&Object(s.isNumberByValueSystem)(l)&&l/1<=0&&(t=t+"第 "+(i+1)+" 行: 损耗率("+l+") 输入错误，请输入大于零的正数支持2位小数！"),null==a.expectDate&&(t=t+"第 "+(i+1)+" 行: 约定交期为空，请选择约定交期！")}return t},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){if(e.editData=[],e.getData(),null==e.editData||0==e.editData.length)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一行数据！"});var i=e.checkColumnByTable(e.editData);if(null!=i&&i.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:i});e.saveSaleOrder(e.editData)}})},saveSaleOrder:function(e){for(var t=this,i=[],a=0;a<e.length;a++){var o=e[a],n={planDetailId:o.planDetailId,assistProductId:o.assistProductId,orderUnit:o.orderUnit,orderCount:o.orderCount,price:o.price,lossRatio:o.lossRatio,expectDate:o.expectDate};i.push(n)}this.formData.dtlJsonStr="",null!=i&&i.length>0&&(this.formData.dtlJsonStr=JSON.stringify(i)),this.$confirm("是否将该订单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.formData.isAutoCommit="true",Object(r.updateAssistOrder)(t.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.formData.isAutoCommit="false",Object(r.updateAssistOrder)(t.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"selectAssistProductBySupplier"==e.pageName){var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByAssistProduct(t)}else if(null!=e&&"selectAssistPlanByOrder"==e.pageName){var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelectedByAssistPlan(i)}},tableSelectedByAssistProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={assistProductName:i.assistProductName,craftName:i.craftName,orderUnitName:i.productUnitName,price:i.price,lossRatio:i.lossRatio,assistProductId:i.assistProductId,orderUnit:i.productUnit};this.tableData.push(a)}},tableSelectedByAssistPlan:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={assistProductName:i.assistProductName,craftName:i.craftName,orderUnitName:i.orderUnitName,expectDate:i.planDate,planCode:i.planCode,planDetailId:i.planDtlId,price:i.price,lossRatio:i.lossRatio,orderCount:i.count,assistProductId:i.assistProductId,orderUnit:i.orderUnit};this.tableData.push(a)}}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,inline:!0,model:e.formData}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"供应商:",prop:"supplierName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"220px"},attrs:{dialog:e.SupplierDialog.dialog},on:{callback:e.supplierSelect},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"0px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.formData.makeName,callback:function(t){e.$set(e.formData,"makeName",t)},expression:"formData.makeName"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{margin:"0px 0px 10px 0px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistOrde_assistOrdeList_dialogEdit0",varList:e.tableData,showIndex:!1,showTableSet:!1,showCheckBox:!1,useDefaultBtn:!0,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},rloJ:function(e,t,i){"use strict";var a=i("pxyt");i.n(a).a},rmg0:function(e,t,i){"use strict";i.r(t);i("xfY5");var a=i("WIyV"),o=i("c5eW"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{receiptType:2,productUnit:{},rules:{},openDialogName:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],rowTableList:[],configs:{tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"getInvoiceAmount",params:{customerId:this.initData.temp.customerId,isNeedPage:"false",fieldCode:"customerCode,customerName,uninvoiceAmount,amount"}},customColumn:[{columnIndex:"amount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"},{lessThan:["self@uninvoiceAmount",!0]}],message:["请输入大于零的正整数或(1,2)位小数！","必须小于等于未开发票数量！"]}}],mergeTitle:[],mergeColumn:[],mergeRow:[]}},beforeCreate:function(){},created:function(){this.temp=this.initData.temp,null!=this.initData.temp.receiptType&&this.initData.temp.receiptType.trim().length>0&&(this.receiptType=Number(this.initData.temp.receiptType)),null!=this.initData.temp.id&&this.initData.temp.id.trim().length>0&&(this.apiObj.params.parentId=this.initData.temp.id.trim())},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){if(Array.isArray(e)){if(this.rowTableList=e,!(this.rowTableList.length>0))return void this.$message({type:"warning",duration:5e3,showClose:!0,message:"至少要选择一条记录！"});this.saveFinanceInvoice(this.rowTableList)}},save:function(){this.$refs.orderAddByInvoiceDialog.getData()},saveFinanceInvoice:function(e){for(var t=this,i=0;i<e.length;i++){var a=e[i];this.temp.amount=a.amount}this.temp.type=this.receiptType,this.dialogLoading=!0,Object(o.saveFinanceInvoice)(this.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{margin:"10px 50px"}},[i("el-radio-group",{model:{value:e.receiptType,callback:function(t){e.receiptType=t},expression:"receiptType"}},[i("el-radio",{attrs:{label:2}},[e._v("增值税普通发票")]),e._v(" "),i("el-radio",{attrs:{label:3}},[e._v("增值税专用发票")])],1)],1),e._v(" "),i("div",{staticStyle:{"padding-left":"50px"}},[i("p",[i("a",[e._v("名称:")]),e._v(e._s(e.temp.companyName))]),e._v(" "),i("p",[i("a",[e._v("税号:")]),e._v(e._s(e.temp.invoiceNumber))]),e._v(" "),i("p",[i("a",[e._v("地址:")]),e._v(e._s(e.temp.address))]),e._v(" "),i("p",[i("a",[e._v("电话:")]),e._v(e._s(e.temp.mobile))]),e._v(" "),i("p",[i("a",[e._v("开户银行:")]),e._v(e._s(e.temp.bankName))]),e._v(" "),i("p",[i("a",[e._v("账号:")]),e._v(e._s(e.temp.bankCode))])]),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddByInvoiceDialog",attrs:{"data-custom-table-id":"views_finance_financeInvoice_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddByInvoiceDialog",useDefaultBtn:!1,showAll:!1},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAdd.vue";t.default=s.exports},rny0:function(e,t,i){"use strict";i.r(t);var a=i("WIyV"),o=i("nies"),n=i("MPAK"),l={components:{customBaseTable:a.a,dialogAdd:o.default},props:["initData","visible"],data:function(){return{rowData:[],rules:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageSaleDeliverDetail",params:{fieldCode:"prodInfo,orderUnitName,orderCount,pieceCountPage",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:"",isNeedPage:"false"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"pieceCountPage",width:"120",componentName:"input",_cellConfig:{}}]}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.rowData=this.initData.rowData,this.apiObj.params.parentId=e.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.tableData=[],this.tableData=e)},getData:function(){this.$refs.customBaseTable.getData()},checkColumnByTable:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o="";null!=a.pieceCountPage&&(o=a.pieceCountPage+""),null!=o&&o.trim().length>0&&!Object(n.isCountByValueSystem)(o)?t=t+"第 "+(i+1)+" 行: 件数("+o+") 输入错误，请输入大于零的正整数！":null!=o&&o.trim().length>0&&Object(n.isCountByValueSystem)(o)&&o/1<=0&&(t=t+"第 "+(i+1)+" 行: 件数("+o+") 输入错误，请输入大于零的正整数！")}return t},findPieceCount:function(e){for(var t=0,i=0;i<e.length;i++){var a=e[i],o="";null!=a.pieceCountPage&&(o=a.pieceCountPage+""),null!=o&&o.trim().length>0&&o.trim()/1>0&&(t+=o.trim()/1)}return t},findJsonStringByTable:function(e){for(var t="",i=[],a=0;a<e.length;a++){var o=e[a],n={id:o.id,pieceCount:o.pieceCountPage};i.push(n)}return i.length>0&&(t=JSON.stringify(i)),t},toNextPage:function(){if(this.tableData=[],this.getData(),null!=this.tableData&&this.tableData.length>0){var e=this.checkColumnByTable(this.tableData);if(null!=e&&e.trim().length>0)return void this.$message({type:"warning",duration:5e3,showClose:!0,message:e});var t=this.findPieceCount(this.tableData),i=this.findJsonStringByTable(this.tableData);this.dialogData.deliverId=this.rowData.id,this.dialogData.customerId=this.rowData.customerId,this.dialogData.deliverCode=this.rowData.deliverCode,this.dialogData.pieceCount=t+"",this.dialogData.deliverDtlJsonStr=i,this.dialogData.title="发货方式",this.openDialogName="dialogAdd",this.showDialog=!0,this.inLinVisible=!0}},dialogOpen:function(){},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},closeDialog:function(e){this.tableData=[],this.showDialog=!1,this.isVisible=!1,e.resState&&(this.resState=e.resState)}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"800px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_sale_deliver_listDeliverByPrice_dialogDeliverDtl0",showIndex:!1,showTableSet:!1,showCheckBox:!1,useDefaultBtn:!1,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.toNextPage}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogDeliverDtl.vue";t.default=r.exports},"s/1R":function(e,t,i){"use strict";i.r(t);var a=i("WIyV"),o=i("mbVW"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{id:"",supplierId:"",isAutoCommit:"",dtlJsonStr:""},tableData:[],editData:[],apiObj:{apiName:"listPageAssistDiscardDetailEdit",params:{fieldCode:"assistProductName,craftName,orderUnitName,price,orderDtlCount,retreatCount,discardCount,maxDiscardCount,orderCount",parentId:""}},customColumn:[{columnIndex:"assistProductName",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"orderCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{lessThan:["self@maxDiscardCount",!0]}],message:["请输入大于零的正整数或(1,2)位小数！","不可大于最大报废数！"]}}]}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.formData.id=e.id,this.formData.supplierId=e.supplierId,this.apiObj.params.parentId=e.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.editData=[],this.editData=e)},getData:function(){this.$refs.customBaseTable.getData()},save:function(){this.editData=[],this.getData(),this.saveSaleOrder(this.editData)},saveSaleOrder:function(e){for(var t=this,i=[],a=0;a<e.length;a++){var n=e[a],l={orderId:n.orderId,orderDtlId:n.orderDtlId,price:n.price,assistProductId:n.assistProductId,productId:n.productId,orderUnit:n.orderUnit,orderCount:n.orderCount};i.push(l)}this.formData.dtlJsonStr="",null!=i&&i.length>0&&(this.formData.dtlJsonStr=JSON.stringify(i)),this.$confirm("是否将该退料单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.formData.isAutoCommit="true",Object(o.updateAssistDiscard)(t.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.formData.isAutoCommit="false",Object(o.updateAssistDiscard)(t.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistProductDiscard_listAssistProductDiscard_dialogEdit0",showIndex:!1,showTableSet:!1,showCheckBox:!1,useDefaultBtn:!0,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},s2cx:function(e,t,i){"use strict";i.r(t);i("Oyvg");var a=i("BUpD"),o={components:{},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{initialPeriodDate:null,paymentPeriodDate:null,rules:{recevieType:[{required:!0,message:"请选择收款类型",trigger:"change"}],amount:[{required:!0,trigger:"change",validator:function(t,i,a){e.isNumberByValue(i)?(0==i&&a(new Error("请输入大于零的正整数或(1,2)位小数！")),a()):a(new Error("请输入大于零的正整数或(1,2)位小数！"))}}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.formData=this.initData.rowData},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},checkNumberByValue:function(e,t){var i="";return null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())?i=i+t+":"+e+" 输入错误，请输入大于等于零的正整数或(1,2)位小数！":e-0<0&&(i=i+t+":"+e+" 输入错误，请输入大于等于零的正整数或(1,2)位小数！"),i},checkPaymentSum:function(e){var t=this.checkNumberByValue(e+"","期初金额");return null!=t&&t.trim().length>0&&(this.$message({message:t,type:"warning",duration:5e3}),!0)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.eidtFinanceBase)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"设定成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"供应商名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.customerName,callback:function(t){e.$set(e.formData,"customerName",t)},expression:"formData.customerName"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"付款类型:",prop:"recevieType"}},[i("el-select",{model:{value:e.formData.recevieType,callback:function(t){e.$set(e.formData,"recevieType",t)},expression:"formData.recevieType"}},[i("el-option",{attrs:{label:"应付款",value:"plus"}}),e._v(" "),i("el-option",{attrs:{label:"预付款",value:"minus"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"期初金额:",prop:"amount"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogEdit.vue";t.default=l.exports},sCiY:function(e,t,i){"use strict";var a=i("m8lL");i.n(a).a},sJZI:function(e,t,i){"use strict";i.r(t);i("f3/d"),i("91GP");var a=i("uTIz"),o=i("varj"),n=i("hgz3"),l=i("Do8I"),s={components:{customTransferTable:o.a,searchBar:a.a,selectMode:n.default},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},resState:"",dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"下一步",isShow:!0,state:!0,method:this.toNextPage},{name:"关 闭",icon:"refresh",state:!0,plain:!0,method:this.closeWin,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageEquipments",params:{fieldCode:"code,name,spec,supplier,deptName"}},customColumn:[],tempData:{count:100,defaultDate:"2019-01-21"},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[],tempData:{count:100,defaultDate:"2019-01-21"},showIndex:!0,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[{columnIndex:5,prop:"maintainContentObject",label:"保养内容",width:120,componentName:"select",_cellConfig:{asyn:{apiName:"selectListMaintainContent",params:{id:""}},rules:[{required:!0}]}},{columnIndex:6,prop:"isStopObject",label:"是否停机",width:120,componentName:"select",_cellConfig:{options:[{id:"1",label:"停机保养"},{id:"0",label:"非停机保养"}],rules:[{required:!0}]}}],hideColumns:["remark"],tableSelectList:[],tempList:[]}},created:function(){this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.showDialog=!1,this.isVisible=!1},tableSelected:function(e){this.tempList=e},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},initTree:function(){var e=this;this.dialogLoading=!0,Object(l.listTreeDepartment)({}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name},t.push(i),this.treeData=t,this.dialogLoading=!1},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name},this.tempQuery.pid=this.selectTree.id,this.tempQuery.layer=this.selectTree.layer,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},checkTableColumn:function(e){var t="";if(null==e||0==e.length)return t="请至少选择一行数据！";for(var i=0;i<e.length;i++){var a=e[i],o="";null!=a.maintainContentObject&&null!=a.maintainContentObject.item&&(o=a.maintainContentObject.item.id,a.maintainContent=a.maintainContentObject.item.label),a.maintainContentId=o;var n="";null!=a.isStopObject&&null!=a.isStopObject.item&&(n=a.isStopObject.item.id),a.isStop=n,0==o.trim().length&&0==n.trim().length?t=t+"第 "+(i+1)+" 行: 请选择保养内容和是否停机！":0==o.trim().length?t=t+"第 "+(i+1)+" 行: 请选择保养内容！":0==n.trim().length&&(t=t+"第 "+(i+1)+" 行: 请选择是否停机！")}return t},toNextPage:function(){this.$refs.trabsferTables.getTableSelected();var e=this.checkTableColumn(this.tempList);null!=e&&e.trim().length>0?this.$message({message:e,showClose:!0,type:"warning",duration:5e3}):(this.dialogData.eqptTableData=this.tempList,this.dialogData.title="选择保养方式",this.openDialogName="selectMode",this.showDialog=!0,this.inLinVisible=!0)}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);c.options.__file="selectEquipment.vue";t.default=c.exports},sanI:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("9rC1"),o={name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写名称",trigger:"change"}]},typeData:{},customerTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"customerType",isglobal:"0",isNeetOneLayer:"true"}},defaultSelected:[]},supplierTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"supplierType",isglobal:"0",isNeetOneLayer:"true"}},defaultSelected:[]},provinceData:{data:{selectUrl:"/system/dictionary/treeDictionarys",selectParm:{dictionaryKey:"area",cascade:"true"}},defaultSelected:[]},openDialogName:"",showDialog:!1,inLinVisible:!1}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[])},provinceSelect:function(e,t,i){e&&e.length>0?(this.temp.province=e[e.length-1],this.provinceData.defaultSelected=e):(this.temp.province=[],this.provinceData.defaultSelected=[])},dialogOpen:function(){var e=this,t="df7cb67fca4148bc9632c908e4a7fdea";this.temp.genre=t,this.typeData=this.customerTypeData,this.temp.type=this.typeData.defaultSelected[0],this.temp.province=this.provinceData.defaultSelected[0],this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;this.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,Object(a.addCustomer)(t.temp).then(function(i){t.dialogLoading=!1,0===i.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok",customerId:i.id,customerName:e.temp.name}))}).catch(function(e){t.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"80%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"80px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类型:",prop:"typeName"}},[i("base-input-select",{staticStyle:{width:"240px"},attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地区:",prop:"provinceName"}},[i("base-input-select",{staticStyle:{width:"240px"},attrs:{data:e.provinceData.data},on:{callback:e.provinceSelect},model:{value:e.provinceData.defaultSelected,callback:function(t){e.$set(e.provinceData,"defaultSelected",t)},expression:"provinceData.defaultSelected"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogAddCustomer.vue";t.default=l.exports},ssTd:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("4IJs");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写联系姓名",trigger:"change"}],mobile:[{required:!0,message:"请填写手机号",trigger:"change"}],address:[{required:!0,message:"请填写详细地址",trigger:"change"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isMobileNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^1[\\d]{10}").test(e.trim())},checkMobileValue:function(e,t){var i="";return null!=e&&e.trim().length>0&&11!=e.trim().length?i=t+"("+e+")输入错误，请输入11位正确的手机号！":null==e||11!=e.trim().length||this.isMobileNumberByValue(e.trim())||(i=t+"("+e+")输入错误，请输入11位正确的手机号！"),i},checkMobile:function(e){var t=this.checkMobileValue(e,"手机号");null!=t&&t.trim().length>0&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){if(i){var o=e.temp.mobile,n=e.checkMobileValue(o,"手机号");if(null!=n&&n.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:n});t.dialogLoading=!0,Object(a.updateCustomerAddress)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:e.tempLable.name+":",prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.mobile+":",prop:"mobile"}},[i("el-input",{model:{value:e.temp.mobile,callback:function(t){e.$set(e.temp,"mobile",t)},expression:"temp.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.phone+":",prop:"phone"}},[i("el-input",{on:{change:e.checkMobile},model:{value:e.temp.phone,callback:function(t){e.$set(e.temp,"phone",t)},expression:"temp.phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.email+":",prop:"email"}},[i("el-input",{model:{value:e.temp.email,callback:function(t){e.$set(e.temp,"email",t)},expression:"temp.email"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.address+":",prop:"address"}},[i("el-input",{model:{value:e.temp.address,callback:function(t){e.$set(e.temp,"address",t)},expression:"temp.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.tempLable.remark+":",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="addressEdit.vue";t.default=s.exports},szYl:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("xfY5");var a=i("xMja");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{afterCount:[{required:!0,message:"请填写调整后数量！",trigger:"change"},{type:"number",message:"数量必须为数字值"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.beforeCount=this.initData.temp.safetyCount)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,Object(a.updateProductSafeStock)({id:t.temp.id,safetyCount:t.temp.afterCount}).then(function(i){t.dialogLoading=!1,0===i.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,e.initData.temp.safetyCount=new Number(t.temp.afterCount).toFixed(2),t.dialogClose({resState:"ok",afterCount:new Number(t.temp.afterCount).toFixed(2)}))}).catch(function(e){t.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"安全库存调整",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"150px"}},[i("el-form-item",{attrs:{label:"调整前安全库存:",prop:"beforeCount"}},[i("el-input",{staticStyle:{width:"140px"},attrs:{disabled:!0},model:{value:e.temp.beforeCount,callback:function(t){e.$set(e.temp,"beforeCount",t)},expression:"temp.beforeCount"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"调整后安全库存:",prop:"afterCount"}},[i("el-input",{staticStyle:{width:"140px"},model:{value:e.temp.afterCount,callback:function(t){e.$set(e.temp,"afterCount",e._n(t))},expression:"temp.afterCount"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogSafeStock.vue";t.default=s.exports},szcW:function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=i("5Gyy"),n={components:{multilevelTable:a.a,dialogDetail:o.default},props:["initData","visible"],data:function(){return{signDtlId:"",rules:{},resState:"",openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],tableConfigList:[{customColumn:[{columnIndex:"state",width:"140",componentName:"tag",_cellConfig:{success:{state:"3",text:"已完成"},info:{state:"-1",text:"已取消"},warning:{state:"1",text:"待审核"},danger:{state:"2",text:"采购中"},default:{state:"0",text:"待提交"}}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",width:"150",component:[{name:"查看明细",nameEn:"viewDetail",editBtns_isShow:!0,method:this.viewDetail}]}],apiObj:{apiName:"listPageFinanceHistorys",params:{modelCode:"FinanceHistoryByPurchase",fieldCode:"period,beginPlus,beginMinus,nowPlus,nowMinus,endPlus,endMinus",customerId:this.initData.rowData.customerId,orderStr:"cdate desc"}},temp:{},tempData:{},showHeader:!0,showIndex:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,isSingle:!0,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!1,rowStyle:{"background-color":"#dfe6ec"}}]}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},closeDialog:function(e){e.resState&&(this.resState=e.resState),this.isVisible=!1},viewDetail:function(e){this.dialogData.rowData=JSON.parse(JSON.stringify(e)),this.dialogData.title="本期明细",this.openDialogName="dialogDetail",this.showDialog=!0,this.inLinVisible=!0}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("multilevel-table",{ref:"financeBillHistory",attrs:{"data-custom-table-id":"views_purchase_paymentByPurchase_paymentQuery_dialogHistory1",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogHistory.vue";t.default=s.exports},t2Xm:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("QmdA");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isBankCodeNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[1-9][0-9]*$").test(e.trim())},checkBankCodeValue:function(e,t){var i="";return null!=e&&e.trim().length>0&&!this.isBankCodeNumberByValue(e.trim())&&(i=t+"("+e+")输入错误，请输入正确的账号！"),i},checkBankCode:function(e){var t=this.checkBankCodeValue(e,"账号");null!=t&&t.trim().length>0&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){if(i){var o="",n=e.temp.bankCode,l=e.checkBankCodeValue(n,"账号");if(null!=l&&l.trim().length>0&&(o=o+" "+l),null!=o&&o.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:o});t.dialogLoading=!0,Object(a.updateCustomerInvoice)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"companyName"}},[i("el-input",{model:{value:e.temp.companyName,callback:function(t){e.$set(e.temp,"companyName",t)},expression:"temp.companyName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"税号:",prop:"invoiceNumber"}},[i("el-input",{model:{value:e.temp.invoiceNumber,callback:function(t){e.$set(e.temp,"invoiceNumber",t)},expression:"temp.invoiceNumber"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地址:",prop:"address"}},[i("el-input",{model:{value:e.temp.address,callback:function(t){e.$set(e.temp,"address",t)},expression:"temp.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电话:",prop:"mobile"}},[i("el-input",{model:{value:e.temp.mobile,callback:function(t){e.$set(e.temp,"mobile",t)},expression:"temp.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开户银行:",prop:"bankName"}},[i("el-input",{model:{value:e.temp.bankName,callback:function(t){e.$set(e.temp,"bankName",t)},expression:"temp.bankName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"账号:",prop:"bankCode"}},[i("el-input",{on:{change:e.checkBankCode},model:{value:e.temp.bankCode,callback:function(t){e.$set(e.temp,"bankCode",t)},expression:"temp.bankCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="invoiceEdit.vue";t.default=s.exports},t8TD:function(e,t,i){"use strict";i.r(t);var a=i("WIyV"),o=i("BEur"),n={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{addRetreatData:{supplierId:"",type:"",attribute:"",isAutoCommit:"",dtlJsonStr:""},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageAssistSignDetailByRetreat",params:{fieldCode:"assistProductName,craftName,orderUnitName,signFineCount,retreatUserCount,maxRetreatCount,editRetreatCount",signId:"",supplierId:"",isNeedPage:"false"}},customColumn:[{columnIndex:"assistProductName",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"editRetreatCount",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{lessThan:["self@maxRetreatCount",!0]}],message:["请输入大于零的正整数或(1,2)位小数！","不可大于最大退货数！"]}}]}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.apiObj.params.signId=e.id,this.apiObj.params.supplierId=e.supplierId,this.addRetreatData.type="1",this.addRetreatData.attribute="2",this.addRetreatData.supplierId=e.supplierId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.tableData=[],this.tableData=e)},getData:function(){this.$refs.customBaseTable.getData()},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){},findJsonStringByTable:function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i],o={orderId:a.orderId,orderDtlId:a.orderDetailId,price:a.price,assistProductId:a.assistProductId,productId:a.productId,orderUnit:a.orderUnit,orderCount:a.editRetreatCount};t.push(o)}this.addRetreatData.dtlJsonStr=JSON.stringify(t)},save:function(){var e=this;this.getData(),null!=this.tableData&&this.tableData.length>0&&(this.findJsonStringByTable(this.tableData),this.$confirm("是否将该退货单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.addRetreatData.isAutoCommit="true",Object(o.addAssistRetreat)(e.addRetreatData).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.dialogLoading=!1,e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.addRetreatData.isAutoCommit="false",Object(o.addAssistRetreat)(e.addRetreatData).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.dialogLoading=!1,e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))}))}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistProductRetreat_createAssistProductRetreat_selectAssistOrder0",showIndex:!1,showTableSet:!1,showCheckBox:!1,useDefaultBtn:!1,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="selectAssistOrder.vue";t.default=s.exports},tQma:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg"),i("rGqo");var a=i("7cmB"),o=i("WnSj"),n=i("UHWX");i("z0WU");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={props:["colConfig"],template:'<el-table-column :label="colConfig.label" align="center">\n    \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n    \t\t\t\t\t\t\t<el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.change(scope.row,scope.$index)">更改/增加货位</el-button>\n    \t\t\t\t\t</div>\n  \t\t\t\t</el-table-column>'},r={components:{treeFormTable:a.a,dialogChangeWarehouseByIn:o.default},name:"dialog-add",props:["initData","visible"],data:function(){return{tableData:[],rootData:{},tableSets:{1:{showCheckBox:!1,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},currentpage:1,customColumn:{0:[{columnIndex:"last",prop:"operate",label:"操作",component:s,change:this.change}]},editable:{count:{type:"input"}},apiObj:{apiName:"findListByWarehouseInExecutor",params:{firstFieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,executeCount,surplusCount,code,warehouseName",secondFieldCode:"",queryStr:"",pageNo:1}},addedData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{productId:"",title:"",temp:{}},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{}}},created:function(){var e="",t=this.initData.temp;null!=t&&t.length>0&&t.forEach(function(t){null!=t.id&&t.id.trim().length>0&&(e=0==e.length?"'"+t.id.trim()+"'":e+",'"+t.id.trim()+"'")});var i="";null!=e&&e.trim().length>0&&(i="a.id in ("+e+")"),this.apiObj.params.queryStr=i},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},sendChildrenRow:function(e){},change:function(e,t){var i="";null!=e&&null!=e.productId&&e.productId.trim().length>0&&(i=e.productId.trim()),this.dialogData.temp=e,this.dialogData.productId=i,this.dialogData.title="更改/增加货位",this.openDialogName="dialogChangeWarehouseByIn",this.showDialog=!0,this.inLinVisible=!0},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},addExecute:function(){this.$refs.treeFormTable.getData(),this.addWarehouseInExecute(this.tableData)},formData:function(e){null!=e&&null!=e.tableData&&(this.tableData=e.tableData)},addWarehouseInExecute:function(e){var t=this;if(null!=e&&0!=e.length){var i=this.checkColumnExecuteArray(e);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{var a={executeJsonStr:"",inExecuteType:""};a.executeJsonStr=JSON.stringify(e),null!=(i=this.checkColumnByExecute(e))&&i.trim().length>0?this.$confirm(i+"，是否强制入库?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.inExecuteType="InExecuteByForce",t.submitWarehouseInExecute(a)}).catch(function(){t.$message({type:"info",message:"已取消操作"})}):this.submitWarehouseInExecute(a)}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请填写入库信息！"})},submitWarehouseInExecute:function(e){var t=this;Object(n.addWarehouseInExecute)(e).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})},checkColumnByExecute:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.productCode,n=a.productName,l=0;if(null!=a.count)l=a.count+""-0;var s=0;if(null!=a.executeCount)s=a.executeCount+""-0;for(var r="("+o+","+n+")货品 ",c=a.children,d=0,u=0;u<c.length;u++){d+=c[u].count-0}l<d+s&&(t=r+"入库数量"+l+"，输入的(入库数量汇总 + 完成数量)已经大于入库数量")}return t},checkColumnExecuteArray:function(e){var t="";null!=e&&0!=e.length||(t="请填写入库信息！");for(var i=0;i<e.length;i++)for(var a=e[i],o="("+a.productCode+","+a.productName+")货品 ",n=a.children,l=0;l<n.length;l++){var s=n[l];null!=s.warehouseId&&0!=s.warehouseId.trim().length||(t=t+o+"第 "+(l+1)+" 行: (入库货位id)为空或空字符串;");var r=s.count;if(null==r||0==r.trim().length)t=t+o+"第 "+(l+1)+" 行: (入库数量)为空或空字符串，(入库数量)为必填项不可为空;";else new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(r)||(t=t+"第 "+(l+1)+" 行: 入库数量("+r+")输入错误，请输入大于零的正整数或(1,2)位小数！")}return t},closeDialog:function(e,t){var i=this.$storage.get("userInfo"),a={detailId:"",executorId:"",executorName:"",warehouseId:"",pathName:"",stockCount:null,count:null};if(null!=e&&e.length>0){var o=e[0];a.detailId=t.id,a.executorId=i.userId,a.executorName=i.userName,a.warehouseId=o.id,a.pathName=o.pathName,a.stockCount=o.stockCount,this.addedData={rowData:a,parentData:t}}this.showDialog=!1}},watch:{pageNo:function(){this.initTable()}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("tree-form-table",{ref:"treeFormTable",attrs:{"expand-all":!0,initData:e.rootData,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:e.editable,apiObj:e.apiObj,childHeight:250,addedData:e.addedData},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,"send-children-row":e.sendChildrenRow,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addExecute}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogExecute.vue";t.default=d.exports},tRM8:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("EDKZ"),l=i("hZMg");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:"",deleteIds:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark",parentId:"",type:"edit"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{deptType:"6d8a030ba1ce11e884ad00163e105f0a",type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="生产退库",this.temp.type="8e35209f19804e94940f076c8d71b955",this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={id:l.id,productId:l.productId,remark:l.remark,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.updateWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,this.temp.deptId="",this.temp.deptName="",Object(l.findUserDepartmentByUser)({userId:this.temp.makeId,deptType:"6d8a030ba1ce11e884ad00163e105f0a"}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,this.tableData.push(o)}}},watch:{}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_produce_materialReback_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogEdit.vue";t.default=d.exports},ta5Y:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("Qe0A"),l=i("a0Xs"),s=i("wk8/");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageForAddFromBOM",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",dtlJsonStr:this.initData.temp}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1",notInids:"'def4b13175dc44b08d7a0315b811700e','cb0a55d81e754cd3b59715d225dab087','609fa44c031847569a1d9e2516be4b41'"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isOnlyEntity:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this,t=this.$storage.get("userInfo");this.temp.makeId=t.userId,this.temp.makeName=t.userName,this.temp.type="f2b0aaceff914acd8636700a111ca8f0",this.typeData.defaultSelected=[this.temp.type],Object(s.findUserDepartmentBySystemUser)({userId:this.temp.makeId}).then(function(t){null!=t.deptId&&t.deptId.trim().length>0&&(e.temp.deptId=t.deptId.trim()),null!=t.deptName&&t.deptName.trim().length>0&&(e.temp.deptName=t.deptName.trim())}),this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05"},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(l.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={productId:l.productId,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount,remark:l.remark};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.warehouseAttribute="office",this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.addWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[])},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,Object(s.findUserDepartmentBySystemUser)({userId:this.temp.makeId}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_officeSupplies_officeSuppliesOut_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogAdd.vue";t.default=u.exports},tc2v:function(e,t,i){},tmqG:function(e,t,i){},tvuH:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("VJB8"),o=i("WIyV"),n=i("7jNx"),l=i("MPAK"),s=i("AK/a"),r={components:{customBaseTable:o.a,dialogAddCraft:n.default,selectProductCustomTransferTable:a.a},props:["initData","visible"],data:function(){return{rules:{assistProductName:[{required:!0,message:"请选择外协件",trigger:"change"}],craftName:[{required:!0,message:"请选择工艺名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{assistProductId:"",assistProductName:"",assistProductInfo:"",unitId:"",craftId:"",craftName:"",dtlJsonStr:""},tableData:[],editData:[],configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},AssistProductDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"800px",title:"选择外协件"},dialogName:"dialogProductOption"}},AssistAraftDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择工艺名称"},dialogName:"dialogAssistCraftOption"}},apiObj:{apiName:"listPageAssistProductDetail",params:{fieldCode:"prodInfo,unitName,ratio",addColumn:{columnKey:"prodInfo",columnName:"原材料"},prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:"null"}},customColumn:[{columnIndex:"prodInfo",width:"400",_cellConfig:{hideTitle:!0}},{columnIndex:"ratio",width:"120",componentName:"input",_cellConfig:{}}]}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.editData=[],this.editData=e)},getData:function(){this.$refs.customBaseTable.getData()},assistProductSelect:function(e){e[0]&&(this.formData.assistProductId=e[0].id,this.formData.assistProductName=e[0].name,this.formData.assistProductInfo=e[0].prodInfo,this.formData.unitId=e[0].unit)},assistAraftSelect:function(e){e[0]&&(this.formData.craftId=e[0].id,this.formData.craftName=e[0].name)},addCraft:function(){this.dialogData.isNeedShowResult="true",this.dialogData.title="新增工艺名称",this.openDialogName="dialogAddCraft",this.showDialog=!0,this.inLinVisible=!0},addProduct:function(){this.getData(),this.dialogData.data=this.editData,this.dialogData.isNeedRepeat=!1,this.dialogData.querySpare="isSpareAll",this.dialogData.fieldCode="prodInfo,unitName",this.dialogData.width="900px",this.dialogData.title="选择货品",this.openDialogName="selectProductCustomTransferTable",this.showDialog=!0,this.inLinVisible=!0},checkColumnByTable:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o="";null!=a.ratio&&(o=a.ratio+""),null==o||0==o.trim().length?t=t+"第 "+(i+1)+" 行: 单件用量为空或空字符串！":null!=o&&o.trim().length>0&&!Object(l.isNumberByValueSystem)(o)?t=t+"第 "+(i+1)+" 行: 单件用量("+o+") 输入错误，请输入大于零的正数支持2位小数！":null!=o&&o.trim().length>0&&Object(l.isNumberByValueSystem)(o)&&o/1<=0&&(t=t+"第 "+(i+1)+" 行: 单件用量("+o+") 输入错误，请输入大于零的正数支持2位小数！")}return t},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){if(e.editData=[],e.getData(),null==e.editData||0==e.editData.length)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"});var i=e.checkColumnByTable(e.editData);if(null!=i&&i.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:i});e.saveSaleOrder(e.editData)}})},saveSaleOrder:function(e){for(var t=this,i=[],a=0;a<e.length;a++){var o=e[a],n={productId:o.productId,ratio:o.ratio,unitId:o.unitId};i.push(n)}this.formData.dtlJsonStr="",null!=i&&i.length>0&&(this.formData.dtlJsonStr=JSON.stringify(i)),this.dialogLoading=!0,Object(s.addAssistProduct)(this.formData).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"selectProductCustomTransferTable"==e.pageName){var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelected(t)}else null!=e&&"dialogAdd"==e.pageName&&"true"==e.isNeedShowResult&&null!=e.Craft&&(this.formData.craftId=e.Craft.id,this.formData.craftName=e.Craft.name)},tableSelected:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={productId:i.id.trim(),prodInfo:i.prodInfo.trim(),unitId:i.unit,unitName:i.unitName,ratio:"0.00"};this.tableData.push(a)}}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},watch:{}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"800px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 0px 20px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,inline:!0,model:e.formData}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"外协件:",prop:"assistProductName"}},[i("base-input-option",{staticStyle:{width:"280px"},attrs:{dialog:e.AssistProductDialog.dialog},on:{callback:e.assistProductSelect},model:{value:e.formData.assistProductName,callback:function(t){e.$set(e.formData,"assistProductName",t)},expression:"formData.assistProductName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"工艺名称:",prop:"craftName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.AssistAraftDialog.dialog},on:{callback:e.assistAraftSelect},model:{value:e.formData.craftName,callback:function(t){e.$set(e.formData,"craftName",t)},expression:"formData.craftName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCraft}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{margin:"10px 0px 10px 0px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",[i("custom-base-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistBase_assistProduct_dialogAdd0",varList:e.tableData,showIndex:!1,showTableSet:!1,showCheckBox:!1,useDefaultBtn:!0,customColumn:e.customColumn,apiObj:e.apiObj},on:{callmethod:e.callMethod,databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"10px 0px 20px 0px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogAdd.vue";t.default=d.exports},tweV:function(e,t,i){"use strict";var a=i("JmJo");i.n(a).a},txrv:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("yt8O"),i("XfO3"),i("9AAn");var a=i("WIyV"),o=i("MPAK"),n=i("qXBt"),l={components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{qualityNameMap:new Map([["免检","1"],["检验","2"]]),parentData:{},showDialog:!1,dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],rowTableList:[],apiObj:{apiName:"listPageOrderDetailQueryBySign",params:{fieldCode:"prodInfo,orderUnitName,orderCount,signFineCount,signCount,signInCount,maxAarriveCount,arriveCount,quality",prodColumnKey:"productCode,productName,productSpec,productProperty",orderId:""}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"arriveCount",width:"120",componentName:"input",_cellConfig:{}},{columnIndex:"quality",width:"100",componentName:"select",_cellConfig:{hideTitle:!0,options:[{id:"免检",label:"免检"},{id:"检验",label:"检验"}]}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.apiObj.params.orderId=this.initData.id,this.parentData=this.initData.parentData},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.purchaseOrderDetailBySignDialog.getData()},databridge:function(e){this.rowTableList=[],Array.isArray(e)&&(this.rowTableList=e)},closeDialog:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},checkColumnByArriveCount:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],n="";null!=a.arriveCount&&(n=a.arriveCount+"");var l="";null!=a.maxAarriveCount&&(l=a.maxAarriveCount+""),null!=n&&n.trim().length>0&&!Object(o.isNumberByValueSystem)(n)?t=t+"第 "+(i+1)+" 行: 签收数量("+n+") 输入错误，请输入大于或等于零的整数(支持2位小数)！":null!=n&&n.trim().length>0&&Object(o.isNumberByValueSystem)(n)&&n/1<0?t=t+"第 "+(i+1)+" 行: 签收数量("+n+") 输入错误，请输入大于或等于零的整数(支持2位小数)！":null!=n&&n.trim().length>0&&Object(o.isNumberByValueSystem)(n)&&n/1-l/1>0&&(t=t+"第 "+(i+1)+" 行: 签收数量("+n+") 输入错误，签收数不可大于允许签收数！")}return t},save:function(){this.rowTableList=[],this.getData();var e=this.checkColumnByArriveCount(this.rowTableList);if(null!=e&&e.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:e});else{var t=[];if(this.rowTableList.length>0)for(var i=0;i<this.rowTableList.length;i++){var a=this.rowTableList[i],o="";null!=a.arriveCount&&(o=a.arriveCount+""),o.trim().length>0&&o.trim()/1>0&&t.push(a)}0!=t.length?t.length>0&&this.saveOrderSign(t):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少签收一行数据"})}},saveOrderSign:function(e){for(var t=this,i=[],a=0;a<e.length;a++){var o=e[a],l="免检";null!=o.quality&&null!=o.quality.item&&null!=o.quality.item.id?l=o.quality.item.id:null!=o.quality&&o.quality.trim().length>0&&(l=o.quality.trim());var s=this.qualityNameMap.get(l),r={orderId:o.orderId,orderDetailId:o.id,orderUnit:o.orderUnit,productId:o.productId,arriveCount:o.arriveCount,price:o.price,quality:s,qualityType:o.purchaseQualityType,p2nFormula:o.p2nFormula,p2nIsScale:o.p2nIsScale,p2nDecimalCount:o.p2nDecimalCount};i.push(r)}var c="";null!=i&&i.length>0&&(c=JSON.stringify(i)),this.dialogLoading=!0,Object(n.addPurchaseSign)({orderId:this.parentData.id,roleId:this.$storage.get("userInfo").roleIds,supplierId:this.parentData.supplierId,supplierName:this.parentData.supplierName,dtlJsonStr:c}).then(function(e){0===e.code&&(t.dialogLoading=!1,t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"70%"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"20px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"purchaseOrderDetailBySignDialog",attrs:{"data-custom-table-id":"views_purchase_orderSign_createSign_selectOrderDetail0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!1,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"purchaseOrderDetailBySignDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);r.options.__file="selectOrderDetail.vue";t.default=r.exports},u3r8:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("WIyV"),o=i("CIQn"),n=i("sanI"),l=i("JcIl"),s={components:{customBaseTable:a.a,dialogAddCustomer:n.default,productTableDialog:o.a},props:["initData","visible"],data:function(){return{rules:{customerName:[{required:!0,message:"请选择客户名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{customerId:"",customerName:"",type:"",typeName:"",remarkParent:"",dtlJsonStr:"",isAutoCommit:""},tableData:[],orderDtlList:[],configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},CustomerDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择客户名称",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"df7cb67fca4148bc9632c908e4a7fdea",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}},apiObj:{apiName:"listPageSaleWaresRetreatDetail",params:{type:"add",fieldCode:"productCode,productName,productSpec,orderUnitName,orderCount,orderPrice,orderSum,remark"}},customColumn:[{columnIndex:"orderCount",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{greaterThan:["0",!1]}],message:["退货数量不能为空！","请输入大于零的正整数或(1,2)位小数！","不可等于零！"]}},{columnIndex:"orderPrice",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]{1,4})?$"},{greaterThan:["0",!1]}],message:["单价不能为空！","请输入大于零的正整数或(1,4)位小数！","不可等于零！"]}},{columnIndex:"orderSum",componentName:"input",_cellConfig:{hideTitle:!0,compute:"self@orderCount(*)self@orderPrice"}},{columnIndex:"remark",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{maxExpectDate:""},customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>{{data.total.toFixed(2)}}</span></li>\n                    </ul>'},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},data:{total:"0.00"},computes:{total:"table@orderSum"}}}},beforeCreate:function(){},created:function(){this.temp.type="1",this.temp.typeName="退货退款"},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},databridge:function(e){Array.isArray(e)&&(this.orderDtlList=[],this.orderDtlList=e)},customerSelect:function(e){e[0]&&(this.temp.customerId=e[0].id,this.temp.customerName=e[0].name)},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.$refs.addWaresRetreat.getData(),null!=e.orderDtlList&&e.orderDtlList.length>0&&e.saveSaleOrder(e.orderDtlList))})},saveSaleOrder:function(e){for(var t=this,i=[],a=0;a<e.length;a++){var o=e[a],n={productId:o.productId,orderUnit:o.orderUnit,orderCount:o.orderCount,orderPrice:o.orderPrice,remark:o.remark};i.push(n)}this.temp.dtlJsonStr="",null!=i&&i.length>0&&(this.temp.dtlJsonStr=JSON.stringify(i)),this.$confirm("是否将该退货单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){t.dialogLoading=!0,t.temp.isAutoCommit="true",Object(l.addSaleWaresRetreat)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}).catch(function(e){"cancel"==e&&(t.dialogLoading=!0,t.temp.isAutoCommit="false",Object(l.addSaleWaresRetreat)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1}))})},addProduct:function(){this.dialogData.fieldCode="code,name,spec,unitName,genreName",this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=[];null!=e.tableSelectList&&(t=e.tableSelectList),this.tableSelected(t),e.customerId&&(this.temp.customerId=e.customerId),e.customerName&&(this.temp.customerName=e.customerName)},tableSelected:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={productId:i.id.trim(),productCode:i.code.trim(),productName:i.name.trim(),productSpec:i.spec.trim(),productGenreName:i.genreName.trim(),orderUnit:i.unit.trim(),orderUnitName:i.unitName.trim(),orderCount:"",orderPrice:"",orderSum:""};this.tableData.push(a)}}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName},size:function(){return this.$store.getters.size}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px",size:e.size}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"退货类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{readonly:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"客户名称:",prop:"customerName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"160px"},style:e.formItemWidthByAddButton,attrs:{dialog:e.CustomerDialog.dialog},on:{callback:e.customerSelect},model:{value:e.temp.customerName,callback:function(t){e.$set(e.temp,"customerName",t)},expression:"temp.customerName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"0px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"备注:"}},[i("el-input",{staticStyle:{width:"160px"},model:{value:e.temp.remarkParent,callback:function(t){e.$set(e.temp,"remarkParent",t)},expression:"temp.remarkParent"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"addWaresRetreat",attrs:{"data-custom-table-id":"views_sale_retreatByWares_createWaresRetreat_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"addWaresRetreat",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAdd.vue";t.default=c.exports},"uGR+":function(e,t,i){"use strict";i.r(t);i("f3/d"),i("91GP");var a=i("varj"),o=i("uTIz"),n=(i("xMja"),i("F4/0")),l=i("K3g7"),s={components:{customTransferTable:a.a,dialogAdd:n.default,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{temp:{},tempLable:{},tempQuery:{},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},treeData:[],treeConfigs:{ref:"tree",showCheckBox:!1,showIcons:!1,showSearch:!0,showDisable:!1},selectTree:{pid:"",id:"",layer:"",name:""},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",icon:"refresh",state:!0,plain:!0,method:this.resetQuery,isShow:!0}],stateBtnData:{},aboveTableConfig:{apiObj:{apiName:"listPageSimpleWarehouseProductView",params:{fieldCode:"warehouseName,code,name,spec,unitName,genreName,stockCount",stockCountQuery:"stockCountNotZero",isNeedEntity:"true",isNotNeedSpare:"true"}},customColumn:[],tempData:{},showIndex:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,leftFixed:2,rightFixed:1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[],tempData:{},showIndex:!1,showCheckBox:!1,leftFixed:2,rightFixed:1,dragTable:!1,entireRowDrag:!1},addColumns:[],hideColumns:["remark"],tableSelectList:[]}},created:function(){this.initTree()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},closeWin:function(){this.isVisible=!1},dialogClose:function(e){(e={}).resState=this.resState,this.$emit("close-dialog",e||{})},closeDialog:function(e){e.resState&&(this.resState=e.resState,"ok"===e.resState&&this.dialogClose()),this.showDialog=!1},tableSelected:function(e){this.tableSelectList=e,this.toAddWarehouseMove()},confrim:function(){this.$refs.trabsferTables.getTableSelected()},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()},queryTable:function(){this.tempQuery.warehouseId=this.selectTree.id,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.tempQuery.warehouseId=this.selectTree.id,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)},initTree:function(){var e=this;e.dialogLoading=!0,Object(l.treeWarehouse)({id:"2d75e49bcb9911e884ad00163e105f05",isNeedEntity:"true",isNotNeedSpare:"true"}).then(function(t){e.loadTree(t)}).catch(function(t){e.dialogLoading=!1})},loadTree:function(e){var t=[],i=e.result.treeList;this.selectTree={pid:i.pid,id:i.id,layer:i.layer,name:i.name,virtualGenre:i.virtualGenre},t.push(i),this.treeData=t,this.dialogLoading=!1},toAddWarehouseMove:function(){var e="";if(null!=this.tableSelectList&&0!=this.tableSelectList.length||(e="请至少选择一行数据！"),e.length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:e});else{var t=.6*document.body.clientWidth;this.dialogData.dialog_width=t+"px";var i=.75*(.618*t)+"px";this.dialogData.table_style="height:"+i+";width: 96%;margin-left: 2%;";var a="",o="";if(this.tableSelectList.length>0)for(var n=0;n<this.tableSelectList.length;n++){var l=this.tableSelectList[n],s=l.id,r=l.warehouseId;a=null==a||""==a?"'"+s+"'":a+",'"+s+"'",o=null==o||""==o?"'"+r+"'":o+",'"+r+"'"}this.dialogData.ids=a,this.dialogData.warehouseIds=o,this.dialogData.title="创建移库单",this.openDialogName="dialogAdd",this.showDialog=!0,this.inLinVisible=!0}},treeDataBridge:function(e){this.selectTree={pid:e.nodeData.pid,id:e.nodeData.id,layer:e.nodeData.layer,name:e.nodeData.name,pathId:e.pathId},this.tempQuery.warehouseId=this.selectTree.id,this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.tempQuery)}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{"background-color":"#F9FAFC","overflow-y":"auto",padding:"8px"},attrs:{span:4}},[i("base-tree",{ref:"tree",attrs:{data:e.treeData,treeConfigs:e.treeConfigs},on:{treedatabridge:e.treeDataBridge}})],1),e._v(" "),i("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1200px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{attrs:{placeholder:"货品编码"},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{attrs:{placeholder:"货品名称"},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:5}},[i("el-form-item",{attrs:{label:"规格型号："}},[i("el-input",{attrs:{placeholder:"规格型号"},model:{value:e.tempQuery.spec,callback:function(t){e.$set(e.tempQuery,"spec",t)},expression:"tempQuery.spec"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList,stateBtn:e.stateBtnData},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogProductTree.vue";t.default=c.exports},uGws:function(e,t,i){},uH3l:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("pIFo");var a=i("WZUi");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"equipmentFormulaView",components:{equipmentFormula:i("fydv").a},props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,apiObj:{apiName:"findListEquipmentSensorByEquipment",params:{equipmentId:this.initData.equipmentId}},formulaData:null}},created:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(){this.$emit("close-dialog",this.formulaData)},save:function(){this.$refs.equipmentFormula.getData()},databridge:function(e){var t=this,i=e.formulaStr,o=i.substr(i.indexOf("=")+1,i.length-i.indexOf("=")+1),n=o,l=e.resultObj;if(l&&l.length>0)for(var s=l.length,r=0;r<s;r++)if(l[r]){var c=l[r];o=o.replace(c.targetName,"("+c.targetCode+")"),n=n.replace(c.targetName,"("+c.targetFormula+")")}e.targetFormulaDisplay=i,e.targetFormula=o,e.targetFormulaSql=n,this.dialogLoading=!0,Object(a.checkEquipmentSensorFormula)({equipmentId:this.initData.equipmentId,colStr:n,viewStr:""}).then(function(i){t.dialogLoading=!1,0===i.code&&(t.formulaData=e,t.isVisible=!1)}).catch(function(e){t.dialogLoading=!1})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":"","close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,layoutType:2,width:"672px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"10px","padding-bottom":"0"}},[i("div",{staticStyle:{height:"100%","border-left":"1px solid #e4e4e4","margin-bottom":"10px"}},[i("equipment-formula",{ref:"equipmentFormula",attrs:{width:"650px",apiObj:e.apiObj,paramName:this.initData.targetName},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])])},[],!1,null,null,null);s.options.__file="dialogEquipmentFormula.vue";t.default=s.exports},uIi3:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" :disabled=true></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},n={components:{treeFormTable:i("7cmB").a},name:"dialog-add",props:["initData","visible"],data:function(){return{secondFieldCode:"warehouseName,actualCount,executorName,endDate,remark",rootData:{},tableSets:{1:{showCheckBox:!1,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},currentpage:1,customColumn:{1:[{columnIndex:"isdisable",component:o,changeState:this.changeState}]},editable:{suggestCount:{}},apiObj:{apiName:"listPageWarehouseOutDetailsOutRecords",params:{secondFieldCode:""}},addedData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"选择员工",data:null,temp:{},tempLable:null,isSingle:!0,tableUrl:"/warehouseProduct/listPageWarehouseProductsDispatchOption",tableParm:{}},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{}}},created:function(){this.temp=this.initData.temp;var e=this.initData.temp.warehouseOutId;e&&(this.apiObj.params={queryStr:"detail.parent_id in ('"+e+"') ",pageNo:1,firstFieldCode:"warehouseOutCode,productCode,productName,productSpec,productUnitName,count,executeCount,stateName"}),this.apiObj.params.secondFieldCode=this.secondFieldCode},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=a(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},sendChildrenRow:function(e){},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},formData:function(e){},closeDialog:function(e,t){}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px",top:"50px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{"margin-left":"17%","margin-top":"30px","font-size":"15px","font-weight":"500"}},[i("el-col",{attrs:{span:8}},[i("span",[e._v("出库单号 : "+e._s(e.temp.outCode))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("接收单位 : "+e._s(e.temp.outDeptName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("出库类型 : "+e._s(e.temp.outTypeName))])])],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"17%","margin-top":"10px","font-size":"15px","font-weight":"500"}},[i("el-col",{attrs:{span:8}},[i("span",[e._v("制单人 : "+e._s(e.temp.outMakeName))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("制单时间 : "+e._s(e.temp.outCdate))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("span",[e._v("状态 : "+e._s(e.temp.outStateName))])])],1),e._v(" "),i("el-row",{staticStyle:{"margin-top":"50px",width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none"}},[i("tree-form-table",{ref:"treeFormTable",attrs:{"expand-all":!0,initData:e.rootData,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:e.editable,apiObj:e.apiObj,addedData:e.addedData},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,"send-children-row":e.sendChildrenRow,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogWarehouseOutByDeliver.vue";t.default=s.exports},uJvo:function(e,t,i){"use strict";var a=i("ccOI");i.n(a).a},uTIz:function(e,t,i){"use strict";i("rE2o"),i("ioFf"),i("pIFo"),i("91GP"),i("yt8O"),i("RW0V"),i("Z2Ku"),i("L9s1"),i("rGqo"),i("f3/d");var a=i("z0WU"),o=i("WwWg"),n=i("lNSx"),l=i("QWlu");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{searchTree:function(){return i.e("VASZ").then(i.bind(null,"VASZ"))},searchTable:function(){return i.e("wlEh").then(i.bind(null,"wlEh"))},treeAndTable:function(){return i.e("chunk-6f21").then(i.bind(null,"Aqwb"))}},name:"search-bar",props:{searchList:{type:Array,default:function(){return[]}},searchMethod:{type:Object,default:function(){return{}}},searchConfig:{type:Object,default:function(){return{}}},searchBtns:{type:Array,default:function(){return[]}},inChart:{type:Boolean,default:!1}},data:function(){return{hideTime:500,clientHeight:0,dynaHeightTimer:null,formData:{code:"",name:"",isdisable:""},topBarBtnList:[{name:"查询",icon:"search",state:!1,method:this.queryData,isShow:!0},{name:"重置",icon:"refresh",state:!1,plain:!0,method:this.resetQuery,isShow:!0}],searchMap:{},searchLabelWidth:0,upIndex:0,closeSearchBoxUpdate:!0,guid:"",createTime:0,inMain:!1,asynSearchList:["cascader"],magnifierData:{},searchStyleTimer:"",clientDataTimer:"",arrowState:null}},created:function(){this.createStore(),this.guid=Object(o.a)(),this.$emit("send-guid",this.guid),Object(o.e)(this),this.createTime=(new Date).getTime(),this.setDefaultValue()},mounted:function(){var e=this;/^[el\-]/.test(this.$el.parentNode.parentNode.className)?this.inMain=!1:this.inMain=!0,this.setInMain&&this.$store.commit(this.guid+"/SET_CLIENTDATA",{clientHeight:this.$el.parentNode.clientHeight,clientWidth:this.$el.parentNode.clientWidth,rootWidth:this.$root.$el.clientWidth,rootHeight:this.$root.$el.clientHeight}),this.setInMain&&!this.searchConfig.hideSearchSwitch?(this.$store.commit(this.guid+"/SET_DYNAHEIGHTSTATE",this.$storage.get("dynaHeightState")||"0"),this.arrowState=this.$storage.get("dynaHeightState")||"0"):this.$store.commit(this.guid+"/SET_ARROWBTN",20),this.$nextTick(function(t){e.setSearchLabelWidth(),l.a.on(window,"resize",e.resizeFn),setTimeout(function(t){e.$store.commit(e.guid+"/SET_SEARCHHEIGHT",e.$refs.searchFrom.$el.clientHeight)},10)})},updated:function(){},beforeDestroy:function(){Object(o.h)(this.$store,this.guid),l.a.off(window,"resize",this.resizeFn)},methods:{setDatePickerType:function(e){try{return e.configs.dynamic.options[this.searchMap[e.configs.dynamic.key]]}catch(e){return"date"}},resizeFn:function(){var e=this;clearTimeout(e.clientDataTimer),e.clientDataTimer=setTimeout(function(t){e.$nextTick(function(t){e.$store.commit(e.guid+"/SET_CLIENTDATA",{clientHeight:e.$el.parentNode.clientHeight,clientWidth:e.$el.parentNode.clientWidth,rootWidth:e.$root.$el.clientWidth,rootHeight:e.$root.$el.clientHeight}),setTimeout(function(t){e.$store.commit(e.guid+"/SET_SEARCHHEIGHT",e.$refs.searchFrom.$el.clientHeight)},10)})},300)},changeComponent:function(e,t){this.magnifierData[e.mapKey+"Dialog"+t]=!0,this.magnifierData[e.mapKey+"Visible"+t]=!0},closeDialog:function(e,t){e?(this.magnifierData[t.mapKey+"Visible"+t.keyIndex]=!1,this.magnifierData[t.mapKey+"Dialog"+t.keyIndex]=!1,"table"===t.dialogType||"treeAndTable"===t.dialogType?this.searchMap[t.mapKey]=e.length?e[0].name:"":this.searchMap[t.mapKey]=e.nodeData?e.nodeData.name:""):(this.magnifierData[t.mapKey+"Visible"+t.keyIndex]=!1,this.magnifierData[t.mapKey+"Dialog"+t.keyIndex]=!1,this.searchMap[t.mapKey]="")},createStore:function(){var e=this;this.searchList.forEach(function(t,i){e.asynSearchList.indexOf(t.type)>-1&&Object(o.f)(e,t.configs)})},setDefaultValue:function(){var e=this;this.searchList.forEach(function(t,i){t.configs&&Object.keys(t.configs).includes("defaultValue")&&e.$set(e.searchMap,t.mapKey,t.configs.defaultValue)})},setSearchLabelWidth:function(){var e=0,t=this.$refs.searchFrom?this.$refs.searchFrom.$el.querySelectorAll(".el-form-item"):[];(t=[].slice.call(t)).length&&(t.forEach(function(t){var i=t.querySelector(".el-form-item__label");e<i.clientWidth&&(e=i.clientWidth)}),this.searchLabelWidth=e)},resetDynaHeight:function(){var e=this;e.closeSearchBoxUpdate=!1,e.dynaHeightState-0?(e.$storage.remove("dynaHeightState"),e.$storage.set("dynaHeightState","0"),e.$store.commit(e.guid+"/SET_DYNAHEIGHTSTATE","0"),clearTimeout(e.dynaHeightTimer),e.dynaHeightTimer=setTimeout(function(){e.arrowState="0"},e.hideTime)):e.dynaHeightState-0||(e.$storage.remove("dynaHeightState"),e.$storage.set("dynaHeightState","1"),e.$store.commit(e.guid+"/SET_DYNAHEIGHTSTATE","1"),clearTimeout(e.dynaHeightTimer),e.dynaHeightTimer=setTimeout(function(){e.arrowState="1"},e.hideTime))},queryData:function(){var e=this;e.$refs.searchFrom.validate(function(t){if(t)if(e.searchMethod.api){var i=Object.assign({},e.searchMap,e.searchMethod.data);e.$axios.post(e.searchMethod.api,i).then(function(t){e.$emit("search-res",t),e.$loading().close()})}else e.$emit("search-map",e.searchMap)})},resetQuery:function(){for(var e in this.searchMap){var t=s(this.searchMap[e]);this.searchMap[e]="string"===t?"":"number"===t?0:"boolean"!==t&&("object"===t?Array.isArray(this.searchMap[e])?[]:{}:"function"===t?function(e){}:"")}this.$emit("search-map",this.searchMap)},cascaderChange:function(){}},computed:{sys:function(){return this.$store.getters.systemInfo},size:function(){return this.$store.getters.size},searchBoxHeight:function(){return this.$store.getters[this.guid+"/searchBoxHeight"]},dynaHeight:function(){return this.$store.getters[this.guid+"/dynaHeight"]},dynaHeightState:function(){return this.$store.getters[this.guid+"/dynaHeightState"]},clientData:function(){return this.$store.getters[this.guid+"/clientData"]},clientWidth:function(){var e=0;return this.setInMain||(e=41),this.clientData?this.clientData.clientWidth-e:"auto"},setFormContentWidth:function(){return this.clientData.rootWidth<=1024?120:this.clientData.rootWidth>1024&&this.clientData.rootWidth<=1280?120:this.clientData.rootWidth>1280&&this.clientData.rootWidth<=1440?140:180},setFormItemWidth:function(){return this.setFormContentWidth+this.searchLabelWidth+"px"},searchBtnClass:function(){if(!this.setInMain)return"stand";var e=this.clientData?this.clientData.rootWidth:1024;return e>1600?this.searchList.length>6?"stand":"flat":1600>=e&&e>1440?this.searchList.length>5?"stand":"flat":1440>=e&&e>1280?this.searchList.length>4?"stand":"flat":1280>=e&&e>1024?this.searchList.length>3?"stand":"flat":1024>=e?this.searchList.length>3?"stand":"flat":void 0},searchBtnWidth:function(){return this.setInMain?"stand"===this.searchBtnClass?this.clientWidth-100:this.clientWidth-200:this.clientWidth-100.5},dateFormat:function(){return function(e){var t=e.configs.type;return"week"===t?"yyyy 第 WW 周":"month"===t?"yyyy-MM":"year"===t?"yyyy":"yyyy-MM-dd"}},datePickerOptions:function(){return function(e){var t={};t.shortcuts=[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"明天",onClick:function(e){var t=new Date;t.setTime(t.getTime()+864e5),e.$emit("pick",t)}}];var i=Object.keys(e);if(i.includes("disabledDate")&&Array.isArray(e.disabledDate)&&e.disabledDate.length){var o=Object(a.h)(e.disabledDate[0]),n=Object(a.h)(e.disabledDate[1]);t.disabledDate=function(e){return o&&n?o>e.getTime()||n<e.getTime():o&&!n?o>e.getTime():n&&!o?n<e.getTime():void 0}}return i.includes("hideShortcuts")&&e.hideShortcuts&&delete t.shortcuts,i.includes("hidePicker")&&e.hidePicker&&(t=null),t}},fromRules:function(){var e=this;if(this.searchList.length){var t={};return this.searchList.forEach(function(i){i.ruleType&&e.searchMap[i.mapKey]&&n.a[i.ruleType]&&(t[i.mapKey]=n.a[i.ruleType](i.ruleOps?i.ruleOps:null))}),t}return{}},searchBtnList:function(){return this.searchBtns.length?(this.searchBtns[0]&&(this.searchBtns[0].method=this.queryData),this.searchBtns[1]&&(this.searchBtns[1].method=this.resetQuery),this.searchBtns):this.topBarBtnList},cascaderOps:function(){var e=this;return function(t,i){return e.$store.getters[t.apiName+"/dataList"]}},magnifierDialog:function(){var e=this;return function(t,i){return void 0===e.magnifierData[t.mapKey+"Dialog"+i]&&e.$set(e.magnifierData,t.mapKey+"Dialog"+i,!1),e.magnifierData[t.mapKey+"Dialog"+i]}},dialogProp:function(){return function(e,t){return e.configs.dialogType.indexOf("And")>-1?e.configs.dialogType:"search"+e.configs.dialogType.replace(/( |^)[a-z]/g,function(e){return e.toUpperCase()})}},dialogData:function(){return function(e,t){return e.configs.mapKey=e.mapKey,e.configs.keyIndex=t,e.configs}},visible:function(){var e=this;return function(t,i){return void 0===e.magnifierData[t.mapKey+"Visible"+i]&&e.$set(e.magnifierData,t.mapKey+"Visible"+i,!1),e.magnifierData[t.mapKey+"Visible"+i]}},setInMain:function(){return!!this.inChart||this.inMain}},watch:{searchMap:{handler:function(e,t){var i=!1,a=[];for(var o in e)this.fromRules[o]&&!e[o]&&a.push(o),e[o]&&(i=!0);this.$refs.searchFrom.clearValidate(a),this.setInMain||i||this.$emit("search-map",null)},deep:!0}}},c=(i("Z1wF"),i("KHd+")),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.searchList.length?i("div",{staticClass:"searchBar",style:{padding:e.setInMain?0:"0 10px"}},[i("el-row",{staticStyle:{"box-sizing":"border-box",position:"relative",overflow:"hidden",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},style:{height:e.dynaHeight+"px"}},[i("div",{staticStyle:{position:"absolute",top:"0",left:"0",right:"0"},style:{height:e.searchBoxHeight+"px"}},[i("div",{staticStyle:{float:"left",height:"100%"},style:{width:e.searchBtnWidth+"px"}},[i("el-form",{ref:"searchFrom",class:{inDialog:!e.setInMain,dynaFrom:"mini"!==e.size},style:{padding:"mini"===e.size&&e.searchList.length<7?"10px 0":""},attrs:{inline:"",model:e.searchMap,rules:e.fromRules,"label-position":"left","label-width":e.searchLabelWidth?e.searchLabelWidth+"px":"auto",size:e.size}},[e._l(e.searchList,function(t,a){return["input"===t.type?[i("el-form-item",{key:a,style:{"min-width":e.setFormItemWidth,"max-width":e.setFormItemWidth},attrs:{label:t.label?t.label:"未定义",prop:t.mapKey}},[i("el-input",{attrs:{type:t.configs.type,placeholder:t.placeholder,disabled:t.configs.disabled,clearable:!1!==t.configs.clearable||t.configs.clearable},model:{value:e.searchMap[t.mapKey],callback:function(i){e.$set(e.searchMap,t.mapKey,i)},expression:"searchMap[item.mapKey]"}})],1)]:"select"===t.type?[i("el-form-item",{key:a,style:{"min-width":e.setFormItemWidth,"max-width":e.setFormItemWidth},attrs:{label:t.label?t.label:"未定义",prop:t.mapKey}},[i("el-select",{attrs:{name:t.configs.name,disabled:t.configs.disabled,clearable:!1!==t.configs.clearable||t.configs.clearable,multiple:t.configs.multiple,filterable:t.configs.filterable,"default-first-option":t.configs["default-first-option"],placeholder:t.placeholder},model:{value:e.searchMap[t.mapKey],callback:function(i){e.$set(e.searchMap,t.mapKey,i)},expression:"searchMap[item.mapKey]"}},e._l(t.configs.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]:"date"===t.type?[i("el-form-item",{key:a,style:{"max-width":"daterange"===t.configs.type?"320px":e.setFormItemWidth,"min-width":"daterange"===t.configs.type?"320px":e.setFormItemWidth},attrs:{label:t.label?t.label:"未定义",prop:t.mapKey}},[i("el-date-picker",{attrs:{type:t.configs.dynamic?e.setDatePickerType(t):t.configs.type?t.configs.type:"date","range-separator":"daterange"===t.configs.type?"至":"","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"",editable:!!t.configs.editable&&t.configs.editable,format:e.dateFormat(t),"value-format":"week"===t.configs.type?"":e.dateFormat(t),placeholder:"选择日期","picker-options":e.datePickerOptions(t.configs.pickerOptions)},model:{value:e.searchMap[t.mapKey],callback:function(i){e.$set(e.searchMap,t.mapKey,i)},expression:"searchMap[item.mapKey]"}})],1)]:"time"===t.type?[i("el-form-item",{key:a,style:{"min-width":e.setFormItemWidth,"max-width":e.setFormItemWidth},attrs:{label:t.label?t.label:"未定义",prop:t.mapKey}},[t.configs.pickerOptions.start&&t.configs.pickerOptions.end&&t.configs.pickerOptions.step?i("el-time-select",{attrs:{editable:!!t.configs.editable&&t.configs.editable,"value-format":"HH:mm:ss","picker-options":t.configs.pickerOptions,placeholder:t.placeholder},model:{value:e.searchMap[t.mapKey],callback:function(i){e.$set(e.searchMap,t.mapKey,i)},expression:"searchMap[item.mapKey]"}}):i("el-time-picker",{attrs:{editable:!!t.configs.editable&&t.configs.editable,"value-format":"HH:mm:ss","picker-options":t.configs.pickerOptions,placeholder:t.placeholder},model:{value:e.searchMap[t.mapKey],callback:function(i){e.$set(e.searchMap,t.mapKey,i)},expression:"searchMap[item.mapKey]"}})],1)]:"dateTime"===t.type?void 0:"cascader"===t.type?[i("el-form-item",{key:a,style:{"min-width":e.setFormItemWidth,"max-width":e.setFormItemWidth},attrs:{label:t.label?t.label:"未定义",prop:t.mapKey}},[i("el-cascader",{attrs:{filterable:void 0===t.configs.filterable||t.configs.filterable,clearable:void 0===t.configs.clearable||t.configs.clearable,props:t.configs.props?t.configs.props:{},"expand-trigger":t.configs.expand?t.configs.expand:"hover","show-all-levels":!!t.configs.showLevels&&t.configs.showLevels,"change-on-select":!!t.configs.onChange&&t.configs.onChange,options:t.configs.apiName&&t.configs.params?e.cascaderOps(t.configs,a):t.configs.options&&t.configs.options.length?t.configs.options:[]},on:{change:e.cascaderChange},model:{value:e.searchMap[t.mapKey],callback:function(i){e.$set(e.searchMap,t.mapKey,i)},expression:"searchMap[item.mapKey]"}})],1)]:"magnifier"===t.type?[i("el-form-item",{key:a,staticClass:"magnifier",style:{"min-width":e.setFormItemWidth,"max-width":e.setFormItemWidth},attrs:{label:t.label?t.label:"未定义",prop:t.mapKey}},[i("el-input",{attrs:{placeholder:t.placeholder,disabled:""},model:{value:e.searchMap[t.mapKey],callback:function(i){e.$set(e.searchMap,t.mapKey,i)},expression:"searchMap[item.mapKey]"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(i){e.changeComponent(t,a)}},slot:"append"})],1),e._v(" "),e.magnifierDialog(t,a)?i(e.dialogProp(t,a),{tag:"component",attrs:{initData:e.dialogData(t,a),visible:e.visible(t,a)},on:{"close-dialog":e.closeDialog}}):e._e()],1)]:"radio"===t.type?[i("el-form-item",{key:a,style:{"min-width":e.setFormItemWidth,"max-width":e.setFormItemWidth},attrs:{label:t.label?t.label:"未定义",prop:t.mapKey}},[i("el-radio-group",{model:{value:e.searchMap[t.mapKey],callback:function(i){e.$set(e.searchMap,t.mapKey,i)},expression:"searchMap[item.mapKey]"}},e._l(t.configs.options,function(t,a){return i("el-radio",{attrs:{label:a}},[e._v(e._s(t))])}),1)],1)]:e._e()]})],2)],1),e._v(" "),i("div",{class:[e.searchBtnClass],staticStyle:{float:"right",height:"100%"}},[i("div",{staticStyle:{height:"100%"}},[e.setInMain?e._l(e.searchBtnList,function(t,a){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:a,attrs:{name:t.name,icon:t.icon,plain:t.plain,size:t.size||e.size,state:t.state},on:{myclick:t.method}})]}):[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.searchBtnList[0].isShow,expression:"searchBtnList[0].isShow"}],attrs:{name:e.searchBtnList[0].name,icon:e.searchBtnList[0].icon,plain:e.searchBtnList[0].plain,state:e.searchBtnList[0].state,size:e.searchBtnList[0].size||e.size},on:{myclick:e.searchBtnList[0].method}})]],2)])])]),e._v(" "),(e.searchConfig.hideSearchSwitch?!e.searchConfig.hideSearchSwitch:e.setInMain)?i("el-row",{staticStyle:{position:"relative",height:"20px"}},[i("div",{staticStyle:{position:"absolute",bottom:"10px",left:"0",right:"0",height:"1px","background-color":"rgb(228,228,228)","z-index":"10"}},[i("div",{staticStyle:{position:"relative"}},[i("el-tooltip",{attrs:{effect:"dark",content:e.arrowState-0?"收起搜索":"展开搜索",placement:"bottom","hide-after":e.hideTime}},[e.arrowState-0?i("el-button",{staticStyle:{position:"absolute",left:"50%",top:"-10.5px",transform:"translate(-50%,0)",width:"1.5em",height:"1.5em",padding:"0"},attrs:{icon:"el-icon-arrow-up",circle:""},on:{click:e.resetDynaHeight}}):i("el-button",{staticStyle:{position:"absolute",left:"50%",top:"-10.5px",transform:"translate(-50%,0)",width:"1.5em",height:"1.5em",padding:"0"},attrs:{icon:"el-icon-arrow-down",circle:""},on:{click:e.resetDynaHeight}})],1)],1)])]):e._e()],1):e._e()},[],!1,null,null,null);d.options.__file="index.vue";t.a=d.exports},uas5:function(e,t,i){},ubh3:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("yt8O"),i("RW0V"),i("rGqo");var a=i("uTIz"),o=i("iF/k"),n=i("h5Ym"),l=i("ssTd"),s=i("mSNy"),r=i("4IJs"),c=i("Vobf"),d=i("z0WU");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){m(e,t,i[t])})}return e}function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.editBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.editBtns(scope.row,scope.$index)">编辑</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},g={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdefault" @change="colConfig.changeState(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},f={name:"dialog-add",props:["initData","visible"],data:function(){return{openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{width:400,title:"",temp:null,tempLable:null},isVisible:!1,inDialog:!0,guid:"",searchList:[{label:"编码",type:"input",mapKey:"code",configs:{},placeholder:"请输入编码"},{label:"名称",type:"input",ruleType:"string",mapKey:"name",configs:{},placeholder:"请输入货物名"}],searchConfig:{hideSearchSwitch:!1},initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:h,editBtns:this.editBtns,editBtns_isShow:!0}},configs:{topBarBtnList:[{name:"新增",nameEn:"add",isShow:!0,icon:"add",method:this.addNew},{name:"删除",nameEn:"delete",isShow:!0,icon:"delete",plain:!0,state:!0,method:this.deleteBatch}],tableConfigs:[],showCheckBox:!1,showIndex:!1},tableData:[],selectList:null,temp:{},tempQuery:{},tempLable:{},pageData:null,pageNo:1}},components:{searchBar:a.a,tableButton:o.a,addressAdd:n.default,addressEdit:l.default},beforeCreate:function(){},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable);this.initButtons();var e=this.temp.id;this.initTable(e,!0)},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{sendGuid:function(e){this.guid=e},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.refreshTable()},initButtons:function(){var e=this,t=e.$storage.get("userInfo").roleIds,i=e.$storage.get("menuId");t&&(e.$loading({spinner:"preloader",text:""}),Object(c.initMenuButtons)({menuId:i,roleId:t}).then(function(t){var i=t.buttonList;i&&i.forEach(function(t){if(e.initConfigs&&e.initConfigs.tableOperates)for(var i in e.initConfigs.tableOperates)i.indexOf(t.nameEn)>=0&&i.indexOf("isShow")>0&&(e.initConfigs.tableOperates[i]=!1);if(e.customColumn)for(var a in e.customColumn)if(a){var o=e.customColumn[a];o.length>0&&o.forEach(function(e){if(e)for(var i in e)i.indexOf(t.nameEn)>=0&&i.indexOf("isShow")>0&&(e[i]=!1)})}e.configs&&(e.configs.queryBarBtnList&&e.configs.queryBarBtnList.forEach(function(e){e.nameEn==t.nameEn&&(e.isShow=!1)}),e.configs.topBarBtnList&&e.configs.topBarBtnList.forEach(function(e){e.nameEn==t.nameEn&&(e.isShow=!1)}))})}).catch(function(t){e.$loading().close()}))},initTable:function(e,t){var i=this;Object(r.listPageCustomeAddress)(p({},i.tempQuery,{customerId:e,pageNo:i.pageNo})).then(function(e){i.getListPage(e),t&&i.$loading().close()}).catch(function(e){i.$loading().close()})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(d.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!0,this.configs.showIndex=!0,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==s.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==s.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==s.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==s.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"是否默认"===e.label&&(e.component=g,e.changeState=t.changeState)}),t.internationalConfig(),e.push(t.initConfigs.tableOperates),e},internationalConfig:function(){"en"==s.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==s.a.locale&&(this.initConfigs.tableOperates.label="操作")},changeState:function(e,t){var i=this,a=e.id,o=this.temp.id;Object(r.updateDefaultCustomerAddress)(a,o,e.isdefault).then(function(e){i.refreshTable()}).catch(function(t){"0"==e.isdefault&&(e.isdefault="1")})},dataBridge:function(e){this.selectList=e,e.length?this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!1)}):this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})},editBtns:function(e,t){this.resetTemp(),this.temp=JSON.parse(JSON.stringify(e)),this.dialogData.temp=this.temp,this.temp.customerId=this.temp.customerId,this.dialogData.tempLable=this.tempLable,this.dialogData.title="编辑",this.openDialogName="addressEdit",this.showDialog=!0,this.visible=!0},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},addNew:function(){this.dialogData.temp={name:null,mobile:null,phone:null,email:null,address:null,remark:null,isdefault:null,customerId:null},this.dialogData.temp.customerId=this.temp.id,this.temp.customerId=this.temp.id,this.dialogData.tempLable=this.tempLable,this.dialogData.title="新增",this.openDialogName="addressAdd",this.showDialog=!0,this.visible=!0},resetTemp:function(){for(var e in this.temp)this.temp[e]=""},deleteBatch:function(){var e=this;e.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t="";e.selectList.forEach(function(e){t+=e.id+","}),Object(r.deleteCustomerAddress)(t).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.refreshTable())}).catch(function(e){})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},refreshTable:function(){var e=this,t=this.temp.customerId;e.$axios.all([Object(r.listPageCustomeAddress)(p({},e.tempQuery,{customerId:t,pageNo:e.pageNo}))]).then(e.$axios.spread(function(t){e.getListPage(t)})).catch(function(e){})}},computed:m({tableHeight:function(){return this.$store.getters[this.guid+"/clientData"]?this.$store.getters[this.guid+"/clientData"].clientHeight-(this.searchList.length?this.$store.getters[this.guid+"/dynaHeight"]+30-this.$store.getters[this.guid+"/arrowBtn"]:0):0},dialogName:function(){return this.openDialogName},dialogWidth:function(){if(this.initData.width){var e=u(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},"dialogName",function(){return this.openDialogName}),watch:{pageNo:function(){var e=this.temp.id;this.initTable(e,null)}}},b=(i("sCiY"),i("KHd+")),v=Object(b.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{staticStyle:{padding:"10px"}},[e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticClass:"tableTopBar"},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{"padding-top":"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);v.options.__file="addressList.vue";t.default=v.exports},"ubz/":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("Qe0A"),l=i("a0Xs"),s=i("hZMg");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageForAddFromBOM",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",dtlJsonStr:this.initData.temp}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isOnlyEntity:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{deptType:"6d8a030ba1ce11e884ad00163e105f0a",type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this,t=this.$storage.get("userInfo");this.temp.makeId=t.userId,this.temp.makeName=t.userName,this.temp.businessCode=this.initData.businessCode,Object(s.findUserDepartmentByUser)({userId:this.temp.makeId,deptType:"6d8a030ba1ce11e884ad00163e105f0a"}).then(function(t){null!=t.deptId&&t.deptId.trim().length>0&&(e.temp.deptId=t.deptId.trim()),null!=t.deptName&&t.deptName.trim().length>0&&(e.temp.deptName=t.deptName.trim())}),this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="生产领料出库",this.temp.type="cb0a55d81e754cd3b59715d225dab087",this.apiObj.params.isreplaceable=this.initData.isreplaceable},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteData:function(e){this.$refs.orderAddDialog.deleteData(e)},deleteRow:function(e,t){var i=[],a=e.productId;if(null!=this.tableData&&this.tableData.length>0)for(var o=0;o<this.tableData.length;o++){var n=this.tableData[o];a!=n.productId&&i.push(n)}this.tableData=i,this.deleteData(e)},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(l.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={productId:l.productId,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount,remark:l.remark};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,t.temp.setCount=t.initData.setCount,Object(n.addWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,this.temp.deptId="",this.temp.deptName="",Object(s.findUserDepartmentByUser)({userId:this.temp.makeId,deptType:"6d8a030ba1ce11e884ad00163e105f0a"}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_produce_materialRequisition_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogAdd.vue";t.default=u.exports},uhSg:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d"),i("rGqo"),i("yt8O"),i("XfO3"),i("9AAn");var a=i("AUoE");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-add",props:["initData","visible"],mixins:[i("K77I").a],data:function(){return{deliverId:"",customerId:"",deliverType:"send",deliverTypeNameKeyMap:new Map([["send","1"],["deliver","2"],["self","3"]]),isShowSend:!0,isShowDeliver:!1,isShowSelf:!1,dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{deliverId:"",type:"",makeId:"",makeName:"",deliverDate:new Date,waybillCompany:"",waybillCode:"",customeAddressId:"",custAddress:"",custAddressName:"",custMobile:"",carCode:"",remark:""},tempLable:{},tempNotEditable:{},rules:{makeName:[{required:!0,message:"请选择经办人",trigger:"change"}],deliverDate:[{required:!0,message:"请填写发货日期",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",fullscreen:!1,tempLable:null},formTemp:[],MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择经办人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}},CustAddressDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择收货地址",tableUrl:"/base/customeAddress/listPageCustomeAddress",tableParm:{customerId:this.initData.temp.customerId,fieldCode:"name,mobile,address"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.deliverId=this.initData.temp.id,this.customerId=this.initData.temp.customerId,this.isShowSend=!1,this.isShowDeliver=!1,this.isShowSelf=!1,this.initData.temp&&("1"==this.initData.temp.type&&(this.isShowSend=!0,this.deliverType="send"),"2"==this.initData.temp.type&&(this.isShowDeliver=!0,this.deliverType="deliver"),"3"==this.initData.temp.type&&(this.isShowSelf=!0,this.deliverType="self"));var e=this.$storage.get("userInfo");null!=e.userId&&e.userId.trim().length>0&&(this.temp.makeId=e.userId.trim()),null!=e.userName&&e.userName.trim().length>0&&(this.temp.makeName=e.userName.trim())},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},radioChange:function(){this.isShowSend=!1,this.isShowDeliver=!1,this.isShowSelf=!1,"send"==this.deliverType?this.isShowSend=!0:"deliver"==this.deliverType?this.isShowDeliver=!0:"self"==this.deliverType&&(this.isShowSelf=!0)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},custAddressSelect:function(e){e[0]&&(this.temp.customeAddressId=e[0].id,this.temp.custAddressName=e[0].name,this.temp.custMobile=e[0].mobile,this.temp.custAddress=e[0].address)},save:function(){var e=this;this.dialogLoading=!0,this.temp.deliverId=this.deliverId,this.temp.type=this.deliverTypeNameKeyMap.get(this.deliverType),Object(a.updateSaleDeliverByDeliverType)(this.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})},closeDialog:function(e){this.showDialog=!1}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticStyle:{height:"90vh"},attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px",top:"10vh","custom-class":"listDeliverClass"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{height:"100%"}},[i("el-form",{ref:"submitForm",staticStyle:{height:"calc(100% - 61px)",overflow:"hidden"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{padding:"20px 50px"},style:{"box-shadow":e.showBoxShadow?"0px 5px 10px -10px black":""}},[i("el-radio-group",{on:{change:e.radioChange},model:{value:e.deliverType,callback:function(t){e.deliverType=t},expression:"deliverType"}},[i("el-radio",{attrs:{label:"send"}},[e._v("发货")]),e._v(" "),i("el-radio",{attrs:{label:"deliver"}},[e._v("送货")]),e._v(" "),i("el-radio",{attrs:{label:"self"}},[e._v("客户自提")])],1)],1),e._v(" "),i("div",{directives:[{name:"switchshadow",rawName:"v-switchshadow"}],staticStyle:{height:"calc(100% - 58px)","overflow-y":"auto"}},[i("el-form-item",{attrs:{label:"经办人：",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"发货日期：",prop:"deliverDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"发货日期","value-format":"yyyy-MM-dd"},model:{value:e.temp.deliverDate,callback:function(t){e.$set(e.temp,"deliverDate",t)},expression:"temp.deliverDate"}})],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowSend,expression:"isShowSend"}]},[i("el-form-item",{attrs:{label:"物流公司：",prop:"waybillCompany"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.waybillCompany,callback:function(t){e.$set(e.temp,"waybillCompany",t)},expression:"temp.waybillCompany"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"物流单号：",prop:"waybillCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.waybillCode,callback:function(t){e.$set(e.temp,"waybillCode",t)},expression:"temp.waybillCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"收货地址：",prop:"custAddress"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.CustAddressDialog.dialog},on:{callback:e.custAddressSelect},model:{value:e.temp.custAddress,callback:function(t){e.$set(e.temp,"custAddress",t)},expression:"temp.custAddress"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"联系人：",prop:"custAddressName"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.custAddressName,callback:function(t){e.$set(e.temp,"custAddressName",t)},expression:"temp.custAddressName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"手机号：",prop:"custMobile"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.custMobile,callback:function(t){e.$set(e.temp,"custMobile",t)},expression:"temp.custMobile"}})],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowDeliver,expression:"isShowDeliver"}]},[i("el-form-item",{attrs:{label:"车牌号：",prop:"carCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.carCode,callback:function(t){e.$set(e.temp,"carCode",t)},expression:"temp.carCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"收货地址：",prop:"custAddress"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.CustAddressDialog.dialog},on:{callback:e.custAddressSelect},model:{value:e.temp.custAddress,callback:function(t){e.$set(e.temp,"custAddress",t)},expression:"temp.custAddress"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"联系人：",prop:"custAddressName"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.custAddressName,callback:function(t){e.$set(e.temp,"custAddressName",t)},expression:"temp.custAddressName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"手机号：",prop:"custMobile"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.custMobile,callback:function(t){e.$set(e.temp,"custMobile",t)},expression:"temp.custMobile"}})],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowSelf,expression:"isShowSelf"}]},[i("el-form-item",{attrs:{label:"车牌号：",prop:"carCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.carCode,callback:function(t){e.$set(e.temp,"carCode",t)},expression:"temp.carCode"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},style:{"box-shadow":e.showBoxShadow?"0px -5px 10px -10px black":""},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},uoYy:function(e,t,i){"use strict";var a=i("yLpp");i.n(a).a},uupt:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("9rC1"),o={name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写名称",trigger:"change"}]},typeData:{},customerTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"customerType",isglobal:"0",isNeetOneLayer:"true"}},defaultSelected:[]},supplierTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"supplierType",isglobal:"0",isNeetOneLayer:"true"}},defaultSelected:[]},provinceData:{data:{selectUrl:"/system/dictionary/treeDictionarys",selectParm:{dictionaryKey:"area",cascade:"true"}},defaultSelected:[]},openDialogName:"",showDialog:!1,inLinVisible:!1}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[])},provinceSelect:function(e,t,i){e&&e.length>0?(this.temp.province=t.id,this.provinceData.defaultSelected=e):(this.temp.province=[],this.provinceData.defaultSelected=[])},dialogOpen:function(){var e=this,t="49c0a7ebcb4c4175bd5195837a6a9a13";this.temp.genre=t,this.typeData=this.supplierTypeData,this.temp.type=this.typeData.defaultSelected[0],this.temp.province=this.provinceData.defaultSelected[0],this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;this.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,Object(a.addCustomer)(t.temp).then(function(i){t.dialogLoading=!1,0===i.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok",supplierId:i.id,supplierName:e.temp.name}))}).catch(function(e){t.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"80%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"80px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类型:",prop:"typeName"}},[i("base-input-select",{staticStyle:{width:"240px"},attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地区:",prop:"provinceName"}},[i("base-input-select",{staticStyle:{width:"240px"},attrs:{data:e.provinceData.data},on:{callback:e.provinceSelect},model:{value:e.provinceData.defaultSelected,callback:function(t){e.$set(e.provinceData,"defaultSelected",t)},expression:"provinceData.defaultSelected"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogAddSupplier.vue";t.default=l.exports},v09X:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("1IKD"),o=i("uupt"),n=i("WIyV"),l=i("spKr"),s={components:{customBaseTable:n.a,productTableDialog:a.a,dialogAddSupplier:o.default},props:["initData","visible"],data:function(){return{rules:{supplierName:[{required:!0,message:"请选择供应商",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,SupplierDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择供应商",width:"500px",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"49c0a7ebcb4c4175bd5195837a6a9a13",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}},formData:{retreatId:"",supplierId:"",supplierName:"",type:"",typeName:"",remark:"",dtlJsonStr:""},tableData:[],tableList:[],configs:{topBarBtnList:[{name:"选择货品",nameEn:"selectProduct",isShow:!0,method:this.selectProduct}]},apiObj:{apiName:"listPageRetreatDetail",params:{fieldCode:"prodInfo,unitName,count",prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:"",isNeedPage:"false"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){var e=this.initData.rowData;this.formData.retreatId=e.id,this.apiObj.params.parentId=e.id,this.formData.supplierId=e.supplierId,this.formData.supplierName=e.supplierName,this.formData.type=e.type,this.formData.typeName=e.typeName,this.formData.remark=e.remark},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.retreatAddDialog.getData()},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},databridge:function(e){Array.isArray(e)&&(this.tableList=[],this.tableList=e)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},supplierSelect:function(e){e[0]&&(this.formData.supplierId=e[0].id,this.formData.supplierName=e[0].name)},selectProduct:function(){this.getData(),this.dialogData.data=this.tableList,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t&&(e.getData(),null!=e.tableList&&e.tableList.length>0)){for(var i=[],a=0;a<e.tableList.length;a++){var o=e.tableList[a],n={productId:o.productId,unit:o.unit,count:o.count,price:o.price};i.push(n)}null!=i&&i.length>0&&(e.formData.dtlJsonStr=JSON.stringify(i)),e.$confirm("添加采购退货单后，是否将该退货单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.formData.isAutoCommit="true",Object(l.updatePurchaseRetreat)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.formData.isAutoCommit="false",Object(l.updatePurchaseRetreat)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}})},closeDialog:function(e){this.showDialog=!1;var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByProduct(t)},tableSelectedByProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={id:"",productId:"",productCode:"",productName:"",productSpec:"",productProperty:"",unit:"",unitName:"",count:"0.00",amount:"0.00"};a.productId=i.id.trim(),null!=i.code&&i.code.trim().length>0&&(a.productCode=i.code.trim()),null!=i.name&&i.name.trim().length>0&&(a.productName=i.name.trim()),null!=i.spec&&i.spec.trim().length>0&&(a.productSpec=i.spec.trim()),null!=i.property&&i.property.trim().length>0&&(a.productProperty=i.property.trim()),null!=i.prodInfo&&i.prodInfo.trim().length>0&&(a.prodInfo=i.prodInfo.trim()),a.unit=i.unit,a.unitName=i.unitName,a.id=i.id.trim()||t,this.tableData.push(a)}}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"800px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px",width:"96%","margin-left":"2%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right"}},[i("el-row",[i("el-col",{attrs:{span:14}},[i("el-form-item",{attrs:{label:"供应商:",prop:"supplierName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"300px"},attrs:{dialog:e.SupplierDialog.dialog},on:{callback:e.supplierSelect},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"0px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"padding-top":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticStyle:{"padding-top":"10px"}},[i("custom-base-table",{ref:"retreatAddDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseRetreat_createRetreatByPurchase_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"retreatAddDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogEdit.vue";t.default=c.exports},v0Ex:function(e,t,i){"use strict";var a=i("pgc3");i.n(a).a},v0t9:function(e,t,i){"use strict";i.r(t);var a=i("WIyV"),o=(i("91ra"),{components:{customBaseTable:a.a},props:["initData","visible"],data:function(){return{parentId:"",openDialogName:"",dialogLoading:!0,isVisible:!1,inDialog:!0,showDialog:!1,inLinVisible:!1,dialogData:{dialog_width:"",orderDetail_style:"",title:"",temp:null,tempLable:null},tableData:[],rowTableList:[],apiObj:{apiName:"listPageRetreatDetailByEdit",params:{pageNo:1,parentId:"",isRetreatByInfo:"true",fieldCode:"sysOrderCode,deliverCode,productCode,productName,productSpec,orderUnitName,receiveAmount,notRetreatSum,deliverOrderCount,notRetreatCount,orderCount,productPrice,orderSum,remark"}},customColumn:[],mergeTitle:[],mergeColumn:[],mergeRow:[]}},beforeCreate:function(){},created:function(){this.parentId=this.initData.data.parentId,this.apiObj.params.parentId=this.parentId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{databridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.rowTableList=[],this.customerId="",this.deliverDtlIds="",this.$emit("close-dialog",e||{})},closeDialog:function(e){}},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}}}),n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{style:e.initData.orderDetail_style},[i("custom-base-table",{ref:"retreatInfoDialog",attrs:{"data-custom-table-id":"views_sale_retreat_auditRetreat_dialogInfo0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"retreatInfoDialog",useDefaultBtn:!0,showAll:!1},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogInfo.vue";t.default=l.exports},vCsH:function(e,t,i){},vFju:function(e,t,i){},vJiH:function(e,t,i){"use strict";var a=i("behg");i.n(a).a},vLOd:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("uTIz"),o=i("2+ib");i("EXX/");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{searchBar:a.a,multilevelTable:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{supplierCode:"",searchList:[{label:"付款期间起",type:"date",ruleType:"month",mapKey:"beginDate",configs:{clearable:!0,name:"",type:"month",pickerOptions:{hidePicker:!0}},placeholder:"请选择"},{label:"付款期间止",type:"date",ruleType:"month",mapKey:"endDate",configs:{clearable:!0,name:"",type:"month",pickerOptions:{hidePicker:!0}},placeholder:"请选择"}],dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{},dataList:[],tableConfigList:[{customColumn:[],apiObj:{apiName:"listPagePurchasePaymentHistory",params:{periodType:"history",supplierCode:"",fieldCode:"supplierCode,supplierName,paymentPeriod,beginPlus,beginMinus,nowOrderSum,nowPaymentSum,endPlus,endMinus"}},tempData:{},showIndex:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}]}},created:function(){this.supplierCode=this.initData.rowData.supplierCode,this.tableConfigList[0].apiObj.params.supplierCode=this.supplierCode},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{sendGuid:function(e){this.guid=e},searchMap:function(e){this.searchObj=e,this.updateData(e)},databridge:function(e){this.dataList=e},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},updateData:function(e){this.$refs.customBaseTable.updateData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},closeDialog:function(e){}}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),e.searchList.length?i("search-bar",{attrs:{searchList:e.searchList},on:{"search-map":e.searchMap,"send-guid":e.sendGuid}}):e._e(),e._v(" "),i("el-row",{style:e.initData.table_style},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_paymentManager_listPaymentHistory0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);r.options.__file="listPaymentHistory.vue";t.default=r.exports},varj:function(e,t,i){"use strict";i("dRSK"),i("INYr"),i("91GP"),i("rGqo"),i("z0WU"),i("Yfch");var a=i("AZ8z"),o={props:["colConfig","fixed"],template:'<el-table-column :label="colConfig.label" :fixed="fixed" :sortable="colConfig.sortable" align="center">\n    \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n    \t\t\t\t\t  <template v-for="(item, index) in colConfig.rowMethods">\n    \t\t\t\t\t    <el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="item.method(scope.row,scope.$index)" v-text="item.name"></el-button>\n                </template>\n    \t\t\t\t\t</div>\n  \t\t\t\t</el-table-column>'},n={components:{customBaseTable:i("WIyV").a},name:"custom-transfer-table",props:{btnList:{type:Array,default:function(){return[]}},stateBtn:{type:Object,default:function(){return{}}},aboveTableConfig:{type:Object,default:function(){return{}}},belowTableConfig:{type:Object,default:function(){return{}}},addColumns:{type:Array,default:function(){return[]}},hideColumns:{type:Array,default:function(){return[]}},deDuplication:{type:Boolean,default:!1},useDefaultBtn:{type:Boolean,default:!0},rowKey:{type:String,default:"id"}},data:function(){return{selectTableGuid:"",resultTableGuid:"",aboveTableLoading:!0,belowTableLoading:!0,btnsBoxHeight:0,currentpage:1,tableLoading:!1,resultTableData:[],titleList:[],pageData:{},tableBtns:{columnIndex:"last",prop:"operate",label:"操作",component:o,rowMethods:[{name:"删除",method:this.deleteRow}]},tempSelectList:[],stateBtnChecked:!1,aboveTableInitData:{},belowTableInitData:null,belowTableDataTimer:""}},computed:{apiData:function(){return this.aboveTableConfig.apiObj||null},belowApiData:function(){return this.belowTableConfig.apiObj||null},setBelowTableLoading:function(){return!!this.belowApiData&&this.belowTableLoading},setCustomTransferTableLoading:function(){return this.aboveTableLoading||this.setBelowTableLoading},setTablesHeight:function(){return this.stateBtn.title?{height:"calc(50% - 15px)"}:{height:"calc(50% - 6px)"}},setResultBtnState:function(){var e=this;return function(t){return!e.resultTableData.length&&t.state}},mixCustomColumn:function(){return[].concat([],this.addColumns,this.belowTableConfig.customColumn||[],this.useDefaultBtn?[this.tableBtns]:[])},setResultTableData:function(){return[].concat(this.resultTableData)},selectTableData:function(){return this.selectTableGuid?this.$store.getters[this.selectTableGuid+"/tableData"]:{}},tableData:function(){return this.selectTableData.tableData||[]},belowTableData:function(){return this.resultTableGuid&&this.$store.getters[this.resultTableGuid+"/tableData"].tableData||[]}},watch:{setResultTableData:function(){var e=this,t=Object(a.a)(this.setResultTableData);(t||[]).forEach(function(t){e.addColumns.forEach(function(i){t.hasOwnProperty([i.prop])||(t[i.prop]=e.initRowDataValue(i.componentName))})}),this.$refs.resultTable.updataTableRow&&this.$refs.resultTable.updataTableRow(t)},stateBtnChecked:function(){var e={};e[this.stateBtn.keyName?this.stateBtn.keyName:"isShow"]=this.stateBtnChecked,this.httpAboveTableData(this.apiData.apiName,this.apiData.params,e)},"apiData.params":function(){var e={};e[this.stateBtn.keyName?this.stateBtn.keyName:"isShow"]=this.stateBtnChecked,this.httpAboveTableData(this.apiData.apiName,this.apiData.params,e)}},created:function(){this.apiData&&this.httpAboveTableData(this.apiData.apiName,this.apiData.params),this.belowApiData&&this.httpBelowTableData(this.belowApiData.apiName,this.belowApiData.params)},mounted:function(){this.$nextTick(function(){this.selectTableGuid=this.$refs.selectTable.guid,this.resultTableGuid=this.$refs.resultTable.guid,this.btnsBoxHeight=this.$refs.btnsBox.clientHeight+5})},methods:{initRowDataValue:function(e){return e?"cascader"===e?[]:"inputNumber"===e||"progress"===e?0:"":""},clearTableSelected:function(){var e=this;this.resultTableData=[],this.tempSelectList=[],this.tableData.forEach(function(t){e.$refs.selectTable.$refs.baseTable.clearSelection()})},httpAboveTableData:function(e,t,i){var a=this;this.aboveTableLoading=!0,this.$api[e](Object.assign({},t,i)).then(function(e){a.aboveTableInitData=e,a.belowApiData||a.belowTableInitData||(a.belowTableInitData=a.initBelowTableData(e)),a.tempSelectList=[],a.$nextTick(function(e){a.toggleRowSelected()}),a.aboveTableLoading=!1}).catch(function(e){a.aboveTableLoading=!1})},httpBelowTableData:function(e,t,i){var a=this;this.belowTableLoading=!0,this.$api[e](Object.assign({},t,i)).then(function(e){a.belowTableInitData=a.initBelowTableData(e),a.belowTableLoading=!1}).catch(function(e){a.belowTableLoading=!1})},initBelowTableData:function(e){if(e){var t=this.belowApiData?e:Object(a.a)(e),i=this.belowApiData?Object(a.a)("string"==typeof t.result.varList?JSON.parse(t.result.varList):t.result.varList):[];return t.result.titles="string"==typeof t.result.titles?JSON.parse(t.result.titles):t.result.titles,t.result.hideTitles="string"==typeof t.result.hideTitles?JSON.parse(t.result.hideTitles):t.result.hideTitles,this.hideColumns.forEach(function(e){!(t.result.hideTitles.findIndex(function(t){return e===t})>-1)&&t.result.hideTitles.push(e)}),t.result.varList=[],this.belowApiData&&this.addBelowTableData(i),t}},addBelowTableData:function(e){var t=this;clearInterval(this.belowTableDataTimer),this.belowTableDataTimer=setInterval(function(i){t.selectTableData.titleList&&t.selectTableData.tableData&&(clearInterval(t.belowTableDataTimer),t.dataBridge(e),t.toggleRowSelected())},50)},toggleRowSelected:function(){var e=this;this.tableData.forEach(function(t){e.resultTableData.some(function(i){return t[e.rowKey]===i[e.rowKey]})?(e.$refs.selectTable.$refs.baseTable.toggleRowSelection(t,!0),!e.tempSelectList.some(function(i){return i[e.rowKey]===t[e.rowKey]})&&e.tempSelectList.push(t)):e.$refs.selectTable&&e.$refs.selectTable.$refs.baseTable.toggleRowSelection(t,!1)})},currentChange:function(e){var t={};t[this.stateBtn.keyName?this.stateBtn.keyName:"isShow"]=this.stateBtnChecked,this.httpAboveTableData(this.apiData.apiName,this.apiData.params,Object.assign({},{pageNo:e},t))},dataBridge:function(e,t){this.getChecked(t,e)?this.addRowData(t):this.removeRowData(t)},resultDataBridge:function(e,t){},deleteRow:function(e,t){var i=this;this.resultTableData.find(function(t,a){if(e[i.rowKey]===t[i.rowKey])return i.resultTableData.splice(a,1),t}),this.toggleRowSelected()},getChecked:function(e,t){var i=this;return e?t.some(function(t){return e[i.rowKey]===t[i.rowKey]}):(t.length&&(this.tempSelectList=t),!!t.length)},addRowData:function(e){var t=this;e?!this.resultTableData.some(function(i){return e[t.rowKey]===i[t.rowKey]})&&this.resultTableData.push(e):this.addAllRowData()},addAllRowData:function(){var e=this;this.resultTableData.length?this.tempSelectList.forEach(function(t){e.addRowData(t)}):this.resultTableData=this.tempSelectList},removeRowData:function(e){var t=this;e?this.resultTableData.some(function(i,a){if(e[t.rowKey]===i[t.rowKey])return t.resultTableData.splice(a,1),!0}):this.tableData.forEach(function(e){t.removeRowData(e)})},getTableSelected:function(){this.$emit("table-selected",this.belowTableData)}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.setCustomTransferTableLoading,expression:"setCustomTransferTableLoading"}],staticClass:"myCoustomTable resetTransferTableStyle",staticStyle:{height:"100%",padding:"10px"}},[e.stateBtn&&e.stateBtn.title?i("div",{staticStyle:{"text-align":"right"}},[i("el-checkbox",{model:{value:e.stateBtnChecked,callback:function(t){e.stateBtnChecked=t},expression:"stateBtnChecked"}},[e._v(e._s(e.stateBtn.title))])],1):e._e(),e._v(" "),i("div",{style:e.setTablesHeight},[i("custom-base-table",{ref:"selectTable",attrs:{"data-custom-table-id":"components_customTransferTable_index0",useScenarios:"transferTable",showIndex:e.aboveTableConfig.showIndex||!1,showCheckBox:e.aboveTableConfig.showCheckBox||!1,showTableSet:e.aboveTableConfig.showTableSet||!1,customColumn:e.aboveTableConfig.customColumn,initData:e.aboveTableInitData,mergeTitle:e.aboveTableConfig.mergeTitle,componentId:"transferAboveTable",tempData:e.aboveTableConfig.tempData,dragTable:e.aboveTableConfig.dragTable,entireRowDrag:e.aboveTableConfig.entireRowDrag},on:{"current-change":e.currentChange,databridge:e.dataBridge}})],1),e._v(" "),i("div",{staticStyle:{height:"11px"}}),e._v(" "),i("div",{ref:"resultBox",staticStyle:{position:"relative"},style:e.setTablesHeight},[i("div",{staticStyle:{height:"100%"},style:{paddingBottom:e.btnsBoxHeight+"px"}},[i("custom-base-table",{ref:"resultTable",attrs:{"data-custom-table-id":"components_customTransferTable_index1",useScenarios:"transferTable",showIndex:e.belowTableConfig.showIndex||!1,showCheckBox:e.belowTableConfig.showCheckBox||!1,showTableSet:e.belowTableConfig.showTableSet||!1,hidePages:e.belowTableConfig.hidePages||!0,customColumn:e.mixCustomColumn,initData:e.belowTableInitData,mergeTitle:e.belowTableConfig.mergeTitle,componentId:"transferBelowTable",tempData:e.belowTableConfig.tempData,dragTable:e.belowTableConfig.dragTable,entireRowDrag:e.belowTableConfig.entireRowDrag},on:{databridge:e.resultDataBridge}})],1),e._v(" "),i("div",{ref:"btnsBox",staticStyle:{position:"absolute",bottom:"0",right:"0"}},[e.btnList.length?[e._l(e.btnList,function(t,a){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:a,attrs:{name:t.name,icon:t.icon,plain:t.plain,state:e.setResultBtnState(t)},on:{myclick:t.method}})]})]:e._e()],2)])])},[],!1,null,null,null);s.options.__file="index.vue";t.a=s.exports},vf7h:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("sanI"),l=i("EDKZ");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddCustomer:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:"",deleteIds:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark",parentId:"",type:"edit"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"3"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="销售退货入库",this.temp.type="81907167d5c8498692e6c4f3694c5cfa",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"},this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={id:n.id,productId:n.productId,remark:n.remark,priceCount:n.priceCount,priceUnit:n.priceUnit,p2nFormula:n.p2nFormula,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.updateWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,this.tableData.push(o)}}},watch:{}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_sale_saleInWC_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogEdit.vue";t.default=d.exports},vfk7:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("xfY5");var a=i("xMja");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{afterCount:[{required:!0,message:"请填写调整后数量！",trigger:"change"},{type:"number",message:"数量必须为数字值"}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.beforeCount=this.initData.temp.productSafetyCount)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,Object(a.updateProductSafeStock)({id:t.temp.productId,safetyCount:t.temp.afterCount}).then(function(i){t.dialogLoading=!1,0===i.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,e.initData.temp.safetyCount=new Number(t.temp.afterCount).toFixed(2),t.dialogClose({resState:"ok",afterCount:new Number(t.temp.afterCount).toFixed(2)}))}).catch(function(e){t.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"安全库存调整",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"150px"}},[i("el-form-item",{attrs:{label:"调整前安全库存:",prop:"beforeCount"}},[i("el-input",{staticStyle:{width:"140px"},attrs:{disabled:!0},model:{value:e.temp.beforeCount,callback:function(t){e.$set(e.temp,"beforeCount",t)},expression:"temp.beforeCount"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"调整后安全库存:",prop:"afterCount"}},[i("el-input",{staticStyle:{width:"140px"},model:{value:e.temp.afterCount,callback:function(t){e.$set(e.temp,"afterCount",e._n(t))},expression:"temp.afterCount"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogSafeStock.vue";t.default=s.exports},vleD:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rGqo");var a=i("mSNy"),o=i("t3Un"),n=i("z0WU");function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" @change="colConfig.changeState(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},r={name:"dialog-option",props:["initData","visible"],data:function(){return{buttonName:"",dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,topBarBtnList:[{name:"查询",icon:"search",method:this.queryTable},{name:"重置",icon:"refresh",plain:!0,method:this.resetQueryTemp}],configs:{tableConfigs:[],showCheckBox:!0,showIndex:!1,isSingle:!1},tableData:[],selectList:[],queryParms:[{name:"code"},{name:"name"}],tempQuery:{},tempLable:{},pageData:null,pageNo:1}},components:{},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.configs.isSingle=this.initData.isSingle,this.userInfo=this.$storage.get("userInfo"),this.initTable()},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",this.selectList,this.initData.temp,this.buttonName)},queryTable:function(){this.pageNo=1,this.initTable()},initTable:function(){var e=this;e.dialogTopLoading=!0,Object(o.a)({url:e.initData.tableUrl,method:"post",data:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){l(e,t,i[t])})}return e}({},e.initData.tableParm,e.tempQuery,{pageNo:e.pageNo})}).then(function(t){e.dialogTopLoading=!1,e.getListPage(t)}).catch(function(t){e.dialogTopLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var o=e[i];o.indexOf("_")>0&&("en"==a.a.locale?o=o.substring(o.indexOf("_")+1):"zh"==a.a.locale&&(o=o.substring(0,o.indexOf("_")))),t.tempLable[i]=o}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==a.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==a.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"是否启用"===e.label&&(e.component=s,e.changeState=t.changeState)}),e},dataBridge:function(e){this.selectList=e},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.pageNo=1,this.initTable()},closeDialogPage:function(){this.isVisible=!1,this.buttonName="close"}},computed:{dialogWidth:function(){var e="900px";return null!=this.initData.width&&(e=this.initData.width),e}},watch:{pageNo:function(){this.initTable()}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"10px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:e.tempLable.name}},[i("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:e.tempLable.name},model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:e.tempLable.code}},[i("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:e.tempLable.code},model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",[i("base-button",{attrs:{name:e.topBarBtnList[0].name,icon:e.topBarBtnList[0].icon,plain:e.topBarBtnList[0].plain,state:e.topBarBtnList[0].state},on:{myclick:e.topBarBtnList[0].method}})],1),e._v(" "),i("el-form-item",[i("base-button",{attrs:{name:e.topBarBtnList[1].name,icon:e.topBarBtnList[1].icon,plain:e.topBarBtnList[1].plain,state:e.topBarBtnList[1].state},on:{myclick:e.topBarBtnList[1].method}})],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{padding:"10px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{position:"relative",height:"60px","text-align":"center","box-sizing":"border-box",padding:"10px 0 0 0"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",disabled:!e.selectList.length},on:{click:function(t){e.isVisible=!1}}},[e._v("确认")]),e._v(" "),i("el-button",{on:{click:e.closeDialogPage}},[e._v("取消")])],1)])])},[],!1,null,null,null);d.options.__file="dialogOption.vue";t.default=d.exports},vno8:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("Qe0A"),l=i("a0Xs"),s=i("wk8/");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择接收单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},apiObj:{apiName:"listPageWarehouseOutDetails",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,stockCountByPrice,priceCount,remark",parentId:""}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{lessThan:["self@stockCountByPrice",!0]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["计价数量必须大于零！","计价数量必须小于库存数量！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseOutType",isglobal:"1",notInids:"'9459be975cd94ada8443cdf32f52c2be','fa51ae2e17a9409d822fc4c9192d652c','8bcbc84893cf46daabbd2522bee482ad','12e84fefddc449a78cc3bf8075475823','9c7be2410a0045c8963f9273fe6da067','def4b13175dc44b08d7a0315b811700e'"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData),this.formulaReckonByProductCount_n2p(this.productUnit.n2pFormula,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},formulaReckonByProductCount_n2p:function(e,t){if(null!=e&&0!=e.trim().length){var i="";null!=t.stockCount&&t.stockCount.trim().length>0&&(i=t.stockCount.trim()),Object(l.formulaReckonByProductCount)({parmKey:"N",formula:e,isScale:t.n2pIsScale,decimalCount:t.n2pDecimalCount,stockCount:i}).then(function(e){0===e.code&&null!=e.stockCount_n2p&&e.stockCount_n2p.trim().length>0&&(t.stockCountByPrice=e.stockCount_n2p)}).catch(function(e){})}},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.temp.warehouseId?(this.dialogData.warehouseId=this.temp.warehouseId,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.stockCountQuery="stockCountGreaterThanZero",this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先选择出库仓库！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseOut(e.orderDtlList))})},saveWarehouseOut:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={id:l.id,productId:l.productId,remark:l.remark,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.temp.type=this.typeData.defaultSelected[0],this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.updateWarehouseOutBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){var t=this;e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]),this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"5"},-1!="9459be975cd94ada8443cdf32f52c2be".indexOf(type)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"}):-1!="4cba5d3815644b26920777512a20474b".indexOf(type)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}),"f2b0aaceff914acd8636700a111ca8f0"==type&&Object(s.findUserDepartmentBySystemUser)({userId:this.temp.makeId}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){var t=this;e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name,"f2b0aaceff914acd8636700a111ca8f0"==type&&Object(s.findUserDepartmentBySystemUser)({userId:this.temp.makeId}).then(function(e){null!=e.deptId&&e.deptId.trim().length>0&&(t.temp.deptId=e.deptId.trim()),null!=e.deptName&&e.deptName.trim().length>0&&(t.temp.deptName=e.deptName.trim())}))},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",stockCountByPrice:"",stockCount:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,o.n2pFormula=a.n2pFormula,o.n2pIsScale=a.n2pIsScale,o.n2pDecimalCount=a.n2pDecimalCount,o.p2nFormula=a.p2nFormula,o.p2nIsScale=a.p2nIsScale,o.p2nDecimalCount=a.p2nDecimalCount,o.stockCount=a.stockCount.trim(),o.stockCountByPrice=a.stockCount,this.tableData.push(o)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouseByWC_outByWC_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},vrrb:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo");var a=i("7cmB"),o=i("vleD"),n=i("oC0i"),l=i("2+ib"),s=i("zF5t"),r=i("PuDp");i("z0WU");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" align="center">\n    \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n    \t\t\t\t\t\t\t<el-button  type="text" class="btns" style="font-size: 12px;" :disabled="scope.row.isdisable===\'0\'" @click="colConfig.change(scope.row,scope.$index)">选择库位</el-button>\n    \t\t\t\t\t</div>\n  \t\t\t\t</el-table-column>'},u={components:{treeFormTable:a.a,dialogOption:o.default,multilevelTable:l.a,dialogRoleUser:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rootData:{},tableSets:{1:{showCheckBox:!1,showIndex:!0,expandOne:!1},2:{showCheckBox:!1,showIndex:!1,isExpands:!1,isSortable:!1,isSingle:!1}},currentpage:1,customColumn:{0:[{columnIndex:"last",prop:"operate",label:"操作",component:d,change:this.change}]},editable:{suggestCount:{type:"input"}},apiObj:{apiName:"listPageWarehouseOutDetailsDispatch",params:{}},addedData:{},userData:[],executorIds:[],isSingle:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"选择员工",data:null,temp:{},tempLable:null,isSingle:!0,tableParm:{}},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},roleId:"",roleName:"",selectDataUser:{data:{selectUrl:"/system/role/findListUserByRole",selectParm:{queryStr:"role.id = '"+this.initData.temp.roleId+"'",userIsdisable:"1"}},defaultSelected:[]}}},created:function(){this.roleId=this.initData.temp.roleId,this.roleName=this.initData.temp.roleName,this.initUserData();var e="",t=this.initData.temp;null!=t&&t.length>0&&t.forEach(function(t){null!=t.id&&t.id.trim().length>0&&(e=0==e.length?"'"+t.id.trim()+"'":e+",'"+t.id.trim()+"'")});var i="";null!=e&&e.trim().length>0&&(i="detail.id in ("+e+")"),this.apiObj.params={queryStr:i,pageNo:1}},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=c(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{userSelect:function(e,t){e[0]?(this.selectDataUser.defaultSelected=[e[0]],this.executorIds=[e[0]]):(this.selectDataUser.defaultSelected=[],this.executorIds=[])},databridge:function(e){},addChild:function(e,t){this.dialogCallBackData=e,this.showDialog=!0,this.dialogVisible=!0},addChildRow:function(){this.dialogVisible=!1,this.showDialog=!1,this.addedData={rowData:this.testData,parentData:this.dialogCallBackData}},sendChildrenRow:function(e){},change:function(e,t){this.dialogData.temp=e,this.dialogData.tempLable=this.tempLable,this.dialogData.title="选择库位",this.dialogData.isSingle=!1,this.dialogData.tableUrl="/warehouse/warehouseProduct/listPageWarehouseProductsDispatchOption";var i="";null!=e.parentWarehouseId&&e.parentWarehouseId.trim().length>0&&(i="'%"+e.parentWarehouseId+"%'"),this.dialogData.tableParm={isStockCountGreaterThanZero:"false",isNotNeedSpare:"true",productId:e.productId,isNeedWarehouse:"true",parentWarehouseId:i},this.openDialogName="dialogOption",this.showDialog=!0,this.inLinVisible=!0},initUserData:function(){var e=this;Object(s.findListUserByRole)({userIsdisable:"1",queryStr:"role.id = '"+this.roleId+"'"}).then(function(t){e.userData=[];var i=t.result.options;null!=i&&i.length>0&&i.forEach(function(t){var i=t.id,a=t.userName;null!=i&&i.trim().length>0&&null!=a&&a.trim().length>0&&e.userData.push({key:i,label:a,disabled:!1})})}).catch(function(e){})},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},leftCheckChange:function(e){this.isSingle&&this.singleUserData(e)},singleUserData:function(e){var t=this.userData;if(null!=t&&0!=t.length)if(0==e.length)t.forEach(function(e){e.disabled=!1});else if(e.length>0){var i="";e.forEach(function(e){i=i+e+","}),t.forEach(function(e){var t=e.key;-1==i.indexOf(t)&&(e.disabled=!0)})}},addAdmin:function(){var e=this.roleId,t=this.roleName;this.dialogData.temp.roleId=e,this.dialogData.title=t+"-分配用户",this.openDialogName="dialogRoleUser",this.showDialog=!0,this.inLinVisible=!0},save:function(){this.$refs.treeFormTable.getData()},formData:function(e){this.realSave(e)},realSave:function(e){var t=this,i=this.roleId,a=this.roleName;if(null!=i&&0!=i){if(null==this.userData||0==this.userData.length)return this.dialogData.temp.roleId=i,this.dialogData.title=a+"-分配用户",this.openDialogName="dialogRoleUser",this.showDialog=!0,void(this.inLinVisible=!0);if(null!=this.executorIds&&0!=this.executorIds.length)if(this.isSingle&&this.executorIds.length>1)this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择执行人！"});else if(null!=e.tableData&&0!=e.tableData.length){var o="";this.executorIds.forEach(function(e){o=o?o+","+e:e});var n="";if(null==e.tableData||0==e.tableData.length?n+="系统无推荐库位，请通过(选择库位)手动设置库位！":null!=e.tableData&&e.tableData.length>0&&e.tableData.forEach(function(e){var t=e.productCode,i=e.children;null!=i&&0!=i.length||(n=n+"货品编码("+t+") 系统无推荐库位，请通过(选择库位)手动设置库位！")}),null!=n&&n.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:n});else{var l=JSON.stringify(e.tableData);Object(r.dispatchWarehouseOutDetail)({jsonDataStr:l,executorIdsStr:o}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择出库明细信息！"});else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择执行人！"})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"仓库管理员角色ID为空或空字符串！"})},closeDialog:function(e,t){this.addedData={rowData:e[0],parentData:t},this.initUserData(),this.showDialog=!1}},watch:{pageNo:function(){this.initTable()}}},p=(i("YfbJ"),i("KHd+")),m=Object(p.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"300px","margin-left":"2%"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择执行人",disabled:!1,data:e.selectDataUser.data},on:{callback:e.userSelect},model:{value:e.selectDataUser.defaultSelected,callback:function(t){e.$set(e.selectDataUser,"defaultSelected",t)},expression:"selectDataUser.defaultSelected"}}),e._v(" "),i("span",{staticStyle:{"font-size":"12px",color:"#1482f0",cursor:"pointer"},on:{click:e.addAdmin}},[e._v("+添加仓库管理员")])],1),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-top":"10px",border:"1px solid #E4E4E4","border-bottom":"none",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("tree-form-table",{ref:"treeFormTable",attrs:{"expand-all":!0,initData:e.rootData,configs:e.tableSets,currentpage:e.currentpage,customColumn:e.customColumn,editable:e.editable,apiObj:e.apiObj,addedData:e.addedData},on:{"update:currentpage":function(t){e.currentpage=t},"get-data":e.formData,"send-children-row":e.sendChildrenRow,databridge:e.databridge}})],1),e._v(" "),i("el-row",{staticStyle:{"text-align":"center"}}),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);m.options.__file="dialogDispatch.vue";t.default=m.exports},"vva+":function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rGqo");var a=i("mSNy"),o=i("WMBj"),n=i("z0WU");function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var r={name:"dialog-option",props:["initData","visible"],data:function(){return{productId:"",dialogTopLoading:!1,isVisible:!1,title:"",topBarBtnList:[{name:"查询",icon:"search",method:this.queryTable},{name:"重置",icon:"refresh",plain:!0,method:this.resetQueryTemp}],initConfigs:{tableOperates:{}},configs:{topBarBtnList:[],tableConfigs:[],showCheckBox:!1,showIndex:!1,isSingle:!1},tableData:[],selectList:[],queryParms:[],temp:{},tempQuery:{},tempLable:{},pageData:null,pageNo:1,openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.productId=this.initData.productId,this.initTable(!0)},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},queryTable:function(){this.pageNo=1,this.initTable(!0)},initTable:function(e){var t=this;t.dialogTopLoading=!0,Object(o.listPageSaleReceiveRecords)(l({},t.tempQuery,{customerId:this.initData.temp.id,orderStr:" record.cdate desc ",pageNo:t.pageNo})).then(function(i){t.getListPage(i),e&&(t.dialogTopLoading=!1)}).catch(function(e){t.dialogTopLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!1,this.configs.showIndex=!0,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var o=e[i];o.indexOf("_")>0&&("en"==a.a.locale?o=o.substring(o.indexOf("_")+1):"zh"==a.a.locale&&(o=o.substring(0,o.indexOf("_")))),t.tempLable[i]=o}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==a.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==a.a.locale&&(e.label=t.substring(0,t.indexOf("_"))))}),e},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.refreshTable()},refreshTable:function(){var e=this;e.$axios.all([Object(o.listPageSaleReceiveRecords)(l({},e.tempQuery,{customerId:this.initData.temp.id,orderStr:" record.cdate desc ",pageNo:e.pageNo}))]).then(e.$axios.spread(function(t){e.getListPage(t)})).catch(function(e){})},dataBridge:function(e){this.selectList=e},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]=""}},computed:{dialogName:function(){return this.openDialogName}},watch:{pageNo:function(){this.initTable(!0)}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1300px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{padding:"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,isSortable:!1,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);d.options.__file="dialogBalanceList.vue";t.default=d.exports},vzCX:function(e,t,i){"use strict";var a=i("uGws");i.n(a).a},vzyZ:function(e,t,i){"use strict";i.r(t);i("KKXr"),i("91GP");var a=i("varj"),o=i("uTIz"),n={components:{customTransferTable:a.a,searchBar:o.a},name:"productTableDialog",props:["initData","visible"],data:function(){return{queryForm:{sysCode:"",customerName:"",isBindOrderProduce:""},dialogLoading:!0,isVisible:!1,inDialog:!0,openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},btnList:[{name:"确定",isShow:!0,state:!0,method:this.confrim},{name:"清空",state:!0,isShow:!0,plain:!0,icon:"refresh",method:this.resetQuery}],aboveTableConfig:{apiObj:{apiName:"listPageOrderDetaiByPurchasePlan",params:{fieldCode:"prodInfo,prodUnitName,sysCode,customerName,orderCount,endDeliverCount,endRetreatCount,allowStockCount,safetyCount,minPlanCount,producePlanName",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",inOrderDtlState:"2,3,4",isBindOrderProduce:"false",orderStr:"saleOrder.cdate desc,orderDtl.cdate asc"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!0,showTableSet:!1,showAll:!1,sortableConfig:{"default-sort":{prop:"count",order:"descending"},progress:{},count:{}},dragTable:!1,entireRowDrag:!1},belowTableConfig:{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],tempData:{},showIndex:!1,showCheckBox:!1,dragTable:!1,entireRowDrag:!1},addColumns:[{columnIndex:30,label:"计划数量",prop:"purchasePlanCount",componentName:"input",width:120,_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"},{greaterThan:["self@minPlanCount",!0]}],message:["请输入大于零的正整数或(1,2)位小数！","不可小于最小计划数！"]}}],hideColumns:["customerName","producePlanName"],tableSelectList:[]}},created:function(){this.queryForm.isBindOrderProduce="false";var e="";if(null!=this.initData.tableData&&this.initData.tableData.length>0)for(var t=0;t<this.initData.tableData.length;t++){var i=this.initData.tableData[t];null!=i.orderDtlId&&i.orderDtlId.trim().length>0&&(e=e+i.orderDtlId+",")}var a=!0;null!=this.initData.isNeedRepeat&&(a=this.initData.isNeedRepeat),a||null!=e&&e.trim().length>0&&(e=e.substring(0,e.lastIndexOf(",")),e=this.findQueryProductIds(e)),this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,{notInOrderDtlIds:e})},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{selectList:this.tableSelectList,pageName:"selectOrderByPurchasePlan"})},closeDialog:function(e){},tableSelected:function(e){this.tableSelectList=e},findQueryProductIds:function(e){var t="";if(null==e||0==e.trim().length)return t;var i=e.split(",");if(null!=i&&i.length>0)for(var a=i.length,o=0;o<i.length;o++){var n="'"+i[o]+"'";o<a-1?t=t+n+",":o==a-1&&(t+=n)}return t},queryTable:function(){this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.queryForm)},resetQueryTemp:function(){for(var e in this.queryForm)this.queryForm[e]="";this.aboveTableConfig.apiObj.params=Object.assign({},this.aboveTableConfig.apiObj.params,this.queryForm)},confrim:function(){this.tableSelectList=[],this.$refs.trabsferTables.getTableSelected();var e=!0;if(null==this.tableSelectList||0==this.tableSelectList.length)e=!1;else if(null!=this.tableSelectList&&this.tableSelectList.length>0)for(var t=0;t<this.tableSelectList.length;t++){var i=this.tableSelectList[t];if(i.purchasePlanCount/1<i.minPlanCount/1){e=!1;break}}e&&(this.isVisible=!1)},resetQuery:function(){this.$refs.trabsferTables.clearTableSelected()}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"80%"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-col",{staticStyle:{height:"100%"},attrs:{span:24}},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",attrs:{inline:!0,model:e.queryForm,"label-width":"90px"}},[i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:6}},[i("el-form-item",{attrs:{label:"订单编号："}},[i("el-input",{attrs:{placeholder:"订单编号"},model:{value:e.queryForm.sysCode,callback:function(t){e.$set(e.queryForm,"sysCode",t)},expression:"queryForm.sysCode"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:6}},[i("el-form-item",{attrs:{label:"客户名称："}},[i("el-input",{attrs:{placeholder:"客户名称"},model:{value:e.queryForm.customerName,callback:function(t){e.$set(e.queryForm,"customerName",t)},expression:"queryForm.customerName"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"280px"},attrs:{span:6}},[i("el-form-item",{attrs:{label:"排产状态："}},[i("el-select",{model:{value:e.queryForm.isBindOrderProduce,callback:function(t){e.$set(e.queryForm,"isBindOrderProduce",t)},expression:"queryForm.isBindOrderProduce"}},[i("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),i("el-option",{attrs:{label:"已排产",value:"true"}}),e._v(" "),i("el-option",{attrs:{label:"未排产",value:"false"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:e.queryTable}})],1),e._v(" "),i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:e.resetQueryTemp}})],1)],1)],1)],1),e._v(" "),i("el-row",{style:{"margin-top":"10px"}},[i("custom-transfer-table",{ref:"trabsferTables",attrs:{aboveTableConfig:e.aboveTableConfig,belowTableConfig:e.belowTableConfig,deDuplication:!1,addColumns:e.addColumns,hideColumns:e.hideColumns,btnList:e.btnList},on:{"table-selected":e.tableSelected}})],1)],1)],1)],1)},[],!1,null,null,null);s.options.__file="selectOrderByPurchasePlan.vue";t.default=s.exports},wD3y:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("EDKZ");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:a.a,productTableDialog:o.a},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.defaultSelected.length<=0?a(new Error("请选择入库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",message:"请选择仓库"}],deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:"",deleteIds:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark",parentId:"",type:"edit"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1",notInids:"'def4b13175dc44b08d7a0315b811700e'"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"5"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var l=e[o],s={id:l.id,productId:l.productId,remark:l.remark,priceCount:l.priceCount,priceUnit:l.priceUnit,p2nFormula:l.p2nFormula,p2nIsScale:l.p2nIsScale,p2nDecimalCount:l.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(n.updateWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[]),this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"5"},-1!="d78ceba5beef41f5be16f0ceee775399,064dda15d44d4f8fa6330c5c7e46300e".indexOf(type)?(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"4"}):-1!="81907167d5c8498692e6c4f3694c5cfa,d1c6dc9aa3b045dbabff2d5e1e253c22".indexOf(type)&&(this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"})},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,this.tableData.push(o)}}},watch:{}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_warehouseBySimple_inBySimple_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogEdit.vue";t.default=c.exports},wFGB:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("WIyV"),o=i("1IKD"),n=i("sanI"),l=i("EDKZ");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={components:{customBaseTable:a.a,productTableDialog:o.a,dialogAddCustomer:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{deptName:[{required:!0,message:"请选择来源单位",trigger:"change"}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",businessCode:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:"",deleteIds:""},tempLable:{},tempQuery:{},tableData:[],orderDtlList:[],productUnit:{},rowData:{},deleteIds:"",configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!1},apiObj:{apiName:"listPageDetailProduct",params:{fieldCode:"productCode,productName,productSpec,productGenreName,priceUnitName,priceCount,remark",parentId:"",type:"edit"}},customColumn:[{columnIndex:"priceUnitName",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"priceCount",width:"120",componentName:"input",_cellConfig:{rules:[{greaterThan:["0",!1]},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"}],message:["入库数量必须大于零！","请输入大于零的整数或小数！"]}},{columnIndex:"remark",width:"140",componentName:"input",_cellConfig:{}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteAllRow}]}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{dictionaryKey:"warehouseInType",isglobal:"1"}},defaultSelected:[]},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntity:"true",isNotNeedSpare:"true",isNeedwarehouseGenre:"true",orderStr:"a.serial_number asc"}},defaultSelected:[]},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择来源单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"3"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.temp=this.initData.temp,this.typeData.defaultSelected[0]=this.initData.temp.type,this.temp.warehouseName="实体库",this.temp.warehouseId="2d75e49bcb9911e884ad00163e105f05",this.temp.typeName="销售退货入库",this.temp.type="81907167d5c8498692e6c4f3694c5cfa",this.DeptDialog.dialog.data.tableUrl="/base/departmentCustomer/listPageDepartmentCustomer",this.DeptDialog.dialog.data.tableParm={type:"3"},this.apiObj.params.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=s(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){this.isValidate=!0,Array.isArray(e)?(this.orderDtlList=[],this.orderDtlList=e):(this.productUnit=null,null!=e.item&&(this.productUnit=e.item),this.rowData=null,null!=e.item&&(this.rowData=e.row),this.setProductPrice(this.productUnit,this.rowData))},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},setProductPrice:function(e,t){null!=e&&null!=t&&(null!=e.id&&(t.priceUnit=e.id),null!=e.n2pFormula&&(t.n2pFormula=e.n2pFormula),null!=e.p2nFormula&&(t.p2nFormula=e.p2nFormula),t.n2pIsScale=e.n2pIsScale,t.n2pDecimalCount=e.n2pDecimalCount,t.p2nIsScale=e.p2nIsScale,t.p2nDecimalCount=e.p2nDecimalCount)},deleteAllRow:function(e,t){this.$refs.orderAddDialog.getData(),null!=this.orderDtlList&&this.orderDtlList.length>0&&this.orderDtlList.splice(t,1),e.id&&(this.deleteIds=this.deleteIds+e.id+",")},addProduct:function(){this.dialogData.data=this.tableData,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.isValidate=!1,e.$refs.orderAddDialog.getData(),e.isValidate&&e.saveWarehouseIn(e.orderDtlList))})},saveWarehouseIn:function(e){var t=this,i="";if(null!=e&&0!=e.length){for(var a=[],o=0;o<e.length;o++){var n=e[o],s={id:n.id,productId:n.productId,remark:n.remark,priceCount:n.priceCount,priceUnit:n.priceUnit,p2nFormula:n.p2nFormula,p2nIsScale:n.p2nIsScale,p2nDecimalCount:n.p2nDecimalCount};a.push(s)}null!=a&&a.length>0&&(i=JSON.stringify(a)),this.temp.dtlJsonStr=i,this.temp.deleteIds=this.deleteIds,this.$refs.submitForm.validate(function(e){e&&(t.dialogLoading=!0,t.temp.warehouseDeptId=t.temp.deptId,Object(l.updateWarehouseInBySimple)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){}))})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},addCustomer:function(){this.dialogData.title="新增客户",this.openDialogName="dialogAddCustomer",this.showDialog=!0,this.inLinVisible=!0},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),o.priceUnit=a.unit,o.priceUnitName=a.unitName,this.tableData.push(o)}}},watch:{}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"入库类型:",prop:"typeName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.temp.typeName,callback:function(t){e.$set(e.temp,"typeName",t)},expression:"temp.typeName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"业务单号:",prop:"businessCode"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.businessCode,callback:function(t){e.$set(e.temp,"businessCode",t)},expression:"temp.businessCode"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"来源单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addCustomer}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1)],1),e._v(" "),e.configs.topBarBtnList&&e.configs.topBarBtnList.length?i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2):e._e(),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_sale_saleIn_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogEdit.vue";t.default=d.exports},wFTP:function(e,t,i){"use strict";var a=i("WrZY");i.n(a).a},wFsc:function(e,t,i){},wX7y:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo");var a=i("zF5t"),o=i("ndgj"),n=i("WIyV");i("z0WU");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s={components:{customBaseTable:n.a},name:"dialog-add",props:["initData","visible"],data:function(){return{userData:[],executorIds:[],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"选择员工",data:null,temp:{},tempLable:null,isSingle:!0,tableUrl:"/warehouse/warehouseProduct/listPageWarehouseProductsDispatchOption",tableParm:{}},dialogLoading:!1,isVisible:!1,inDialog:!0,tableData:[],rowTableList:[],apiObj:{apiName:"listUserByRole",params:{pageNo:1,userIsdisable:"1",queryStr:"role.name like '%仓库管理员%'",fieldCode:"userCode,userName,roleName"}},customColumn:[],mergeTitle:[],mergeColumn:[],mergeRow:[],temp:{},tempLable:{},pageData:null,pageNo:1}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initUserData()},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=l(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{initUserData:function(){var e=this;Object(a.findListUserByRole)({userIsdisable:"1",queryStr:"role.name like '%仓库管理员%'"}).then(function(t){var i=t.result.options;null!=i&&i.length>0&&i.forEach(function(t){var i=t.id,a=t.userName;null!=i&&i.trim().length>0&&null!=a&&a.trim().length>0&&e.userData.push({key:i,label:a,disabled:!1})})}).catch(function(e){})},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},leftCheckChange:function(e){var t=this.userData;if(null!=t&&0!=t.length)if(0==e.length)t.forEach(function(e){e.disabled=!1});else if(e.length>0){var i="";e.forEach(function(e){i=i+e+","}),t.forEach(function(e){var t=e.key;-1==i.indexOf(t)&&(e.disabled=!0)})}},databridge:function(e){e.length&&(this.executorIds=[e[0].id])},save:function(){var e=this;if(null!=this.executorIds&&0!=this.executorIds.length){var t="";this.executorIds.forEach(function(e){t=t+e+","}),this.dialogLoading=!0,Object(o.updateExecutor)({detailId:this.temp.detailId,executorIds:t}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择执行人！"})},closeDialog:function(e){this.showDialog=!1}},watch:{pageNo:function(){this.initTable()}}},r=(i("uJvo"),i("YwKm"),i("KHd+")),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"800px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{padding:"10px"}},[i("custom-base-table",{ref:"editExecutorDialog",attrs:{"data-custom-table-id":"views_warehouse_move_manage_dialogEditExecutor0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,showCheckBox:!0,isSingle:!0,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"editExecutorDialog",useDefaultBtn:!1,showAll:!1},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogEditExecutor.vue";t.default=c.exports},wY0e:function(e,t,i){"use strict";var a=i("LQ5K");i.n(a).a},wbrj:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("rGqo");var a=i("6nHU"),o=i("928u"),n=i("z0WU"),l=i("mSNy");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.editBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.editBtns(scope.row,scope.$index)">修改执行人</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" :disabled=true />\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={components:{dialogEditExecutor:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{detail:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],selectList:null,initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:c,editBtns:this.editBtns,editBtns_isShow:!1}},configs:{tableConfigs:[],showCheckBox:!1,showIndex:!0},pageData:null,pageNo:1}},created:function(){this.detail=this.initData.temp,"1"==this.initData.temp.state&&(this.initConfigs.tableOperates.editBtns_isShow=!0),this.initTable(this.initData.temp.id)},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{initTable:function(e){var t=this;this.dialogLoading=!0,Object(o.listPageWarehouseInExecutor)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}({},this.tempQuery,{detailId:e,pageNo:1,pageSize:1e4})).then(function(e){t.getListPage(e),t.dialogLoading=!1}).catch(function(e){t.dialogLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==l.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==l.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==l.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==l.a.locale&&(e.label=t.substring(0,t.indexOf("_")))),"isdisable"===e.prop&&(e.component=d)}),this.internationalConfig(),e.push(this.initConfigs.tableOperates),e},internationalConfig:function(){"en"==l.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==l.a.locale&&(this.initConfigs.tableOperates.label="操作")},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},editBtns:function(e,t){var i="";null!=this.detail&&null!=this.detail.state&&this.detail.state.trim().length>0&&(i=this.detail.state.trim()),"1"==i?(this.dialogData.temp=e,this.dialogData.title="修改执行人",this.openDialogName="dialogEditExecutor",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"明细状态必须是(执行中)允许修改执行人！"})},closeDialog:function(e){"ok"==e.resState&&this.initTable(this.initData.temp.id),this.showDialog=!1,e.resState=this.resState}},watch:{}},p=i("KHd+"),m=Object(p.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"700px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo,isSortable:!0},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);m.options.__file="dialogViewExecutor.vue";t.default=m.exports},wpSq:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("1IKD"),o=i("uupt"),n=i("WIyV"),l=i("spKr"),s={components:{customBaseTable:n.a,productTableDialog:a.a,dialogAddSupplier:o.default},props:["initData","visible"],data:function(){return{rules:{supplierName:[{required:!0,message:"请选择供应商",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,SupplierDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择供应商",width:"500px",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"49c0a7ebcb4c4175bd5195837a6a9a13",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}},formData:{supplierId:"",supplierName:"",type:"",remark:"",dtlJsonStr:""},tableData:[],tableList:[],configs:{topBarBtnList:[{name:"选择货品",nameEn:"selectProduct",isShow:!0,method:this.selectProduct}]},apiObj:{apiName:"listPageRetreatDetail",params:{fieldCode:"prodInfo,unitName,count,price,amount",prodColumnKey:"productCode,productName,productSpec,productProperty",parentId:"null",isNeedPage:"false"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,2})?$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"price",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,4})?$"}],message:["请输入大于零的正整数或(1,4)位小数！"]}},{columnIndex:"amount",width:"120",componentName:"input",_cellConfig:{hideTitle:!0,compute:"self@count(*)self@price"}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>{{data.total.toFixed(2)}}</span></li>\n                    </ul>'},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},data:{total:"0.00"},computes:{total:"table@amount"}}}},beforeCreate:function(){},created:function(){this.formData.type="f69839bbf2394846a65894f0da120df9"},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{getData:function(){this.$refs.retreatAddDialog.getData()},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},databridge:function(e){Array.isArray(e)&&(this.tableList=[],this.tableList=e)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},supplierSelect:function(e){e[0]&&(this.formData.supplierId=e[0].id,this.formData.supplierName=e[0].name)},selectProduct:function(){this.getData(),this.dialogData.data=this.tableList,this.dialogData.querySpare="isSpareAll",this.dialogData.isNeedRepeat=!1,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t&&(e.getData(),null!=e.tableList&&e.tableList.length>0)){for(var i=[],a=0;a<e.tableList.length;a++){var o=e.tableList[a],n={productId:o.productId,unit:o.unit,count:o.count,price:o.price};i.push(n)}null!=i&&i.length>0&&(e.formData.dtlJsonStr=JSON.stringify(i)),e.$confirm("添加采购退货单后，是否将该退货单提交审核？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.formData.isAutoCommit="true",Object(l.addPurchaseRetreat)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.formData.isAutoCommit="false",Object(l.addPurchaseRetreat)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}})},saveSaleOrder:function(e){},closeDialog:function(e){this.showDialog=!1;var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByProduct(t)},tableSelectedByProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={id:"",productId:"",productCode:"",productName:"",productSpec:"",productProperty:"",unit:"",unitName:"",count:"0.00",amount:"0.00"};a.productId=i.id.trim(),null!=i.code&&i.code.trim().length>0&&(a.productCode=i.code.trim()),null!=i.name&&i.name.trim().length>0&&(a.productName=i.name.trim()),null!=i.spec&&i.spec.trim().length>0&&(a.productSpec=i.spec.trim()),null!=i.property&&i.property.trim().length>0&&(a.productProperty=i.property.trim()),null!=i.prodInfo&&i.prodInfo.trim().length>0&&(a.prodInfo=i.prodInfo.trim()),a.unit=i.unit,a.unitName=i.unitName,a.id=i.id.trim()||t,this.tableData.push(a)}}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px",width:"96%","margin-left":"2%"}},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.formData,"label-position":"right"}},[i("el-row",[i("el-col",{attrs:{span:14}},[i("el-form-item",{attrs:{label:"供应商:",prop:"supplierName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"300px"},attrs:{dialog:e.SupplierDialog.dialog},on:{callback:e.supplierSelect},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"padding-top":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticStyle:{"padding-top":"10px"}},[i("custom-base-table",{ref:"retreatAddDialog",attrs:{"data-custom-table-id":"views_purchase_purchaseRetreat_createRetreatByPurchase_dialogAddByPrice0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"retreatAddDialog",useDefaultBtn:!0,showAll:!1,keyMapping:e.keyMapping,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="dialogAddByPrice.vue";t.default=c.exports},wzoK:function(e,t,i){"use strict";i.r(t);i("rGqo"),i("91GP");var a=i("2+ib"),o=(i("z0WU"),i("Ppn9")),n=i("HSP/"),l={name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,tempQuery:{},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageBoms",params:{modelCode:"BomProduct",fieldCode:"prodInfo,unitName,code,name",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"prodCode,prodName,prodSpec,productProperty",isdefault:"1",isdisable:"1",isNullAlarm:"true"}},temp:{},showIndex:!0,isSingle:!0,showHeader:!0,showCheckBox:!0,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a,dialogAddFromBom:n.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{queryTable:function(){this.tableConfigList[0].apiObj.params.isNullAlarm="false",this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.tempQuery),this.updateData()},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.tableConfigList[0].apiObj.params.isNullAlarm="false",this.tableConfigList[0].apiObj.params=Object.assign({},this.tableConfigList[0].apiObj.params,this.tempQuery),this.updateData()},dialogClose:function(){this.$emit("close-dialog",{resState:"ok",selectList:[]})},nextStep:function(){var e="";this.selectList.forEach(function(t){e+=""==e?"'"+t.id+"'":",'"+t.id+"'"}),""!=e?(this.dialogData.temp=JSON.stringify(this.selectList),this.dialogData.tempLable=this.tempLable,this.dialogData.title="按产品BOM领料",this.openDialogName="dialogAddFromBom",this.showDialog=!0,this.visibleState=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条记录！"})},addProduct:function(){this.selectList.length>0?this.$emit("close-dialog",{resState:"ok",selectList:this.selectList}):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一条记录！"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},delete:function(e,t){var i=this;i.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.deleteAttachment)(e).then(function(e){0===e.code&&(i.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),i.updateData())}).catch(function(e){})}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&this.dialogClose()},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}},s=(i("BwO8"),i("H2KT"),i("KHd+")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"1500px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"90px"}},[i("el-row",[i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"货品编码："}},[i("el-input",{model:{value:e.tempQuery.prodCode,callback:function(t){e.$set(e.tempQuery,"prodCode",t)},expression:"tempQuery.prodCode"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"货品名称："}},[i("el-input",{model:{value:e.tempQuery.prodName,callback:function(t){e.$set(e.tempQuery,"prodName",t)},expression:"tempQuery.prodName"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"BOM编码："}},[i("el-input",{model:{value:e.tempQuery.code,callback:function(t){e.$set(e.tempQuery,"code",t)},expression:"tempQuery.code"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[i("el-form-item",{attrs:{label:"BOM名称："}},[i("el-input",{model:{value:e.tempQuery.name,callback:function(t){e.$set(e.tempQuery,"name",t)},expression:"tempQuery.name"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:2}},[i("el-form-item",[i("base-button",{attrs:{name:"查询",icon:"search"},on:{myclick:this.queryTable}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:2}},[i("el-form-item",[i("base-button",{attrs:{name:"重置",icon:"refresh",plain:!0},on:{myclick:this.resetQueryTemp}})],1)],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_produce_materialRequisition_dialogAddProduct10",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:"index"!=this.initData.parent,expression:"this.initData.parent != 'index' "}],attrs:{type:"primary"},on:{click:e.addProduct}},[e._v("确定")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"index"==this.initData.parent,expression:"this.initData.parent == 'index' "}],attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);r.options.__file="dialogAddProduct1.vue";t.default=r.exports},wzuy:function(e,t,i){"use strict";var a=i("KBHC");i.n(a).a},"xG+1":function(e,t,i){"use strict";i.r(t);var a={components:{multilevelTable:i("2+ib").a},props:["initData","visible"],data:function(){return{rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null},dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],tableConfigList:[{customColumn:[{columnIndex:"assistProductName",width:"200",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageAssistOrderDetailInfo",params:{fieldCode:"assistProductName,craftName,orderUnitName,orderCount,arriveCount,signFineCount,discardCount,retreatCount,receiveCount",orderId:"",orderDtlId:"",dataType:this.$storage.get("dataType")}},tempData:{},showHeader:!0,showIndex:!1,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"prodInfo",width:"250",_cellConfig:{hideTitle:!0}}],apiObj:{apiName:"listPageAssistOrderDetailChildInfo",params:{fieldCode:"prodInfo,ratio,count,deliverCount,signCount,retreatCount,discardCount",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"productCode,productName,productSpec,productProperty",orderId:"",orderDtlId:"",isNeedPage:"false"}},tempData:{},showIndex:!1,showCheckBox:!1,isSingle:!1,componentId:"twoLevelTable"}]}},beforeCreate:function(){},created:function(){null!=this.initData.orderDtlId&&(this.tableConfigList[0].apiObj.params.orderDtlId=this.initData.orderDtlId,this.tableConfigList[1].apiObj.params.orderDtlId=this.initData.orderDtlId),null!=this.initData.orderId&&(this.tableConfigList[0].apiObj.params.orderId=this.initData.orderId,this.tableConfigList[1].apiObj.params.orderId=this.initData.orderId)},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},databridge:function(e){Array.isArray(e)&&(this.tableData=[],this.tableData=e)},getData:function(){this.$refs.customBaseTable.getData()},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},closeDialog:function(e){}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{padding:"20px 20px 20px 20px"}},[i("el-row",[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_assist_assistOrde_dialogAssistOrderInfo0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogAssistOrderInfo.vue";t.default=n.exports},xOy8:function(e,t,i){"use strict";i.r(t);i("rGqo");var a=i("2+ib"),o=i("DJRg"),n=i("aukK"),l=(i("z0WU"),i("Ppn9"),{name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,topBarBtnList:[{name:"添加产品",nameEn:"addProduct",isShow:!0,icon:"add",method:this.addProduct}],tempCount:{count:0},tableConfigList:[{customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"planCount",componentName:"input",_cellConfig:{rules:[{required:!0},{greaterThan:["tempCount@count",!1]}],message:["该项不能为空！","该项输入必须大于零！"]}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,icon:"delete",method:this.delete}]}],apiObj:{apiName:"listPageBoms",params:{fieldCode:"prodInfo,genreName,unitName",addColumn:{columnKey:"prodInfo",columnName:"货品"},prodColumnKey:"prodCode,prodName,prodSpec,productProperty",modelCode:"BomProduct",bomIds:this.initData.temp}},temp:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,dragTable:!0,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],isreplaceable:"0",openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a,dialogAddProduct:o.default,dialogProdMaxNum:n.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},useReplaceable:function(e){this.isreplaceable=e?"1":"0"},removeArray:function(e,t){for(var i=e.length,a=0;a<i;a++)if(e[a].id==t.id)return 0==a?(e.shift(),e):a==i-1?(e.pop(),e):(e.splice(a,1),e)},delete:function(e,t){var i=this,a=this;a.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.deleteData(e),i.removeArray(i.initData.selectList,e)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},nextStep:function(){this.getData(),0!=this.selectList.length&&(this.dialogData.isreplaceable=this.isreplaceable,this.dialogData.temp=JSON.stringify(this.selectList),this.dialogData.tempLable=this.tempLable,this.dialogData.title="最大可生产量",this.openDialogName="dialogProdMaxNum",this.showDialog=!0,this.visibleState=!0)},addProduct:function(){var e="";this.initData.selectList&&this.initData.selectList.forEach(function(t){e+=""==e?"'"+t.id+"'":",'"+t.id+"'"}),this.dialogData.temp=e,this.dialogData.title="添加产品",this.openDialogName="dialogAddProduct",this.showDialog=!0,this.visibleState=!0},closeDialog:function(e){if(this.showDialog=!1,"ok"===e.resState)if(e.selectList){if(e.selectList.length>0){for(var t=0;t<e.selectList.length;t++)this.initData.selectList.push(e.selectList[t]);this.pushData(e.selectList)}}else this.dialogClose()},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}}),s=(i("CBQj"),i("68T8"),i("KHd+")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[e.topBarBtnList&&e.topBarBtnList.length?i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[e._l(e.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]}),e._v(" "),i("el-checkbox",{staticStyle:{"padding-top":"15px",float:"right"},on:{change:e.useReplaceable}},[e._v("是否使用替代物")])],2):e._e(),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_purchase_bundleAnalysis_dialogInputProd0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);r.options.__file="dialogInputProd.vue";t.default=r.exports},"xQ+D":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("8Vv6");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{code:"",name:"",addBalance:""},tempLable:{},tempNotEditable:{},rules:{},openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{dialogSelectDeliverList:i("5BnR").default},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.addBalance=0),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{nextPage:function(){var e=this;this.temp.addBalance<=0?this.$message({showClose:!0,message:"收款金额必须大于零！",duration:5e3}):this.$refs.submitForm.validate(function(t){t&&Object(a.addCustomerBalance)(e.temp).then(function(t){0===t.code&&(e.dialogData.temp=e.temp,e.dialogData.tempLable=e.tempLable,e.dialogData.title="收款",e.openDialogName="dialogSelectDeliverList",e.showDialog=!0,e.visibleState=!0)}).catch(function(e){})})},closeDialog:function(e){this.showDialog=!1,this.isVisible=!1,"ok"===e.resState&&this.dialogClose({resState:"ok"})},dialogClose:function(e){this.$emit("close-dialog",e||{})},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},save:function(){var e=this;e.temp.addBalance<=0?this.$message({showClose:!0,message:"收款金额必须大于零！",duration:5e3}):e.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addCustomerBalance)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.openDialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"10px auto"},attrs:{model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"客户编码:",prop:"code"}},[i("el-input",{staticStyle:{width:"140px"},model:{value:e.temp.code,callback:function(t){e.$set(e.temp,"code",t)},expression:"temp.code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"客户名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"140px"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"收款金额:",prop:"addBalance"}},[i("el-input",{staticStyle:{width:"140px"},model:{value:e.temp.addBalance,callback:function(t){e.$set(e.temp,"addBalance",e._n(t))},expression:"temp.addBalance"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:e.nextPage}},[e._v("下一步")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="dialogBalanceAdd.vue";t.default=s.exports},xbnh:function(e,t,i){"use strict";var a=i("Qww7");i.n(a).a},xgHm:function(e,t,i){"use strict";var a=i("oRzb");i.n(a).a},"y/8p":function(e,t,i){},y2WM:function(e,t,i){"use strict";var a=i("LUos");i.n(a).a},y4YF:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("1IKD"),o=i("0UjI"),n=i("WIyV"),l=i("uupt"),s=i("sNnr"),r=(i("qnVx"),i("z0WU"),{components:{productTableDialog:a.a,definedTableDialog:o.a,customBaseTable:n.a,dialogAddSupplier:l.default},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{applyName:[{required:!0,message:"请选择申请人",trigger:"change"}],deptName:[{required:!0,message:"请选择申请部门",trigger:"change"}],supplierName:[{required:!0,message:"请选择供应商",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{remark:"",applyName:"",supplierName:"",deptName:"",applyId:"",supplierId:"",deptId:"",dtlJsonStr:"",isAutoCommit:""},tempLable:{},tempQuery:{},tableData:[],tableList:[],productUnit:{},rowData:{},selectList:null,configs:{topBarBtnList:[{name:"选择货品",nameEn:"addProduct",isShow:!0,icon:"add",method:this.addProduct},{name:"从计划导入",nameEn:"addPlan",isShow:!0,icon:"add",method:this.addPlan}]},apiObj:{apiName:"listPagePurchaseOrderDetails",params:{fieldCode:"prodInfo,unit,count,price,amount,edate,reason,remark",prodColumnKey:"productCode,productName,spec,productProperty",parentId:"null"}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"unit",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"amount",width:"120",componentName:"input",_cellConfig:{compute:"self@price(*)self@count",editable:!1}},{columnIndex:"price",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,4})?$"}],message:["请输入大于零的正整数或(1,4)位小数！"]}},{columnIndex:"reason",componentName:"select",_cellConfig:{asyn:{apiName:"getDictionarys",params:{dictionaryKey:"purchaseReason",isglobal:"1"}},rules:[{required:!0}],outputData:!0}},{columnIndex:"edate",width:"180",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",greaterThan:["tempData@minDate",!0]}},{columnIndex:"remark",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{minDate:new Date},customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>￥{{data.total.toFixed(2)}}</span></li>\n                    </ul>'},data:{discount:"0.00",total:"0.00"},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},computes:{total:"table@amount"}},ApplyDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择申请人",tableUrl:"/system/user/listPageUsers",tableParm:{isdisable:"1",fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"600px",title:"选择部门",treeUrl:"/system/department/treeDepartments",treeParm:{},tableUrl:"/system/department/listPageDepartments",tableParm:{fieldCode:"name",isdisable:"1"},temp:{}},dialogName:"dialogTreeOption"}},SupplierDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择供应商",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"49c0a7ebcb4c4175bd5195837a6a9a13",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.applyId=e.userId,this.temp.applyName=e.userName,this.apiObj.params.parentId="null"},mounted:function(){this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},databridge:function(e){Array.isArray(e)&&(this.tableList=[],this.tableList=e)},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},applySelect:function(e){e[0]&&(this.temp.applyId=e[0].id,this.temp.applyName=e[0].name)},supplierSelect:function(e){e[0]&&(this.temp.supplierId=e[0].id,this.temp.supplierName=e[0].name)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},addProduct:function(){this.dialogData={title:"",data:null,tempLable:null},this.dialogData.querySpare="isSpareAll",this.dialogData.data=this.tableList,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},addPlan:function(){this.dialogData={title:"",data:null,tempLable:null},this.dialogData.apiName="listPagePurchasePlanDetails",this.dialogData.fieldCode="code,prodInfo,unitName,count,edate,reason",this.dialogData.prodColumnKey="productCode,productName,spec,productProperty",this.dialogData.queryStr=" detail.id not in (select plan_id from vmes_purchase_order_detail where plan_id is not null and state != '-1' ) and detail.state in ('2') ",this.dialogData.orderStr="plan.cdate asc";this.dialogData.searchList=[{label:"货品编码",type:"input",ruleType:"string",mapKey:"productCode",configs:{},placeholder:"请输入货品编码"},{label:"货品名称",type:"input",ruleType:"string",mapKey:"productName",configs:{},placeholder:"请输入货品名称"},{label:"计划单号",type:"input",ruleType:"string",mapKey:"code",configs:{},placeholder:"请输入计划单号"}],this.dialogData.data=this.tableList,this.dialogData.title="选择货品",this.openDialogName="definedTableDialog",this.showDialog=!0,this.inLinVisible=!0},save:function(){var e=this;this.tableList=[],this.$refs.orderAddDialog.getData(),setTimeout(function(){e.saveOrder()},1e3)},saveOrder:function(){var e=this,t="";this.$refs.submitForm.validate(function(i){if(i){if(null==e.tableList||0==e.tableList.length)return;for(var a=[],o=0;o<e.tableList.length;o++){var n=e.tableList[o],l={productId:"",amount:"",unit:"",price:"",count:"",reason:"",edate:"",remark:"",planId:"",id:""};l.productId=n.productId,l.amount=n.amount,n.unit.item?l.unit=n.unit.item.id:l.unit=n.unitId,n.reason.item?l.reason=n.reason.item.id:l.reason=n.reasonId,l.price=n.price,l.count=n.count,l.remark=n.remark,l.edate=n.edate,l.planId=n.planId,l.id=n.id,a.push(l)}t=JSON.stringify(a),e.temp.discount=e.customSummary.data.discount,e.temp.total=e.customSummary.data.total,e.temp.amount=e.temp.total-e.temp.discount,e.temp.dtlJsonStr=t,e.$confirm("添加采购订单后，是否将该采购订单提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.temp.isAutoCommit="true",Object(s.addPurchaseOrder)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.temp.isAutoCommit="false",Object(s.addPurchaseOrder)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}})},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"productTableDialog"==e.pageName){var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByProduct(t)}else if(null!=e&&"definedTableDialog"==e.pageName){var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelectedByPlan(i)}},tableSelectedByProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={id:"",productId:"",productCode:"",productName:"",spec:"",productProperty:"",unitId:"",unit:"",amount:"",price:"",count:""};a.productId=i.id.trim(),null!=i.code&&i.code.trim().length>0&&(a.productCode=i.code.trim()),null!=i.name&&i.name.trim().length>0&&(a.productName=i.name.trim()),null!=i.spec&&i.spec.trim().length>0&&(a.spec=i.spec.trim()),null!=i.property&&i.property.trim().length>0&&(a.productProperty=i.property.trim()),null!=i.prodInfo&&i.prodInfo.trim().length>0&&(a.prodInfo=i.prodInfo.trim()),a.unitId=i.unit,a.unit=i.unitName,a.id=i.id.trim()||t,this.tableData.push(a)}},tableSelectedByPlan:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={planId:i.id,edate:i.edate,reason:i.reason,reasonId:i.reasonId,count:i.count,amount:"",price:"",productId:i.productId,productCode:i.productCode,productName:i.productName,spec:i.productSpec,productProperty:i.productProperty,prodInfo:i.prodInfo,unitId:i.unitId,unit:i.unitName};a.id=i.id.trim()||t,this.tableData.push(a)}}},watch:{}}),c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"80%"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"申请人:",prop:"applyName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.ApplyDialog.dialog},on:{callback:e.applySelect},model:{value:e.temp.applyName,callback:function(t){e.$set(e.temp,"applyName",t)},expression:"temp.applyName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"申请部门:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"供应商:",prop:"supplierName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.SupplierDialog.dialog},on:{callback:e.supplierSelect},model:{value:e.temp.supplierName,callback:function(t){e.$set(e.temp,"supplierName",t)},expression:"temp.supplierName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state,dialog:e.dialog},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_purchase_orderManager_dialogAdd0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"orderAddDialog",useDefaultBtn:!0,rowKey:"_insideId",showAll:!1,keyMapping:e.keyMapping,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="dialogAdd.vue";t.default=d.exports},y6BG:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("8Vv6");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.temp.beforeBalance=this.temp.balance),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+\\.{0,1}[0-9]{0,2}$").test(e.trim())},checkValueNumber:function(e,t){var i="";return null==e||0==e.trim().length?i=t+"输入为空或空字符串，请输入大于零的正整数或(1,2)位小数！":null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&(i=t+"("+e+")输入错误，请输入大于零的正整数或(1,2)位小数！"),i},checkAfterBalance:function(e){var t=this.checkValueNumber(e,"调整后预收款");null!=t&&t.trim().length>0&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t})},save:function(){var e=this,t=this;t.$refs.submitForm.validate(function(i){if(i){var o=e.temp.balance+"",n=e.checkValueNumber(o,"调整后预收款");if(null!=n&&n.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:n});t.dialogLoading=!0,Object(a.updateCustomerBalance)(t.temp).then(function(e){t.dialogLoading=!1,0===e.code&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){t.dialogLoading=!1})}})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.dialogWidth},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"调整前预收款:",prop:"beforeBalance"}},[i("el-input",{staticStyle:{width:"140px"},attrs:{disabled:!0},model:{value:e.temp.beforeBalance,callback:function(t){e.$set(e.temp,"beforeBalance",t)},expression:"temp.beforeBalance"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"调整后预收款:",prop:"afterBalance"}},[i("el-input",{staticStyle:{width:"140px"},on:{change:e.checkAfterBalance},model:{value:e.temp.balance,callback:function(t){e.$set(e.temp,"balance",e._n(t))},expression:"temp.balance"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogBalanceEdit.vue";t.default=s.exports},y93b:function(e,t,i){},y9YZ:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("rGqo");var a=i("zF5t"),o=i("oC0i"),n=i("WnSj"),l=i("R1DK"),s=i("XBTa"),r=i("z0WU"),c=i("mSNy");function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.deleteWarehouse_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteWarehouse(scope.row,scope.$index)">删除</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},m={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model.number="scope.row.moveCount" @change="colConfig.checkCount(scope.row,scope.$index)"></el-input>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},h={components:{dialogRoleUser:o.default,dialogChangeWarehouseByIn:n.default},name:"dialog-add",props:["initData","visible"],data:function(){return{roleId:"",roleName:"",type:"",userData:[],userId:[],isSingle:!0,rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",temp:{},tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],selectList:null,tableIndex:null,initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:p,deleteWarehouse:this.deleteWarehouse,deleteWarehouse_isShow:!0}},configs:{tableConfigs:[],showCheckBox:!1,showIndex:!1},newWarehouse:{name:null,id:null},pageData:null,pageNo:1,selectDataUser:{data:{selectUrl:"/system/role/findListUserByRole",selectParm:{queryStr:"role.id = '"+this.initData.temp.roleId+"'",userIsdisable:"1"}},defaultSelected:[]}}},created:function(){this.tableIndex=null,this.roleId=this.initData.temp.roleId,this.roleName=this.initData.temp.roleName,this.type=this.initData.temp.type,this.initUserData(),this.initTable()},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=u(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{userSelect:function(e,t){e[0]?(this.selectDataUser.defaultSelected=[e[0]],this.userId=[e[0]]):(this.selectDataUser.defaultSelected=[],this.userId=[])},checkCount:function(e,t){if(!e.moveCount)return this.$message({type:"warning",duration:5e3,showClose:!0,message:"输入的移库数量不能为空！"}),!1;if(!/^[0-9]+(.[0-9]{1,3})?$/.test(e.moveCount))return this.$message({type:"warning",duration:5e3,showClose:!0,message:"请输入正确移库数量！"}),e.moveCount=null,!1;var i=parseFloat(e.stockCount);return e.moveCount>i?(this.$message({type:"warning",duration:5e3,showClose:!0,message:"输入的移库数量不能大于库存数量！"}),e.moveCount=null,!1):void 0},selectWarehouse:function(){this.dialogData.title="选择库位",this.openDialogName="dialogChangeWarehouseByIn",this.showDialog=!0,this.inLinVisible=!0},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(r.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==c.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==c.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==c.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==c.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"moveCount"===e.prop&&(e.component=m,e.checkCount=t.checkCount)}),this.internationalConfig(),e.push(this.initConfigs.tableOperates),e},internationalConfig:function(){"en"==c.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==c.a.locale&&(this.initConfigs.tableOperates.label="操作")},initTable:function(){var e=this,t="",i=this.initData.temp;null!=i&&i.length>0&&i.forEach(function(e){null!=e.id&&e.id.trim().length>0&&(t=0==t.length?"'"+e.id.trim()+"'":t+",'"+e.id.trim()+"'")});var a="";null!=t&&t.trim().length>0&&(a="wp.id in ("+t+")"),this.dialogLoading=!0,Object(l.listPageWarehouseProductMove)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){d(e,t,i[t])})}return e}({},this.tempQuery,{queryStr:a,pageNo:this.pageNo})).then(function(t){e.getListPage(t),e.dialogLoading=!1}).catch(function(t){e.dialogLoading=!1})},initUserData:function(){var e=this;this.userData=[],Object(a.findListUserByRole)({userIsdisable:"1",queryStr:"role.id = '"+this.roleId+"'"}).then(function(t){var i=t.result.options;null!=i&&i.length>0&&i.forEach(function(t){var i=t.id,a=t.userName;null!=i&&i.trim().length>0&&null!=a&&a.trim().length>0&&e.userData.push({key:i,label:a,disabled:!1})})}).catch(function(e){})},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},leftCheckChange:function(e){this.isSingle&&this.singleUserData(e)},singleUserData:function(e){var t=this.userData;if(null!=t&&0!=t.length)if(0==e.length)t.forEach(function(e){e.disabled=!1});else if(e.length>0){var i="";e.forEach(function(e){i=i+e+","}),t.forEach(function(e){var t=e.key;-1==i.indexOf(t)&&(e.disabled=!0)})}},addAdmin:function(){var e=this.roleId,t=this.roleName;this.dialogData.temp.roleId=e,this.dialogData.title=t+"-分配用户",this.openDialogName="dialogRoleUser",this.showDialog=!0,this.inLinVisible=!0},saveDispatch:function(){var e=this,t=this.roleId,i=this.roleName;this.type;if(null!=t&&0!=t){if(null==this.userData||0==this.userData.length)return this.dialogData.temp.roleId=t,this.dialogData.title=i+"-分配用户",this.openDialogName="dialogRoleUser",this.showDialog=!0,void(this.inLinVisible=!0);if(null!=this.userId&&0!=this.userId.length)if(this.newWarehouse.id){this.temp.warehouseId=this.newWarehouse.id;var a=this.tableData,o="";if(null!=a&&0!=a.length){for(var n=[],l=0;l<a.length;l++){var r=a[l],c={warehouseProductId:"",count:"",productName:""};if(!r.moveCount)return void this.$message({type:"warning",duration:5e3,showClose:!0,message:"第"+(l+1)+"行的移库数量不能为空！"});c.warehouseProductId=r.id,c.count=r.moveCount,c.productName=r.productName,n.push(c)}o=JSON.stringify(n),this.temp.dtlJsonStr=o;for(var d="",u=0;u<this.userId.length;u++){var p=this.userId[u];null!=p&&p.trim().length>0&&(d=d?d+","+p:p)}this.temp.executorIdsStr=d,Object(s.saveWarehouseMove)(this.temp).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择新的库位！"});else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择执行人！"})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"仓库管理员角色ID为空或空字符串！"})},deleteWarehouse:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){"{}"!=JSON.stringify(e)&&(this.newWarehouse.id=e.id,this.newWarehouse.name=e.pathName,"ok"==e.resState&&this.initUserData()),this.inLinVisible=!1,this.showDialog=!1}},watch:{pageNo:function(){this.initTable()}}},g=(i("kCjF"),i("KHd+")),f=Object(g.a)(h,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px",top:"50px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{width:"100%","margin-left":"2%","margin-top":"10px"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{value:e.newWarehouse.name,placeholder:"选择新库位",readonly:!0,clearable:!0}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.selectWarehouse},slot:"append"})],1),e._v(" "),i("base-input-select",{staticStyle:{width:"200px","margin-left":"5%"},attrs:{placeholder:"选择执行人",disabled:!1,data:e.selectDataUser.data},on:{callback:e.userSelect},model:{value:e.selectDataUser.defaultSelected,callback:function(t){e.$set(e.selectDataUser,"defaultSelected",t)},expression:"selectDataUser.defaultSelected"}}),e._v(" "),i("span",{staticStyle:{"font-size":"12px",color:"#1482f0",cursor:"pointer"},on:{click:e.addAdmin}},[e._v("+添加仓库管理员")])],1),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-top":"10px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveDispatch}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);f.options.__file="dialogDispatch.vue";t.default=f.exports},yBjn:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("ZeDI"),o={name:"dialog-edit",props:["initData","visible"],data:function(){return{rules:{name:[{required:!0,message:"请填写工艺名称！",trigger:"change"}]},dialogLoading:!1,isVisible:!1,inDialog:!0,formData:{id:"",name:"",remark:""}}},created:function(){this.formData.id=this.initData.rowData.id,this.formData.name=this.initData.rowData.name,this.formData.remark=this.initData.rowData.remark},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.updateAssistCraft)(e.formData).then(function(t){0===t.code&&(e.dialogLoading=!1,e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"100%",padding:"10px"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"90px"}},[i("el-form-item",{attrs:{label:"工艺名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"240px"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);l.options.__file="dialogEdit.vue";t.default=l.exports},yLpp:function(e,t,i){},yNXC:function(e,t,i){"use strict";i.r(t);i("Oyvg");var a=i("9wPf"),o={components:{},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{amount:[{required:!0,trigger:"change",validator:function(t,i,a){e.isNumberByValue(i)?(0==i&&a(new Error("请输入大于零的正整数或(1,2)位小数！")),a()):a(new Error("请输入大于零的正整数或(1,2)位小数！"))}}]},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{signId:"",sysCode:"",supplierId:"",supplierCode:"",supplierName:"",amount:"",remark:""},openDialogName:"",showDialog:!1,inLinVisible:!1,formTemp:[]}},created:function(){this.formData.signId=this.initData.rowData.id,this.formData.supplierId=this.initData.rowData.supplierId,this.formData.supplierCode=this.initData.rowData.supplierCode,this.formData.supplierName=this.initData.rowData.supplierName,this.formData.sysCode=this.initData.rowData.sysCode},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e)},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.addFinanceBillByAssist)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},closeDialog:function(e){}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"供应商名称:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{readonly:!0},model:{value:e.formData.supplierName,callback:function(t){e.$set(e.formData,"supplierName",t)},expression:"formData.supplierName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"金额:",prop:"amount"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="addFinanceBillByPurchase.vue";t.default=l.exports},yP9E:function(e,t,i){"use strict";i.r(t);var a={components:{customBaseTable:i("WIyV").a},props:["initData","visible"],data:function(){return{businessId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,tableData:[],apiObj:{apiName:"listPageRepairTaskDetailByIn",params:{fieldCode:"sysCode,repairUserName,beginTimeStr,endTimeStr,taskResultName,productCode,productName,productSpec,productGenreName,productUnitName,receiveCount,inCount",inId:"",orderStr:"task.cdate,taskDtl.cdate asc"}},customColumn:[{}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{}}},beforeCreate:function(){},created:function(){this.businessId=this.initData.businessId,this.apiObj.params.inId=this.initData.businessId},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{databridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})}}},o=i("KHd+"),n=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:e.initData.dialog_width},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("el-row",{staticStyle:{"padding-top":"10px"},style:e.initData.table_style},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_equipment_equipmentRepair_dialogRepairTaskDetailByIn0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,componentId:"orderAddDialog",useDefaultBtn:!1,showAll:!1,keyMapping:e.keyMapping},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);n.options.__file="dialogRepairTaskDetailByIn.vue";t.default=n.exports},ygWb:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("3LyK");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{parentId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){this.parentId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(a.auditDisagreeSaleOrderChange)({id:e.parentId,remark:e.temp.remark}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAuditDisagree.vue";t.default=s.exports},yhB7:function(e,t,i){},ylDV:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("uH3l"),o=i("WZUi");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{dialogEquipmentFormula:a.default},name:"dialog-add",props:["initData","visible"],data:function(){return{isShowTargetFormula:!1,rules:{targetName:[{required:!0,message:"请填写指标名称",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{equipmentId:"",targetType:"",targetName:"",targetFormula:"",targetFormulaSql:"",targetFormulaDisplay:"",remark:""},formulaData:null}},created:function(){this.formData.targetType="A",this.isShowTargetFormula=!1,this.formData.equipmentId=this.initData.equipmentId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=n(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){this.inLinVisible=!1,this.showDialog=!1,this.formulaData=e,this.formData.targetFormulaDisplay=e.targetFormulaDisplay,this.formData.targetFormula=e.targetFormula,this.formData.targetFormulaSql=e.targetFormulaSql},openFormula:function(){this.formData.targetName?(this.dialogData.equipmentId=this.initData.equipmentId,this.dialogData.targetName=this.formData.targetName,this.dialogData.title="设置公式",this.openDialogName="dialogEquipmentFormula",this.showDialog=!0,this.inLinVisible=!0):this.$message({type:"warning",duration:5e3,showClose:!0,message:"请先填写指标名称！"})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(o.addEquipmentSensor)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})},selectChange:function(){this.isShowTargetFormula=!1,"B"==this.formData.targetType&&(this.isShowTargetFormula=!0)}},watch:{}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"margin-top":"20px"}},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto",width:"100%"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"指标类型:",prop:"targetType"}},[i("el-select",{staticStyle:{width:"200px"},on:{change:e.selectChange},model:{value:e.formData.targetType,callback:function(t){e.$set(e.formData,"targetType",t)},expression:"formData.targetType"}},[i("el-option",{attrs:{label:"传感器指标",value:"A"}}),e._v(" "),i("el-option",{attrs:{label:"分析指标",value:"B"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"指标名称:",prop:"targetName"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.formData.targetName,callback:function(t){e.$set(e.formData,"targetName",t)},expression:"formData.targetName"}})],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isShowTargetFormula,expression:"isShowTargetFormula"}]},[i("el-form-item",{attrs:{label:"指标公式:",prop:"targetFormula"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2",disabled:!0},model:{value:e.formData.targetFormulaDisplay,callback:function(t){e.$set(e.formData,"targetFormulaDisplay",t)},expression:"formData.targetFormulaDisplay"}}),e._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:e.openFormula}},[e._v("公式编辑器")])],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogAdd.vue";t.default=r.exports},ywZ6:function(e,t,i){"use strict";i.r(t);i("f3/d");var a=i("9rC1"),o={name:"dialog-add",props:["initData","visible"],data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{name:[{required:!0,message:"请填写名称",trigger:"change"}]},typeData:{},customerTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"customerType",isglobal:"0",isNeetOneLayer:"true"}},defaultSelected:[]},supplierTypeData:{data:{selectUrl:"/system/dictionary/getDictionarys",selectParm:{dictionaryKey:"supplierType",isglobal:"0",isNeetOneLayer:"true"}},defaultSelected:[]},provinceData:{data:{selectUrl:"/system/dictionary/treeDictionarys",selectParm:{dictionaryKey:"area",cascade:"true"}},defaultSelected:[]},openDialogName:"",showDialog:!1,inLinVisible:!1}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.defaultSelected=[])},provinceSelect:function(e,t,i){e&&e.length>0?(this.temp.province=e[e.length-1],this.provinceData.defaultSelected=e):(this.temp.province=[],this.provinceData.defaultSelected=[])},dialogOpen:function(){var e=this,t="49c0a7ebcb4c4175bd5195837a6a9a13";this.temp.genre=t,this.typeData=this.supplierTypeData,this.temp.type=this.typeData.defaultSelected[0],this.temp.province=this.provinceData.defaultSelected[0],this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this,t=this;this.$refs.submitForm.validate(function(i){i&&(t.dialogLoading=!0,Object(a.addCustomer)(t.temp).then(function(i){t.dialogLoading=!1,0===i.code&&(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok",supplierId:i.id,supplierName:e.temp.name}))}).catch(function(e){t.dialogLoading=!1}))})},closeDialog:function(e){this.showDialog=!1}}},n=i("KHd+"),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"80%","padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"80px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类型:",prop:"typeName"}},[i("base-input-select",{staticStyle:{width:"240px"},attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.defaultSelected,callback:function(t){e.$set(e.typeData,"defaultSelected",t)},expression:"typeData.defaultSelected"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地区:",prop:"provinceName"}},[i("base-input-select",{staticStyle:{width:"240px"},attrs:{data:e.provinceData.data},on:{callback:e.provinceSelect},model:{value:e.provinceData.defaultSelected,callback:function(t){e.$set(e.provinceData,"defaultSelected",t)},expression:"provinceData.defaultSelected"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:"2"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="dialogAddSupplier.vue";t.default=l.exports},yyEd:function(e,t,i){"use strict";var a=i("3zMr");i.n(a).a},"z+ln":function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("f3/d");var a=i("1IKD"),o=i("WIyV"),n=i("0UjI"),l=i("sNnr"),s=(i("qnVx"),i("uupt"));i("z0WU");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={components:{productTableDialog:a.a,definedTableDialog:n.a,dialogAddSupplier:s.default,customBaseTable:o.a},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{remark:"",applyName:"",supplierName:"",deptName:"",applyId:"",supplierId:"",deptId:"",dtlJsonStr:"",isAutoCommit:""},tempLable:{},tempQuery:{},tableData:[],tableList:[],rowData:{},selectList:null,configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct},{name:"从计划导入",nameEn:"addPlan",isShow:!0,icon:"add",method:this.addPlan}]},apiObj:{apiName:"listPagePurchaseOrderDetails",params:{fieldCode:"prodInfo,unit,count,price,amount,edate,reason,remark",prodColumnKey:"productCode,productName,spec,productProperty",parentId:""}},customColumn:[{columnIndex:"prodInfo",width:"200",_cellConfig:{hideTitle:!0}},{columnIndex:"unit",width:"100",componentName:"select",_cellConfig:{asyn:{apiName:"findListProductUnitByProduct",params:{productId:""}},rules:[{required:!0}],outputData:!0}},{columnIndex:"count",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+\\.{0,1}[0-9]{0,2}$"}],message:["请输入大于零的正整数或(1,2)位小数！"]}},{columnIndex:"amount",width:"120",componentName:"input",_cellConfig:{compute:"self@price(*)self@count",editable:!1}},{columnIndex:"price",width:"120",componentName:"input",_cellConfig:{rules:[{regexp:"^[0-9]+([.]{1}[0-9]{1,4})?$"}],message:["请输入大于零的正整数或(1,4)位小数！"]}},{columnIndex:"reason",componentName:"select",_cellConfig:{asyn:{apiName:"getDictionarys",params:{dictionaryKey:"purchaseReason",isglobal:"1"}},rules:[{required:!0}],outputData:!0}},{columnIndex:"edate",width:"180",componentName:"date",_cellConfig:{valueType:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",greaterThan:["tempData@minDate",!0]}},{columnIndex:"remark",componentName:"input",_cellConfig:{}}],mergeTitle:[],mergeColumn:[],mergeRow:[],keyMapping:{},tempData:{minDate:new Date},customSummary:{component:{props:["data","setStyle"],template:'<ul class="clearfix" :style="setStyle">\n                    <li style="float: left;width: 100%"><span>合计金额：</span><span>￥{{data.total.toFixed(2)}}</span></li>\n                    </ul>'},data:{discount:"0",total:"0"},boxStyle:{width:"250px",float:"left",padding:"10px"},apiObj:{apiName:"",params:{}},computes:{total:"table@amount"}},ApplyDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{isdisable:"1",fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"600px",title:"选择部门",treeUrl:"/system/department/treeDepartments",treeParm:{},tableUrl:"/system/department/listPageDepartments",tableParm:{isdisable:"1",fieldCode:"name"},temp:{}},dialogName:"dialogTreeOption"}},SupplierDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,width:"500px",title:"选择供应商",tableUrl:"/base/customer/listPageCustomers",tableParm:{isdisable:"1",genre:"49c0a7ebcb4c4175bd5195837a6a9a13",fieldCode:"name"},temp:{}},dialogName:"dialogOptionNotCode"}}}},created:function(){this.$storage.get("userInfo");this.temp=this.initData.temp,this.apiObj.params.parentId=this.initData.temp.id,this.customSummary.data.discount=this.temp.discount,this.customSummary.data.total=this.temp.total},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},databridge:function(e){Array.isArray(e)&&(this.tableList=[],this.tableList=e)},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},applySelect:function(e){e[0]&&(this.temp.applyId=e[0].id,this.temp.applyName=e[0].name)},supplierSelect:function(e){e[0]&&(this.temp.supplierId=e[0].id,this.temp.supplierName=e[0].name)},addSupplier:function(){this.dialogData.title="新增供应商",this.openDialogName="dialogAddSupplier",this.showDialog=!0,this.inLinVisible=!0},addProduct:function(){this.dialogData.querySpare="isSpareAll",this.dialogData.data=this.tableList,this.dialogData.title="选择货品",this.openDialogName="productTableDialog",this.showDialog=!0,this.inLinVisible=!0},addPlan:function(){this.dialogData={title:"",data:null,tempLable:null},this.dialogData.apiName="listPagePurchasePlanDetails",this.dialogData.fieldCode="code,prodInfo,unitName,count,edate,reason",this.dialogData.prodColumnKey="productCode,productName,spec,productProperty",this.dialogData.queryStr=" detail.id not in (select plan_id from vmes_purchase_order_detail where plan_id is not null and state != '-1' ) and detail.state = '2' ",this.dialogData.orderStr="product.code desc";this.dialogData.searchList=[{label:"编码",type:"input",ruleType:"string",mapKey:"productCode",configs:{},placeholder:"请输入编码"},{label:"名称",type:"input",ruleType:"string",mapKey:"productName",configs:{},placeholder:"请输入名称"}],this.dialogData.data=this.tableList,this.dialogData.title="选择货品",this.openDialogName="definedTableDialog",this.showDialog=!0,this.inLinVisible=!0},editOrder:function(){var e=this,t="";if(this.$refs.orderAddDialog.getData(),null!=this.tableList&&0!=this.tableList.length){for(var i=[],a=0;a<this.tableList.length;a++){var o=this.tableList[a],n={productId:"",amount:"",unit:"",price:"",count:"",reason:"",edate:"",remark:"",planId:"",id:""};n.productId=o.productId,n.amount=o.amount,o.unit.item?n.unit=o.unit.item.id:n.unit=o.unitId,o.reason.item?n.reason=o.reason.item.id:n.reason=o.reasonId,n.price=o.price,n.count=o.count,n.remark=o.remark,n.edate=o.edate,n.planId=o.planId,n.id=o.id,i.push(n)}t=JSON.stringify(i),this.temp.discount=this.customSummary.data.discount,this.temp.total=this.customSummary.data.total,this.temp.amount=this.temp.total-this.temp.discount,this.temp.dtlJsonStr=t,this.$refs.submitForm.validate(function(t){t&&e.$confirm("修改采购订单后，是否将该采购订单提交？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.dialogLoading=!0,e.temp.isAutoCommit="true",Object(l.editPurchaseOrder)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}).catch(function(t){"cancel"==t&&(e.dialogLoading=!0,e.temp.isAutoCommit="false",Object(l.editPurchaseOrder)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1}))})})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},closeDialog:function(e){if(this.showDialog=!1,null!=e&&"productTableDialog"==e.pageName){var t=[];null!=e.selectList&&(t=e.selectList),this.tableSelectedByProduct(t)}else if(null!=e&&"definedTableDialog"==e.pageName){var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelectedByPlan(i)}},tableSelectedByProduct:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={id:"",productId:"",productCode:"",productName:"",spec:"",productProperty:"",unitId:"",unit:"",amount:"",price:"",count:""};a.productId=i.id.trim(),null!=i.code&&i.code.trim().length>0&&(a.productCode=i.code.trim()),null!=i.name&&i.name.trim().length>0&&(a.productName=i.name.trim()),null!=i.spec&&i.spec.trim().length>0&&(a.spec=i.spec.trim()),null!=i.property&&i.property.trim().length>0&&(a.productProperty=i.property.trim()),null!=i.prodInfo&&i.prodInfo.trim().length>0&&(a.prodInfo=i.prodInfo.trim()),a.unitId=i.unit,a.unit=i.unitName,a.id=i.id.trim()||t,this.tableData.push(a)}},tableSelectedByPlan:function(e){if(null!=e&&e.length>0)for(var t=0;t<e.length;t++){var i=e[t],a={planId:i.id,edate:i.edate,reason:i.reason,reasonId:i.reasonId,count:i.count,amount:"",price:"",productId:i.productId,productCode:i.productCode,productName:i.productName,spec:i.productSpec,productProperty:i.productProperty,prodInfo:i.prodInfo,unitId:i.unitId,unit:i.unitName};a.id=i.id.trim()||t,this.tableData.push(a)}}},watch:{}},d=i("KHd+"),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"80%"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{"padding-top":"10px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"申请人:",prop:"applyName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.ApplyDialog.dialog},on:{callback:e.applySelect},model:{value:e.temp.applyName,callback:function(t){e.$set(e.temp,"applyName",t)},expression:"temp.applyName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"申请部门:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"供应商:",prop:"supplierName"}},[i("base-input-option",{staticStyle:{display:"inline-block",width:"200px"},attrs:{dialog:e.SupplierDialog.dialog},on:{callback:e.supplierSelect},model:{value:e.temp.supplierName,callback:function(t){e.$set(e.temp,"supplierName",t)},expression:"temp.supplierName"}}),e._v(" "),i("el-button",{staticStyle:{display:"inline-block",padding:"10px"},attrs:{size:"medium",type:"text",icon:"el-icon-plus"},on:{click:e.addSupplier}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{width:"96%","margin-left":"2%"}},[i("custom-base-table",{ref:"orderAddDialog",attrs:{"data-custom-table-id":"views_purchase_orderManager_dialogEdit0",isSortable:!1,varList:e.tableData,keyValue:!1,showIndex:!0,showTableSet:!1,customColumn:e.customColumn,apiObj:e.apiObj,mergeTitle:e.mergeTitle,mergeColumn:e.mergeColumn,mergeRow:e.mergeRow,tempData:e.tempData,componentId:"orderAddDialog",useDefaultBtn:!0,rowKey:"_insideId",showAll:!1,keyMapping:e.keyMapping,useSummary:!0,customSummary:e.customSummary},on:{databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.editOrder}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="dialogEdit.vue";t.default=u.exports},"z/v7":function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=i("vleD"),n=i("Qe0A"),l={components:{multilevelTable:a.a,dialogOption:o.default},props:["initData","visible"],data:function(){return{parentId:"",tableData:[],tableConfigList:[{customColumn:[{columnIndex:"code",_cellConfig:{hideTitle:!0},width:"150"},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"选择库位",nameEn:"changeWarehouse",method:this.changeWarehouse}]}],apiObj:{apiName:"listPageWarehouseOutDetailsExecuteByWC",params:{parentId:"",detailState:"1"}},tempData:{},showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,componentId:"oneLevelTable",expand:!0,expandMode:"all",rowStyle:{"background-color":"#dfe6ec"}},{customColumn:[{columnIndex:"suggestCount",width:"120",componentName:"input",_cellConfig:{rules:[{required:!0},{regexp:"^[0-9]+([.]{1}[0-9]+){0,1}$"},{lessThan:["self@stockCount",!0]}],message:["不能为空！","请输入大于零的整数或小数","必须小于库存数量！"]}},{columnIndex:"last",prop:"operate",label:"操作",componentName:"button",component:[{name:"删除",nameEn:"delete",editBtns_isShow:!0,plain:!0,state:!0,method:this.deleteRow}]}]}],openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!1,isVisible:!1,inDialog:!0}},beforeCreate:function(){},created:function(){this.parentId=this.initData.temp.id,this.tableConfigList[0].apiObj.params.parentId=this.initData.temp.id},beforeMount:function(){},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},computed:{fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},getData:function(){this.$refs.customBaseTable.getData()},databridge:function(e){this.tableData=e},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},closeDialog:function(e,t,i){if("close"!=i){var a={id:"",warehouseName:"",code:"",stockCount:"",suggestCount:"0.00"};if(null!=e&&e.length>0){var o=e[0];a.id=o.id,a.code=o.code,a.warehouseName=o.warehouseName,a.stockCount=o.stockCount,this.pushData(a,t)}}this.showDialog=!1},deleteRow:function(e){this.deleteData(e)},findWarehouseByRowData:function(e){var t="";if(null!=e&&null!=e.children&&e.children.length>0)for(var i=e.children,a=0;a<i.length;a++){var o=i[a].id;null!=o&&o.trim().length>0&&(t=t+o.trim()+",")}return t},changeWarehouse:function(e){var t=this.findWarehouseByRowData(e);this.dialogData.temp=e,this.dialogData.title="选择库位",this.dialogData.isSingle=!1,this.dialogData.tableUrl="/warehouse/warehouseProduct/listPageWarehouseProductsDispatchOption",this.dialogData.tableParm={notInIds:t,productId:e.productId,stockCountQuery:"stockCountGreaterThanZero",isNotNeedSpare:"true",isNeedEntity:"true"},this.openDialogName="dialogOption",this.showDialog=!0,this.inLinVisible=!0},checkColumnExecuteByBig:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i],o=a.productCode,n=a.productName,l=0;if(null!=a.count)l=(a.count+"")/1;for(var s="("+o+","+n+")货品 ",r=0,c=a.children,d=0;d<c.length;d++){r+=c[d].suggestCount/1}r>l&&(t=s+"建议取货数量总和不可大于出库数量")}return t},save:function(){if(this.getData(),null!=this.tableData&&this.tableData.length>0){var e=this.checkColumnExecuteByBig(this.tableData);if(null!=e&&e.trim().length>0)return void this.$message({type:"warning",duration:5e3,showClose:!0,message:e});this.submitWarehouseOutExecute(this.tableData)}},submitWarehouseOutExecute:function(e){var t=this,i=JSON.stringify(e);Object(n.executeWarehouseOutExecuteByWC)({jsonDataStr:i}).then(function(e){0===e.code&&(t.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3}),t.isVisible=!1,t.dialogClose({resState:"ok"}))}).catch(function(e){})}},watch:{}},s=i("KHd+"),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-bottom":"5px",border:"1px solid #E4E4E4","border-bottom":"none"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_warehouseByWC_outByWC_dialogExecute0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="dialogExecute.vue";t.default=r.exports},z1Gy:function(e,t,i){"use strict";i("rGqo"),i("f3/d");var a={name:"QkImage",props:{imageSrc:{type:String,default:"http://seopic.699pic.com/photo/50051/4111.jpg_wh1200.jpg"},id:{type:String,default:""}},methods:{}},o=(i("B7Ix"),i("KHd+")),n=Object(o.a)(a,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"qk-image"},[t("img",{attrs:{id:this.id,src:this.imageSrc}})])},[],!1,null,"3b18bde8",null);n.options.__file="index.vue";var l=n.exports;l.install=function(e){e.component(l.name,l)};var s=l,r=(i("KKXr"),i("TB3a")),c={name:"QkDate",props:{value:{type:String,default:""},item:{type:Object,default:function(){return null}}},data:function(){return{dateValue:"",dateTimer:""}},created:function(){var e=this;this.dateValue=r.a.formatDate().split(" ")[0];var t=864e5+60*(new Date).getTimezoneOffset()*1e3-((new Date).getTime()-new Date(this.dateValue).getTime());this.dateTimer=setTimeout(function(t){e.dateValue=r.a.formatDate().split(" ")[0]},t)},beforeDestroy:function(){clearTimeout(this.dateTimer)}},d=(i("cSvC"),Object(o.a)(c,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"qk-date",domProps:{textContent:this._s(this.dateValue)}})},[],!1,null,"0a731891",null));d.options.__file="index.vue";var u=d.exports;u.install=function(e){e.component(u.name,u)};var p=u,m=(i("a1Th"),{name:"QkDatetime",props:{value:{type:String,default:""},item:{type:Object,default:function(){return null}}},data:function(){return{dateValue:"",dateTimer:""}},created:function(){var e=this;this.dateValue=this.formatDate(),this.dateTimer=setInterval(function(t){e.dateValue=e.formatDate()},1e3)},beforeDestroy:function(){clearInterval(this.dateTimer)},methods:{formatDate:function(e,t){var i=e?new Date(e):new Date,a=i.getFullYear(),o=i.getMonth()+1,n=i.getDate(),l=i.getHours(),s=i.getMinutes(),r=function(e){return(e=e.toString())[1]?e:"0"+e};return[a,o,n].map(r).join(t||"-")+" "+[l,s].map(r).join(":")}}}),h=(i("80ie"),Object(o.a)(m,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"qk-datetime",domProps:{textContent:this._s(this.dateValue)}})},[],!1,null,"5673e11a",null));h.options.__file="index.vue";var g=h.exports;g.install=function(e){e.component(g.name,g)};var f=g,b={name:"QkTime",props:{value:{type:String,default:""},item:{type:Object,default:function(){return null}}},data:function(){return{timeValue:"",dateTimer:""}},created:function(){var e=this;this.timeValue=r.a.formatDate().split(" ")[1],this.dateTimer=setInterval(function(t){e.timeValue=r.a.formatDate().split(" ")[1]},1e3)},beforeDestroy:function(){clearInterval(this.dateTimer)}},v=(i("i6nb"),Object(o.a)(b,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"qk-time",domProps:{textContent:this._s(this.timeValue)}})},[],!1,null,"726f3bfc",null));v.options.__file="index.vue";var D=v.exports;D.install=function(e){e.component(D.name,D)};var y=D,w={name:"QkInput",props:{value:{type:String,default:""},readonly:{type:Boolean,default:!1},item:{type:Object,default:function(){return null}}},data:function(){return{userValue:this.value}},watch:{userValue:function(){this.$emit("value-bus",{value:this.userValue,uuid:this.item.uuid})}}},C=(i("mWOU"),Object(o.a)(w,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"qk-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.userValue,expression:"userValue"}],staticClass:"qk-input-item",attrs:{placeholder:e.readonly?"":"请输入",type:"text",readonly:e.readonly},domProps:{value:e.userValue},on:{input:function(t){t.target.composing||(e.userValue=t.target.value)}}})])},[],!1,null,"b856e46a",null));C.options.__file="index.vue";var x=C.exports;x.install=function(e){e.component(x.name,x)};var S=x,N={name:"QkTextarea",props:{value:{require:!1},readonly:{type:Boolean,default:!1},item:{type:Object,default:function(){return null}}},data:function(){return{tempValue:this.value}},watch:{tempValue:function(){this.$emit("value-bus",{value:this.tempValue,uuid:this.item.uuid})}}},k=(i("GyfT"),Object(o.a)(N,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"qk-textarea"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.tempValue,expression:"tempValue"}],staticClass:"qk-textarea-item",staticStyle:{width:"100%",height:"100%"},attrs:{placeholder:e.readonly?"":"请输入",readonly:e.readonly},domProps:{value:e.tempValue},on:{input:function(t){t.target.composing||(e.tempValue=t.target.value)}}})])},[],!1,null,"a6ccb19c",null));k.options.__file="index.vue";var _=k.exports;_.install=function(e){e.component(_.name,_)};var L=_,I={name:"QkCustom",components:{warehouseTaskList:function(){return i.e("chunk-7b55").then(i.bind(null,"0ZVU"))},warehouseTaskStatistics:function(){return i.e("chunk-feda").then(i.bind(null,"179/"))}},props:{value:{type:String,default:""},readonly:{type:Boolean,default:!1},item:{type:Object,default:function(){return null}}},computed:{componentName:function(){return this.item?this.item.componentName:""}},methods:{noScreenfull:function(){this.$emit("unscreenfull")}}},T=(i("xbnh"),Object(o.a)(I,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"qk-custom"},[t(this.componentName,{tag:"component",staticClass:"qk-custom-item",attrs:{customData:this.item,readonly:this.readonly},on:{unscreenfull:this.noScreenfull}})],1)},[],!1,null,null,null));T.options.__file="index.vue";var O=T.exports;O.install=function(e){e.component(O.name,O)};var $=O;i.d(t,"a",function(){return P});var V=[s,p,f,y,S,L,$],B=function e(t){e.installed||(e.installed=!0,V.map(function(e){return t.component(e.name,e)}))};"undefined"!=typeof window&&window.Vue&&B(window.Vue);var P={};V.forEach(function(e){P[e.name]=e})},z3xQ:function(e,t,i){},zB7a:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("rGqo");var a=i("zF5t"),o=i("oC0i"),n=i("uvxH"),l=i("XBTa"),s=i("z0WU"),r=i("mSNy");function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.deleteWarehouse_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteWarehouse(scope.row,scope.$index)">删除</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},p={components:{dialogRoleUser:o.default},name:"dialog-add",props:["initData","visible"],data:function(){return{roleId:"",roleName:"",type:"",userData:[],userId:[],isSingle:!0,rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",temp:{},tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempQuery:{},tableData:[],selectList:null,tableIndex:null,initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:u}},configs:{tableConfigs:[],showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1,selectDataUser:{data:{selectUrl:"/system/role/findListUserByRole",selectParm:{queryStr:"role.id = '"+this.initData.temp.roleId+"'",userIsdisable:"1"}},defaultSelected:[]}}},created:function(){this.tableIndex=null,this.roleId=this.initData.temp.roleId,this.roleName=this.initData.temp.roleName,this.type=this.initData.temp.type,this.initUserData(),this.initTable()},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=d(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{userSelect:function(e,t){e[0]?(this.selectDataUser.defaultSelected=[e[0]],this.userId=[e[0]]):(this.selectDataUser.defaultSelected=[],this.userId=[])},checkCount:function(e,t){if(!e.moveCount)return this.$message({type:"warning",duration:5e3,showClose:!0,message:"输入的移库数量不能为空！"}),!1;if(!/^[0-9]+(.[0-9]{1,3})?$/.test(e.moveCount))return this.$message({type:"warning",duration:5e3,showClose:!0,message:"请输入正确移库数量！"}),e.moveCount=null,!1;var i=parseFloat(e.stockCount);return e.moveCount>i?(this.$message({type:"warning",duration:5e3,showClose:!0,message:"输入的移库数量不能大于库存数量！"}),e.moveCount=null,!1):void 0},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(s.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==r.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==r.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==r.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==r.a.locale&&(e.label=t.substring(0,t.indexOf("_"))))}),this.internationalConfig(),e},internationalConfig:function(){"en"==r.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==r.a.locale&&(this.initConfigs.tableOperates.label="操作")},initTable:function(){var e=this,t="",i=this.initData.temp;null!=i&&i.length>0&&i.forEach(function(e){null!=e.id&&e.id.trim().length>0&&(t=0==t.length?"'"+e.id.trim()+"'":t+",'"+e.id.trim()+"'")});var a="";null!=t&&t.trim().length>0&&(a="detail.id in ("+t+")"),this.dialogLoading=!0,Object(n.listPageWarehouseMoveDetails)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){c(e,t,i[t])})}return e}({},this.tempQuery,{queryStr:a,fieldCode:"productCode,productName,productSpec,productUnitName,pathName,code,stockCount,count,executeCount",pageNo:this.pageNo})).then(function(t){e.getListPage(t),e.dialogLoading=!1}).catch(function(t){e.dialogLoading=!1})},initUserData:function(){var e=this;this.userData=[],Object(a.findListUserByRole)({userIsdisable:"1",queryStr:"role.id = '"+this.roleId+"'"}).then(function(t){var i=t.result.options;null!=i&&i.length>0&&i.forEach(function(t){var i=t.id,a=t.userName;null!=i&&i.trim().length>0&&null!=a&&a.trim().length>0&&e.userData.push({key:i,label:a,disabled:!1})})}).catch(function(e){})},dataBridge:function(e){},dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},leftCheckChange:function(e){this.isSingle&&this.singleUserData(e)},singleUserData:function(e){var t=this.userData;if(null!=t&&0!=t.length)if(0==e.length)t.forEach(function(e){e.disabled=!1});else if(e.length>0){var i="";e.forEach(function(e){i=i+e+","}),t.forEach(function(e){var t=e.key;-1==i.indexOf(t)&&(e.disabled=!0)})}},addAdmin:function(){var e=this.roleId,t=this.roleName;this.dialogData.temp.roleId=e,this.dialogData.title=t+"-分配用户",this.openDialogName="dialogRoleUser",this.showDialog=!0,this.inLinVisible=!0},saveDispatch:function(){var e=this,t=this.roleId,i=this.roleName;this.type;if(null!=t&&0!=t){if(null==this.userData||0==this.userData.length)return this.dialogData.temp.roleId=t,this.dialogData.title=i+"-分配用户",this.openDialogName="dialogRoleUser",this.showDialog=!0,void(this.inLinVisible=!0);if(null!=this.userId&&0!=this.userId.length){var a,o=this.initData.temp;if(a=JSON.stringify(o),this.temp.dtlJsonStr=a,this.isSingle&&this.userId.length>1)this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择一位执行人，执行人只允许单选！"});else{for(var n="",s=0;s<this.userId.length;s++){var r=this.userId[s];null!=r&&r.trim().length>0&&(n=n?n+","+r:r)}this.temp.executorIdsStr=n,Object(l.saveWarehouseMoveDispatch)(this.temp).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请选择执行人！"})}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"仓库管理员角色ID为空或空字符串！"})},deleteWarehouse:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){"{}"!=JSON.stringify(e)&&"ok"==e.resState&&this.initUserData(),this.inLinVisible=!1,this.showDialog=!1}},watch:{pageNo:function(){this.initTable()}}},m=(i("lF30"),i("KHd+")),h=Object(m.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px",top:"50px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-row",{staticStyle:{width:"300px","margin-left":"2%","margin-top":"10px"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择执行人",disabled:!1,data:e.selectDataUser.data},on:{callback:e.userSelect},model:{value:e.selectDataUser.defaultSelected,callback:function(t){e.$set(e.selectDataUser,"defaultSelected",t)},expression:"selectDataUser.defaultSelected"}}),e._v(" "),i("span",{staticStyle:{"font-size":"12px",color:"#1482f0",cursor:"pointer"},on:{click:e.addAdmin}},[e._v("+添加仓库管理员")])],1),e._v(" "),i("el-row",{staticStyle:{width:"96%","margin-left":"2%","margin-top":"10px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveDispatch}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);h.options.__file="dialogDispatch.vue";t.default=h.exports},zDZ1:function(e,t,i){"use strict";i("rE2o"),i("ioFf"),i("f3/d"),i("9WTv");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={name:"dialog-add",props:["initData","visible"],components:{},data:function(){return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},tempShow:{},rules:{},imageUrl:""}},created:function(){this.initData.temp&&(this.temp=this.initData.temp,this.initData.temp.qrcode&&(this.imageUrl="/api/"+this.initData.temp.qrcode)),this.initData.tempLable&&(this.tempLable=this.initData.tempLable)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=a(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},download:function(){var e=this.imageUrl,t=document.createElement("a");t.style.display="none",t.href=e,t.setAttribute("download",this.temp.name),document.body.appendChild(t),t.click()},print:function(){var e='<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> ';e+="<style></style>",e+="</head><body >",e+=document.getElementById("printContent").innerHTML,e+="</body></html>";var t=window.open("","打印","");t.document.write(e),t.document.close(),t.focus(),t.print(),t.close()},dialogImgLoad:function(){this.$refs.myDialog&&this.$refs.myDialog.reDialogStyle&&this.$refs.myDialog.reDialogStyle(this.$store.getters.systemInfo,!0)}}},n=(i("lZYi"),i("KHd+")),l=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],ref:"myDialog",attrs:{title:e.initData.title?e.initData.title:"二维码",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("div",{attrs:{id:"printContent"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"400px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{staticStyle:{"text-align":"center","padding-bottom":"20px",transition:"height 0.4s","-webkit-transition":"height 0.4s","-moz-transition":"height 0.4s"},attrs:{span:24}},[e.imageUrl?i("img",{staticClass:"avatar",staticStyle:{margin:"0 auto"},attrs:{src:e.imageUrl},on:{load:e.dialogImgLoad}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("b",{staticStyle:{"padding-left":"35%"}},[e._v(e._s(e.tempLable.code)+":")]),e._v(e._s(e.temp.code)),i("br"),e._v(" "),i("b",{staticStyle:{"padding-left":"35%"}},[e._v(e._s(e.tempLable.name)+":")]),e._v(e._s(e.temp.name)+"\n\n          ")])],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center",padding:"15px 0 15px 0"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.download}},[e._v("下载")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.print}},[e._v("打印")])],1)])])},[],!1,null,null,null);l.options.__file="dialogQrcode.vue";t.a=l.exports},zE1x:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf");var a=i("+bMf");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={name:"dialog-edit",props:["initData","visible"],data:function(){return{retreatId:"",dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{remark:[{required:!0,message:"请填写退回原因！",trigger:"change"}]}}},created:function(){this.retreatId=this.initData.temp.id},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){e.dialogLoading=!0;var i=e.$storage.get("userInfo").userName;Object(a.auditDisagreeSaleRetreat)({parentId:e.retreatId,remark:e.temp.remark,userName:i}).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"退回成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(t){e.dialogLoading=!1})}})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"400px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{width:"90%",margin:"30px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"退回原因:",prop:"remark"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",rows:2},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogAuditDisagree.vue";t.default=s.exports},"zNZ+":function(e,t,i){"use strict";var a=i("zvlY");i.n(a).a},"zUD+":function(e,t,i){},zXQq:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg");var a=i("1FtD");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={components:{},name:"dialog-edit",props:["initData","visible"],data:function(){var e=this;return{dialogLoading:!0,isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{newStockCount:[{required:!0,trigger:"change",validator:function(t,i,a){null==i||0==i.trim().length?a(new Error("请填写变更单价！")):e.isNumberByValue(i+"")?0==i?a(new Error("请输入大于零的整数或小数！")):a():a(new Error("请输入大于零的整数或小数！"))}}]}}},created:function(){this.initData.temp&&(this.temp=this.initData.temp),this.initData.tempLable&&(this.tempLable=this.initData.tempLable),null!=this.initData.temp.stockCount&&(this.temp.oldStockCount=this.initData.temp.stockCount)},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]}},methods:{dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(e.trim())},save:function(){var e=this;this.$refs.submitForm.validate(function(t){t&&Object(a.updateWarehouseProduct)({id:e.temp.id,stockCount:e.temp.newStockCount}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})})}}},l=i("KHd+"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"编辑",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"620px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-top":"10px"}},[i("el-form",{ref:"submitForm",staticStyle:{width:"570px",margin:"10px auto"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.warehouseCode+":",prop:"warehouseCode"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.warehouseCode,callback:function(t){e.$set(e.temp,"warehouseCode",t)},expression:"temp.warehouseCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.pathName+":",prop:"pathName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.pathName,callback:function(t){e.$set(e.temp,"pathName",t)},expression:"temp.pathName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productCode+":",prop:"productCode"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productCode,callback:function(t){e.$set(e.temp,"productCode",t)},expression:"temp.productCode"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productName+":",prop:"productName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productName,callback:function(t){e.$set(e.temp,"productName",t)},expression:"temp.productName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productSpec+":",prop:"productSpec"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productSpec,callback:function(t){e.$set(e.temp,"productSpec",t)},expression:"temp.productSpec"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productGenreName+":",prop:"productGenreName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productGenreName,callback:function(t){e.$set(e.temp,"productGenreName",t)},expression:"temp.productGenreName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.productUnitName+":",prop:"productUnitName"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.productUnitName,callback:function(t){e.$set(e.temp,"productUnitName",t)},expression:"temp.productUnitName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"原库存数量:",prop:"oldStockCount"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.temp.oldStockCount,callback:function(t){e.$set(e.temp,"oldStockCount",e._n(t))},expression:"temp.oldStockCount"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.tempLable.stockCount+":",prop:"newStockCount"}},[i("el-input",{model:{value:e.temp.newStockCount,callback:function(t){e.$set(e.temp,"newStockCount",t)},expression:"temp.newStockCount"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)])},[],!1,null,null,null);s.options.__file="dialogEdit.vue";t.default=s.exports},zfQg:function(e,t,i){},zixQ:function(e,t,i){},zkVT:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("f3/d"),i("Oyvg"),i("rGqo");var a=i("0CID"),o=i("PFgW"),n=i("PuDp"),l=i("z0WU"),s=i("mSNy");function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n      \t\t\t\t\t<div slot-scope="scope" class="btnBox">\n      \t\t\t\t\t\t\t<el-button v-show="colConfig.deleteBtns_isShow" type="text" class="btns" style="font-size: 12px;" @click="colConfig.deleteBtns(scope.row,scope.$index)">删除</el-button>\n      \t\t\t\t\t</div>\n\n    \t\t\t\t</el-table-column>'},u={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.count" ></el-input>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},p={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.remark" ></el-input>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},m={components:{selectProduct:a.default},name:"dialog-add",props:["initData","visible"],data:function(){var e=this;return{rules:{typeName:[{required:!0,trigger:"change",validator:function(t,i,a){e.typeData.data.defaultSelected.length<=0?a(new Error("请选择出库类型")):a()}}],warehouseName:[{required:!0,trigger:"change",validator:function(t,i,a){e.warehouseData.data.defaultSelected.length<=0?a(new Error("请选择仓库")):a()}}],makeName:[{required:!0,message:"请选择制单人",trigger:"change"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",data:null,tempLable:null},dialogLoading:!1,isVisible:!1,inDialog:!0,temp:{type:"",typeName:"",warehouseId:"",warehouseName:"",deptId:"",deptName:"",makeId:"",makeName:"",dtlJsonStr:""},tempLable:{},tempQuery:{},tableData:[],selectList:null,initConfigs:{tableOperates:{prop:"operate",label:"操作",enLabel:"operation",isPropName:!0,component:d,deleteBtns:this.deleteBtns,deleteBtns_isShow:!0}},configs:{topBarBtnList:[{name:"选择货品",nameEn:"add",isShow:!0,icon:"add",method:this.addProduct}],tableConfigs:[],showCheckBox:!1,showIndex:!0},pageData:null,pageNo:1,typeData:{data:{selectUrl:"/system/dictionary/findListDictionaryByRoleMenu",selectParm:{isNeedName:"true",nameValue:"备件出库",dictionaryKey:"warehouseOutType",isglobal:"1"},isDefaultSelected:!0,defaultSelected:[]}},warehouseData:{data:{selectUrl:"/warehouse/warehouseBase/treeSelectWarehouse",selectParm:{isNeedEntityVirtual:"true",isNeedSpare:"true",orderStr:"a.serial_number asc"},isDefaultSelected:!0,defaultSelected:[]}},DeptDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择接收单位",tableUrl:"/base/departmentCustomer/listPageDepartmentCustomer",tableParm:{type:"1"},temp:{}},dialogName:"dialogOption"}},MakeDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){var e=this.$storage.get("userInfo");this.temp.makeId=e.userId,this.temp.makeName=e.userName,this.initTable("null")},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=c(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{initTable:function(e){var t=this;this.dialogLoading=!0,Object(n.listPageWarehouseOutDetails)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){r(e,t,i[t])})}return e}({},this.tempQuery,{fieldCode:"productCode,productName,productSpec,productGenreName,productUnitName,count,remark",parentId:e,pageNo:1,pageSize:1e4})).then(function(e){t.getListPage(e),t.dialogLoading=!1}).catch(function(e){t.dialogLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(l.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==s.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==s.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==s.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==s.a.locale&&(e.label=t.substring(0,t.indexOf("_")))),"count"===e.prop&&(e.component=u),"remark"===e.prop&&(e.component=p)}),this.internationalConfig(),e.push(this.initConfigs.tableOperates),e},internationalConfig:function(){"en"==s.a.locale?this.initConfigs.tableOperates.label="OPERATE":"zh"==s.a.locale&&(this.initConfigs.tableOperates.label="操作")},dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},addProduct:function(){var e="prod.id in (select DISTINCT product_id from vmes_warehouse_product where warehouse_id in (select id from vmes_warehouse where company_id = '"+this.$storage.get("userInfo").companyId+"' and name = '备件库' and layer = 2 ))";this.dialogData.queryStr=e,this.dialogData.data=this.tableData,this.dialogData.title="选择货品",this.openDialogName="selectProduct",this.showDialog=!0,this.inLinVisible=!0},checkColumn:function(e){for(var t="",i=0;i<e.length;i++){var a=e[i].count;if(null==a||0==a.trim().length)t=t+"第 "+(i+1)+" 行: 出库数量为空或空字符串！";else new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(a)||(t=t+"第 "+(i+1)+" 行: 出库数量("+a+")输入错误，请输入大于零的正整数或(1,2)位小数！")}return t},saveWarehouseOut:function(){var e=this,t="";if(null!=this.tableData&&0!=this.tableData.length){var i=this.checkColumn(this.tableData);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{for(var a=[],n=0;n<this.tableData.length;n++){var l=this.tableData[n],s={productId:l.productId,count:l.count,remark:l.remark,id:l.id};a.push(s)}t=JSON.stringify(a),this.temp.dtlJsonStr=t,this.temp.type=this.typeData.data.defaultSelected[0],this.temp.warehouseId=this.warehouseData.data.defaultSelected[0],this.$refs.submitForm.validate(function(t){t&&(e.dialogLoading=!0,Object(o.addWarehouseOutBySpare)(e.temp).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){}))})}}else this.$message({type:"warning",duration:5e3,showClose:!0,message:"请至少选择一样货品！"})},deleteBtns:function(e,t){this.tableData.splice(t,1)},typeSelect:function(e){e[0]?(this.temp.type=e[0],this.typeData.data.defaultSelected=[e[0]]):(this.temp.type=[],this.typeData.data.defaultSelected=[])},warehouseSelect:function(e){null!=e&&e.length>0&&(this.temp.warehouseId=e[e.length-1],this.temp.warehouseName=e[e.length-1],this.warehouseData.data.defaultSelected=[e[e.length-1]])},deptSelect:function(e){e[0]&&(this.temp.deptId=e[0].id,this.temp.deptName=e[0].name)},makeSelect:function(e){e[0]&&(this.temp.makeId=e[0].id,this.temp.makeName=e[0].name)},closeDialog:function(e){this.showDialog=!1;var t=!1;null!=e.isConfirm&&(t=e.isConfirm);var i=[];null!=e.selectList&&(i=e.selectList),this.tableSelected(t,i)},tableSelected:function(e,t){if(e&&null!=t&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],o={productId:"",productCode:"",productName:"",productSpec:"",productGenreName:"",productUnitName:"",count:"",remark:"",id:""};o.productId=a.id.trim(),null!=a.code&&a.code.trim().length>0&&(o.productCode=a.code.trim()),null!=a.name&&a.name.trim().length>0&&(o.productName=a.name.trim()),null!=a.spec&&a.spec.trim().length>0&&(o.productSpec=a.spec.trim()),null!=a.genreName&&a.genreName.trim().length>0&&(o.productGenreName=a.genreName.trim()),null!=a.unitName&&a.unitName.trim().length>0&&(o.productUnitName=a.unitName.trim()),this.tableData.push(o)}}},watch:{}},h=i("KHd+"),g=Object(h.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1000px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog,"table-selected":e.tableSelected}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"120px"}},[i("el-row",{staticStyle:{"margin-top":"10px"}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"出库类型:",prop:"typeName"}},[i("base-input-select",{attrs:{data:e.typeData.data},on:{callback:e.typeSelect},model:{value:e.typeData.data.defaultSelected,callback:function(t){e.$set(e.typeData.data,"defaultSelected",t)},expression:"typeData.data.defaultSelected"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"仓库:",prop:"warehouseName"}},[i("base-input-select",{staticStyle:{width:"200px"},attrs:{data:e.warehouseData.data},on:{callback:e.warehouseSelect},model:{value:e.warehouseData.data.defaultSelected,callback:function(t){e.$set(e.warehouseData.data,"defaultSelected",t)},expression:"warehouseData.data.defaultSelected"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"接收单位:",prop:"deptName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.DeptDialog.dialog},on:{callback:e.deptSelect},model:{value:e.temp.deptName,callback:function(t){e.$set(e.temp,"deptName",t)},expression:"temp.deptName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"制单人:",prop:"makeName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.MakeDialog.dialog},on:{callback:e.makeSelect},model:{value:e.temp.makeName,callback:function(t){e.$set(e.temp,"makeName",t)},expression:"temp.makeName"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-left":"2%","margin-bottom":"10px"}},[e._l(e.configs.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("el-row",{staticClass:"tableContent",staticStyle:{height:"300px",width:"96%","margin-left":"2%"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,pageData:e.pageData,currentpage:e.pageNo,isSortable:!0},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveWarehouseOut}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);g.options.__file="dialogAdd.vue";t.default=g.exports},zqqv:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rE2o"),i("ioFf"),i("Oyvg"),i("rGqo");var a=i("we3T"),o=i("2SRW"),n=i("z0WU"),l=i("mSNy");function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.count"/>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},d={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-input v-model="scope.row.remark" />\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},u={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{dtlIds:"",isVisible:!1,inDialog:!0,temp:{},tempLable:{},tempNotEditable:{},rules:{},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:"",temp:null,tempLable:null},BaseTableLoading:!1,tableData:[],selectList:[],configs:{tableConfigs:[],isSingle:!0,showCheckBox:!1,showIndex:!1},pageData:null,pageNo:1}},created:function(){this.dtlIds="",null!=this.initData.temp.dtlIds&&this.initData.temp.dtlIds.trim().length>0&&(this.dtlIds=this.initData.temp.dtlIds.trim()),this.initTable(!0)},mounted:function(){this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=r(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dialogOpen:function(){},dialogClose:function(e){this.$emit("close-dialog",e||{})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.tableData=e.result.varList,this.configs.topBarBtnList.forEach(function(e){"delete"==e.nameEn&&(e.state=!0)})}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var a=e[i];a.indexOf("_")>0&&("en"==l.a.locale?a=a.substring(a.indexOf("_")+1):"zh"==l.a.locale&&(a=a.substring(0,a.indexOf("_")))),t.tempLable[i]=a}})},addTableTitle:function(e){return e.forEach(function(e){var t=e.label;t.indexOf("_")>0&&("en"==l.a.locale?e.label=t.substring(t.indexOf("_")+1):"zh"==l.a.locale&&(e.label=t.substring(0,t.indexOf("_")))),"count"===e.prop&&(e.component=c),"remark"===e.prop&&(e.component=d)}),e},initTable:function(e){var t=this;e&&(this.BaseTableLoading=!0);var i="";null!=this.dtlIds&&this.dtlIds.trim().length>0&&(i="detail.id in ("+this.dtlIds+")"),Object(a.findListByWarehouseCheckExecutor)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){s(e,t,i[t])})}return e}({},this.tempQuery,{detailState:"1",queryStr:i,pageNo:this.pageNo})).then(function(i){t.getListPage(i),e&&(t.BaseTableLoading=!1)}).catch(function(e){t.BaseTableLoading=!1})},dataBridge:function(e){},checkColumnExecuteArray:function(e){var t="";if(null==e||0==e.length)return t="请填写盘点信息！";for(var i=0;i<e.length;i++){var a=e[i];if(null!=a.parentId&&0!=a.parentId.trim().length||(t=t+"第 "+(i+1)+" 行: (盘点单id)为空或空字符串;"),null!=a.detailId&&0!=a.detailId.trim().length||(t=t+"第 "+(i+1)+" 行: (明细id)为空或空字符串;"),null==a.count||0==a.count.trim().length)t=t+"第 "+(i+1)+" 行: (盘点数量)为空或空字符串，(盘点数量)为必填项不可为空;";else{var o=a.count.trim();new RegExp("^[0-9]+([.]{1}[0-9]{1,2})?$").test(o)||(t=t+"第 "+(i+1)+" 行: 盘点数量("+a.count.trim()+")输入错误，请输入大于零的正整数或(1,2)位小数！")}}return t},addExecute:function(){var e=this,t=this.tableData,i=this.checkColumnExecuteArray(t);if(null!=i&&i.trim().length>0)this.$message({type:"warning",duration:5e3,showClose:!0,message:i});else{var a=[];null!=t&&t.length>0&&t.forEach(function(e){var t={parentId:"",detailId:"",count:"",remark:""};t.parentId=e.parentId,t.detailId=e.detailId,t.count=e.count,null!=e.remark&&e.remark.trim().length>0&&(t.remark=e.remark.trim()),a.push(t)});var n=JSON.stringify(a);Object(o.addWarehouseCheckExecute)({addExecuteJsonStr:n}).then(function(t){0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}},closeDialog:function(e){this.showDialog=!1}}},p=i("KHd+"),m=Object(p.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"新增",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("el-row",{staticStyle:{padding:"10px"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.BaseTableLoading,expression:"BaseTableLoading"}]},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1)]),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addExecute}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,null,null);m.options.__file="dialogAddByExecute.vue";t.default=m.exports},zvlY:function(e,t,i){},zwJs:function(e,t,i){"use strict";i.r(t);i("yt8O"),i("RW0V"),i("rGqo");var a=i("mSNy"),o=i("t3Un"),n=i("z0WU");function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s={props:["colConfig"],template:'<el-table-column :label="colConfig.label" :sortable="colConfig.sortable" align="center">\n\t\t\t\t\t\t<div slot-scope="scope">\n    \t\t\t\t\t\t<el-switch active-value="1" inactive-value="0" v-model="scope.row.isdisable" @change="colConfig.changeState(scope.row,scope.$index)"></el-switch>\n    \t\t\t\t\t</div>\n    \t\t\t   </el-table-column>'},r={name:"dialog-option",props:["initData","visible"],data:function(){return{buttonName:"",dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,topBarBtnList:[{name:"查询",icon:"search",method:this.queryTable},{name:"重置",icon:"refresh",plain:!0,method:this.resetQueryTemp}],configs:{tableConfigs:[],showCheckBox:!1,showIndex:!1,isSingle:!1},tableData:[],selectList:[],queryParms:[{name:"pathName"}],tempQuery:{},tempLable:{},pageData:null,pageNo:1}},components:{},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.configs.isSingle=this.initData.isSingle,this.userInfo=this.$storage.get("userInfo"),this.initTable()},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",this.selectList,this.initData.temp,this.buttonName)},queryTable:function(){this.pageNo=1,this.initTable()},initTable:function(){var e=this;e.dialogTopLoading=!0,Object(o.a)({url:e.initData.tableUrl,method:"post",data:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){l(e,t,i[t])})}return e}({},e.initData.tableParm,e.tempQuery,{pageNo:e.pageNo})}).then(function(t){e.dialogTopLoading=!1,e.getListPage(t)}).catch(function(t){e.dialogTopLoading=!1})},getListPage:function(e){if(e){this.pageData=e.result.pageData,this.initTempData(e.result.titles);var t=Object(n.o)(e.result),i=this.addTableTitle(t);this.configs.tableConfigs=i,this.configs.showCheckBox=!0,this.configs.showIndex=!0,this.tableData=e.result.varList}},initTempData:function(e){var t=this;e.forEach(function(e){for(var i in e){var o=e[i];o.indexOf("_")>0&&("en"==a.a.locale?o=o.substring(o.indexOf("_")+1):"zh"==a.a.locale&&(o=o.substring(0,o.indexOf("_")))),t.tempLable[i]=o}})},addTableTitle:function(e){var t=this;return e.forEach(function(e){var i=e.label;i.indexOf("_")>0&&("en"==a.a.locale?e.label=i.substring(i.indexOf("_")+1):"zh"==a.a.locale&&(e.label=i.substring(0,i.indexOf("_")))),"是否启用"===e.label&&(e.component=s,e.changeState=t.changeState)}),e},dataBridge:function(e){this.selectList=e},resetQueryTemp:function(){for(var e in this.tempQuery)this.tempQuery[e]="";this.pageNo=1,this.initTable()},closeDialogPage:function(){this.isVisible=!1,this.buttonName="close"}},computed:{},watch:{pageNo:function(){this.initTable()}}},c=i("KHd+"),d=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"900px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[i("el-form",{staticClass:"form-inline",staticStyle:{width:"900px",margin:"10px auto"},attrs:{inline:!0,model:e.tempQuery,"label-width":"80px"}},[i("el-col",{staticStyle:{"max-width":"260px"},attrs:{span:6}}),e._v(" "),i("el-col",{staticStyle:{"max-width":"260px"},attrs:{span:6}},[i("el-form-item",{attrs:{label:e.tempLable.name}},[i("el-input",{attrs:{placeholder:e.tempLable.name},model:{value:e.tempQuery.pathName,callback:function(t){e.$set(e.tempQuery,"pathName",t)},expression:"tempQuery.pathName"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"90px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:e.topBarBtnList[0].name,icon:e.topBarBtnList[0].icon,plain:e.topBarBtnList[0].plain,state:e.topBarBtnList[0].state},on:{myclick:e.topBarBtnList[0].method}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"max-width":"95px"},attrs:{span:3}},[i("el-form-item",[i("base-button",{attrs:{name:e.topBarBtnList[1].name,icon:e.topBarBtnList[1].icon,plain:e.topBarBtnList[1].plain,state:e.topBarBtnList[1].state},on:{myclick:e.topBarBtnList[1].method}})],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{"box-sizing":"border-box",padding:"7px"}},[i("base-table",{attrs:{data:e.tableData,colConfigs:e.configs.tableConfigs,showCheckBox:e.configs.showCheckBox,showIndex:e.configs.showIndex,isSingle:e.configs.isSingle,pageData:e.pageData,currentpage:e.pageNo},on:{databridge:e.dataBridge,"update:currentpage":function(t){e.pageNo=t}}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{position:"relative",height:"60px","text-align":"center","box-sizing":"border-box",padding:"10px 0 0 0"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",disabled:!e.selectList.length},on:{click:function(t){e.isVisible=!1}}},[e._v("确认")]),e._v(" "),i("el-button",{on:{click:e.closeDialogPage}},[e._v("取消")])],1)])])},[],!1,null,null,null);d.options.__file="dialogOption.vue";t.default=d.exports},zwN5:function(e,t,i){"use strict";var a=i("IQoZ");i.n(a).a},"zzf/":function(e,t,i){"use strict";i.r(t);var a=i("2+ib"),o=i("ubz/"),n=(i("z0WU"),i("Ppn9"),{name:"dialog-option",props:["initData","visible"],data:function(){return{dialogTopLoading:!1,isVisible:!1,title:"",userInfo:null,isreplaceable:null,topBarBtnList:[],tempCount:{count:0},tableConfigList:[{customColumn:[{columnIndex:"planCount",componentName:"input",_cellConfig:{rules:[{required:!0},{greaterThan:["0",!1]},{lessThan:["self@assembledCount",!0]}],message:["该项不能为空！","该项输入必须大于零！","必须小于等于最大可生产数量！"]}}],apiObj:{apiName:"listPageProducePlanDetail",params:{ids:"'"+this.initData.id+"'",fieldCode:"productCode,productName,productSpec,unitName,count,setCount,planCount"}},temp:{},showIndex:!0,showHeader:!0,showCheckBox:!1,showTableSet:!1,showAll:!1,dragTable:!1,componentId:"oneLevelTable",expand:!1,expandMode:"none",showExpandBtn:!0,headerStyle:{"background-color":"#E4F3FA"},rowStyle:{"background-color":"#E4F3FA"}}],selectList:[],openDialogName:"",showDialog:!1,visibleState:!1,dialogData:{title:"",temp:null,tempLable:null}}},components:{multilevelTable:a.a,dialogAdd:o.default},beforeCreate:function(){},created:function(){this.title=this.initData.title,this.userInfo=this.$storage.get("userInfo")},beforeMount:function(){},mounted:function(){this.isVisible=this.visible},beforeUpdate:function(){},updated:function(){},methods:{dialogClose:function(){this.$emit("close-dialog",{resState:"ok"})},getData:function(){this.$refs.customBaseTable.getData()},pushData:function(e,t){this.$refs.customBaseTable.pushData(e,t)},updateData:function(e){this.selectList=[],this.$refs.customBaseTable.updateData(e)},deleteData:function(e){this.$refs.customBaseTable.deleteData(e)},callMethod:function(e){e&&e.methodName&&this[e.methodName](e.params)},delete:function(e,t){var i=this,a=this;a.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.deleteData(e)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},backStep:function(){this.$emit("close-dialog",{})},nextStep:function(){var e=this;(this.getData(),0!=this.selectList.length)&&(this.selectList[0].planCount>this.selectList[0].count-this.selectList[0].setCount?this.$confirm("本次领料数量>计划数量-已领料数量, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.dialogData.setCount=e.selectList[0].planCount,e.dialogData.businessCode=e.selectList[0].code,e.dialogData.temp=null,e.dialogData.tempLable=e.tempLable,e.dialogData.title="新增物料",e.openDialogName="dialogAdd",e.showDialog=!0,e.visibleState=!0}).catch(function(){e.$message({type:"info",message:"已取消"})}):(this.dialogData.setCount=this.selectList[0].planCount,this.dialogData.businessCode=this.selectList[0].code,this.dialogData.temp=null,this.dialogData.tempLable=this.tempLable,this.dialogData.title="新增物料",this.openDialogName="dialogAdd",this.showDialog=!0,this.visibleState=!0))},closeDialog:function(e){this.showDialog=!1,"ok"===e.resState&&(e.selectList?e.selectList.length>0&&this.pushData(e.selectList):this.dialogClose())},databridge:function(e){this.selectList=e}},computed:{dialogName:function(){return this.openDialogName}},watch:{}}),l=(i("DmEo"),i("LnPG"),i("KHd+")),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,visible:e.isVisible,"append-to-body":"",width:"1200px"},on:{"update:visible":function(t){e.isVisible=t},close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.visibleState},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogTopLoading,expression:"dialogTopLoading"}]},[i("div",{staticStyle:{height:"50px","box-sizing":"border-box",padding:"7px 20px 7px 7px"}},[e._l(e.topBarBtnList,function(e,t){return[i("base-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],attrs:{name:e.name,icon:e.icon,plain:e.plain,state:e.state},on:{myclick:e.method}})]})],2),e._v(" "),i("div",{staticStyle:{padding:"7px"}},[i("multilevel-table",{ref:"customBaseTable",attrs:{"data-custom-table-id":"views_produce_producePlan_dialogInputNotFromBom0",tableConfigList:e.tableConfigList},on:{callmethod:e.callMethod,databridge:e.databridge}})],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.backStep}},[e._v("上一步")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,null,null);s.options.__file="dialogInputNotFromBom.vue";t.default=s.exports}}]);