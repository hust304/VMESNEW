(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-22dd"],{"+IxY":function(t,e,o){},"0wyt":function(t,e,o){"use strict";var i=o("+IxY");o.n(i).a},"2TWG":function(t,e,o){"use strict";var i=o("91rS");o.n(i).a},"91rS":function(t,e,o){},GKgN:function(t,e,o){"use strict";o.r(e);o("dRSK"),o("f3/d"),o("rGqo"),o("INYr"),o("Z2Ku"),o("L9s1");var i=[{id:"aabbcc",title:"布局一",layout:[{x:0,y:0,w:24,h:4,i:"0",txt:"标题",componentName:"header",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:0,y:3,w:24,h:20,i:"1",txt:"正文",componentName:"main",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"}],name:""},{id:"abcsa",title:"布局二",layout:[{x:0,y:0,w:24,h:4,i:"0",txt:"标题",componentName:"header",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:0,y:3,w:24,h:16,i:"1",txt:"正文",componentName:"main",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:0,y:6,w:24,h:4,i:"2",txt:"题尾",componentName:"footer",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"}],name:""},{id:"aabsacc",title:"布局三",layout:[{x:0,y:0,w:6,h:24,i:"0",txt:"左侧栏",componentName:"leftAside",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:6,y:0,w:18,h:24,i:"1",txt:"右侧栏",componentName:"rightAside",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"}],name:""},{id:"aaabcc",title:"布局四",layout:[{x:0,y:0,w:24,h:4,i:"0",txt:"标题",componentName:"header",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:0,y:3,w:6,h:20,i:"1",txt:"左侧栏",componentName:"leftAside",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:6,y:3,w:18,h:20,i:"2",txt:"右侧栏",componentName:"rightAside",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"}],name:""},{id:"aabddc",title:"布局五",layout:[{x:0,y:0,w:24,h:4,i:"0",txt:"标题",componentName:"header",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:0,y:3,w:6,h:20,i:"1",txt:"左侧栏",componentName:"leftAside",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:6,y:3,w:18,h:16,i:"2",txt:"正文",componentName:"main",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:6,y:16,w:18,h:4,i:"3",txt:"题尾",componentName:"footer",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"}],name:""},{id:"adfbbcc",title:"布局六",layout:[{x:6,y:0,w:18,h:4,i:"0",txt:"标题",componentName:"header",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:0,y:0,w:6,h:24,i:"1",txt:"左侧栏",componentName:"leftAside",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:6,y:3,w:18,h:20,i:"2",txt:"正文",componentName:"main",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"}],name:""},{id:"afdscc",title:"布局七",layout:[{x:6,y:0,w:18,h:4,i:"0",txt:"标题",componentName:"header",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:0,y:0,w:6,h:24,i:"1",txt:"左侧栏",componentName:"leftAside",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:6,y:3,w:18,h:16,i:"2",txt:"正文",componentName:"main",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"},{x:6,y:16,w:18,h:4,i:"3",txt:"题尾",componentName:"footer",padding:10,backgroundColor:"",childBackgroundColor:"rgb(16,36,63)"}],name:""}],n=o("e+jF"),a={name:"default-layout",components:{GridLayout:n.GridLayout,GridItem:n.GridItem},props:{config:{type:Object,default:function(){return null}}},computed:{},created:function(){},methods:{dropDefaultLayout:function(t,e){t.dataTransfer.setData("layout",JSON.stringify(e))},setLayoutItemStyle:function(t,e){var o={};switch(t.componentName){case"header":o.backgroundColor="#b3c0d1";break;case"main":o.backgroundColor="#e9eef3";break;case"leftAside":o.backgroundColor="#d3dce6";break;case"rightAside":o.backgroundColor="#B3C0DF";break;case"footer":o.backgroundColor="#b3c0d1";break;default:o.backgroundColor="#b3c5d1"}return o}}},s=o("KHd+"),l=Object(s.a)(a,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{draggable:"true"},on:{dragstart:function(e){t.dropDefaultLayout(e,t.config)}}},[o("grid-layout",{attrs:{layout:t.config.layout,"col-num":24,"row-height":6,"is-draggable":!1,"is-resizable":!1,"is-mirrored":!1,"vertical-compact":!0,margin:[0,0],"use-css-transforms":!0},on:{"update:layout":function(e){t.$set(t.config,"layout",e)}}},t._l(t.config.layout,function(e,i){return o("grid-item",{key:e.i,staticStyle:{"text-align":"center"},style:t.setLayoutItemStyle(e,i),attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i}},[t._v("\n      "+t._s(e.txt)+"\n    ")])}),1)],1)},[],!1,null,null,null);l.options.__file="defaultLayout.vue";var r=l.exports,u=(o("yt8O"),o("RW0V"),o("91GP"),o("xfY5"),o("MngD")),c=o("z1Gy"),d=o("z0WU"),h=o("jq09");function p(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),i.forEach(function(e){m(t,e,o[e])})}return t}function m(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var g={name:"edit-plan",props:{scope:{type:Object,default:function(){return{}}},stepIndex:{type:Number,default:0},userSelectItem:{type:Object,default:function(){return null}}},components:p({editShape:u.a},c.a),data:function(){return{getCommonStyle:h.a.getCommonStyle,userSelectComponents:[],activeId:"",layoutBoxHeight:0,layoutBoxWidth:0}},computed:{setUserSelectItemState:function(){return this.userSelectItem&&this.userSelectItem.i==this.scope.i&&2!=this.stepIndex},userSelectView:function(){return{height:"100%",position:"relative","box-shadow":this.setUserSelectItemState?"0 0 12px 0 rgba(0,0,0,.8)":"none",padding:"".concat(this.scope.padding||0,"px")}},selectViewBoxStyle:function(){return{backgroundColor:this.scope.childBackgroundColor}},setUserSelectComponent:function(){var t=this;return this.userSelectComponents.filter(function(e){return e.uuid===t.activeId})}},methods:{sendUserSelect:function(t){this.$emit("user-select",this.scope),this.activeId="",t.stopPropagation(),t.preventDefault()},dropTools:function(t){if(this.activeId="",this.userSelectItem&&this.userSelectItem.i==this.scope.i){var e=JSON.parse(t.dataTransfer.getData("componentName"));e.uuid=Object(d.f)(),e.defaultStyle=this.initTargetElStyle(t,e),this.activeId=e.uuid,this.userSelectComponents.push(e)}},dropToolOver:function(){return!1},initTargetElStyle:function(t,e){var o={position:"absolute",width:e.defaultStyle.width,height:e.defaultStyle.height,top:t.offsetY-e.defaultStyle.height/2,left:t.offsetX-e.defaultStyle.width/2,rotate:0,paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:0,marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,borderWidth:0,borderColor:"",borderStyle:"solid",borderRadius:0,boxShadow:"",fontSize:16,fontWeight:500,lineHeight:1.4,letterSpacing:0,textAlign:"center",color:"#ffffff",backgroundColor:"",backgroundImage:"",backgroundSize:"cover",opacity:1,zIndex:this.userSelectComponents.length+1};return Object.assign({},o)},handleElementClick:function(t){this.activeId=t},handleElementResize:function(t){var e=this;this.activeId&&t&&this.userSelectComponents.forEach(function(o){o.uuid===e.activeId&&(o.defaultStyle=p({},t))})},valueBus:function(t){this.userSelectComponents.forEach(function(e){e.uuid===t.uuid&&(e=Object.assign(e,t))})},deleteUserSelectComponents:function(t){this.activeId&&this.activeId===t&&(this.userSelectComponents=this.userSelectComponents.filter(function(e){return e.uuid!==t}),this.activeId="")},resetActive:function(t){!t||"input"!==t.type&&"textarea"!==t.type||this.$el.querySelector("#".concat(t.uuid)).querySelector("input").blur(),this.activeId=""},resetSelectComponetns:function(){this.activeId="",this.userSelectComponents=[]},getSelectComponents:function(){this.activeId="",this.$emit("user-components",{layoutId:this.scope.i,components:this.userSelectComponents})},changeComponentColor:function(){var t=["input","textarea","date","time","datetime"];(this.userSelectComponents||[]).forEach(function(e){t.includes(e.type)&&("#ffffff"===e.defaultStyle.color?e.defaultStyle.color="#000000":"#000000"===e.defaultStyle.color&&(e.defaultStyle.color="#ffffff"))})}},watch:{setUserSelectItemState:function(){this.setUserSelectItemState||(this.activeId="")},setUserSelectComponent:function(){this.$emit("send-component",this.setUserSelectComponent)}},created:function(){},mounted:function(){this.layoutBoxHeight=this.$el.offsetHeight,this.layoutBoxWidth=this.$el.offsetWidth}},y=(o("2TWG"),Object(s.a)(g,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"editPlan"},[t.stepIndex?o("div",{style:t.userSelectView,on:{drop:function(e){t.dropTools(e)},dragover:t.dropToolOver}},[o("div",{staticStyle:{position:"relative",height:"100%"},style:t.stepIndex?t.selectViewBoxStyle:{},on:{click:function(e){t.sendUserSelect(e)}}},t._l(t.userSelectComponents,function(e){return o("edit-shape",{key:e.uuid,style:t.getCommonStyle(e.defaultStyle),attrs:{uuid:e.uuid,defaultStyle:e.defaultStyle,showOnly:2===t.stepIndex,active:t.setUserSelectItemState&&e.uuid===t.activeId,data:e},on:{handleElementClick:function(o){t.handleElementClick(e.uuid)},resize:t.handleElementResize,"reset-active":t.resetActive,"delete-active":t.deleteUserSelectComponents}},[o(e.elName,t._b({tag:"component",staticClass:"element-on-edit-pane",attrs:{id:e.uuid},on:{"value-bus":t.valueBus}},"component",{value:e.value,item:e,readonly:2===t.stepIndex},!1))],1)}),1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:(!t.userSelectItem||t.userSelectItem&&t.userSelectItem.i!=t.scope.i)&&2!=t.stepIndex,expression:"(!userSelectItem || (userSelectItem && userSelectItem.i != scope.i)) && stepIndex !=2"}],staticClass:"layoutCover",style:{"z-index":t.userSelectComponents.length+2},on:{click:function(e){t.sendUserSelect(e)}}})]):o("div",{domProps:{textContent:t._s(t.scope.txt)}})])},[],!1,null,"088bb66e",null));y.options.__file="editPlan.vue";var f=y.exports,v={name:"component-libs",props:{layoutItem:{type:Object,default:function(){return null}}},data:function(){return{componentsList:[{title:"基础组件",components:[{elName:"QkInput",type:"input",title:"文字",icon:"txt",value:"",defaultStyle:{height:40,width:150}},{elName:"QkImage",type:"image",title:"图片",icon:"img",value:"",defaultStyle:{height:60,width:150}},{elName:"QkTextarea",type:"textarea",title:"多行文本",icon:"textarea",value:"",defaultStyle:{height:60,width:150}},{elName:"QkDate",title:"日期",type:"date",icon:"date",value:"",defaultStyle:{height:20,width:150}},{elName:"QkTime",title:"时间",type:"time",icon:"time",value:"",defaultStyle:{height:20,width:150}},{elName:"QkDatetime",title:"日期时间",type:"datetime",icon:"datetime",value:"",defaultStyle:{height:20,width:250}}]},{title:"业务组件",components:[]}]}},methods:{dropTools:function(t,e){t.dataTransfer.setData("componentName",JSON.stringify(e))},stopClick:function(t){window.event?window.event.cancelBubble=!0:t.stopPropagation()}}},S=(o("IWb6"),Object(s.a)(v,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"components-libs-wrapper scrollbar-wrapper"},[o("p",{staticClass:"page-title text-center"},[t._v("组件库")]),t._v(" "),o("el-scrollbar",{staticStyle:{height:"100%"}},[o("ul",{staticClass:"scrollbar-wrapper"},t._l(t.componentsList,function(e,i){return o("li",{key:i,staticClass:"clearfix paddingB30"},[o("div",{staticClass:"components-libs-title"},[o("p",[t._v(t._s(e.title))])]),t._v(" "),e.components&&e.components.length?o("div",{staticClass:"clearfix"},t._l(e.components,function(e,i){return o("div",{key:i,staticClass:"components-lib-item",attrs:{draggable:"true"},on:{dragstart:function(o){t.dropTools(o,e)}}},[o("div",{staticClass:"lib-item-img"},[e.icon?o("svg-icon",{attrs:{"icon-class":"layout-"+e.icon,"class-name":"layoutSvgClass"}}):t._e()],1),t._v(" "),o("p",{staticClass:"lib-item-title"},[t._v(t._s(e.title))])])})):o("div",[o("p",{staticClass:"gray text-center paddingT20"},[t._v("待完善...")])])])}))]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.layoutItem,expression:"!layoutItem"}],staticClass:"layoutCover",on:{click:function(e){t.stopClick(e)}}},[t._m(0)])],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}},[e("div",{staticClass:"layoutCoverTxt"},[this._v("请先选择布局区域")])])}],!1,null,null,null));S.options.__file="index.vue";var C=S.exports,x=o("k7+O"),b=o.n(x);function w(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var k={name:"visualization-preview",props:{visualizationConfig:{type:Object,default:function(){return null}},showModel:{type:String,default:""}},components:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),i.forEach(function(e){w(t,e,o[e])})}return t}({GridLayout:n.GridLayout,GridItem:n.GridItem,editShape:u.a},c.a),data:function(){return{layoutBoxHeight:0,getCommonStyle:h.a.getCommonStyle,layoutBoxHeightTimer:"",opacityState:!0,viewMessageDisplay:!0,screenfullAddEventd:!1}},computed:{tempLayout:function(){return this.visualizationConfig?this.visualizationConfig.layout:[]},setRowHeight:function(){return console.log(this.layoutBoxHeight/24),this.layoutBoxHeight/24}},methods:{goHome:function(){this.$router.push({path:"/"})},setLayoutItemStyle:function(t){return{backgroundColor:t.backgroundColor}},viewResize:function(){console.log("viewResize")},screenfullClick:function(){if(!b.a.enabled)return this.$message({message:"当前浏览器不支持此功能",type:"warning"}),!1;this.screenfullAddEventd||(this.screenfullAddEventd=!0,b.a.onchange(this.resetClientHeight)),b.a.toggle()},resetClientHeight:function(){var t=this;clearInterval(this.layoutBoxHeightTimer),this.layoutBoxHeightTimer=setTimeout(function(e){t.layoutBoxHeight=t.$el.clientHeight,console.log(b.a.isFullscreen)})}},mounted:function(){var t=this;this.layoutBoxHeight=this.$el.clientHeight,this.$nextTick(function(e){t.opacityState=!1})},beforeDestroy:function(){clearInterval(this.layoutBoxHeightTimer),b.a.off("change",this.resetClientHeight)}},L=(o("iasO"),Object(s.a)(k,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"visualizationPreview",on:{resize:t.viewResize}},[t.visualizationConfig?o("div",{staticClass:"visualizationPreviewView"},[o("grid-layout",{attrs:{layout:t.tempLayout,"col-num":24,"row-height":t.setRowHeight,"max-rows":24,"vertical-compact":!0,margin:[0,0],"use-css-transforms":!0},on:{"update:layout":function(e){t.tempLayout=e}}},t._l(t.tempLayout,function(e){return o("grid-item",{key:e.i,style:t.setLayoutItemStyle(e),attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i,"is-resizable":!1,"is-draggable":!1}},[o("div",{staticStyle:{position:"relative",height:"100%"},style:{padding:(e.padding||0)+"px"}},[o("div",{staticStyle:{position:"relative",height:"100%"},style:{backgroundColor:e.childBackgroundColor}},t._l(e.userComponents||[],function(e){return o("edit-shape",{key:e.uuid,style:t.getCommonStyle(e.defaultStyle),attrs:{uuid:e.uuid,showOnly:!0,defaultStyle:e.defaultStyle,active:!1,data:e}},[o(e.elName,t._b({tag:"component",staticClass:"element-on-edit-pane",attrs:{id:e.uuid}},"component",{value:e.value,item:e,readonly:!0},!1))],1)}),1)])])}),1),t._v(" "),t.viewMessageDisplay?[o("div",{staticClass:"viewMessage",style:{opacity:t.opacityState?1:0},on:{transitionend:function(e){t.viewMessageDisplay=!t.viewMessageDisplay}}},[t._v("\n        按esc可退出看板模式\n      ")])]:[o("div",{staticClass:"screenfullBtn"},[o("svg",{staticClass:"screenfull-svg",attrs:{t:"1508738709248",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2069","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"32",height:"32"},on:{click:t.screenfullClick}},[o("path",{attrs:{d:"M333.493443 428.647617 428.322206 333.832158 262.572184 168.045297 366.707916 64.444754 64.09683 64.444754 63.853283 366.570793 167.283957 262.460644Z","p-id":"2070"}}),t._v(" "),o("path",{attrs:{d:"M854.845439 760.133334 688.61037 593.95864 593.805144 688.764889 759.554142 854.56096 655.44604 958.161503 958.055079 958.161503 958.274066 656.035464Z","p-id":"2071"}}),t._v(" "),o("path",{attrs:{d:"M688.535669 428.550403 854.31025 262.801405 957.935352 366.921787 957.935352 64.34754 655.809313 64.081481 759.919463 167.535691 593.70793 333.731874Z","p-id":"2072"}}),t._v(" "),o("path",{attrs:{d:"M333.590658 594.033341 167.8171 759.804852 64.218604 655.67219 64.218604 958.270996 366.342596 958.502263 262.234493 855.071589 428.421466 688.86108Z","p-id":"2073"}})])])]],2):o("div",{staticStyle:{height:"100%","text-align":"center","padding-top":"200px","font-size":"30px"}},[o("div",[t._v("没有可用的配置")]),t._v(" "),o("div",[o("el-button",{on:{click:t.goHome}},[t._v("返回首页")])],1)])])},[],!1,null,"f4260c7e",null));L.options.__file="index.vue";var I=L.exports,_={name:"visualization-root",components:{GridLayout:n.GridLayout,GridItem:n.GridItem,defaultLayout:r,editPlan:f,functionComponent:C,visualizationTemplate:I},data:function(){return{userInfo:{},activeNames:"1",headerHeight:0,rootHeight:0,customLayout:[],defaultLayoutList:[],userSelectLayout:null,titleList:["第一步：定义基本布局","第二步：设置功能组件","第三步：预览看板效果"],stepIndex:0,screen:null,layoutBoxScale:1,layoutBoxHeight:0,layoutRegister:null,layoutChanged:null,userSelectLayoutItem:null,menuOptions:[{title:"删除",icon:"delete",scene:["input","textarea","date","time","datetime","image","business"]},{title:"字体放大",icon:"txtup",scene:["input","textarea","date","time","datetime"]},{title:"字体缩小",icon:"txtdown",scene:["input","textarea","date","time","datetime"]},{title:"字体加粗",icon:"txtbold",scene:["input","textarea","date","time","datetime"]},{title:"字体颜色",icon:"txtcolor",scene:["input","textarea","date","time","datetime"],isColor:!0,value:""},{title:"背景色",icon:"bgcolor",scene:["root","business"],isColor:!0,value:""},{title:"上传图片",icon:"upload",isUpload:!0,scene:["image"]},{title:"图层上移",icon:"layerup",scene:["input","textarea","date","time","datetime","image"]},{title:"图层下移",icon:"layerdown",scene:["input","textarea","date","time","datetime","image"]},{title:"块边距",icon:"padding",isStep:!0,scene:["root","business"]},{title:"左右居中",icon:"level",scene:["input","textarea","date","time","datetime"]},{title:"垂直居中",icon:"vertical",scene:[]}],layoutBGcolor:null,userTargetComponent:null,themeColor:!0,themeColorList:["rgb(255,255,255)","rgb(10, 24, 40)"],isSaved:!1,dialogVisible:!1,previewLayoutTimer:"",saveLayoutTimer:"",needPreview:!1,needSave:!1}},computed:{tempLayout:function(){return this.userSelectLayout&&this.userSelectLayout.layout||[]},screenScale:function(){return this.screen?this.screen.width/this.screen.height:1},layoutViewHeight:function(){return.8*this.layoutBoxHeight},layoutViewWidth:function(){return this.layoutViewHeight*this.screenScale},setRowHeight:function(){return this.layoutViewHeight/24},tempLayoutState:function(){return!1},setMenuOptions:function(){var t=this;return this.menuOptions.filter(function(e){return e.scene.includes(t.userTargetComponent?t.userTargetComponent.type:t.userSelectLayoutItem?"root":"")})},userSelectLayoutIndex:function(){var t=this;return this.userSelectLayoutItem?this.tempLayout.findIndex(function(e){return e.i===t.userSelectLayoutItem.i}):-1},setDefaultStep:{get:function(){return this.userTargetComponent?this.userTargetComponent.defaultStyle.paddingTop||0:this.userSelectLayoutItem&&this.userSelectLayoutItem.padding||0},set:function(t){this.userTargetComponent?(this.userTargetComponent.defaultStyle.paddingTop=t,this.userTargetComponent.defaultStyle.paddingLeft=t,this.userTargetComponent.defaultStyle.paddingRight=t,this.userTargetComponent.defaultStyle.paddingBottom=t):this.userSelectLayoutItem&&(this.userSelectLayoutItem.padding=t)}},setDefaultColor:{get:function(){return this.userTargetComponent?this.userTargetComponent.defaultStyle.color||"":this.userSelectLayoutItem&&this.userSelectLayoutItem.childBackgroundColor||""},set:function(t){this.userTargetComponent?this.userTargetComponent.defaultStyle.color=t:this.userSelectLayoutItem&&(this.userSelectLayoutItem.childBackgroundColor=t)}},setThemeColor:function(){return this.themeColor?this.themeColorList[1]:this.themeColorList[0]}},created:function(){this.screen=window.screen,this.userInfo=this.$storage.get("userInfo"),this.httpRequests()},mounted:function(){var t=this,e=this.$el.querySelectorAll(".el-collapse-item__header"),o=this.$el.querySelector("#layoutBox");this.rootHeight=this.$el.querySelector("#visualizationPlanHeight").clientHeight,[].forEach.call(e,function(e){t.headerHeight+=e.clientHeight}),this.layoutBoxScale=o.clientWidth/o.clientHeight,this.screenScale,this.layoutBoxScale,this.layoutBoxHeight=o.clientHeight,this.layoutBoxWidth=o.clientWidth,console.log(this.layoutViewWidth,this.layoutBoxHeight)},beforeDestroy:function(){this.isSaved||this.$storage.set("visualizationConfig",this.userSelectLayout)},methods:{httpRequests:function(){var t=this;"0"===this.userInfo.userId&&setTimeout(function(e){t.defaultLayoutList=i;var o=i.map(function(t){return{layout:t.layout,name:t.name}});console.log(o),console.log(JSON.stringify(o))},1e3)},movedEvent:function(t,e,o){console.log("MOVED i="+t+", X="+e+", Y="+o)},dropLayout:function(t){this.stepIndex||(this.layoutRegister=this.layoutChanged=t.dataTransfer.getData("layout"),this.userSelectLayout=JSON.parse(this.layoutRegister)||null)},dropLayoutOver:function(){},nextStep:function(){this.tempLayout.length?this.stepIndex++:this.$message.error("请先选择布局")},upStep:function(){var t=this;1===this.stepIndex?this.$confirm("退回上一步将清除本次的所有设置，请确认！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.resetLayoutSet(),t.stepIndex--}):(2===this.stepIndex&&(this.themeColor=!0),this.stepIndex--)},clearTempLayout:function(){this.userSelectLayout=null},resetTempLayout:function(){this.userSelectLayout=JSON.parse(this.layoutRegister)||null},setLayoutItemStyle:function(t,e){switch(t.componentName){case"header":t.backgroundColor=e?this.setThemeColor:"#b3c0d1";break;case"main":t.backgroundColor=e?this.setThemeColor:"#e9eef3";break;case"leftAside":t.backgroundColor=e?this.setThemeColor:"#d3dce6";break;case"rightAside":t.backgroundColor=e?this.setThemeColor:"#B3C0DF";break;case"footer":t.backgroundColor=e?this.setThemeColor:"#b3c0d1";break;default:t.backgroundColor=e?this.setThemeColor:"#b3c5d1"}return{backgroundColor:t.backgroundColor}},resizedEvent:function(t,e){var o=(JSON.parse(this.layoutChanged).layout||[]).find(function(t){return t.i===e.i});if(e.w!=o.w&&this.userSelectLayout.layout.forEach(function(t){t.i!==e.i&&t.x===o.w&&(t.x=e.w)}),e.h>o.h){var i=this.numToList(24);this.userSelectLayout.layout.forEach(function(t){if(t.i!==e.i&&(t.x===e.x||t.x<e.x&&t.x+t.w>e.x||t.x-e.x>0&&t.x-e.x<e.w))for(var o=0;o<t.h;o++)i.splice(t.y+o,1,null)}),i.length>24&&(this.userSelectLayout.layout.forEach(function(t){t.i===e.i&&(t.h-=i.length-24)}),this.userSelectLayout=JSON.parse(JSON.stringify(this.userSelectLayout)))}this.layoutChanged=JSON.stringify(this.userSelectLayout)},numToList:function(t){for(var e=[],o=0;o<t;o++)e.push(o);return e},resetLayoutStore:function(){this.userSelectLayout=null,this.layoutRegister=null,this.layoutChanged=null},resetLayoutSet:function(){this.userSelectLayoutItem=null,(this.$refs.editPlan||[]).forEach(function(t){t.resetSelectComponetns&&t.resetSelectComponetns()})},userSelectLayoutItemHandler:function(t){this.userSelectLayoutItem=t},handleElementCommand:function(t){switch(t.icon){case"delete":this.$refs.editPlan[this.userSelectLayoutIndex].deleteUserSelectComponents(this.userTargetComponent.uuid);break;case"txtup":this.userTargetComponent.defaultStyle.fontSize+=1;break;case"txtdown":this.userTargetComponent.defaultStyle.fontSize>12&&(this.userTargetComponent.defaultStyle.fontSize-=1);break;case"txtbold":this.userTargetComponent.defaultStyle.fontWeight>=900?this.userTargetComponent.defaultStyle.fontWeight=300:this.userTargetComponent.defaultStyle.fontWeight+=100;break;case"txtcolor":case"bgcolor":case"upload":break;case"layerup":this.userTargetComponent.defaultStyle.zIndex+=1;break;case"layerdown":this.userTargetComponent.defaultStyle.zIndex-=1;break;case"padding":break;case"level":this.userTargetComponent.defaultStyle.textAlign="center"===this.userTargetComponent.defaultStyle.textAlign?"left":"center"}},changeColor:function(t){this.userTargetComponent?this.userTargetComponent.defaultStyle.color=t:this.userSelectLayoutItem&&(this.userSelectLayoutItem.childBackgroundColor=t)},userSelectComponent:function(t){this.userTargetComponent=t[0]||null},userComponents:function(t){var e=this;this.userSelectLayout.layout.find(function(e){if(e.i===t.layoutId)return e.userComponents=JSON.parse(JSON.stringify(t.components)),!0}),this.needPreview&&(clearTimeout(this.previewLayoutTimer),this.previewLayoutTimer=setTimeout(function(t){e.needPreview=!1,e.dialogVisible=!0})),this.needSave&&(clearTimeout(this.saveLayoutTimer),this.saveLayoutTimer=setTimeout(function(t){e.needSave=!1,e.httpSaveLayout()}))},previewLayout:function(){this.needPreview=!0,this.needSave=!1,(this.$refs.editPlan||[]).forEach(function(t){t.getSelectComponents&&t.getSelectComponents()})},saveLayout:function(){this.needSave=!0,this.needPreview=!1,(this.$refs.editPlan||[]).forEach(function(t){t.getSelectComponents&&t.getSelectComponents()})},httpSaveLayout:function(){console.log(this.userSelectLayout,this.layoutViewHeight,this.layoutViewWidth),console.log(JSON.stringify(this.userSelectLayout.layout))},stepHandleChange:function(t,e){this.userTargetComponent?(this.userTargetComponent.defaultStyle.paddingTop=t,this.userTargetComponent.defaultStyle.paddingLeft=t,this.userTargetComponent.defaultStyle.paddingRight=t,this.userTargetComponent.defaultStyle.paddingBottom=t):this.userSelectLayoutItem&&(console.log(this.userSelectLayoutItem),this.userSelectLayoutItem.padding=t)},stopStepClick:function(t){t.stopPropagation(),t.preventDefault()},dialogOpened:function(){}},watch:{activeNames:function(){this.resetLayoutStore()},setThemeColor:function(){(this.$refs.editPlan||[]).forEach(function(t){t.changeComponentColor&&t.changeComponentColor()})}}},T=(o("0wyt"),Object(s.a)(_,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"visualization"},[o("el-row",{staticStyle:{height:"100%"}},[o("el-col",{staticStyle:{height:"100%"},attrs:{span:18}},["1"===t.activeNames?o("div",{staticStyle:{height:"100%"},on:{drop:function(e){return e.preventDefault(),t.dropLayout(e)},dragover:function(e){return e.preventDefault(),t.dropLayoutOver(e)}}},[o("div",{staticClass:"customLayoutHeader"},[o("div",{staticClass:"headerView leftArrow"},[o("base-button",{attrs:{icon:"arrowright",name:"上一步",type:"primary",plain:"",state:!t.stepIndex},on:{myclick:t.upStep}})],1),t._v(" "),o("div",{staticClass:"headerView headerTxt"},[o("div",{staticClass:"clearfix titleBox",style:{left:"-"+100*t.stepIndex+"%"}},[t._l(t.titleList,function(e,i){return[o("div",{key:i,staticClass:"titleView",style:{opacity:i===t.stepIndex?"1":"0",width:100/t.titleList.length+"%"},domProps:{textContent:t._s(e)}})]})],2)]),t._v(" "),o("div",{staticClass:"headerView rightArrow"},[o("base-button",{directives:[{name:"show",rawName:"v-show",value:2!=t.stepIndex,expression:"stepIndex!=2"}],attrs:{icon:"arrowleft",name:"下一步",iconRight:!0,type:"primary",plain:""},on:{myclick:t.nextStep}}),t._v(" "),o("base-button",{directives:[{name:"show",rawName:"v-show",value:2==t.stepIndex,expression:"stepIndex==2"}],attrs:{icon:"",name:"保存",type:"primary",plain:""},on:{myclick:t.saveLayout}})],1)]),t._v(" "),o("div",{attrs:{id:"layoutBox"}},[o("div",{style:{width:t.layoutViewWidth+"px",height:t.layoutViewHeight+"px"},attrs:{id:"layoutView"}},[t.tempLayout.length?[o("grid-layout",{attrs:{layout:t.tempLayout,"col-num":24,"row-height":t.setRowHeight,"max-rows":24,"vertical-compact":!0,margin:[0,0],"use-css-transforms":!0},on:{"update:layout":function(e){t.tempLayout=e}}},t._l(t.tempLayout,function(e){return o("grid-item",{key:e.i,staticStyle:{"text-align":"center","line-height":"200%"},style:t.setLayoutItemStyle(e,t.stepIndex),attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i,"is-resizable":!t.stepIndex,"is-draggable":!1},on:{resized:function(o){t.resizedEvent(arguments,e)}}},[o("edit-plan",{ref:"editPlan",refInFor:!0,attrs:{stepIndex:t.stepIndex,scope:e,"user-select-item":t.userSelectLayoutItem},on:{"user-select":t.userSelectLayoutItemHandler,"send-component":t.userSelectComponent,"user-components":t.userComponents}})],1)}),1)]:[o("div",{staticStyle:{height:"100%","text-align":"center","font-size":"20px","font-weight":"bold"},style:{"line-height":t.layoutViewHeight+"px"}},[t._v("\n                请将右侧内置布局中的布局方式拖动到此处\n              ")])]],2),t._v(" "),o("div",{style:{width:t.layoutViewWidth+"px",height:.18*t.layoutBoxHeight+"px"},attrs:{id:"layoutViewBtns"}},[o("div",{attrs:{id:"layoutViewBtnsStyle"}},[t.stepIndex?1==t.stepIndex?[o("div",{staticClass:"page-wrapper-menu-operation clearfix"},t._l(t.setMenuOptions,function(e,i){return o("el-tooltip",{key:i,attrs:{effect:e.isColor||e.isUpload||e.isStep?"light":"dark",placement:"top"}},[e.isUpload?o("div",{attrs:{slot:"content"},slot:"content"},[o("div",{domProps:{textContent:t._s(e.title)}}),t._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:1,"file-list":[]}},[o("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("点击上传")])],1)],1):e.isStep?o("div",{staticStyle:{"text-align":"center"},attrs:{slot:"content"},slot:"content"},[o("div",{domProps:{textContent:t._s(e.title)}}),t._v(" "),o("div",{staticStyle:{display:"inline-block"},on:{click:function(e){t.stopStepClick(e)}}},[o("el-input-number",{attrs:{size:"mini",step:2,"step-strictly":"",min:0,max:50,label:"块边距"},on:{change:t.stepHandleChange},model:{value:t.setDefaultStep,callback:function(e){t.setDefaultStep=e},expression:"setDefaultStep"}})],1)]):e.isColor?o("div",{staticStyle:{"text-align":"center"},attrs:{slot:"content"},slot:"content"},[o("div",{domProps:{textContent:t._s(e.title)}}),t._v(" "),o("el-color-picker",{attrs:{"show-alpha":"",size:"mini"},on:{change:t.changeColor},model:{value:t.setDefaultColor,callback:function(e){t.setDefaultColor=e},expression:"setDefaultColor"}})],1):o("div",{attrs:{slot:"content"},domProps:{textContent:t._s(e.title)},slot:"content"}),t._v(" "),o("div",{staticClass:"menu-item menu-item-on-edit-panel",style:{padding:e.icon?"8px 12px":"2px 2px 0 2px"},on:{click:function(o){t.handleElementCommand(e)}}},[o("svg-icon",{attrs:{"icon-class":"layout-"+e.icon}})],1)])}),1),t._v(" "),o("div",[o("div",{staticStyle:{display:"inline-block"}},[o("span",{staticStyle:{display:"inline-block","vertical-align":"middle"}},[t._v("主题：")]),t._v(" "),o("el-switch",{class:{resetSwitchStyle:!t.themeColor},staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{"active-color":t.themeColorList[1],"inactive-color":t.themeColorList[0],"active-text":"黑","inactive-text":"白"},model:{value:t.themeColor,callback:function(e){t.themeColor=e},expression:"themeColor"}})],1),t._v(" "),o("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-refresh",disabled:!t.userSelectLayoutItem},on:{click:t.resetLayoutSet}},[t._v("清除所有设置\n                  ")])],1)]:[o("div"),t._v(" "),o("div",[o("div",{staticStyle:{display:"inline-block"}},[o("span",{staticStyle:{display:"inline-block","vertical-align":"middle"}},[t._v("主题：")]),t._v(" "),o("el-switch",{class:{resetSwitchStyle:!t.themeColor},staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{"active-color":t.themeColorList[1],"inactive-color":t.themeColorList[0],"active-text":"黑","inactive-text":"白"},model:{value:t.themeColor,callback:function(e){t.themeColor=e},expression:"themeColor"}})],1),t._v(" "),o("el-button",{attrs:{plain:"",type:"primary"},on:{click:t.previewLayout}},[t._v("预 览\n                  ")])],1)]:[o("div",{staticStyle:{"font-size":"18px",padding:"10px 0"}},[o("span",[t._v("当前布局：")]),t._v(" "),o("span",{staticStyle:{color:"#74bcff","font-weight":"600"},domProps:{textContent:t._s(t.userSelectLayout&&t.userSelectLayout.title||"未选择")}})]),t._v(" "),o("div",[o("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-refresh",disabled:!t.tempLayout.length||t.tempLayoutState},on:{click:t.resetTempLayout}},[t._v("还原布局\n                  ")]),t._v(" "),o("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-delete",disabled:!t.tempLayout.length},on:{click:t.clearTempLayout}},[t._v("清空布局\n                  ")])],1)]],2)])])]):o("div",{staticStyle:{height:"100%"}},[t._v("自定义布局")])]),t._v(" "),o("el-col",{attrs:{span:6,id:"visualizationPlanHeight"}},[o("div",{staticClass:"layoutPlan",style:{left:0===t.stepIndex?0:"120%","z-index":0===t.stepIndex?20:10}},[o("el-collapse",{staticStyle:{height:"100%"},attrs:{accordion:""},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[o("el-collapse-item",{style:{backgroundColor:"1"===t.activeNames?"rgb(232,244,255)":"#fff"},attrs:{title:"内置布局",name:"1"}},[o("div",{staticClass:"defaultLayoutView",style:{height:t.rootHeight-t.headerHeight+"px"}},[t._l(t.defaultLayoutList,function(e,i){return[o("el-card",{key:i,staticClass:"layoutItemView"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("div",{staticStyle:{"text-align":"center"},domProps:{textContent:t._s(e.title)}})]),t._v(" "),o("default-layout",{attrs:{config:e}})],1)]})],2)]),t._v(" "),o("el-collapse-item",{style:{backgroundColor:"2"===t.activeNames?"rgb(232,244,255)":"#fff"},attrs:{title:"编辑布局",name:"2"}},[o("div",{style:{height:t.rootHeight-t.headerHeight+"px"}})])],1)],1),t._v(" "),o("div",{staticClass:"layoutPlan",style:{left:1===t.stepIndex?0:"120%","z-index":1===t.stepIndex?20:10}},[o("function-component",{attrs:{layoutItem:t.userSelectLayoutItem}})],1)])],1),t._v(" "),o("el-dialog",{attrs:{visible:t.dialogVisible,fullscreen:""},on:{"update:visible":function(e){t.dialogVisible=e},opened:t.dialogOpened}},[o("visualization-template",{attrs:{visualizationConfig:t.userSelectLayout}})],1)],1)},[],!1,null,null,null));T.options.__file="index.vue";var B={name:"custom-kanban",components:{visualization:T.exports}},N=(o("Mcpu"),Object(s.a)(B,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"customKanban"},[e("visualization")],1)},[],!1,null,"a1aad90c",null));N.options.__file="index.vue";e.default=N.exports},GVWE:function(t,e,o){},IWb6:function(t,e,o){"use strict";var i=o("V5zP");o.n(i).a},Mcpu:function(t,e,o){"use strict";var i=o("ZUY2");o.n(i).a},V5zP:function(t,e,o){},ZUY2:function(t,e,o){},iasO:function(t,e,o){"use strict";var i=o("GVWE");o.n(i).a}}]);