(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-27f3"],{HMTl:function(e,t,i){},KuY0:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("rGqo"),i("yt8O"),i("RW0V"),i("Z2Ku"),i("L9s1");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={name:"authority-tree-component",props:{config:{type:Object,default:function(){return{}}}},computed:{},data:function(){return{componentNameList:["radio","switch"],treeData:[],handleNodeClickTimer:""}},created:function(){this.httpRequest()},watch:{"config.apiObj.params":function(){this.httpRequest()}},methods:{httpRequest:function(){var e=this;this.config.apiObj&&this.config.apiObj.apiName&&this.$api[this.config.apiObj.apiName](this.config.apiObj.params).then(function(t){if(console.log(t),t.result)if("string"==typeof t.result){var i=JSON.parse(t.result);i&&(Array.isArray(i)&&(e.treeData=e.formatFn(0,i)),"object"===n(i)&&Object.keys(i).includes("treeList")&&(e.treeData=Array.isArray(i.treeList)?e.formatFn(0,i.treeList):e.formatFn(0,[i.treeList])))}else Array.isArray(t.result)?e.treeData=e.formatFn(0,t.result):Array.isArray(t.result)||"object"!==n(t.result)?e.treeData=[]:Object.keys(t.result).includes("treeList")&&(e.treeData=Array.isArray(t.result.treeList)?e.formatFn(0,t.result.treeList):e.formatFn(0,[t.result.treeList]));else e.treeData=[]}).catch(function(e){console.log(e)})},radioChange:function(e){},formatFn:function(e,t){var i=this;return t.map(function(t){return t._layer=e,"0"===i.$storage.get("userInfo").userId&&(!Object.keys(t).includes("bindValue")&&(t.bindValue="1")),t.children&&t.children.length&&i.formatFn(t._layer+1,t.children),t})},handleNodeClick:function(e,t,i){var n=this;this.config.throwTreeNode&&(clearTimeout(this.handleNodeClickTimer),this.handleNodeClickTimer=setTimeout(function(t){n.$emit("treedatabridge",e)},10))},getTreeData:function(){this.$emit("treedatabridge",this.treeData)}}},o=(i("coFF"),i("KHd+")),a=Object(o.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"authority-tree-component"},[i("el-tree",{style:{width:e.config.width||"100%",background:e.config.treeWidth?"linear-gradient(to right, "+e.config.treeBackgroundColor+" "+e.config.treeWidth+"px, #ffffff "+e.config.treeWidth+"px)":"inherit"},attrs:{data:e.treeData,"show-checkbox":e.config["show-checkbox"]||!1,"node-key":"id","default-expand-all":e.config["default-expand-all"]||!1,"highlight-current":e.config["highlight-current"]||!1,accordion:e.config.accordion||!1,"expand-on-click-node":!1,props:e.config.props||{label:"name"}},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return i("span",{staticClass:"custom-tree-node"},[i("span",[e._v(e._s(n.label))]),e._v(" "),e.config.componentList[r._layer]&&e.config.componentList[r._layer].length?["radio"===e.config.componentName&&r.children&&!r.children.length?[i("span",{style:{width:"calc(100% - "+(e.config.treeWidth||0)+"px)","text-align":"center"}},[i("el-radio-group",{attrs:{size:e.config.componentConfig.size||"mini"},on:{change:e.radioChange},model:{value:r[e.config.bindValue[r._layer]],callback:function(t){e.$set(r,e.config.bindValue[r._layer],t)},expression:"data[config.bindValue[data._layer]]"}},[e._l(e.config.componentList[r._layer],function(t){return[i("el-radio",{attrs:{border:e.config.componentConfig.border,disabled:"0"===r[e.config.componentConfig.disabled],label:t.label}},[e._v(e._s(t.text))])]})],2)],1)]:void 0]:e._e()],2)}}])})],1)},[],!1,null,null,null);a.options.__file="index.vue";var c={name:"authority",components:{authorityTree:a.exports},data:function(){return{treeConfig:{treeWidth:250,treeBackgroundColor:"#e0e0e0",throwTreeNode:!1,apiObj:{apiName:"listTreeDepartment",params:{queryStr:"isdisable = 1",deptID:this.$storage.get("userInfo").companyId}},disabled:"isdisable",accordion:!1,"show-checkbox":!1,"highlight-current":!1,"default-expand-all":!0,props:{label:"name"},componentName:"radio",componentConfig:{border:!1,size:"mini",disabled:"isdisable"},bindValue:["","bindValue"],componentList:[[],[{label:"0",text:"显示个人数据"},{label:"1",text:"显示部门数据"},{label:"2",text:"显示所有数据"}]]}}},created:function(){},methods:{treedatabridge:function(e){console.log(e)},getTreeData:function(){this.$refs.authorityTree.getTreeData&&this.$refs.authorityTree.getTreeData()}}},s=(i("xC7E"),Object(o.a)(c,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"authorityTree"},[t("div",{staticStyle:{height:"calc(100% - 60px)"}},[t("authority-tree",{ref:"authorityTree",attrs:{config:this.treeConfig},on:{treedatabridge:this.treedatabridge}})],1),this._v(" "),t("div",{staticStyle:{height:"60px"}},[t("el-button",{attrs:{type:"primary"},on:{click:this.getTreeData}},[this._v("获取树数据")])],1)])},[],!1,null,"455738b4",null));s.options.__file="index.vue";t.default=s.exports},coFF:function(e,t,i){"use strict";var n=i("wflq");i.n(n).a},wflq:function(e,t,i){},xC7E:function(e,t,i){"use strict";var n=i("HMTl");i.n(n).a}}]);