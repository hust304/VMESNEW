<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
说明：视图用户员工 ViewVmesUserEmployee.xml
创建人：陈刚
创建时间：2018-07-20
 -->
<mapper namespace="com.xy.vmes.deecoop.dao.ViewVmesUserEmployeeMapper">
    <select id="findViewUserEmployList" parameterType="com.yvan.PageData" resultType="java.util.Map">
        select
            uuid() as id,
            a.id as user_id,
            a.employ_id as user_employ_id,
            a.company_id as user_company_id,
            a.user_code,
            a.password,

            a.open_id,
            a.user_name,
            a.isdisable as user_isdisable,
            a.cdate as user_cdate,
            a.cuser as user_cuser,

            a.udate as user_udate,
            a.uuser as user_uuser,
            a.column_1 as user_column_1,
            a.column_2 as user_column_2,
            a.column_3 as user_column_3,

            b.id as employ_id,
            b.code as employ_code,
            b.type as employ_type,
            b.user_id as employ_user_id,
            b.company_id as employ_company_id,
            b.name as employ_name,
            b.name_en as employ_name_en,

            b.photo,b.icon,b.mobile,b.email,b.sex,
            b.birthday,b.entry_date,b.native_place,b.political,b.identity_number,

            b.marital,
            b.isdisable as employ_isdisable,
            b.cdate as employ_cdate,
            b.cuser as employ_cuser,
            b.udate as employ_udate,

            b.uuser as employ_uuser,
            b.column_1 as employ_column_1,
            b.column_2 as employ_column_2,
            b.column_3 as employ_column_3
        from deecoop.vmes_user a
            left join deecoop.vmes_employee b on a.employ_id = b.id
        <choose>
            <when test="(mapSize == null || mapSize == 0) and 'true' != isQueryAll ">
                where 1=2
            </when>
            <otherwise>
                <where>
                    <if test="user_id != null and user_id != ''" >
                        and user_id = #{user_id}
                    </if>
                    <if test="user_companyId != null and user_companyId != ''" >
                        and user_companyId = #{user_companyId}
                    </if>
                    <if test="user_userCode != null and user_userCode != ''" >
                        and user_code = #{user_userCode}
                    </if>
                    <if test="password != null and password != ''" >
                        and password = #{password}
                    </if>
                    <if test="userName != null and userName != ''" >
                        and userName = #{userName}
                    </if>
                    <if test="user_isdisable != null and user_isdisable != ''" >
                        and user_isdisable = #{user_isdisable}
                    </if>

                    <if test="employ_id != null and employ_id != ''" >
                        and employ_id = #{employ_id}
                    </if>
                    <if test="employ_companyId != null and employ_companyId != ''" >
                        and employ_companyId = #{employ_companyId}
                    </if>
                    <if test="employ_code != null and employ_code != ''" >
                        and employ_code = #{employ_code}
                    </if>
                    <if test="employ_name != null and employ_name != ''" >
                        and employ_name =#{employ_name}
                    </if>
                    <if test="employ_nameEn != null and employ_nameEn != ''" >
                        and employ_nameEn = #{employ_nameEn}
                    </if>
                    <if test="employ_type != null and employ_type != ''" >
                        and employ_type = #{employ_type}
                    </if>
                    <if test="mobile != null and mobile != ''" >
                        and mobile = #{mobile}
                    </if>
                    <if test="email != null and email != ''" >
                        and email = #{email}
                    </if>
                    <if test="employ_isdisable != null and employ_isdisable != ''" >
                        and employ_isdisable = #{employ_isdisable}
                    </if>

                    <!--queryStr 自定义sql查询语句-->
                    <if test="queryStr != null and queryStr!=''" >
                        and ${queryStr}
                    </if>
                </where>
            </otherwise>
        </choose>
    </select>
</mapper>